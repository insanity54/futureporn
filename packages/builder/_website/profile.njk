---
layout: layouts/profile.njk
---



<div x-data="user" class="content">

  <div class="box">
    <p class="title">User Profile</p>

    <a 
      x-cloak 
      x-show="$store.auth.jwt===''" 
      class="button is-primary" 
      href="{{ env.STRAPI_BACKEND_URL }}/api/connect/patreon"
    >
    Log In
    </a>

    <div
      x-cloak 
      x-show="$store.auth.jwt!==''" 
      x-transition
    >

      <div>
        <span x-text="$store.auth.username" class="subtitle mr-2"></span>(<span x-text="$store.user.role"></span>)
        <button 
          class="button is-warning is-outlined is-small mb-5"
          x-on:click="$store.auth.logout"
        >
          <span class="icon">
            <i class="fab fa-patreon"></i>
          </span>
          <span>Log Out</span>
        </button>
      </div>



      <section x-cloak x-show="!!$store.auth.jwt && $store.user.role === 'patron'" class="mb-5">
      <h3 class="heading">Patron Perks</h3>
        
      <p>Thank you so much for supporting Futureporn!</p>

        <div  class="mb-5">
          <label class="checkbox noselect">
            <input 
              type="checkbox"
              x-model="isNamePublic"
            >
            Publically display <b x-text="$store.auth.username"></b> on the patrons page.
          </label>
          <p><i>This setting does not apply immediately. It takes a few days for the patrons page to update.</i></p>
        </div>


        <button
          class="button is-primary"
          :class="{
            'is-loading': isLoading,
            'is-success': isSuccess,
            'is-warning': isDirty&&!isSuccess,
          }"
          x-on:click="updateIsNamePublic"
        >
        <span x-show="!isDirty" class="icon">
          <i class="fas fa-save"></i>
        </span>
        <span x-cloak x-show="isDirty&&isSuccess" class="icon">
          <i class="fas fa-check"></i>
        </span>
        <span x-cloak x-show="isDirty&&!isSuccess" class="icon">
          <i class="fas fa-x"></i>
        </span>
        <span>Save</span>
      </button>
      </section>

      <section x-cloak x-show="!!$store.auth.jwt && $store.user.role !== 'patron'">
        <p>Welcome to Futureporn, <span x-text="$store.auth.username"></span>! It seems that you are not a patron yet. Please log out and log in again if you believe this is an error. Thank you for your interest!</p>
      </section>

    </div>

  </div>
</div>