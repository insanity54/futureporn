(function () {
    var k;
    function aa(a) {
        var b = 0;
        return function () {
            return b < a.length ? { done: !1, value: a[b++] } : { done: !0 };
        };
    }
    var ba =
        "function" == typeof Object.defineProperties
            ? Object.defineProperty
            : function (a, b, c) {
                  if (a == Array.prototype || a == Object.prototype) return a;
                  a[b] = c.value;
                  return a;
              };
    function ca(a) {
        a = ["object" == typeof globalThis && globalThis, a, "object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global];
        for (var b = 0; b < a.length; ++b) {
            var c = a[b];
            if (c && c.Math == Math) return c;
        }
        throw Error("Cannot find global object");
    }
    var da = ca(this);
    function ea(a, b) {
        if (b)
            a: {
                var c = da;
                a = a.split(".");
                for (var d = 0; d < a.length - 1; d++) {
                    var e = a[d];
                    if (!(e in c)) break a;
                    c = c[e];
                }
                a = a[a.length - 1];
                d = c[a];
                b = b(d);
                b != d && null != b && ba(c, a, { configurable: !0, writable: !0, value: b });
            }
    }
    ea("Symbol", function (a) {
        function b(f) {
            if (this instanceof b) throw new TypeError("Symbol is not a constructor");
            return new c(d + (f || "") + "_" + e++, f);
        }
        function c(f, g) {
            this.YO = f;
            ba(this, "description", { configurable: !0, writable: !0, value: g });
        }
        if (a) return a;
        c.prototype.toString = function () {
            return this.YO;
        };
        var d = "jscomp_symbol_" + ((1e9 * Math.random()) >>> 0) + "_",
            e = 0;
        return b;
    });
    ea("Symbol.iterator", function (a) {
        if (a) return a;
        a = Symbol("Symbol.iterator");
        for (var b = "Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "), c = 0; c < b.length; c++) {
            var d = da[b[c]];
            "function" === typeof d &&
                "function" != typeof d.prototype[a] &&
                ba(d.prototype, a, {
                    configurable: !0,
                    writable: !0,
                    value: function () {
                        return fa(aa(this));
                    },
                });
        }
        return a;
    });
    function fa(a) {
        a = { next: a };
        a[Symbol.iterator] = function () {
            return this;
        };
        return a;
    }
    function l(a) {
        var b = "undefined" != typeof Symbol && Symbol.iterator && a[Symbol.iterator];
        return b ? b.call(a) : { next: aa(a) };
    }
    function ha(a) {
        if (!(a instanceof Array)) {
            a = l(a);
            for (var b, c = []; !(b = a.next()).done; ) c.push(b.value);
            a = c;
        }
        return a;
    }
    var ia =
            "function" == typeof Object.create
                ? Object.create
                : function (a) {
                      function b() {}
                      b.prototype = a;
                      return new b();
                  },
        ka;
    if ("function" == typeof Object.setPrototypeOf) ka = Object.setPrototypeOf;
    else {
        var la;
        a: {
            var ma = { a: !0 },
                na = {};
            try {
                na.__proto__ = ma;
                la = na.a;
                break a;
            } catch (a) {}
            la = !1;
        }
        ka = la
            ? function (a, b) {
                  a.__proto__ = b;
                  if (a.__proto__ !== b) throw new TypeError(a + " is not extensible");
                  return a;
              }
            : null;
    }
    var pa = ka;
    function q(a, b) {
        a.prototype = ia(b.prototype);
        a.prototype.constructor = a;
        if (pa) pa(a, b);
        else
            for (var c in b)
                if ("prototype" != c)
                    if (Object.defineProperties) {
                        var d = Object.getOwnPropertyDescriptor(b, c);
                        d && Object.defineProperty(a, c, d);
                    } else a[c] = b[c];
        a.RY = b.prototype;
    }
    function qa() {
        this.ut = !1;
        this.Wm = null;
        this.td = void 0;
        this.aa = 1;
        this.PJ = this.kn = 0;
        this.$m = null;
    }
    function ra(a) {
        if (a.ut) throw new TypeError("Generator is already running");
        a.ut = !0;
    }
    qa.prototype.Nt = function (a) {
        this.td = a;
    };
    qa.prototype.fv = function (a) {
        this.$m = { BJ: a, CR: !0 };
        this.aa = this.kn || this.PJ;
    };
    qa.prototype.return = function (a) {
        this.$m = { return: a };
        this.aa = this.PJ;
    };
    function sa(a, b, c) {
        a.aa = c;
        return { value: b };
    }
    function ta(a, b) {
        a.aa = b;
        a.kn = 0;
    }
    function ua(a) {
        a.kn = 0;
        var b = a.$m.BJ;
        a.$m = null;
        return b;
    }
    function va(a) {
        this.Eb = new qa();
        this.GS = a;
    }
    va.prototype.Nt = function (a) {
        ra(this.Eb);
        if (this.Eb.Wm) return wa(this, this.Eb.Wm.next, a, this.Eb.Nt);
        this.Eb.Nt(a);
        return xa(this);
    };
    function ya(a, b) {
        ra(a.Eb);
        var c = a.Eb.Wm;
        if (c)
            return wa(
                a,
                "return" in c
                    ? c["return"]
                    : function (d) {
                          return { value: d, done: !0 };
                      },
                b,
                a.Eb.return
            );
        a.Eb.return(b);
        return xa(a);
    }
    va.prototype.fv = function (a) {
        ra(this.Eb);
        if (this.Eb.Wm) return wa(this, this.Eb.Wm["throw"], a, this.Eb.Nt);
        this.Eb.fv(a);
        return xa(this);
    };
    function wa(a, b, c, d) {
        try {
            var e = b.call(a.Eb.Wm, c);
            if (!(e instanceof Object)) throw new TypeError("Iterator result " + e + " is not an object");
            if (!e.done) return (a.Eb.ut = !1), e;
            var f = e.value;
        } catch (g) {
            return (a.Eb.Wm = null), a.Eb.fv(g), xa(a);
        }
        a.Eb.Wm = null;
        d.call(a.Eb, f);
        return xa(a);
    }
    function xa(a) {
        for (; a.Eb.aa; )
            try {
                var b = a.GS(a.Eb);
                if (b) return (a.Eb.ut = !1), { value: b.value, done: !1 };
            } catch (c) {
                (a.Eb.td = void 0), a.Eb.fv(c);
            }
        a.Eb.ut = !1;
        if (a.Eb.$m) {
            b = a.Eb.$m;
            a.Eb.$m = null;
            if (b.CR) throw b.BJ;
            return { value: b.return, done: !0 };
        }
        return { value: void 0, done: !0 };
    }
    function za(a) {
        this.next = function (b) {
            return a.Nt(b);
        };
        this.throw = function (b) {
            return a.fv(b);
        };
        this.return = function (b) {
            return ya(a, b);
        };
        this[Symbol.iterator] = function () {
            return this;
        };
    }
    function Aa(a, b) {
        b = new za(new va(b));
        pa && a.prototype && pa(b, a.prototype);
        return b;
    }
    function Ba() {
        for (var a = Number(this), b = [], c = a; c < arguments.length; c++) b[c - a] = arguments[c];
        return b;
    }
    ea("Promise", function (a) {
        function b(g) {
            this.lr = 0;
            this.vu = void 0;
            this.xq = [];
            this.nL = !1;
            var h = this.fC();
            try {
                g(h.resolve, h.reject);
            } catch (m) {
                h.reject(m);
            }
        }
        function c() {
            this.sl = null;
        }
        function d(g) {
            return g instanceof b
                ? g
                : new b(function (h) {
                      h(g);
                  });
        }
        if (a) return a;
        c.prototype.JH = function (g) {
            if (null == this.sl) {
                this.sl = [];
                var h = this;
                this.KH(function () {
                    h.GQ();
                });
            }
            this.sl.push(g);
        };
        var e = da.setTimeout;
        c.prototype.KH = function (g) {
            e(g, 0);
        };
        c.prototype.GQ = function () {
            for (; this.sl && this.sl.length; ) {
                var g = this.sl;
                this.sl = [];
                for (var h = 0; h < g.length; ++h) {
                    var m = g[h];
                    g[h] = null;
                    try {
                        m();
                    } catch (n) {
                        this.oP(n);
                    }
                }
            }
            this.sl = null;
        };
        c.prototype.oP = function (g) {
            this.KH(function () {
                throw g;
            });
        };
        b.prototype.fC = function () {
            function g(n) {
                return function (p) {
                    m || ((m = !0), n.call(h, p));
                };
            }
            var h = this,
                m = !1;
            return { resolve: g(this.eT), reject: g(this.DF) };
        };
        b.prototype.eT = function (g) {
            if (g === this) this.DF(new TypeError("A Promise cannot resolve to itself"));
            else if (g instanceof b) this.OT(g);
            else {
                a: switch (typeof g) {
                    case "object":
                        var h = null != g;
                        break a;
                    case "function":
                        h = !0;
                        break a;
                    default:
                        h = !1;
                }
                h ? this.dT(g) : this.$J(g);
            }
        };
        b.prototype.dT = function (g) {
            var h = void 0;
            try {
                h = g.then;
            } catch (m) {
                this.DF(m);
                return;
            }
            "function" == typeof h ? this.PT(h, g) : this.$J(g);
        };
        b.prototype.DF = function (g) {
            this.RN(2, g);
        };
        b.prototype.$J = function (g) {
            this.RN(1, g);
        };
        b.prototype.RN = function (g, h) {
            if (0 != this.lr) throw Error("Cannot settle(" + g + ", " + h + "): Promise already settled in state" + this.lr);
            this.lr = g;
            this.vu = h;
            2 === this.lr && this.AT();
            this.HQ();
        };
        b.prototype.AT = function () {
            var g = this;
            e(function () {
                if (g.kS()) {
                    var h = da.console;
                    "undefined" !== typeof h && h.error(g.vu);
                }
            }, 1);
        };
        b.prototype.kS = function () {
            if (this.nL) return !1;
            var g = da.CustomEvent,
                h = da.Event,
                m = da.dispatchEvent;
            if ("undefined" === typeof m) return !0;
            "function" === typeof g
                ? (g = new g("unhandledrejection", { cancelable: !0 }))
                : "function" === typeof h
                ? (g = new h("unhandledrejection", { cancelable: !0 }))
                : ((g = da.document.createEvent("CustomEvent")), g.initCustomEvent("unhandledrejection", !1, !0, g));
            g.promise = this;
            g.reason = this.vu;
            return m(g);
        };
        b.prototype.HQ = function () {
            if (null != this.xq) {
                for (var g = 0; g < this.xq.length; ++g) f.JH(this.xq[g]);
                this.xq = null;
            }
        };
        var f = new c();
        b.prototype.OT = function (g) {
            var h = this.fC();
            g.iw(h.resolve, h.reject);
        };
        b.prototype.PT = function (g, h) {
            var m = this.fC();
            try {
                g.call(h, m.resolve, m.reject);
            } catch (n) {
                m.reject(n);
            }
        };
        b.prototype.then = function (g, h) {
            function m(x, D) {
                return "function" == typeof x
                    ? function (J) {
                          try {
                              n(x(J));
                          } catch (I) {
                              p(I);
                          }
                      }
                    : D;
            }
            var n,
                p,
                u = new b(function (x, D) {
                    n = x;
                    p = D;
                });
            this.iw(m(g, n), m(h, p));
            return u;
        };
        b.prototype.catch = function (g) {
            return this.then(void 0, g);
        };
        b.prototype.iw = function (g, h) {
            function m() {
                switch (n.lr) {
                    case 1:
                        g(n.vu);
                        break;
                    case 2:
                        h(n.vu);
                        break;
                    default:
                        throw Error("Unexpected state: " + n.lr);
                }
            }
            var n = this;
            null == this.xq ? f.JH(m) : this.xq.push(m);
            this.nL = !0;
        };
        b.resolve = d;
        b.reject = function (g) {
            return new b(function (h, m) {
                m(g);
            });
        };
        b.race = function (g) {
            return new b(function (h, m) {
                for (var n = l(g), p = n.next(); !p.done; p = n.next()) d(p.value).iw(h, m);
            });
        };
        b.all = function (g) {
            var h = l(g),
                m = h.next();
            return m.done
                ? d([])
                : new b(function (n, p) {
                      function u(J) {
                          return function (I) {
                              x[J] = I;
                              D--;
                              0 == D && n(x);
                          };
                      }
                      var x = [],
                          D = 0;
                      do x.push(void 0), D++, d(m.value).iw(u(x.length - 1), p), (m = h.next());
                      while (!m.done);
                  });
        };
        return b;
    });
    ea("Number.isNaN", function (a) {
        return a
            ? a
            : function (b) {
                  return "number" === typeof b && isNaN(b);
              };
    });
    function Ca(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b);
    }
    ea("WeakMap", function (a) {
        function b(m) {
            this.it = (h += Math.random() + 1).toString();
            if (m) {
                m = l(m);
                for (var n; !(n = m.next()).done; ) (n = n.value), this.set(n[0], n[1]);
            }
        }
        function c() {}
        function d(m) {
            var n = typeof m;
            return ("object" === n && null !== m) || "function" === n;
        }
        function e(m) {
            if (!Ca(m, g)) {
                var n = new c();
                ba(m, g, { value: n });
            }
        }
        function f(m) {
            var n = Object[m];
            n &&
                (Object[m] = function (p) {
                    if (p instanceof c) return p;
                    Object.isExtensible(p) && e(p);
                    return n(p);
                });
        }
        if (
            (function () {
                if (!a || !Object.seal) return !1;
                try {
                    var m = Object.seal({}),
                        n = Object.seal({}),
                        p = new a([
                            [m, 2],
                            [n, 3],
                        ]);
                    if (2 != p.get(m) || 3 != p.get(n)) return !1;
                    p.delete(m);
                    p.set(n, 4);
                    return !p.has(m) && 4 == p.get(n);
                } catch (u) {
                    return !1;
                }
            })()
        )
            return a;
        var g = "$jscomp_hidden_" + Math.random();
        f("freeze");
        f("preventExtensions");
        f("seal");
        var h = 0;
        b.prototype.set = function (m, n) {
            if (!d(m)) throw Error("Invalid WeakMap key");
            e(m);
            if (!Ca(m, g)) throw Error("WeakMap key fail: " + m);
            m[g][this.it] = n;
            return this;
        };
        b.prototype.get = function (m) {
            return d(m) && Ca(m, g) ? m[g][this.it] : void 0;
        };
        b.prototype.has = function (m) {
            return d(m) && Ca(m, g) && Ca(m[g], this.it);
        };
        b.prototype.delete = function (m) {
            return d(m) && Ca(m, g) && Ca(m[g], this.it) ? delete m[g][this.it] : !1;
        };
        return b;
    });
    ea("Map", function (a) {
        function b() {
            var h = {};
            return (h.previous = h.next = h.head = h);
        }
        function c(h, m) {
            var n = h.lk;
            return fa(function () {
                if (n) {
                    for (; n.head != h.lk; ) n = n.previous;
                    for (; n.next != n.head; ) return (n = n.next), { done: !1, value: m(n) };
                    n = null;
                }
                return { done: !0, value: void 0 };
            });
        }
        function d(h, m) {
            var n = m && typeof m;
            "object" == n || "function" == n ? (f.has(m) ? (n = f.get(m)) : ((n = "" + ++g), f.set(m, n))) : (n = "p_" + m);
            var p = h.rs[n];
            if (p && Ca(h.rs, n))
                for (h = 0; h < p.length; h++) {
                    var u = p[h];
                    if ((m !== m && u.key !== u.key) || m === u.key) return { id: n, list: p, index: h, ef: u };
                }
            return { id: n, list: p, index: -1, ef: void 0 };
        }
        function e(h) {
            this.rs = {};
            this.lk = b();
            this.size = 0;
            if (h) {
                h = l(h);
                for (var m; !(m = h.next()).done; ) (m = m.value), this.set(m[0], m[1]);
            }
        }
        if (
            (function () {
                if (!a || "function" != typeof a || !a.prototype.entries || "function" != typeof Object.seal) return !1;
                try {
                    var h = Object.seal({ x: 4 }),
                        m = new a(l([[h, "s"]]));
                    if ("s" != m.get(h) || 1 != m.size || m.get({ x: 4 }) || m.set({ x: 4 }, "t") != m || 2 != m.size) return !1;
                    var n = m.entries(),
                        p = n.next();
                    if (p.done || p.value[0] != h || "s" != p.value[1]) return !1;
                    p = n.next();
                    return p.done || 4 != p.value[0].x || "t" != p.value[1] || !n.next().done ? !1 : !0;
                } catch (u) {
                    return !1;
                }
            })()
        )
            return a;
        var f = new WeakMap();
        e.prototype.set = function (h, m) {
            h = 0 === h ? 0 : h;
            var n = d(this, h);
            n.list || (n.list = this.rs[n.id] = []);
            n.ef ? (n.ef.value = m) : ((n.ef = { next: this.lk, previous: this.lk.previous, head: this.lk, key: h, value: m }), n.list.push(n.ef), (this.lk.previous.next = n.ef), (this.lk.previous = n.ef), this.size++);
            return this;
        };
        e.prototype.delete = function (h) {
            h = d(this, h);
            return h.ef && h.list ? (h.list.splice(h.index, 1), h.list.length || delete this.rs[h.id], (h.ef.previous.next = h.ef.next), (h.ef.next.previous = h.ef.previous), (h.ef.head = null), this.size--, !0) : !1;
        };
        e.prototype.clear = function () {
            this.rs = {};
            this.lk = this.lk.previous = b();
            this.size = 0;
        };
        e.prototype.has = function (h) {
            return !!d(this, h).ef;
        };
        e.prototype.get = function (h) {
            return (h = d(this, h).ef) && h.value;
        };
        e.prototype.entries = function () {
            return c(this, function (h) {
                return [h.key, h.value];
            });
        };
        e.prototype.keys = function () {
            return c(this, function (h) {
                return h.key;
            });
        };
        e.prototype.values = function () {
            return c(this, function (h) {
                return h.value;
            });
        };
        e.prototype.forEach = function (h, m) {
            for (var n = this.entries(), p; !(p = n.next()).done; ) (p = p.value), h.call(m, p[1], p[0], this);
        };
        e.prototype[Symbol.iterator] = e.prototype.entries;
        var g = 0;
        return e;
    });
    var Da =
        "function" == typeof Object.assign
            ? Object.assign
            : function (a, b) {
                  for (var c = 1; c < arguments.length; c++) {
                      var d = arguments[c];
                      if (d) for (var e in d) Ca(d, e) && (a[e] = d[e]);
                  }
                  return a;
              };
    ea("Object.assign", function (a) {
        return a || Da;
    });
    function Ea(a, b) {
        a instanceof String && (a += "");
        var c = 0,
            d = !1,
            e = {
                next: function () {
                    if (!d && c < a.length) {
                        var f = c++;
                        return { value: b(f, a[f]), done: !1 };
                    }
                    d = !0;
                    return { done: !0, value: void 0 };
                },
            };
        e[Symbol.iterator] = function () {
            return e;
        };
        return e;
    }
    ea("Array.prototype.values", function (a) {
        return a
            ? a
            : function () {
                  return Ea(this, function (b, c) {
                      return c;
                  });
              };
    });
    ea("Array.prototype.keys", function (a) {
        return a
            ? a
            : function () {
                  return Ea(this, function (b) {
                      return b;
                  });
              };
    });
    ea("Object.is", function (a) {
        return a
            ? a
            : function (b, c) {
                  return b === c ? 0 !== b || 1 / b === 1 / c : b !== b && c !== c;
              };
    });
    ea("Array.prototype.includes", function (a) {
        return a
            ? a
            : function (b, c) {
                  var d = this;
                  d instanceof String && (d = String(d));
                  var e = d.length;
                  c = c || 0;
                  for (0 > c && (c = Math.max(c + e, 0)); c < e; c++) {
                      var f = d[c];
                      if (f === b || Object.is(f, b)) return !0;
                  }
                  return !1;
              };
    });
    function Fa(a, b, c) {
        if (null == a) throw new TypeError("The 'this' value for String.prototype." + c + " must not be null or undefined");
        if (b instanceof RegExp) throw new TypeError("First argument to String.prototype." + c + " must not be a regular expression");
        return a + "";
    }
    ea("String.prototype.includes", function (a) {
        return a
            ? a
            : function (b, c) {
                  return -1 !== Fa(this, b, "includes").indexOf(b, c || 0);
              };
    });
    ea("Array.from", function (a) {
        return a
            ? a
            : function (b, c, d) {
                  c =
                      null != c
                          ? c
                          : function (h) {
                                return h;
                            };
                  var e = [],
                      f = "undefined" != typeof Symbol && Symbol.iterator && b[Symbol.iterator];
                  if ("function" == typeof f) {
                      b = f.call(b);
                      for (var g = 0; !(f = b.next()).done; ) e.push(c.call(d, f.value, g++));
                  } else for (f = b.length, g = 0; g < f; g++) e.push(c.call(d, b[g], g));
                  return e;
              };
    });
    function Ga(a, b, c) {
        a instanceof String && (a = String(a));
        for (var d = a.length, e = 0; e < d; e++) {
            var f = a[e];
            if (b.call(c, f, e, a)) return { MK: e, Br: f };
        }
        return { MK: -1, Br: void 0 };
    }
    ea("Array.prototype.find", function (a) {
        return a
            ? a
            : function (b, c) {
                  return Ga(this, b, c).Br;
              };
    });
    ea("Set", function (a) {
        function b(c) {
            this.sj = new Map();
            if (c) {
                c = l(c);
                for (var d; !(d = c.next()).done; ) this.add(d.value);
            }
            this.size = this.sj.size;
        }
        if (
            (function () {
                if (!a || "function" != typeof a || !a.prototype.entries || "function" != typeof Object.seal) return !1;
                try {
                    var c = Object.seal({ x: 4 }),
                        d = new a(l([c]));
                    if (!d.has(c) || 1 != d.size || d.add(c) != d || 1 != d.size || d.add({ x: 4 }) != d || 2 != d.size) return !1;
                    var e = d.entries(),
                        f = e.next();
                    if (f.done || f.value[0] != c || f.value[1] != c) return !1;
                    f = e.next();
                    return f.done || f.value[0] == c || 4 != f.value[0].x || f.value[1] != f.value[0] ? !1 : e.next().done;
                } catch (g) {
                    return !1;
                }
            })()
        )
            return a;
        b.prototype.add = function (c) {
            c = 0 === c ? 0 : c;
            this.sj.set(c, c);
            this.size = this.sj.size;
            return this;
        };
        b.prototype.delete = function (c) {
            c = this.sj.delete(c);
            this.size = this.sj.size;
            return c;
        };
        b.prototype.clear = function () {
            this.sj.clear();
            this.size = 0;
        };
        b.prototype.has = function (c) {
            return this.sj.has(c);
        };
        b.prototype.entries = function () {
            return this.sj.entries();
        };
        b.prototype.values = function () {
            return this.sj.values();
        };
        b.prototype.keys = b.prototype.values;
        b.prototype[Symbol.iterator] = b.prototype.values;
        b.prototype.forEach = function (c, d) {
            var e = this;
            this.sj.forEach(function (f) {
                return c.call(d, f, f, e);
            });
        };
        return b;
    });
    ea("Array.prototype.entries", function (a) {
        return a
            ? a
            : function () {
                  return Ea(this, function (b, c) {
                      return [b, c];
                  });
              };
    });
    ea("Promise.prototype.finally", function (a) {
        return a
            ? a
            : function (b) {
                  return this.then(
                      function (c) {
                          return Promise.resolve(b()).then(function () {
                              return c;
                          });
                      },
                      function (c) {
                          return Promise.resolve(b()).then(function () {
                              throw c;
                          });
                      }
                  );
              };
    });
    ea("String.prototype.startsWith", function (a) {
        return a
            ? a
            : function (b, c) {
                  var d = Fa(this, b, "startsWith");
                  b += "";
                  var e = d.length,
                      f = b.length;
                  c = Math.max(0, Math.min(c | 0, d.length));
                  for (var g = 0; g < f && c < e; ) if (d[c++] != b[g++]) return !1;
                  return g >= f;
              };
    });
    ea("Math.trunc", function (a) {
        return a
            ? a
            : function (b) {
                  b = Number(b);
                  if (isNaN(b) || Infinity === b || -Infinity === b || 0 === b) return b;
                  var c = Math.floor(Math.abs(b));
                  return 0 > b ? -c : c;
              };
    });
    function Ha(a) {
        a = Math.trunc(a) || 0;
        0 > a && (a += this.length);
        if (!(0 > a || a >= this.length)) return this[a];
    }
    ea("Array.prototype.at", function (a) {
        return a ? a : Ha;
    });
    function Ia(a) {
        return a ? a : Ha;
    }
    ea("Int8Array.prototype.at", Ia);
    ea("Uint8Array.prototype.at", Ia);
    ea("Uint8ClampedArray.prototype.at", Ia);
    ea("Int16Array.prototype.at", Ia);
    ea("Uint16Array.prototype.at", Ia);
    ea("Int32Array.prototype.at", Ia);
    ea("Uint32Array.prototype.at", Ia);
    ea("Float32Array.prototype.at", Ia);
    ea("Float64Array.prototype.at", Ia);
    ea("String.prototype.at", function (a) {
        return a ? a : Ha;
    });
    ea("String.prototype.endsWith", function (a) {
        return a
            ? a
            : function (b, c) {
                  var d = Fa(this, b, "endsWith");
                  b += "";
                  void 0 === c && (c = d.length);
                  c = Math.max(0, Math.min(c | 0, d.length));
                  for (var e = b.length; 0 < e && 0 < c; ) if (d[--c] != b[--e]) return !1;
                  return 0 >= e;
              };
    });
    ea("Object.fromEntries", function (a) {
        return a
            ? a
            : function (b) {
                  var c = {};
                  if (!(Symbol.iterator in b)) throw new TypeError("" + b + " is not iterable");
                  b = b[Symbol.iterator].call(b);
                  for (var d = b.next(); !d.done; d = b.next()) {
                      d = d.value;
                      if (Object(d) !== d) throw new TypeError("iterable for fromEntries should yield objects");
                      c[d[0]] = d[1];
                  }
                  return c;
              };
    });
    ea("Array.prototype.fill", function (a) {
        return a
            ? a
            : function (b, c, d) {
                  var e = this.length || 0;
                  0 > c && (c = Math.max(0, e + c));
                  if (null == d || d > e) d = e;
                  d = Number(d);
                  0 > d && (d = Math.max(0, e + d));
                  for (c = Number(c || 0); c < d; c++) this[c] = b;
                  return this;
              };
    });
    function Ja(a) {
        return a ? a : Array.prototype.fill;
    }
    ea("Int8Array.prototype.fill", Ja);
    ea("Uint8Array.prototype.fill", Ja);
    ea("Uint8ClampedArray.prototype.fill", Ja);
    ea("Int16Array.prototype.fill", Ja);
    ea("Uint16Array.prototype.fill", Ja);
    ea("Int32Array.prototype.fill", Ja);
    ea("Uint32Array.prototype.fill", Ja);
    ea("Float32Array.prototype.fill", Ja);
    ea("Float64Array.prototype.fill", Ja);
    ea("Object.values", function (a) {
        return a
            ? a
            : function (b) {
                  var c = [],
                      d;
                  for (d in b) Ca(b, d) && c.push(b[d]);
                  return c;
              };
    });
    ea("Object.entries", function (a) {
        return a
            ? a
            : function (b) {
                  var c = [],
                      d;
                  for (d in b) Ca(b, d) && c.push([d, b[d]]);
                  return c;
              };
    });
    ea("Number.parseInt", function (a) {
        return a || parseInt;
    });
    ea("Number.MIN_SAFE_INTEGER", function () {
        return -9007199254740991;
    });
    ea("Array.prototype.findIndex", function (a) {
        return a
            ? a
            : function (b, c) {
                  return Ga(this, b, c).MK;
              };
    });
    ea("String.prototype.trimLeft", function (a) {
        function b() {
            return this.replace(/^[\s\xa0]+/, "");
        }
        return a || b;
    });
    ea("String.prototype.trimStart", function (a) {
        return a || String.prototype.trimLeft;
    });
    ea("String.prototype.repeat", function (a) {
        return a
            ? a
            : function (b) {
                  var c = Fa(this, null, "repeat");
                  if (0 > b || 1342177279 < b) throw new RangeError("Invalid count value");
                  b |= 0;
                  for (var d = ""; b; ) if ((b & 1 && (d += c), (b >>>= 1))) c += c;
                  return d;
              };
    });
    var Ka = window.newrelic;
    function La(a, b, c, d, e) {
        e = void 0 === e ? {} : e;
        try {
            if (void 0 !== Ka) {
                var f = {};
                f["attributes.level"] = a;
                f["attributes.filename"] = b;
                f["attributes.dirname"] = c;
                if ("object" === typeof e) for (var g in e) f["attributes." + g] = e[g];
                Ka.noticeError(d, f);
            }
        } catch (h) {
            r("New Relic Error in reportError: " + h.toString(), "debug.ts", "common");
        }
    }
    function Ma(a) {
        void 0 !== window.console && console.info(a, "");
    }
    function t(a, b, c, d, e) {
        e = void 0 === e ? "" : e;
        void 0 !== window.console && console.warn(e.concat("WARN "), a, void 0 === d ? "" : d);
        try {
            var f = "object" === typeof a ? JSON.stringify(a) : a.toString();
        } catch (g) {
            f = "" + a;
        }
        La(e.concat("WARN"), b, c, Error(f), d);
    }
    function r(a, b, c, d, e) {
        e = void 0 === e ? "" : e;
        void 0 !== window.console && console.error(e.concat("ERROR "), a, void 0 === d ? "" : d);
        try {
            var f = "object" === typeof a ? JSON.stringify(a) : a.toString();
        } catch (g) {
            f = "" + a;
        }
        La(e.concat("ERROR"), b, c, Error(f), d);
    }
    function Na() {}
    window.onerror = function (a, b, c, d, e) {
        try {
            var f = JSON.stringify(e);
        } catch (g) {
            f = "" + e;
        }
        r(['"Message: " ' + a, '"URL: "  ' + b, '"Line: " ' + c, '"Column: " ' + d, '"Error object: " ' + f].join("\n"), "debug.ts", "common", {}, "");
        return !1;
    };
    var Oa = window.Hls,
        Pa;
    function Qa() {
        if (void 0 === Pa) {
            var a = !0;
            try {
                window.localStorage.setItem("cbModernizr", "cbModernizr"), window.localStorage.removeItem("cbModernizr");
            } catch (b) {
                a = !1;
            }
            Pa = a;
        }
        return Pa;
    }
    function Ra() {
        return void 0 !== window.history && void 0 !== window.history.pushState;
    }
    function Sa() {
        try {
            return !!document.createElement("audio").canPlayType;
        } catch (a) {
            return !1;
        }
    }
    var Ua;
    function Va() {
        if (void 0 !== Ua) return Ua;
        Ua = !1;
        try {
            if ("webkitAudioContext" in window) var a = new webkitAudioContext();
            else if ("AudioContext" in window) a = new AudioContext();
            else return Ua;
            if (null === a) return Ua;
            Ua = "function" === typeof a.createGain && "function" === typeof a.decodeAudioData && "function" === typeof a.createBufferSource && "function" === typeof a.createBufferSource().start;
            "function" === typeof a.close && a.close();
        } catch (b) {
            r("Error checking for audio context: " + b, "cbModernizr.ts", "common");
        }
        return Ua;
    }
    var Wa;
    function Xa() {
        if (void 0 !== Wa) return Wa;
        var a = document.createElement("audio");
        return (Wa = "function" === typeof a.canPlayType && "" !== a.canPlayType("audio/mpeg;codecs=mp3"));
    }
    var Ya = Object.prototype.hasOwnProperty.call(window, "onorientationchange");
    function Za() {
        var a = document.createElement("video").canPlayType("application/vnd.apple.mpegurl");
        return "probably" === a || "maybe" === a;
    }
    function $a() {
        return window.hasOwnProperty("requestAnimationFrame")
            ? window.requestAnimationFrame
            : window.hasOwnProperty("webkitRequestAnimationFrame")
            ? window.webkitRequestAnimationFrame
            : window.hasOwnProperty("mozRequestAnimationFrame")
            ? window.mozRequestAnimationFrame
            : function (a) {
                  window.setTimeout(function () {
                      a(0);
                  }, 1e3 / 7);
                  return Date.now();
              };
    }
    var ab;
    function bb() {
        if (void 0 !== ab) return ab;
        try {
            var a = Object.defineProperty({}, "passive", {
                get: function () {
                    ab = !0;
                },
            });
            window.addEventListener("testPassive", function () {}, a);
            window.removeEventListener("testPassive", function () {}, a);
            void 0 === ab && (ab = !1);
        } catch (b) {
            ab = !1;
        }
        return ab;
    }
    var cb,
        eb = !1;
    window.setTimeout(function () {
        eb = !0;
    }, 200);
    function fb() {
        if (void 0 !== cb && !eb) return cb;
        var a = document.documentElement.scrollTop;
        document.documentElement.style.height = window.innerHeight + 1 + "px";
        document.documentElement.scrollTop = a + 1;
        cb = document.documentElement.scrollTop !== a ? document.documentElement : document.body;
        document.documentElement.style.height = "";
        document.documentElement.scrollTop = a;
        eb = !1;
        return cb;
    }
    function gb() {
        return void 0 !== window.performance && void 0 !== window.performance.now;
    }
    function hb() {
        return void 0 !== window.chrome && (!!window.chrome.loadTimes || !!window.chrome.webstore || !!window.chrome.runtime);
    }
    function ib() {
        return /Edge\//i.test(navigator.userAgent);
    }
    function jb() {
        if (kb() && /WebKit/i.test(navigator.userAgent) && !/CriOS/i.test(navigator.userAgent)) return !0;
        var a = !1;
        void 0 !== window.safari && void 0 !== window.safari.pushNotification && (a = "[object SafariRemoteNotification]" === window.safari.pushNotification.toString());
        return /constructor/i.test(window.HTMLElement) || a;
    }
    function lb() {
        return [/SM-T827R4/, /SM-T550/, /SM-T330/, /SM-T232/, /SM-T335/, /SM-T813/, /SM-T510/].some(function (a) {
            return a.test(navigator.userAgent);
        });
    }
    function mb() {
        return (/iPad/i.test(navigator.userAgent) || ("MacIntel" === navigator.platform && 1 < navigator.maxTouchPoints)) && void 0 === window.MSStream;
    }
    function nb() {
        return /iPhone/i.test(navigator.userAgent) && void 0 === window.MSStream;
    }
    function kb() {
        return (/iPod/i.test(navigator.userAgent) && void 0 === window.MSStream) || nb() || mb();
    }
    function ob() {
        if (kb()) {
            var a = navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);
            return null === a ? void 0 : parseInt(a[1]);
        }
    }
    function pb() {
        return /Android|webOS|BlackBerry|IEMobile|Opera Mini|SamsungBrowser/i.test(navigator.userAgent) || kb();
    }
    function qb() {
        return !!document.documentMode;
    }
    function rb() {
        return qb() && void 0 === window.atob;
    }
    function sb() {
        return /Puffin/i.test(navigator.userAgent);
    }
    function tb() {
        var a = "unload";
        kb() && jb() && (a = "pagehide");
        return a;
    }
    function ub() {
        return "object" === typeof navigator && "object" === typeof navigator.mediaDevices && "function" === typeof navigator.mediaDevices.getUserMedia;
    }
    var vb;
    new Promise(function (a) {
        if (void 0 !== vb) a(vb);
        else {
            var b = new Image();
            b.onerror = function () {
                a(!1);
            };
            b.onload = function () {
                vb = 2 !== b.width;
                a(vb);
            };
            b.src =
                "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAASUkqAAgAAAABABIBAwABAAAABgASAAAAAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAABAAIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/iiiigD/2Q==";
        }
    })
        .then(function (a) {
            vb = a;
        })
        .catch(function () {});
    document.createElement("div");
    function wb() {
        return /Android/i.test(navigator.userAgent) || kb() || navigator.userAgent.indexOf("Mac") ? !0 : !1;
    }
    var xb = {},
        yb = {};
    function zb(a) {
        return Number.isNaN(Number(a)) ? 0 : Number(a);
    }
    function v(a, b, c, d, e) {
        d = void 0 === d ? !1 : d;
        e = void 0 === e ? !1 : e;
        if (b === window) var f = (xb[a] = zb(xb[a]) + 1);
        else if (b === document) f = yb[a] = zb(yb[a]) + 1;
        else if (b instanceof HTMLElement) {
            var g = "data-listener-count-" + a;
            f = zb(b.getAttribute(g)) + 1;
            b.setAttribute(g, "" + f);
        } else f = 1;
        42 < f &&
            t('event listener "' + a + '" has too many listeners. Element: ' + (b === document ? "document" : b === window ? "window" : b.outerHTML.split(">")[0] + ">"), "addEventListenerPolyfill.ts", "common", {
                listeners: f,
                "max-listeners": 42,
            });
        void 0 !== window.addEventListener
            ? ((d = bb() ? { capture: d, passive: e } : d), b.addEventListener(a, c, d))
            : void 0 !== window.attachEvent
            ? b.attachEvent("on" + a, c)
            : r("Could not resolve addEventListenerPoly( " + a + " ) to " + b, "addEventListenerPolyfill.ts", "common");
    }
    function Ab(a, b, c) {
        var d = void 0 === d ? !1 : d;
        var e = void 0 === e ? !1 : e;
        a = l(a);
        for (var f = a.next(); !f.done; f = a.next()) v(f.value, b, c, d, e);
    }
    function Bb(a, b, c, d, e) {
        d = void 0 === d ? !1 : d;
        e = void 0 === e ? !1 : e;
        if (b === window) var f = (xb[a] = zb(xb[a]) - 1);
        else if (b === document) f = yb[a] = zb(yb[a]) - 1;
        else if (b instanceof HTMLElement) {
            var g = "data-listener-count-" + a;
            f = zb(b.getAttribute(g)) - 1;
            b.setAttribute(g, "" + f);
        } else f = 1;
        0 > f && r('event listener "' + a + '" removed without being added', "addEventListenerPolyfill.ts", "common", { listeners: f });
        void 0 !== window.removeEventListener
            ? ((d = bb() ? { capture: d, passive: e } : d), b.removeEventListener(a, c, d))
            : void 0 !== window.detachEvent
            ? b.detachEvent("on" + a, c)
            : r("Could not resolve removeEventListenerPoly( " + a + " ) from " + b, "addEventListenerPolyfill.ts", "common");
    }
    function Cb(a, b) {
        function c(f) {
            b(f);
            Bb("touchend", a, c, d, e);
        }
        var d = void 0 === d ? !1 : d;
        var e = void 0 === e ? !1 : e;
        v("touchend", a, c, d, e);
    }
    function Db() {
        this.pL = !1;
    }
    da.Object.defineProperties(Db.prototype, {
        current: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return this.value;
            },
            set: function (a) {
                this.pL || ((this.value = a), (this.pL = !0));
            },
        },
    });
    function w(a, b) {
        a = void 0 === a ? "div" : a;
        this.Wg = [];
        this.nD = !1;
        this.Iw = new y("didReposition", { Ve: !1 });
        this.element = "string" === typeof a ? this.es(a, b) : a;
        this.initData(b);
        this.ia(b);
        this.element.setAttribute("ts", "" + this.constructor.name);
    }
    k = w.prototype;
    k.es = function (a) {
        a = document.createElement(a);
        a.style.height = "100%";
        a.style.width = "100%";
        a.style.position = "absolute";
        a.style.overflow = "hidden";
        a.style["-webkit-tap-highlight-color"] = "transparent";
        return a;
    };
    k.initData = function () {};
    k.ia = function () {};
    k.Yx = function () {
        this.nD = !0;
    };
    k.D = function () {};
    k.R = function () {
        this.D();
        for (var a = l(this.children()), b = a.next(); !b.done; b = a.next()) b.value.R();
        this.Iw.h(void 0);
    };
    k.Pv = function () {};
    k.Gd = function () {
        this.Pv();
        for (var a = l(this.children()), b = a.next(); !b.done; b = a.next()) b.value.Gd();
    };
    k.G = function (a, b) {
        Eb(this, a);
        void 0 === b && (b = this.element);
        a.nD || a.Yx();
        b.appendChild(a.element);
        return a;
    };
    function Fb(a, b) {
        Eb(a, b, 0);
        if (void 0 === c) var c = a.element;
        c.insertBefore(b.element, a.element.firstChild);
        return b;
    }
    function Gb(a, b) {
        if (0 > a.Wg.length) r("tried to add item before an index that does not exist", "component.ts", "defui");
        else {
            if (void 0 === c) var c = a.element;
            b.nD || b.Yx();
            if (0 === a.Wg.length) Eb(a, b), c.appendChild(b.element);
            else {
                var d = a.Wg[0].element;
                Eb(a, b, 0);
                c.insertBefore(b.element, d);
            }
        }
    }
    function Eb(a, b, c) {
        void 0 !== b.parent && b.parent !== a && b.parent.removeChild(b);
        void 0 === c ? a.Wg.push(b) : a.Wg.splice(c, 0, b);
        b.parent = a;
    }
    function Hb(a, b, c) {
        void 0 !== b.parent && b.parent !== a && b.parent.removeChild(b);
        c = void 0 === c ? -1 : a.Wg.indexOf(c);
        0 > c ? a.element.appendChild(b.element) : a.element.insertBefore(b.element, a.Wg[c].element);
        a.Wg.splice(c, 0, b);
        b.parent = a;
    }
    k.removeChild = function (a) {
        var b = this.Wg.indexOf(a);
        if (-1 === b) r("tried removing component that doesn't exist", "component.ts", "defui");
        else {
            this.Wg.splice(b, 1);
            a.parent === this && (a.parent = void 0);
            Ib(a);
            b = l(a.children());
            for (var c = b.next(); !c.done; c = b.next()) c.value.Xg();
            a.Xg();
        }
    };
    function Ib(a) {
        var b = a.element.parentNode;
        null !== b ? b.removeChild(a.element) : r("couldn't find parent element to use for node removal", "component.ts", "defui");
    }
    function Jb(a) {
        for (var b = l(a.children()), c = b.next(); !c.done; c = b.next()) (c = c.value), c.parent === a && (c.parent = void 0), Ib(c), c.Xg();
        a.Wg = [];
    }
    function Kb(a) {
        for (; null !== a.element.firstChild; ) a.element.removeChild(a.element.firstChild);
    }
    k.children = function () {
        return this.Wg;
    };
    k.Xg = function () {};
    k.Ja = function (a) {
        this.element.style.display = void 0 === this.DM ? (void 0 === a ? "block" : a) : this.DM;
    };
    k.ha = function () {
        "none" !== this.element.style.display && ("" !== this.element.style.display && (this.DM = this.element.style.display), (this.element.style.display = "none"));
    };
    k.La = function () {
        return "none" !== this.element.style.display;
    };
    k.previousSibling = function () {
        if (void 0 !== this.parent) return Lb(this, this.parent.children());
    };
    k.nextSibling = function () {
        if (void 0 !== this.parent) return Lb(this, this.parent.children().slice().reverse());
    };
    k.lastChild = function () {
        return 0 < this.children().length ? this.children()[this.children().length - 1] : void 0;
    };
    function Lb(a, b) {
        b = l(b);
        for (var c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            if (c === a) break;
            var d = c;
        }
        return d;
    }
    function Mb() {
        this.Ve = !0;
        this.ii = 10;
        this.rc = 50;
    }
    var Ob = 0;
    function Pb(a, b) {
        this.tT = a;
        this.listener = b;
    }
    Pb.prototype.removeListener = function () {
        this.tT.removeListener(this.listener);
    };
    function z(a, b) {
        b.add(a);
    }
    function y(a, b) {
        this.Vw = a;
        this.listeners = [];
        this.history = [];
        this.counter = 0;
        this.bo = new Map();
        this.options = Object.assign(new Mb(), b);
        this.gt = "_eventRouter" + this.Vw + "Id";
    }
    k = y.prototype;
    k.g = function (a, b, c) {
        b = void 0 === b ? !0 : b;
        c = void 0 === c ? !1 : c;
        this.listeners.push(a);
        if (b) for (b = l(this.history), c = b.next(); !c.done; c = b.next()) a(c.value);
        else c && 0 < this.history.length && a(this.history[this.history.length - 1]);
        Qb(this);
        void 0 !== this.options.Gy && this.options.Gy(this.listeners.length);
        return new Pb(this, a);
    };
    function Qb(a) {
        var b = Rb(a);
        -1 !== b && a.size() > b && t('EventRouter "' + a.Vw + '" has too many listeners', "events.ts", "common", { listeners: a.size(), "max-listeners": b });
    }
    k.addListener = function (a, b) {
        var c = this;
        if (!b.hasOwnProperty(this.gt)) {
            var d = (this.counter += 1);
            Object.defineProperty(b, this.gt, {
                get: function () {
                    return d;
                },
            });
        }
        this.bo.set(b[this.gt], [b, a]);
        window.setTimeout(function () {
            Sb(b) ||
                t(
                    'addListener for EventRouter "' +
                        c.Vw +
                        '" is called on listeningSource "' +
                        b +
                        '" which is not attached to the DOM.\n                This can result in the listener not being registered. Make sure the element is attached in the same thread as calling addListener.',
                    "events.ts",
                    "common"
                );
        });
        void 0 !== this.EL && window.clearTimeout(this.EL);
        this.EL = window.setTimeout(function () {
            var e = Math.max(1, Math.floor(Rb(c) / 2));
            if (c.bo.size > e) {
                e = l(c.bo.values());
                for (var f = e.next(); !f.done; f = e.next()) (f = f.value), Sb(f[0]) || c.bo.delete(f[0][c.gt]);
            }
            Qb(c);
        }, 100);
    };
    function Sb(a) {
        return (a instanceof HTMLElement && a.isConnected) || (a instanceof w && a.element.isConnected);
    }
    k.once = function (a, b) {
        function c(e) {
            a(e);
            d.removeListener(c);
        }
        var d = this;
        return this.g(c, !1, void 0 === b ? !0 : b);
    };
    k.h = function (a) {
        var b = this;
        this.history.push(a) > this.options.ii && this.history.shift();
        for (var c = l([].concat(ha(this.listeners))), d = c.next(); !d.done; d = c.next()) Tb(this, d.value, a);
        c = {};
        d = l(this.bo.values());
        for (var e = d.next(); !e.done; c = { Jr: c.Jr, Dv: c.Dv }, e = d.next())
            (e = e.value),
                (c.Jr = e[0]),
                (c.Dv = e[1]),
                Sb(c.Jr)
                    ? Tb(this, c.Dv, a)
                    : window.setTimeout(
                          (function (f) {
                              return function () {
                                  Sb(f.Jr) ? Tb(b, f.Dv, a) : b.bo.delete(f.Jr[b.gt]);
                              };
                          })(c)
                      );
    };
    function Tb(a, b, c) {
        try {
            b(c);
        } catch (d) {
            r("Event listener error: " + d, "events.ts", "common", { event_name: a.Vw, event_listeners: a.size(), listener: b, error_stack: d.stack });
        }
    }
    k.size = function () {
        return this.listeners.length + this.bo.size;
    };
    k.removeListener = function (a) {
        a = this.listeners.indexOf(a);
        0 <= a && this.listeners.splice(a, 1);
        void 0 !== this.options.Hy && this.options.Hy(this.listeners.length);
    };
    function Rb(a) {
        return "number" === typeof a.options.rc ? a.options.rc : a.options.rc();
    }
    function Ub() {
        this.qB = [];
    }
    Ub.prototype.add = function (a) {
        this.qB.push(a);
    };
    function Vb(a) {
        for (var b = l(a.qB), c = b.next(); !c.done; c = b.next()) c.value.removeListener();
        a.qB = [];
    }
    function Wb(a, b, c) {
        c = void 0 === c ? [] : c;
        if ((isNaN(a) && isNaN(b) && "number" === typeof a && "number" === typeof b) || a === b) return !0;
        if (a instanceof Function) return a === b;
        if (
            ("function" === typeof a && "function" === typeof b) ||
            (a instanceof Date && b instanceof Date) ||
            (a instanceof RegExp && b instanceof RegExp) ||
            (a instanceof String && b instanceof String) ||
            (a instanceof Number && b instanceof Number)
        )
            return a.toString() === b.toString();
        if (!(a instanceof Object && b instanceof Object) || a.isPrototypeOf(b) || b.isPrototypeOf(a) || a.constructor !== b.constructor || a.prototype !== b.prototype) return !1;
        for (var d in b) if (!(0 <= c.indexOf(d) || (b.hasOwnProperty(d) === a.hasOwnProperty(d) && typeof b[d] === typeof a[d]))) return !1;
        for (var e in a)
            if (!(0 <= c.indexOf(e))) {
                if (b.hasOwnProperty(e) !== a.hasOwnProperty(e) || typeof b[e] !== typeof a[e]) return !1;
                switch (typeof a[e]) {
                    case "object":
                    case "function":
                        if (!Wb(a[e], b[e], c)) return !1;
                        break;
                    default:
                        if (a[e] !== b[e]) return !1;
                }
            }
        return !0;
    }
    function Xb() {
        Db.apply(this, arguments);
    }
    q(Xb, Db);
    function Zb() {
        this.mi = new y("RoomDossierContextUpdate", { ii: 1 });
        this.state = {
            j: "",
            vp: "",
            TO: "",
            NF: "",
            BB: "",
            lb: "",
            wv: "",
            host: "",
            Tb: "",
            op: [{ fB: "", IH: "" }],
            sa: "public",
            userName: "",
            CQ: "",
            fV: "m",
            et: "",
            FH: !1,
            pi: 0,
            Pi: !1,
            QE: 0,
            Re: !1,
            zu: "f",
            ge: !1,
            Xd: 6,
            vf: 0,
            Uc: "",
            sx: !1,
            tb: !0,
            On: "",
            ij: !0,
            eh: "smart",
            nd: !1,
            BP: !1,
            ob: 0,
            wk: !1,
            tj: !0,
            KT: "",
            lS: 0,
            mS: 0,
            jR: !1,
            nb: !1,
            lh: [],
            rD: !1,
            yj: { hl: 0, ek: 0, rf: 100 },
            $e: 0,
            jE: 0,
            yL: !1,
            tO: !1,
            us: [],
            $N: !1,
            kd: "",
            $c: "un",
            pj: !1,
            Sl: !1,
            aF: !1,
            Tx: !1,
            Bs: !1,
            Da: { fontSize: "", Zw: "", fontFamily: "", $d: !0, Fn: "5", kr: "a", xE: 0, vm: 1, wm: 1, sB: "0", pG: "false", rR: "", aB: "", Tg: 0, CP: 0, uD: "" },
            tl: "",
            nP: "",
            quality: { quality: "good", rate: 0, stopped: !0 },
            vJ: "",
        };
    }
    Zb.prototype.getState = function () {
        return Object.assign({}, this.state);
    };
    Zb.prototype.Hb = function (a) {
        a: {
            for (b in a)
                if (!Wb(a[b], this.state[b])) {
                    var b = !0;
                    break a;
                }
            b = !1;
        }
        b && ((b = this.state), (this.state = Object.assign(Object.assign({}, this.state), a)), this.mi.h(b));
    };
    var A = new Xb(),
        B = new Zb();
    function $b(a) {
        var b = a.length + 1;
        return document.cookie
            .split(";")
            .map(function (c) {
                return c.trim();
            })
            .filter(function (c) {
                return c.substring(0, b) === a + "=";
            })
            .map(function (c) {
                return decodeURIComponent(c.substring(b));
            })[0];
    }
    function ac(a) {
        var b;
        return null !== (b = $b(a)) && void 0 !== b ? b : "";
    }
    function bc(a, b, c) {
        cc(a, b, 86400 * c);
    }
    function cc(a, b, c) {
        var d = new Date();
        d.setTime(d.getTime() + 1e3 * c);
        document.cookie = a + "=" + b + "; expires=" + d.toUTCString() + "; path=/";
    }
    function dc() {
        var a = $b("pageaction_sample_id");
        if (void 0 === a) return a;
        a = parseInt(a);
        if (!isNaN(a)) return a;
    }
    function ec(a) {
        var b = "";
        null === a.match(/^[a-zA-Z]+:\/\//) && (b = "/");
        return "" + b + a;
    }
    function fc(a) {
        for (var b = new FormData(), c = l(Object.keys(a)), d = c.next(); !d.done; d = c.next()) (d = d.value), b.append(d, a[d]);
        return b;
    }
    function gc(a) {
        switch (a.readyState) {
            case 0:
                return "request not sent";
            case 4:
                switch (a.status) {
                    case 0:
                        return "network error";
                    case 400:
                        return "bad request";
                    case 401:
                        return "unauthorized";
                    case 403:
                        return "access denied";
                    case 404:
                        return "not found";
                    case 429:
                        return "request throttled";
                    case 500:
                        return "server error";
                    default:
                        return "unknown status " + a.status;
                }
            default:
                return "unknown ready state " + a.readyState;
        }
    }
    function hc(a) {
        var b = Error.call(this, gc(a));
        this.message = b.message;
        "stack" in b && (this.stack = b.stack);
        var c = this;
        this.xhr = a;
        this.toString = function () {
            return "XhrError: " + c.message;
        };
    }
    q(hc, Error);
    function ic(a) {
        return (200 <= a && 299 >= a) || 1223 === a;
    }
    function jc(a, b, c) {
        a.withCredentials = !0;
        a.onerror = function () {
            c(new hc(a));
        };
        a.onload = function () {
            ic(a.status) ? b(a) : c(new hc(a));
        };
        a.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    }
    function kc(a, b) {
        var c = Object.keys(b)
            .map(function (d) {
                return d + "=" + encodeURIComponent(b[d]);
            })
            .join("&");
        return ec("" === c ? a : a + "?" + c);
    }
    function C(a) {
        return lc(a)[1];
    }
    function lc(a) {
        var b = 6e4;
        b = void 0 === b ? 6e4 : b;
        var c = new XMLHttpRequest();
        return [
            c,
            new Promise(function (d, e) {
                c.open("GET", ec(a));
                jc(c, d, e);
                c.timeout = b;
                c.send();
            }),
        ];
    }
    function E(a, b) {
        var c = b instanceof FormData ? b : fc(b);
        b = mc(c);
        void 0 === b ? r("CSRF token is undefined", "api.ts", "common") : c.set("csrfmiddlewaretoken", b);
        return new Promise(function (d, e) {
            var f = new XMLHttpRequest();
            f.open("POST", ec(a), !0);
            jc(f, d, e);
            f.send(c);
        });
    }
    function nc(a, b) {
        b = void 0 === b ? {} : b;
        var c = mc();
        return new Promise(function (d, e) {
            var f = new XMLHttpRequest();
            f.open("PUT", kc(a, b), !0);
            jc(f, d, e);
            void 0 === c ? (r("CSRF token is undefined", "api.ts", "common"), e(new hc(f))) : (f.setRequestHeader("X-CSRFToken", c), f.send());
        });
    }
    function oc(a, b) {
        b = void 0 === b ? {} : b;
        var c = mc();
        return new Promise(function (d, e) {
            var f = new XMLHttpRequest();
            f.open("DELETE", kc(a, b), !0);
            jc(f, d, e);
            void 0 === c ? (r("CSRF token is undefined", "api.ts", "common"), e(new hc(f))) : (f.setRequestHeader("X-CSRFToken", c), f.send());
        });
    }
    function mc(a) {
        var b = $b("csrftoken");
        if (void 0 !== b) return b;
        if (void 0 !== A.current.XI) return A.current.XI;
        var c;
        void 0 !== a && a.has("csrfmiddlewaretoken") && (c = a.get("csrfmiddlewaretoken"));
        return c;
    }
    function pc() {
        var a = document.createElement("div");
        a.style.position = "absolute";
        a.style.width = "100%";
        a.style.height = "100%";
        a.style.top = "0px";
        a.style.left = "0px";
        a.style.display = "none";
        a.style.zIndex = "1004";
        a.style.backgroundColor = "rgba(0, 0, 0, .3)";
        a.style.boxShadow = "0px 0px 4px rgba(0, 0, 0, 0.5)";
        return a;
    }
    function qc(a) {
        function b(h) {
            h.target !== e && ((f.style.display = "none"), (g = !1), Bb("touchstart", document, b, !0));
        }
        var c = Math.floor(a.DD / 2),
            d = document.createElement("div");
        d.style.display = "inline-block";
        d.style.position = "absolute";
        d.style.width = d.style.height = a.DD + "px";
        d.style.top = "calc(" + a.kI + " - " + c + "px)";
        var e = document.createElement("img");
        e.src = "https://static-assets.highwebmedia.com/" + a.NK;
        e.style.position = "relative";
        e.style.height = "100%";
        e.style.width = "100%";
        e.style.zIndex = "1";
        d.appendChild(e);
        var f = document.createElement("div");
        f.style.position = "absolute";
        f.style.display = "none";
        f.style.width = "39px";
        f.style.height = "39px";
        f.style.top = -19 + c + "px";
        f.style.left = -19 + c + "px";
        f.style.borderRadius = "4px";
        f.style.zIndex = "0";
        f.style.backgroundColor = "rgba(255, 255, 255, .25)";
        c = document.createElement("div");
        c.textContent = a.Df;
        c.style.position = "relative";
        c.style.display = "inline-block";
        c.style.top = "42px";
        c.style.left = "50%";
        c.style.transform = "translateX(-50%)";
        c.style.padding = "0px 7px";
        c.style.whiteSpace = "nowrap";
        c.style.fontFamily = "UbuntuRegular";
        c.style.fontSize = "12px";
        c.style.color = "#FFF";
        c.style.backgroundColor = "rgba(0, 0, 0, .9)";
        c.style.border = "1px solid #8A8A8A";
        f.appendChild(c);
        d.appendChild(f);
        void 0 !== a.lR &&
            a.lR.g(function () {
                f.style.display = "none";
            });
        void 0 !== a.onClick && ((e.style.cursor = "pointer"), v("click", e, a.onClick));
        v("mouseenter", e, function () {
            f.style.display = "block";
        });
        v("mouseleave", e, function () {
            f.style.display = "none";
        });
        var g = !1;
        v("touchstart", e, function (h) {
            g ? void 0 !== a.onClick && Cb(e, a.onClick) : ((f.style.display = "block"), (g = !0), v("touchstart", document, b, !0), h.preventDefault(), h.stopPropagation());
        });
        return d;
    }
    function rc(a) {
        return C("api/online/" + a + "/").then(function (b) {
            return JSON.parse(b.responseText).online;
        });
    }
    function sc() {
        return C("api/ts/chat/share-my-cam/").then(function (a) {
            a = JSON.parse(a.responseText).cam_room;
            return 0 < a.length ? a[0] : "";
        });
    }
    function tc(a) {
        function b() {
            sc()
                .then(function (c) {
                    "" === c ? a() : window.setTimeout(b, 5e3);
                })
                .catch(function () {});
        }
        b();
    }
    var uc = !1;
    function vc(a) {
        a = a.toLowerCase().split(" ");
        for (var b = 0; b < a.length; b += 1) a[b] = a[b].charAt(0).toUpperCase() + a[b].slice(1);
        return a.join(" ");
    }
    function wc(a) {
        a = a.toLowerCase().split("_");
        for (var b = 0; b < a.length; b += 1) a[b] = a[b].charAt(0).toUpperCase() + a[b].slice(1);
        return a.join("_");
    }
    function xc(a, b) {
        return null === a || void 0 === a || "" === a ? (null === b || void 0 === b ? "" : b) : a;
    }
    function yc(a) {
        a = zc(a);
        if (a !== document.location.search && "replaceState" in window.history && ((a = xc(a, (null !== window.top ? window.top : window).location.pathname)), window.history.replaceState("", "", a), void 0 !== window.parent)) {
            var b = "",
                c = window.parent.history.state;
            "nav" === c.type && ((c.path = a), (b = c));
            window.parent.history.replaceState(b, "", a);
        }
    }
    function zc(a) {
        var b = new URLSearchParams(window.location.search);
        a.forEach(function (c, d) {
            "" === c ? b.delete(d) : b.set(d, encodeURIComponent(c));
        });
        a = b.toString().replace(/%2C/g, ",");
        return "" === a ? "" : "?" + a;
    }
    function Ac(a) {
        for (var b = "", c = l(Object.keys(a)), d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            "" !== b && (b += "&");
            var e = a[d];
            void 0 === e && (e = "");
            b += encodeURIComponent(d) + "=" + encodeURIComponent(e);
        }
        return b;
    }
    function Bc(a) {
        0 < a.length && "?" === a[0] && (a = a.slice(1));
        var b = {};
        a = l(a.split("&"));
        for (var c = a.next(); !c.done; c = a.next()) (c = c.value), c.includes("=") && ((c = c.split("=")), 0 < c[0].length && (b[decodeURIComponent(c[0])] = 0 < c[1].length ? decodeURIComponent(c[1]) : void 0));
        return b;
    }
    var Cc = window.newrelic,
        Dc,
        Ec,
        Fc;
    function F(a, b, c) {
        b = void 0 === b ? {} : b;
        try {
            -1 !== Gc && (b.PlayerVol = Gc);
            -1 !== (0 === Gc ? 0 : Hc) && (b.TipVol = 0 === Gc ? 0 : Hc);
            var d = {};
            d["attributes.room_user"] = Dc;
            void 0 !== Fc && (d["attributes.currentMode"] = Fc);
            for (var e in b) d["attributes." + e] = b[e];
            if (void 0 !== c && c && gb()) {
                var f = window.performance.now();
                d["attributes.timeSinceLoad"] = f / 1e3;
                d["attributes.timeSinceLoadMS"] = f;
            }
            void 0 !== Ec && (d["attributes.player"] = Ec);
            void 0 !== window.history.length && (d.history_length = window.history.length);
            Bc(window.location.search);
            void 0 !== Cc && (0 === Object.keys(d).length ? Cc.addPageAction(a) : Cc.addPageAction(a, d));
        } catch (g) {
            r("New Relic Error in addPageAction: " + g, "newrelic.ts", "common");
        }
    }
    function Ic() {
        Bb("load", window, Ic);
        for (var a = l(document.getElementsByTagName("script")), b = a.next(); !b.done; b = a.next())
            (b = b.value),
                null !== b.src.match(/https:\/\/js-agent\.newrelic\.com\/.*/) &&
                    v("error", b, function () {
                        r("Ad blocker stopped analytics collection", "newrelic.ts", "common");
                        E("api/adblocker/", {});
                    });
    }
    var Hc = -1,
        Gc = -1;
    function Jc(a) {
        "videoonly" !== a && (Fc = a);
    }
    v("load", window, Ic);
    var G = new y("roomLoaded", {
            rc: function () {
                return 100 + 3 * Ob;
            },
            ii: 1,
        }),
        Kc = new y("roomCleanup", { rc: 20 }),
        Lc = new y("userViewedPm");
    new y("tipSent");
    var Mc = new y("externalChatMessage"),
        Nc = new y("context"),
        Oc = new y("context");
    function H(a) {
        this.KO = {};
        if ("string" === typeof a) {
            this.Ye = a;
            try {
                this.parsed = JSON.parse(a);
            } catch (b) {
                (this.parsed = {}), r("Cannot JSON parse", "argjsonmap.ts", "common", { message: a });
            }
        } else "object" === typeof a ? ((this.parsed = a), (this.Ye = JSON.stringify(a))) : r("Invalid input type", "argjsonmap.ts", "common", { message: a });
    }
    H.prototype.keys = function () {
        return Object.keys(this.parsed);
    };
    H.prototype.kf = function (a) {
        this.KO[a] = !0;
    };
    function Pc(a, b) {
        a.kf(b);
        if (null !== a.parsed[b]) return a.parsed[b];
    }
    function Qc(a, b) {
        a.kf(b);
        if (null !== a.parsed[b] && void 0 !== a.parsed[b])
            return a.parsed[b].map(function (c) {
                return new H(c);
            });
    }
    function Rc(a, b) {
        a.kf(b);
        return Array.isArray(a.parsed[b])
            ? a.parsed[b].map(function (c) {
                  return c;
              })
            : [];
    }
    H.prototype.getAsString = function (a) {
        return "" + Pc(this, a);
    };
    function K(a, b, c) {
        c = void 0 === c ? !0 : c;
        var d = Pc(a, b);
        if ("string" !== typeof d) c && void 0 !== d && t("getStringOrUndefined(" + b + "): " + d + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye });
        else return d;
    }
    function L(a, b, c) {
        c = void 0 === c ? !0 : c;
        var d = Pc(a, b);
        return "string" !== typeof d ? (c && t("getString(" + b + "): " + d + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye }), "") : d;
    }
    function Sc(a, b, c) {
        c = void 0 === c ? !0 : c;
        var d = Pc(a, b);
        return "string" !== typeof d && "number" !== typeof d ? (c && t("getStringWithNumbers(" + b + "): " + d + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye }), "") : "" + d;
    }
    function M(a, b, c, d) {
        c = void 0 === c ? !1 : c;
        d = void 0 === d ? !0 : d;
        var e = Pc(a, b);
        return "boolean" !== typeof e ? (d && t("getBoolean(" + b + "): " + e + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye }), c) : e;
    }
    function N(a, b, c) {
        c = void 0 === c ? !0 : c;
        var d = Pc(a, b);
        return "number" !== typeof d ? (c && t("getNumber(" + b + "): " + d + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye }), NaN) : d;
    }
    function Tc(a, b, c) {
        c = void 0 === c ? !0 : c;
        var d = Pc(a, b);
        if ("number" !== typeof d) c && void 0 !== d && t("getNumberOrUndefined(" + b + "): " + d + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye });
        else return d;
    }
    function Uc(a, b) {
        return new H(Vc(a, b));
    }
    function Wc(a, b) {
        a = Xc(a, b, !0);
        if (void 0 !== a) return new H(a);
    }
    function Yc(a, b, c) {
        a = Zc(a, b, void 0 === c ? !0 : c);
        return "" === a ? new H("{}") : new H(a);
    }
    function Zc(a, b, c) {
        c = void 0 === c ? !0 : c;
        var d = Pc(a, b);
        return "object" !== typeof d ? (c && t("getObjectString(" + b + "): " + d + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye }), "") : JSON.stringify(d);
    }
    function $c(a, b, c) {
        c = void 0 === c ? !0 : c;
        var d = Pc(a, b);
        if ("object" !== typeof d) c && void 0 !== d && t("getObjectStringOrUndefined(" + b + "): " + d + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye });
        else return JSON.stringify(d);
    }
    function Vc(a, b) {
        var c = void 0 === c ? !0 : c;
        var d = Pc(a, b);
        return "object" !== typeof d ? (c && t("getObject(" + b + "): " + d + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye }), {}) : d;
    }
    function Xc(a, b, c) {
        c = void 0 === c ? !0 : c;
        var d = Pc(a, b);
        if ("object" !== typeof d) c && void 0 !== d && t("getObjectOrUndefined(" + b + "): " + d + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye });
        else return d;
    }
    function ad(a) {
        var b = [],
            c;
        for (c in a.parsed) !0 !== a.KO[c] && b.push(c);
        b = l(b);
        for (c = b.next(); !c.done; c = b.next()) (c = c.value), "object" === typeof a.parsed[c] && JSON.stringify(a.parsed[c]);
    }
    function O(a, b) {
        (a instanceof w ? a.element : a).classList.add(b);
    }
    function P(a, b) {
        (a instanceof w ? a.element : a).classList.remove(b);
    }
    function bd() {
        this.vK = [];
    }
    function cd(a, b) {
        a.vK.push(b);
    }
    function dd(a, b) {
        a = l(a.vK);
        for (var c = a.next(); !c.done; c = a.next()) if (((c = c.value), b.which === c.keyCode && (!c.Eo || b.ctrlKey || b.metaKey))) return c.la(b), !0;
        return !1;
    }
    var ed = { fullscreenEnabled: 0, fullscreenElement: 1, requestFullscreen: 2, exitFullscreen: 3, fullscreenchange: 4, fullscreenerror: 5 },
        fd = "webkitFullscreenEnabled webkitFullscreenElement webkitRequestFullscreen webkitExitFullscreen webkitfullscreenchange webkitfullscreenerror".split(" "),
        gd = "mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),
        hd = "msFullscreenEnabled msFullscreenElement msRequestFullscreen msExitFullscreen MSFullscreenChange MSFullscreenError".split(" "),
        id;
    "fullscreenEnabled" in document ? (id = Object.keys(ed)) : fd[0] in document ? (id = fd) : gd[0] in document ? (id = gd) : hd[0] in document && (id = hd);
    function jd(a) {
        if (void 0 !== id) a[id[ed.requestFullscreen]]();
        else "webkitEnterFullScreen" in a && a.webkitEnterFullScreen();
    }
    function kd() {
        void 0 !== id && document[id[ed.exitFullscreen]].bind(document)();
    }
    function ld() {
        return void 0 === id ? !1 : !!document[id[ed.fullscreenEnabled]];
    }
    function md() {
        if (void 0 !== id) return document[id[ed.fullscreenElement]];
    }
    function nd() {
        return void 0 === id ? "" : id[ed.fullscreenchange];
    }
    function od() {
        return void 0 === id ? "" : ("on" + id[ed.fullscreenerror]).toLowerCase();
    }
    function pd() {
        return !!md();
    }
    function qd(a, b) {
        a = a.getBoundingClientRect();
        b = b.getBoundingClientRect();
        return !(a.right < b.left || a.left > b.right || a.bottom < b.top || a.top > b.bottom);
    }
    function rd(a) {
        var b = 0;
        Array.from(document.querySelectorAll("*[style*=z-index]:not(.FloatingPlayer)")).forEach(function (c) {
            if (c instanceof HTMLElement && !a.contains(c) && qd(a, c))
                try {
                    b = Math.max(b, parseInt(xc(c.style.zIndex, "0")));
                } catch (d) {}
        });
        return b;
    }
    function Q(a, b) {
        var c = a instanceof w ? a.element : a;
        var d = b;
        b instanceof Function && (d = b(a));
        a = l(Object.keys(d));
        for (d = a.next(); !d.done; d = a.next()) (d = d.value), (c.style[d] = b[d]);
    }
    function sd(a) {
        v("mouseenter", a, function () {
            a.style.textDecoration = "underline";
        });
        v("mouseleave", a, function () {
            a.style.textDecoration = "";
        });
    }
    function td(a) {
        if (null === a) return "rgba(0, 0, 0, 0)";
        var b = getComputedStyle(a).backgroundColor;
        return "" === b || "rgba(0, 0, 0, 0)" === b || "transparent" === b ? td(a.parentElement) : b;
    }
    function ud(a) {
        function b(h, m, n) {
            return 0 === h ? (0 === m ? (void 0 === n ? 0 : n) : m) : h;
        }
        a = a.getBoundingClientRect();
        var c = document.body,
            d = document.documentElement,
            e = b(window.pageYOffset, d.scrollTop, c.scrollTop),
            f = b(window.pageXOffset, d.scrollLeft, c.scrollLeft),
            g = b(d.clientTop, c.clientTop);
        c = b(d.clientLeft, c.clientLeft);
        return new DOMRect(a.left + f - c, a.top + e - g, a.width, a.height);
    }
    function vd(a) {
        if (null === a) return 0;
        try {
            var b = parseFloat(a.substring(0, a.indexOf("px")));
            return isNaN(b) ? 0 : b;
        } catch (c) {
            return 0;
        }
    }
    function wd(a) {
        var b = new y("hover");
        a = a instanceof w ? a.element : a;
        v("mouseenter", a, function () {
            b.h(!0);
        });
        v("mouseleave", a, function () {
            b.h(!1);
        });
        return b;
    }
    var xd;
    function yd() {
        if (void 0 !== xd) return xd;
        var a = document.createElement("div");
        a.style.visibility = "hidden";
        a.style.width = "100px";
        a.style.msOverflowStyle = "scrollbar";
        document.body.appendChild(a);
        var b = a.offsetWidth;
        a.style.overflow = "scroll";
        var c = document.createElement("div");
        c.style.width = "100%";
        a.appendChild(c);
        c = c.offsetWidth;
        document.body.removeChild(a);
        return (xd = b - c);
    }
    function zd() {
        var a = document.querySelector("#advanced_search_options"),
            b = document.querySelector(".advanced-search-element");
        return null === a ? (null === b ? void 0 : b) : a;
    }
    var Ad = document.createElement("canvas");
    function Bd(a, b) {
        var c = Ad.getContext("2d");
        return null !== c ? ((c.font = getComputedStyle(b).font), c.measureText(a).width) : 0;
    }
    function Cd(a, b) {
        var c = Ad.getContext("2d");
        return null !== c ? ((c.font = b), c.measureText(a).width) : 0;
    }
    function Dd(a, b) {
        return function (c) {
            if ("Tab" === c.key) {
                c.preventDefault();
                var d = c.shiftKey ? (b instanceof HTMLElement ? b : b()) : a instanceof HTMLElement ? a : a();
                void 0 !== d && (d.focus(), c.stopPropagation());
            }
        };
    }
    var Ed;
    function Fd() {
        void 0 === Ed && ((Ed = document.createElement("div")), Q(Ed, { position: "fixed", top: "0px", left: "0px" }), document.body.appendChild(Ed));
        var a = Ed.getBoundingClientRect();
        return { top: a.top, left: a.left };
    }
    function Gd(a) {
        a = a.getBoundingClientRect();
        return 0 <= a.top && 0 <= a.left && a.bottom <= (window.innerHeight || document.documentElement.clientHeight) && a.right <= (window.innerWidth || document.documentElement.clientWidth);
    }
    var Hd = { backgroundColor: "#F47321", color: "#FFFFFF", border: "1px solid #CD5D26" };
    function Jd() {
        var a = this;
        this.message = document.createElement("div");
        this.Ac = document.createElement("div");
        this.Pd = document.createElement("div");
        this.title = document.createElement("div");
        this.ke = document.createElement("div");
        this.accept = document.createElement("div");
        this.Mm = function () {};
        this.rm = [];
        O(this.Ac, "modalAlert");
        this.Ac.style.display = "none";
        this.Ac.style.position = "fixed";
        this.Ac.style.overflow = "auto";
        this.Ac.style.top = "0";
        this.Ac.style.left = "0";
        this.Ac.style.width = "100%";
        this.Ac.style.height = "100%";
        this.Ac.style.zIndex = "2000";
        O(this.Pd, "dialog");
        this.Pd.style.width = "440px";
        this.Pd.style.position = "relative";
        this.Pd.style.display = "inline-block";
        this.Pd.style.borderRadius = "10px";
        this.Pd.style.textAlign = "left";
        this.Pd.style.overflow = "hidden";
        this.Pd.style.zIndex = "2001";
        this.Pd.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        this.title.style.display = "block";
        this.title.style.fontSize = "20px";
        this.title.style.paddingTop = "20px";
        this.title.style.paddingLeft = "20px";
        this.title.style.paddingRight = "20px";
        this.title.style.whiteSpace = "nowrap";
        this.title.style.fontWeight = "bold";
        this.title.style.overflow = "hidden";
        this.title.style.textOverflow = "ellipsis";
        this.Pd.appendChild(this.title);
        this.message.style.display = "inline-block";
        this.message.style.wordWrap = "break-word";
        this.message.style.padding = "20px";
        this.message.style.textAlign = "left";
        this.Pd.appendChild(this.message);
        var b = document.createElement("div");
        O(b, "dialogForm");
        b.style.borderTopWidth = "1px";
        b.style.borderTopStyle = "solid";
        b.style.textAlign = "center";
        b.style.height = "40px";
        O(this.accept, "accept");
        this.accept.style.minWidth = "70px";
        this.accept.style.padding = "3px";
        this.accept.style.display = "inline-block";
        this.accept.style.cssFloat = "right";
        this.accept.style.position = "relative";
        this.accept.style.top = "7px";
        this.accept.style.right = "10px";
        this.accept.style.boxSizing = "border-box";
        this.accept.innerText = "OK";
        this.accept.style.cursor = "pointer";
        this.accept.style.borderWidth = "1px";
        this.accept.style.borderStyle = "solid";
        this.accept.onclick = function (c) {
            c.stopPropagation();
            void 0 !== a.nl && a.nl();
            Kd.Mm();
        };
        b.appendChild(this.accept);
        O(this.ke, "decline");
        this.ke.style.minWidth = "70px";
        this.ke.style.padding = "3px";
        this.ke.style.display = "inline-block";
        this.ke.style.cssFloat = "right";
        this.ke.style.position = "relative";
        this.ke.style.top = "7px";
        this.ke.style.right = "25px";
        this.ke.innerText = "Cancel";
        this.ke.style.cursor = "pointer";
        this.ke.onclick = function (c) {
            c.stopPropagation();
            void 0 !== a.Fk ? a.Fk() : void 0 !== a.nl && a.nl();
            Kd.Mm();
        };
        b.appendChild(this.ke);
        this.Pd.appendChild(b);
        this.Ac.appendChild(this.Pd);
    }
    Jd.prototype.resize = function () {
        this.Pd.style.width = Math.min(440, document.documentElement.clientWidth - 40) + "px";
        this.Pd.style.left = Math.max(0, (this.Ac.offsetWidth - this.Pd.offsetWidth) / 2) + "px";
        this.Pd.style.top = Math.max(0, (this.Ac.offsetHeight - 80 - this.Pd.offsetHeight) / 2) + "px";
    };
    Jd.prototype.display = function (a, b, c, d, e) {
        var f = this;
        d = void 0 === d ? !1 : d;
        if (this.active) this.rm.push({ aS: a, nl: b, Fk: c, innerHTML: d, config: e });
        else {
            d ? (this.message.innerHTML = a) : (this.message.innerText = a);
            Ld(this, e);
            this.Ac.style.display = "block";
            this.nl = b;
            void 0 === c ? (Kd.ke.style.display = "none") : ((this.Fk = c), (Kd.ke.style.display = ""));
            var g = new bd(),
                h = function (n) {
                    n.stopPropagation();
                    n.preventDefault();
                    dd(g, n);
                };
            cd(g, {
                keyCode: 13,
                Eo: !1,
                la: function () {
                    b();
                    f.Mm();
                },
            });
            cd(g, {
                keyCode: 27,
                Eo: !1,
                la: function () {
                    void 0 !== c ? c() : b();
                    f.Mm();
                },
            });
            this.active = !0;
            var m = function () {
                f.resize();
            };
            v("keydown", document, h, !0);
            v("resize", window, m);
            v("orientationchange", window, m);
            this.Mm = function () {
                try {
                    Bb("keydown", document, h, !0);
                } catch (p) {}
                try {
                    Bb("resize", window, m);
                } catch (p) {}
                f.Ac.style.display = "none";
                f.active = !1;
                f.Ac.parentElement === document.body && document.body.removeChild(f.Ac);
                f.nl = void 0;
                f.Fk = void 0;
                var n = f.rm.shift();
                void 0 !== n && f.display(n.aS, n.nl, n.Fk, n.innerHTML);
            };
            a = md();
            void 0 !== a && a ? a.appendChild(this.Ac) : document.body.appendChild(this.Ac);
            this.resize();
        }
    };
    function Ld(a, b) {
        void 0 !== (null === b || void 0 === b ? void 0 : b.title) ? ((a.title.style.display = "block"), (a.title.innerText = b.title)) : (a.title.style.display = "none");
        !1 === (null === b || void 0 === b ? void 0 : b.jP) && Q(a.ke, { display: "none" });
        a.accept.innerText = void 0 !== (null === b || void 0 === b ? void 0 : b.Kv) ? b.Kv : "OK";
        a.ke.innerText = void 0 !== (null === b || void 0 === b ? void 0 : b.tQ) ? b.tQ : "Cancel";
    }
    var Kd = new Jd();
    function R(a, b, c) {
        void 0 === b && (b = function () {});
        Kd.display(a, b, void 0, void 0 === c ? !1 : c, void 0);
    }
    function Md(a, b, c, d) {
        Kd.display(a, null !== b && void 0 !== b ? b : function () {}, null !== c && void 0 !== c ? c : function () {}, !1, d);
    }
    function Nd() {
        Jd.call(this);
    }
    q(Nd, Jd);
    function Od(a, b, c) {
        var d = { Kv: Pd, separator: !1, jP: !1, mm: !0 },
            e = Qd;
        e.active && (void 0 !== e.Fk && e.Fk(), Qd.Mm());
        Jd.prototype.display.call(e, "", b, c, !1, d);
        b = document.createElement("div");
        Q(b, { minHeight: void 0 !== d && !0 === d.separator ? "15px" : "0px" });
        e.message.appendChild(b);
        e.form = a;
        e.message.appendChild(e.form);
        void 0 === (null === d || void 0 === d ? void 0 : d.Kv) && (e.accept.innerText = "Apply");
        !0 === (null === d || void 0 === d ? void 0 : d.mm) && Q(e.accept, Hd);
        e.accept.onclick = function (f) {
            f.stopPropagation();
            void 0 !== e.nl && e.nl(e.form);
            Qd.Mm();
        };
        e.ke.onclick = function (f) {
            f.stopPropagation();
            void 0 !== e.Fk && e.Fk();
            Qd.Mm();
        };
    }
    var Qd = new Nd();
    function Rd(a, b) {
        Od(a, b, function () {});
    }
    function Sd(a, b) {
        this.XC = a;
        this.config = b;
        this.tB = this.zF = !1;
    }
    function Td(a) {
        if (1 === a.config.Qc) clearTimeout(a.rQ), (a.rQ = window.setTimeout(a.XC, a.config.zc));
        else {
            var b = function () {
                a.tB && 2 === a.config.Qc ? ((a.tB = !1), a.XC(), window.setTimeout(b, a.config.zc)) : (a.zF = !1);
            };
            a.zF ? (a.tB = !0) : ((a.zF = !0), a.XC(), window.setTimeout(b, a.config.zc));
        }
    }
    var Ud = {};
    function Vd(a) {
        this.Cn = this.active = !1;
        this.name = a;
        var b = window.experiments;
        if (void 0 !== b) {
            a = new RegExp("\\b" + a + "\\b");
            var c = b.active;
            this.active = void 0 !== c && a.test(c);
            b = b.eligible;
            this.Cn = void 0 !== b && a.test(b);
        }
    }
    Vd.prototype.Co = function () {
        if (this.Cn && !Ud[this.name]) {
            var a = { experimentName: this.name, experimentGroup: "inactive" };
            this.active && (a.experimentGroup = "active");
            F("ExperimentEntered", a, !0);
            Ud[this.name] = !0;
        }
    };
    var Wd = {};
    function Xd(a, b) {
        this.BE = b;
        this.Cn = this.active = !1;
        var c = window.experiments;
        if (void 0 !== c) {
            b = c.active;
            var d = c.eligible;
            if (void 0 !== d) {
                var e = l(a);
                for (c = e.next(); !c.done; c = e.next())
                    if (new RegExp("\\b" + c.value + "\\b").test(d)) {
                        this.Cn = !0;
                        break;
                    }
                if (this.Cn && void 0 !== b)
                    for (a = l(a), c = a.next(); !c.done; c = a.next())
                        if (((c = c.value), new RegExp("\\b" + c + "\\b").test(b))) {
                            this.active = !0;
                            this.lp = c;
                            break;
                        }
            }
        }
    }
    Xd.prototype.Co = function () {
        if (this.Cn && !Wd[this.BE]) {
            var a = { experimentName: this.BE, experimentGroup: "inactive", experimentTreatment: this.lp };
            this.active && (a.experimentGroup = "active");
            F("ExperimentEntered", a, !0);
            Wd[this.BE] = !0;
        }
    };
    var Yd = {};
    function Zd(a) {
        void 0 === Yd[a] && (Yd[a] = new Vd(a).active);
        return Yd[a];
    }
    function $d(a) {
        if (void 0 !== a.uv) {
            var b = a.Na.find(function (e) {
                    return "username" === e.name;
                }),
                c = document.getElementById("username_assist_row"),
                d = document.getElementById("username_assist_available");
            b &&
                c &&
                d &&
                ((a.Ii.Na = { ZU: b, rz: c, MH: d, fn: document.createElement("button") }),
                (function (e) {
                    e.style.display = "none";
                    e.style.cursor = "pointer";
                    e.style.background = "transparent";
                    e.style.border = "none";
                    e.style.padding = "2px";
                    e.style.color = "#0a5a83";
                })(a.Ii.Na.fn),
                (a.Ii.Na.fn.type = "button"),
                a.Ii.Na.fn.addEventListener("click", function (e) {
                    e.preventDefault();
                    void 0 !== a.Ii.Na && void 0 !== a.Ii.Na && ((a.Ii.Na.ZU.Fx.value = a.Ii.Na.fn.innerText), a.validate(!1));
                }));
        }
    }
    function ae(a, b, c, d) {
        void 0 !== a && (b ? be(a, c, d) : "none" !== a.rz.style.display && (a.rz.style.display = "none"));
    }
    function be(a, b, c) {
        C(b.concat("?username=" + encodeURIComponent(c)))
            .then(function (d) {
                d = JSON.parse(d.responseText);
                !0 === d.success ? ((a.fn.innerText = d.usernames[0]), (a.fn.style.display = "inline-block"), a.MH.appendChild(a.fn), (a.MH.style.display = "block"), (a.rz.style.display = "table-row")) : (a.rz.style.display = "none");
            })
            .catch(function () {});
    }
    function ce(a) {
        function b(d, e) {
            e = String(e.getAttribute("data-callback"));
            "null" !== e &&
                (window[e] = function () {
                    d.mL = !0;
                    d.Wi();
                });
        }
        var c = {
            name: "",
            Nf: "",
            DC: "",
            kL: !1,
            Ox: !1,
            st: !1,
            eL: !1,
            Xs: !0,
            BR: !1,
            YD: !1,
            dW: "",
            mL: !1,
            fq: !1,
            Fx: a,
            Bc: function () {
                c.DC = String(a.tagName.toLowerCase());
                var d = c.fh();
                c.name = null !== d ? d : "";
                c.Nf = c.name;
                if ("captcha" === a.getAttribute("data-type")) (c.YD = !0), b(c, a);
                else {
                    var e = String(a.getAttribute("id")).split("_"),
                        f = ["day", "month", "year"];
                    d = !1;
                    if (-1 < f.indexOf(e[e.length - 1])) {
                        e.pop();
                        e = e.join("_");
                        d = !0;
                        f = l(f);
                        for (var g = f.next(); !g.done; g = f.next()) null === document.querySelector("#" + (e + "_" + g.value)) && (d = !1);
                    }
                    d && ((c.BR = !0), (d = String(a.getAttribute("id")).split("_")), d.shift(), d.pop(), (c.Nf = d.join("_")));
                }
                d = String(a.getAttribute("type"));
                "checkbox" === d ? (c.Ox = !0) : "hidden" === d ? (c.st = !0) : "select" === c.DC && "select-multiple" === a.type ? (c.kL = !0) : !Zd("ImprvGndr") || ("gender" !== c.name && "subgender" !== c.name) || (c.fq = !0);
                c.eL = null !== a.getAttribute("disabled");
                c.wK() && (c.Xs = !1);
            },
            fh: function () {
                if ("captcha" === a.getAttribute("data-type")) {
                    var d = String(a.getAttribute("id")).split("_");
                    d.shift();
                    d = d.join("_");
                } else d = a.getAttribute("name");
                return d;
            },
            cU: function () {
                if (!(c.st || c.YD || c.fq)) {
                    var d = document.querySelector("#" + c.Nf + "_spinner");
                    null !== d && d.classList.remove("formvalidate_hidden");
                }
            },
            mR: function () {
                var d = document.querySelector("#" + c.Nf + "_spinner");
                null !== d && d.classList.add("formvalidate_hidden");
            },
            ka: function () {
                return String(a.getAttribute("id"));
            },
            Ws: function () {
                if (c.Ox) return a.checked ? "on" : "";
                if (c.fq) {
                    var d = c.Fx.querySelector("input[type=radio]:checked");
                    return d ? d.value : "";
                }
                return a.value;
            },
            lI: function () {
                c.Xs = !1;
            },
            wK: function () {
                if (c.st || c.fq) return !1;
                var d = document.querySelector("." + c.Nf + "_error");
                return null !== d && "none" !== d.style.display;
            },
            WN: function (d, e) {
                c.st ||
                    c.fq ||
                    (e && (c.Xs = !1),
                    c.Xs ||
                        (document.querySelector("." + c.Nf + "_error .error_msg").appendChild(document.createTextNode(d)),
                        (d = document.querySelector("." + c.Nf + "_error")),
                        (d.style.display = "tr" === String(d.tagName.toLowerCase()) ? "table-row" : "block")));
            },
            Wi: function () {
                if (!c.st && !c.fq) {
                    for (var d = document.querySelector("." + c.Nf + "_error .error_msg"); null !== d.firstChild; ) d.removeChild(d.firstChild);
                    document.querySelector("." + c.Nf + "_error").style.display = "none";
                    d = document.querySelector("." + c.Nf + "_label");
                    null !== d && d.classList.remove("formvalidate_error");
                }
            },
        };
        c.Bc();
        return c;
    }
    function de(a) {
        function b() {
            if (-1 < f.qr.indexOf("register"))
                for (var g = l(a.querySelectorAll("input[type=submit], button[type=submit]")), h = g.next(); !h.done; h = g.next())
                    v("click", h.value, function () {
                        !f.Sf && 0 < f.Fs.length && -1 < f.qr.indexOf("register") && F("SignupFailed", { template: f.qr, inputs: f.Fs.toString() });
                    });
        }
        function c() {
            var g = document.createElement("button");
            g.style.display = "none";
            a.appendChild(g);
            window.setTimeout(function () {
                g.click();
                a.removeChild(g);
            }, 0);
        }
        var d = !1;
        d = void 0 === d ? !0 : d;
        var e = "1" === a.getAttribute("data-formvalidate-disable-on-submit") ? [].concat(ha(a.querySelectorAll("button:not([type=button]),input[type=submit]"))) : [],
            f = {
                Na: [],
                tW: a,
                Ii: { Na: void 0 },
                Sf: !0,
                jq: !1,
                kq: !1,
                QO: "",
                uv: "",
                OC: {},
                cE: {},
                Bo: !1,
                XD: !1,
                gu: [],
                qr: "",
                Fs: [],
                Bc: function () {
                    var g;
                    f.QO = String(a.getAttribute("data-formvalidate")).substring(1);
                    f.uv = String(a.getAttribute("data-usernameAssist")).substring(1);
                    f.qr = null !== (g = a.getAttribute("data-template")) && void 0 !== g ? g : "";
                    if (d) {
                        v("submit", a, function (u) {
                            f.jq
                                ? u.preventDefault()
                                : ((f.jq = !0),
                                  f.Sf && !f.kq
                                      ? f.SM(u)
                                      : ((f.XD = !1),
                                        e.map(function (x) {
                                            return (x.disabled = !0);
                                        }),
                                        f
                                            .validate(!0)
                                            .then(function () {
                                                f.Sf
                                                    ? f.SM(u)
                                                    : ((f.jq = !1),
                                                      e.map(function (x) {
                                                          return (x.disabled = !1);
                                                      }));
                                            })
                                            .catch(function () {
                                                f.jq = !1;
                                                e.map(function (x) {
                                                    return (x.disabled = !1);
                                                });
                                            }),
                                        u.preventDefault()));
                        });
                        g = a.getAttribute("data-formvalidate-eagerness") ? Number(a.getAttribute("data-formvalidate-eagerness")) : 2;
                        var h;
                        "1" === a.getAttribute("data-formvalidate-debounce") &&
                            (h = new Sd(
                                function () {
                                    f.validate();
                                },
                                { zc: 1e3, Qc: 2 }
                            ));
                        for (var m = l(a.querySelectorAll("input[type=text], input[type=checkbox], input[type=password], input[type=email], select")), n = m.next(); !n.done; n = m.next()) {
                            n = n.value;
                            var p = n.getAttribute("data-formvalidate-eagerness") ? Number(n.getAttribute("data-formvalidate-eagerness")) : g;
                            1 <= p &&
                                v("change", n, function (u) {
                                    f.Na[f.OC[String(u.target.getAttribute("id"))]].lI();
                                    f.validate();
                                });
                            2 <= p &&
                                v("input", n, function (u) {
                                    f.Na[f.OC[String(u.target.getAttribute("id"))]].lI();
                                    void 0 !== h ? Td(h) : f.validate();
                                });
                        }
                        b();
                    }
                    g = 0;
                    m = l(a.querySelectorAll("input[type=text], input[type=checkbox], input[type=hidden], input[type=password], input[type=email], select, .g-recaptcha"));
                    for (n = m.next(); !n.done; n = m.next()) (n = ce(n.value)), f.Na.push(n), (f.OC[n.ka()] = g), (g += 1), (f.cE[n.name] = n.Ws());
                    $d(f);
                    Zd("ImprvGndr") && ((g = a.querySelector("#id_improved_gender")), (m = a.querySelector("#id_improved_subgender")), g && m && (f.Na.push(ce(g)), f.Na.push(ce(m))));
                },
                Bj: function () {
                    return f.Na.map(function (g) {
                        if ("" !== g.name && !g.eL) {
                            if (g.kL)
                                return Array.from(g.Fx.options)
                                    .filter(function (m) {
                                        return m.selected;
                                    })
                                    .map(function (m) {
                                        return encodeURIComponent(g.name) + "=" + encodeURIComponent(m.value);
                                    })
                                    .join("&");
                            if ((!g.Ox && "radio" !== g.DC) || g.Fx.checked) {
                                var h = g.Ws();
                                return encodeURIComponent(g.name) + "=" + encodeURIComponent(h);
                            }
                        }
                    })
                        .filter(function (g) {
                            return void 0 !== g;
                        })
                        .join("&")
                        .replace(/%20/g, "+");
                },
                validate: function (g) {
                    g = void 0 === g ? !1 : g;
                    if (f.kq && !g) return (f.Bo = !0), Promise.resolve();
                    f.kq = !0;
                    for (var h = {}, m = {}, n = !1, p = !1, u = l(f.Na), x = u.next(); !x.done; x = u.next())
                        if (((x = x.value), (m[x.name] = x.Ws()), (x.Ox && "" === x.Ws()) || (h[x.name] = x.Ws()), m[x.name] !== f.cE[x.name] || g)) "username" === x.name && (p = !0), x.cU(), (n = !0);
                    if (!n) return (f.kq = !1), f.Bo && ((f.Bo = !1), f.validate()), Promise.resolve();
                    f.cE = Object.assign({}, m);
                    return E(f.QO, h)
                        .then(function (D) {
                            D = JSON.parse(D.responseText);
                            f.Sf = D.valid;
                            f.Fs = [];
                            for (var J = l(f.Na), I = J.next(); !I.done; I = J.next())
                                (I = I.value),
                                    I.YD && !I.mL
                                        ? (I.Wi(), I.WN("Captcha has to be completed", g))
                                        : void 0 !== D.errors[I.Nf]
                                        ? (I.Wi(),
                                          I.WN(D.errors[I.Nf], g),
                                          f.Fs.includes(I.Nf) || f.Fs.push(I.Nf),
                                          "username" === I.name && ("" === m[I.name].trim() ? ae(f.Ii.Na, !1, f.uv, m[I.name]) : p && !1 === I.Xs && ae(f.Ii.Na, !0, f.uv, m[I.name])))
                                        : (I.Wi(), "username" === I.name && ae(f.Ii.Na, !1, f.uv, m[I.name])),
                                    I.mR();
                            f.ZP();
                            if (void 0 !== D.errors.__all__) {
                                D = l(D.errors.__all__);
                                for (J = D.next(); !J.done; J = D.next()) f.fP(J.value);
                                f.$T();
                            }
                            f.kq = !1;
                            f.Bo && ((f.Bo = !1), f.validate());
                        })
                        .catch(function (D) {
                            Ma("error: " + D);
                            f.kq = !1;
                            if (f.Bo) (f.Bo = !1), f.validate();
                            else throw D;
                        });
                },
                SM: function (g) {
                    e.map(function (h) {
                        return (h.disabled = !0);
                    });
                    if (f.XD || 0 === f.gu.length)
                        return (
                            window.setTimeout(function () {
                                e.map(function (h) {
                                    return (h.disabled = !1);
                                });
                            }, 700),
                            Promise.resolve()
                        );
                    g.preventDefault();
                    return Promise.all(
                        f.gu.map(function (h) {
                            return h();
                        })
                    )
                        .then(function (h) {
                            f.jq = !1;
                            window.setTimeout(function () {
                                e.map(function (m) {
                                    return (m.disabled = !1);
                                });
                            }, 10);
                            h.reduce(function (m, n) {
                                return m && n;
                            }, !0) && ((f.XD = !0), c());
                        })
                        .catch(function (h) {
                            r("Can't complete preSubmitValidation in form " + a.action, "formUtils.ts", "common", h);
                            f.jq = !1;
                            e.map(function (m) {
                                return (m.disabled = !1);
                            });
                            throw h;
                        });
                },
                fP: function (g) {
                    var h = document.querySelector("#error_notice > .errorlist"),
                        m = document.createElement("li");
                    m.appendChild(document.createTextNode(g));
                    h.appendChild(m);
                },
                ZP: function () {
                    var g = document.querySelector("#error_notice");
                    if (null !== g && (g.classList.add("formvalidate_hidden"), (g = document.querySelector("#error_notice > .errorlist")), null !== g)) for (; null !== g.firstChild; ) g.removeChild(g.firstChild);
                },
                $T: function () {
                    var g = document.querySelector("#error_notice");
                    null !== g && g.classList.remove("formvalidate_hidden");
                },
                IW: function () {
                    for (var g = !1, h = l(f.Na), m = h.next(); !m.done; m = h.next()) (m = m.value), (g = g || m.wK());
                    h =
                        0 !==
                        Array.from(a.getElementsByClassName("errorlist")).filter(function (n) {
                            return "" !== n.innerHTML.trim();
                        }).length;
                    return g || h;
                },
                nV: function (g) {
                    f.gu.push(g);
                    var h = !1;
                    return function () {
                        h || (f.gu.splice(f.gu.indexOf(g), 1), (h = !0));
                    };
                },
            };
        f.Bc();
        return f;
    }
    var S = window.gettext;
    void 0 === S &&
        (t("gettext is undefined.", "translation.ts", "common"),
        (S = function (a) {
            return a;
        }));
    var ee = window.ngettext;
    void 0 === ee &&
        (t("ngettext is undefined.", "translation.ts", "common"),
        (ee = function (a, b, c) {
            return 1 < c ? b : a;
        }));
    var T = window.interpolate;
    void 0 === T &&
        (t("interpolate is undefined.", "translation.ts", "common"),
        (T = function (a, b, c) {
            return c
                ? a.replace(/%\(\w+\)s/g, function (d) {
                      return String(b[d.slice(2, -2)]);
                  })
                : a.replace(/%s/g, function () {
                      return String(b.shift());
                  });
        }));
    function fe(a) {
        return T(S("Chat with %(username)s in a Live Adult Video Chat Room Now"), { username: wc(a) }, !0);
    }
    function ge(a, b) {
        return b ? ee("Token", "Tokens", a) : ee("token", "tokens", a);
    }
    function he(a) {
        return T(S("Confirm tip of %(tokens)s tokens"), { tokens: a.toLocaleString() }, !0);
    }
    function ie(a) {
        return T(S('room subject changed to "%(subject)s"'), { subject: a }, !0);
    }
    function je(a) {
        return T(S("%(username_title)s's Cam"), { username_title: wc(a) }, !0);
    }
    function ke(a) {
        return T(S("JOIN %(modelname)s's FAN CLUB"), { modelname: a }, !0);
    }
    function le(a) {
        return T(S('You will be taken to Join Fanclub Page for %(modelname)s.  Click "OK" to proceed.'), { modelname: vc(a) }, !0);
    }
    function me(a) {
        return T(S('You must be logged in to join %(modelname)s\'s fan club.  Click "OK" to login.'), { modelname: vc(a) }, !0);
    }
    function ne(a) {
        return T(ee("You are about to purchase this video for %(tokens)s token", "You are about to purchase this video for %(tokens)s tokens", a), { tokens: a }, !0);
    }
    function oe(a, b) {
        return T(S("You are about to purchase this photo set (%(numphotos)s %(imagestext)s) for %(tokens)s %(tokenstext)s"), { numphotos: a, imagestext: ee("image", "images", a), tokens: b, tokenstext: ee("token", "tokens", b) }, !0);
    }
    function pe(a) {
        return T(ee("Unlock this photo set (%(numphotos)s image)", "Unlock this photo set (%(numphotos)s images)", a), { numphotos: a }, !0);
    }
    function qe(a) {
        return T(S("Unlock this video (%(duration)s)"), { duration: a }, !0);
    }
    function re(a) {
        return T(S("%(modelname)s has disabled their fan club."), { modelname: vc(a) }, !0);
    }
    function se(a, b, c, d) {
        a = T(S("Enter private chat with %(username)s?\n%(price)s tokens per minute, minimum %(minMinutes)s minute(s)\n\n"), { username: a, price: b, minMinutes: c }, !0);
        return (a = d
            ? a + S("This broadcaster allows private show recordings, so you will receive a recorded video of this show in your collection.")
            : a + S("This broadcaster does not allow private show recordings, so you will not receive a recorded video of this show in your collection."));
    }
    function te(a) {
        return T(S("Broadcaster %(username)s is running these apps: "), { username: a }, !0);
    }
    function ue(a) {
        return T(S("After tipping %(min_tokens_to_vote)s tokens in a day, you'll be able to vote regarding your satisfaction with %(room)s."), { min_tokens_to_vote: 25, room: vc(a) }, !0);
    }
    function ve(a) {
        return T(S("Your confidential vote regarding %(room)s has been recorded. You may change your vote at any time today. Thank you for your feedback."), { room: vc(a) }, !0);
    }
    function we() {
        var a = xe.Rz;
        return T(S("Caution: The %(siteName)s Team will NEVER contact you via chat or ask for your password."), { siteName: a }, !0);
    }
    function ye(a) {
        return T(S("Are you sure you want to rate %(room)s thumbs down?"), { room: vc(a) }, !0);
    }
    function ze(a) {
        return T(S("to send a pm to %(pmUser)s"), { pmUser: a }, !0);
    }
    function Ae(a) {
        return T(S("%(username)s is ignored"), { username: a }, !0);
    }
    function Be(a) {
        return T(S("Ignore %(username)s"), { username: a }, !0);
    }
    function Ce(a) {
        return T(S("Ignoring %(username)s"), { username: a }, !0);
    }
    function De(a) {
        return T(S("No longer ignoring %(username)s"), { username: a }, !0);
    }
    function Fe(a) {
        return T(S("Error ignoring user %(username)s. Please try again in a few seconds."), { username: a }, !0);
    }
    function Ge(a) {
        return T(S("Error unignoring user %(username)s. Please try again in a few seconds."), { username: a }, !0);
    }
    function He(a) {
        return T(S("Ban %(username)s?"), { username: a }, !0);
    }
    function Ie(a) {
        return T(S("%(username)s has tipped me"), { username: a }, !0);
    }
    function Je(a) {
        return T(S("%(tokens)s in the past hour"), { tokens: a }, !0);
    }
    function Ke(a) {
        return T(S("%(tokens)s in the past day"), { tokens: a }, !0);
    }
    function Le(a) {
        return T(S("%(tokens)s in the past 2 weeks"), { tokens: a }, !0);
    }
    function Me(a) {
        return T(ee("%(numMembers)s Current Fan Club Member", "%(numMembers)s Current Fan Club Members", a), { numMembers: a }, !0);
    }
    function Ne(a) {
        return T(S("Start Cam To Cam with %(username)s"), { username: a }, !0);
    }
    function Oe(a) {
        return T(S("Your cam will only be visible to %(username)s."), { username: a }, !0);
    }
    function Pe(a) {
        return T(S("You are currently showing your cam to %(room)s. If your cam has ended, please wait up to 1 minute to be able to broadcast again."), { room: a }, !0);
    }
    function Qe(a) {
        return T(S("Private conversation with %(username)s"), { username: a }, !0);
    }
    function Re(a) {
        return T(S("%(room)s's room now requires a password. Please log in for a password prompt."), { room: a }, !0);
    }
    function Se(a) {
        return T(S('<a href="/supporter/upgrade/?source=%(source)s">Upgrade</a> to supporter to use this feature.'), { source: a }, !0);
    }
    function Te(a) {
        return T(S("New private message from %(username)s"), { username: a }, !0);
    }
    function Ue(a) {
        return T(S("New direct message from %(username)s"), { username: a }, !0);
    }
    function Ve(a) {
        return T(S("Send Tip to %(user)s"), { user: wc(a) }, !0);
    }
    function We(a) {
        return T(S("Sign In with %(name)s"), { name: a }, !0);
    }
    function Xe(a) {
        return T(S("Sign Up with %(name)s and Send Message Now"), { name: a }, !0);
    }
    function Ye(a, b) {
        return T(S("%(online)s Online / %(total)s Following"), { online: a, total: b }, !0);
    }
    function Ze(a) {
        return T(ee("+%(anonCount)s anonymous user", "+%(anonCount)s anonymous users", a), { anonCount: a }, !0);
    }
    S("SEND PM");
    var $e = S("SEND DM (new)");
    S("Send PM");
    var af = S("Send DM (new)"),
        bf = S("You must be a supporter, fan club member, or moderator to send this private message."),
        cf = S("You must be a supporter, fan club member, moderator, or have received a tip today from this user to send this private message."),
        df = S("You must be a supporter, fan club member, or moderator to send this direct message."),
        ef = S("You must be a supporter, fan club member, moderator, or have received a tip today from this user to send this direct message."),
        ff = S("Sign up for a"),
        gf = S("Supporter Membership"),
        hf = S(" (<a class='msg-link underline-link' style='cursor:pointer'>open conversation</a> or press TAB to cycle through)"),
        jf = S("open conversation"),
        kf = S("Join Chaturbate's community."),
        lf = S("Chat live, follow broadcasters, access private shows, or earn money!"),
        mf = S("Sign Up Free"),
        nf = S("Chat Color"),
        of = S("Font Family"),
        pf = S("Font Size"),
        qf = S("Show Emoticons"),
        rf = S("Autocomplete Delay"),
        sf = S("Sort Users"),
        tf = S("Highest Token Color"),
        uf = S("Chat Allowed By"),
        vf = S("Moderators Expire After"),
        wf = S("Silence Other Age-Verified Broadcasters"),
        xf = S("Yes, Always"),
        yf = S("Cam to Cam Notification Rate Limit"),
        zf = S("No Limit"),
        Af = S("Once per User Every 5 Minutes"),
        Bf = S("Once per User Until You View Their Cam"),
        Cf = S("Tip Volume"),
        Df = S("View/Edit Ignored Users"),
        Ef = S("THE ACT OF MASTURBATING WHILE CHATTING ONLINE");
    S("CHAT ROOMS");
    S("BETA");
    S("TAGS");
    S("MY COLLECTION");
    var Ff = S("My Collection"),
        Gf = S("Log in");
    S("Log In");
    var Hf = S("Sign Up"),
        If = S("Sign up and send message now"),
        Jf = S("Send Your Message Now by Creating a Free Account"),
        Kf = S("You must be over 18 years old to register."),
        Lf = S("Complete Your Profile"),
        Mf = S("Back to Chaturbate Register"),
        Nf = S("Email addresses, when provided, are only used for friend notifications, broadcast and payout reminders, newsletter, and account verification. Your email address is never sold or shared."),
        Of = S("Sign up"),
        Pf = S("Include an optional message:"),
        Qf = S("Optional message:"),
        Rf = S("Send Tip"),
        Sf = S("SEND TIP"),
        Tf = S("Send a tip");
    S("Send tip to broadcaster");
    var Uf = S("Public Tipping"),
        Vf = S("Username is visible to all users."),
        Wf = S("Anonymous Tipping"),
        Xf = S("Username only visible to broadcaster."),
        ag = S("Send Anonymous Tip"),
        bg = S("Sending..."),
        cg = S("Click OK to continue to supporter signup.");
    S("Include optional message");
    S("Tip note...");
    S("Tap to chat...");
    var dg = S("This broadcaster doesn't accept tips."),
        eg = S("Purchase Tokens"),
        fg = S("My Profile"),
        gg = S("Live Chat Support"),
        hg = S("Log Out"),
        ig = S("Are you sure you want to log out?"),
        jg = S("Send Feedback");
    S("Status");
    S("You have:");
    var kg = S("Get more tokens"),
        lg = S("Get More Tokens"),
        mg = S("Chat disconnected. The broadcaster has set a new password on this room."),
        ng = S("Private"),
        og = S("Start Private Show"),
        pg = S("Spy on Private Show"),
        qg = S("Private show has started."),
        rg = S("Private show has finished."),
        sg = S("Private show has been declined.");
    S("Request Private Show");
    S("Cancel Private Show Request");
    var tg = S("Cancel Private Request"),
        ug = S("Cannot cancel private show. Please try again in a few seconds."),
        vg = S("Leave Private Show");
    S("Are you sure you want to leave the private show?");
    var wg = S("Private show request has been sent. Waiting on broadcaster to approve.");
    S("Request Private");
    S("Cancel Request");
    S("Leave Private");
    S("Spy on Private");
    var xg = S("Broadcaster has returned from away mode."),
        yg = S("You were disconnected because you have joined this room again."),
        zg = S("The broadcaster has kicked you from the room."),
        Ag = S("You were kicked from the room."),
        Bg = S("signup to chat"),
        Cg = S("About Me"),
        Dg = S("Wish List"),
        Eg = S("PURCHASED"),
        Fg = S("OR"),
        Gg = S("Photos and Videos"),
        Hg = S("Real Name"),
        Ig = S("Followers"),
        Jg = S("I am"),
        Kg = S("We are"),
        Lg = S("Birthday"),
        Mg = S("Birth Date"),
        Ng = S("Age");
    S("Date");
    S("Action");
    var Og = S("Body Type"),
        Pg = S("Body Decorations"),
        Qg = S("Interested In"),
        Rg = S("Location"),
        Sg = S("Language(s)"),
        Tg = S("Last Broadcast"),
        Ug = S("Languages"),
        Vg = S("Smoke Drink"),
        Wg = S("Smoke / Drink"),
        Xg = S("User has no available BIO"),
        Yg = S("Bio and Free Webcam");
    S("Unable to submit");
    S("Submitting...");
    var Zg = S("Loading"),
        $g = S("loading");
    S("Chat Settings");
    var ah = S("SETTINGS");
    S("Settings");
    var bh = S("Chat settings saved"),
        ch = S("CHAT"),
        dh = S("SEND");
    S("Send");
    var eh = S("TIP");
    S("Tip");
    var fh = S("Users"),
        gh = S("USERS"),
        hh = S("a user"),
        ih = S("Report Room");
    S("REPORT ROOM");
    var jh = S("Your room report will be reviewed as soon as practicable.");
    S("Room");
    var kh = S("More Rooms"),
        lh = S("spy private show"),
        mh = S("Unfollow");
    S("unfollow");
    var nh = S("Follow"),
        oh = S("Notify me"),
        ph = S("Always"),
        qh = S("Auto"),
        rh = S("Never"),
        sh = S("Refresh Rooms"),
        th = S("Women"),
        uh = S("WOMEN");
    S("women");
    var vh = S("Female"),
        wh = S("Men"),
        xh = S("MEN");
    S("men");
    var yh = S("Male"),
        zh = S("Trans"),
        Ah = S("TRANS"),
        Bh = S("Couples"),
        Ch = S("COUPLES");
    S("couples");
    var Dh = S("Couple"),
        Eh = S("SAVE"),
        Fh = S("Save"),
        Gh = S("Recently used"),
        Hh = S("Smileys & People"),
        Ih = S("Animals & Nature"),
        Jh = S("Food & Drink"),
        Kh = S("Activities"),
        Lh = S("Travel & Places"),
        Mh = S("Objects"),
        Nh = S("Symbols"),
        Oh = S("Flags"),
        Ph = S("Upload"),
        Qh = S("Tone"),
        Rh = S("Your current balance:");
    S("Balance:");
    S("Token Balance");
    var Sh = S("You currently have: "),
        Th = S("WARNING: This room has a low satisfaction rating."),
        Uh = S("TIP AT YOUR OWN RISK!"),
        Vh = S("Enter tip amount:"),
        Wh = S("Invalid tip amount!");
    S("Amount:");
    var Xh = S("Toggle this window with Ctrl+S"),
        Yh = S("Leave open after tipping"),
        Zh = S("Select One"),
        $h = S("Please select a reason"),
        ai = S("Loading user list"),
        bi = S("refresh userlist");
    S("Refresh userlist");
    var ci = S("Error refreshing user list. Please try again later.");
    S("Send a message");
    var di = S("Send a message..."),
        ei = S("Send private message"),
        fi = S("Send direct message (new)"),
        gi = S('You must be logged in to send a private message. Click "OK" to login.'),
        hi = S('You must be logged in to send a direct message. Click "OK" to login.'),
        ii = S("Mention this user");
    S("HIDE ALL ADS NOW");
    S("Powered by ExoticAds<br>Buy/Sell Traffic");
    var ji = S("Show More"),
        ki = S("Pics & Videos"),
        li = S("Pictures"),
        mi = S("Videos"),
        ni = S("Social Media"),
        oi = S("Unique Registered Viewers Watching"),
        pi = S("Points"),
        qi = S("Current Hour's Top Cams"),
        ri = S("Every hour, the cam with the most points wins a $10 prize. The cam in 2nd place wins a $5 prize.");
    S("Apps & Bots");
    S(
        "Customize your chat room experience by launching an app or using bots to make your room unique. Explore a wide array of options, or even write your own app with javascript at the <a href='/apps/' target='_blank' rel='noopener noreferrer'>Apps and Bots page</a>."
    );
    S("Add features like <strong>Tip Menus</strong>, <strong>Ticket Shows</strong>, and <strong>Top Tippers</strong> to your room with apps!");
    S("Create or update v1 apps & bots on the <a href='/apps/' target='_blank' rel='noopener noreferrer'>v1 Apps & Bots page</a>.");
    S("v2 apps can keep track of your top visitors and tippers across multiple broadcasts. v1 apps reset the data every time your broadcast stops.");
    S("New in v2 Apps: support for permanent storage, high traffic rooms and more to come soon.");
    S("new");
    S("Apps");
    S("Games");
    var si = S("dismiss this message");
    S("Only 5 #hashtags will be applied");
    var ti = S("dismiss"),
        ui = S("Register later"),
        vi = S("Already have an account?"),
        wi = S("Login here");
    S("Please sign in using the form below");
    var xi = S("Username"),
        yi = S("Password");
    S("Prove you are human");
    var zi = S("Keep me logged in"),
        Ai = S("Forgot password?");
    S("Incorrect password");
    S("Incorrect captcha");
    S("Create Free Account");
    var Bi = S("We've improved Chaturbate's mobile site by adding these feature(s):"),
        Ci = S("Satisfaction Voting");
    S("Or ");
    var Di = S("or");
    S("the mobile site");
    S("Follower browser notifications");
    S("Would you like to receive browser notifications when a broadcaster you follow comes online?");
    S("Subscription failure. Please try again from the Settings & Privacy page on your profile.");
    S("Yes");
    var Ei = S("Not now"),
        Fi = S("This room requires a password."),
        Gi = S("Login to room"),
        Hi = S("Moderators"),
        Ii = S("Remove Moderators"),
        Ji = S("Non-Moderators"),
        Ki = S("Remove Ignored Users"),
        Li = S("Unignore this user"),
        Mi = S("Unignored Users");
    S("Ignore");
    var Ni = S("Ignore this user"),
        Oi = S("Report this message"),
        Pi = S("Ignored Users"),
        Qi = S("Click on a user to unignore them."),
        Ri = S("Select a user from the list to unignore them."),
        Si = S("Click on a user to revoke their moderator status."),
        Ti = S('Click "OK" to login.'),
        Ui = S("You must be logged in to ignore a user"),
        Vi = S("You have reached the maximum number of ignored users. Ignoring a new user when at the limit will remove your oldest ignore. Click OK to continue"),
        Wi = S("Room is currently offline"),
        Xi = S("Follow broadcasters to receive instant notifications when they come online."),
        Yi = S("UNFOLLOW"),
        Zi = S("FOLLOW"),
        $i = S("Share"),
        aj = S("Bio"),
        bj = S("Contest Stats");
    S("Settings & Privacy");
    S("Settings saved");
    S("Token Stats");
    S("Broadcaster Stats");
    S("Memberships");
    var cj = S("Submit feedback to broadcaster"),
        dj = S("Optional comment for broadcaster:"),
        ej = S("Submitted");
    S("SATISFIED?");
    S("Satisfied?");
    var fj = S("SCAN CAMS"),
        gj = S("NEXT CAM"),
        hj = S("SCAN / NEXT"),
        ij = S("SCAN"),
        jj = S("SKIP CAM"),
        kj = S("EXIT SCANNING"),
        lj = S("Token Linkcodes"),
        mj = S("Earn up to 10 tokens for every registered user and 500 tokens for users who broadcast (broadcasters must earn $20.00 before they qualify)."),
        nj = S("Please send to chaturbate using one of the link codes below."),
        oj = S("Embed Chaturbate's Top Cam on Your Webpage"),
        pj = S("the affiliate program stats"),
        qj = S("See details about tokens earned in "),
        rj = S(
            'Your browser is outdated and may not function correctly. Update it for the best Chaturbate experience and new features. <br> We recommend <a href="https://www.google.com/chrome/">Chrome</a>, <a href="https://www.mozilla.org/firefox/">Firefox</a>, or <a href="https://www.microsoft.com/edge">Edge</a>'
        ),
        sj = S('Add an extra layer of protection to your account by setting up 2-Step Verification at the <a href="/security/">Security Center</a>'),
        tj = S("Silence for 6 hours"),
        uj = S("Remove Silence"),
        vj = S("Theater Mode"),
        wj = S("Full Screen"),
        xj = S("Exit Full Screen"),
        yj = S("Split Mode"),
        zj = S("unknown"),
        Aj = S("Show All"),
        Bj = S(" to follow your favorite broadcasters and see when they are live."),
        Cj = S("Follow your favorite broadcasters to see when they are live.");
    S("Promote your room");
    S("Not enough tokens.");
    S("Purchase more tokens");
    S("You are no longer eligible to promote your room.");
    S("User promotion currently unavailable - please check your settings.");
    S("You must be logged in to promote your room.");
    S("You must be broadcasting to promote your room.");
    S("Get More Viewers");
    S("Add your room to a rotating promoted spot on the homepage for 5 minutes.");
    S("details");
    S("Promote now");
    S("In Progress");
    S("Get more tokens");
    S("Current price");
    S("Setting up user promotion...");
    S("Promotion ending...");
    S("Unknown error occurred while retrieving promotion purchase price. Please try again.");
    S("Unknown error occurred while purchasing user promotion. Please try again.");
    S("Loading new pricing...");
    S("Announce you're online");
    S("Announce again in ");
    S("You have 1 follower");
    S("Send email and browser notifications to your followers.");
    S("Add a photo");
    S("Update photo");
    S("Must be non-nude");
    S("Recommended size: 1280 x 720 px");
    S("Shown in notification and featured emails");
    S("Send notifications");
    S("In Progress");
    S("New photos must be approved. If not approved in 15 minutes, email notifications will be sent without a photo.");
    S("You have no followers to notify.");
    S("Are you sure you want to notify your followers without an image?");
    S("Please use a jpeg, gif, or png image.");
    S("Image must not be larger than 10 megabytes.");
    S("A notification has already been sent.");
    S("Something went wrong after submit. Please try again.");
    S("Something went wrong during submit. Please try again.");
    S("Image must be at least 200px wide and 200px tall.");
    S("Image is too wide.");
    S("Image is too tall.");
    S("Please wait until all pending notifications have been sent.");
    S("Remove approved photo?");
    S("Sorry, this feature is not supported in your browser. Please upgrade to a modern browser like Chrome or Firefox.");
    var Dj = S("Close");
    S("Close Window");
    var Ej = S("Cancel");
    S("cancel");
    var Fj = S("CANCEL"),
        Gj = S("SUBMIT");
    S("Submit");
    S("You have unsaved changes, are you sure you want to leave this page?");
    var Hj = S("Choose a category"),
        Ij = S("Report Room"),
        Jj = S("Broadcaster is underage"),
        Kj = S("Broadcaster is advertising"),
        Lj = S("Broadcaster is abusive"),
        Mj = S("Broadcaster is intoxicated"),
        Nj = S("Using a toy that is too large"),
        Oj = S("Asking for offline payments"),
        Pj = S("Broadcasting in public"),
        Qj = S("Broadcasting in service uniform"),
        Rj = S("Broadcaster is sleeping"),
        Sj = S("Broadcaster is wrong gender"),
        Tj = S("Other");
    S("Please choose a category");
    var Uj = S("Additional comments:"),
        Vj = S("Please add a description"),
        Wj = S("Message is inappropriate"),
        Xj = S("Message is rude towards the broadcaster");
    S("Message is rude");
    var Yj = S("Message is spam"),
        Zj = S("Media is offensive"),
        ak = S("Other (please describe):"),
        bk = S("Report"),
        ck = S("REPORT"),
        dk = S("Unable to send report."),
        ek = S("Too many reports sent. Try slowing down."),
        fk = S("There was an error requesting your private show. Please try again."),
        gk = S("There was an error requesting your spy show. Please try again."),
        hk = S("Unable to cancel spy show"),
        ik = S("Unable to cancel private request"),
        jk = S("Private Shows"),
        kk = S("Are you sure?"),
        lk = S("This broadcaster allows private show recordings, so you will receive a recorded video of this show in your collection.");
    S("You may continue chatting while you wait for the broadcaster to return.");
    S("Performer Is Away");
    S("Group Show");
    var mk = S("LEAVE PRIVATE SHOW"),
        nk = S("CANCEL PRIVATE REQUEST"),
        ok = S("START PRIVATE SHOW");
    S("SPY PRIVATE SHOW");
    var pk = S("LEAVE SPY SHOW"),
        qk = S("Private Show");
    S("PRIVATE SHOWS");
    var rk = S("Private Show in Progress"),
        sk = S("This feature is not currently enabled on your device."),
        tk = S('You must be logged in to enter a private show. Click "OK" to login.'),
        uk = S('You must be logged in to spy on a private show. Click "OK" to login.'),
        vk = S("Spy has been disabled by the broadcaster."),
        wk = S("More Rooms Like This"),
        xk = S("Here are some trending rooms instead:"),
        yk = S("PROMOTED"),
        zk = S("RECOMMENDED"),
        Ak = S("RECOMMENDED POPULAR"),
        Bk = S("OFFLINE"),
        Ck = S("EXHIBITIONIST"),
        Dk = S("NEW");
    S("HD");
    S("HD+");
    var Ek = S("IN PRIVATE"),
        Fk = S("GAMING");
    S("CHATURBATING");
    S("BROADCASTING");
    var Gk = S("HIDDEN - STAFF ONLY"),
        Hk = S("View on Twitter"),
        Ik = S("Show tips and messages"),
        Jk = S("View Pics and Videos"),
        Kk = S("See more"),
        Lk = S("How Can We Improve?"),
        Mk = S("Updates"),
        Nk = S("Pics & Vids"),
        Ok = S("This user has not added any photos or videos yet.");
    S("This user has not added any photos yet.");
    S("This user has not added any videos yet.");
    var Pk = S("More Pics"),
        Qk = S("More Videos");
    S("More Pics & Videos");
    var Rk = S("FAN"),
        Sk = S("CLUB"),
        Tk = S("Tokens");
    S("Token");
    var Uk = S("Uploaded"),
        Vk = S("If you already purchased this photo set, try reloading the page to view it."),
        Wk = S("If you already purchased this video, try reloading the page to view it."),
        Xk = S("minutes"),
        Yk = S("seconds"),
        Zk = S("or"),
        $k = S("View Hi-Res Image"),
        al = S('You must be logged in to purchase this photo set.  Click "OK" to login.'),
        bl = S('You must be logged in to view hi-res images.  Click "OK" to login.'),
        cl = S('You must be logged in to purchase this video.  Click "OK" to login.'),
        dl = S('Click "OK" to get more tokens.');
    S("Upload more Photos");
    S("Re-Order Items");
    S("Change video thumbnail image");
    S("Edit Details");
    S("Compliance");
    S("Deactivate");
    S("STAFF");
    S("Audio is disabled.");
    var el = S("Audio muted to remove music"),
        fl = S("FAILED"),
        gl = S("PENDING"),
        hl = S("APPROVAL"),
        il = S("VIDEO"),
        jl = S("PROCESSING"),
        kl = S("ERROR"),
        ll = S("Failed Approval"),
        ml = S("Please delete or edit offending items."),
        nl = S("Open in new window"),
        ol = S("iPad has failed to setup the broadcast. Please try again."),
        pl = S("Please check your internet connection or close other applications"),
        ql = S("No camera found."),
        rl = S('We need permission to use your camera and microphone in order to proceed. When prompted by the browser, please click "Allow."'),
        sl = S('We need permission to use your camera and microphone in order to proceed. When prompted by the browser, please check "Remember this decision" and click "Allow."'),
        tl = S("Permissions to use your camera and microphone are currently denied."),
        ul = S("We need permission to use your camera and microphone in order to proceed.");
    S("Visit our <a class='hrefColor' id='camAndMicModalLink' target='_blank' href='https://support.chaturbate.com/hc/en-us/articles/360040862791'>support page</a> for help enabling your devices.");
    var vl = S('We need permanent permission to use your camera and microphone. Remember to check "Remember this decision" when granting permission.'),
        wl = S("Visit our <a class='hrefColor' id='camAndMicInfoLink' target='_blank' href='https://support.chaturbate.com/hc/en-us/articles/360040862791'>support page</a> for help enabling your devices."),
        xl = S("Request Device Permissions"),
        yl = S("The resolution is not supported by your device."),
        zl = S("Your device does not support the minimum resolution."),
        Al = S("Your device does not support the minimum resolution.");
    S("support page");
    var Bl = S("Make sure there are no other broadcast tabs open."),
        Cl = S("Low FPS"),
        Dl = S("Are you sure you want to leave?"),
        El = S('This private show has ended. To give you\ntime to prepare, you are now shown as "Away" to\nthose in your room. To return and be visible on\ncam, click "Exit Away Mode" below.'),
        Fl = S("Exit Away Mode"),
        Gl = S("Could not get devices"),
        Hl = S("Turn your device 180 degrees."),
        Il = S("Turn your device into landscape mode."),
        Jl = S("Camera"),
        Kl = S("Resolution"),
        Ll = S("Microphone"),
        Ml = S("Input Level"),
        Nl = S("Mute"),
        Ol = S("None (Silent)"),
        Pl = S("Start Broadcasting"),
        Ql = S("Stop Broadcasting"),
        Rl = S("You Are Away"),
        Sl = S("For high quality streams we strongly recommend"),
        Tl = S("Use external software (OBS)"),
        Ul = S("Please wait. Connecting in"),
        Vl = S("Could not start broadcast"),
        Wl = S("Welcome back"),
        Xl = S("Could not setup preview. Please make any possible adjustments and reload the page"),
        Yl = S("Could not setup broadcast"),
        Zl = S("My Cam Preview"),
        $l = S("Cam To Cam"),
        am = S("Stop Cam To Cam"),
        bm = S("Unable to share cam: You are already broadcasting from another window or tab"),
        cm = S("The cam icon will turn orange when the broadcaster is viewing you."),
        dm = S("Error sharing cam"),
        em = S("Error sharing cam: Timed out trying to connect"),
        fm = S("Error viewing cam"),
        gm = S("Unable to share cam: Make sure you are connected to chat and the broadcast is playing"),
        hm = S("Unable to share cam: Broadcaster is in a private show");
    S("You are not allowed to share your cam with this user");
    var im = S("Sharing your cam is only available to users who have purchased tokens. Click OK to purchase tokens now.");
    S("Sharing your cam will remove your room password");
    S("Viewer ");
    S(" started sharing their cam");
    S(" stopped sharing their cam");
    var jm = S(" started viewing your cam"),
        km = S(" stopped viewing your cam"),
        lm = S("is currently viewing your cam"),
        mm = S("is not currently viewing your cam"),
        nm = S("Muted"),
        om = S("Close Cam");
    S("Block Cam");
    S("Pop Out Cam");
    S("Report Cam");
    S("User is broadcasting in public");
    S("User is rude/abusive");
    S("User is intoxicated");
    S("User is sleeping");
    S("User is spamming");
    S("User is underage");
    var pm = S("My Cam");
    S("View Cam");
    S("Stop Viewing Cam");
    S("Unable to view cam: A maximum of five cams can be viewed at once");
    S("Unable to view cam: This viewer is no longer sharing their cam");
    var qm = S("Leaving this page will end your cam. Click OK to proceed."),
        rm = S("Broadcaster"),
        sm = S("Moderator"),
        tm = S("Fan club member"),
        um = S("User"),
        vm = S("has joined the room"),
        wm = S("has left the room."),
        xm = S("Follow to be notified when online."),
        ym = S("Describe your issue or share your ideas:"),
        zm = S("Some account and system information may be sent to %SITE_NAME%. We will use the information you give us to help address technical issues to improve our services, subject to our Privacy Policy and Terms of Service."),
        Am = S("Send feedback"),
        Bm = S("Add screenshot"),
        Cm = S("Scroll down to capture lower on the page"),
        Dm = S("Scroll up to capture higher on the page"),
        Em = S("Click to highlight or hide info"),
        Fm = S("Highlight issues with orange or hide sensitive info with black. Hit the ESC key to finish."),
        Gm = S("Highlight issue"),
        Hm = S("Hide sensitive info"),
        Im = S("Permission to capture screen not granted"),
        Jm = S("Could not capture screen"),
        Km = S("Please take screenshot again after resizing"),
        Lm = S("Your feedback has been sent! Thank you for your feedback."),
        Mm = S("Something went wrong. Please try again later."),
        Nm = S("Please wait before submitting more feedback."),
        Om = S("Unable to submit feedback. Please contact support."),
        Pm = S("Done"),
        Qm = S("Watching");
    S("Deny Private");
    S("Accept Private");
    S("Return to Chat");
    S("Return to Public Chat");
    S("Your private show has ended.");
    S("Your camera will remain hidden until you re-enter public chat.");
    S("You're about to stop the group show. Do you want to continue?");
    S("You're about to stop the private show. Do you want to continue?");
    S("Error broadcasting");
    var Rm = S("Font Settings"),
        Sm = S("Emoticons Settings"),
        Tm = S("Users Settings"),
        Um = S("Notifications Settings"),
        Vm = S("Other Settings");
    S("You have no users ignored.");
    S("Back to Settings");
    S("Back to Chat Settings");
    var Wm = S("Notify on Entry For"),
        Xm = S("Notify on Leave For"),
        Ym = S("No new updates"),
        Zm = S("The video is currently being processed.  It may take several minutes depending on the size of the video."),
        $m = S("The video is damaged or its format is not supported."),
        an = S("Please delete this video and reupload again."),
        bn = S('<p style="margin: 0px; display: inline">To disable, go to </p><a href="/?advanced_options=1">Options</a><p style="margin: 0px; display: inline"> on the homepage and uncheck "Enable floating player".</p>'),
        cn = S("You must be a supporter to use this feature."),
        dn = S('You must be logged in to Follow. Click "OK" to login.'),
        en = S("Log in or sign up to use this feature");
    S('You must be logged in to send a tip. Click "OK" to login.');
    var fn = S('<a href="/accounts/register/">Sign up</a> to use this feature.'),
        gn = S("Log in to continue"),
        hn = S("Don't have an account?"),
        jn = S("Don't have an account yet?"),
        kn = S("Tipped Tons"),
        ln = S("1000+ tokens in the past 2 weeks"),
        mn = S("Tipped Lots"),
        nn = S("250+ tokens in the past 2 weeks"),
        on = S("Tipped Recently"),
        pn = S("50+ tokens in the past 2 weeks");
    S("Tipping");
    var qn = S("Purchased Tokens"),
        rn = S("Has bought tokens"),
        sn = S("Fan Club Member"),
        tn = S("Moderator"),
        un = S("Broadcaster");
    S("Upgrade to Supporter");
    S("Outbound Tip");
    S("Tip From");
    S("Transfer tokens to cash");
    S("Transfer tokens to advertising credit");
    S("Referred Member");
    S("Admin Adjustment");
    S("This has been resolved by an administrator");
    S("email");
    var vn = S("Email");
    S("Spy Show");
    S("Fan Club Membership");
    S("Broadcaster Rules: Tokens are the only form of payment allowed. You may promote your personal website as long as it does not offer video chat. Do not ask users to chat with you elsewhere.");
    var wn = S(
        "Rules: No spamming. Do not insist the cam hosts to do as you please. Do not announce other rooms or websites that would conflict with this room. Avoid any argumentative and/or rude posts related to the cam viewing. Do not attempt to post your e-mail address in the public chat."
    );
    S("Use External Encoder to Broadcast");
    S("Broadcast yourself using Open Broadcaster Software (OBS)");
    S("Accept");
    S("Decline");
    S("User(s) Token Rate");
    S("Private Show Stats");
    S("Exit Private Show");
    S("Enhance your room with Apps & Bots in the tab below.");
    S('You must <a class="hrefColor" target="_blank" href="/accounts/age_verification/"> submit age verification </a> to enable the ability to receive tokens while broadcasting.');
    S("Disabled");
    S("Allowed");
    S("Privates");
    S("Broadcaster's Guide");
    S("My Broadcast");
    S("Your room is password protected. Users may not enter your room unless they know your password. To remove your password, edit your settings & privacy.");
    var xn = S("Kick/Ban"),
        yn = S("Remove Moderator Status"),
        zn = S("Promote to Moderator");
    S("WARNING: Never show or share your broadcast token with anyone!");
    S("Your broadcast token");
    S("RTMP/OBS Broadcasting Information");
    S("Click here to view our OBS Setup Guide");
    S("Important Information");
    S("Do not upscale your source input (e.g. using a 1080p camera to a 1440p stream).");
    S("Ensure you use the minimum video bitrate specified in this table for a given resolution");
    S("You may only have copyrighted content -- including music, movies, and video games -- in your stream if you are the rights holder or have the permission of all rights holders.");
    S("Recommended Settings Table");
    S("Generate a new broadcast token? \n(This will invalidate your prior RTMP / OBS token and disconnect your current broadcast)");
    S('This is your satisfaction score. You can hide this by setting "Show my satisfaction score" to "No" in the Settings & Privacy tab.');
    S("This data is updated once per day and is based on votes in the past 90 days.");
    S("Click on your score (%) to view your rating history.");
    S("Fetching rating history");
    S("No history to show");
    S("Active App");
    S("Active Game");
    S("Bot #1");
    S("Bot #2");
    S("Bot #3");
    S("Bot #4");
    S("Bot #5");
    S("None Selected");
    S("Choose an App");
    S("Choose a Bot");
    S("Choose a Game");
    S("End Game");
    var An = S("Stop streaming game"),
        Bn = S("Are you a publisher?"),
        Cn = S("Add your game.");
    S("Restart");
    S("Add new social media");
    S('You must be <a href="/accounts/age_verification/">age verified</a> to add new social media');
    S('You must purchase tokens or be <a href="/accounts/age_verification/">age verified</a> to add new photos and videos');
    S("Upload new pics");
    S("Upload new videos");
    S("Edit Your Bio");
    S("Current Contest Statistics for");
    S("Payout Information");
    S("Refresh Stats");
    S("See contest details");
    S("Manage photo sets");
    S("Update Bio");
    var Dn = S("January"),
        En = S("February"),
        Fn = S("March"),
        Gn = S("April"),
        Hn = S("May"),
        In = S("June"),
        Jn = S("July"),
        Kn = S("August"),
        Ln = S("September"),
        Mn = S("October"),
        Nn = S("November"),
        On = S("December");
    S("Expired Fan Club Memberships");
    S("Expired Social Media Subscriptions");
    S("You Have No Active Memberships");
    var Pn = S("Expires");
    S("Expired");
    S("Extend by 3 months");
    S("Renews");
    S("renew");
    S("can't renew");
    S("can't extend");
    S("No email address on file");
    S("Blocked countries");
    S("Able to view");
    S("Blocked regions");
    S("Security");
    S("Statistics");
    S("Update Settings");
    S("Update your password");
    S("View the security center and adjust Two-Step Verification settings");
    S("Authorize your 3rd party stats");
    var Qn = S("Add an email address");
    S("Change email address");
    S("E-mail Verified");
    var Rn = S("Resend verification email");
    S("Verification Email Sent");
    S("Email is Unverified. Verify to receive follower notifications and newsletters.");
    S("Detailed Income Stats");
    S("Payment Information Form");
    S("required for payments");
    S("Broadcaster Verification Form");
    S("Download Transaction History");
    S("Please wait for the file to be generated");
    S("Download your last 30 days of transactions?\nProcessing may take up to 20 seconds.");
    S("Your Account's Activity");
    S("Latest cashouts");
    S("tokens are automatically cashed out at midnight");
    S("Please verify your identity to enable tokens on your account");
    S("Transfer Tokens");
    S("Tokens transferred on the 1st-15th of the month will be sent by the 22nd. Tokens transferred on the 16th-31st will be sent by the 7th.");
    var Sn = S("Silenced Users"),
        Tn = S("Listed are users currently silenced from your room. Silences expire after 6 hours by default. You can convert a silence to a ban."),
        Un = S("Banned Users"),
        Vn = S("Listed are users currently banned from your room. Bans expire after 1 month by default. You can convert a ban to a permanent ban."),
        Wn = S("Banned"),
        Xn = S("Silenced"),
        Yn = S("Actions"),
        Zn = S("Remove"),
        $n = S("Make Permanent"),
        ao = S("Convert to Ban"),
        bo = S("Click here to clear hidden silences and bans"),
        co = S("Add ban"),
        eo = S("Enter User To Ban"),
        fo = S("View/Edit Bans and Silences"),
        go = S("View/Edit Moderators"),
        ho = S("View Fan Club Members"),
        io = S("View/Edit Region Block Exemptions"),
        jo = S("View/Edit Banned Terms"),
        ko = S("Alphabetically"),
        lo = S("All Users"),
        mo = S("Users who tipped me today"),
        no = S("Users who have tipped me"),
        oo = S("Users who have tokens"),
        po = S("1 Day"),
        qo = S("2 Days"),
        ro = S("1 Week"),
        so = S("2 Weeks"),
        to = S("1 Month"),
        uo = S("2 Months"),
        vo = S("6 Months"),
        wo = S("No");
    S("Yes");
    var xo = S("Yes, only if they're broadcasting now"),
        yo = S("Age Verification Required"),
        zo = S("Only age verified broadcasters can change this setting"),
        Ao = S("Listed are your current fan club members, the date they last joined, and the total number of months they've been your fan (Expiring memberships have a short grace period to renew before removed from your fanclub.)"),
        Bo = S("Listed are all of your fan club members past and present and how long they were a member for. Current members are <strong>highlighted</strong>."),
        Co = S("Add user"),
        Do = S("Add"),
        Eo = S("Region Block Exemptions");
    S("Unique Registered Viewers");
    S("Your Points");
    S("Your Rank");
    S("You may use some HTML tags (a p i strong b u ul ol li h1 h2 h3 img font br span).");
    S("You may post links to external wish lists (amazon wish list, for example) and use some HTML tags (a p i strong b u ul ol li h1 h2 h3 img font br).");
    S("Display Name");
    S("Display Birthday");
    S("Interested in");
    S("Spoken languages");
    S("Wish Lists");
    var Fo = S("Join Fan Club"),
        Go = S("Member");
    S("Fan Club Member");
    var Ho = S("Last Joined"),
        Io = S("Total Months a Member");
    S("Improve Video Quality");
    var Jo = S("Dark Mode"),
        Ko = S("Search #tags or broadcasters"),
        Lo = S("Broadcasting right now"),
        Mo = S("Recently online"),
        No = S("Previously searched"),
        Oo = S("TAP TO UNMUTE");
    S("Modify Supporter Membership");
    S("Yes, cancel the membership");
    S("No, keep the features");
    S("Cancellation Successful");
    S("Send and close");
    S("Supporter Plan");
    S("Renew subscription");
    S("Why did you decide to cancel your membership plan? (Optional)");
    S("Would you like to cancel your supporter membership and lose all your supporter features?");
    S("You are about to renew your subscription.");
    S("Cancellation Failed");
    S("OK");
    S("Error, please try and refresh your window.");
    S("Please note that the 'Room subject' of your broadcast and the 'Location' field of your bio may not be used for promotion of social media or other websites. Thank you for your understanding.");
    var Po = S("Note"),
        Qo = S("Loading..."),
        Ro = S("Enter notes about this user (only seen by you)"),
        So = S("(unsaved)");
    S("One of your linked Guests has become inactive. <a href='/accounts/age_verification/'>Review your Guests</a> now.");
    var To = S("Back"),
        Uo = S("Loading More Messages");
    S("Send a private message");
    var Vo = S("Send a direct message"),
        Wo = S("Send a direct message (new)"),
        Xo = S("Search users"),
        Yo = S("UNOPENED"),
        Zo = S("now"),
        $o = S("1 minute ago"),
        ap = S("an hour ago"),
        bp = S("a day ago"),
        cp = S("minutes ago"),
        dp = S("hours ago"),
        ep = S("days ago");
    S("To avoid ending the private show, a new tab will open. Click OK to continue.");
    var fp = S("Accept Rules"),
        gp = S("Chat"),
        hp = S("Unmute");
    S("Clean, Ad-Free Interface");
    S("Custom Chat Font & Color Options");
    S("Private Messaging");
    var ip = S("Direct Messages (new)");
    S("Anonymous Tipping");
    S("Preview Rooms");
    S("There was an error cancelling your Fan Club.");
    S("Are you sure you wish to remove your supporter status? You will remain a supporter until your currently paid month expires.");
    S("There was an error cancelling your supporter membership.");
    S("You can renew after membership expires.");
    S("Since");
    S("Events API");
    var jp = S("Ban removed"),
        kp = S("Silence removed"),
        lp = S("Error removing ban, please try again"),
        mp = S("Error converting to ban, please try again"),
        np = S("Error removing silence \u2013\u2013\u00a0it may have already been removed"),
        op = S("Undo"),
        pp = S("Ban"),
        qp = S("Cam To Cam is the best way to share your cam with broadcasters you are watching.");
    S("trans viewers");
    S("and");
    var rp = S("How is Chaturbate doing today?"),
        sp = S("How is Cam To Cam doing today?"),
        tp = S("Your feedback has been sent!"),
        up = S("Describe your issues or share your ideas.");
    S("You will no longer receive notifications or see them in your followed tab.");
    S("Running Apps");
    S("All Apps");
    S("Customize your chat room experience with Apps");
    S("Create your own app");
    S("Switch back to legacy apps");
    S("Do you want to remove this app?");
    S("Order By:");
    S("Search for Apps");
    S("Search");
    S("Failed to load Apps");
    S("Failed to load v2 Apps");
    S("Top Earning");
    S("Featured Apps");
    S("Recently Updated");
    S("Recently Used");
    S("version");
    S("Installed");
    S("Broadcast panel");
    S("Update available");
    S("Uninstall");
    S("Transform messages");
    S("Restart app");
    S("Tip options");
    S("Only one app can have this permission.");
    S("Add app");
    S("Upgrade & Apply");
    S("Upgrade & Restart");
    S("Apply");
    S("Running");
    S("Stopped");
    S("Stop");
    S("Settings");
    S("Source code");
    S("No Description");
    S("This app does not have any settings.");
    S("This field is required");
    S("This field is too short");
    S("This field is too long");
    S("Invalid input");
    S("Select an option");
    S("Permissions");
    S("All permissions granted");
    S("No permissions granted");
    S("Some permissions granted");
    S("The app you are adding is requesting the following permissions.");
    S('\u26a0\ufe0f App running in "Active App" is overriding this permission.');
    S('\u26a0\ufe0f Apps running in "Active App" slot can override this permission.');
    S("You have reached the maximum number of apps.");
    S("Only age verified broadcasters may install apps.");
    S("Verify Age");
    S("App is not available.");
    S("Refresh");
    var vp = S("User has been added to your exemption list.");
    S("User has been removed from your exemption list.");
    var wp = S("An error occurred."),
        xp = S("Do you really want to delete this image? This cannot be undone."),
        yp = S("There was an error deleting your media."),
        zp = S("There was an error uploading your media."),
        Ap = S("This file type is not supported or the file is corrupted."),
        Bp = S("This file is too large. Images must be at most 50MB"),
        Cp = S("Could not load media. It may have been deleted.");
    S("Switch to OBS to stream games");
    S("Select your game from the list of approved games below.");
    S("Install and start the game");
    S("Download and and run the game.");
    S("Download OBS and set it up");
    S("Authorize this game");
    var Dp = S("Pro tip: Viewers who use Cam To Cam tip 50% more on average than viewers who don\u2019t. Encouraging your viewers to share their cam can build a more intimate connection and potentially earn you more tokens!"),
        Ep = S("Notify me when broadcasters I follow come online with"),
        Fp = S("POPULAR"),
        Gp = S("Browser notification"),
        Hp = S("Browser notification enabled"),
        Ip = S("Save notification settings"),
        Jp = S("Email address"),
        Kp = S("Your preferences have been saved."),
        Lp = S("Check your email inbox to verify your email!"),
        Mp = S('Your email address has been updated on your account. Check your email inbox to <span style="font-family: UbuntuBold, Arial, Helvetica, sans-serif;">verify your email</span>!'),
        Np = S("Error sending verification email, please try again."),
        Op = S("Error submitting email, please try again."),
        Pp = S("Error saving browser notification."),
        Qp = S("Please try again from the Settings & Privacy page on your profile."),
        Rp = S("Unable to send private message");
    S("Buy more tokens");
    var Sp = S("Image removed for violating site rules"),
        Tp = S("Image attached"),
        Up = S("Get email notifications when broadcasters come online"),
        Vp = S("Enable email notification");
    S("If you didn\u2019t give a perfect rating, what can we do to earn one?");
    var Pd = S("Submit and Start Broadcasting"),
        Wp = S("We launched new gender categories in order to allow the Chaturbate community to better identify their gender identity."),
        Xp = S("Please choose an option below, selecting which one expresses you best:");
    S("A subgender is required before streaming. Please specify a subgender in your bio or profile.");
    S("A Man");
    S("A Woman");
    S("A Couple");
    var Yp = S("Trans Femme"),
        Zp = S("Trans Masc"),
        $p = S("Non-Binary");
    S("What improvements would you be most excited to see implemented next?");
    S("Did you notice any bugs today? Please describe them in as much detail as possible.");
    S("What were the biggest pain points you experienced today?");
    var aq = S("Offline");
    S("Live");
    S("Your stream is currently ");
    S('This private or group show has ended. To give you time to prepare, you are now shown as "Away" to those in your room. To return and be visible on cam, click "Exit Away Mode" below.');
    S("Stream Rejected");
    S("Waiting for stream stats");
    S("Stream Status Unknown");
    S("Stream time");
    S("Codec");
    S("Frame Rate: ");
    S("Bitrate: ");
    S("We also support other encoders such as XSplit, Wirecast, etc.");
    S(" (OBS) is an open source streaming software which provides broadcasters control to configure stream settings and customizable plugins so they can enhance their stream.");
    S("Try adding #hashtags to your room subject to attract more viewers.");
    S("View RTMP/OBS broadcast information and stream key");
    S("Waiting for stream to start");
    S("Start the in-Browser Broadcaster");
    S("Your browser is outdated and cannot use in browser broadcast. Please update to use the latest Chaturbate features. We recommend Chrome, Firefox, or Edge.");
    var bq = S("(Ctrl+L to close)"),
        cq = S("To go to next room, press Ctrl+/. To send a tip, press Ctrl+S or type \"/tip 25\". To disable emoticons or adjust autocomplete settings, click the 'Gear' tab above.");
    S('To send a tip, click SEND TIP or type "/tip 25".');
    S("Back to Room Menu");
    var dq = S("Banned Terms"),
        eq = S("Viewers will not be able to send messages containing these terms. All characters are allowed, including spaces."),
        fq = S("Add term"),
        gq = S("Term"),
        hq = S("Ban as Substring"),
        iq = S('Ban the term if it appears anywhere in a message, even as part of other words. For example, if the term is "hello" then this will also ban "xhellox". Otherwise, if disabled, only messages like "x hello x" will be banned.'),
        jq = S("Enter term to ban"),
        kq = S("Please enter a term to ban"),
        lq = S("There was an error banning this term. Please try again later"),
        mq = S("There was an error updating this term. Please try again later"),
        nq = S("There was an error removing this term. Please try again later"),
        oq = S("Follows you");
    S("Sharing their cam");
    var pq = S("Notes");
    S("Broadcast Date");
    S("Broadcast Weekday");
    S("Broadcast Length");
    S("Max Viewers");
    S("Tokens Total");
    S("Average Tokens Per Minute");
    S("Average Tokens Per User");
    S("Chat Messages Total");
    S("Average Messages Per User");
    var qq = S('Visit the <a href="https://m.chaturbate.com/mobile/" style="color: #0a5a83;">mobile site</a>  again, or give us some <a href="#" style="color: #0a5a83;">feedback</a> on why you left');
    S("FEATURED");
    S("ALL GENDERS");
    S("Not showing broadcasters from");
    S("There are currently no rooms available that match your gender and location preferences.");
    S("Drag to resize");
    var rq = S("User is in the room"),
        sq = S("User has left the room"),
        tq = S("User is not in the private show"),
        uq = S("Close tab"),
        vq = S("Ctrl+L to close window"),
        wq = S("Report this user"),
        xq = S("Inappropriate message"),
        yq = S("Rude message"),
        zq = S("Spam message"),
        Aq = S("Get More"),
        Bq = S("Invalid amount");
    S("Followed tags:");
    S("Recommended:");
    S("Supporters have it best");
    S("Send PMs to broadcasters, 200 bonus tokens, room previews and more as a supporter!");
    S("Upgrade Your Account");
    S("Broadcast Yourself");
    S("Show off for fun or earn tips and prizes. Become the next Chaturbate Star!");
    S("Broadcast My Cam Now");
    S("SUPPORTER");
    var Cq = S("Your stream may appear upside down or sideways to viewers. Turn your device."),
        Dq = S("Your broadcast may appear upside down or sideways to viewers. Turn your device into landscape mode."),
        Eq = S("Your broadcast may appear upside down to viewers. Turn your device 180 degrees.");
    S("Fullscreen is required for broadcasting. ");
    S("Screen is no longer fullscreen so stream has been stopped.");
    S("Starting a broadcast will enter fullscreen.");
    S("Must be in proper landscape to broadcast, rotate 90 or 180 degrees and try again");
    S("ALL TAGS");
    var Fq = S("Unlock chatting, tipping, private shows with live broadcasters when you join Chaturbate."),
        Gq = S("Dismiss"),
        Hq = S("Sign Up Now"),
        Iq = S("Connecting"),
        Jq = S("Please wait while we connect you to this webcam broadcast."),
        Kq = S("Performer Is Away"),
        Lq = S("You may continue chatting while you wait for the broadcaster to return."),
        Mq = S("You may continue chatting while you wait for the broadcaster to return from the private show. If a goal had been set when the broadcaster returns it will continue where it left off."),
        Nq = S("SPY ON THIS PRIVATE SHOW"),
        Oq = S("Cam is Hidden"),
        Pq = S("The member you are trying to view is currently offline. Please wait or choose another member to view."),
        Qq = S("Password Required"),
        Rq = S("The broadcaster has set a password which is required for viewing. If you know the password, refresh this page to enter it."),
        Sq = S("Basic Member"),
        Tq = S("Supporter"),
        Uq = S("Upgrade");
    S("Age Verified Broadcasters");
    S("Your account is age verified!");
    S("Additionally the following guests are approved to appear on your account:");
    S("Only the age verified People shown below can appear through your account. If a Person is not age verified they must not appear through your account.");
    S('To age verify another broadcaster, submit their ID to the <a href="/identity/" target="_blank" style="white-space: nowrap;">Independent Broadcaster Verification</a> page');
    function Vq() {
        var a, b;
        return null !== (b = null === (a = A.current) || void 0 === a ? void 0 : a.qQ) && void 0 !== b ? b : "https://static-assets.highwebmedia.com/images/logo.svg";
    }
    var Wq = {
            NA: "chaturbate.com",
            $O: "",
            xU: Ef,
            yU: "#0b5d81",
            Rz: "Chaturbate",
            Xn: "https://cbjpeg.stream.highwebmedia.com/",
            bE: "https://roomimg.stream.highwebmedia.com/",
            xB: "https://games.multimediallc.com/",
            bgColor: "#ffffff",
            gS: "#0c6a93",
            ZL: "#ffffff",
            fS: "#f47321",
            dS: "#ffffff",
            eS: "url(https://static-assets.highwebmedia.com/tsdefaultassets/gender_tab_bg.gif) repeat-x",
            dR: "#004B5E",
            Bi: "#494949",
            wC: "#494949",
            hJ: "#222222",
            UU: "#222222",
            pR: "#0A5B83",
            cA: "#8bb3da",
            oU: "#ffffff",
            rU: "#dde9f5",
            pU: "#dc5500",
            sU: "#5e81a4",
            uU: "#6D85B5",
            vU: "#FFF",
            wU: "#2472B4",
            zU: "#4F4F4F",
            AU: "#B60A42",
            eQ: "#FFFFFF",
            EP: "#F0F1F1",
            FP: "#ACACAC",
            HP: "#000",
            IP: "#0A5A83",
            DP: "#575757",
            GP: "#0A5A83",
            MU: "#e45900",
            SQ: "#676767",
            WQ: "#494949",
            gQ: "#494949",
            OR: Vq(),
            eU: "#f47321",
            PR: void 0,
            TQ: "",
            kR: "#ffffff url(https://static-assets.highwebmedia.com/tsdefaultassets/header_bg.gif) repeat-x",
            RQ: "#ffffff url(https://static-assets.highwebmedia.com/tsdefaultassets/footer_bg.gif) repeat-x",
            VU: "#e9e9e9",
            YU: "#ffffff",
            iS: "#FCEADB",
            QQ: "#494949",
            UQ: "#0A5A83",
            VQ: "#dc5500",
            VP: "#4C4C4C",
            uQ: "",
            lq: !1,
            hG: !1,
            RT: !1,
            ST: !1,
            QT: !1,
            WT: !0,
            YT: !0,
            UT: !0,
            VT: !0,
            jG: !0,
            qT: "#494949",
            NR: "#000000",
            pJ: "#494949",
            LO: "#3C87BA",
            WU: "#F47321",
            XU: "#ffffff",
            gH: "https://www.surveymonkey.com/r/DXYF5T8",
            EK: !0 === window.hide_entrance_terms,
            LP: "#F47321",
            MP: "#FFFFFF",
            NP: "#000000",
            OP: "#F8F9fA",
            PP: "#ACACAC",
            QP: "#6E6F70",
            RP: "#0A5B83",
            SP: "#494949",
        },
        xe = Wq;
    if (void 0 !== window.siteSettings) {
        var U = window.siteSettings,
            Xq = U.navigation_font_color,
            Yq = U.text_color,
            Zq = U.tab_inactive_color,
            $q = U.tab_inactive_font_color,
            ar = U.content_bgcolor,
            br = U.footer_href_color,
            cr = U.footer_text_color,
            dr = U.cam_href_color;
        xe = {
            NA: U.chaturbate_alias,
            $O: U.dbwl_domain,
            xU: U.tagline,
            yU: U.tagline_color,
            Rz: U.site_name,
            Xn: U.jpeg_stream_url,
            bE: U.jpeg_room_img_url,
            xB: U.cb_games_url,
            bgColor: U.bgcolor,
            gS: U.navigation_bgcolor,
            ZL: Xq,
            fS: U.navigation_alt_bgcolor,
            dS: U.navigation_alt_2_bgcolor,
            eS: "",
            dR: U.h1_color,
            Bi: Yq,
            wC: Wq.wC,
            hJ: Wq.hJ,
            UU: Yq,
            pR: U.href_color,
            cA: U.tab_border_color,
            oU: U.tab_active_color,
            rU: Zq,
            pU: U.tab_active_font_color,
            sU: $q,
            uU: U.tag_exhibitionist_color,
            vU: U.tag_font_color,
            wU: U.tag_hd_color,
            zU: U.tag_offline_color,
            AU: U.tag_private_group_color,
            eQ: ar,
            EP: U.cam_background_color,
            FP: U.cam_border_color,
            HP: U.cam_text_color,
            IP: "#0C6A93",
            DP: U.cam_text_alt_color,
            GP: dr,
            MU: dr,
            SQ: br,
            WQ: cr,
            gQ: cr,
            OR: U.logo_image_name,
            eU: U.signup_bg_color,
            PR: U._logo_width,
            TQ: U.footer_html,
            kR: "",
            RQ: "",
            VU: ar,
            YU: Xq,
            iS: Zq,
            QQ: $q,
            UQ: br,
            VQ: br,
            VP: "#0C6A93",
            uQ: U.default_campaign_slug,
            lq: !0,
            hG: !0,
            RT: !0,
            ST: !0,
            QT: !0,
            WT: !1,
            YT: !1,
            UT: !1,
            VT: !1,
            jG: !1,
            qT: "#222222",
            NR: Yq,
            pJ: Yq,
            bN: U.whitelabel_hit_count_referring_url,
            LO: U.tab_inactive_color,
            WU: U.tab_active_color,
            XU: U.tab_active_font_color,
            gH: Wq.gH,
            EK: Wq.EK,
            LP: U.carousel_active_circle_color,
            MP: U.carousel_arrow_bg_color,
            NP: U.carousel_arrow_color,
            OP: U.carousel_bg_color,
            PP: U.carousel_border_color,
            QP: U.carousel_circle_color,
            RP: U.carousel_href_color,
            SP: U.carousel_title_color,
        };
    } else void 0 !== window.siteUrls && ((xe.Xn = window.siteUrls.jpeg_stream_url), (xe.bE = window.siteUrls.jpeg_room_img_url), (xe.xB = window.siteUrls.cb_games_url));
    void 0 !== xe.bN &&
        E("whitelabels/record_hit/", { referer: xe.bN }).catch(function (a) {
            r("Error recording whitelabel hit: " + a, "siteSettings.ts", "cb");
        });
    var er = jb() && !pb(),
        fr = new y("roomStartStreaming"),
        gr;
    er &&
        ((gr = new y("safariPageShow", { rc: 800 })),
        v("pageshow", window, function (a) {
            a.persisted && void 0 !== gr && gr.h();
        }));
    function hr(a, b, c) {
        var d = this;
        c = void 0 === c ? {} : c;
        this.J = a;
        this.qk = b;
        this.TA = this.Kr = !1;
        this.Fp = this.cm = 0;
        this.options = Object.assign(Object.assign({}, { To: !1, LR: !0, IQ: 2e3, yG: 0, aH: !0 }), c);
        this.aP = "" + xe.Xn + (this.options.aH ? "riw" : "ri") + "/" + this.J + ".jpg";
        this.ZO = "" + xe.Xn + (this.options.aH ? "minifwap" : "minifap") + "/" + this.J + ".jpg";
        ir(this);
        this.options.To ? this.To() : this.options.LR && jr(this, 0);
        void 0 !== gr &&
            gr.addListener(function () {
                d.SF();
            }, this.qk);
    }
    hr.prototype.SF = function () {
        this.TA || (kr(this, !1), (this.Fp = 0), jr(this, 0));
    };
    function lr(a) {
        return !a.Kr && new Date().getTime() <= a.Fp;
    }
    function kr(a, b) {
        var c = 0 === a.options.yG;
        b ? (a.Fp = c ? 0 : new Date().getTime() + a.options.yG) : 0 === a.Fp && (a.Fp = new Date().getTime() + a.options.IQ);
        a.Kr = c && b;
    }
    function ir(a) {
        var b = navigator.userAgent.match(/Puffin\/(\d)/);
        a.lU = null !== b && 8 > parseInt(b[1]) ? 1500 : 140;
    }
    function jr(a, b) {
        0 === a.cm && (a.cm = b);
        if (!(0 === b || b - a.cm > a.lU)) return Promise.resolve();
        a.cm = b;
        var c = a.Kr || lr(a) ? a.ZO + "?f=" + Math.random() : a.aP + "?" + Math.floor(new Date().getTime() / 3e4);
        return new Promise(function (d, e) {
            var f = new Image();
            f.onload = function () {
                a.qk.onload = function () {
                    a.TA = !0;
                };
                a.TA = !1;
                a.qk.src = f.src;
                d();
            };
            f.onerror = function () {
                e("Error downloading image " + c);
            };
            f.src = c;
        });
    }
    hr.prototype.To = function () {
        var a = this;
        if (!sb()) {
            fr.h(this.J);
            var b = this.Kr || lr(this);
            kr(this, !0);
            if (!b) {
                var c = function (d) {
                    (a.Kr || lr(a)) &&
                        jr(a, d)
                            .then(function () {
                                requestAnimationFrame(function (e) {
                                    c(e);
                                });
                            })
                            .catch(function () {
                                c(0);
                            });
                };
                c(0);
            }
        }
    };
    function mr(a, b, c, d) {
        d = void 0 === d ? 3 : d;
        var e = document.createElement("div");
        e.style.position = "absolute";
        e.style.height = "0";
        e.style.width = "0";
        e.style.top = "-8px";
        e.style.left = c;
        c = document.createElement("div");
        O(c, "divotBorder");
        c.style.borderLeft = "8px solid transparent";
        c.style.borderRight = "8px solid transparent";
        c.style.borderBottomWidth = "8px";
        c.style.borderBottomStyle = "solid";
        "" !== a && (c.style.borderBottomColor = "" + a);
        e.appendChild(c);
        a = 8 - d;
        var f = document.createElement("div");
        O(f, "divotBackground");
        f.style.position = "absolute";
        f.style.top = d + "px";
        f.style.left = d + "px";
        f.style.borderLeft = a + "px solid transparent";
        f.style.borderRight = a + "px solid transparent";
        f.style.borderBottomWidth = a + "px";
        f.style.borderBottomStyle = "solid";
        "" !== b && (f.style.borderBottomColor = "" + b);
        c.appendChild(f);
        return e;
    }
    function nr(a, b, c, d) {
        d = void 0 === d ? 3 : d;
        var e = document.createElement("div");
        e.style.position = "absolute";
        e.style.height = "0";
        e.style.width = "0";
        e.style.bottom = "0";
        e.style.left = c;
        c = document.createElement("div");
        O(c, "divotBorder");
        c.style.borderLeft = "8px solid transparent";
        c.style.borderRight = "8px solid transparent";
        c.style.borderTopWidth = "8px";
        c.style.borderTopStyle = "solid";
        "" !== a && (c.style.borderTopColor = "" + a);
        e.appendChild(c);
        a = 8 - d;
        var f = document.createElement("div");
        O(f, "divotBackground");
        f.style.position = "absolute";
        f.style.top = "0";
        f.style.left = d + "px";
        f.style.borderLeft = a + "px solid transparent";
        f.style.borderRight = a + "px solid transparent";
        f.style.borderTopWidth = a + "px";
        f.style.borderTopStyle = "solid";
        "" !== b && (f.style.borderTopColor = "" + b);
        c.appendChild(f);
        return e;
    }
    function or(a, b, c, d) {
        d = void 0 === d ? 3 : d;
        var e = document.createElement("div");
        e.style.position = "absolute";
        e.style.height = "0";
        e.style.width = "0";
        e.style.left = "-8px";
        e.style.top = c;
        c = document.createElement("div");
        O(c, "divotBorder");
        c.style.borderTop = "8px solid transparent";
        c.style.borderBottom = "8px solid transparent";
        c.style.borderRightWidth = "8px";
        c.style.borderRightStyle = "solid";
        "" !== a && (c.style.borderRightColor = "" + a);
        e.appendChild(c);
        a = 8 - d;
        var f = document.createElement("div");
        O(f, "divotBackground");
        f.style.position = "absolute";
        f.style.top = d + "px";
        f.style.left = d + "px";
        f.style.borderTop = a + "px solid transparent";
        f.style.borderBottom = a + "px solid transparent";
        f.style.borderRightWidth = a + "px";
        f.style.borderRightStyle = "solid";
        "" !== b && (f.style.borderRightColor = "" + b);
        c.appendChild(f);
        return e;
    }
    function pr(a, b, c, d) {
        d = void 0 === d ? 3 : d;
        var e = document.createElement("div");
        e.style.position = "absolute";
        e.style.height = "0";
        e.style.width = "0";
        e.style.right = "0";
        e.style.top = c;
        c = document.createElement("div");
        O(c, "divotBorder");
        c.style.borderTop = "8px solid transparent";
        c.style.borderBottom = "8px solid transparent";
        c.style.borderLeftWidth = "8px";
        c.style.borderLeftStyle = "solid";
        "" !== a && (c.style.borderLeftColor = "" + a);
        e.appendChild(c);
        a = 8 - d;
        var f = document.createElement("div");
        O(f, "divotBackground");
        f.style.position = "absolute";
        f.style.top = d + "px";
        f.style.right = "-" + a + "px";
        f.style.borderTop = a + "px solid transparent";
        f.style.borderBottom = a + "px solid transparent";
        f.style.borderLeftWidth = a + "px";
        f.style.borderLeftStyle = "solid";
        "" !== b && (f.style.borderLeftColor = "" + b);
        c.appendChild(f);
        return e;
    }
    function qr() {
        return "FRAGMENT";
    }
    var sr = {
        style: function (a, b) {
            Object.assign(a.style, b);
        },
        className: function (a, b) {
            a.setAttribute("class", b);
        },
        class: function (a, b) {
            a.setAttribute("class", b);
        },
        htmlFor: function (a, b) {
            a.setAttribute("for", b);
        },
        colorClass: function (a, b) {
            Array.isArray(b)
                ? b.forEach(function (c) {
                      "" !== c && a.classList.add(c);
                  })
                : a.classList.add(b);
        },
        xlinkHref: function (a, b) {
            a.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", b);
        },
        dangerouslySetInnerHTML: function (a, b) {
            a.innerHTML = b.__html;
        },
        bind: function (a, b) {
            rr(a, b);
        },
        ref: function (a, b) {
            "function" === typeof b && b(a);
        },
        display: function (a, b) {
            a.style.display = b;
        },
    };
    function tr(a, b, c) {
        var d = sr[a];
        if (void 0 !== d) d(b, c);
        else if (0 === a.indexOf("on")) {
            d = a.toLowerCase();
            var e = !1;
            -1 < a.indexOf("Capture", a.length - 7) && ((e = !0), (d = d.slice(-7)));
            null === b[d] ? v(d.slice(2), b, c, e) : t("Event declared for JSX element that does not exist on type " + b.tagName + ": " + a, "dom.ts", "tsxrender");
        } else b.setAttribute(a, c);
    }
    function ur(a, b) {
        if (null != b) {
            var c = Object.keys(b),
                d = c.indexOf("colorClass");
            0 <= d && c.push(c.splice(d, 1)[0]);
            c.forEach(function (e) {
                tr(e, a, b[e]);
            });
        }
    }
    function vr(a, b) {
        "function" === typeof a.ref && a.ref(b, a);
    }
    function rr(a, b) {
        wr(a, function () {
            Object.keys(b).forEach(function (c) {
                var d = b[c];
                d instanceof Function
                    ? ((d = b[c]()), "display" === c ? (a.style.display = d) : "text" === c ? (a.textContent = d) : tr(c, a, d))
                    : t("Wrong binding for element " + a.outerHTML + " key " + c + " is not a function " + d, "dom.ts", "tsxrender");
            });
        });
    }
    function xr(a) {
        var b = new RegExp("^" + a + "$", "i");
        return ["path", "svg", "use", "g"].some(function (c) {
            return b.test(c);
        });
    }
    function yr(a) {
        function b(d) {
            d instanceof HTMLElement || d instanceof SVGElement || d instanceof Comment || d instanceof DocumentFragment
                ? (c.appendChild(d), zr(c, d))
                : "string" === typeof d || "number" === typeof d
                ? c.appendChild(document.createTextNode("" + d))
                : d instanceof Array
                ? d.forEach(b)
                : !1 === d || null === d || void 0 === d || t("Unexpected child in Tsx fragment: " + d, "dom.ts", "tsxrender");
        }
        var c = document.createDocumentFragment();
        a.forEach(b);
        return c;
    }
    function V(a, b) {
        var c = Ba.apply(2, arguments);
        if ("function" === typeof a)
            if (void 0 === a.prototype || void 0 === a.prototype.render) {
                var d = Object.assign({}, {}, b, { children: c }),
                    e = a(d);
                c = "FRAGMENT" === e ? yr(c) : e;
                vr(d, c);
            } else
                (c = Object.assign({}, {}, b, { children: c })),
                    (d = []),
                    void 0 !== c.unsafeArgs && (d = c.unsafeArgs),
                    (d = new (Function.prototype.bind.apply(a, [null, c].concat(ha(d))))()),
                    (e = d.render()),
                    "function" === typeof c.classRef && c.classRef(d, c),
                    vr(c, e),
                    void 0 !== Object.getPrototypeOf(d).il && wr(e, d),
                    (c = e);
        else (d = xr(a) ? document.createElementNS("http://www.w3.org/2000/svg", a) : document.createElement(a)), (c = yr(c)), d.appendChild(c), zr(d, c), ur(d, b), (c = d);
        return c;
    }
    function wr(a, b) {
        "__mm_bindings__" in a || (a.__mm_bindings__ = []);
        a.__mm_bindings__.push(b);
    }
    function zr(a, b) {
        if ("__mm_bindings__" in b) {
            b = l(b.__mm_bindings__);
            for (var c = b.next(); !c.done; c = b.next()) wr(a, c.value);
        }
    }
    function Ar(a) {
        var b;
        return null !== (b = a.__mm_bindings__) && void 0 !== b ? b : [];
    }
    function Br(a) {
        a = void 0 === a ? "16px" : a;
        return V(
            "a",
            { className: "closeBtnContainer", style: { height: a, borderRadius: "5px", color: "inherit" } },
            V(
                "svg",
                { style: { width: a, height: a }, width: "12", height: "12", viewBox: "0 0 12 12" },
                V("path", {
                    d:
                        "M7.15006 6.08867C7.13842 6.07705 7.12919 6.06326 7.12288 6.04807C7.11658 6.03289 7.11334 6.01661 7.11334 6.00017C7.11334 5.98372 7.11658 5.96744 7.12288 5.95226C7.12919 5.93707 7.13842 5.92328 7.15006 5.91167L11.7816 1.28067C11.9222 1.13984 12.0011 0.94891 12.001 0.749887C12.0008 0.550864 11.9216 0.360048 11.7808 0.219417C11.64 0.0787862 11.4491 -0.000140462 11.25 1.87661e-07C11.051 0.000140838 10.8602 0.0793373 10.7196 0.220167L6.08856 4.84917C6.07695 4.86081 6.06316 4.87004 6.04797 4.87634C6.03278 4.88265 6.0165 4.88589 6.00006 4.88589C5.98362 4.88589 5.96734 4.88265 5.95215 4.87634C5.93697 4.87004 5.92317 4.86081 5.91156 4.84917L1.28056 0.220167C1.21093 0.150501 1.12826 0.0952322 1.03726 0.0575166C0.946271 0.0198009 0.84874 0.000376944 0.75024 0.00035373C0.551311 0.000306846 0.360511 0.0792862 0.219814 0.219917C0.0791162 0.360548 4.6905e-05 0.551311 2.08617e-08 0.75024C-4.68632e-05 0.94917 0.0789325 1.13997 0.219564 1.28067L4.85006 5.91167C4.8617 5.92328 4.87094 5.93707 4.87724 5.95226C4.88354 5.96744 4.88679 5.98372 4.88679 6.00017C4.88679 6.01661 4.88354 6.03289 4.87724 6.04807C4.87094 6.06326 4.8617 6.07705 4.85006 6.08867L0.219564 10.7202C0.14993 10.7898 0.0947003 10.8725 0.0570276 10.9635C0.0193548 11.0546 -2.31938e-05 11.1521 2.08617e-08 11.2506C4.6905e-05 11.4495 0.0791162 11.6403 0.219814 11.7809C0.28948 11.8505 0.372179 11.9058 0.46319 11.9435C0.554201 11.9811 0.651741 12.0005 0.75024 12.0005C0.94917 12.0004 1.13993 11.9214 1.28056 11.7807L5.91156 7.14917C5.92317 7.13753 5.93697 7.12829 5.95215 7.12199C5.96734 7.11569 5.98362 7.11244 6.00006 7.11244C6.0165 7.11244 6.03278 7.11569 6.04797 7.12199C6.06316 7.12829 6.07695 7.13753 6.08856 7.14917L10.7196 11.7807C10.8602 11.9214 11.051 12.0004 11.2499 12.0005C11.4488 12.0005 11.6396 11.9215 11.7803 11.7809C11.921 11.6403 12.0001 11.4495 12.0001 11.2506C12.0002 11.0517 11.9212 10.8609 11.7806 10.7202L7.15006 6.08867Z",
                })
            )
        );
    }
    function Cr() {
        return V(
            "div",
            { style: { display: "inline-block", paddingTop: "0px", fill: "currentColor" } },
            V(
                "svg",
                { style: { height: "1.2em" }, width: "16", height: "16", viewBox: "0 0 16 16", xmlns: "http://www.w3.org/2000/svg" },
                V("path", {
                    d:
                        "M14.9474 6.50932L14.1034 6.20998C13.9826 6.16702 13.8721 6.09916 13.7791 6.01078C13.6862 5.92241 13.6128 5.8155 13.5638 5.69697C13.5148 5.57845 13.4912 5.45094 13.4946 5.32272C13.498 5.19451 13.5282 5.06843 13.5834 4.95265L13.9674 4.14398C14.1075 3.84868 14.1528 3.51727 14.0971 3.19521C14.0414 2.87315 13.8874 2.57621 13.6563 2.3451C13.4252 2.11398 13.1283 1.96002 12.8062 1.90432C12.4842 1.84862 12.1528 1.89391 11.8574 2.03398L11.0488 2.41865C10.9329 2.47361 10.8069 2.50365 10.6787 2.50683C10.5505 2.51002 10.4231 2.48628 10.3046 2.43715C10.1862 2.38802 10.0794 2.31458 9.99111 2.2216C9.90283 2.12861 9.83504 2.01814 9.79211 1.89732L9.49211 1.05398C9.38235 0.746123 9.18003 0.479756 8.91292 0.291408C8.6458 0.103059 8.32696 0.00195313 8.00011 0.00195312C7.67327 0.00195312 7.35443 0.103059 7.08731 0.291408C6.82019 0.479756 6.61788 0.746123 6.50811 1.05398L6.20811 1.89798C6.16512 2.01875 6.09728 2.12915 6.00897 2.22206C5.92066 2.31498 5.81384 2.38834 5.69541 2.4374C5.57699 2.48647 5.44959 2.51015 5.32144 2.50692C5.19329 2.50369 5.06725 2.47362 4.95145 2.41865L4.14278 2.03398C3.84747 1.89391 3.51607 1.84862 3.19401 1.90432C2.87195 1.96002 2.575 2.11398 2.34389 2.3451C2.11278 2.57621 1.95882 2.87315 1.90312 3.19521C1.84742 3.51727 1.89271 3.84868 2.03278 4.14398L2.41678 4.95265C2.47188 5.06844 2.50207 5.19451 2.5054 5.3227C2.50873 5.45089 2.48513 5.57835 2.43613 5.69685C2.38712 5.81535 2.31379 5.92224 2.22089 6.01063C2.12799 6.09902 2.01757 6.16693 1.89678 6.20998L1.05278 6.50998C0.744848 6.61958 0.478381 6.8218 0.289952 7.08887C0.101523 7.35595 0.000366211 7.6748 0.000366211 8.00165C0.000366211 8.32851 0.101523 8.64735 0.289952 8.91443C0.478381 9.1815 0.744848 9.38372 1.05278 9.49332L1.89678 9.79332C2.01755 9.83629 2.12795 9.90414 2.22085 9.99246C2.31375 10.0808 2.38708 10.1876 2.43609 10.3061C2.4851 10.4245 2.50871 10.5519 2.50538 10.6801C2.50206 10.8082 2.47187 10.9342 2.41678 11.05L2.03278 11.8587C1.89271 12.154 1.84742 12.4854 1.90312 12.8074C1.95882 13.1295 2.11278 13.4264 2.34389 13.6575C2.575 13.8887 2.87195 14.0426 3.19401 14.0983C3.51607 14.154 3.84747 14.1087 4.14278 13.9687L4.95145 13.5847C5.06722 13.5295 5.19329 13.4992 5.3215 13.4959C5.44971 13.4926 5.57718 13.5162 5.69566 13.5653C5.81415 13.6144 5.92099 13.6878 6.00927 13.7809C6.09755 13.8739 6.1653 13.9844 6.20811 14.1053L6.50811 14.9487C6.61788 15.2565 6.82019 15.5229 7.08731 15.7112C7.35443 15.8996 7.67327 16.0007 8.00011 16.0007C8.32696 16.0007 8.6458 15.8996 8.91292 15.7112C9.18003 15.5229 9.38235 15.2565 9.49211 14.9487L9.79211 14.1047C9.83509 13.9839 9.90293 13.8735 9.99126 13.7806C10.0796 13.6877 10.1864 13.6144 10.3049 13.5653C10.4233 13.5163 10.5507 13.4927 10.6789 13.496C10.807 13.4994 10.933 13.5296 11.0488 13.5847L11.8574 13.9687C12.1528 14.1087 12.4842 14.154 12.8062 14.0983C13.1283 14.0426 13.4252 13.8887 13.6563 13.6575C13.8874 13.4264 14.0414 13.1295 14.0971 12.8074C14.1528 12.4854 14.1075 12.154 13.9674 11.8587L13.5834 11.05C13.5284 10.9342 13.4982 10.8082 13.4948 10.6801C13.4915 10.5519 13.5151 10.4245 13.5641 10.3061C13.6131 10.1876 13.6865 10.0808 13.7794 9.99246C13.8723 9.90414 13.9827 9.83629 14.1034 9.79332L14.9474 9.49265C15.2554 9.38305 15.5218 9.18084 15.7103 8.91376C15.8987 8.64669 15.9999 8.32784 15.9999 8.00098C15.9999 7.67413 15.8987 7.35528 15.7103 7.08821C15.5218 6.82113 15.2554 6.61892 14.9474 6.50932ZM8.00011 11.1907C7.37045 11.1815 6.75667 10.9917 6.2318 10.6437C5.70693 10.2958 5.29306 9.80438 5.03945 9.22798C4.71516 8.44275 4.71553 7.56095 5.04046 6.77598C5.3654 5.99102 5.98838 5.36695 6.77278 5.04065C7.55892 4.72626 8.43681 4.73154 9.21911 5.05537C10.0014 5.3792 10.6262 5.99594 10.9601 6.77398C11.2844 7.55922 11.284 8.44102 10.9591 9.22598C10.6342 10.011 10.0112 10.635 9.22678 10.9613C8.83799 11.1212 8.42042 11.1993 8.00011 11.1907Z",
                })
            )
        );
    }
    function Dr(a) {
        var b = V(
            "svg",
            { width: "14", height: "14", viewBox: "0 0 14 14", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
            V("path", {
                d:
                    "M9.41624 6.5001C8.36101 5.49058 6.91921 5.42139 6.31151 5.44408C6.2877 5.44511 6.26454 5.43559 6.2474 5.41774C6.23026 5.39989 6.22063 5.37525 6.22074 5.34955V4.37708C6.22037 4.2304 6.1414 4.09718 6.01813 4.0353C5.89485 3.97341 5.74953 3.99404 5.64528 4.08821L3.01893 6.49519C2.93812 6.56704 2.89133 6.67411 2.89136 6.78708C2.89077 6.89782 2.93585 7.00312 3.01437 7.07444L5.64739 9.58388C5.75212 9.677 5.89728 9.69652 6.02 9.63396C6.14272 9.57141 6.22092 9.43803 6.22074 9.29161V8.14408C6.22076 8.09924 6.25009 8.06064 6.29083 8.05182C6.95951 7.90058 9.14183 7.61398 10.2721 9.90072C10.3101 9.97676 10.3911 10.0153 10.4688 9.99434C10.5465 9.97338 10.6011 9.89827 10.6015 9.81187C10.6015 8.36716 10.2027 7.25328 9.41624 6.5001Z",
            })
        );
        return V("div", { colorClass: "replyIconSvg", style: a }, b);
    }
    var Er = new y("bioClicked"),
        Fr = new y("userListRequest"),
        Gr = new y("openTipCalloutRequest"),
        Hr = new y("loadRoomRequest"),
        Ir = new y("reportAbuseRequest"),
        Jr = new y("privateWindowRequest"),
        Kr = new y("chatWindowRequest"),
        Lr = new y("colorModeChangeRequest"),
        Mr = new y("roomChangeColorModeUpdateRequest");
    var Nr = new y("navigationRequest"),
        Or = [],
        Pr = !0;
    function Qr(a) {
        Promise.all(
            Or.map(function (b) {
                return b();
            })
        )
            .then(function () {
                Nr.h(a);
            })
            .catch(function () {});
    }
    function Rr(a, b) {
        b = void 0 === b ? !1 : b;
        v("click", a, function (c) {
            if (!(c.metaKey || c.ctrlKey || c.defaultPrevented || qb() || ib())) {
                var d = Sr(c.target);
                void 0 !== d &&
                    (d.hasAttribute("data-floatingnav") && Pr
                        ? (c.preventDefault(), Qr(d.href))
                        : d.hasAttribute("data-room")
                        ? (c.preventDefault(),
                          Promise.all(
                              Or.map(function (e) {
                                  return e();
                              })
                          )
                              .then(function () {
                                  Hr.h(d.getAttribute("data-room"));
                              })
                              .catch(function () {}))
                        : b && (d.target = "_top"));
            }
        });
    }
    function Sr(a) {
        for (; null !== a && "a" !== a.tagName.toLowerCase(); ) a = a.parentElement;
        if (null !== a && "#" !== a.href && -1 !== "_self".indexOf(a.target)) return a;
    }
    var Tr = new y("modalReposition");
    v("resize", window, function () {
        Tr.h(void 0);
    });
    v("orientationchange", window, function () {
        Tr.h(void 0);
    });
    var Ur = new y("modalFullscreenChange");
    v(nd(), document, function () {
        Ur.h(void 0);
    });
    var Vr = new y("modalEscape");
    v("keydown", document, function (a) {
        27 === a.keyCode && Vr.h(a);
    });
    var Wr = new y("modalExit");
    v("popstate", window, function () {
        Wr.h(void 0);
    });
    Nr.g(function () {
        Wr.h(void 0);
    });
    var Xr = new y("modalOpened");
    function Yr(a) {
        a = void 0 === a ? { Il: !0 } : a;
        w.call(this);
        var b = this;
        this.options = a;
        this.fc = new y("overlayClick");
        this.H = new Ub();
        this.iu = this.ZE = this.Lb = this.gq = !1;
        this.S = document.createElement("div");
        this.S.style.position = "fixed";
        this.S.style.display = "none";
        this.S.style.left = "0";
        this.S.style.top = "0";
        this.S.style.right = "0";
        this.S.style.bottom = "0";
        this.S.style.zIndex = "1100";
        this.S.style.background = "rgb(0,0,0,0)";
        this.S.onclick = function (c) {
            c.stopPropagation();
            b.fc.h(void 0);
            b.ZE || b.B();
        };
        this.element.style.zIndex = "1101";
        this.element.onclick = function (c) {
            c.stopPropagation();
        };
        this.YS = function () {
            b.gq && b.R();
        };
        this.YQ = function () {
            b.gq && b.show();
        };
    }
    q(Yr, w);
    Yr.prototype.show = function () {
        var a = this,
            b = md();
        pd() && void 0 !== b ? (b.appendChild(this.S), b.appendChild(this.element)) : (document.body.appendChild(this.S), document.body.appendChild(this.element));
        this.gq ||
            (z(Tr.g(this.YS, !1), this.H),
            z(Ur.g(this.YQ, !1), this.H),
            z(
                Wr.g(function () {
                    a.B();
                }, !1),
                this.H
            ),
            this.options.Il &&
                z(
                    Vr.g(function (c) {
                        c.preventDefault();
                        a.B();
                    }, !1),
                    this.H
                ),
            this.iu && Xr.h(!0),
            void 0 !== this.options.jm && this.options.jm(),
            (this.gq = !0));
        this.Lb || (this.S.style.display = "block");
    };
    Yr.prototype.B = function () {
        this.S.style.display = "none";
        null !== this.element.parentElement && this.element.parentElement.removeChild(this.element);
        null !== this.S.parentElement && this.S.parentElement.removeChild(this.S);
        this.gq && (Vb(this.H), this.iu && Xr.h(!1), void 0 !== this.options.ph && this.options.ph(), (this.gq = !1));
    };
    function W(a) {
        return { Yf: 1, message: a };
    }
    function Zr(a) {
        return { Yf: 0, M: a };
    }
    function $r(a, b) {
        return -1 !== b.indexOf(a) ? { Yf: 2, message: a } : W("#" + a);
    }
    var as;
    G.g(function (a) {
        as = a.A.j;
    });
    function bs(a) {
        return Object.assign(Object.assign({}, cs(a)), { nc: K(a, "gender", !1) });
    }
    function cs(a) {
        for (var b = new Map(), c = l(["from_username", "user", "username"]), d = c.next(); !d.done; d = c.next()) (d = d.value), void 0 !== K(a, d, !1) && b.set(d, K(a, d, !1));
        1 !== b.size && r('getStrings(["from_username", "user", "username"]): ' + b + " length is not 1 in " + a.Ye, "messageParsers.ts", "chatconnection");
        b = b.values().next().value;
        c = b === as;
        d = M(a, "in_fanclub");
        var e = void 0 === e ? !0 : e;
        var f = Pc(a, "is_following");
        "boolean" !== typeof f ? (e && void 0 !== f && t("getBoolean(is_following): " + f + " is wrong type", "argjsonmap.ts", "common", { message: a.Ye }), (e = void 0)) : (e = f);
        return {
            username: b,
            Pa: c,
            zd: d,
            Td: e,
            Pe: M(a, "has_tokens"),
            ec: M(a, "is_mod"),
            yf: M(a, "tipped_recently"),
            Gj: M(a, "tipped_alot_recently"),
            zf: M(a, "tipped_tons_recently"),
            kd: L(a, "exploringHashTag", !1),
            $c: ds(L(a, "source_name", !1)),
            nc: K(a, "gender"),
        };
    }
    function es(a, b) {
        !0 !== Pc(b, "X-Successful") && r("X-Successful not true?", "messageParsers.ts", "chatconnection");
        b = { K: bs(b), message: L(b, "m"), font: K(b, "f", !1), Bi: K(b, "c", !1), qe: L(b, "i", !1), backgroundColor: K(b, "background", !1), X: L(b, "tid", !1) };
        b.K.username !== a && r("Parsing username match failed", "messageParsers.ts", "chatconnection");
        return b;
    }
    function fs(a) {
        return { K: bs(Uc(a, "from_user")), message: L(a, "message"), font: K(a, "font_family", !1), Bi: K(a, "font_color", !1), qe: L(a, "id", !1), backgroundColor: K(a, "background", !1), X: L(a, "tid", !1) };
    }
    function gs(a) {
        var b = [];
        if (void 0 === a) return b;
        a = l(a);
        for (var c = a.next(); !c.done; c = a.next()) (c = c.value), b.push({ sc: c.media_id, Zo: c.media_thumbnail_url, url: c.media_url, Yt: c.opened, VC: c.user_uid });
        return b;
    }
    function hs(a) {
        return { K: bs(a), message: L(a, "message"), amount: N(a, "amount"), Nx: M(a, "is_anonymous_tip"), Ij: K(a, "to_username"), X: L(a, "tid") };
    }
    function is(a) {
        var b = Pc(a, "messages"),
            c = [];
        if ("string" === typeof b) c.push([W("Notice: " + b)]);
        else if (b instanceof Array) {
            b = l(b);
            for (var d = b.next(); !d.done; d = b.next()) c.push([W("Notice: " + d.value)]);
        } else r("handleAppNotice error: Invalid message type " + (void 0 === b ? "undefined" : b.toString()), "messageParsers.ts", "chatconnection");
        b = K(a, "weight");
        return { mc: K(a, "foreground"), background: K(a, "background"), weight: "" === b ? void 0 : b, wa: c, Fa: M(a, "showInPrivateMessage", !1, !1), X: L(a, "tid") };
    }
    function js(a) {
        return { text: L(a, "text"), JE: L(a, "notification_type"), url: L(a, "url"), timestamp: N(a, "timestamp"), jv: L(a, "time_since"), sh: M(a, "seen", !1, !1) };
    }
    function ks(a, b) {
        var c = parseInt(window.serverTimeDiff);
        return !isNaN(c) && ((void 0 === b ? 0 : b) || 4e3 < Math.abs(c)) ? new Date(a.getTime() - c) : a;
    }
    function ls(a, b) {
        var c = ms.get(a);
        void 0 === c
            ? t("calling fireMessage with no topics in TopicManager", "topicManager.ts", "topics", a, "PUSH_")
            : (c.forEach(function (d) {
                  d.ea.h(d.L(b));
              }),
              ad(b));
    }
    function ns(a, b) {
        var c;
        null === (c = ms.get(a)) || void 0 === c
            ? void 0
            : c.forEach(function (d) {
                  d.Cg.h(b);
              });
    }
    function os(a) {
        var b;
        null === (b = ms.get(a)) || void 0 === b
            ? void 0
            : b.forEach(function (c) {
                  c.yy.h(void 0);
              });
    }
    function ps(a) {
        var b = ms.get(a.getKey());
        void 0 !== b &&
            (b.splice(b.indexOf(a), 1),
            1 > b.length
                ? (ms.delete(a.getKey()),
                  qs.set(a.getKey(), a),
                  rs(a.getKey())
                      .then(function () {
                          qs.delete(a.getKey());
                      })
                      .catch(function () {}))
                : ms.set(a.getKey(), b));
    }
    function ss() {
        function a(c) {
            return 0 < c.ea.listeners.length || 0 < c.Cg.listeners.length;
        }
        var b = Array.from(ts.keys());
        ms.forEach(function (c, d) {
            c.some(a) && b.push(d);
        });
        return b;
    }
    function us(a) {
        var b = a.getKey();
        ts.has(b) &&
            (ts.delete(b),
            qs.set(b, a),
            rs(a.getKey())
                .then(function () {
                    qs.delete(b);
                })
                .catch(function () {}));
    }
    var ms = new Map(),
        ts = new Map(),
        qs = new Map();
    function vs(a, b) {
        void 0 !== b &&
            Object.keys(b).forEach(function (c) {
                a.set(c, b[c]);
            });
    }
    function ws(a) {
        a.kf("client_id");
        this.UG = new Map();
        this.yB = new Map();
        this.Jn = new Map();
        var b = Uc(a, "settings");
        this.Em = this.GM(b);
        vs(this.Em.flags, Xc(b, "flags"));
        xs(this.UG, Xc(a, "channels"));
        xs(this.yB, Xc(a, "channels"), !0);
        vs(this.Jn, Xc(a, "failures"));
    }
    function xs(a, b, c) {
        c = void 0 === c ? !1 : c;
        if (void 0 !== b) {
            var d = Object.keys(b);
            d = l(d);
            for (var e = d.next(); !e.done; e = d.next()) {
                var f = e.value;
                e = f.split("#")[1];
                f = b[f];
                c ? a.set(f, e) : a.set(e, f);
            }
        }
    }
    ws.prototype.Pf = function (a) {
        return this.UG.get(a);
    };
    ws.prototype.Tp = function (a) {
        return this.yB.get(a);
    };
    ws.prototype.gK = function () {
        return Array.from(this.Jn.keys(), function (a) {
            return a.split("#")[1];
        });
    };
    function ys() {
        this.WA = new Set();
        this.VG = new Set();
        this.gl = new Map();
        this.creationTime = new Date().getTime();
        this.Io = new Map();
        this.DT = 5e3;
        this.In = new Map();
        this.WI = 3;
    }
    function zs(a, b, c) {
        c = void 0 === c ? {} : c;
        void 0 !== Cc && ((c.action = b), (c.created = a.creationTime), (c.client = a.wI), F("PushServiceClient", c));
    }
    k = ys.prototype;
    k.connect = function () {
        var a = this;
        if (this.isConnected()) return Promise.resolve();
        if (new Set(["connecting", "closing"]).has(this.Ss()) && void 0 === this.bs) return Promise.reject("Connection is currently busy!");
        void 0 === this.bs &&
            (this.bs = new Promise(function (b, c) {
                function d(e) {
                    "connected" === e.current ? ((a.bs = void 0), a.bk.removeListener(d), b()) : "connecting" === e.previous && ((a.bs = void 0), a.bk.removeListener(d), c(e.reason));
                }
                a.bk.g(d);
                a.tH();
            }));
        return this.bs;
    };
    k.isConnected = function () {
        return "connected" === this.Ss();
    };
    k.Ll = function () {
        return this.isConnected() ? Promise.resolve() : this.connect();
    };
    function As(a, b) {
        return a.Ll().then(function () {
            return a.auth.lw(b) ? Promise.resolve() : Promise.reject("Auth context has no access: " + a.auth.Bj());
        });
    }
    k.$D = function (a) {
        return this.auth.lw(a) && this.WA.has(a);
    };
    k.subscribe = function (a) {
        var b = this;
        this.VG.add(a);
        return Bs(this, a)
            .then(function () {
                Cs(b, a);
                b.gl.delete(a);
                return Promise.resolve();
            })
            .catch(function (c) {
                Ds(b, a);
                b.gl.delete(a);
                return ["closed", "closing", "disconnected"].includes(b.Ss()) ? Promise.resolve() : Promise.reject(c);
            });
    };
    k.unsubscribe = function (a) {
        var b = this;
        this.VG.delete(a);
        return Bs(this, a)
            .then(function () {
                Es(b, a);
                b.gl.delete(a);
            })
            .catch(function (c) {
                Es(b, a);
                b.gl.delete(a);
                return Promise.reject(c);
            });
    };
    function Bs(a, b) {
        var c = a.gl.get(b);
        if (void 0 !== c)
            return c.then(function () {
                return Bs(a, b);
            });
        c = a.Pf(b);
        if (void 0 === c) return Promise.reject({ code: "topic_error", message: "Unknown topic key" });
        c = a.dK(c);
        return a.VG.has(b) ? ("subscribed" === c || "subscribing" === c ? Promise.resolve() : a.wH(b)) : "unsubscribed" === c || "unsubscribing" === c ? Promise.resolve() : a.xH(b);
    }
    function Fs(a, b) {
        if ("reauth" === K(b, "_control")) {
            var c = Rc(b, "_channel_names");
            b = c.map(function (d) {
                d = a.Tp(d);
                return void 0 === d ? Promise.resolve() : rs(d);
            });
            Promise.all(b)
                .then(function () {
                    c.forEach(function (d) {
                        var e;
                        if (null === (e = a.context) || void 0 === e) void 0;
                        else {
                            var f = a.Tp(d);
                            void 0 !== d && e.yB.delete(d);
                            void 0 !== f && e.UG.delete(f);
                        }
                    });
                    Td(Gs);
                })
                .catch(function (d) {
                    d.topics = c;
                    r("Error during re-auth detach", "baseClient.ts", "pushservicelib", d, "PUSH_");
                });
        }
    }
    function Cs(a, b) {
        a.In.delete(b);
        a.WA.add(b);
        ns(b, { zi: !0, ND: !1 });
    }
    function Es(a, b) {
        a.In.delete(b);
        a.WA.delete(b);
        ns(b, { zi: !1, ND: !1 });
    }
    function Ds(a, b) {
        var c = a.In.get(b);
        a.In.set(b, void 0 === c ? 1 : c + 1);
    }
    function Hs(a) {
        for (var b = a.auth.kx(), c = l(a.In.entries()), d = c.next(); !d.done; d = c.next()) {
            var e = l(d.value);
            d = e.next().value;
            e = e.next().value;
            if (b.includes(d) && e < a.WI) return !0;
        }
        return !1;
    }
    function Is(a) {
        return Array.from(a.In.keys()).filter(function (b) {
            b = a.In.get(b);
            return void 0 !== b && b > a.WI;
        });
    }
    k.aD = function () {
        return "";
    };
    k.eK = function () {
        return "";
    };
    k.ZC = function () {
        return "";
    };
    k.hx = function () {
        return "";
    };
    k.ix = function () {
        return "";
    };
    k.$C = function () {
        return "";
    };
    k.Pf = function (a) {
        var b;
        return null === (b = this.context) || void 0 === b ? void 0 : b.Pf(a);
    };
    k.Tp = function (a) {
        var b;
        return null === (b = this.context) || void 0 === b ? void 0 : b.Tp(a);
    };
    function Js(a, b, c, d) {
        var e = b + ":" + d,
            f = a.Io.get(e);
        if (void 0 === f) return a.Io.size > a.DT && ((b = Array.from(a.Io.entries())), (a.Io = new Map(b.splice(Math.floor(-0.5 * b.length))))), a.Io.set(e, [Ks(a, c)]), !1;
        f.push(Ks(a, c));
        0 !== f.length && ((a = a.AC(b, c, d, f)), void 0 !== Cc && F("PushDuplicateMessage", a));
        return !0;
    }
    k.AC = function (a, b, c, d) {
        var e,
            f = d[0],
            g = null !== (e = K(Uc(b, "providerData"), "id")) && void 0 !== e ? e : "invalid_provider_id";
        b = Ls(b.Ye);
        return {
            tid: c,
            first_seen_time: f.timestamp,
            time_since_first_seen: new Date().getTime() - f.timestamp,
            num_duplicates: d.length,
            connection_host: this.hx(),
            connection_type: this.aD(),
            connection_state: this.Ss(),
            num_reconnects: -1,
            same_content: b === f.hash,
            same_pid: g === f.ez,
            same_server: f.JT === Ls(this.ix()),
            same_host: f.host === Ls(this.hx()),
            orig_connection_serial: f.dQ,
            channel_name: a,
            pid: g,
        };
    };
    function Ls(a) {
        return "" === a
            ? ""
            : Array.from(a, function (b) {
                  return b.charCodeAt(0);
              })
                  .reduce(function (b, c) {
                      return b + c;
                  })
                  .toString() + a.length.toString();
    }
    function Ks(a, b) {
        var c;
        return { timestamp: new Date().getTime(), hash: Ls(b.Ye), ez: null !== (c = K(Uc(b, "providerData"), "id")) && void 0 !== c ? c : "invalid_provider_id", JT: Ls(a.ix()), host: Ls(a.hx()), dQ: a.$C() };
    }
    function Ms() {
        var a = 2;
        try {
            var b = !1;
            var c = !0;
        } catch (d) {
            c = b = !1;
        }
        b ? (a = 0) : c && (a = 1);
        return { level: a };
    }
    function Ns() {
        ys.call(this);
        var a = this;
        this.wI = "a";
        this.TT = new Set();
        this.bk = new y("AblyClientConnection");
        this.SN = !A.current.oj;
        this.Em = A.current.uF;
        try {
            this.vc = new Ably.Realtime.Promise(Os(this));
        } catch (c) {
            throw Ps("connect", c.toString());
        }
        this.auth = new Qs(this.vc);
        var b = ["disconnected", "failed", "suspended"];
        this.vc.connection.on(function (c) {
            var d;
            if (c.previous !== c.current) {
                var e = Rs(c.previous),
                    f = Rs(c.current),
                    g = Ss("connect", c.reason);
                a.bk.h({ previous: e, current: f, reason: g });
                b.includes(f) &&
                    204 !== (null === (d = c.reason) || void 0 === d ? void 0 : d.statusCode) &&
                    zs(a, "connect_failed", { previous: e, current: f, retry: c.retryIn, message: g.message, code: g.code, providerCode: g.providerCode, cause: g.cause });
            }
        });
        this.SN ||
            v(tb(), window, function () {
                a.close();
            });
        this.connect().catch(function () {});
    }
    q(Ns, ys);
    function Os(a) {
        var b = {
            autoConnect: !1,
            closeOnUnload: a.SN,
            log: Ms(),
            authCallback: function (c, d) {
                Ts(a.auth)
                    .then(function (e) {
                        e.Sf() ? ((a.context = e), d(void 0, e.dD())) : d("Invalid token request");
                    })
                    .catch(function (e) {
                        d(e.message);
                    });
            },
            restHost: a.Em.restHost,
            realtimeHost: a.Em.realtimeHost,
            transportParams: { remainPresentFor: "0" },
        };
        0 < a.Em.fallbackHosts.length && (b.fallbackHosts = a.Em.fallbackHosts);
        return b;
    }
    k = Ns.prototype;
    k.tH = function () {
        this.vc.connect();
    };
    k.close = function () {
        this.vc.close();
    };
    k.Ss = function () {
        return Rs(this.vc.connection.state);
    };
    k.dK = function (a) {
        a = this.vc.channels.get(a);
        return Us(a.state);
    };
    k.aD = function () {
        var a, b, c, d, e;
        return null !==
            (e =
                null === (d = null === (c = null === (b = null === (a = this.vc.connection) || void 0 === a ? void 0 : a.connectionManager) || void 0 === b ? void 0 : b.activeProtocol) || void 0 === c ? void 0 : c.transport) || void 0 === d
                    ? void 0
                    : d.shortName) && void 0 !== e
            ? e
            : "";
    };
    k.eK = function () {
        return this.vc.connection.id;
    };
    k.ZC = function () {
        var a, b, c, d;
        return null !== (d = null === (c = null === (b = null === (a = this.vc.connection) || void 0 === a ? void 0 : a.connectionManager) || void 0 === b ? void 0 : b.connectionDetails) || void 0 === c ? void 0 : c.clientId) &&
            void 0 !== d
            ? d
            : "";
    };
    k.hx = function () {
        var a, b, c;
        return null !== (c = null === (b = null === (a = this.vc.connection) || void 0 === a ? void 0 : a.connectionManager) || void 0 === b ? void 0 : b.host) && void 0 !== c ? c : "";
    };
    k.ix = function () {
        var a, b, c, d;
        return null !== (d = null === (c = null === (b = null === (a = this.vc.connection) || void 0 === a ? void 0 : a.connectionManager) || void 0 === b ? void 0 : b.connectionDetails) || void 0 === c ? void 0 : c.serverId) &&
            void 0 !== d
            ? d
            : "";
    };
    k.$C = function () {
        var a, b, c;
        return null !== (c = null === (b = null === (a = this.vc.connection) || void 0 === a ? void 0 : a.connectionManager) || void 0 === b ? void 0 : b.connectionSerial) && void 0 !== c ? c : "";
    };
    k.AC = function (a, b, c, d) {
        var e, f, g, h, m, n, p, u, x;
        a = ys.prototype.AC.call(this, a, b, c, d);
        a.connection_id = this.eK();
        a.recovery_key = this.vc.connection.recoveryKey;
        a.client_id = this.ZC();
        a.server_id = this.ix();
        a.connection_serial = this.$C();
        a.connection_key =
            null !== (h = null === (g = null === (f = null === (e = this.vc.connection) || void 0 === e ? void 0 : e.connectionManager) || void 0 === f ? void 0 : f.connectionDetails) || void 0 === g ? void 0 : g.connectionKey) &&
            void 0 !== h
                ? h
                : "";
        a.msg_serial = null !== (p = null === (n = null === (m = this.vc.connection) || void 0 === m ? void 0 : m.connectionManager) || void 0 === n ? void 0 : n.msgSerial) && void 0 !== p ? p : "";
        a.recovery_key = null !== (x = null === (u = this.vc.connection) || void 0 === u ? void 0 : u.recoveryKey) && void 0 !== x ? x : "";
        return a;
    };
    k.wH = function (a) {
        var b = this,
            c = this.Pf(a);
        if (void 0 === c) return Promise.reject(Ps("topic_error", "Invalid topic key reached subscribe"));
        var d = this.vc.channels.get(c),
            e = new Promise(function (f, g) {
                As(b, a)
                    .then(function () {
                        var h = b.TT.delete(a);
                        return d.setOptions({ XP: void 0, params: h ? { oY: "30s" } : {}, modes: ["SUBSCRIBE", "PRESENCE"] });
                    })
                    .then(function () {
                        return d.attach();
                    })
                    .then(function () {
                        d.unsubscribe();
                        return d.subscribe(function (h) {
                            h.data.providerData = { id: h.id, ts: h.timestamp };
                            h = new H(h.data);
                            Fs(b, h);
                            Js(b, c, h, L(h, "tid")) || ls(a, h);
                        });
                    })
                    .then(function () {
                        f();
                    })
                    .catch(function (h) {
                        "suspended" === d.state &&
                            d
                                .detach()
                                .then()
                                .catch(function () {});
                        g(Ps("subscribe", h));
                    });
            });
        this.gl.set(a, e);
        return e;
    };
    k.xH = function (a) {
        var b = this.Pf(a);
        if (void 0 === b) return Promise.reject(Ps("topic_error", "Invalid topic key reached unsubscribe"));
        var c = this.vc.channels.get(b);
        b = Us(c.state);
        c.unsubscribe();
        if (["unsubscribed", "initialized", "failed"].includes(b)) return Es(this, a), Promise.resolve();
        b = new Promise(function (d, e) {
            c.detach()
                .then(function () {
                    d();
                })
                .catch(function (f) {
                    e(Ps("unsubscribe", f));
                });
        });
        this.gl.set(a, b);
        return b;
    };
    k.Dp = function (a, b) {
        var c = this,
            d = this.gl.get(a);
        if (void 0 !== d) return Promise.reject(Ps("topic_error", "Called subscribe while channel is busy"));
        var e = this.Pf(a);
        if (void 0 === e) return Promise.reject(Ps("topic_error", "Unknown topic key"));
        var f = this.vc.channels.get(e);
        return (d = new Promise(function (g, h) {
            As(c, a)
                .then(function () {
                    return f.setOptions({ XP: void 0, params: {}, modes: ["SUBSCRIBE", "PRESENCE"] });
                })
                .then(function () {
                    return f.attach();
                })
                .then(function () {
                    var m = c.auth.getCapabilities()[e];
                    return Array.isArray(m) && m.includes("presence") ? (b.UP ? f.presence.update(b.data) : Promise.resolve()) : Promise.reject(Ps("presence", "Token does not have capability for presence"));
                })
                .then(function () {
                    Cs(c, a);
                    g();
                })
                .catch(function (m) {
                    c.gl.delete(a);
                    Ds(c, a);
                    h(Ps("presence", m));
                });
        }));
    };
    k.$n = function () {
        var a = this,
            b = this.Pf();
        void 0 === b
            ? Promise.reject(Ps("topic_error", "Unknown topic key"))
            : this.vc.channels
                  .get(b)
                  .presence.leave()
                  .then(function () {
                      Es(a);
                  })
                  .catch(function (c) {
                      Es(a);
                      return Promise.reject(Ps("presence", c));
                  });
    };
    k.$D = function (a) {
        a = this.Pf(a);
        return "subscribed" === (void 0 === a ? "unknown" : Us(this.vc.channels.get(a).state));
    };
    function Vs(a) {
        ws.call(this, a);
        this.fl = Vc(a, "token_request");
        ad(a);
    }
    q(Vs, ws);
    Vs.prototype.GM = function (a) {
        return Ws(a);
    };
    function Ws(a) {
        var b = { kB: "a", restHost: K(a, "rest_host"), realtimeHost: K(a, "realtime_host"), fallbackHosts: Rc(a, "fallback_hosts"), flags: new Map() };
        vs(b.flags, Xc(a, "flags"));
        return b;
    }
    Vs.prototype.Sf = function () {
        return void 0 !== this.fl;
    };
    Vs.prototype.dD = function () {
        if (void 0 === this.fl) throw Error("Access to AblyContext.tokenRequest on an invalid context!");
        return this.fl;
    };
    Vs.prototype.Bj = function () {
        return JSON.stringify(this.fl);
    };
    function Xs() {
        var a = ss().concat(Array.from(qs.keys()));
        100 < a.length && (t("PushService[ably] is attempting to request too many topics", "auth.ts", "pushservicelib", {}, "PUSH_"), (a.length = 100));
        var b = {};
        a.forEach(function (c) {
            var d = ts.get(c);
            void 0 !== d ? (d = d.DO) : ((d = qs.get(c)), void 0 === d && ((d = ms.get(c)), (d = void 0 !== d && 0 !== d.length ? d[0] : void 0)));
            d = void 0 !== d ? { key: Ys(d), payload: d.Qs() } : void 0;
            void 0 === d && t("undefined topic data", "pushService.ts", "pushservicelib", { topic: c }, "PUSH_");
            void 0 !== d && (b[d.key] = d.payload);
        });
        a = { topics: JSON.stringify(b) };
        return E("push_service/auth/", a).then(function (c) {
            try {
                var d = new H(c.responseText);
                return Promise.resolve(d);
            } catch (e) {
                return Promise.reject(e);
            }
        });
    }
    function Zs(a) {
        this.tokenDetails = a;
        this.capability = $s(a.capability);
    }
    function $s(a) {
        var b = {},
            c = JSON.parse(a),
            d = Object.keys(c);
        d = l(d);
        for (var e = d.next(); !e.done; e = d.next()) {
            e = e.value;
            var f = c[e];
            f instanceof Array
                ? (b[e] = f.map(function (g) {
                      return g;
                  }))
                : r("Invalid capability type for topic: " + e, "ablyAuth.ts", "ablyClient", { capability: a }, "PUSH_");
        }
        return b;
    }
    function Qs(a) {
        this.Cl = 0;
        this.vc = a;
        this.kp = void 0;
    }
    k = Qs.prototype;
    k.Bj = function () {
        var a;
        return !0 !== (null === (a = this.kp) || void 0 === a ? void 0 : a.Sf()) ? "" : this.kp.Bj();
    };
    k.getCapabilities = function () {
        var a = this.Sr;
        return void 0 === a ? {} : a.capability;
    };
    function Ts(a) {
        return new Promise(function (b, c) {
            return Xs()
                .then(function (d) {
                    a.Cl = 0;
                    a.lN(d);
                    a.kp = new Vs(d);
                    b(a.kp);
                })
                .catch(function (d) {
                    a.Cl += 1;
                    3 <= a.Cl && a.vc.connection.close();
                    c(d);
                });
        });
    }
    k.lN = function (a) {
        a = Xc(a, "failures");
        "object" === typeof a && 0 !== Object.keys(a).length && F("PushServiceClient", { action: "token_request_failed_topics", topics: a, client: "a" });
    };
    k.lw = function (a) {
        var b,
            c = at(this),
            d = null === (b = this.kp) || void 0 === b ? void 0 : b.Pf(a);
        return void 0 === d ? !1 : void 0 !== c && c.capability.hasOwnProperty(d);
    };
    k.kx = function () {
        var a = this,
            b = at(this);
        return void 0 === b
            ? []
            : Object.keys(b.capability)
                  .map(function (c) {
                      var d, e;
                      return null !== (e = null === (d = a.kp) || void 0 === d ? void 0 : d.Tp(c)) && void 0 !== e ? e : "";
                  })
                  .filter(function (c) {
                      return "" !== c;
                  });
    };
    function at(a) {
        if (void 0 !== a.Sr)
            if (new Date().getTime() >= a.Sr.tokenDetails.expires) a.Sr = void 0;
            else return a.Sr;
    }
    k.HO = function () {
        var a = this;
        return new Promise(function (b, c) {
            a.vc.auth
                .authorize()
                .then(function (d) {
                    a.Sr = new Zs(d);
                    b();
                })
                .catch(function (d) {
                    c(Ps("auth", d));
                });
        });
    };
    function Ps(a, b) {
        return void 0 === b ? { code: a, message: "Unknown", providerCode: "" } : "string" === typeof b ? { code: a, message: b, providerCode: "" } : "statusCode" in b ? Ss(a, b) : b;
    }
    function Ss(a, b) {
        a = { code: a, message: "Unknown failure", providerCode: "" };
        void 0 !== b && ((a.message = b.message), (a.providerCode = b.code.toString()), void 0 !== b.cause && "code" in b.cause && (a.cause = b.cause.code));
        return a;
    }
    function Rs(a) {
        switch (a) {
            case "initialized":
                return "initialized";
            case "connecting":
                return "connecting";
            case "connected":
                return "connected";
            case "closing":
                return "closing";
            case "closed":
                return "closed";
            case "disconnected":
                return "disconnected";
            case "failed":
                return "failed";
            case "suspended":
                return "suspended";
            default:
                return "unknown";
        }
    }
    function Us(a) {
        switch (a) {
            case "initialized":
                return "initialized";
            case "attaching":
                return "subscribing";
            case "attached":
                return "subscribed";
            case "detaching":
                return "unsubscribing";
            case "detached":
                return "unsubscribed";
            case "failed":
                return "failed";
            case "suspended":
                return "suspended";
            default:
                return "unknown";
        }
    }
    function bt(a) {
        return a.map(function (b) {
            return Promise.resolve(b)
                .then(function (c) {
                    return { status: "fulfilled", value: c };
                })
                .catch(function (c) {
                    return { status: "rejected", reason: c };
                });
        });
    }
    function ct() {}
    function dt(a, b) {
        var c = !1;
        return function () {
            return new Promise(function (d, e) {
                if (c) d(b);
                else
                    return (
                        (c = !0),
                        a()
                            .finally(function () {
                                c = !1;
                            })
                            .then(function (f) {
                                d(f);
                            })
                            .catch(function (f) {
                                e(f);
                            })
                    );
            });
        };
    }
    function et(a) {
        ws.call(this, a);
        this.fl = Vc(a, "token_request");
        ad(a);
    }
    q(et, ws);
    function ft(a) {
        var b = { kB: "hermod", flags: new Map(), url: L(a, "url") };
        vs(b.flags, Xc(a, "flags"));
        return b;
    }
    et.prototype.GM = function (a) {
        return ft(a);
    };
    et.prototype.Sf = function () {
        return void 0 !== this.fl;
    };
    et.prototype.dD = function () {
        if (void 0 === this.fl) throw Error("Access to tokenRequest on an invalid context!");
        return this.fl;
    };
    et.prototype.Bj = function () {
        return JSON.stringify(this.fl);
    };
    function gt(a) {
        this.client = a;
        this.Cl = 0;
        this.context = void 0;
    }
    k = gt.prototype;
    k.Bj = function () {
        var a;
        return !0 !== (null === (a = this.context) || void 0 === a ? void 0 : a.Sf()) ? "" : this.context.Bj();
    };
    function ht(a) {
        return it(a).then(function (b) {
            return jt(a, b);
        });
    }
    function it(a) {
        return new Promise(function (b, c) {
            return Xs()
                .then(function (d) {
                    a.Cl = 0;
                    var e = Xc(d, "failures");
                    "object" === typeof e && 0 !== Object.keys(e).length && F("PushServiceClient", { action: "token_request_failed_topics", topics: e, client: "hermod" });
                    a.context = new et(d);
                    a.context.Sf() ? ((a.client.context = a.context), (d = a.context.dD()), b(d)) : c("Invalid token request");
                })
                .catch(function (d) {
                    a.Cl += 1;
                    c(d);
                });
        });
    }
    function jt(a, b) {
        return new Promise(function (c, d) {
            if (void 0 === a.context) d("no context");
            else {
                var e = new XMLHttpRequest();
                e.open("POST", "http://" + a.context.Em.url + "/auth/access_token", !0);
                e.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
                e.onload = function () {
                    if (ic(e.status)) {
                        var f = new H(e.responseText);
                        c(L(f, "access_token"));
                    } else d(new hc(e));
                };
                e.send(JSON.stringify({ request_token: b }));
            }
        });
    }
    k.lw = function (a) {
        var b;
        return void 0 !== (null === (b = this.context) || void 0 === b ? void 0 : b.Pf(a));
    };
    k.kx = function () {
        return [];
    };
    k.gK = function () {
        return [];
    };
    k.HO = function () {
        return kt(this.client);
    };
    k.lN = function () {};
    function lt() {
        ys.call(this);
        this.wI = "hermod";
        this.connectionState = "unknown";
        this.bk = new y("HermodClientConnection");
        this.auth = new gt(this);
    }
    q(lt, ys);
    k = lt.prototype;
    k.close = function () {
        var a, b;
        null === (a = this.zb) || void 0 === a ? void 0 : a.send("send closing message");
        null === (b = this.zb) || void 0 === b ? void 0 : b.close();
    };
    k.tH = function () {
        var a = this;
        ht(this.auth)
            .then(function (b) {
                var c;
                a.zb = new WebSocket("ws://" + (null === (c = a.auth.context) || void 0 === c ? void 0 : c.Em.url));
                a.zb.onmessage = function (d) {
                    var e = new H(d.data);
                    d = N(e, "action");
                    var f = L(e, "channel", !1),
                        g = a.Tp(f);
                    switch (d) {
                        case 4:
                            a.bk.h({ previous: a.connectionState, current: "connected" });
                            a.connectionState = "connected";
                            break;
                        case 6:
                            a.bk.h({ previous: a.connectionState, current: "disconnected" });
                            a.connectionState = "disconnected";
                            break;
                        case 9:
                            t("Error on websocket", "hermod.ts", "cbpush", e, "PUSH_");
                            break;
                        case 11:
                            void 0 !== g && Cs(a, g);
                            break;
                        case 13:
                            void 0 !== g && Es(a, g);
                            break;
                        case 15:
                            void 0 === g
                                ? r("no matching topic key in map", "hermod.ts", "cbpush")
                                : ((d = Qc(e, "messages")),
                                  null === d || void 0 === d
                                      ? void 0
                                      : d.forEach(function (h, m) {
                                            m = L(e, "id") + ":" + m;
                                            m = new H(Object.assign(Object.assign({}, Object.assign({}, h.parsed)), { channel: f, id: m, providerData: { id: m, ts: N(e, "timestamp") }, data: Object.assign({}, h.parsed) }));
                                            Js(a, f, m, L(h, "tid")) || ls(g, m);
                                        }));
                    }
                };
                a.zb.onopen = function () {
                    var d;
                    null === (d = a.zb) || void 0 === d ? void 0 : d.send(JSON.stringify({ action: 3, message: { cP: b } }));
                };
            })
            .catch(function (b) {
                r(b, "hermod.ts", "cbpush");
            });
        this.connectionState = "connecting";
    };
    function kt(a) {
        return a.isConnected()
            ? ht(a.auth)
                  .then(function (b) {
                      if (void 0 === a.zb) return Promise.reject("Invalid websocket during update");
                      a.zb.send(JSON.stringify({ action: 17, message: { cP: b } }));
                      return Promise.resolve();
                  })
                  .catch(function (b) {
                      r(b, "hermod.ts", "cbpush");
                  })
            : a.connect();
    }
    k.Ss = function () {
        return this.connectionState;
    };
    k.dK = function () {
        return "unknown";
    };
    k.wH = function (a) {
        var b = this,
            c = this.Pf(a);
        return void 0 === c
            ? Promise.reject("invalid channel name reached subscribe")
            : As(this, a).then(function () {
                  if (void 0 === b.zb) return Promise.reject("websocket undefined");
                  b.zb.send(JSON.stringify({ action: 10, channelName: c }));
                  return Promise.resolve();
              });
    };
    k.xH = function (a) {
        var b = this,
            c = this.Pf(a);
        return void 0 === c
            ? Promise.reject("invalid channel name reached unsubscribe")
            : As(this, a).then(function () {
                  if (void 0 === b.zb) return Promise.reject("websocket undefined");
                  b.zb.send(JSON.stringify({ action: 12, channelName: c }));
                  return Promise.resolve();
              });
    };
    k.Dp = function (a, b) {
        var c = this,
            d = this.Pf(a);
        return void 0 === d
            ? Promise.reject("invalid channel name")
            : As(this, a)
                  .then(function () {
                      return c.subscribe(a);
                  })
                  .then(function () {
                      var e;
                      if (void 0 === c.zb) return Promise.reject("websocket undefined");
                      c.zb.send(JSON.stringify({ action: 14, channelName: d, message: null !== (e = null === b || void 0 === b ? void 0 : b.data) && void 0 !== e ? e : {} }));
                      return Promise.resolve();
                  });
    };
    k.$n = function () {
        this.unsubscribe(void 0);
    };
    var mt, nt;
    function ot(a) {
        var b = new H(a);
        a = Qc(b, "push_services");
        var c = { kB: "undefined", flags: new Map() };
        if (void 0 === a) return r("PushService parseContext failed", "pushService.ts", "pushservicelib", { context_keys: b.keys() }, "PUSH_"), c;
        pt.active ||
            qt(
                a.map(function (e) {
                    return L(e, "backend");
                })
            );
        b = l(a);
        for (var d = b.next(); !d.done; d = b.next())
            switch (((d = d.value), K(d, "backend"))) {
                case "a":
                    return Ws(d);
                case "hermod":
                    return ft(d);
            }
        t("PushService parseContext failed: unrecognized backend or critical error in parse", "pushService.ts", "pushservicelib", { push_context: a }, "PUSH_");
        return c;
    }
    function rt() {
        return void 0 !== mt && mt.isConnected();
    }
    function st() {
        return tt() || void 0 !== A.current.V || ut("verify_enabled");
    }
    function tt() {
        return "push_service" === vt;
    }
    function wt() {
        return rt() && ut("userlist_enabled");
    }
    function ut(a) {
        return !0 === A.current.uF.flags.get(a);
    }
    function qt(a) {
        for (var b = l(a), c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            if ("a" === c || "hermod" === c) {
                vt = "push_service";
                return;
            }
            if ("w" === c) {
                vt = "wowza";
                return;
            }
        }
        t("invalid chat backends", "pushService.ts", "pushservicelib", { backends: a }, "PUSH_");
    }
    function xt() {
        var a = A.current.uF.kB;
        try {
            switch (a) {
                case "a":
                    mt = new Ns();
                    mt.bk.g(function (b) {
                        return yt.h(b);
                    });
                    break;
                case "hermod":
                    (mt = new lt()),
                        mt.bk.g(function (b) {
                            return yt.h(b);
                        });
            }
        } catch (b) {
            r("An exception was thrown during client construction", "pushService.ts", "pushservicelib", b, "PUSH_");
        }
        void 0 === mt && ((zt += 1), t("Failed to create a client for backend: " + a, "pushService.ts", "pushservicelib", {}, "PUSH_"));
    }
    function At() {
        var a = Bt();
        if (void 0 === a)
            ss().forEach(function (f) {
                ns(f, { zi: !1, ND: !0 });
            }),
                2 < zt &&
                    window.setTimeout(function () {
                        zt = 0;
                    }, 3e5);
        else {
            var b = (Ct += 1);
            window.clearTimeout(nt);
            var c = ss().concat(Array.from(qs.keys())),
                d = [],
                e = [];
            c.forEach(function (f) {
                -1 === a.auth.kx().indexOf(f) && d.push(f);
                (Dt(f) && !ts.has(f)) || e.push(f);
            });
            (1 > d.length && -1 > e.length) ||
                (1 > d.length ? Promise.resolve() : a.auth.HO())
                    .then(function () {
                        var f;
                        Et = 5e3;
                        if (!(b < Ct)) {
                            var g = !1,
                                h = yt.g(function (n) {
                                    if ("closed" === n.current || "disconnected" === n.current) g = !0;
                                }, !1);
                            null === (f = a.context) || void 0 === f
                                ? void 0
                                : f.gK().forEach(function (n) {
                                      return os(n);
                                  });
                            var m = new Date().getTime();
                            Ft()
                                .then(function (n) {
                                    var p = new Date().getTime();
                                    h.removeListener();
                                    if (!(b < Ct)) {
                                        var u = n.filter(function (J) {
                                                return "fulfilled" === J.status;
                                            }).length,
                                            x = a.auth.kx().filter(function (J) {
                                                return !Dt(J);
                                            });
                                        F("PushServiceTopicSetup", { topics_requested_count: n.length, successful_topic_count: u, failed_topic_list: x.sort(), is_push_connected: rt(), elapsed_time: p - m });
                                        Gt = 0 === x.length && 0 < u;
                                        var D = Is(a);
                                        x.forEach(function (J) {
                                            ns(J, {
                                                zi: !1,
                                                ND: g || D.includes(J),
                                                nY: g
                                                    ? void 0
                                                    : function () {
                                                          Td(Gs);
                                                      },
                                            });
                                        });
                                        Hs(a) &&
                                            !g &&
                                            (nt = window.setTimeout(function () {
                                                Td(Gs);
                                            }, 1e4));
                                    }
                                })
                                .catch(function () {});
                        }
                    })
                    .catch(function (f) {
                        var g, h;
                        b < Ct ||
                            ((nt = window.setTimeout(function () {
                                Td(Gs);
                            }, Et)),
                            (Et *= 2),
                            c
                                .filter(function (m) {
                                    return !Dt(m);
                                })
                                .forEach(function (m) {
                                    os(m);
                                }),
                            (f.client_id = a.ZC()),
                            (f.user_uid = null !== (h = null === (g = A.current.V) || void 0 === g ? void 0 : g.yc) && void 0 !== h ? h : "anon"),
                            r("Client auth failed", "pushService.ts", "pushservicelib", f, "PUSH_"));
                    });
        }
    }
    function Bt() {
        void 0 === mt && 3 > zt && xt();
        return mt;
    }
    function Ht(a) {
        var b = Bt();
        return void 0 === b
            ? Promise.reject("PushService client is not initialized")
            : b.$D(a)
            ? Promise.resolve()
            : b.subscribe(a).catch(function (c) {
                  zs(b, "subscribe_failure", { topic: a, auth: b.auth.Bj(), code: c.code, message: c.message, providerCode: c.providerCode });
              });
    }
    function rs(a) {
        var b = Bt();
        return void 0 === b
            ? Promise.reject("PushService client is not initialized")
            : b.unsubscribe(a).catch(function (c) {
                  zs(b, "unsubscribe_failure", { topic: a, auth: b.auth.Bj(), code: c.code, message: c.message, providerCode: c.providerCode });
              });
    }
    function Dt(a) {
        var b = Bt();
        return void 0 === b ? !1 : b.$D(a);
    }
    function Ft() {
        var a = Bt();
        if (void 0 === a) return Promise.all([]);
        var b = ss()
            .filter(function (c) {
                return (ts.has(c) || !Dt(c)) && a.auth.lw(c);
            })
            .map(function (c) {
                var d = ts.get(c);
                return void 0 !== d ? a.Dp(c, d) : Ht(c);
            });
        return Promise.all(bt(b));
    }
    function It(a, b) {
        if (void 0 === mt) var c = !1;
        else (c = mt), (a = c.Pf(a) + ":" + b), void 0 === c.Io.get(a) ? (c.Io.set(a, []), (c = !1)) : (c = !0);
        return c;
    }
    var Et = 5e3,
        zt = 0,
        yt = new y("PushServiceClientConnection"),
        Gs = new Sd(
            function () {
                At();
            },
            { zc: 800, Qc: 1 }
        ),
        Gt = !1,
        pt = new Vd("PSLive"),
        vt = pt.active ? "push_service" : "wowza",
        Jt = Math.random().toString(36).substring(2),
        Ct = 0;
    function Kt(a) {
        a.providerData = { id: "", ts: 0 };
        a.pub_ts = 0;
        a.method = "UI";
    }
    function Lt(a) {
        var b = this;
        this.Ct = 50;
        this.RF = {
            rc: 5,
            Gy: function () {
                b.Gy();
            },
            Hy: function () {
                b.Hy();
            },
        };
        this.initData(a);
        this.Rr = a;
        this.ea = new y(this.getKey(), this.RF);
        this.yy = new y("TopicAuthFail", this.RF);
        this.Cg = new y("TopicSubscribeChange", this.RF);
    }
    function Ys(a) {
        return a.ka() + "#" + a.getKey();
    }
    k = Lt.prototype;
    k.L = function (a) {
        return {
            X: L(a, "tid"),
            ez: L(Uc(a, "providerData"), "id"),
            fz: L(a, "method"),
            Ka: { he: Math.floor(1e3 * N(a, "ts")), mu: Math.floor(1e3 * N(a, "pub_ts")), Eq: Math.floor(ks(new Date()).getTime()), HS: Math.floor(N(Uc(a, "providerData"), "ts")) },
        };
    };
    k.Dp = function (a) {
        a = void 0 === a ? {} : a;
        ts.set(this.getKey(), { UP: !0, data: a, DO: this });
        Td(Gs);
    };
    k.$n = function () {
        us(this);
    };
    k.Qs = function () {
        return this.Rr;
    };
    k.Gy = function () {
        if (1 === this.ea.listeners.length + this.Cg.listeners.length + this.yy.listeners.length) {
            var a = ms.get(this.getKey());
            void 0 === a ? (a = [this]) : (a.length > this.Ct && t("Too many instances of topic created", "topicManager.ts", "topics", { DO: this.getKey(), RX: a.length }, "PUSH_"), a.push(this));
            ms.set(this.getKey(), a);
            Td(Gs);
        }
    };
    k.Hy = function () {
        0 === this.ea.listeners.length + this.Cg.listeners.length + this.yy.listeners.length && ps(this);
    };
    function Mt(a) {
        if (7 !== a.length && 14 !== a.length) throw Error("Invalid uid passed into topic");
    }
    function X(a) {
        Lt.call(this, { user_uid: a });
        Mt(this.yc);
    }
    q(X, Lt);
    X.prototype.getKey = function () {
        return this.ka() + ":" + this.yc;
    };
    X.prototype.initData = function (a) {
        this.yc = a.user_uid;
    };
    function Nt() {
        X.apply(this, arguments);
    }
    q(Nt, X);
    Nt.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), { timestamp: N(a, "read_ts") });
    };
    function Ot() {
        Nt.apply(this, arguments);
    }
    q(Ot, Nt);
    Ot.prototype.ka = function () {
        return "UserNewsSeenTopic";
    };
    function Pt() {
        Nt.apply(this, arguments);
    }
    q(Pt, Nt);
    Pt.prototype.ka = function () {
        return "PhotoVideoSeenTopic";
    };
    function Qt() {
        X.apply(this, arguments);
    }
    q(Qt, X);
    Qt.prototype.ka = function () {
        return "UserMessageTopic";
    };
    Qt.prototype.L = function (a) {
        var b = X.prototype.L.call(this, a),
            c = void 0 !== b.Ka ? new Date(b.Ka.he) : void 0;
        return Object.assign(Object.assign({}, b), {
            j: L(a, "room"),
            $i: c,
            K: bs(Uc(a, "from_user")),
            message: L(a, "message"),
            Bi: K(a, "font_color", !1),
            qe: L(a, "id", !1),
            bb: L(a, "other_user"),
            font: L(a, "font_family"),
            backgroundColor: K(a, "background"),
            Qa: gs(Xc(a, "media")),
            Rx: !0,
        });
    };
    function Rt() {
        X.apply(this, arguments);
    }
    q(Rt, X);
    Rt.prototype.ka = function () {
        return "UserUpdateTopic";
    };
    Rt.prototype.L = function (a) {
        a = Object.assign(Object.assign({}, X.prototype.L.call(this, a)), { target: L(a, "target") });
        "app_tab_refresh" === a.target && (a.X = "#app_tab_refresh");
        return a;
    };
    function St() {
        X.apply(this, arguments);
    }
    q(St, X);
    St.prototype.ka = function () {
        return "UserColorUpdateTopic";
    };
    St.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), { Pe: M(a, "has_tokens"), yf: M(a, "tipped_recently"), nA: M(a, "tipped_alot_recently"), zf: M(a, "tipped_tons_recently") });
    };
    function Tt() {
        X.apply(this, arguments);
    }
    q(Tt, X);
    Tt.prototype.ka = function () {
        return "UserTokenUpdateTopic";
    };
    Tt.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), { Ua: N(a, "tokens") });
    };
    function Ut() {
        X.apply(this, arguments);
    }
    q(Ut, X);
    Ut.prototype.ka = function () {
        return "UserTipAlertTopic";
    };
    Ut.prototype.L = function (a) {
        var b,
            c = X.prototype.L.call(this, a);
        return Object.assign(Object.assign({}, c), {
            K: bs(a),
            message: L(a, "message"),
            amount: N(a, "amount"),
            Nx: M(a, "is_anonymous_tip"),
            Ij: L(a, "to_username"),
            Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he,
            cg: L(a, "room_type"),
        });
    };
    function Vt() {
        X.apply(this, arguments);
    }
    q(Vt, X);
    Vt.prototype.ka = function () {
        return "PhotoVideoNotificationTopic";
    };
    Vt.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), js(a));
    };
    function Wt() {
        X.apply(this, arguments);
    }
    q(Wt, X);
    Wt.prototype.ka = function () {
        return "OfflineTipNotificationTopic";
    };
    Wt.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), js(a));
    };
    function Xt() {
        X.apply(this, arguments);
    }
    q(Xt, X);
    Xt.prototype.ka = function () {
        return "RoomBroadcasterPrivateStatusTopic";
    };
    Xt.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), { status: L(a, "status"), Uc: Sc(a, "show_id"), $S: L(a, "requester", !1) });
    };
    Xt.prototype.Qs = function () {
        return { broadcaster_uid: this.yc };
    };
    new y("showMyCamStarted");
    new y("showMyCamStopped");
    var Yt = new y("showMyCamViewStarted"),
        Zt = new y("showMyCamViewStopped");
    function $t() {
        X.apply(this, arguments);
    }
    q($t, X);
    $t.prototype.ka = function () {
        return "UserSMCWatchingTopic";
    };
    $t.prototype.L = function (a) {
        var b = Object,
            c = b.assign,
            d = Object,
            e = d.assign,
            f = Object.assign({}, X.prototype.L.call(this, a));
        var g = { username: L(a, "username"), Pa: !1, zd: M(a, "in_fanclub"), Pe: M(a, "has_tokens"), ec: M(a, "is_mod"), yf: M(a, "tipped_recently"), Gj: M(a, "tipped_alot_recently"), zf: M(a, "tipped_tons_recently"), kd: "", $c: "df" };
        return c.call(b, e.call(d, f, g), { Fj: M(a, "started") });
    };
    function au() {
        X.apply(this, arguments);
    }
    q(au, X);
    au.prototype.ka = function () {
        return "SMCPresenceTopic";
    };
    au.prototype.L = function (a) {
        return X.prototype.L.call(this, a);
    };
    function bu() {
        X.apply(this, arguments);
    }
    q(bu, X);
    bu.prototype.ka = function () {
        return "UserAlertTopic";
    };
    bu.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), { message: L(a, "message") });
    };
    function cu() {
        X.apply(this, arguments);
    }
    q(cu, X);
    cu.prototype.ka = function () {
        return "UserChatMediaOpenedTopic";
    };
    cu.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), { sc: N(a, "media_id"), Ek: L(a, "message_id") });
    };
    function du() {
        X.apply(this, arguments);
    }
    q(du, X);
    du.prototype.ka = function () {
        return "UserChatMediaRemovedTopic";
    };
    du.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), { sc: N(a, "media_id"), AR: M(a, "is_compliance") });
    };
    function eu() {
        X.apply(this, arguments);
    }
    q(eu, X);
    eu.prototype.ka = function () {
        return "UserFollowerTopic";
    };
    eu.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), { username: L(a, "username"), Td: M(a, "is_following") });
    };
    function fu() {
        X.apply(this, arguments);
    }
    q(fu, X);
    fu.prototype.ka = function () {
        return "UserIgnoreTopic";
    };
    fu.prototype.L = function (a) {
        return Object.assign(Object.assign({}, X.prototype.L.call(this, a)), { username: L(a, "username"), nf: M(a, "is_ignored") });
    };
    var gu = new Set();
    function hu(a) {
        return E("api/ts/chat/ignored-users/", { username: a })
            .then(function (b) {
                var c;
                iu(b.responseText);
                F("IgnoreUser", { username: null === (c = A.current.V) || void 0 === c ? void 0 : c.username, to_user: a, list_size: ju().size });
                return !0;
            })
            .catch(function (b) {
                r("Error posting ignore user: " + b, "ignore.ts", "api");
                return !1;
            });
    }
    function ku(a) {
        return oc("api/ts/chat/ignored-users/", { username: a })
            .then(function () {
                var b;
                gu.delete(a);
                F("UnignoreUser", { username: null === (b = A.current.V) || void 0 === b ? void 0 : b.username, to_user: a, list_size: ju().size });
                return !0;
            })
            .catch(function (b) {
                r("Error posting unignore user: " + b, "ignore.ts", "api");
                return !1;
            });
    }
    function iu(a) {
        try {
            gu = new Set(JSON.parse(a).users);
        } catch (b) {
            r("Cannot parse ignore list: " + b, "ignore.ts", "api");
        }
    }
    var lu;
    function mu() {
        var a;
        C("api/ts/chat/ignored-users/")
            .then(function (c) {
                iu(c.responseText);
            })
            .catch(function (c) {
                r("Network error retrieving ignore list: " + c, "ignore.ts", "api");
            });
        if (void 0 === lu) {
            var b = null === (a = A.current.V) || void 0 === a ? void 0 : a.yc;
            void 0 !== b &&
                (lu = new fu(b).ea.g(function (c) {
                    c.nf ? gu.add(c.username) : gu.delete(c.username);
                }));
        }
    }
    function ju(a) {
        (void 0 === a ? 0 : a) && mu();
        return gu;
    }
    function nu(a) {
        var b = ju();
        return void 0 === b ? (r("ignoreSet should not be undefined", "ignore.ts", "api"), !1) : b.has(a);
    }
    function ou() {
        Yr.call(this);
        var a = this;
        G.g(function (d) {
            return (a.l = d.l);
        });
        this.element.id = "RemoveIgnoredUsersModal";
        this.element.style.position = "fixed";
        this.element.style.width = "410px";
        this.element.style.height = "127px";
        this.element.style.borderRadius = "6px";
        this.element.style.padding = "10px";
        this.element.style.fontSize = "12px";
        O(this.S, "overlay");
        this.S.style.background = "";
        this.S.style.opacity = "0.4";
        var b = this.zp("https://static-assets.highwebmedia.com/tsdefaultassets/close.svg");
        O(b, "lightCloseButton");
        b.style.opacity = "0.5";
        this.element.appendChild(b);
        b = this.zp("https://static-assets.highwebmedia.com/tsdefaultassets/close-gray.svg");
        O(b, "darkCloseButton");
        this.element.appendChild(b);
        b = document.createElement("div");
        O(b, "header");
        b.innerText = Ki;
        b.style.fontSize = "15px";
        b.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        this.element.appendChild(b);
        this.hf = document.createElement("div");
        O(this.hf, "textColor");
        this.hf.innerText = "";
        this.hf.style.margin = "10px 0";
        this.element.appendChild(this.hf);
        this.element.appendChild(this.OI());
        this.element.appendChild(this.TI());
        b = document.createElement("div");
        b.style.textAlign = "right";
        var c = document.createElement("span");
        O(c, "saveButton");
        c.innerText = Eh;
        c.style.display = "inline-block";
        O(c, "gradient");
        c.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        c.style.fontSize = "14px";
        c.style.padding = "5px 15px 5px 15px";
        c.style.marginTop = "10px";
        c.style.borderRadius = "4px";
        c.style.cursor = "pointer";
        c.onclick = function () {
            a.zN();
        };
        b.appendChild(c);
        this.element.appendChild(b);
        this.fc.g(function () {
            a.B();
        });
    }
    q(ou, Yr);
    ou.prototype.D = function () {
        this.element.style.left = Math.max(16, (document.documentElement.clientWidth - this.element.offsetWidth) / 2) + "px";
        this.element.style.top = (document.documentElement.clientHeight - this.element.offsetHeight) / 2 + "px";
    };
    function pu() {
        var a = document.createElement("div");
        O(a, "bluetxt");
        a.innerText = Mi;
        a.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        a.style.fontWeight = "bold";
        return a;
    }
    function qu() {
        var a = document.createElement("select");
        O(a, "select");
        a.multiple = !0;
        return a;
    }
    ou.prototype.zp = function (a) {
        var b = this,
            c = document.createElement("img");
        c.src = a;
        c.style.position = "absolute";
        c.style.width = "14px";
        c.style.height = "14px";
        c.style.top = "10px";
        c.style.right = "10px";
        c.style.cursor = "pointer";
        c.onclick = function () {
            b.B();
        };
        c.onmouseenter = function () {
            c.style.opacity = "1";
        };
        c.onmouseleave = function () {
            c.style.opacity = "0.5";
        };
        return c;
    };
    function ru() {
        ou.call(this);
        this.element.style.height = "307px";
        this.hf.innerText = Qi;
    }
    q(ru, ou);
    ru.prototype.nj = function () {
        for (; null !== this.ne.firstChild; ) this.ne.removeChild(this.ne.firstChild);
        for (; null !== this.bc.firstChild; ) this.bc.removeChild(this.bc.firstChild);
        var a = ju(!0);
        a = l(a);
        for (var b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            var c = document.createElement("option");
            c.innerText = b;
            c.value = b;
            this.ne.appendChild(c);
        }
        ou.prototype.show.call(this);
        this.R();
    };
    ru.prototype.OI = function () {
        var a = this,
            b = document.createElement("div");
        b.style.display = "inline-block";
        b.style.marginRight = "10px";
        var c = pu();
        c.innerText = Pi;
        b.appendChild(c);
        this.ne = qu();
        this.ne.style.borderWidth = "1px";
        this.ne.style.borderStyle = "solid";
        this.ne.style.borderRadius = "4px";
        this.ne.style.marginTop = "4px";
        this.ne.style.width = "200px";
        this.ne.style.height = "200px";
        this.ne.style.padding = "2px";
        this.ne.style.overflow = "auto";
        this.ne.onchange = function () {
            for (var d = a.ne.selectedOptions.length, e = [].concat(ha(a.ne.selectedOptions)), f = 0; f < d; f += 1) {
                var g = e[f];
                g.selected = !1;
                a.bc.appendChild(g);
            }
        };
        b.appendChild(this.ne);
        return b;
    };
    ru.prototype.TI = function () {
        var a = this,
            b = document.createElement("div");
        b.style.display = "inline-block";
        var c = pu();
        c.innerText = Mi;
        b.appendChild(c);
        this.bc = qu();
        this.bc.style.borderWidth = "1px";
        this.bc.style.borderStyle = "solid";
        this.bc.style.borderRadius = "4px";
        this.bc.style.marginTop = "4px";
        this.bc.style.width = "200px";
        this.bc.style.height = "200px";
        this.bc.style.padding = "2px";
        this.bc.style.overflow = "auto";
        this.bc.onchange = function () {
            for (var d = a.bc.selectedOptions.length, e = [].concat(ha(a.bc.selectedOptions)), f = 0; f < d; f += 1) {
                var g = e[f];
                g.selected = !1;
                a.ne.appendChild(g);
            }
        };
        b.appendChild(this.bc);
        return b;
    };
    ru.prototype.zN = function () {
        for (var a = l(this.bc.options), b = a.next(); !b.done; b = a.next()) su(this.l, b.value.value);
        this.B();
    };
    function tu() {
        ou.call(this);
        sb() && (this.element.style.height = "307px");
        this.hf.innerText = Ri;
    }
    q(tu, ou);
    tu.prototype.nj = function () {
        for (; null !== this.bc.firstChild; ) this.bc.removeChild(this.bc.firstChild);
        var a = ju(!0);
        a = l(a);
        for (var b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            var c = document.createElement("option");
            c.innerText = b;
            c.value = b;
            this.bc.appendChild(c);
        }
        ou.prototype.show.call(this);
        this.R();
    };
    tu.prototype.OI = function () {
        return document.createElement("div");
    };
    tu.prototype.TI = function () {
        var a = document.createElement("div");
        a.style.display = "inline-block";
        var b = pu();
        b.innerText = Mi;
        a.appendChild(b);
        this.bc = qu();
        this.bc.style.width = "200px";
        sb() && (this.bc.style.height = "200px");
        a.appendChild(this.bc);
        return a;
    };
    tu.prototype.zN = function () {
        for (var a = l(this.bc.selectedOptions), b = a.next(); !b.done; b = a.next()) su(this.l, b.value.value);
        this.B();
    };
    function uu(a, b, c) {
        new Promise(function (d) {
            var e;
            pd()
                ? (kd(),
                  window.setTimeout(function () {
                      var f = window.open(a, b, c);
                      null !== f &&
                          window.setTimeout(function () {
                              f.focus();
                          }, 200);
                      d(null !== f && void 0 !== f ? f : void 0);
                  }, 500))
                : d(null !== (e = window.open(a, b, c)) && void 0 !== e ? e : void 0);
        });
    }
    var vu = "",
        wu = "";
    "hidden" in document ? ((vu = "hidden"), (wu = "visibilitychange")) : "msHidden" in document ? ((vu = "msHidden"), (wu = "msvisibilitychange")) : "webkitHidden" in document && ((vu = "webkitHidden"), (wu = "webkitvisibilitychange"));
    var xu = new y("documentVisibilityChange", { ii: 1 }),
        yu = !document[vu];
    function zu(a) {
        yu !== a && ((yu = a), xu.h(yu));
    }
    if ("" !== vu && "" !== wu) {
        var Au = function () {
            zu(!document[vu]);
        };
        v(wu, document, Au);
        var Bu = function () {
            Bb(wu, document, Au);
            Bb("pagehide", window, Bu);
            zu(!1);
            v("pagehide", window, function () {
                zu(!1);
            });
            v("pageshow", window, function () {
                zu(!0);
            });
        };
        v("pagehide", window, Bu);
    } else
        v("blur", window, function () {
            zu(!1);
        }),
            v("focus", window, function () {
                zu(!0);
            });
    function Cu() {
        try {
            return window.self !== window.top;
        } catch (a) {
            return !0;
        }
    }
    var Du = new Date().getTime();
    function Eu() {
        var a = void 0 !== screen.orientation ? screen.orientation.type : void 0;
        if (void 0 !== a) {
            if (a.startsWith("portrait")) return !0;
            if (a.startsWith("landscape")) return !1;
        }
    }
    function Fu() {
        if (!Ya) return !0;
        var a = Eu();
        if (void 0 !== a) return a;
        switch (window.orientation) {
            case 0:
            case 180:
            case -180:
                return !0;
            case 90:
            case -90:
            case 270:
                return !1;
        }
        return window.innerWidth === Math.min(screen.width, screen.height) ? !0 : window.innerWidth <= window.innerHeight;
    }
    function Gu(a) {
        if (!Ya) return !0;
        if (!kb()) {
            var b = Eu();
            if (void 0 !== b) return !b;
        }
        switch (window.orientation) {
            case 0:
            case 180:
            case 270:
            case -180:
                return !1;
            case 90:
                if (void 0 === a || "user" === a) return !kb();
                break;
            case -90:
                if ("environment" === a) return !kb();
        }
        return !0;
    }
    function Hu(a) {
        a.style.overflowY = "scroll";
        v("touchstart", a, function () {
            0 === a.scrollTop && (a.scrollTop = 1);
        });
        v("touchmove", a, function (b) {
            b.stopPropagation();
            a.scrollHeight > a.clientHeight || 1 < b.touches.length || !b.cancelable || b.preventDefault();
        });
        v("scroll", a, function () {
            0 === a.scrollTop ? (a.scrollTop = 1) : a.scrollTop === a.scrollHeight - a.offsetHeight && (a.scrollTop = Math.max(a.scrollHeight - a.offsetHeight - 1, 1));
        });
    }
    var Iu = new y("loginOverlayShown");
    function Ju(a) {
        "Escape" !== a.key && a.stopImmediatePropagation();
    }
    var Ku = "";
    G.g(function (a) {
        Ku = a.l.j();
    });
    var Lu = 0;
    function Mu(a) {
        var b = "/auth-sso/login/" + a.qm + "/?popup=1&next=" + encodeURIComponent("" + window.location.pathname + window.location.search);
        return V(
            "a",
            {
                className: "auth_option",
                href: "#",
                onClick: function (c) {
                    c.preventDefault();
                    Lu += 1;
                    1 < Lu || (F("SsoSignupClick", { provider: a.qm, source: "loginOverlay" }), uu(b, "_blank", "status=0,toolbar=0,menubar=0,directories=0,resizable=1,scrollbars=1,height=700,width=715"));
                    window.setTimeout(function () {
                        Lu = 0;
                    }, 1e3);
                },
            },
            V("div", null, V("img", { src: "https://static-assets.highwebmedia.com/images/sso-" + a.qm + ".svg", alt: a.qm }), V("p", null, We(a.name)))
        );
    }
    function Nu() {
        function a() {
            "" !== d.uo.value.trim() && "" !== d.Dh.value.trim() && (d.od.style.opacity = "1");
        }
        function b(J, I) {
            return function (ja) {
                "Tab" === ja.key && (ja.preventDefault(), ja.shiftKey ? I.focus() : J.focus());
            };
        }
        function c(J) {
            var I = document.createElement("div");
            I.style.display = "block";
            I.style.margin = "10px 0 0 0";
            J.appendChild(I);
            return I;
        }
        Yr.call(this, {
            jm: function () {
                d.D();
                d.isVisible = !0;
                d.Dh.focus();
                v("keydown", d.element, Ju);
                v(nd(), document, d.pD);
                d.pD();
            },
            ph: function () {
                var J = d.isVisible;
                d.element.style.display = "none";
                d.isVisible = !1;
                J && (Bb("keydown", d.element, Ju), Bb(nd(), document, d.pD));
                Ou(d);
            },
            Il: !0,
        });
        var d = this;
        this.isVisible = !1;
        this.element.style.display = "none";
        this.element.style.position = "fixed";
        this.element.style.fontSize = "12px";
        this.element.style.width = "364px";
        this.element.style.height = "auto";
        this.element.style.color = "currentSiteSettings.defaultColor";
        this.element.style.margin = "auto";
        this.element.style.boxShadow = "0px 0px 10px rgba(0, 0, 0, 0.4)";
        this.element.style.background = "white";
        this.element.style.border = "3px solid #0E6C92";
        this.element.style.borderRadius = "10px";
        this.element.style.visibility = "visible";
        this.element.id = "LoginOverlay";
        this.S.classList.add("blurred-login-overlay");
        this.S.style.visibility = "visible";
        this.S.style.background = "";
        this.S.style["-webkit-overflow-scrolling"] = "touch";
        this.pd = document.createElement("form");
        this.pd.target = "_top";
        this.pd.style.padding = "5px 30px 10px 30px";
        this.pd.action = "/auth/login/?next=" + window.location.pathname + encodeURIComponent(window.location.search);
        this.pd.method = "POST";
        this.pd.onclick = function (J) {
            J.stopPropagation();
        };
        this.element.appendChild(this.pd);
        var e = c(this.pd),
            f = c(this.pd),
            g = c(this.pd),
            h = c(this.pd),
            m = c(this.pd),
            n = c(this.pd),
            p = c(this.pd),
            u = c(this.pd),
            x = c(this.pd);
        m.style.display = "flex";
        m.style.alignItems = "center";
        var D = document.createElement("input");
        D.type = "submit";
        D.onclick = function (J) {
            J.preventDefault();
            d.B();
        };
        D.value = "";
        D.style.background = "transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/close_icon2.svg) no-repeat center center";
        D.style.backgroundSize = "10px";
        D.style.padding = "10px 20px 8px 12px";
        D.style.border = "none";
        D.style.cursor = "pointer";
        e.appendChild(D);
        e.style.position = "absolute";
        e.style.top = "0px";
        e.style.right = "0px";
        e.style.margin = "0px";
        this.qa = document.createElement("h1");
        this.qa.style.font = "18px ubuntumedium,Arial,Helvetica,sans-serif";
        this.qa.style.color = "#f47422";
        f.appendChild(this.qa);
        f.style.textAlign = "center";
        this.Dh = this.gs(g, xi + ":", "text", "username");
        this.Dh.required = !0;
        e = document.createElement("a");
        e.target = "_top";
        e.href = "/auth/password_reset/";
        e.tabIndex = 0;
        e.textContent = Ai;
        e.style.cssFloat = "right";
        e.style.color = "#0373a3";
        e.style.textDecoration = "none";
        h.appendChild(e);
        this.uo = this.gs(h, yi + ":", "password", "password");
        this.uo.required = !0;
        h = this.gs(m, zi + ":", "checkbox", "rememberme");
        h.style.marginLeft = "10px";
        this.od = document.createElement("input");
        this.od.id = "id_login_btn";
        this.od.type = "submit";
        this.od.value = Gf;
        this.od.style.backgroundColor = "#F47321";
        this.od.style.opacity = "0.5";
        this.od.style.border = "1px solid #A8A8A8";
        this.od.style.borderRadius = "4px";
        this.od.style.boxSizing = "border-box";
        this.od.style.cursor = "pointer";
        this.od.style.height = "36px";
        this.od.style.width = "100%";
        this.od.style.font = "16px ubuntumedium,Arial,Helvetica,sans-serif";
        this.od.style.color = "#FFFFFF";
        this.od.style.webkitAppearance = "none";
        n.appendChild(this.od);
        n = A.current.fO;
        if (void 0 !== n && 0 < n.length) {
            m = V("div", { className: "or_separator" }, V("p", null, "\u00a0or\u00a0"));
            p.appendChild(m);
            n = l(n);
            for (m = n.next(); !m.done; m = n.next()) p.appendChild(Mu(m.value));
            p.style.marginBottom = "16px";
        }
        p = document.createElement("p");
        p.textContent = jn + " ";
        p.style.display = "inline";
        this.Kg = document.createElement("a");
        this.Kg.target = "_top";
        this.Kg.classList.add("signupLogin");
        this.Kg.href = "/accounts/register/?src=login_gate";
        this.Kg.tabIndex = 0;
        this.Kg.textContent = Hf;
        this.Kg.style.display = "inline";
        this.Kg.style.color = "#0373a3";
        this.Kg.style.textDecoration = "none";
        u.appendChild(p);
        u.appendChild(this.Kg);
        u.style.textAlign = "center";
        this.Mt = document.createElement("input");
        this.ls = document.createElement("input");
        this.Mt.type = this.ls.type = "hidden";
        this.Mt.name = "next";
        this.Mt.value = (function () {
            var J = "" + window.location.pathname + window.location.search,
                I = new URLSearchParams(window.location.search).get("next");
            return -1 !== J.indexOf("/al/") || (-1 !== J.indexOf("/auth/login/") && null === I) ? "/" : null !== I && void 0 !== I ? I : J;
        })();
        this.ls.name = "csrfmiddlewaretoken";
        this.ls.value = ac("csrftoken");
        x.appendChild(this.Mt);
        x.appendChild(this.ls);
        x.style.display = "none";
        D.onkeydown = b(this.Dh, this.Kg);
        this.Dh.onkeydown = b(this.uo, D);
        this.uo.onkeydown = b(e, this.Dh);
        e.onkeydown = b(h, this.uo);
        h.onkeydown = b(this.od, e);
        this.od.onkeydown = b(this.Kg, h);
        this.Kg.onkeydown = b(D, this.od);
        this.Dh.oninput = a;
        this.uo.oninput = a;
        G.g(function () {
            d.Mt.value = "" + window.location.pathname + window.location.search;
        });
    }
    q(Nu, Yr);
    Nu.prototype.nj = function (a) {
        Cu() && "" !== Ku
            ? uu("/auth/login/?next=/" + Ku + "/")
            : (Iu.h(void 0),
              (this.qa.innerText = void 0 !== a.pg && a.pg ? en : gn),
              (this.ls.value = ac("csrftoken")),
              (this.element.style.display = "block"),
              Yr.prototype.show.call(this),
              void 0 !== a.UF && a.UF && (Ou(this), (this.S.style.backgroundColor = "rgba(0, 0, 0, 0.5)")),
              (this.Kg.href = !0 === a.oN ? "/accounts/register/?src=login_gate&next=" + window.location.pathname : "/accounts/register/?src=login_gate"),
              !0 === a.fN && ((a = Bc(window.location.search)), (a.refresh_opener = "1"), (a.next = window.location.pathname), (this.pd.action = "/auth/login/?" + Ac(a))));
    };
    Nu.prototype.gs = function (a, b, c, d) {
        var e = this,
            f = document.createElement("label"),
            g = document.createElement("input");
        f.innerText = b;
        f.htmlFor = d;
        g.type = c;
        g.id = d;
        g.name = d;
        g.style.height = "checkbox" === c ? "18px" : "26px";
        g.style.width = "checkbox" === c ? "18px" : "100%";
        g.style.font = "100% Arial,Helvetica,sans-serif";
        g.style.color = "#000";
        g.style.boxSizing = "border-box";
        g.style.border = "1px solid #d5d5d5";
        g.style.padding = "2px 4px";
        g.style.margin = "1px 0";
        g.style.lineHeight = "18px";
        g.style.borderRadius = "4px";
        v("keydown", g, function (h) {
            "Enter" === h.key && (h.preventDefault(), e.od.click());
        });
        a.appendChild(f);
        a.appendChild(g);
        return g;
    };
    function Ou(a) {
        void 0 !== a.Si && ((a.Si.style.visibility = ""), (a.Si.style.backgroundColor = ""), (a.Si.style.overflow = ""), (a.Si.style.position = ""), a.Si.classList.remove("blurred-login-overlay-shown", "embed-blurred-login-overlay"));
    }
    Nu.prototype.pD = function () {
        Ou(this);
        null !== this.element.parentElement &&
            ((this.Si = this.element.parentElement),
            (this.Si.style.overflow = "hidden"),
            this.Si.classList.add("blurred-login-overlay-shown"),
            /SamsungBrowser/i.test(navigator.userAgent) && ((this.Si.style.position = "fixed"), this.Si.classList.add("embed-blurred-login-overlay")));
    };
    Nu.prototype.D = function () {
        var a = Math.max(document.documentElement.clientHeight, window.innerHeight);
        this.element.style.left = (Math.max(document.documentElement.clientWidth, window.innerWidth) - this.pd.offsetWidth) / 2 + "px";
        this.element.style.top = (a - this.pd.offsetHeight) / 2 + "px";
    };
    function Pu() {
        Nu.call(this);
        this.element.style.width = "calc(96% - 6px)";
        this.element.style.maxWidth = "364px";
        this.element.style.margin = "";
        this.element.style.fontSize = "12px";
        this.element.style.position = "fixed";
        this.element.style.overflow = "scroll";
        Hu(this.element);
    }
    q(Pu, Nu);
    Pu.prototype.gs = function (a, b, c, d) {
        a = Nu.prototype.gs.call(this, a, b, c, d);
        a.style.fontFamily = "'UbuntuRegular', Arial, Helvetica, sans-serif";
        a.style.fontSize = "16px";
        return a;
    };
    Pu.prototype.D = function () {
        var a = Math.max(document.documentElement.clientHeight, window.innerHeight),
            b = Math.max(50, (a - this.pd.offsetHeight) / 2),
            c = Fu();
        a = !c && 576 > a;
        this.element.style.left = (Math.max(document.documentElement.clientWidth, window.innerWidth) - this.pd.offsetWidth) / 2 + "px";
        this.element.style.top = a ? "0px" : b + "px";
        this.element.style.bottom = a ? "0px" : "";
        (document.activeElement !== this.Dh && document.activeElement !== this.uo) ||
            c ||
            window.setTimeout(function () {
                var d;
                null === (d = document.activeElement) || void 0 === d ? void 0 : d.scrollIntoView();
            }, 510);
    };
    var Qu, Ru;
    function Su(a) {
        void 0 === a.pg && (a.pg = a.fromFeature);
        void 0 === a.UF && (a.UF = a.seeBackground);
        void 0 === a.oN && (a.oN = a.returnToPage);
        void 0 === a.fN && (a.fN = a.refreshOpener);
        A.current.nb ? (void 0 === Ru && ((Ru = new Pu()), F("LoginOverlayOpened")), Ru.nj(a)) : (void 0 === Qu && ((Qu = new Nu()), F("LoginOverlayOpened")), Qu.nj(a));
    }
    function Tu() {
        return void 0 !== Qu ? Qu.isVisible : !1;
    }
    function Uu() {
        var a;
        return void 0 === (null === (a = A.current) || void 0 === a ? void 0 : a.V);
    }
    var Vu;
    function Wu(a, b, c, d) {
        return Uu()
            ? (void 0 === Vu || (void 0 !== b && !b)
                  ? Md(
                        void 0 === a ? "Login required" : a,
                        function () {
                            Su({ pg: d });
                        },
                        c
                    )
                  : Vu(),
              !0)
            : !1;
    }
    function Xu(a) {
        w.call(this, "div", a);
        this.fc = new y("overlayClick");
    }
    q(Xu, w);
    k = Xu.prototype;
    k.ia = function (a) {
        var b = this;
        w.prototype.ia.call(this, a);
        this.S = document.createElement("div");
        this.S.style.position = "fixed";
        this.S.style.display = "none";
        this.S.style.left = "0";
        this.S.style.top = "0";
        this.S.style.right = "0";
        this.S.style.bottom = "0";
        this.S.style.zIndex = "1000";
        this.S.style.cursor = "auto";
        this.S.onclick = function (c) {
            c.stopPropagation();
            b.Lb();
            b.fc.h(void 0);
        };
        this.element.style.zIndex = "1001";
        this.element.onclick = function (c) {
            c.stopPropagation();
        };
    };
    k.Yx = function () {
        var a = this;
        w.prototype.Yx.call(this);
        window.setTimeout(function () {
            a.Gd();
        }, 0);
    };
    k.Gd = function () {
        w.prototype.Gd.call(this);
        null !== this.element.parentElement && this.element.parentElement.insertBefore(this.S, this.element);
    };
    k.xh = function () {
        this.S.style.display = "block";
    };
    k.Lb = function () {
        this.S.style.display = "none";
    };
    k.Xg = function () {
        w.prototype.Xg.call(this);
        null !== this.S.parentElement && this.S.parentElement.removeChild(this.S);
    };
    function Yu(a, b) {
        a.style.webkitTransition = b;
        a.style.transition = b;
        void 0 !== a.style.setProperty && a.style.setProperty("moz-transition", b);
    }
    function Zu(a, b) {
        a.style.userSelect = b;
        a.style.webkitUserSelect = b;
        a.style.msUserSelect = b;
        void 0 !== a.style.setProperty && a.style.setProperty("moz-user-select", b);
    }
    var $u = {
        aqua: "#00ffff",
        black: "#000000",
        blue: "#0000ff",
        fuchsia: "#ff00ff",
        gray: "#808080",
        green: "#008000",
        lime: "#00ff00",
        maroon: "#800000",
        navy: "#000080",
        olive: "#808000",
        orange: "#ffa500",
        purple: "#800080",
        red: "#ff0000",
        silver: "#c0c0c0",
        teal: "#008080",
        white: "#ffffff",
        yellow: "#ffff00",
    };
    function av() {
        var a = void 0 === a ? { red: 200, green: 200, blue: 200 } : a;
        var b = "#aaaaaa";
        if (/^[a-z]+$/.test(b)) {
            var c = $u[b];
            void 0 !== c && (b = c);
        }
        if (/^#([a-fA-F0-9]{3}){1,2}$/.test(b)) return (a = b), 4 === a.length && (a = "#" + a[1] + a[1] + a[2] + a[2] + a[3] + a[3]), (a = Number("0x" + a.substring(1))), { red: (a >> 16) & 255, green: (a >> 8) & 255, blue: a & 255 };
        if (0 === b.indexOf("rgb")) {
            b = "#aaaaaa".match(/\d+(\.\d+)?%?/g);
            if (null === b || 3 > b.length || 4 < b.length) return a;
            b = [b[0], b[1], b[2]];
            a = [];
            for (c = 0; 3 > c; c += 1) (a[c] = -1 !== b[c].indexOf("%") ? Math.round(2.55 * parseFloat(b[c])) : Number(b[c])), 0 > a[c] ? (a[c] = 0) : 255 < a[c] && (a[c] = 255);
            return { red: a[0], green: a[1], blue: a[2] };
        }
        return a;
    }
    function bv(a, b, c) {
        Xu.call(this);
        var d = this;
        this.Cy = b;
        this.Tt = c;
        this.Sc = document.createElement("input");
        this.JM = !1;
        this.KM = new y("pickerImgLoaded");
        this.BG = a;
        this.element.style.visibility = "hidden";
        this.element.style.width = "auto";
        this.element.style.height = "auto";
        this.element.style.opacity = "0";
        Yu(this.element, "opacity 250ms");
        v("keydown", this.element, function (e) {
            27 === e.keyCode && d.B();
        });
        this.fc.g(function () {
            d.B();
        });
        cv(this);
        dv(this);
    }
    q(bv, Xu);
    function cv(a) {
        var b = document.createElement("canvas");
        b.style.cursor = "crosshair";
        b.style.border = "1px solid #000001";
        a.element.appendChild(b);
        var c = document.createElement("img");
        "https://static-assets.highwebmedia.com/tsdefaultassets/colorPicker.png?v=1".startsWith("/") || c.setAttribute("crossorigin", "anonymous");
        c.src = "https://static-assets.highwebmedia.com/tsdefaultassets/colorPicker.png?v=1";
        c.onload = function () {
            b.width = c.width;
            b.height = c.height;
            b.onclick = function () {
                a.Jx = a.Sc.value;
                a.Cy(a.Sc.value);
                a.B();
            };
            b.onmousemove = function (e) {
                var f = b.getContext("2d");
                if (null !== f && 0 < e.offsetX && 0 < e.offsetY && e.offsetX < b.clientWidth && e.offsetY < b.clientHeight) {
                    var g = f.getImageData(e.offsetX, e.offsetY, 1, 1).data;
                    e = a.Sc;
                    f = g[0];
                    var h = g[1];
                    g = g[2];
                    (255 < f || 255 < h || 255 < g || 0 > f || 0 > h || 0 > g) && r("Invalid rgb color value: r: " + f + ", g: " + h + ", b: " + g, "colorUtils.ts", "common");
                    f = ("000000" + ((f << 16) | (h << 8) | g).toString(16)).slice(-6);
                    e.value = "#" + f;
                } else a.Sc.value = a.Jx;
                a.Tt(a.Sc.value);
            };
            b.onmouseleave = function () {
                a.Sc.value = a.Jx;
                a.Tt(a.Sc.value);
            };
            var d = b.getContext("2d");
            null !== d && d.drawImage(c, 0, 0, c.width, c.height);
            a.Sc.style.width = b.width - 8 + "px";
            a.JM = !0;
            a.KM.h(void 0);
        };
    }
    function dv(a) {
        a.Sc.type = "text";
        a.Sc.style.display = "block";
        a.Sc.style.border = "1px solid #000000";
        a.Sc.style.padding = "2px 4px";
        a.Sc.style.position = "relative";
        a.Sc.style.top = "-3px";
        a.Sc.style.fontSize = "12px";
        a.Sc.oninput = function () {
            a.Tt(a.Sc.value);
        };
        v("keydown", a.Sc, function (b) {
            13 === b.keyCode && (a.Cy(a.Sc.value), a.B());
        });
        a.element.appendChild(a.Sc);
    }
    bv.prototype.D = function () {
        this.element.style.left = this.BG.offsetLeft + "px";
        this.element.style.top = this.BG.offsetTop + this.BG.offsetHeight + 2 + "px";
    };
    bv.prototype.show = function (a) {
        this.Jx = a;
        if (this.JM) this.mO();
        else this.KM.once(this.mO.bind(this));
    };
    bv.prototype.mO = function () {
        this.Sc.value = this.Jx;
        this.element.style.opacity = "1";
        this.element.style.visibility = "";
        this.xh();
        this.R();
    };
    bv.prototype.B = function () {
        var a = this;
        this.Lb();
        this.element.style.opacity = "0";
        window.setTimeout(function () {
            a.element.style.visibility = "hidden";
        }, 250);
    };
    function ev(a) {
        w.call(this);
        var b = this;
        this.config = a;
        this.value = 0;
        this.IA = new y("valueChanged");
        this.HA = new y("valueChangeStart");
        this.GA = new y("valueChangeEnd");
        O(this.element, "slider");
        this.element.style.position = "relative";
        this.element.style.overflow = "visible";
        this.element.style.cursor = "pointer";
        this.element.style.width = void 0 !== a.Ri ? a.Ri + a.md + "px" : "90%";
        this.element.style.height = a.md + "px";
        this.gn = void 0 !== a.gn ? a.gn : 2 * Math.round((0.25 * a.md) / 2);
        void 0 !== a.QH
            ? ((this.ng = document.createElement("img")), (this.ng.src = a.QH), (this.ng.style.width = "100%"), (this.ng.style.height = "100%"))
            : ((this.ng = document.createElement("div")),
              (this.ng.style.position = "absolute"),
              (this.ng.style.boxSizing = "border-box"),
              void 0 !== a.zJ ? (this.ng.style.backgroundColor = a.zJ) : ((this.ng.style.backgroundColor = "#333333"), (this.ng.style.backgroundColor = "rgba(255, 255, 255, 0.2)")),
              (this.ng.style.top = 0.5 * (a.md - this.gn) + "px"),
              (this.ng.style.height = this.gn + "px"),
              (this.ng.style.width = "100%"));
        this.element.appendChild(this.ng);
        void 0 !== a.QH
            ? ((this.Xh = document.createElement("div")), (this.Xh.style.visibility = "none"))
            : ((this.Xh = document.createElement("div")),
              (this.Xh.style.position = "absolute"),
              (this.Xh.style.boxSizing = "border-box"),
              (this.Xh.style.backgroundColor = void 0 !== a.OJ ? a.OJ : "#ffffff"),
              (this.Xh.style.top = 0.5 * (a.md - this.gn) + "px"),
              (this.Xh.style.height = this.gn + "px"),
              this.element.appendChild(this.Xh));
        void 0 !== a.fR
            ? ((this.la = document.createElement("img")),
              (this.la.style.position = "absolute"),
              (this.la.style.top = "0"),
              (this.la.src = a.fR),
              (this.la.style.height = a.md + "px"),
              (this.la.style.width = a.md + "px"),
              (this.la.style.cursor = "grab"),
              (this.la.style.left = "0px"))
            : ((this.la = document.createElement("div")),
              (this.la.style.position = "absolute"),
              (this.la.style.top = "0"),
              (this.la.style.backgroundColor = void 0 !== a.pK ? a.pK : "#ffffff"),
              (this.la.style.borderRadius = "50%"),
              (this.la.style.height = a.md + "px"),
              (this.la.style.height = a.md + "px"),
              (this.la.style.width = a.md + "px"),
              (this.la.style.cursor = "grab"));
        this.element.appendChild(this.la);
        this.aV = new Sd(
            function () {
                b.IA.h(b.value);
            },
            { zc: 100, Qc: 2 }
        );
        fv(
            this,
            function (c) {
                gv(b, c, c.clientX);
            },
            "mousedown",
            "mousemove",
            "mouseup"
        );
        fv(
            this,
            function (c) {
                if (1 === c.touches.length) {
                    var d = c.touches.item(0);
                    null !== d && gv(b, c, d.clientX);
                }
            },
            "touchstart",
            "touchmove",
            "touchend"
        );
        v("mousedown", this.element, function (c) {
            gv(b, c, c.clientX);
            var d = b.la,
                e = d.dispatchEvent;
            var f = c.type;
            try {
                var g = new MouseEvent(f, c);
            } catch (h) {
                (g = document.createEvent("MouseEvent")),
                    g.initMouseEvent(
                        f,
                        void 0 !== c.bubbles ? c.bubbles : !1,
                        void 0 !== c.cancelable ? c.cancelable : !1,
                        window,
                        0,
                        void 0 !== c.screenX ? c.screenX : 0,
                        void 0 !== c.screenY ? c.screenY : 0,
                        void 0 !== c.clientX ? c.clientX : 0,
                        void 0 !== c.clientY ? c.clientY : 0,
                        void 0 !== c.ctrlKey ? c.ctrlKey : !1,
                        void 0 !== c.altKey ? c.altKey : !1,
                        void 0 !== c.shiftKey ? c.shiftKey : !1,
                        void 0 !== c.metaKey ? c.metaKey : !1,
                        void 0 !== c.button ? c.button : 0,
                        void 0 !== c.relatedTarget ? c.relatedTarget : null
                    );
            }
            e.call(d, g);
        });
    }
    q(ev, w);
    function fv(a, b, c, d, e) {
        v(c, a.la, function (f) {
            function g(h) {
                a.GA.h(a.value);
                a.la.style.cursor = "grab";
                document.body.style.cursor = "";
                h.preventDefault();
                Bb(d, document, b, !0);
                Bb(e, document, g, !0);
            }
            a.HA.h(a.value);
            a.la.style.cursor = "";
            document.body.style.cursor = "grabbing";
            f.preventDefault();
            f.stopPropagation();
            v(d, document, b, !0);
            v(e, document, g, !0);
        });
    }
    function gv(a, b, c) {
        var d = a.element.getBoundingClientRect().left;
        void 0 !== a.config.Ri
            ? a.vh((100 / a.config.Ri) * (Math.max(0.5 * a.config.md, Math.min(a.config.Ri + 0.5 * a.config.md, c - d)) - 0.5 * a.config.md))
            : a.vh((100 / a.element.offsetWidth) * (Math.max(0.5 * a.config.md, Math.min(a.element.offsetWidth + 0.5 * a.config.md, c - d)) - 0.5 * a.config.md));
        Td(a.aV);
        b.stopPropagation();
    }
    ev.prototype.ld = function () {
        return this.value;
    };
    ev.prototype.vh = function (a) {
        void 0 !== this.config.Ri
            ? ((this.la.style.left = (a * this.config.Ri) / 100 + "px"), (this.Xh.style.width = (a * this.config.Ri) / 100 + "px"))
            : ((this.la.style.left = (a * (this.element.offsetWidth - this.config.md)) / 100 + "px"), (this.Xh.style.width = (a * this.element.offsetWidth) / 100 + "px"));
        this.value = a;
    };
    ev.prototype.gh = function () {
        void 0 === this.config.Ri && ((this.la.style.left = (this.value * (this.element.offsetWidth - this.config.md)) / 100 + "px"), (this.Xh.style.width = (this.value * this.element.offsetWidth) / 100 + "px"));
    };
    var hv = new y("switchedToHLS"),
        iv = new y("openDefaultTipCalloutRequest"),
        jv = new y("loginOverlayRequest"),
        kv = new y("anonSendMessageClick"),
        lv = new y("makeButtonsShort"),
        mv = new y("userChatSettingsUpdate", {
            rc: function () {
                return 50 + 2 * Ob;
            },
        }),
        nv = new y("openPhotoVideoTabRequest");
    function ov(a, b, c) {
        w.call(this);
        var d = this;
        this.Va = document.createElement("input");
        this.onChange = function () {};
        this.disabled = !1;
        this.Va.type = "checkbox";
        this.element.style.overflow = "visible";
        this.element.style.position = "relative";
        O(this.element, "checkboxComponent");
        this.oO(c);
        void 0 !== a && this.$q(a);
        void 0 !== b && this.Lo(b);
        this.element.appendChild(this.Va);
        this.Hi();
        this.element.onclick = function (e) {
            d.disabled || e.target === d.Va || (d.toggle(), d.Va.focus(), e.preventDefault());
        };
        this.Va.onchange = function () {
            d.$q(d.Va.checked);
        };
    }
    q(ov, w);
    k = ov.prototype;
    k.toggle = function () {
        this.Va.checked = !this.Va.checked;
        this.onChange();
        this.Hi();
    };
    k.focus = function () {
        this.Va.focus();
    };
    k.blur = function () {
        this.Va.blur();
    };
    k.$q = function (a) {
        this.Va.checked = a;
        this.Hi();
        this.onChange();
    };
    function pv(a, b) {
        a.Va.checked = b;
        a.Hi();
    }
    k.Lo = function (a) {
        this.onChange = a;
    };
    k.disable = function () {
        this.disabled = !0;
        this.Va.tabIndex = -1;
        this.Hi();
    };
    k.enable = function () {
        this.disabled = !1;
        this.Va.removeAttribute("tabindex");
        this.Hi();
    };
    function qv(a, b, c) {
        ov.call(this, b, c);
        this.element.style.height = a + "px";
        this.element.style.width = a + "px";
    }
    q(qv, ov);
    qv.prototype.oO = function () {
        O(this.element, "transparentCheckbox");
    };
    qv.prototype.Hi = function () {
        this.Va.checked ? O(this.element, "checked") : P(this.element, "checked");
        this.disabled ? O(this.element, "disabled") : P(this.element, "disabled");
    };
    qv.prototype.fh = function () {
        return this.Va.name;
    };
    qv.prototype.Dz = function (a) {
        this.Va.title = a;
    };
    function rv(a, b, c) {
        ov.call(this, a, b, c);
    }
    q(rv, ov);
    rv.prototype.oO = function (a) {
        var b,
            c,
            d = null !== (b = null === a || void 0 === a ? void 0 : a.width) && void 0 !== b ? b : 50;
        a = null !== (c = null === a || void 0 === a ? void 0 : a.height) && void 0 !== c ? c : 30;
        c = a + "px";
        this.KU = d - a + "px";
        this.element.style.width = d + "px";
        this.element.style.height = c;
        this.element.style.borderRadius = (2 * a) / 3 + "px";
        this.element.style.lineHeight = c;
        O(this.element, "toggle");
        this.button = document.createElement("div");
        this.button.style.height = c;
        this.button.style.width = c;
        O(this.button, "toggleButton");
        this.element.appendChild(this.button);
    };
    rv.prototype.Hi = function () {
        this.Va.checked
            ? ((this.element.style.backgroundColor = "rgb(246, 115, 0)"), (this.element.style.boxShadow = "rgb(246, 115, 0) 0 0 0 16px inset"), (this.element.style.border = "1px solid rgb(246, 115, 0)"), (this.button.style.left = this.KU))
            : ((this.element.style.backgroundColor = "rgb(233, 233, 233)"),
              (this.element.style.boxShadow = "rgb(233, 233, 233) 0 0 0 16px inset"),
              (this.element.style.border = "1px solid rgb(223, 223, 223)"),
              (this.button.style.left = "0"));
    };
    function sv() {}
    function tv(a, b) {
        b.style.margin = "4px 0 7px 4px";
    }
    sv.prototype.nr = function (a, b) {
        a.innerText = b;
        a.style.fontSize = "12px";
        a.style.display = "inline-block";
        a.style.marginBottom = "5px";
    };
    function uv(a, b) {
        O(b, "chat-settings-input");
        b.style.display = "block";
        b.style.fontSize = "12px";
        b.style.marginTop = "0";
        b.style.borderWidth = "1px";
        b.style.borderStyle = "solid";
        b instanceof HTMLSelectElement && (O(b, "chat-settings-select"), (b.style.height = "24px"), (b.style.width = "100%"));
    }
    var vv = new y("getChatMode");
    function wv() {
        w.apply(this, arguments);
        this.CB = new y("chatSettingsSavedRequest");
    }
    q(wv, w);
    k = wv.prototype;
    k.initData = function () {
        this.wk = this.nd = !1;
        this.bL = !0;
        this.jo = document.createElement("div");
        this.ni = document.createElement("div");
        this.form = document.createElement("form");
        this.Tm = document.createElement("div");
        this.wl = document.createElement("input");
        this.Nh = document.createElement("span");
        this.Mp = document.createElement("select");
        this.$w = document.createElement("select");
        this.Ow = document.createElement("select");
        this.Qu = new rv(!1, this.Zd.bind(this));
        this.Bx = document.createElement("select");
        this.uy = document.createElement("select");
        this.vy = document.createElement("select");
        this.BO = document.createElement("label");
        this.Ze = new ev({ md: 16, pK: "rgb(246, 115, 0)", zJ: "#cccccc", OJ: "rgb(246, 115, 0)" });
        this.Bt = document.createElement("label");
    };
    k.ia = function () {
        var a = this;
        this.element.style.width = "100%";
        this.element.style.overflow = "auto";
        this.element.style.boxSizing = "border-box";
        this.element.style.padding = "11px";
        this.element.style.fontSize = "12px";
        this.element.style.position = "static";
        this.form.style.marginBottom = "40px";
        this.form.style.maxWidth = "400px";
        this.element.appendChild(this.form);
        var b = document.createElement("div"),
            c = document.createElement("div");
        this.form.appendChild(b);
        this.form.appendChild(c);
        this.form.appendChild(this.Tm);
        this.form.appendChild(this.jo);
        this.form.appendChild(this.ni);
        xv(this);
        xv(this);
        xv(this);
        xv(this);
        xv(this);
        var d = this.tn(Rm);
        d.style.marginTop = "0";
        b.appendChild(d);
        b.appendChild(yv(this));
        b.appendChild(zv(this));
        b.appendChild(Av(this));
        c.appendChild(this.tn(Sm));
        c.appendChild(Bv(this));
        c.appendChild(Cv(this));
        this.Tm.appendChild(this.tn(Tm));
        this.UI();
        this.bC();
        this.ni.appendChild(this.tn(Vm));
        this.RI();
        mv.g(function (e) {
            a.gp(e);
        });
        G.g(function (e) {
            a.hh(e);
        });
    };
    function Dv(a) {
        void 0 !== a.sw && a.sw.B();
        void 0 !== a.Hq && a.Hq.B();
    }
    function Ev(a, b) {
        a.wl.value = b;
        a.Nh.style.color = b;
        a.Nh.style.backgroundColor = b;
    }
    k.zM = function (a) {
        if (!this.Pa()) {
            if (Wu('You must be logged in to change chat color. Click "OK" to login.')) {
                a.preventDefault();
                return;
            }
            if (!this.wk) {
                R("You must be a supporter to change chat color");
                a.preventDefault();
                return;
            }
        }
        void 0 === this.sw && (this.sw = this.G(new bv(this.Nh, this.Cy.bind(this), this.Tt.bind(this))));
        this.sw.show(this.wl.value);
    };
    k.Cy = function (a) {
        Ev(this, a);
        this.Zd();
    };
    k.Tt = function (a) {
        Ev(this, a);
    };
    k.Nd = function (a, b, c, d) {
        var e = this,
            f = document.createElement("div");
        tv(xv(this), f);
        f.appendChild(a);
        f.appendChild(c);
        if (void 0 !== d && c instanceof HTMLSelectElement) {
            d = l(d);
            for (var g = d.next(); !g.done; g = d.next()) {
                g = g.value;
                var h = document.createElement("option");
                h.innerText = g.label.toString();
                h.value = g.value.toString();
                c.appendChild(h);
            }
        }
        xv(this).nr(a, b);
        uv(xv(this), c);
        f.onclick = function (m) {
            Wu('You must be logged in to change chat settings. Click "OK" to login.') ? m.preventDefault() : m.target !== c && c.focus();
        };
        c.onmousedown = function (m) {
            Wu('You must be logged in to change chat settings. Click "OK" to login.') && m.preventDefault();
        };
        v("change", c, function () {
            e.Zd();
        });
        return f;
    };
    function yv(a) {
        var b = document.createElement("label");
        b = a.Nd(b, nf, a.Nh);
        b.appendChild(a.wl);
        O(a.Nh, "colorSwatch");
        a.Nh.style.width = "20px";
        a.Nh.style.height = "20px";
        a.Nh.style.border = "1px solid " + xe.wC;
        a.Nh.style.cursor = "pointer";
        a.Nh.style.verticalAlign = "middle";
        a.Nh.onmousedown = a.zM.bind(a);
        b.onclick = a.zM.bind(a);
        a.wl.type = "hidden";
        return b;
    }
    function zv(a) {
        function b(d) {
            a.Pa() || (Wu('You must be logged in to change font family. Click "OK" to login.') ? d.preventDefault() : a.wk || (d.preventDefault(), a.Mp.blur(), R("You must be a supporter to change font family")));
        }
        var c = document.createElement("label");
        c = a.Nd(c, of, a.Mp, [
            { label: "Default", value: "default" },
            { label: "Arial", value: "Arial, Helvetica" },
            { label: "Bookman Old Style", value: "Bookman Old Style" },
            { label: "Comic Sans", value: '"Comic Sans MS", cursive' },
            { label: "Courier", value: '"Courier New"' },
            { label: "Lucida", value: "Lucida" },
            { label: "Palantino", value: "Palantino" },
            { label: "Tahoma", value: "Tahoma, Geneva" },
            { label: "Times New Roman", value: '"Times New Roman"' },
        ]);
        a.Mp.onmousedown = b.bind(a);
        c.onclick = b.bind(a);
        return c;
    }
    function Av(a) {
        for (var b = [], c = 9; 20 >= c; c += 1) b.push({ label: c + "pt", value: c + "pt" });
        c = document.createElement("label");
        return a.Nd(c, pf, a.$w, b);
    }
    function Bv(a) {
        var b = document.createElement("label");
        b = a.Nd(b, qf, a.Qu.element);
        a.Qu.element.style.display = "block";
        return b;
    }
    function Cv(a) {
        var b = document.createElement("label");
        return a.Nd(b, rf, a.Ow, [
            { label: "Turn Off Autocomplete", value: "-1" },
            { label: "No Delay - 0s", value: "0" },
            { label: "Short - 0.5s", value: "500" },
            { label: "Medium - 1s", value: "1000" },
            { label: "Long - 1.5s", value: "1500" },
        ]);
    }
    function Fv(a) {
        var b = document.createElement("label");
        return a.Nd(b, tf, a.Bx, [
            { label: "Dark Purple (Tipped 1000 recently)", value: "darkpurple" },
            { label: "Light Purple (Tipped 250 recently)", value: "lightpurple" },
            { label: "Dark Blue (Tipped 50 recently)", value: "darkblue" },
            { label: "Light Blue (Owns or purchased tokens)", value: "lightblue" },
        ]);
    }
    function Gv(a) {
        var b = "";
        vv.g(function (d) {
            b = d;
        });
        var c = a.Nd(a.BO, Cf, a.Ze.element);
        Hv(a);
        a.$s(a.Ze.ld());
        a.Ze.HA.g(function (d) {
            a.$s(d);
        });
        a.Ze.IA.g(a.$s.bind(a));
        a.Ze.GA.g(function (d) {
            a.$s(d);
            F("TipVolumeChanged", { tipvol: d, chatmode: b });
            d = Math.round(a.Ze.ld());
            a.bL ? (bc("tipvol", "" + d, 60), (a.Da.Tg = d), mv.h(a.Da)) : a.Zd();
        });
        c.onclick = function () {};
        a.Ze.element.onmousedown = function () {};
        return c;
    }
    k.$s = function (a) {
        this.BO.innerText = Cf + " (" + Math.round(a) + "%)";
    };
    function Iv(a) {
        var b = Jv(a, a.Bt, Df);
        b.appendChild(a.Bt);
        a.Bt.onclick = function () {
            Wu('You must be logged in to edit ignored users. Click "OK" to login.') || (void 0 === a.Hq && void 0 === a.Hq && (a.Hq = pb() ? new tu() : new ru()), void 0 !== a.Hq && a.Hq.nj());
        };
        return b;
    }
    function Jv(a, b, c) {
        var d = document.createElement("div");
        tv(xv(a), d);
        O(b, "link");
        b.innerText = c;
        b.style.marginTop = "16px";
        b.style.cursor = "pointer";
        b.onmouseenter = function () {
            b.style.textDecoration = "underline";
        };
        b.onmouseleave = function () {
            b.style.textDecoration = "none";
        };
        return d;
    }
    k.tn = function (a) {
        var b = document.createElement("div");
        xv(this);
        b.innerText = a;
        b.style.fontWeight = "bold";
        b.style.fontSize = "12px";
        b.style.margin = "14px 0 8px";
        b.style.backgroundColor = "";
        return b;
    };
    k.Zd = function () {
        var a = this;
        Wu('You must be logged in to change chat settings. Click "OK" to login.')
            ? mv.h(this.Da)
            : (E(this.lK(), { color: this.wl.value }).catch(function (b) {
                  a.wl.value = a.Da.Zw;
                  r("Error saving user chat color: " + b, "chatSettings.ts", "common");
              }),
              E(this.mK(), this.Pl())
                  .then(function () {
                      a.CB.h(void 0);
                      a.dG();
                      mv.h(a.Da);
                  })
                  .catch(function (b) {
                      r("Error saving user chat settings: " + b, "chatSettings.ts", "common");
                  }));
    };
    k.dG = function () {
        this.tx() && ((this.Da.vm = Kv(this.uy.value)), (this.Da.wm = Kv(this.vy.value)));
        this.Da.Zw = this.wl.value;
        this.Da.fontFamily = decodeURIComponent(this.Mp.value);
        this.Da.fontSize = this.$w.value;
        this.Da.$d = this.Qu.Va.checked;
        this.Da.Fn = this.Ow.value;
        this.Da.uD = this.Bx.value;
        this.Da.Tg = Math.round(this.Ze.ld());
    };
    k.Pl = function () {
        var a = { color: this.wl.value };
        a.font_family = decodeURIComponent(this.Mp.value);
        a.font_size = this.$w.value;
        a.show_emoticons = "" + this.Qu.Va.checked;
        a.emoticon_autocomplete_delay = this.Ow.value;
        a.highest_token_color = this.Bx.value;
        a.viewer_tip_volume = "" + Math.round(this.Ze.ld());
        this.tx() && ((a.enter_notify = this.uy.value), (a.leave_notify = this.vy.value));
        return a;
    };
    k.lK = function () {
        return "choose_viewer_chat_color/";
    };
    k.mK = function () {
        return "api/viewerchatsettings/" + this.J + "/";
    };
    k.tx = function () {
        return this.nd;
    };
    function Hv(a) {
        a.Ze.element.style.display = "inline-block";
        a.Ze.element.style.border = "none";
        a.Ze.element.style.verticalAlign = "top";
        a.Ze.element.style.height = "16px";
        a.Ze.element.style.width = "100%";
    }
    k.D = function () {
        this.Ze.gh();
    };
    function xv(a) {
        void 0 === a.nI && (a.nI = new sv());
        return a.nI;
    }
    k.UI = function () {
        this.Tm.appendChild(Fv(this));
    };
    k.bC = function () {
        this.jo.appendChild(this.tn(Um));
        var a = this.jo,
            b = a.appendChild;
        var c = document.createElement("label");
        c = this.Nd(c, Wm, this.uy, Lv());
        b.call(a, c);
        a = this.jo;
        b = a.appendChild;
        c = document.createElement("label");
        c = this.Nd(c, Xm, this.vy, Lv());
        b.call(a, c);
    };
    k.RI = function () {
        this.ni.appendChild(Gv(this));
        this.ni.appendChild(Iv(this));
    };
    k.gp = function (a) {
        this.Da = a;
        Ev(this, this.Da.Zw);
        this.Mp.value = this.Da.fontFamily;
        this.$w.value = this.Da.fontSize;
        pv(this.Qu, this.Da.$d);
        this.Ow.value = this.Da.Fn;
        this.Bx.value = this.Da.uD;
        this.Ze.vh(this.Da.Tg);
        this.$s(this.Da.Tg);
        Hc = this.Da.Tg;
    };
    k.Pa = function () {
        return !1;
    };
    k.hh = function (a) {
        this.gp(a.A.Da);
        this.J = a.A.j;
        this.nd = a.A.nd;
        this.wk = a.A.wk;
        this.bL = a.l.Fd;
        this.tx() ? ((this.jo.style.display = "block"), (this.uy.value = Mv(this.Da.vm)), (this.vy.value = Mv(this.Da.wm))) : (this.jo.style.display = "none");
    };
    function Lv() {
        return [
            { label: "All Registered Users", value: "orga" },
            { label: "Mods, Fans, and Users With Tokens", value: "orgb" },
            { label: "Mods and Fans", value: "org" },
            { label: "No Users", value: "none" },
        ];
    }
    function Mv(a) {
        switch (a) {
            case 0:
                return "orga";
            case 1:
                return "orgb";
            case 2:
                return "org";
            case 3:
                return "none";
            default:
                return r("Invalid enter/leave setting: " + a, "chatSettings.ts", "common"), "orgb";
        }
    }
    function Nv(a) {
        v(nd(), document, function () {
            pd()
                ? window.setTimeout(function () {
                      "fullscreen" === a.ee || a.nb || Ov("noninteractive-fullscreen");
                  }, 0)
                : Ov(a.gE);
        });
    }
    function Pv(a, b, c) {
        if ((void 0 === c || !c) && b === a.ee) return !1;
        -1 === ["noninteractive-fullscreen", "fullscreen", "fullvideo"].indexOf(a.ee) && (a.gE = a.ee);
        a.xL = a.ee;
        a.ee = b;
        Jc(a.ee);
        return !0;
    }
    function Ov(a) {
        var b = Qv;
        Pv(b, a, !1) && b.ud.h({ Mf: b.ee, DS: b.xL });
    }
    function Rv() {
        var a = Qv;
        Qa() && window.localStorage.setItem(a.Vo, JSON.stringify({ isTheaterMode: "theater" === a.ee }));
    }
    function Sv() {
        var a = Qv,
            b = a.ee;
        Qa() && ((a = window.localStorage.getItem(a.Vo)), null !== a && (b = JSON.parse(a).isTheaterMode ? "theater" : "split"));
        return b;
    }
    function Y() {
        return Qv.ee;
    }
    var Qv = new (function () {
        var a = this;
        this.Vo = "isTheaterMode";
        this.ud = new y("changeVideoMode", {
            rc: function () {
                return 20 + Ob;
            },
        });
        this.ee = "split";
        this.xL = "theater";
        this.gE = "split";
        Nv(this);
        vv.g(function (b) {
            a.nb = "mobile" === b;
        });
    })();
    function Tv() {
        return document.documentElement.clientHeight !== window.outerHeight || kb() ? Math.max(window.innerHeight, document.documentElement.clientHeight) : window.innerHeight;
    }
    function Uv() {
        return document.documentElement.clientWidth;
    }
    var Vv = Zd("InMinVidW2") ? 650 : 500;
    function Wv(a) {
        w.call(this);
        var b = this;
        this.oa = a;
        this.state = { videoWidth: Vv, videoHeight: 300 };
        this.$l = !1;
        this.Fo = [];
        this.element.style.display = "inline-block";
        this.element.style.width = "8px";
        this.element.style.boxSizing = "border-box";
        v("mousedown", this.element, function (c) {
            c.preventDefault();
            b.oa.element.onmousemove = function (d) {
                d = d.pageX - a.ad.element.getBoundingClientRect().left - b.element.offsetWidth / 2;
                b.gh(d);
                b.oa.R();
            };
            b.oa.element.onmouseup = function () {
                Xv(b);
            };
            b.oa.element.onmouseleave = function () {
                Xv(b);
            };
            b.$l = !0;
        });
        v("touchmove", this.element, function (c) {
            c.preventDefault();
            1 === c.targetTouches.length &&
                ((b.oa.element.ontouchmove = function () {
                    var d = c.targetTouches.item(0);
                    null !== d && ((d = d.pageX - a.ad.element.getBoundingClientRect().left - b.element.offsetWidth / 2), b.gh(d), b.oa.R());
                }),
                (b.oa.element.ontouchend = function () {
                    Xv(b);
                }),
                (b.$l = !0));
        });
        window.setTimeout(function () {
            b.element.style.cursor = Yv(b);
            O(b.element, "resizeHandle");
            Zv(b);
            b.gh();
            Xv(b);
        }, 0);
        Qv.ud.g(function () {
            "split" === Y() && (Zv(b), b.gh());
        });
    }
    q(Wv, w);
    Wv.prototype.gh = function (a) {
        a = void 0 === a ? this.state.videoWidth : a;
        a = Math.max(a, Vv + 2);
        a = Math.min($v(this), a);
        var b = Y();
        switch (b) {
            case "split":
                if (0 === this.element.offsetWidth) return;
                this.oa.ad.element.style.width = a + "px";
                var c = a * aw(this);
                this.oa.ad.F.element.style.height = c + "px";
                this.oa.Xa.element.style.height = c + bw(this.oa.ad) - 2 + "px";
                this.element.style.height = c + bw(this.oa.ad) + "px";
                this.oa.Xa.element.style.width = this.oa.element.clientWidth - a - this.element.offsetWidth - 2 * this.oa.xu + "px";
                this.oa.ad.fp();
                cw.h();
                break;
            case "theater":
                this.oa.ad.element.style.width = this.oa.element.clientWidth - 2 * this.oa.xu + "px";
                break;
            case "fullscreen":
                this.oa.ad.element.style.width = window.innerWidth + "px";
                break;
            case "videoonly":
                break;
            case "noninteractive-fullscreen":
                break;
            default:
                r("Unexpected VideoMode: " + b, "resizeHandle.ts", "theatermodelib");
        }
        this.state.videoWidth = a;
        "split" === b && ((a = Yv(this)), (this.element.style.cursor = a), (this.oa.element.style.cursor = a));
    };
    function dw(a) {
        var b = a.Fo[a.Fo.length - 1],
            c = { ee: Y(), videoWidth: a.state.videoWidth, videoHeight: a.state.videoHeight, oI: parseInt(a.oa.Xa.element.style.width), mI: parseInt(a.oa.Xa.element.style.height) };
        (void 0 !== b && b.videoWidth === c.videoWidth && b.videoHeight === c.videoHeight && b.ee === c.ee) || a.Fo.push(c);
    }
    function Xv(a) {
        dw(a);
        if (2 === a.Fo.length) {
            var b = l(a.Fo),
                c = b.next().value;
            b = b.next().value;
            F("VideoResized", {
                video_width_old: c.videoWidth,
                video_height_old: c.videoHeight,
                video_width_new: b.videoWidth,
                video_height_new: b.videoHeight,
                chat_width_old: c.oI,
                chat_height_old: c.mI,
                chat_width_new: b.oI,
                chat_height_new: b.mI,
            });
            a.Fo = a.Fo.slice(1);
        }
        "split" === Y() &&
            0 !== a.element.offsetWidth &&
            (a.Zd(),
            (a.oa.element.onmousemove = function () {}),
            (a.oa.element.onmouseup = function () {}),
            (a.oa.element.onmouseleave = function () {}),
            (a.oa.element.ontouchend = function () {}),
            (a.oa.element.ontouchmove = function () {}),
            (a.oa.element.style.cursor = ""),
            (a.$l = !1));
    }
    function $v(a) {
        return "split" === Y() ? a.oa.element.clientWidth - 155 : a.oa.element.clientWidth - 2 * a.oa.xu;
    }
    function Yv(a) {
        var b = a.oa.ad.element.offsetWidth;
        return b <= Vv ? "e-resize" : b >= $v(a) ? "w-resize" : "ew-resize";
    }
    function Zv(a) {
        if (Qa()) {
            var b = window.localStorage.getItem("defaultVideoWidth");
            if (null !== b) {
                b = JSON.parse(b);
                a.state = { videoWidth: b.videoWidth, videoHeight: b.videoHeight };
                return;
            }
        }
        if ("split" === Y() && 0 !== a.element.offsetWidth)
            if (Zd("SmDfCm")) (b = a.oa.element.getBoundingClientRect().top + bw(a.oa.ad) + 120), (b = Tv() - b), (a.state = { videoWidth: b / aw(a), videoHeight: b });
            else {
                b = { ML: !0 };
                b = (void 0 === b ? { ML: !1 } : b).ML;
                var c = Uv();
                if ($v(a) - 95 > c / 2) {
                    if (b) {
                        var d = Tv();
                        d = d / c > aw(a) ? $v(a) - 95 : (d - 200) / aw(a);
                    } else d = c / 2;
                    c = d * aw(a);
                } else (c = window.innerHeight - 166), (d = c / aw(a));
                !b && c > window.innerHeight - 166 && ((c = window.innerHeight - 166), (d = c / aw(a)));
                d < Vv && (d = Vv);
                a.state.videoWidth = d;
            }
    }
    Wv.prototype.Zd = function () {
        Qa() && window.localStorage.setItem("defaultVideoWidth", JSON.stringify({ videoWidth: this.state.videoWidth, videoHeight: this.state.videoHeight }));
    };
    Wv.prototype.D = function () {
        this.gh();
        this.$l || Xv(this);
    };
    function aw(a) {
        return a.oa.ad.F.Re ? 0.5625 : 0.75;
    }
    var cw = new y("splitModeDragResize");
    function ew() {
        y.apply(this, arguments);
    }
    q(ew, y);
    ew.prototype.g = function (a, b) {
        a = y.prototype.g.call(this, a, void 0 === b ? !0 : b);
        Td(fw);
        return a;
    };
    ew.prototype.addListener = function (a, b) {
        y.prototype.addListener.call(this, a, b);
        Td(fw);
    };
    var gw = new ew("resizeDebounceEvent"),
        fw = hw(function () {
            gw.h(!1);
        });
    function iw(a, b, c, d, e, f, g) {
        function h() {
            var m = c instanceof Function ? c() : c,
                n = d instanceof Function ? d() : d,
                p = m + ((n - m) * (Math.max(Math.min(document.body.clientWidth, f), e) - e)) / (f - e),
                u = a instanceof w ? a.element : a;
            b instanceof Array
                ? b.forEach(function (x) {
                      u.style[x] = p + "px";
                  })
                : (u.style[b] = p + "px");
            a instanceof w && a.R();
            void 0 !== g && g(p);
        }
        e = void 0 === e ? 500 : e;
        f = void 0 === f ? 1003 : f;
        gw.g(h);
        window.setTimeout(function () {
            h();
        });
        return h;
    }
    function jw() {
        var a = new y("width-less-than620"),
            b = !1;
        gw.g(function () {
            620 > Uv() ? b || ((b = !0), a.h(!0)) : b && ((b = !1), a.h(!1));
        });
        return a;
    }
    function hw(a) {
        var b = new Sd(
                function () {
                    a(!0);
                },
                { zc: 80, Qc: 2 }
            ),
            c = new Sd(
                function () {
                    a(!1);
                },
                { zc: 200, Qc: 1 }
            );
        v("resize", window, function () {
            Td(b);
            Td(c);
        });
        v("orientationchange", window, function () {
            a(!1);
            window.setTimeout(function () {
                a(!1);
            }, 80);
        });
        return c;
    }
    if (mb() && jb()) {
        var kw = document.createElement("div");
        Q(kw, { position: "absolute", width: "100%" });
        document.body.appendChild(kw);
        var lw = kw.offsetWidth;
        window.setInterval(function () {
            lw !== kw.offsetWidth && (gw.h(!0), (lw = kw.offsetWidth));
        }, 150);
    }
    function mw(a, b, c, d) {
        d = void 0 === d ? document.body : d;
        var e, f;
        w.call(this);
        var g = this;
        this.target = a;
        this.Vo = b;
        this.yS = d;
        this.H = new Ub();
        this.kj = function () {
            return 0;
        };
        this.Qj = function () {
            return 0;
        };
        this.element = nw(c);
        this.element.style.paddingRight = "40px";
        O(this, "modern");
        !0 !== c.QX && ow(this);
        this.Rc = c.Rc;
        this.wd = c.wd;
        this.kj = null !== (e = c.kj) && void 0 !== e ? e : this.kj;
        this.Qj = null !== (f = c.Qj) && void 0 !== f ? f : this.Qj;
        z(
            gw.g(function () {
                pw(g);
            }),
            this.H
        );
        z(
            qw.g(function (h) {
                g.Vo === h && g.dispose();
            }),
            this.H
        );
        void 0 !== c.Gz &&
            ((this.Dr = c.Gz),
            z(
                Qv.ud.g(function () {
                    pw(g);
                    rw(g);
                }),
                this.H
            ),
            z(
                cw.g(function () {
                    pw(g);
                }),
                this.H
            ));
        pw(this);
        rw(this);
        d.appendChild(this.element);
    }
    q(mw, w);
    function sw(a) {
        a.dispose();
        void 0 !== a.Vo && (qw.h(a.Vo), Qa() && localStorage.setItem(a.Vo, "true"));
    }
    mw.prototype.dispose = function () {
        var a, b;
        this.B();
        null === (a = this.parent) || void 0 === a ? void 0 : a.removeChild(this);
        null === (b = this.element.parentElement) || void 0 === b ? void 0 : b.removeChild(this.element);
        Vb(this.H);
    };
    function ow(a) {
        var b = Br("12px");
        b.style.position = "absolute";
        b.style.right = "5px";
        b.style.top = "5px";
        O(b, "tooltipCloseButton");
        v("click", b, function () {
            sw(a);
        });
        a.element.appendChild(b);
    }
    function pw(a) {
        var b = a.yS.getBoundingClientRect(),
            c = a.target.getBoundingClientRect(),
            d = c.top - b.top;
        b = c.left - b.left;
        c = vd(a.wd);
        1 === a.Rc
            ? ((a.element.style.top = d - a.element.clientHeight - a.target.clientHeight + a.Qj(a.target) + "px"), (a.element.style.left = b - c + a.kj(a.target) + "px"))
            : 0 === a.Rc
            ? ((a.element.style.top = d + a.target.clientHeight + a.Qj(a.target) + "px"), (a.element.style.left = b - c + a.kj(a.target) + "px"))
            : 2 === a.Rc
            ? ((a.element.style.top = d - c + a.Qj(a.target) + "px"), (a.element.style.left = b + a.target.clientWidth + a.kj(a.target) + "px"))
            : 3 === a.Rc && ((a.element.style.top = d - c + a.Qj(a.target) + "px"), (a.element.style.left = b - a.element.clientWidth + a.kj(a.target) + "px"));
    }
    function tw(a, b, c) {
        var d;
        a.wd = null !== c && void 0 !== c ? c : a.wd;
        a.Rc = b;
        b = a.element.querySelector(".divot");
        null === (d = null === b || void 0 === b ? void 0 : b.parentElement) || void 0 === d ? void 0 : d.removeChild(b);
        d = uw(a.Rc, a.wd);
        void 0 !== d && a.element.appendChild(d);
        pw(a);
    }
    mw.prototype.show = function () {
        rw(this);
    };
    function rw(a) {
        void 0 === a.Dr || a.Dr.includes(Y()) ? (a.element.style.display = "block") : a.B();
    }
    mw.prototype.B = function () {
        this.element.style.display = "none";
    };
    function vw(a, b, c) {
        if (!0 === b.GY || !Qa() || "true" !== localStorage.getItem("showMyCamTip")) return new mw(a, "showMyCamTip", b, c);
    }
    var qw = new y("key");
    function nw(a) {
        var b =
            void 0 === a.hasHTML
                ? a
                : { content: a.content, qg: "true" === a.hasHTML, width: parseInt(a.width), Rc: parseInt(a.divotPosition), wd: a.divotLeftOrTop, borderWidth: void 0 !== a.borderWidth ? parseInt(a.borderWidth) : void 0 };
        a = document.createElement("div");
        O(a, "tooltip");
        b.qg ? (a.innerHTML = b.content) : (a.textContent = b.content);
        void 0 !== b.width && (a.style.width = b.width + "px");
        a.style.borderWidth = "2px";
        a.style.position = "absolute";
        a.style.borderStyle = "solid";
        a.style.borderRadius = "6px";
        a.style.fontSize = "12px";
        a.style.padding = "8px";
        a.style.display = "none";
        a.style.zIndex = "5";
        b = uw(b.Rc, b.wd, b.borderWidth);
        void 0 !== b && a.appendChild(b);
        return a;
    }
    function uw(a, b, c) {
        var d = "";
        switch (a) {
            case 0:
                a = mr;
                d = "divotTop";
                break;
            case 1:
                a = nr;
                d = "divotBottom";
                break;
            case 2:
                a = or;
                d = "divotLeft";
                break;
            case 3:
                a = pr;
                d = "divotRight";
                break;
            default:
                a = void 0;
        }
        if (void 0 !== a) return (b = a("", "", b, void 0 === c ? 3 : c)), O(b, d), O(b, "divot"), b;
    }
    function ww(a, b, c) {
        b = void 0 === b ? !0 : b;
        w.call(this, "div", c);
        var d = this;
        this.Dd = a;
        this.Jj = new y("dropDownToggled", { Ve: !1 });
        void 0 !== a &&
            (v(
                "click",
                a,
                function (e) {
                    (e instanceof MouseEvent && (e.metaKey || e.ctrlKey)) || (d.La() ? d.ha(e) : d.Ja(void 0, e));
                },
                !1
            ),
            v("keydown", a, function (e) {
                if (32 === e.keyCode || "Space" === e.code) e.preventDefault(), d.La() ? d.ha(e) : d.Ja(void 0, e);
            }),
            a.classList.add("dropdown-anchor"));
        xw(this, b);
    }
    q(ww, w);
    ww.prototype.ia = function (a) {
        w.prototype.ia.call(this, a);
        this.element.style.overflow = "visible";
        this.element.style.position = "absolute";
        this.element.style.top = "0";
        this.element.style.left = "0";
        this.element.style.right = "auto";
        this.element.style.bottom = "auto";
        this.element.style.width = "";
        this.element.style.height = "";
        this.element.style.display = "none";
        this.element.style.zIndex = "4";
        this.element.classList.add("dropdown");
    };
    ww.prototype.Ja = function (a, b) {
        if (this.La()) return !1;
        this.element.style.display = void 0 === a ? "block" : a;
        this.Jj.h(new yw(!0, b));
        return !0;
    };
    ww.prototype.ha = function (a) {
        var b = this;
        if (
            (void 0 !== a &&
                a.composedPath().some(function (c) {
                    return c instanceof Element ? b.element.contains(c) && c.matches(".dropdown-anchor") : !1;
                })) ||
            !this.La()
        )
            return !1;
        this.element.style.display = "none";
        this.Jj.h(new yw(!1, a));
        return !0;
    };
    function xw(a, b) {
        b = void 0 === b ? !0 : b;
        a.BQ = zw.g(function (c) {
            !(a.La() && c.target instanceof Element) || (b && a.element.contains(c.target)) || (void 0 !== a.Dd && a.Dd.contains(c.target)) || a.ha(c);
        });
    }
    ww.prototype.dispose = function () {
        this.BQ.removeListener();
    };
    function Aw(a) {
        ww.call(this, a);
    }
    q(Aw, ww);
    Aw.prototype.ia = function () {
        ww.prototype.ia.call(this);
        this.element.style.display = "block";
    };
    Aw.prototype.Ja = function () {
        var a = this.element.parentElement;
        if (null === a) return !1;
        a.classList.toggle("pushmenu-animate", !0);
        this.Jj.h(new yw(!0));
        return !0;
    };
    Aw.prototype.ha = function () {
        var a = this.element.parentElement;
        if (null === a) return !1;
        a.classList.toggle("pushmenu-animate", !1);
        this.Jj.h(new yw(!1));
        return !0;
    };
    Aw.prototype.La = function () {
        var a = this.element.parentElement;
        return null === a ? !1 : a.classList.contains("pushmenu-animate");
    };
    function yw(a, b) {
        this.vb = a;
        this.event = b;
    }
    var zw = new y("documentClick"),
        Bw = !1,
        Cw;
    v("touchmove", document, function () {
        Bw = !0;
    });
    v("touchstart", document, function () {
        Bw = !1;
    });
    v("click", document, function (a) {
        zw.h(a);
        void 0 !== Cw && (clearTimeout(Cw), (Cw = void 0));
    });
    (mb() || nb()) &&
        v(
            "touchend",
            document,
            function (a) {
                Bw ||
                    (Cw = window.setTimeout(function () {
                        Cw = void 0;
                        zw.h(a);
                    }, 200));
            },
            !1
        );
    function Dw(a, b) {
        b = void 0 === b ? !0 : b;
        ww.call(this, a, !1);
        var c = this;
        this.Dd = a;
        this.iP = b;
        this.CO = 4;
        this.tw = new Ew();
        this.G(this.tw);
        this.aT = gw.g(function () {
            c.La() && c.tf();
        });
        document.body.appendChild(this.element);
        this.ha();
    }
    q(Dw, ww);
    k = Dw.prototype;
    k.Ja = function (a, b) {
        if (!ww.prototype.Ja.call(this, void 0 === a ? "block" : a, b)) return !1;
        this.Dd.classList.add("active");
        this.tf();
        return !0;
    };
    k.ha = function (a) {
        if (!ww.prototype.ha.call(this, a)) return !1;
        this.Dd.classList.remove("active");
        return !0;
    };
    k.tf = function () {
        var a = ud(this.Dd),
            b = this.iP || (a.left + this.element.offsetWidth > document.documentElement.clientWidth && 0 < a.right - this.element.offsetWidth);
        this.MN(b);
        var c = vd(getComputedStyle(this.element).borderBottomWidth) - vd(getComputedStyle(this.Dd).borderLeftWidth);
        this.element.style.top = a.bottom + this.CO + "px";
        b
            ? ((this.element.style.left = ""), (a = document.documentElement.clientWidth - a.right - c), (this.element.style.right = a + "px"), (this.element.style.right = a - Fw(this.Dd, this.element) - c + "px"))
            : ((this.element.style.right = ""), (a = a.left - c), (this.element.style.left = a + "px"), (this.element.style.left = a + Gw(this.Dd, this.element) - c + "px"));
        a = this.tw;
        var d = this.Dd,
            e = getComputedStyle(this.element);
        a.element.style.borderLeftWidth = e.borderLeftWidth;
        a.element.style.borderLeftStyle = e.borderLeftStyle;
        a.element.style.borderLeftColor = e.borderLeftColor;
        a.element.style.borderRightWidth = e.borderLeftWidth;
        a.element.style.borderRightStyle = e.borderLeftStyle;
        a.element.style.borderRightColor = e.borderLeftColor;
        var f = vd(getComputedStyle(d).width) + 2 * c;
        a.element.style.width = f + "px";
        var g = this.element.offsetTop - ud(d).bottom + 1;
        a.element.style.height = g + 2 + "px";
        a.element.style.top = "-" + (g + 2) + "px";
        a.element.style.backgroundColor = e.backgroundColor;
        g = xc(e.borderWidth, e.borderLeftWidth);
        a.element.style.right = b ? "-" + g : "";
        a.element.style.left = b ? "" : "-" + g;
        a.element.style.zIndex = xc(e.zIndex, a.element.style.zIndex);
        a.element.style.width = b ? f - Gw(d, a.element) + c + "px" : f + Fw(d, a.element) + c + "px";
        this.element.style.zIndex = getComputedStyle(this.tw.element).zIndex;
    };
    k.dispose = function () {
        ww.prototype.dispose.call(this);
        this.aT.removeListener();
    };
    function Hw(a, b, c) {
        "" !== c && (a.element.style.borderRadius = (b ? c + " 0" : "0 " + c) + " " + c + " " + c);
    }
    k.MN = function (a) {
        this.element.style.position = "absolute";
        this.element.style.backgroundColor = td(this.Dd);
        "0px" !== Iw(this, a ? "borderRightWidth" : "borderLeftWidth") &&
            ((this.element.style.borderWidth = Iw(this, a ? "borderRightWidth" : "borderLeftWidth")),
            (this.element.style.borderStyle = Iw(this, a ? "borderRightStyle" : "borderLeftStyle")),
            (this.element.style.borderColor = Iw(this, a ? "borderRightColor" : "borderLeftColor")));
        Hw(this, a, Iw(this, a ? "borderTopRightRadius" : "borderTopLeftRadius"));
    };
    function Iw(a, b) {
        return xc(a.Dd.style[b], getComputedStyle(a.Dd)[b]);
    }
    function Ew() {
        w.call(this);
        Q(this.element, { position: "absolute", zIndex: 4 });
    }
    q(Ew, w);
    function Gw(a, b) {
        return a.getBoundingClientRect().left - b.getBoundingClientRect().left;
    }
    function Fw(a, b) {
        return a.getBoundingClientRect().right - b.getBoundingClientRect().right;
    }
    var Jw = new y("newFollowedOnline"),
        Kw = new y("onlineFollowedStorage"),
        Lw = new y("onlineFollowedStorage");
    function Mw() {
        if (Qa()) {
            var a = window.localStorage.getItem("onlineFollowedTab");
            null !== a && ((a = JSON.parse(a)), (a.timestamp = Date.now()), window.localStorage.setItem("onlineFollowedTab", JSON.stringify(a)));
        }
    }
    function Nw() {
        if (Qa()) {
            var a = window.localStorage.getItem("onlineFollowedTab");
            if (null !== a) {
                a = JSON.parse(a);
                var b = a.username,
                    c = a.onlineFollowedList,
                    d = { Wf: { Vf: c.onlineFollowed.online, total: c.onlineFollowed.total }, ui: [] };
                c = l(c.roomList);
                for (var e = c.next(); !e.done; e = c.next()) (e = e.value), d.ui.push({ j: e.room, image: e.image });
                c = a.seenRooms;
                e = [];
                for (var f = l(a.unseenRooms), g = f.next(); !g.done; g = f.next()) (g = g.value), e.push({ j: g.room, image: g.image });
                return { username: b, yM: d, uf: c, XG: e, Kn: a.flash, timestamp: a.timestamp };
            }
        }
    }
    function Ow() {
        Qa() &&
            v("storage", window, function (a) {
                if ("onlineFollowedTab" === a.key) {
                    var b = Nw();
                    void 0 !== b && Kw.h(b);
                }
                "followedDropdownClicked" === a.key && null !== a.newValue && ((b = Nw()), void 0 !== b && ((b.timestamp = JSON.parse(a.newValue).timestamp), (b.Kn = !1), (b.XG = []), Lw.h(b)));
            });
    }
    function Pw(a) {
        a = a.split(/[()/]+/);
        return 4 !== a.length ? { Vf: 0, total: 0 } : { Vf: parseInt(a[1]), total: parseInt(a[2]) };
    }
    function Qw() {
        function a(b) {
            return b.map(function (c) {
                return { j: c.room, image: c.image };
            });
        }
        return C("follow/api/online_followed_rooms/").then(function (b) {
            b = new H(b.responseText);
            return { Wf: { Vf: N(b, "online"), total: N(b, "total") }, ui: a(Pc(b, "online_rooms")) };
        });
    }
    function Rw() {
        this.first = !0;
        this.bj = [];
        this.Zn = [];
        this.uf = {};
        this.XJ = {};
        this.Wf = { Vf: 0, total: 0 };
    }
    Rw.prototype.Bc = function (a) {
        var b = this;
        this.Jb = a;
        Hr.g(function () {
            b.Jb.yd.ha();
        });
        G.g(function (d) {
            Sw(b.Jb.yd);
            Tw(b, [d.A.j]);
        });
        Uw.g(function () {
            b.Jb.yd.La() && Vw(b.Jb.yd);
        });
        gw.g(function () {
            b.Jb.yd.La() && (b.mJ || b.Jb.yd.ha());
        });
        this.Jb.yd.Jj.g(function () {
            b.Jb.yd.La() && Ww(b);
        });
        Sw(this.Jb.yd);
        !0 === window.showcam && "string" === typeof window.broadcaster && Tw(this, [window.broadcaster]);
        if (this.Jb.ub) Sw(this.Jb.yd);
        else {
            Ow();
            Kw.g(function (d) {
                b.xr(d, !1, b.Jb.username, b.Jb.xr);
            });
            Lw.g(function (d) {
                b.xr(d, !1, void 0, b.Jb.OQ);
            });
            window._followedTabUpdate = function (d) {
                Tw(b, [d]);
                Xw(b, !0, b.Jb.username, b.Jb.BA);
            };
            a = 0 === window.location.pathname.indexOf("/followed-cams/", 0) ? void 0 : Nw();
            void 0 !== a && a.username === this.Jb.username && 3e4 > Date.now() - a.timestamp
                ? ((this.first = !1), this.xr(a, !0, this.Jb.username, this.Jb.xr), Mw(), Xw(this, !0, this.Jb.username, this.Jb.BA))
                : Xw(this, !1, this.Jb.username, this.Jb.BA);
            var c = function (d) {
                clearInterval(b.JO);
                b.JO = window.setInterval(function () {
                    b.Jb.yd.La() || Xw(b, !1, b.Jb.username, b.Jb.BA);
                }, d);
            };
            c(1e4);
            window.setTimeout(function () {
                c(3e4);
            }, 6e5);
            window.setTimeout(function () {
                c(6e5);
            }, 18e5);
            window.setTimeout(function () {
                clearInterval(b.JO);
            }, 216e5);
            Jw.g(function () {
                b.Jb.PQ.Kn();
            });
        }
    };
    function Tw(a, b) {
        b = l(b);
        for (var c = b.next(); !c.done; c = b.next()) (c = c.value), (a.uf[c] = !0), (a.XJ[c] = !0);
    }
    Rw.prototype.xr = function (a, b, c, d) {
        b = void 0 === b ? !1 : b;
        a.timestamp <= this.iE || a.username !== c || ((this.Wf = a.yM.Wf), (this.uf = a.uf), (this.Zn = a.XG), this.update(a.yM, !0), void 0 !== d && d(a, b), (this.iE = a.timestamp));
    };
    Rw.prototype.update = function (a, b) {
        var c = this;
        b = void 0 === b ? !1 : b;
        var d = {},
            e = [],
            f = [];
        a = l(a.ui);
        for (var g = a.next(); !g.done; g = a.next()) (g = g.value), void 0 !== this.uf[g.j] || this.first ? f.push(g) : e.push(g), (this.uf[g.j] = !0), (d[g.j] = g);
        a = 0 < e.length;
        this.Zn = this.Zn.reduce(function (m, n) {
            void 0 === d[n.j] || c.XJ[n.j] || m.push(d[n.j]);
            return m;
        }, []);
        e = l(e);
        for (g = e.next(); !g.done; g = e.next()) this.Zn.push(g.value);
        e = {};
        this.bj = [];
        var h = l(this.Zn);
        for (g = h.next(); !g.done; g = h.next()) (g = g.value), (e[g.j] = !0), this.bj.push(new Yw(g, !0, this.bj.length + 1));
        f = l(f);
        for (g = f.next(); !g.done; g = f.next()) (g = g.value), void 0 === e[g.j] && this.bj.push(new Yw(g, !1, this.bj.length + 1));
        Sw(this.Jb.yd);
        (f = !this.first && a) && !b && Jw.h(void 0);
        this.first = !1;
        return { Kn: f, Ho: this.Zn };
    };
    function Xw(a, b, c, d) {
        ((void 0 === b || !b) && 1e4 > Date.now() - a.iE) ||
            Qw()
                .then(function (e) {
                    a.iE = Date.now();
                    a.Wf = e.Wf;
                    var f = a.update(e);
                    d(f);
                    var g = a.uf,
                        h = f.Kn,
                        m = f.Ho;
                    if (Qa()) {
                        f = { onlineFollowed: { online: e.Wf.Vf, total: e.Wf.total }, roomList: [] };
                        e = l(e.ui);
                        for (var n = e.next(); !n.done; n = e.next()) (n = n.value), f.roomList.push({ room: n.j, image: n.image });
                        e = [];
                        m = l(m);
                        for (n = m.next(); !n.done; n = m.next()) (n = n.value), e.push({ room: n.j, image: n.image });
                        g = { username: c, onlineFollowedList: f, seenRooms: g, unseenRooms: e, flash: h, timestamp: Date.now() };
                        window.localStorage.setItem("onlineFollowedTab", JSON.stringify(g));
                    }
                })
                .catch(function () {});
    }
    function Ww(a) {
        a.mJ = !0;
        window.setTimeout(function () {
            a.mJ = !1;
        }, 300);
    }
    var Zw = new Rw();
    function $w(a) {
        switch (a) {
            case "":
            case "m":
            case "f":
            case "c":
            case "t":
            case "s":
                return a;
            default:
                return "";
        }
    }
    var ax = new Map([
        ["", ""],
        ["m", yh],
        ["f", vh],
        ["c", Dh],
        ["t", zh],
        ["s", zh],
    ]);
    function bx(a) {
        var b;
        return a.startsWith("t") ? ax.t : null !== (b = ax.get($w(a))) && void 0 !== b ? b : "";
    }
    var cx = new Map();
    new Map([
        ["", ""],
        ["m", "male"],
        ["f", "female"],
        ["c", "couple"],
        ["t", "trans"],
        ["s", "trans"],
    ]).forEach(function (a, b) {
        return cx.set(a, b);
    });
    cx.set("trans", "t");
    function dx(a) {
        var b = cx.get(a);
        if (void 0 !== b) return b;
        if ("followed" === a) return "o";
        r("Unknown user category " + a, "userCategoryConversion.ts", "common");
        return "";
    }
    function ex() {
        var a,
            b = new URLSearchParams(window.location.search).get("g");
        if (null !== b) return $w(b.split(",")[0]);
        b = new URLSearchParams(window.location.search).get("gender");
        if (null !== b) return $w(b.split(",")[0]);
        b = window.location.pathname.split("/").at(window.location.pathname.endsWith("/") ? -2 : -1);
        return void 0 === b ? "" : b.endsWith("-cams") ? (null !== (a = cx.get(b.substring(0, b.indexOf("-cams")))) && void 0 !== a ? a : "") : cx.has(b) ? cx.get(b) : $w(b);
    }
    var Uw = new y("refreshRoomImages"),
        fx = new Vd("DfAnRmTm").active,
        gx = { fontSize: "13px", fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif", width: "auto", height: "auto", position: "absolute", display: "none", overflow: "", cursor: "default", top: "0px", left: "0px", zIndex: 5 },
        hx = { width: "314px", maxHeight: "450px", overflowY: "auto", overflowX: "hidden", position: "relative", boxSizing: "border-box", padding: "8px", borderRadius: "4px 4px 4px 4px", WebkitBorderRadius: "4px 4px 4px 4px" },
        ix = { cssFloat: "right" },
        jx = { margin: "5px 0" };
    function kx(a, b, c) {
        Dw.call(this, a, !1);
        this.ub = b;
        this.ZT = c;
        this.og = Zw;
        this.CO = 5;
        a = new Xd(["SmplCrd3T1", "SmplCrd3T2", "SmplCrd3T3", "SmplCrd3T4"], "RmCrdOvrhl");
        a.active && ((a = a.lp), void 0 !== a && ((a = parseInt(a.replace("SmplCrd3T", ""))), this.element.classList.add("simple_" + a)));
    }
    q(kx, Dw);
    k = kx.prototype;
    k.MN = function (a) {
        Hw(this, a, getComputedStyle(this.element).borderBottomRightRadius);
    };
    k.es = function () {
        var a = this;
        return V(
            "div",
            { className: "followedDropdown" },
            V("div", {
                className: "followedContainer",
                style: hx,
                colorClass: ["tabActiveBgColor", "tabBorderNoHover"],
                ref: function (b) {
                    a.Yh = b;
                },
            })
        );
    };
    k.ia = function (a) {
        Dw.prototype.ia.call(this, a);
        Q(this.element, gx);
    };
    function lx(a) {
        if (void 0 !== a.VJ) {
            var b = a.og.Wf;
            a.VJ.textContent = Ye(b.Vf, b.total);
        }
    }
    function Sw(a) {
        if (!a.La()) {
            for (; null !== a.Yh.firstChild; ) a.Yh.removeChild(a.Yh.firstChild);
            if (!a.ub) {
                var b,
                    c = a.og.Wf,
                    d = 1 < a.og.bj.length;
                a.Yh.appendChild(
                    V(
                        "div",
                        { style: { margin: "5px 3px" } },
                        V(
                            "a",
                            {
                                href: mx(),
                                style: { height: "auto", width: "auto", border: "none", borderRadius: "0px", textDecoration: "none", cursor: "pointer", cssFloat: "none", padding: "0px" },
                                "data-floatingnav": "",
                                colorClass: ["tabActiveBgColor", "hrefColor"],
                                ref: function (m) {
                                    b = m;
                                },
                                onMouseEnter: function () {
                                    b.style.textDecoration = "underline";
                                    O(b, "tabActiveColor");
                                    P(b, "hrefColor");
                                },
                                onMouseLeave: function () {
                                    b.style.textDecoration = "none";
                                    O(b, "hrefColor");
                                    P(b, "tabActiveColor");
                                },
                                onClick: function () {
                                    F("FollowedDropdownSeeAll");
                                },
                            },
                            Aj
                        ),
                        a.ZT &&
                            V(
                                "div",
                                {
                                    style: d ? ix : jx,
                                    className: "followedCount",
                                    ref: function (m) {
                                        a.VJ = m;
                                    },
                                },
                                Ye(c.Vf, c.total)
                            )
                    )
                );
            }
            a.Yh.style.width = "auto";
            var e = V("div", { style: { display: "table" } }),
                f = V("div", null),
                g = 0;
            a.og.bj.forEach(function (m) {
                0 === g % 2 && ((f = V("div", { style: { display: "table-row" } })), e.appendChild(f));
                var n = V("div", { style: { display: "table-cell" } });
                n.appendChild(m.wB);
                f.appendChild(n);
                g += 1;
            });
            a.Yh.appendChild(e);
            if (0 === a.og.bj.length) {
                c = V("div", { colorClass: "textColor", style: { margin: "5px 3px 5px 3px", fontSize: "12px", fontFamily: "UbuntuRegular" } });
                if (a.ub) {
                    d = function (m) {
                        var n = V(
                            "a",
                            {
                                href: m.href,
                                style: { height: "auto", width: "auto", border: "none", borderRadius: "0px", textDecoration: "none", cursor: "pointer", cssFloat: "none", padding: "0px" },
                                colorClass: ["tabActiveBgColor", "hrefColor"],
                                onMouseEnter: function () {
                                    n.style.textDecoration = "underline";
                                },
                                onMouseLeave: function () {
                                    n.style.textDecoration = "none";
                                },
                                onClick: void 0 !== m.onClick ? m.onClick : void 0,
                            },
                            m.children
                        );
                        return n;
                    };
                    var h = "/auth/login/" === window.location.pathname ? "/" : window.location.pathname;
                    c.appendChild(
                        V(
                            qr,
                            null,
                            V(d, { href: "/accounts/register/?src=followed_tab&next=" + h }, Hf),
                            V("span", null, " " + Di + " "),
                            V(
                                d,
                                {
                                    href: "/auth/login/?next=" + h,
                                    onClick: function (m) {
                                        m.metaKey || m.ctrlKey || (m.preventDefault(), a.ha(), Su({}));
                                    },
                                },
                                Gf
                            )
                        )
                    );
                    c.appendChild(V("span", null, Bj));
                } else c.appendChild(V("span", null, Cj));
                a.Yh.appendChild(c);
                a.Yh.style.width = "265px";
            }
        }
    }
    function Vw(a) {
        a = l(a.og.bj);
        for (var b = a.next(); !b.done; b = a.next()) {
            var c = void 0;
            b = b.value;
            b.bG();
            "" !== b.j.image && (null === (c = b.Ix) || void 0 === c ? void 0 : jr(c, 0));
        }
    }
    k.Ja = function () {
        if (!Dw.prototype.Ja.call(this)) return !1;
        Vw(this);
        this.Yh.scrollTop = 0;
        this.og.Zn = [];
        var a = ud(this.element),
            b = Math.max(Uv(), vd(document.body.style.minWidth));
        a.right > b && ((this.element.style.width = this.element.offsetWidth - (a.right - b) - 4 + "px"), (this.Yh.style.overflowX = "auto"));
        return !0;
    };
    k.ha = function (a) {
        if ((void 0 !== a && (a.metaKey || a.ctrlKey)) || !Dw.prototype.ha.call(this)) return !1;
        a = l(this.og.bj);
        for (var b = a.next(); !b.done; b = a.next()) (b = b.value), (b.GK = !1), O(b.a, "notHighlighted"), P(b.a, "isHighlighted");
        this.element.style.width = "auto";
        this.Yh.style.overflowX = "hidden";
        Sw(this);
        return !0;
    };
    k.tf = function () {
        Dw.prototype.tf.call(this);
        this.tw.element.style.display = "none";
    };
    function mx() {
        var a = ex();
        return new Vd("GdrChkbx6").active ? "/followed-cams/" : "/followed-cams/" + ("" !== a ? "?g=" + a : "");
    }
    function Yw(a, b, c) {
        var d = this;
        this.j = a;
        this.GK = b;
        this.username = "";
        this.username = a.j;
        this.a = V(
            "a",
            {
                className: "roomElementAnchor",
                colorClass: ["tabInactiveColor", this.GK ? "isHighlighted" : "notHighlighted"],
                style: { width: "180px", height: "126px", borderRadius: "4px", border: "none", padding: "0px", margin: "0px", display: "block", cursor: "pointer", overflow: "hidden", textOverflow: "ellipsis", textDecoration: "none" },
                "data-room": this.j.j,
                href: "/" + this.j.j + "/",
                onClick: function () {
                    F("FollowedDropdownVisit");
                },
            },
            V("img", {
                alt: "",
                src: "" !== this.j.image ? this.j.image : "https://static-assets.highwebmedia.com/images/no_thumbnail_1_wide.jpg",
                width: 180,
                height: 101,
                style: { borderRadius: "3px 3px 0px 0px" },
                ref: function (e) {
                    d.qk = e;
                },
            }),
            V("span", { style: { padding: "5px" } }, this.j.j)
        );
        this.wB = V("div", { className: "roomElement", style: { display: "inline-block", width: "180px", height: "126px", borderRadius: "4px", margin: "3px", cursor: "pointer" } }, this.a);
        Ab(["click", "mousedown", "touchstart"], this.a, function () {
            nx(d.username, "ft", c);
        });
    }
    Yw.prototype.bG = function () {
        var a = this;
        "" !== this.j.image &&
            void 0 === this.Ix &&
            ((this.Ix = new hr(this.username, this.qk)),
            v("mouseenter", this.wB, function () {
                var b;
                ox && !fx && (null === (b = a.Ix) || void 0 === b ? void 0 : b.To());
            }),
            v("mouseleave", this.wB, function () {
                var b;
                ox && !fx && (null === (b = a.Ix) || void 0 === b ? void 0 : kr(b, !1));
            }));
    };
    var px = new Vd("DfAnRmTm").active;
    function ds(a) {
        switch (a) {
            case "df":
            case "rc":
            case "ft":
            case "fo":
            case "ff":
            case "ml":
            case "mr":
            case "tp":
            case "pr":
            case "fn":
            case "bs":
            case "nc":
            case "sc":
            case "dc":
            case "tr":
            case "sm":
                return a;
            default:
                return "un";
        }
    }
    function qx(a) {
        var b = document.cookie;
        if (!(4096 > b.length + a.length)) {
            var c = Object.fromEntries(
                b.split(";").map(function (d) {
                    var e = l(d.trim().split("="));
                    d = e.next().value;
                    e = e.next().value;
                    return ["cookielen-" + d, e.length];
                })
            );
            F("BroadcasterSourceOversizedCookie", Object.assign({ cookie_length: b.length, data_length: a.length }, c));
        }
    }
    function nx(a, b, c, d) {
        b = JSON.stringify(
            {
                source: b,
                index: c,
                source_index: null === d || void 0 === d ? void 0 : d.sourceIndex,
                hashtag: null === d || void 0 === d ? void 0 : d.vx,
                source_info: null === d || void 0 === d ? void 0 : d.Xk,
                row_num: null === d || void 0 === d ? void 0 : d.sY,
                col_num: null === d || void 0 === d ? void 0 : d.EV,
                room_list_id: null === d || void 0 === d ? void 0 : d.mT,
            },
            function (e, f) {
                return "" === f ? void 0 : null !== f && void 0 !== f ? f : void 0;
            }
        );
        qx(b);
        cc("tbu_" + a, b, 30);
    }
    function rx() {
        var a = this;
        this.nM = [];
        this.Wo = new Map();
        px &&
            fr.g(function (b) {
                sx(a, b);
            });
    }
    var tx, ux, vx;
    function wx() {
        for (var a = [], b = l(document.querySelectorAll(".endless_page_template, .MoreRooms")), c = b.next(); !c.done; c = b.next()) a.push(c.value);
        return a;
    }
    function xx(a, b) {
        a.nM.push(b);
    }
    rx.prototype.onSuccess = function () {
        for (var a = l(this.nM), b = a.next(); !b.done; b = a.next()) (b = b.value), b();
    };
    function yx() {
        void 0 === tx && (tx = new rx());
        return tx;
    }
    function zx(a) {
        a = a.getAttribute("data-href");
        if ("skip" !== a) {
            a = "string" !== typeof a || 0 === a.length ? window.location.href.replace("" === location.hash ? "#" : location.hash, "") : "/" === a[0] ? a.substr(1) : a;
            var b = "?";
            -1 !== a.indexOf("?") && (b = "&");
            var c = document.getElementById("filter_search_form");
            c = null !== c ? de(c).Bj() : "";
            return a + b + c;
        }
    }
    function Ax(a) {
        clearTimeout(ux);
        0 < a &&
            (ux = window.setTimeout(function () {
                Bx(yx());
                Uw.h(void 0);
                Ax(a);
            }, 1e3 * a));
    }
    function Cx(a) {
        clearTimeout(vx);
        0 < a &&
            (vx = window.setTimeout(function () {
                Dx();
                Cx(a);
            }, 1e3 * a));
    }
    function Bx(a, b) {
        for (var c = l(a.Wo.values()), d = c.next(); !d.done; d = c.next()) kr(d.value, !1);
        a.Wo.clear();
        d = wx();
        c = {};
        d = l(d);
        for (var e = d.next(); !e.done; c = { zv: c.zv }, e = d.next())
            (c.zv = e.value),
                (e = zx(c.zv)),
                void 0 !== e
                    ? C(e)
                          .then(
                              (function (f) {
                                  return function (g) {
                                      f.zv.innerHTML = g.responseText;
                                      a.onSuccess();
                                      void 0 !== b && b();
                                  };
                              })(c)
                          )
                          .catch(function () {})
                    : (a.onSuccess(), void 0 !== b && b());
    }
    function Dx() {
        yx();
        for (var a = l(wx()), b = a.next(); !b.done; b = a.next())
            b.value.querySelectorAll("ul > li > a").forEach(function (c) {
                if (!new Vd("HomePgAds").active || !c.classList.contains("promo_wrapper_link")) {
                    var d = c.querySelector("img");
                    c = c.dataset.room;
                    if (null !== d && void 0 !== c) {
                        var e = new Image(d.width, d.height);
                        e.onload = function () {
                            d.src = e.src;
                        };
                        e.src = xe.bE + "riw/" + c + ".jpg?" + Math.floor(new Date().getTime() / 3e4);
                    }
                }
            });
    }
    function sx(a, b) {
        a.Wo.forEach(function (c, d) {
            d !== b && (kr(c, !1), (c.Fp = 0));
        });
    }
    function Ex(a) {
        xx(yx(), a);
    }
    function Fx(a) {
        Bx(yx(), a);
    }
    function Gx(a) {
        Ax(a);
    }
    function Hx() {
        clearTimeout(ux);
    }
    function Ix(a, b, c, d, e, f) {
        nx(a, ds(b), c, { sourceIndex: d, vx: e, mT: f });
    }
    var ox = !1;
    function Jx(a) {
        ox = a;
    }
    function Kx(a, b, c, d) {
        if ((void 0 === d ? ox : d) && null !== b) {
            d = yx();
            var e = !0;
            e = void 0 === e ? !0 : e;
            var f = d.Wo.get(a);
            void 0 === f && ((f = new hr(a, b, { To: e, aH: void 0 === c ? !A.current.nb : c, yG: px ? 3e3 : 0 })), d.Wo.set(a, f));
            f.To();
        }
    }
    function Lx(a, b) {
        if (void 0 === b ? ox : b) (b = yx().Wo.get(a)), void 0 !== b && (kr(b, !1), yx().Wo.delete(a));
    }
    var Mx = { buildTooltip: nw };
    function Nx(a) {
        if (!Zd("GdrChkbx6")) {
            var b = ex();
            "" !== b &&
                a.querySelectorAll(A.current.nb ? ".subject > a" : ".subject > li > a").forEach(function (c) {
                    c.href = c.href.concat(b + "/");
                });
        }
    }
    function Kv(a) {
        switch (a) {
            case "orga":
                return 0;
            case "orgb":
                return 1;
            case "org":
                return 2;
            case "none":
                return 3;
            default:
                return 1;
        }
    }
    function Ox(a) {
        if (["0", "300", "-1"].includes(a)) return a;
        r("roomDossier - invalid C2C notification limit", "roomDossier.ts", "common");
        return "300";
    }
    function Px(a) {
        switch (a) {
            case "away":
                return "away";
            case "private":
                return "privatenotwatching";
            case "private_watching":
                return "privatewatching";
            case "private_spying":
                return "privatespying";
            case "private_requesting":
                return "privaterequesting";
            case "public":
                return "public";
            case "hidden":
                return "hidden";
            case "hidden_watching":
                return "hiddenwatching";
            case "offline":
                return "offline";
            case "password protected":
                return "passwordprotected";
            default:
                return r("unknown room status -- " + a, "roomDossier.ts", "common"), "unknown";
        }
    }
    var Qx;
    function Rx(a) {
        var b = [];
        if ("" !== a)
            try {
                JSON.parse(a).forEach(function (c) {
                    b.push({ fB: c[0], IH: c[1] });
                });
            } catch (c) {
                r("Error parsing apps " + c.toString(), "roomDossier.ts", "common");
            }
        return b;
    }
    function Sx(a) {
        var b = [];
        if ("" !== a)
            try {
                b = JSON.parse(a).map(function (c) {
                    return { text: c.text, href: c.href };
                });
            } catch (c) {
                r("Error parsing anchors " + c.toString(), "roomDossier.ts", "common");
            }
        return b;
    }
    function Tx(a) {
        var b = Yc(a, "chat_settings"),
            c = Yc(a, "satisfaction_score"),
            d = L(a, "wschat_host"),
            e = L(a, "broadcaster_username"),
            f = L(a, "room_uid"),
            g = K(a, "viewer_uid"),
            h = L(a, "room_pass"),
            m = L(a, "chat_rules"),
            n = L(a, "room_title"),
            p = Px(L(a, "room_status")),
            u = M(a, "is_supporter"),
            x = M(a, "needs_supporter_to_pm"),
            D = L(a, "broadcaster_gender"),
            J = L(a, "viewer_username"),
            I = L(a, "chat_username"),
            ja = encodeURI(L(a, "edge_auth")),
            Yb = L(a, "chat_password"),
            Ta = L(a, "viewer_gender"),
            oa = L(a, "exploring_hashtag"),
            Nb = ds(L(a, "source_name", !1)),
            db = L(a, "hls_source"),
            Yf = M(a, "is_widescreen"),
            Ee = Rx(L(a, "apps_running")),
            KU = M(a, "allow_private_shows"),
            LU = N(a, "private_show_price"),
            MU = N(a, "private_min_minutes"),
            NU = M(a, "allow_show_recordings"),
            OU = M(a, "allow_anonymous_tipping"),
            PU = N(a, "spy_private_show_price"),
            QU = Sc(a, "private_show_id"),
            RU = M(a, "low_satisfaction_score"),
            SU = M(a, "is_age_verified"),
            TU = Tc(a, "age"),
            UU = L(a, "hidden_message"),
            VU = M(a, "following"),
            WU = L(a, "follow_notification_frequency", !1),
            XU = M(a, "is_moderator"),
            YU = M(a, "broadcaster_on_new_chat"),
            ZU = N(a, "token_balance"),
            $U = L(a, "server_name"),
            aV = N(a, "num_followed"),
            bV = N(a, "num_followed_online"),
            cV = M(a, "has_studio"),
            dV = M(a, "is_mobile"),
            eV = Vc(a, "ignored_emoticons"),
            fV = M(a, "hide_satisfaction_score"),
            gV = N(a, "tips_in_past_24_hours"),
            hV = Tc(a, "last_vote_in_past_24_hours"),
            iV = M(a, "last_vote_in_past_90_days_down"),
            Zf = Vc(a, "dismissible_messages"),
            eB = [];
        Zf = l(Zf);
        for (var Id = Zf.next(); !Id.done; Id = Zf.next()) (Id = Id.value), eB.push({ ht: Id.id, VR: Id.message_html });
        Zf = M(a, "show_mobile_site_banner_link");
        Id = N(a, "num_viewers");
        var jV = M(a, "fan_club_is_member"),
            kV = M(a, "performer_has_fanclub"),
            lV = M(a, "fan_club_paid_with_tokens"),
            mV = M(a, "is_testbed"),
            nV = M(a, "offline_room_chat_pm_enabled", !1);
        c = { hl: N(c, "up_votes", !1), ek: N(c, "down_votes", !1), rf: N(c, "percent", !1) };
        var oV = M(a, "tfa_enabled");
        b = {
            Zw: L(b, "font_color"),
            fontFamily: L(b, "font_family"),
            fontSize: L(b, "font_size"),
            $d: M(b, "show_emoticons"),
            Fn: L(b, "emoticon_autocomplete_delay"),
            uD: L(b, "highest_token_color"),
            kr: L(b, "sort_users_key"),
            xE: N(b, "mod_expire"),
            vm: Kv(L(b, "room_entry_for")),
            wm: Kv(L(b, "room_leave_for")),
            sB: Ox(L(b, "c2c_notify_limit")),
            pG: L(b, "silence_broadcasters"),
            rR: L(b, "ignored_users"),
            aB: L(b, "allowed_chat"),
            Tg: parseInt(L(b, "v_tip_vol")),
            CP: parseInt(L(b, "b_tip_vol")),
        };
        var pV = L(a, "asp_auth_url"),
            qV = L(a, "browser_id");
        var $f = Wc(a, "quality");
        $f = void 0 !== $f ? { quality: L($f, "quality"), rate: N($f, "rate"), stopped: M($f, "stopped") } : void 0;
        d = {
            host: d,
            j: e,
            lb: f,
            wv: g,
            NF: h,
            BB: m,
            Tb: n,
            sa: p,
            wk: u,
            tj: x,
            zu: D,
            userName: J,
            vp: I,
            CQ: ja,
            TO: Yb,
            fV: Ta,
            kd: oa,
            $c: Nb,
            et: db,
            Re: Yf,
            op: Ee,
            ge: KU,
            Xd: LU,
            pi: MU,
            Pi: NU,
            FH: OU,
            vf: PU,
            Uc: QU,
            sx: RU,
            tb: SU,
            fe: TU,
            On: UU,
            ij: VU,
            eh: WU,
            nd: XU,
            BP: YU,
            ob: ZU,
            KT: $U,
            lS: aV,
            mS: bV,
            jR: cV,
            nb: dV,
            lh: eV,
            rD: fV,
            $e: gV,
            jE: hV,
            yL: iV,
            us: eB,
            $N: Zf,
            QE: Id,
            pj: jV,
            Sl: kV,
            aF: lV,
            Tx: mV,
            Bs: nV,
            BY: [],
            yj: c,
            tO: oV,
            Da: b,
            nP: pV,
            tl: qV,
            quality: $f,
            vJ: L(a, "edge_region"),
        };
        e = K(a, "staff_links");
        void 0 !== e && (d.Vz = { sG: Sx(e), pP: M(a, "auto_load_admin_info"), UM: K(a, "previous_usernames"), iJ: K(a, "deletion_admin_notice") });
        e = Wc(a, "user_colors");
        void 0 !== e && ((e = void 0 !== e ? { Pe: M(e, "has_tokens"), yf: M(e, "tipped_recently"), nA: M(e, "tipped_alot_recently"), zf: M(e, "tipped_tons_recently") } : void 0), (d.jl = e));
        ad(a);
        return d;
    }
    function Ux(a) {
        var b = new H(a);
        return new Promise(function (c, d) {
            400 <= N(b, "status", !1) ? d("Bad response from server: " + a) : c(Tx(b));
        });
    }
    function Vx(a) {
        void 0 !== Qx && (Qx.abort(), (Qx = void 0));
        return new Promise(function (b, c) {
            var d = lc("api/chatvideocontext/" + a + "/");
            Qx = d[0];
            d[1]
                .then(function (e) {
                    b(Ux(e.responseText));
                })
                .catch(function (e) {
                    404 === e.xhr.status ? (R("HTTP 404 - Page Not Found\n\nIt's probably just a broken link, or perhaps a cancelled broadcaster."), e.xhr.abort()) : c(e);
                });
        });
    }
    function Wx(a, b) {
        var c = !0;
        "public" !== b.Lc && "privaterequesting" === a.l.status && "privaterequesting" === b.Sa && (c = !1);
        return c;
    }
    function Xx(a, b) {
        return Vx(a.l.j()).then(function (c) {
            a.A = c;
            a.l.status = c.sa;
            b.Sa = c.sa;
        });
    }
    var Yx = window.Hls;
    function Zx(a) {
        a = void 0 === a ? {} : a;
        var b = $x().tl;
        if (void 0 !== b && ("a" === b.charAt(b.length - 1) || !1 !== A.current.xT)) {
            b = B.getState().quality;
            if (void 0 !== b) {
                if (("playerError" === a.eventName || "playerQuality" === a.eventName) && !0 === b.stopped) return;
                a = Object.assign(Object.assign({}, a), { fpsquality: b.quality, rate: b.rate, stopped: b.stopped, tabHidden: document.hidden, videoSessionID: $x().value });
            }
            a.region = B.getState().vJ;
            a.isiPad = mb();
            delete a.tid;
            if (!0 === a.badFrames) {
                b = {};
                for (var c in a) b["attributes." + c] = a[c];
                E("api/ts/chat/send-quality/", b);
            } else F("VideoMetric", a, !0);
        }
    }
    function ay() {
        return gb() ? window.performance.now() : new Date().getTime();
    }
    function by() {
        var a = window.browserId;
        void 0 !== a ? (this.tl = a) : ((a = B.getState()), "" === a.j && void 0 !== window.initialRoomDossier && (a = Tx(new H(window.initialRoomDossier))), (this.tl = a.tl), (Dc = a.j));
    }
    var cy;
    by.prototype.clear = function () {
        this.SA = void 0;
    };
    function $x() {
        void 0 === cy && (cy = new by());
        return cy;
    }
    da.Object.defineProperties(by.prototype, {
        value: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                void 0 === this.SA && (this.SA = this.tl + ":" + new Date().getTime());
                return this.SA;
            },
        },
    });
    function dy() {
        gb() && (this.start = ay());
    }
    dy.prototype.send = function (a, b, c) {
        if (gb() && void 0 !== this.start) {
            var d = ay() - this.start - b,
                e = (this.start = ay());
            a = { eventName: "autoPlayDuration", autoPlayDuration: e / 1e3, autoPlayDurationMS: e, autoPlayDurationNoDelay: d / 1e3, autoPlayDurationNoDelayMS: d, autoPlayable: a };
            0 !== b && ((a.autoPlayHiddenDelay = b / 1e3), (a.autoPlayHiddenDelayMS = b));
            void 0 !== c && null !== c && (a.autoPlayError = c);
            Zx(a);
        }
    };
    function ey(a) {
        var b = this;
        this.MF = this.rH = !1;
        this.QF = this.nz = 0;
        this.vi = function (c) {
            c = void 0 === c ? {} : c;
            Zx(Object.assign({ playerType: b.CS, roomDuration: b.nz, roomsVisited: b.QF, roomStatus: b.sa }, c));
        };
        this.IT = function () {
            var c = { eventName: "playerCreated" },
                d = Bc(window.location.search).player;
            void 0 !== d && (c.playerOverride = d);
            b.vi(c);
            b.mQ = ay();
        };
        this.rM = function (c) {
            b.pz = ay();
            $x().tl = c.A.tl;
            b.J = c.A.j;
        };
        this.sM = function () {
            b.rH || (b.xz(), $x().clear());
        };
        this.no = function () {
            b.rH || (b.xz(), (b.rH = !0), b.kz());
        };
        this.CS = a;
        this.IT();
    }
    function fy(a) {
        a.kz();
        G.g(a.rM);
        Kc.g(a.sM);
        v("pagehide", window, a.no);
        v("beforeunload", window, a.no);
        v("unload", window, a.no);
        a.MF = !0;
    }
    ey.prototype.xz = function () {
        if (void 0 !== this.pz && gb()) {
            this.PF = ay();
            var a = this.PF - this.pz;
            this.vi({ room_user: this.J, eventName: "viewerDuration", viewerDuration: a / 1e3, viewerDurationMS: a });
            return a;
        }
    };
    ey.prototype.kz = function () {
        this.MF && (Bb("pagehide", window, this.no), Bb("beforeunload", window, this.no), Bb("unload", window, this.no), G.removeListener(this.rM), Kc.removeListener(this.sM), (this.MF = !1));
    };
    function gy(a) {
        ey.call(this, a);
        var b = this;
        this.Cx = this.LK = this.CD = this.Gx = !1;
        this.tL = {};
        this.GT = function () {
            if (!b.CD) {
                var c = { eventName: "videoPlaying", isAjax: !1, bitrate: b.Yp },
                    d = b.oQ();
                void 0 !== d && b.vi({ eventName: "broadcastDelay", broadcastDelayMS: d, broadcastDelay: d / 1e3 });
                d = ay();
                if (void 0 === b.BD) t("Playing metric has triggered but htmlMediaLoadStartTime is undefined...skipping", "videoMetrics.ts", "player");
                else {
                    var e = d - b.BD;
                    c.timeSinceMediaLoadStart = e / 1e3;
                    c.timeSinceMediaLoadStartMS = e;
                }
                void 0 !== b.zD && ((e = d - b.zD), (c.timeSinceMediaAttaching = e / 1e3), (c.timeSinceMediaAttachingMS = e));
                if (b.LK) {
                    if (void 0 === b.pz) {
                        t("Playing metric is for AJAX reload but roomLoadedTime is undefined...skipping", "videoMetrics.ts", "player");
                        return;
                    }
                    e = d - b.pz;
                    c.timeSinceLoadAjax = e / 1e3;
                    c.timeSinceLoadAjaxMS = e;
                    c.isAjax = !0;
                    void 0 === b.PF ? t("Playing metric is for AJAX reload but roomUnloadedTime is undefined", "videoMetrics.ts", "player") : ((e = d - b.PF), (c.timeSinceUnloadAjax = e / 1e3), (c.timeSinceUnloadAjaxMS = e));
                } else (d -= b.mQ), (c.timeSincePlayerCreated = d / 1e3), (c.timeSincePlayerCreatedMS = d);
                b.vi(c);
                b.CD = !0;
                b.LK = !0;
            }
        };
        this.FT = function () {
            var c = b.Nb instanceof HTMLMediaElement ? b.Nb.error : b.Nb.error_;
            void 0 !== c &&
                null !== c &&
                b.vi({ eventName: "playerError", errorCode: c.code, errorMessage: c.message, errorSource: "HTMLMediaElement", errorReadyState: b.Nb.readyState, errorNetworkState: b.Nb.networkState, bitrate: b.Yp });
        };
        this.oh = function (c) {
            b.Gx &&
                ("playing" === c.type
                    ? b.GT()
                    : "loadstart" === c.type
                    ? (b.BD = ay())
                    : "error" === c.type
                    ? b.FT()
                    : "stalled" === c.type
                    ? ((c = c.target), void 0 !== c && null !== c && b.vi({ eventName: "playerStalled", stalledReadyState: c.readyState, stalledNetworkState: c.networkState, bitrate: b.Yp }))
                    : t("Received unknown HTMLMediaElement event: ", "videoMetrics.ts", "player", c));
        };
        this.xP = function (c) {
            b.hN();
            b.nk = c;
            b.nk.on(Yx.Events.ERROR, b.Gk);
            b.nk.on(Yx.Events.FRAG_CHANGED, b.Gk);
            gb() && (b.nk.on(Yx.Events.LEVEL_SWITCHING, b.Gk), b.nk.on(Yx.Events.LEVEL_SWITCHED, b.Gk), b.nk.on(Yx.Events.MEDIA_ATTACHING, b.Gk));
            b.Cx = !0;
        };
        this.gP = function (c) {
            var d = c.level;
            if (void 0 === d) t("Received Hls.Events.LEVEL_SWITCHING without a level: ", "videoMetrics.ts", "player", c);
            else {
                for (var e = l(["bitrate", "height", "width"]), f = e.next(); !f.done; f = e.next())
                    if (((f = f.value), isNaN(c[f]))) {
                        t("Level " + f + " is not a number: " + c[f] + "...skipping", "videoMetrics.ts", "player");
                        return;
                    }
                b.IK[d] = c;
                b.JK.unshift({ level: d, ts: ay() });
            }
        };
        this.MT = function (c) {
            var d = c.level;
            if (void 0 === d) t("Received Hls.Events.LEVEL_SWITCHED without a level: ", "videoMetrics.ts", "player", c);
            else {
                var e = b.IK[d];
                if (void 0 === e) t("Received unknown Hls.Events.LEVEL_SWITCHED level: ", "videoMetrics.ts", "player", c);
                else {
                    c = l(b.JK);
                    for (var f = c.next(); !f.done; f = c.next())
                        if (((f = f.value), f.level === d)) {
                            d = f.ts;
                            d = ay() - d;
                            b.Dx.push(d);
                            break;
                        }
                    if (void 0 === b.lj || e.bitrate > b.lj.bitrate) b.lj = e;
                    b.Yp = e.bitrate;
                }
            }
        };
        this.oQ = function () {
            if (void 0 !== b.Ex) {
                var c = b.Nb.currentTime - b.Ex.start;
                if (!(0 > c || ((c = new Date().getTime() - b.Ex.programDateTime + 1e3 * c), 0 > c || 3e5 < c))) return c;
            }
        };
        this.Gk = function (c, d) {
            if (b.Cx)
                if (c === Yx.Events.LEVEL_SWITCHING) b.gP(d);
                else if (c === Yx.Events.LEVEL_SWITCHED) b.MT(d);
                else if (c === Yx.Events.FRAG_CHANGED) b.Ex = d.frag;
                else if (c === Yx.Events.MEDIA_ATTACHING) b.zD = ay();
                else if (c === Yx.Events.ERROR) {
                    if (
                        ((c = b.Nb.tech().el()),
                        (d = { eventName: "playerError", errorCode: d.type, errorMessage: d.details, errorSource: "hls.js", errorReadyState: c.readyState, errorNetworkState: c.networkState, bitrate: b.Yp, quality: b.nR }),
                        b.tL !== d || (void 0 !== b.em && 1e3 < Date.now() - b.em))
                    )
                        b.vi(d), (b.tL = d), (b.em = Date.now());
                } else t("Received unknown Hls.Event: ", "videoMetrics.ts", "player", c);
        };
        this.hN = function () {
            b.Cx && (b.nk.off(Yx.Events.ERROR, b.Gk), b.nk.off(Yx.Events.FRAG_CHANGED, b.Gk), gb() && (b.nk.off(Yx.Events.LEVEL_SWITCHING, b.Gk), b.nk.off(Yx.Events.LEVEL_SWITCHED, b.Gk)), (b.Cx = !1));
        };
        this.iN = function () {
            b.Gx &&
                (b.Nb instanceof HTMLMediaElement
                    ? (gb() && (Bb("playing", b.Nb, b.oh), Bb("loadstart", b.Nb, b.oh)), Bb("error", b.Nb, b.oh), Bb("stalled", b.Nb, b.oh))
                    : (gb() && (b.Nb.off("playing", b.oh), b.Nb.off("loadstart", b.oh)), b.Nb.off("error", b.oh), b.Nb.off("stalled", b.oh)),
                (b.Gx = !1));
        };
        this.reset = function () {
            b.CD = !1;
            b.IK = new Map();
            b.Yp = void 0;
            b.JK = [];
            b.Dx = [];
            b.lj = void 0;
            b.Ex = void 0;
            b.BD = void 0;
            b.zD = void 0;
            b.nz = 0;
            b.QF = 0;
        };
        this.reset();
    }
    q(gy, ey);
    function hy(a, b) {
        a.iN();
        a.Nb = b;
        a.em = Date.now();
        b = a.Nb instanceof HTMLMediaElement ? a.Nb : a.Nb.tech().el();
        gb() && (v("playing", b, a.oh), v("loadstart", b, a.oh));
        v("error", b, a.oh);
        v("stalled", b, a.oh);
        a.Gx = !0;
    }
    gy.prototype.Mo = function (a) {
        this.nR = a;
    };
    gy.prototype.xz = function () {
        var a = ey.prototype.xz.call(this);
        if (void 0 !== a && 5e3 < a) {
            void 0 !== this.lj &&
                this.vi({
                    room_user: this.J,
                    eventName: "levelMax",
                    levelMaxName: this.lj.name,
                    levelMaxBitrate: this.lj.bitrate,
                    levelMaxAudioCodec: this.lj.audioCodec,
                    levelMaxVideoCodec: this.lj.videoCodec,
                    levelMaxHeight: this.lj.height,
                    levelMaxWidth: this.lj.width,
                    bitrate: this.Yp,
                });
            var b =
                this.Dx.reduce(function (c, d) {
                    return c + d;
                }, 0) / this.Dx.length;
            isNaN(b) || this.vi({ room_user: this.J, eventName: "levelSwitchAvg", levelSwitchAvg: b / 1e3, levelSwitchAvgMS: b, levelSwitchCount: this.Dx.length });
        }
        this.reset();
        return a;
    };
    gy.prototype.kz = function () {
        ey.prototype.kz.call(this);
        this.hN();
        this.iN();
    };
    gy.prototype.wz = function (a, b, c, d, e, f, g, h) {
        this.nz = g;
        "privatenotwatching" !== h &&
            "hidden" !== h &&
            "away" !== h &&
            ((e = { eventName: "playerQuality", room_user: this.J, resolution: e, videoHeight: f }),
            kb() || (e = Object.assign(Object.assign({}, e), { droppedFrames: a, totalFrames: c, segmentDropped: b, segmentFrames: d })),
            30 < b && (e.badFrames = !0),
            this.vi(e));
    };
    var iy = window.canAutoplay;
    function jy() {
        var a = new dy();
        return new Promise(function (b) {
            function c(f) {
                var g = 0;
                !0 === f && xu.removeListener(d);
                gb() && 0 !== e && (g = window.performance.now() - e);
                f = ob();
                void 0 !== f && 10 > f && (a.send(!1, g), b(!1));
                if (void 0 === iy) t("canAutoplay library is undefined. Resolving autoplay to true", "canAutoPlay.ts", "common"), a.send(!0, g, Error("canAutoplay library is undefined. Resolving autoplay to true")), b(!0);
                else
                    iy.video({ inline: !0, muted: !0, timeout: 1e3, baseUrl: "https://static-assets.highwebmedia.com/" })
                        .then(function (h) {
                            a.send(h.result, g, h.error);
                            b(h.result);
                        })
                        ["catch"](function (h) {
                            a.send(!1, g, h);
                            b(!1);
                        });
            }
            function d(f) {
                f && c(!0);
            }
            var e = 0;
            yu ? c() : (gb() && (e = window.performance.now()), xu.g(d));
        });
    }
    function ky() {
        document.querySelectorAll(".langs input[name=next]").forEach(function (a) {
            a.value = "" + window.location.pathname + window.location.search;
        });
    }
    var ly,
        my = ["total_viewers", "image_url", "password_warning"];
    function ny(a, b) {
        clearTimeout(ly);
        if (a.Fd)
            oy(a),
                window.setTimeout(function () {
                    ny(a, b);
                }, 55e3);
        else {
            var c = "contest/log/" + a.j() + "/";
            if ("" !== b) {
                var d = L(new H(b), "hashtag");
                c = c + "?hashtag=" + encodeURIComponent(d);
            }
            ly = window.setTimeout(function () {
                C(c)
                    .then(function (e) {
                        e = new H(e.responseText);
                        for (var f = M(e, "can_access"), g = M(e, "is_banned"), h = M(e, "has_warnings"), m = l(my), n = m.next(); !n.done; n = m.next()) e.kf(n.value);
                        f || window.location.reload();
                        g && (window.location.href = "/");
                        h && (window.location.href = "/accounts/site_message/?next=" + window.location.href);
                        ny(a, b);
                        ad(e);
                    })
                    .catch(function (e) {
                        r("log_presence failed " + e, "logPresence.ts", "common");
                    });
            }, 55e3);
        }
    }
    function oy(a) {
        var b,
            c = a.fe();
        if (void 0 !== c) {
            var d = [];
            py.forEach(function (f, g) {
                f[0] <= c && f[1] > c && d.push(g);
            });
            var e = {};
            try {
                e = JSON.parse(null !== (b = $b("ag")) && void 0 !== b ? b : "{}");
            } catch (f) {}
            d.forEach(function (f) {
                var g;
                e[f] = (null !== (g = e[f]) && void 0 !== g ? g : 0) + 1;
            });
            cc("ag", JSON.stringify(e), 2592e3);
        }
    }
    var py = new Map([
        ["teen-cams", [18, 20]],
        ["18to21-cams", [18, 22]],
        ["20to30-cams", [20, 31]],
        ["30to50-cams", [30, 51]],
        ["mature-cams", [50, 20]],
    ]);
    var qy = new y("anyRTCBroadcastStartStop"),
        ry = new y("webRTCBroadcastStartStop"),
        sy = new y("OBSBroadcastStartStop");
    function ty(a) {
        qy.h(a);
    }
    ry.g(ty);
    sy.g(ty);
    var uy = { enabled: !1, move: function () {}, end: function () {} };
    function vy(a, b) {
        wy(
            a,
            b,
            function (c) {
                return { valid: !0, x: c.clientX, y: c.clientY };
            },
            "mousedown",
            "mousemove",
            "mouseup"
        );
        wy(
            a,
            b,
            function (c) {
                return 1 === c.touches.length && ((c = c.touches.item(0)), null !== c) ? { valid: !0, x: c.clientX, y: c.clientY } : { valid: !1, x: 0, y: 0 };
            },
            "touchstart",
            "touchmove",
            "touchend"
        );
    }
    function wy(a, b, c, d, e, f) {
        v(d, a, function (g) {
            var h = c(g);
            if (h.valid) {
                var m = b(g, h.x, h.y);
                if (m.enabled) {
                    m.move(h.x, h.y);
                    g.preventDefault();
                    var n = function (x) {
                            x = c(x);
                            x.valid && m.move(x.x, x.y);
                        },
                        p = function (x) {
                            x.preventDefault();
                            (void 0 !== x.buttons && (rb() ? 0 === x.buttons : 1 === x.buttons)) || (void 0 !== x.touches && 1 === x.touches.length) ? n(x) : u(x, !1);
                        };
                    v(e, document, p, !0);
                    var u = function (x, D) {
                        (void 0 === D || D) && n(x);
                        Bb(e, document, p, !0);
                        Bb(f, document, u, !0);
                        m.end();
                    };
                    v(f, document, u, !0);
                }
            }
        });
    }
    function xy(a, b, c) {
        this.hd = a;
        this.config = c;
        this.W = { wg: NaN, Og: NaN, jg: NaN, Gg: NaN, width: NaN, height: NaN };
        this.IL = "window__" + b;
        a = { wg: NaN, Og: NaN, jg: NaN, Gg: NaN, width: NaN, height: NaN };
        if (Qa() && ((b = window.localStorage.getItem(this.IL)), null !== b)) {
            a = JSON.parse(b);
            for (var d in a) null === a[d] && (a[d] = NaN);
            isNaN(a.width) && (a.width = this.config.Uh);
            isNaN(a.height) && (a.height = this.config.Th);
        }
        this.W = a;
        isNaN(this.W.width) && (this.W.width = this.config.Uh);
        isNaN(this.W.height) && (this.W.height = this.config.Th);
        isNaN(this.W.wg) && isNaN(this.W.Gg) && (0 <= this.config.dj.indexOf(1) ? (this.W.Gg = yd()) : (this.W.wg = 0 <= this.config.dj.indexOf(4) ? Math.max(0, Uv() / 2 - this.config.Uh / 2) : 0));
        isNaN(this.W.Og) && isNaN(this.W.jg) && (0 <= this.config.dj.indexOf(3) ? (this.W.jg = yd()) : (this.W.Og = 0 <= this.config.dj.indexOf(4) ? Math.max(0, window.innerHeight / 2 - this.config.Th / 2) : 0));
    }
    xy.prototype.save = function () {
        var a = this.hd.element.parentElement;
        if (null === a) r("no parent element", "windowPositioner.ts", "fullvideolib");
        else {
            var b = this.hd.element.offsetLeft,
                c = this.hd.element.offsetTop,
                d = a.clientHeight - (this.hd.element.offsetHeight + c);
            a = a.clientWidth - (this.hd.element.offsetWidth + b);
            this.W.height = this.hd.element.offsetHeight;
            this.W.width = this.hd.element.offsetWidth;
            b <= a ? ((this.W.wg = b), (this.W.Gg = NaN)) : ((this.W.wg = NaN), (this.W.Gg = a));
            c <= d ? ((this.W.Og = c), (this.W.jg = NaN)) : ((this.W.Og = NaN), (this.W.jg = d));
        }
        Qa() && window.localStorage.setItem(this.IL, JSON.stringify(this.W));
    };
    xy.prototype.apply = function () {
        var a = this.hd.element.parentElement;
        if (null === a) r("no parent element", "windowPositioner.ts", "fullvideolib");
        else if (0 !== a.clientHeight) {
            void 0 !== this.config.Tr && this.config.Tr
                ? ((this.hd.Wa.style.position = "relative"), (this.hd.element.style.width = "auto"), (this.hd.element.style.height = "auto"), (this.W.height = this.hd.element.offsetHeight), (this.W.width = this.hd.element.offsetWidth))
                : (this.config.tm
                      ? ((this.W.width = Math.min(this.W.width, a.clientWidth)),
                        (this.W.height = Math.min(this.W.height, a.clientHeight)),
                        (this.W.width = Math.max(this.W.width, this.config.minWidth)),
                        (this.W.height = Math.max(this.W.height, this.config.minHeight)))
                      : ((this.W.width = this.config.Uh), (this.W.height = this.config.Th + yy(this.hd))),
                  (this.hd.element.style.width = this.W.width + "px"),
                  (this.hd.element.style.height = this.W.height + "px"));
            var b = (!isNaN(this.W.wg) && !isNaN(this.W.Gg)) || (isNaN(this.W.wg) && isNaN(this.W.Gg));
            if ((!isNaN(this.W.Og) && !isNaN(this.W.jg)) || (isNaN(this.W.Og) && isNaN(this.W.jg)) || b) Ma("unexpected bounds: top:" + this.W.Og + " bottom:" + this.W.jg + " left:" + this.W.wg + " right: " + this.W.Gg);
            else {
                b = a.clientHeight;
                if (!isNaN(this.W.Og)) {
                    if (this.W.Og + this.W.height > b || 0 > this.W.Og) Ma("set topBound to container height - bounds height to make fit"), (this.W.Og = Math.max(0, b - this.W.height));
                    this.hd.element.style.top = this.W.Og + "px";
                } else if (!isNaN(this.W.jg)) {
                    if (this.W.jg + this.W.height > b || 0 > this.W.jg) Ma("set bottomBound to container height - bounds height to make fit"), (this.W.jg = Math.max(0, b - this.W.height));
                    this.hd.element.style.top = b - this.W.height - this.W.jg + "px";
                }
                a = a.clientWidth;
                if (!isNaN(this.W.wg)) {
                    if (this.W.wg + this.W.width > a || 0 > this.W.wg) Ma("set leftBound to 0 to make fit"), (this.W.wg = 0);
                    this.hd.element.style.left = this.W.wg + "px";
                } else if (!isNaN(this.W.Gg)) {
                    if (this.W.Gg + this.W.width > a || 0 > this.W.Gg) Ma("set rightBound to 0 to make fit"), (this.W.Gg = 0);
                    this.hd.element.style.left = a - this.W.width - this.W.Gg + "px";
                }
            }
        }
    };
    function zy(a) {
        return { left: a.offsetLeft, top: a.offsetTop, width: a.offsetWidth, height: a.offsetHeight };
    }
    function Ay(a, b, c) {
        var d = Object.assign({}, a);
        d.top = a.top + b;
        d.height = a.height - b;
        0 > d.top ? ((d.height += d.top), (d.top = 0)) : d.height < c && ((d.top -= c - d.height), (d.height = c));
        return d;
    }
    function By(a, b, c, d) {
        var e = Object.assign({}, a);
        e.height = a.height + b;
        e.top + e.height > d ? (e.height = d - e.top) : e.height < c && (e.height = c);
        return e;
    }
    function Cy(a, b, c) {
        var d = Object.assign({}, a);
        d.left = a.left + b;
        d.width = a.width - b;
        0 > d.left ? ((d.width += d.left), (d.left = 0)) : d.width < c && ((d.left -= c - d.width), (d.width = c));
        return d;
    }
    function Dy(a, b, c, d) {
        var e = Object.assign({}, a);
        e.width = a.width + b;
        e.left + e.width > d ? (e.width = d - e.left) : e.width < c && (e.width = c);
        return e;
    }
    function Ey(a) {
        w.call(this);
        var b = this;
        this.element.style.height = "0";
        this.element.style.width = "0";
        this.element.style.overflow = "visible";
        this.element.style.position = "fixed";
        this.element.style.top = "0";
        this.element.style.left = "0";
        this.cf = a.cf;
        this.listener = function () {
            b.R();
        };
        this.cf.Iw.g(this.listener);
        this.G(new Fy(this, a));
        this.G(new Gy(this, a));
        this.G(new Hy(this, a));
        this.G(new Iy(this, a));
        this.G(new Jy(this, a));
        this.G(new Ky(this, a));
        this.G(new Ly(this, a));
        this.G(new My(this, a));
    }
    q(Ey, w);
    Ey.prototype.D = function () {};
    function Ny(a, b, c) {
        w.call(this);
        var d = this;
        this.options = b;
        this.cursor = c;
        this.be = 8;
        this.element.style.height = this.be + "px";
        this.element.style.width = this.be + "px";
        this.element.style.cursor = this.cursor;
        vy(this.element, function (e, f, g) {
            e.stopPropagation();
            void 0 !== b.tM && b.tM();
            var h = Object.freeze(zy(b.cf.element)),
                m = new Sd(
                    function () {
                        b.cf.R();
                    },
                    { zc: 10 }
                );
            return {
                enabled: !0,
                move: function (n, p) {
                    n = d.gm(h, { x: n - f, y: p - g });
                    p = b.cf.element;
                    p.style.left = n.left + "px";
                    p.style.top = n.top + "px";
                    p.style.width = n.width + "px";
                    p.style.height = n.height + "px";
                    Td(m);
                },
                end: function () {
                    void 0 !== b.uM && b.uM();
                },
            };
        });
    }
    q(Ny, w);
    function Fy(a, b) {
        Ny.call(this, a, b, "ns-resize");
    }
    q(Fy, Ny);
    Fy.prototype.D = function () {
        var a = this.options.cf.element.getBoundingClientRect();
        this.element.style.top = a.top - this.be / 2 + "px";
        this.element.style.left = a.left + "px";
        this.element.style.width = a.right - a.left + "px";
    };
    Fy.prototype.gm = function (a, b) {
        return Ay(a, b.y, this.options.minHeight);
    };
    function Gy(a, b) {
        Ny.call(this, a, b, "ns-resize");
    }
    q(Gy, Ny);
    Gy.prototype.D = function () {
        var a = this.options.cf.element.getBoundingClientRect();
        this.element.style.top = a.top + a.height - this.be / 2 + "px";
        this.element.style.left = a.left + "px";
        this.element.style.width = a.width + "px";
    };
    Gy.prototype.gm = function (a, b) {
        return By(a, b.y, this.options.minHeight, this.options.maxHeight());
    };
    function Hy(a, b) {
        Ny.call(this, a, b, "ew-resize");
    }
    q(Hy, Ny);
    Hy.prototype.D = function () {
        var a = this.options.cf.element.getBoundingClientRect();
        this.element.style.top = a.top + "px";
        this.element.style.left = a.left - this.be / 2 + "px";
        this.element.style.height = a.bottom - a.top + "px";
    };
    Hy.prototype.gm = function (a, b) {
        return Cy(a, b.x, this.options.minWidth);
    };
    function Iy(a, b) {
        Ny.call(this, a, b, "ew-resize");
    }
    q(Iy, Ny);
    Iy.prototype.D = function () {
        var a = this.options.cf.element.getBoundingClientRect();
        this.element.style.top = a.top + "px";
        this.element.style.left = a.right - this.be / 2 + "px";
        this.element.style.height = a.bottom - a.top + "px";
    };
    Iy.prototype.gm = function (a, b) {
        return Dy(a, b.x, this.options.minWidth, this.options.maxWidth());
    };
    function Jy(a, b) {
        Ny.call(this, a, b, "nwse-resize");
    }
    q(Jy, Ny);
    Jy.prototype.D = function () {
        var a = this.options.cf.element.getBoundingClientRect();
        this.element.style.top = a.top - this.be + this.be / 2 + "px";
        this.element.style.left = a.left - this.be + this.be / 2 + "px";
    };
    Jy.prototype.gm = function (a, b) {
        var c = Ay(a, b.y, this.options.minHeight);
        a = Cy(a, b.x, this.options.minWidth);
        return { top: c.top, height: c.height, left: a.left, width: a.width };
    };
    function Ky(a, b) {
        Ny.call(this, a, b, "nesw-resize");
    }
    q(Ky, Ny);
    Ky.prototype.D = function () {
        var a = this.options.cf.element.getBoundingClientRect();
        this.element.style.top = a.top - this.be + this.be / 2 + "px";
        this.element.style.left = a.right - this.be / 2 + "px";
    };
    Ky.prototype.gm = function (a, b) {
        var c = Ay(a, b.y, this.options.minHeight);
        a = Dy(a, b.x, this.options.minWidth, this.options.maxWidth());
        return { top: c.top, height: c.height, left: a.left, width: a.width };
    };
    function Ly(a, b) {
        Ny.call(this, a, b, "nesw-resize");
    }
    q(Ly, Ny);
    Ly.prototype.D = function () {
        var a = this.options.cf.element.getBoundingClientRect();
        this.element.style.top = a.bottom - this.be / 2 + "px";
        this.element.style.left = a.left - this.be + this.be / 2 + "px";
    };
    Ly.prototype.gm = function (a, b) {
        var c = By(a, b.y, this.options.minHeight, this.options.maxHeight());
        a = Cy(a, b.x, this.options.minWidth);
        return { top: c.top, height: c.height, left: a.left, width: a.width };
    };
    function My(a, b) {
        Ny.call(this, a, b, "nwse-resize");
    }
    q(My, Ny);
    My.prototype.D = function () {
        var a = this.options.cf.element.getBoundingClientRect();
        this.element.style.top = a.bottom - this.be / 2 + "px";
        this.element.style.left = a.right - this.be / 2 + "px";
    };
    My.prototype.gm = function (a, b) {
        var c = By(a, b.y, this.options.minHeight, this.options.maxHeight());
        a = Dy(a, b.x, this.options.minWidth, this.options.maxWidth());
        return { top: c.top, height: c.height, left: a.left, width: a.width };
    };
    function Oy(a, b, c) {
        w.call(this);
        var d = this;
        this.U = a;
        this.content = b;
        this.config = c;
        this.fL = !1;
        this.uJ = new y("draggingOrResizingChanged");
        this.Mb = !1;
        O(this.element, "draggableCanvasWindow");
        this.element.style.overflow = "visible";
        this.Wa = document.createElement("div");
        O(this.Wa, "innerDiv");
        this.Wa.style.height = "100%";
        this.Wa.style.width = "100%";
        this.Wa.style.position = "absolute";
        this.Wa.style.overflow = "visible";
        this.Wa.style.boxSizing = "border-box";
        this.Wa.style.borderWidth = "2px";
        this.Wa.style.borderStyle = "solid";
        this.Wa.style.borderRadius = "4px";
        this.aQ = void 0 !== c.title;
        var e = (this.rb = document.createElement("div"));
        O(this.rb, "closeButton");
        this.rb.id = (this.config.Ih + "-close-btn").toLowerCase();
        this.rb.dataset.paction = "TheaterChat";
        this.rb.dataset.pactionName = "ChatTab_Close";
        this.rb.style.position = "absolute";
        this.rb.style.right = "4px";
        this.rb.style.height = "10px";
        this.rb.style.width = "10px";
        this.rb.style.cursor = "pointer";
        this.rb.style.borderWidth = "1px";
        this.rb.style.borderStyle = "solid";
        this.rb.style.borderRadius = "2px";
        v("mouseenter", this.rb, function () {
            e.style.backgroundImage = "url(https://static-assets.highwebmedia.com/tsdefaultassets/grey-close.svg)";
            e.style.backgroundSize = "10px";
        });
        v("mouseleave", this.rb, function () {
            e.style.backgroundImage = "";
        });
        void 0 !== c.title
            ? ((this.Af = document.createElement("div")),
              O(this.Af, "titleBar"),
              (this.Af.style.position = "relative"),
              (this.Af.style.fontSize = "13px"),
              (this.Af.style.fontWeight = "bold"),
              (this.Af.style.padding = "3px 3px 3px 5px"),
              (this.Af.style.borderRadius = "4px 4px 0 0"),
              (this.Af.style.minHeight = "10px"),
              (this.Hj = document.createElement("div")),
              (this.Hj.style.height = "100%"),
              (this.Hj.style.whiteSpace = "nowrap"),
              (this.Hj.style.overflow = "hidden"),
              (this.Hj.style.textOverflow = "ellipsis"),
              this.Af.appendChild(this.Hj),
              (this.rA = document.createElement("span")),
              (this.rA.innerText = c.title),
              this.Hj.appendChild(this.rA),
              (this.uj = c.uj),
              this.Af.appendChild(this.rb),
              this.Wa.appendChild(this.Af),
              v("click", this.rb, function (f) {
                  f.stopPropagation();
                  d.U.removeChild(d);
              }))
            : ((this.rb.style.top = "8px"),
              (this.rb.style.zIndex = "1"),
              this.element.appendChild(this.rb),
              v("click", this.rb, function (f) {
                  f.stopPropagation();
                  d.element.style.display = "none";
                  d.Mb = !1;
              }));
        this.G(this.content, this.Wa);
        this.lF = new xy(this, this.config.Ih, this.config);
        this.lO = function () {
            d.lF.save();
            d.R();
        };
        void 0 === c.mD && (c.mD = void 0 !== this.Hj ? [this.Hj] : [this.element]);
        Py(
            this.element,
            {
                sJ: function () {
                    Qy(d.U, d);
                    Ry(d, !0);
                },
                tJ: function () {
                    Ry(d, !1);
                    d.lO();
                    F("MoveDraggableWindow", { window: d.config.Ih, left: d.element.offsetLeft, top: d.element.offsetTop, windowWidth: window.innerWidth, windowHeight: window.innerHeight });
                },
                dI: function () {
                    return !d.fL;
                },
            },
            c.mD
        );
        !0 === c.tm && Sy(this);
        this.element.appendChild(this.Wa);
    }
    q(Oy, w);
    k = Oy.prototype;
    k.Dz = function (a) {
        void 0 !== this.rA && (this.rA.innerText = a);
    };
    function Sy(a) {
        void 0 === a.Iq &&
            ((a.Iq = a.G(
                new Ey({
                    minWidth: a.config.minWidth,
                    minHeight: a.config.minHeight,
                    maxWidth: function () {
                        return a.U.element.clientWidth;
                    },
                    maxHeight: function () {
                        return a.U.element.clientHeight;
                    },
                    cf: a,
                    tM: function () {
                        Qy(a.U, a);
                        Ry(a, !0);
                    },
                    uM: function () {
                        Ry(a, !1);
                        a.lO();
                        F("ResizeDraggableWindow", { window: a.config.Ih, width: a.element.clientWidth, height: a.element.clientHeight, windowWidth: window.innerWidth, windowHeight: window.innerHeight });
                    },
                })
            )),
            a.Iq.R());
    }
    k.resize = function (a, b) {
        this.config.Th = a;
        this.config.Uh = b;
        this.D();
    };
    function Ry(a, b) {
        a.fL = b;
        a.uJ.h(b);
    }
    function Ty(a) {
        if (void 0 !== a.Iq) {
            var b = a.Iq;
            b.cf.Iw.removeListener(b.listener);
            a.removeChild(a.Iq);
            a.Iq = void 0;
        }
    }
    k.D = function () {
        this.content.element.style.height = void 0 !== this.config.Tr && this.config.Tr ? "auto" : this.element.clientHeight - yy(this) - 4 + "px";
        void 0 !== this.Af &&
            (void 0 === this.rb
                ? r("expected close button to be defined", "draggableCanvasWindow.ts", "fullvideolib")
                : void 0 === this.Hj
                ? r("expected title bar div inner to be defined", "draggableCanvasWindow.ts", "fullvideolib")
                : ((this.Hj.style.maxWidth = this.Af.clientWidth - this.rb.offsetWidth - 5 - 8 + "px"), (this.rb.style.top = (this.Af.offsetHeight - this.rb.offsetHeight) / 2 + "px")));
    };
    k.show = function () {
        this.element.style.opacity = "1";
    };
    k.B = function () {
        this.element.style.opacity = "0";
    };
    function yy(a) {
        return void 0 === a.Af ? 0 : a.Af.offsetHeight;
    }
    k.blur = function () {
        this.U.Ne === this && Qy(this.U);
    };
    function Uy(a, b) {
        return void 0 !== a.config.UE ? a.config.UE(b) : !1;
    }
    function Py(a, b, c) {
        c = l(c);
        for (var d = c.next(); !d.done; d = c.next())
            (d = d.value),
                (d.style.cursor = "move"),
                vy(d, function (e, f, g) {
                    if (void 0 !== b.dI && !1 === b.dI()) return uy;
                    var h = a.offsetLeft,
                        m = a.offsetTop,
                        n = a.offsetHeight,
                        p = a.offsetWidth;
                    if (null === a.parentElement) return r("draggable without parent element", "draggableCanvasWindow.ts", "fullvideolib"), uy;
                    var u = a.parentElement.clientHeight,
                        x = a.parentElement.clientWidth,
                        D = f,
                        J = g;
                    void 0 !== b.sJ && b.sJ();
                    return {
                        enabled: !0,
                        move: function (I, ja) {
                            D = I;
                            J = ja;
                            I = m + (J - g);
                            ja = h + (D - f);
                            0 > I ? (I = 0) : I + n > u && (I = u - n);
                            0 > ja ? (ja = 0) : ja + p > x && (ja = x - p);
                            a.style.top = I + "px";
                            a.style.left = ja + "px";
                        },
                        end: function () {
                            void 0 !== b.tJ && b.tJ();
                        },
                    };
                });
    }
    function Vy(a, b, c, d) {
        d = void 0 === d ? !0 : d;
        this.element = document.createElement("div");
        this.label = document.createElement("label");
        this.label.htmlFor = b;
        this.label.innerText = c;
        "textarea" === a ? (this.input = document.createElement("textarea")) : ((this.input = document.createElement("input")), (this.input.type = a));
        this.input.name = b;
        d && (this.input.required = d);
        this.error = document.createElement("p");
        this.error.style.display = "none";
        this.element.appendChild(this.label);
        this.element.appendChild(this.input);
        this.element.appendChild(this.error);
    }
    Vy.prototype.ar = function (a) {
        this.error.textContent = a;
        this.error.style.display = "";
    };
    Vy.prototype.Wi = function () {
        this.error.textContent = "";
        this.error.style.display = "none";
    };
    function Wy(a, b) {
        function c(e) {
            return e instanceof d
                ? e
                : new d(function (f) {
                      f(e);
                  });
        }
        var d = void 0;
        return new (d || (d = Promise))(function (e, f) {
            function g(n) {
                try {
                    m(b.next(n));
                } catch (p) {
                    f(p);
                }
            }
            function h(n) {
                try {
                    m(b["throw"](n));
                } catch (p) {
                    f(p);
                }
            }
            function m(n) {
                n.done ? e(n.value) : c(n.value).then(g, h);
            }
            m((b = b.apply(a, [])).next());
        });
    }
    var Xy = new y("roomListRequest"),
        Yy = new y("playerForceMuted"),
        Zy = new y("standardEmoticonRequest"),
        $y = new y("userInitiatedPm"),
        az = new y("mentionUser"),
        bz = new y("appDebuggingToggled"),
        cz = new y("getMoreHistoryMessages"),
        dz = new y("repositionChatTabContent"),
        ez = new y("userModeratorStatusChanged"),
        fz = new y("storeTempPM");
    var gz = new Xd(["IconVideoControls", "TextVideoControls"], "vidctrls");
    function hz() {
        if (!0 === A.current.nb) return !0;
        var a = Y();
        return ("split" !== a || gz.active) && "videoonly" !== a && "noninteractive-fullscreen" !== a;
    }
    function iz() {
        var a;
        return null === (a = A.current) || void 0 === a ? void 0 : a.Bs;
    }
    function jz(a) {
        return a.Tx || (a.Bs && iz());
    }
    var kz = new y("pictureInPictureChange");
    function lz(a, b) {
        function c() {
            function e() {
                d.play();
            }
            d.xb();
            d.play();
            v("pause", d.O, e);
            window.setTimeout(function () {
                Bb("pause", d.O, e);
            }, 600);
        }
        w.call(this);
        var d = this;
        this.Xc = a;
        this.HF = new y("requestJPEG");
        this.Nk = new y("requestControlVisibility");
        this.aG = new y("setControlVolume");
        this.Ku = new y("setControlIsMuted");
        this.bA = !0;
        this.O = document.createElement("video");
        this.gi = !1;
        this.Bl = document.createElement("div");
        this.KB = [];
        this.Zy = new y("possibleQualityLevelsChanged");
        this.Ed = new y("videoOfflineChange");
        this.bu = new y("playbackStart");
        this.lG = !0;
        this.yA = this.QD = this.Ge = !1;
        this.py = this.HL = this.dJ = this.PL = this.Qy = this.loading = this.startTime = 0;
        this.uG = !1;
        this.wx = this.xx = this.yu = this.eE = this.dE = 0;
        this.loading = Date.now();
        this.element.style.position = "static";
        this.element.style.background = "#333333 url(https://static-assets.highwebmedia.com/tsdefaultassets/cam_notice_background.jpg) center center / cover";
        this.element.className = "videoPlayerDiv";
        this.O.setAttribute("webkit-playsinline", "");
        this.O.setAttribute("playsinline", "");
        this.O.setAttribute("autoplay", "autoplay");
        this.O.style.margin = "0";
        this.O.style.padding = "0";
        this.O.style.width = "100%";
        this.O.style.height = "100%";
        this.O.style.objectFit = "contain";
        this.O.style.backgroundColor = "rgba(0, 0, 0, 0.0)";
        this.element.appendChild(this.O);
        window.videoElement = this.O;
        this.Bl.style.backgroundColor = "#000000";
        this.Bl.style.opacity = "0.6";
        this.Bl.style.position = "absolute";
        this.Bl.style.width = "inherit";
        this.Bl.style.height = "inherit";
        this.Ki = new gy(b);
        fy(this.Ki);
        kz.g(function (e) {
            d.QD = e.active;
        });
        this.O.onloadstart = function () {
            0 !== d.loading && (d.HL = Date.now() - d.loading);
        };
        this.O.onloadeddata = function () {
            0 !== d.loading && (d.dJ = Date.now() - d.loading);
        };
        this.O.onloadedmetadata = function () {
            0 !== d.loading && (d.PL = Date.now() - d.loading);
        };
        this.O.onplaying = function () {
            if (!1 === d.uG) {
                d.yu += 1;
                var e = 0,
                    f = 0;
                0 !== d.loading && (e = Date.now() - d.loading);
                0 !== d.Qy && (f = Date.now() - d.Qy);
                var g = d.Ki,
                    h = d.dJ,
                    m = d.PL,
                    n = d.HL,
                    p = d.yu;
                g.sa = d.sa;
                g.QF = p;
                g.nz = 0;
                g.vi({ eventName: "playerTimes", room_user: g.J, startTime: e / 1e3, pageStartTime: f / 1e3, dataLoadTime: h / 1e3, metaLoadTime: m / 1e3, startLoadTime: n / 1e3 });
                mz(d);
                d.uG = !0;
            }
        };
        v("visibilitychange", document, function () {
            if (document.hidden) d.Zx = d.O.getVideoPlaybackQuality();
            else if (void 0 !== d.Zx) {
                var e = d.O.getVideoPlaybackQuality();
                d.xx += e.totalVideoFrames - d.Zx.totalVideoFrames;
                d.wx += e.droppedVideoFrames - d.Zx.droppedVideoFrames;
            }
        });
        nz.g(function () {
            clearInterval(d.ov);
        });
        v("webkitendfullscreen", this.O, c);
        v("leavepictureinpicture", this.O, c);
    }
    q(lz, w);
    function oz(a, b) {
        return Wy(a, function d() {
            var e = this,
                f,
                g,
                h;
            return Aa(d, function (m) {
                if (1 == m.aa)
                    return b.A.et !== e.vL && "" !== b.A.et
                        ? ((e.vL = b.A.et), (f = b.l.status), e.Ge && (f = "offline"), m.return({ url: pz(b.A.et), status: f }))
                        : sa(m, E("get_edge_hls_url_ajax/", { room_slug: b.A.j, bandwidth: "high", current_edge: "" }), 3);
                g = m.td;
                h = JSON.parse(g.responseText);
                if (h.success) return (e.vL = h.url), m.return({ url: pz(h.url), status: Px(h.room_status) });
                throw g.responseText;
            });
        });
    }
    function pz(a) {
        var b = Bc(window.location.search);
        return void 0 !== b.edgemm ? a.replace(/(^https:\/\/)(.+?)(\/.+)/, "https://" + b.edgemm + ".live.mmcdn.com$3") : void 0 !== b.edge ? a.replace(/(^https:\/\/)(.+?)(\/.+)/, "https://edge" + b.edge + ".stream.highwebmedia.com$3") : a;
    }
    function qz(a, b) {
        a.stop();
        (function () {
            return Wy(a, function d() {
                var e = this,
                    f,
                    g,
                    h,
                    m;
                return Aa(d, function (n) {
                    switch (n.aa) {
                        case 1:
                            clearInterval(e.ov);
                            e.Qy = Date.now();
                            if (b.A.j !== e.j) return n.return();
                            e.eE = 0;
                            e.dE = 0;
                            e.Zx = void 0;
                            e.xx = 0;
                            e.wx = 0;
                            n.kn = 2;
                            return sa(n, oz(e, b), 4);
                        case 4:
                            h = n.td;
                            f = h.url;
                            g = h.status;
                            ta(n, 3);
                            break;
                        case 2:
                            return (m = ua(n)), r("Unable to refresh HLS stream", "hlsPlayer.ts", "player", { error: m }), n.return();
                        case 3:
                            "offline" === e.sa && g !== e.sa && (e.gi = !0);
                            e.Ge = "offline" === g;
                            e.Ed.h(e.Ge);
                            if ("notconnected" !== e.sa && "offline" === g) return rz(e, b), n.return();
                            if ("privatenotwatching" === e.sa && e.sa === g && tt()) return n.return();
                            e.sa = g;
                            e.loading = Date.now();
                            e.py = 0;
                            e.uG = !1;
                            e.GL(b, f);
                            n.aa = 0;
                    }
                });
            });
        })().catch(function () {});
    }
    function sz(a) {
        return Wy(a, function c() {
            var d = this,
                e,
                f;
            return Aa(c, function (g) {
                if (1 == g.aa) {
                    e = d.iF.play();
                    if (void 0 === e) return g.return({ Sv: "old", success: !d.O.paused });
                    g.kn = 3;
                    return sa(g, e, 5);
                }
                if (3 != g.aa) return g.return({ Sv: "new", success: !0 });
                f = ua(g);
                return g.return({ Sv: "new", success: !1, error: f });
            });
        });
    }
    function tz(a) {
        Wy(a, function c() {
            var d = this,
                e,
                f;
            return Aa(c, function (g) {
                if (1 == g.aa) return sa(g, sz(d), 2);
                if (3 != g.aa) {
                    e = g.td;
                    if (e.success) return d.bu.h(void 0), g.return();
                    "old" === e.Sv && F("NoPromiseAutoplayPolicy");
                    Yy.h(void 0);
                    d.Tk(!0);
                    return sa(g, sz(d), 3);
                }
                f = g.td;
                if (f.success) return d.bu.h(void 0), g.return();
                "new" === f.Sv &&
                    (d.gi ||
                        (t("Unable to play twice in a row", "hlsPlayer.ts", "player", { err: f.error }, "VIDEO_"),
                        /SamsungBrowser/i.test(navigator.userAgent) && (r("Attempting to fallback to JPEG player.", "hlsPlayer.ts", "player"), clearInterval(d.ov), d.HF.h(d.context))),
                    d.fD());
                g.aa = 0;
            });
        });
    }
    k = lz.prototype;
    k.play = function () {
        tz(this);
    };
    k.stop = function () {
        void 0 !== this.Xc.Vk.get(this.sa) && (uz(this), vz(this));
        this.gi && vz(this);
        wz(this);
    };
    function vz(a) {
        for (var b = l(a.KB), c = b.next(); !c.done; c = b.next()) clearTimeout(c.value);
        clearTimeout(a.wy);
        a.wy = void 0;
        clearTimeout(a.oo);
        a.oo = void 0;
    }
    k.cr = function (a) {
        this.O.volume = a / 100;
    };
    k.Ql = function () {
        return this.O.muted || (!this.gi && this.O.paused) ? 0 : 100 * this.O.volume;
    };
    k.Gm = function () {
        this.Nk.h(!1);
    };
    k.er = function () {
        this.Nk.h(!0);
    };
    k.xb = function () {
        hz() ? this.er() : this.Gm();
    };
    k.rg = function () {
        this.Nk.h(!1);
        this.zx();
    };
    k.Nu = function () {};
    k.Es = function () {};
    k.fD = function () {
        wz(this);
    };
    k.hh = function (a) {
        var b = this;
        this.Ge = !1;
        this.lG = !jz(a.A);
        this.O.poster = this.lG ? xe.Xn + "stream?room=" + a.A.j + "&f=" + Math.random() : "";
        this.context = a;
        this.j = a.A.j;
        a.l.event.Mc.g(function (c) {
            b.sa = c.Sa;
            b.Ki.sa = b.sa;
            if (void 0 !== b.Xc.Vk.get(c.Sa) || b.Ge) b.stop(), wz(b), b.Ge ? rz(b, a) : xz(b, a);
            else
                switch ((clearTimeout(b.oo), (b.oo = void 0), c.Lc)) {
                    case "notconnected":
                    case "privaterequesting":
                        break;
                    default:
                        switch (c.Sa) {
                            case "notconnected":
                                yz(b, a.A.j);
                                window.setTimeout(function () {
                                    qz(b, a);
                                }, 0);
                                break;
                            default:
                                b.KB.push(
                                    window.setTimeout(function () {
                                        yz(b, a.A.j);
                                    }, 0)
                                ),
                                    b.KB.push(
                                        window.setTimeout(function () {
                                            qz(b, a);
                                        }, 3e3)
                                    );
                        }
                }
        });
    };
    function yz(a, b) {
        a.element.style.background = "#333333 url(" + (a.lG ? xe.Xn + "stream?room=" + b + "&f=" + Math.random() : "") + ") center center / cover";
        b = a.Xc;
        b.qa.innerText = b.EI;
        b.text.innerText = Jq;
        b.element.style.display = "block";
        b.qj.style.display = "none";
        b.Ej.style.display = "none";
        b.sq.style.display = "none";
        b.pt = !0;
        a.element.insertBefore(a.Bl, a.element.firstChild);
        a.gi = !0;
    }
    function uz(a) {
        a.gi = !1;
        var b = a.Xc;
        b.pt && (b.qa.innerText === b.EI && ((b.qa.innerText = ""), (b.text.innerText = ""), b.B()), (b.pt = !1));
        a.Bl.parentElement === a.element && a.element.removeChild(a.Bl);
        a.element.style.background = "#333333 url(https://static-assets.highwebmedia.com/tsdefaultassets/cam_notice_background.jpg) center center / cover";
    }
    function xz(a, b) {
        void 0 === a.oo &&
            (a.oo = window.setTimeout(function () {
                return Wy(a, function d() {
                    var e = this,
                        f;
                    return Aa(d, function (g) {
                        if (1 == g.aa) return sa(g, oz(e, b), 2);
                        f = g.td.status;
                        "offline" === f ? ((e.Ge = !0), (e.oo = void 0), rz(e, b), e.Ed.h(e.Ge)) : ((e.oo = void 0), xz(e, b));
                        g.aa = 0;
                    });
                });
            }, 1e4));
    }
    function rz(a, b) {
        void 0 === a.wy &&
            (a.wy = window.setTimeout(function () {
                a.wy = void 0;
                qz(a, b);
            }, 1e4));
    }
    function zz(a, b, c) {
        c = void 0 === c ? function () {} : c;
        wz(a);
        a.SG = window.setTimeout(function () {
            a.yA ? (uz(a), r("Attempting to fallback to JPEG player.", "hlsPlayer.ts", "player"), clearInterval(a.ov), a.HF.h(a.context)) : !yu || a.QD ? zz(a, b, c) : (Ma("Video seems to be stuck, refreshing"), (a.yA = !0), qz(a, b), c());
        }, 1e4);
    }
    function wz(a) {
        void 0 !== a.SG && (clearTimeout(a.SG), (a.SG = void 0));
    }
    k.Up = function () {
        return this.O;
    };
    function mz(a) {
        clearInterval(a.ov);
        window.setTimeout(function () {
            a.wz();
            a.ov = window.setInterval(function () {
                a.wz();
            }, 6e4);
        }, 5e3);
    }
    k.wz = function () {
        if (!document.hidden) {
            var a = 0,
                b = 0,
                c = 0,
                d = 0;
            if (!kb()) {
                a = this.O.getVideoPlaybackQuality();
                var e = a.droppedVideoFrames - this.wx;
                a = a.totalVideoFrames - this.xx;
                b = -1;
                0 < a && (b = (e / a) * 100);
                var f = e - this.dE;
                d = a - this.eE;
                c = -1;
                0 < d && (c = (f / d) * 100);
                this.eE = a;
                this.dE = e;
            }
            this.Ki.wz(b, c, a, d, this.O.videoHeight * this.O.videoWidth, this.O.videoHeight, this.py, this.sa);
        }
        this.py += 1;
    };
    var Az = new y("followingEvent"),
        Bz = ["follow_new", "follow_text", "follow_photo"];
    function Cz(a, b) {
        return E("api/ts/follow/notifications/" + a, { notification_frequency: b })
            .then(function () {
                Az.h({ J: a, ij: !0, eh: b });
                return !0;
            })
            .catch(function (c) {
                r("Unable to update follow notification settings " + a + ": " + c, "follow.ts", "common");
                return !1;
            });
    }
    function Dz() {
        return C("api/ts/follow/email_notifications/")
            .then(function (a) {
                a = new H(a.responseText);
                return { VA: M(a, "activated"), email: void 0 !== K(a, "email") ? K(a, "email") : "", FA: M(a, "validated") };
            })
            .catch(function (a) {
                r("Error checking if follow email notifications are turned on: " + a, "follow.ts", "common");
                return !1;
            });
    }
    function Ez(a, b, c) {
        var d = void 0 !== c ? c.email : void 0,
            e = void 0 !== c ? c.FA : void 0;
        return new Promise(function (f, g) {
            var h = { activate: "" + a };
            void 0 !== b && "" !== b && (h.email_field = b);
            return E("api/ts/follow/email_notifications/", h)
                .then(function () {
                    f("" + (!(void 0 !== b && "" !== b && d === b && void 0 !== e && e) && void 0 !== b));
                })
                .catch(function (m) {
                    a: {
                        m = L(new H(m.xhr.responseText), "error");
                        if (-1 < m.indexOf("email_field") && ((m = Qc(new H(m), "email_field")), void 0 !== m && 0 < m.length)) {
                            m = L(m[0], "message");
                            break a;
                        }
                        m = Op;
                    }
                    g(m);
                });
        });
    }
    function Fz(a, b) {
        return void 0 !== b && "" !== b
            ? Dz()
                  .then(function (c) {
                      return b === c.email && a === c.VA
                          ? new Promise(function (d, e) {
                                if (!c.FA)
                                    return E("emailvalidation/resend/", {})
                                        .then(function () {
                                            d("true");
                                        })
                                        .catch(function () {
                                            e("Error resending verification email to " + b);
                                        });
                                d("false");
                            })
                          : Ez(a, b, c);
                  })
                  .catch(function () {
                      return Ez(a, b);
                  })
            : Ez(a);
    }
    function Gz(a, b, c) {
        c = void 0 === c ? "FollowStar" : c;
        if ((void 0 !== b && !b) || !Wu(dn, void 0, void 0, !0))
            return E("follow/follow/" + a + "/", { location: c })
                .then(function (d) {
                    var e = new H(d.responseText);
                    d = Az.h;
                    a: switch (L(e, "notification_frequency")) {
                        case "all":
                            e = "all";
                            break a;
                        case "none":
                            e = "none";
                            break a;
                        default:
                            e = "smart";
                    }
                    d.call(Az, { J: a, ij: !0, eh: e });
                    void 0 !== window._followedTabUpdate && window._followedTabUpdate(a);
                    return !0;
                })
                .catch(function (d) {
                    r("Unable to follow " + a + ": " + d, "follow.ts", "common");
                    return !1;
                });
    }
    function Hz(a, b, c) {
        c = void 0 === c ? "FollowStar" : c;
        if ((void 0 !== b && !b) || !Wu(dn, void 0, void 0, !0))
            return E("follow/unfollow/" + a + "/", { location: c })
                .then(function () {
                    Az.h({ J: a, ij: !1, eh: "none" });
                    void 0 !== window._followedTabUpdate && window._followedTabUpdate(a);
                    return !0;
                })
                .catch(function (d) {
                    r("Unable to unfollow " + a + ": " + d, "follow.ts", "common");
                    return !1;
                });
    }
    function Iz(a) {
        return C("follow/follow_allowed/" + a + "/")
            .then(function (b) {
                return M(new H(b.responseText), "can_follow");
            })
            .catch(function (b) {
                r("Error checking if user following is allowed: " + b, "follow.ts", "common");
            });
    }
    function Jz(a) {
        w.call(this, void 0, a);
    }
    q(Jz, w);
    k = Jz.prototype;
    k.initData = function (a) {
        w.prototype.initData.call(this, a);
    };
    k.es = function (a, b) {
        this.state = {};
        return this.createElement(b);
    };
    k.createElement = function (a) {
        return w.prototype.es.call(this, "div", a);
    };
    k.render = function () {
        return this.element;
    };
    k.Hb = function (a) {
        for (var b in a) a.hasOwnProperty(b) && (this.state[b] = a[b]);
        this.il();
    };
    k.il = function () {
        var a = this;
        Ar(this.element).forEach(function (b) {
            b instanceof Function ? b() : b !== a && b.il();
        });
    };
    function Kz(a) {
        Jz.call(this, a);
        this.Z = a;
        this.ub = void 0 === A.current.V;
        this.nb = A.current.nb;
    }
    q(Kz, Jz);
    Kz.prototype.initData = function (a) {
        Jz.prototype.initData.call(this, a);
        this.Hb({ isActive: a.Td });
    };
    Kz.prototype.createElement = function () {
        var a = this;
        return V("div", {
            bind: {
                className: function () {
                    return "follow_star " + (void 0 === a.state.isActive ? "icon_update_following" : a.state.isActive ? "icon_following" : "icon_not_following");
                },
                title: function () {
                    return void 0 === a.state.isActive ? "" : a.state.isActive ? mh : nh;
                },
                style: function () {
                    return {};
                },
            },
            onClick: function (b) {
                Lz(a);
                b.stopPropagation();
                b.preventDefault();
            },
        });
    };
    function Mz(a) {
        a.element.classList.add("no_hover");
        window.setTimeout(function () {
            a.element.classList.remove("no_hover");
        }, 3e3);
    }
    function Lz(a) {
        if (a.ub && !a.nb) Su({ pg: !0 });
        else {
            var b = !0 === a.state.isActive;
            a.Hb({ isActive: void 0 });
            Nz(a, !b)
                .then(function () {
                    a.Hb({ isActive: !b });
                    Mz(a);
                })
                .catch(function () {
                    a.Hb({ isActive: b });
                });
        }
    }
    function Oz() {
        Kz.apply(this, arguments);
    }
    q(Oz, Kz);
    function Nz(a, b) {
        var c;
        a = b ? Gz(a.Z.jc, a.ub) : Hz(a.Z.jc, a.ub);
        return null !==
            (c =
                null === a || void 0 === a
                    ? void 0
                    : a.then(function (d) {
                          return d ? Promise.resolve() : Promise.reject();
                      })) && void 0 !== c
            ? c
            : Promise.reject();
    }
    function Pz(a, b) {
        function c(u) {
            var x = document.createElement("div");
            x.style.position = "absolute";
            x.style.cursor = u;
            x.style.backgroundColor = "rgba(0, 0, 0, 0.01)";
            a.appendChild(x);
            return x;
        }
        var d = c("nwse-resize");
        d.style.height = "10px";
        d.style.width = "10px";
        d.style.top = "-5px";
        d.style.left = "-5px";
        var e = c("nesw-resize");
        e.style.height = "10px";
        e.style.width = "10px";
        e.style.top = "-5px";
        e.style.right = "-5px";
        var f = c("nwse-resize");
        f.style.height = "10px";
        f.style.width = "10px";
        f.style.bottom = "-5px";
        f.style.right = "-5px";
        var g = c("nesw-resize");
        g.style.height = "10px";
        g.style.width = "10px";
        g.style.bottom = "-5px";
        g.style.left = "-5px";
        var h = c("ew-resize");
        h.style.height = "calc(100% - 10px)";
        h.style.width = "10px";
        h.style.top = "5px";
        h.style.left = "-5px";
        var m = c("ew-resize");
        m.style.height = "calc(100% - 10px)";
        m.style.width = "10px";
        m.style.top = "5px";
        m.style.right = "-5px";
        var n = c("ns-resize");
        n.style.height = "10px";
        n.style.width = "calc(100% - 10px)";
        n.style.left = "5px";
        n.style.bottom = "-5px";
        var p = c("ns-resize");
        p.style.height = "5px";
        p.style.width = "calc(100% - 10px)";
        p.style.left = "5px";
        p.style.top = "-5px";
        vy(f, b(2));
        vy(g, b(3));
        vy(e, b(1));
        vy(d, b(0));
        vy(h, b(4));
        vy(m, b(5));
        vy(n, b(6));
        vy(p, b(7));
    }
    function Qz(a, b, c, d) {
        switch (d) {
            case 0:
                return a.ratio * (a.bq - b + (a.cq - c));
            case 1:
                return a.ratio * (-(a.bq - b) + (a.cq - c));
            case 2:
                return a.ratio * (-(a.bq - b) - (a.cq - c));
            case 3:
                return a.ratio * (a.bq - b - (a.cq - c));
            case 4:
                return a.bq - b;
            case 5:
                return -(a.bq - b);
            case 6:
                return -(a.cq - c) / a.ratio;
            case 7:
                return (a.cq - c) / a.ratio;
        }
    }
    var Rz,
        Sz = [];
    function Tz(a) {
        a = a.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g);
        return null !== a ? a : [];
    }
    function Uz(a) {
        a = a.match(/<img/g);
        return null !== a && 1 === a.length;
    }
    function Vz(a) {
        for (var b = 0; b < Sz.length; b += 1) Sz[b].name === a.name && Sz.splice(b, 1);
        18 === Sz.length && Sz.pop();
        Sz.unshift(a);
        a = Sz.map(function (c) {
            return JSON.stringify({ value: c.value, name: c.name });
        }).join("|");
        window.localStorage.setItem("emojiRecents", a);
        return Sz;
    }
    function Wz() {
        return new Promise(function (a) {
            var b = window.localStorage.getItem("emojiRecents");
            null !== b
                ? a(
                      b.split("|").map(function (c) {
                          c = JSON.parse(c);
                          return { value: c.value, name: c.name };
                      })
                  )
                : a([]);
        });
    }
    function Xz() {
        var a = Wz(),
            b = C("api/ts/emoticons/search_emojis/");
        Rz = Promise.all([a, b]).then(function (c) {
            var d = l(c);
            c = d.next().value;
            d = d.next().value;
            Sz = c;
            return [Sz, new H(d.responseText)];
        });
    }
    function Yz(a) {
        void 0 === Rz && Xz();
        return void 0 !== Rz
            ? Rz.then(function (b) {
                  var c = l(b);
                  b = c.next().value;
                  c = c.next().value;
                  return "recent" === a ? b : "smileys-people" === a ? ((b = Pc(c, "smileys-emotion")), (c = Pc(c, "people-body")), Zz(b.concat(c))) : Zz(Pc(c, a));
              })
            : Promise.reject();
    }
    function $z(a) {
        return C("api/ts/emoticons/search_emojis/?keywords=" + encodeURIComponent(a))
            .then(function (b) {
                b = new H(b.responseText);
                var c = [Pc(b, "smileys-emotion"), Pc(b, "people-body"), Pc(b, "animals-nature"), Pc(b, "food-drink"), Pc(b, "activities"), Pc(b, "travel-places"), Pc(b, "objects"), Pc(b, "symbols"), Pc(b, "flags")];
                b = [];
                c = l(c);
                for (var d = c.next(); !d.done; d = c.next()) (d = d.value), void 0 !== d && b.push(Zz(d));
                return b.reduce(function (e, f) {
                    return e.concat(f);
                });
            })
            .catch(function () {
                return [];
            });
    }
    function Zz(a) {
        return a.map(function (b) {
            return { value: b.character, name: b.name };
        });
    }
    var aA = { JV: 17, shift: 16, alt: 18, $W: 91, qY: 93, BV: 20, SY: 9 },
        bA = { left: 37, YG: 38, right: 39, yC: 40 };
    function cA(a) {
        if (void 0 === a || 13 === a || 27 === a) return !1;
        for (var b in bA) if (a === bA[b]) return !1;
        for (var c in aA) if (a === aA[c]) return !1;
        return !0;
    }
    var dA = new y("focusingInputFromKeypress", {
        rc: function () {
            return 10 + Ob;
        },
    });
    function eA(a, b) {
        w.call(this);
        var c = this;
        this.mU = a;
        this.maxLength = b;
        this.Cd = { li: -1, Ot: -1 };
        this.BS = "";
        this.Do = -1;
        this.Pg = [{ $K: "", aL: [], Cd: this.Cd }];
        this.Kj = 0;
        this.Bw = new Set();
        this.CC = this.JF = this.AQ = !1;
        this.listeners = new Ub();
        this.maxLength = b;
        this.element.classList.add("customInput");
        this.element.classList.add("noScrollbar");
        this.element.style.position = "relative";
        this.element.style.outline = "none";
        this.element.style.border = "none";
        this.element.style.boxSizing = "border-box";
        this.element.style.fontSize = "12px";
        this.element.style.whiteSpace = "nowrap";
        this.element.style.overflowY = "hidden";
        this.element.style.overflowX = "scroll";
        this.element.contentEditable = "true";
        Zu(this.element, "text");
        var d = new Sd(
                function () {
                    fA(c, !0);
                },
                { zc: 10, Qc: 0 }
            ),
            e = new Sd(
                function () {
                    gA(c, !0);
                },
                { zc: 10, Qc: 0 }
            ),
            f = new Sd(
                function () {
                    hA(c);
                },
                { zc: 10, Qc: 1 }
            ),
            g = !1;
        v("input", this.element, function (h) {
            g || c.JF || ((g = !0), "historyUndo" === h.inputType ? Td(d) : "historyRedo" === h.inputType ? Td(e) : (wb() || Td(f), iA(c, !0)), jA(c), kA(c), (g = !1));
        });
        qb() &&
            window.setInterval(function () {
                document.activeElement === c.element && hA(c);
            }, 200);
        v("paste", this.element, function (h) {
            h.preventDefault();
            null !== h.clipboardData && ((h = null !== window.clipboardData && void 0 !== window.clipboardData ? window.clipboardData.getData("Text") : h.clipboardData.getData("text/plain")), lA(c, h));
        });
        v("click", this.element, function (h) {
            if (null !== h.target && h.target !== c.element) {
                var m = window.getSelection();
                if (null !== m) {
                    var n = document.createRange(),
                        p = h.target;
                    h.offsetX < p.offsetWidth / 2 ? n.setStartBefore(p) : n.setStartAfter(p);
                    n.collapse(!0);
                    m.removeAllRanges();
                    m.addRange(n);
                }
            }
            kA(c);
        });
        v("keydown", this.element, function (h) {
            if ("Enter" === h.key) h.preventDefault(), c.submit();
            else if (mA(c, h)) h.preventDefault();
            else if (h.ctrlKey || h.metaKey) {
                if (-1 !== ["u", "b", "i"].indexOf(h.key)) h.preventDefault();
                else if ("z" === h.key && !h.shiftKey) fA(c), h.preventDefault();
                else if (("z" === h.key && h.shiftKey) || "y" === h.key) gA(c), h.preventDefault();
                c.Bw.add(h.key);
            }
            jA(c);
        });
        v("keyup", this.element, function (h) {
            qb() && cA(h.which) && (!c.Bw.has(h.key) || h.repeat) ? nA(c) : (-1 === ["ArrowLeft", "ArrowRight", "ArrowUp", "ArrowDown"].indexOf(h.key) && -1 === ["MetaLeft", "MetaRight"].indexOf(h.code)) || kA(c);
            c.Bw.delete(h.key);
        });
        v("focus", this.element, function () {
            c.CC = !0;
            void 0 !== c.placeholder && ((c.placeholder.style.display = "none"), (c.placeholder.textContent = ""));
        });
        v("blur", this.element, function () {
            c.CC = !1;
            void 0 !== c.placeholder && "" === oA(c) && ((c.placeholder.style.display = ""), (c.placeholder.textContent = c.BS));
            jA(c);
            c.Bw.clear();
        });
        z(
            dA.g(function (h) {
                mA(c, h) && h.preventDefault();
            }),
            this.listeners
        );
    }
    q(eA, w);
    function lA(a, b, c) {
        if ("" !== b) {
            (void 0 === c ? 0 : c) && pA(a);
            a.focus(!0);
            qA(a);
            rA(a) && ((c = window.getSelection()), null !== c && 0 < c.rangeCount && c.getRangeAt(0).deleteContents());
            b = b.replace(/\r?\n|\r/g, " ");
            b = b.replace(/ /g, "\u00a0");
            a: if (((c = sA(a)), !(b.length <= c))) {
                for (var d = -1, e = 0, f = l(b), g = f.next(); !g.done; g = f.next()) {
                    g = g.value;
                    if (e + g.length > c) break;
                    twemoji.test(g) && (d = e);
                    e += g.length;
                }
                if (-1 !== d) {
                    b: {
                        var h = b.substr(d, b.length);
                        if (twemoji.test(h)) {
                            f = -1;
                            var m = (g = ""),
                                n = 0;
                            h = l(Tz(h));
                            for (var p = h.next(); !p.done; p = h.next())
                                (p = p.value), -1 === f && twemoji.test(p) ? ((f = n), (m = g = p)) : -1 !== f && ((m = "" + m + p), twemoji.test(p) && Uz(twemoji.parse(m)) && (g = m)), (n += p.length);
                            if (-1 !== f) {
                                f = { kW: f, DQ: g };
                                break b;
                            }
                        }
                        f = void 0;
                    }
                    if (void 0 !== f && d + f.DQ.length > c) {
                        b = b.substr(0, d);
                        break a;
                    }
                }
                b = b.substr(0, e);
            }
            if ("" !== b) {
                d = tA(b);
                b = window.getSelection();
                if (null !== b && 0 < b.rangeCount) {
                    c = b.getRangeAt(0);
                    e = [].concat(ha(d.childNodes)).reverse();
                    d = e[0];
                    e = l(e);
                    for (f = e.next(); !f.done; f = e.next()) c.insertNode(f.value);
                    c.setStartAfter(d);
                    c.collapse(!0);
                    b.removeAllRanges();
                    b.addRange(c);
                }
                nA(a);
                jA(a);
                uA(a);
            }
        }
    }
    function tA(a) {
        var b = document.createElement("div");
        b.textContent = a;
        if (!wb()) {
            var c = { unselectable: "on" };
            twemoji.parse(b, {
                attributes: function () {
                    return c;
                },
            });
        }
        return b;
    }
    function oA(a) {
        var b = "",
            c = !1;
        a = l(a.element.childNodes);
        for (var d = a.next(); !d.done; d = a.next())
            (d = d.value), d instanceof HTMLImageElement ? ((b += d.alt), (c = !0)) : null !== d.textContent && (!c || (":" !== d.textContent[0] && "@" !== d.textContent[0]) || (b += " "), (b += d.textContent), (c = !1));
        return b.replace(/\s/g, " ");
    }
    function sA(a) {
        return a.maxLength - oA(a).length;
    }
    function pA(a) {
        var b = window.getSelection();
        if (null !== b) {
            var c = document.createRange();
            c.selectNodeContents(a.element);
            c.collapse(!1);
            b.removeAllRanges();
            b.addRange(c);
            kA(a);
        }
    }
    function vA(a, b) {
        document.activeElement !== a.element && wA(a);
        a = xA(a);
        var c = window.getSelection();
        null !== c && ((a.textContent = b), (b = document.createRange()), b.selectNodeContents(a), b.collapse(!1), c.removeAllRanges(), c.addRange(b));
    }
    function yA(a) {
        a = xA(a);
        return null !== a.textContent ? a.textContent.replace(/\s/g, " ") : "";
    }
    function zA(a, b) {
        var c = xA(a),
            d = window.getSelection();
        if (null !== d && 0 < d.rangeCount) {
            var e = document.createRange();
            e.selectNodeContents(c);
            e.setStart(c, b);
            uA(a);
            d.removeAllRanges();
            d.addRange(e);
        }
    }
    function AA(a) {
        var b = window.getSelection();
        null !== b && 0 < b.rangeCount && ((b = b.getRangeAt(0)), b.startContainer !== a.element && a.element.contains(b.startContainer) && (iA(a, !1), b.deleteContents(), nA(a)));
    }
    k = eA.prototype;
    k.focus = function (a, b) {
        a = void 0 === a ? !1 : a;
        document.activeElement !== this.element &&
            document.body.contains(this.element) &&
            ((void 0 !== b && !b) || Gd(this.element) || (this.element.scrollIntoView(!1), window.scrollBy(0, 12)), this.element.focus(), a ? wA(this) : pA(this), uA(this));
    };
    k.blur = function () {
        this.element.blur();
    };
    k.disable = function () {
        this.blur();
        this.element.contentEditable = "false";
    };
    k.enable = function () {
        this.element.contentEditable = "true";
    };
    k.submit = function () {
        if (this.mU()) {
            if (!wb()) for (var a = this.element.innerHTML, b = /<img[^>]+alt="?([^"\s]+)"?\s*/g, c = b.exec(a); null !== c; ) F("emojiSent", { value: c[1] }), (c = b.exec(a));
            "" !== oA(this) && (qA(this), (a = window.getSelection()), null !== a && ((b = document.createRange()), b.selectNodeContents(this.element), a.removeAllRanges(), a.addRange(b), b.deleteContents(), b.collapse(!0)), nA(this));
            this.blur();
        }
    };
    function hA(a) {
        var b = window.getSelection();
        if (null !== b && 0 < b.rangeCount) {
            var c = xA(a);
            if (null !== c.textContent && twemoji.test(c.textContent)) {
                var d = c.textContent,
                    e = document.createRange();
                e.selectNodeContents(c);
                b.removeAllRanges();
                b.addRange(e);
                e.deleteContents();
                lA(a, d);
                c = xA(a);
                "" !== c.textContent && (e.setStartBefore(c), e.collapse(!0), b.removeAllRanges(), b.addRange(e), kA(a));
            }
        }
    }
    function rA(a) {
        var b = window.getSelection();
        return null !== b && 0 < b.rangeCount && document.activeElement === a.element && ((a = b.getRangeAt(0)), a.startContainer !== a.endContainer || a.startOffset !== a.endOffset) ? !0 : !1;
    }
    function mA(a, b) {
        return 0 < sA(a) ? !1 : !b.ctrlKey && !b.metaKey && cA(b.which) && -1 === ["Backspace", "Delete"].indexOf(b.key) && !rA(a);
    }
    function nA(a) {
        kA(a);
        iA(a, !0);
    }
    function iA(a, b) {
        window.clearTimeout(a.Do);
        a.Do = -1;
        a.AQ ||
            (b
                ? (a.Do = window.setTimeout(function () {
                      BA(a);
                      a.Do = -1;
                  }, 300))
                : BA(a));
    }
    function qA(a) {
        -1 !== a.Do && (window.clearTimeout(a.Do), (a.Do = -1), BA(a));
    }
    function BA(a) {
        kA(a);
        var b = oA(a);
        a.Pg.splice(a.Kj + 1, a.Pg.length);
        a.Pg[a.Pg.length - 1].$K === b && a.Pg.pop();
        var c = [].concat(ha(a.element.childNodes)).map(function (d) {
            return d.cloneNode(!0);
        });
        a.Pg.push({ $K: b, aL: c, Cd: a.Cd });
        20 < a.Pg.length && a.Pg.shift();
        a.Kj = a.Pg.length - 1;
        CA(a);
    }
    function fA(a, b) {
        b = void 0 === b ? !1 : b;
        F(b ? "BrowserTriggeredUndo" : "HotkeyTriggeredUndo");
        a.Kj !== a.Pg.length - 1 || b || iA(a, !1);
        0 < a.Kj && (--a.Kj, DA(a, a.Pg[a.Kj]), CA(a));
    }
    function gA(a, b) {
        F((void 0 === b ? 0 : b) ? "BrowserTriggeredRedo" : "HotkeyTriggeredRedo");
        a.Kj < a.Pg.length - 1 && ((a.Kj += 1), DA(a, a.Pg[a.Kj]), CA(a));
    }
    function DA(a, b) {
        a.element.innerHTML = "";
        b.aL.forEach(function (c) {
            a.element.appendChild(c.cloneNode());
        });
        a.Cd = b.Cd;
        wA(a);
        uA(a);
    }
    function CA(a) {
        if (a.CC && !document.queryCommandSupported("insertText")) {
            a.JF = !0;
            var b = function () {
                    document.execCommand("insertText", !1, "~");
                    document.execCommand("delete", !1);
                },
                c = window.getSelection();
            if (null !== c && 0 < c.rangeCount) {
                var d = c.getRangeAt(0);
                c.removeAllRanges();
                b();
                c.addRange(d);
            } else b();
            a.JF = !1;
        }
    }
    function xA(a) {
        kA(a);
        return 0 === a.element.childNodes.length ? a.element : -1 === a.Cd.li ? a.element.childNodes[0] : a.element.childNodes[a.Cd.li];
    }
    function EA(a) {
        return FA(a, !0).getBoundingClientRect().left - a.element.getBoundingClientRect().left;
    }
    function GA(a) {
        var b = yA(a).length;
        return 0 < b && a.Cd.Ot !== b
            ? !1
            : ![]
                  .concat(ha(a.element.childNodes))
                  .slice(a.Cd.li + 1)
                  .some(function (c) {
                      var d, e;
                      return "IMG" === c.nodeName || 0 < (null !== (e = null === (d = c.textContent) || void 0 === d ? void 0 : d.length) && void 0 !== e ? e : 0);
                  });
    }
    function FA(a, b) {
        b = void 0 === b ? !1 : b;
        var c = document.createRange();
        if (0 === a.element.childNodes.length) return c.setStart(a.element, 0), c;
        var d = a.element.childNodes[a.Cd.li];
        -1 === a.Cd.li ? c.setStartBefore(a.element.childNodes[0]) : "" === d.textContent ? c.setStartAfter(d) : c.setStart(d, a.Cd.Ot);
        if (b) {
            var e, f;
            a = c.startContainer;
            if (0 !== (null !== (f = null === (e = null === a || void 0 === a ? void 0 : a.textContent) || void 0 === e ? void 0 : e.length) && void 0 !== f ? f : 0))
                if (null !== window.getSelection())
                    for (; 0 < c.startOffset; ) {
                        if (/^\s/.test(c.toString())) {
                            c.setStart(a, c.startOffset + 1);
                            break;
                        }
                        c.setStart(a, c.startOffset - 1);
                    }
                else c = document.createRange();
        }
        return c;
    }
    function kA(a) {
        var b = window.getSelection();
        if (null !== b && 0 < b.rangeCount && document.activeElement === a.element) {
            b = b.getRangeAt(0).cloneRange();
            b.collapse(!1);
            var c = b.startContainer === a.element ? b.startOffset - 1 : Array.from(a.element.childNodes).indexOf(b.startContainer);
            if (-1 === c) a.Cd = { li: -1, Ot: -1 };
            else if ("" === a.element.childNodes[c].textContent) a.Cd = { li: c, Ot: -1 };
            else {
                var d = a.element.childNodes[c].textContent;
                a.Cd = { li: c, Ot: b.startContainer === a.element ? d.length : b.startOffset };
            }
        }
    }
    function wA(a) {
        if (!(0 === a.element.childNodes.length || a.Cd.li >= a.element.childNodes.length)) {
            var b = window.getSelection();
            null !== b && ((a = FA(a)), a.collapse(!0), b.removeAllRanges(), b.addRange(a));
        }
    }
    function uA(a) {
        var b = 0;
        if (-1 !== a.Cd.li) {
            b = a.element.childNodes[a.Cd.li];
            var c = document.createRange();
            c.setStart(a.element, 0);
            c.setEndAfter(b);
            b = c.getBoundingClientRect().width;
        }
        a.element.scrollLeft = Math.max(a.element.scrollLeft, b + 3 - a.element.offsetWidth);
    }
    function jA(a) {
        "" !== oA(a) ? a.element.classList.remove("inputFieldChatPlaceholder") : a.element.classList.add("inputFieldChatPlaceholder");
    }
    k.dispose = function () {
        Vb(this.listeners);
    };
    var HA,
        IA,
        JA = !0;
    function KA(a, b) {
        function c() {
            return void 0 !== document.activeElement && null !== document.activeElement && 0 <= ["input", "textarea", "select", "button"].indexOf(document.activeElement.tagName.toLowerCase()) && !Tu();
        }
        function d() {
            return a.ua.Xa.me().Rf() || b.me().Rf();
        }
        Qv.ud.g(function () {
            HA = void 0;
        });
        var e = new bd(),
            f = 0;
        Xr.g(function (h) {
            f = h ? f + 1 : f - 1;
        });
        cd(e, {
            keyCode: 9,
            Eo: !1,
            la: function (h) {
                if (!((!d() && c() && a.Ne !== a.Ce) || Tu() || Tu())) {
                    Qy(a, a.ua);
                    var m = function (n) {
                        h.shiftKey ? n.sC("prev") : n.sC("next");
                    };
                    "split" === Y() ? (m(a.ua.Xa), m(b)) : (m(b), m(a.ua.Xa));
                    h.preventDefault();
                    h.stopPropagation();
                }
            },
        });
        cd(e, {
            keyCode: 13,
            Eo: !1,
            la: function (h) {
                d() ? (Zd("InCntntSUp") ? h.preventDefault() : Wu() ? h.preventDefault() : fb().scrollTop === IA && void 0 !== HA && ((fb().scrollTop = HA), (HA = void 0))) : Qy(a, a.ua);
            },
        });
        cd(e, {
            keyCode: 27,
            Eo: !1,
            la: function (h) {
                Tu()
                    ? (void 0 !== Qu && Qu.B(), Qy(a), (HA = void 0))
                    : (h.stopPropagation(), h.preventDefault(), void 0 !== a.Ne && a.Ne.aQ && a.removeChild(a.Ne), Qy(a), fb().scrollTop === IA && void 0 !== HA && (b.me().Yg(), (fb().scrollTop = HA), (HA = void 0)));
            },
        });
        cd(e, {
            keyCode: 76,
            Eo: !0,
            la: function (h) {
                if ("split" === Y() || a.Ne === a.ua) if ("split" !== Y() || LA(b.hb)) h.stopPropagation(), h.preventDefault(), a.ua.Xa.pn(), b.pn();
            },
        });
        cd(e, {
            keyCode: 83,
            Eo: !0,
            la: function (h) {
                h.stopPropagation();
                h.preventDefault();
                "split" === Y() || "hidden" === a.element.style.visibility ? iv.h({ rv: !0 }) : Gr.h({ rv: !0 });
            },
        });
        var g = [32, 34, 33];
        v("keydown", document, function (h) {
            (JA ? (27 === h.keyCode || h.ctrlKey || h.metaKey ? 0 : Tu() || -1 !== g.indexOf(h.keyCode) || 0 !== f || (!d() && c())) : 1) ||
                (void 0 !== a.Ne && Uy(a.Ne, h)) ||
                dd(e, h) ||
                h.ctrlKey ||
                h.metaKey ||
                !cA(h.which) ||
                ((HA = fb().scrollTop),
                "split" !== Y() && Qy(a, a.ua),
                dA.h(h),
                ("split" === Y() ? b : a.ua.Xa).me().ff(),
                window.setTimeout(function () {
                    IA = fb().scrollTop;
                }, 0));
        });
    }
    function MA(a) {
        var b = new Sd(a, { zc: 50, Qc: 2 });
        v("scroll", window.document, function () {
            Td(b);
        });
    }
    function NA(a) {
        return a.Pa || !0 === a.vt ? "broadcaster" : a.ec ? "mod" : a.zd ? "inFanclub" : a.zf ? "tippedTonsRecently" : a.Gj ? "tippedALotRecently" : a.yf ? "tippedRecently" : a.Pe ? "hasTokens" : "defaultUser";
    }
    function OA(a) {
        return a.Pa || !0 === a.vt ? "#DC5500" : a.ec ? "#DC0000" : a.zd ? "#090" : a.zf ? "#804baa" : a.Gj ? "#be6aff" : a.yf ? "#009" : a.Pe ? "#69A" : "#494949";
    }
    function PA(a) {
        if (a.Pa) return un;
        if (a.ec) return tn;
        if (a.zd) return sn;
        if (a.zf) return kn;
        if (a.Gj) return mn;
        if (a.yf) return on;
        if (a.Pe) return qn;
    }
    function QA(a) {
        if (!a.ec && !a.Pa && !a.zd) {
            if (a.zf) return ln;
            if (a.Gj) return nn;
            if (a.yf) return pn;
            if (a.Pe) return rn;
        }
    }
    function RA(a) {
        a = a.toLowerCase();
        if (-1 < ["m", "male"].indexOf(a)) return "https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/male.svg";
        if (-1 < ["f", "female"].indexOf(a)) return "https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/female.svg";
        if (-1 < ["t", "s", "trans"].indexOf(a)) return "https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/trans.svg";
        if (-1 < ["c", "couple"].indexOf(a)) return "https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/couple.svg";
        r("Could not set menu gender icon. Defaulting to male.", "roomUtil.ts", "common");
        return "https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/male.svg";
    }
    function SA() {
        var a;
        return (null === (a = A.current.V) || void 0 === a ? void 0 : a.username) === B.getState().j;
    }
    function TA(a) {
        a = Object.assign(
            {
                width: "30px",
                height: "31px",
                background: 'url("https://static-assets.highwebmedia.com/images/loading_spinner.svg")',
                backgroundSize: "cover",
                animationName: "spin",
                animationDuration: "2s",
                animationTimingFunction: "linear",
                animationIterationCount: "infinite",
            },
            a.Gs
        );
        return V("div", { style: a });
    }
    function UA(a) {
        var b = Object.assign({ display: !0 === a.OY ? "none" : "block", width: "100%", height: "100%", position: "absolute" }, a.Gs);
        return V("div", { style: b, ref: a.cS }, V(TA, { Gs: { position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)", margin: "-15px 0 0 -15px" } }));
    }
    var VA = new y("tipsInPast24HoursUpdate"),
        WA = new y("tokenBalanceUpdate");
    function XA(a) {
        return new Promise(function (b, c) {
            C("tipping/current_tokens/?room=" + a)
                .then(function (d) {
                    d = new H(d.responseText);
                    var e = { ob: N(d, "token_balance") },
                        f = K(d, "tip_options");
                    if (void 0 !== f) {
                        f = new H(f);
                        f = $c(f, "tip_options");
                        if (void 0 !== f) {
                            f = new H(f);
                            var g = f.getAsString("label"),
                                h = Zc(f, "options"),
                                m = [];
                            h = l(JSON.parse(h));
                            for (var n = h.next(); !n.done; n = h.next()) (n = new H(JSON.stringify(n.value))), m.push({ label: n.getAsString("label") }), ad(n);
                            g = { label: g, options: m };
                            ad(f);
                            f = g;
                        } else f = void 0;
                        e.$o = f;
                    }
                    ad(d);
                    WA.h({ Ua: e.ob });
                    b(e);
                })
                .catch(function (d) {
                    c(d.status);
                });
        });
    }
    var YA = !1;
    function ZA(a) {
        return new Promise(function (b, c) {
            YA ||
                ((YA = !0),
                E("tipping/send_tip/" + a.J + "/", { tip_amount: a.KG, message: a.message, source: a.source, tip_room_type: a.LG, tip_type: a.Pm, video_mode: a.ee })
                    .then(function (d) {
                        YA = !1;
                        d = new H(d.responseText);
                        var e = { success: M(d, "success") },
                            f = K(d, "error", !1);
                        void 0 !== f ? ((e.error = f), (e.aO = M(d, "show_purchase_tokens", !1, !1))) : ((e.ob = N(d, "token_balance")), (e.$e = N(d, "tipped_performer_last_24hrs")));
                        ad(d);
                        void 0 !== e.ob && WA.h({ Ua: e.ob });
                        b(e);
                    })
                    .catch(function (d) {
                        YA = !1;
                        c(d.status);
                    }));
        });
    }
    function $A() {
        function a(u) {
            if ("close" === u.data) (g.Wr = !0), e();
            else if ("hide-spinner" === u.data) g.gO.style.display = "none";
            else if ("crypto-submit" === u.data)
                (g.Wr = !1),
                    (g.S.onclick = function (x) {
                        x.preventDefault();
                    }),
                    (p.onclick = function (x) {
                        x.preventDefault();
                    });
            else if ("crypto-error" === u.data)
                (g.Wr = !0),
                    (g.S.onclick = function (x) {
                        x.stopPropagation();
                        e();
                        g.fc.h(void 0);
                    }),
                    (p.onclick = e);
            else if (0 === u.data.indexOf("crypto-redirect: ")) b(u.data.substring(17), 950, 780);
            else if (0 === u.data.indexOf("billing-redirect: ")) b(u.data.substring(18), 715, 430);
            else if (0 <= u.origin.indexOf(window.location.hostname)) {
                switch (u.data) {
                    case "/tipping/purchase_tokens/":
                        n.style.display = "none";
                }
                p.onclick = e;
                null !== h.contentWindow && v("keydown", h.contentWindow, d);
            }
        }
        function b(u, x, D) {
            window.open(u, "_blank", "status=0,toolbar=0,menubar=0,directories=0,resizable=1,scrollbars=1,height=" + x + ",width=" + D);
            g.Wr = !0;
            e();
        }
        function c(u) {
            var x = document.createElement("div");
            x.style.position = "absolute";
            x.style.width = "3px";
            x.style.height = "15px";
            x.style.left = "5px";
            x.style.background = "#C4C4C4";
            x.style.transform = u;
            return x;
        }
        function d(u) {
            ("Esc" !== u.key && "Escape" !== u.key) || e();
        }
        function e() {
            g.Wr && !g.MD && ((g.MD = !0), Bb("message", window, a), Bb("keydown", document, d), f());
        }
        function f() {
            clearInterval(g.bT);
            g.element.style.opacity = "0";
            g.content.style.right = "-500px";
            window.setTimeout(function () {
                g.B();
            }, 500);
        }
        Yr.call(this, { Il: !1 });
        var g = this;
        this.MD = !1;
        this.Wr = !0;
        this.width = 430;
        this.MB = 135;
        this.url = "/tipping/purchase_tokens/" + window.location.search + "&source=" + A.current.Ub.TOKEN_SOURCE_PURCHASE_PAGE_IFRAME;
        this.element.style.width = this.width + 20 + "px";
        this.element.style.position = "fixed";
        this.element.style.right = "0";
        this.element.style.top = this.MB + "px";
        this.element.style.minHeight = "200px";
        this.element.style.zIndex = "1001";
        this.element.style.overflow = "hidden";
        this.element.style.opacity = "0";
        this.element.style.transition = "opacity 1s";
        this.element.style.zIndex = "1003";
        this.S.style.zIndex = "1002";
        this.S.style.background = "rgba(0, 0, 0, 0.5)";
        this.content = document.createElement("div");
        this.content.style.position = "absolute";
        this.content.style.right = "-500px";
        this.content.style.minHeight = "200px";
        this.content.style.maxHeight = "735px";
        this.content.style.width = this.width + "px";
        this.content.style.border = "1px solid #ccc";
        this.content.style.borderRadius = "5px";
        this.content.style.background = "#FFF";
        this.content.style.transition = "right 500ms";
        this.content.style.zIndex = "1002";
        this.element.appendChild(this.content);
        var h = aB(this),
            m = document.createElement("div");
        this.content.appendChild(m);
        var n = bB();
        m.appendChild(n);
        var p = document.createElement("div");
        p.onclick = f;
        p.style.display = "inline-block";
        p.style.height = "12.73px";
        p.style.width = "12.73px";
        p.style.cursor = "pointer";
        p.style.position = "absolute";
        p.style.right = "15px";
        p.style.top = "10px";
        p.appendChild(c("rotate(-135deg)"));
        p.appendChild(c("rotate(-45deg)"));
        m.appendChild(p);
        this.gO = this.vn();
        this.content.appendChild(this.gO);
        this.S.onclick = function (u) {
            u.stopPropagation();
            e();
            g.fc.h(void 0);
        };
        n.onclick = function () {
            h.src = g.url;
        };
        h.onload = function () {
            clearInterval(g.bT);
            var u = document.createElement("a");
            u.href = h.src;
            -1 === g.url.indexOf("" + u.pathname + u.search) && ((n.style.display = "inline-block"), (p.onclick = f));
        };
        window.setTimeout(function () {
            g.content.appendChild(h);
        }, 1);
        v("message", window, a);
        v("keydown", document, d);
        this.show();
        window.setTimeout(function () {
            h.style.opacity = "1";
        }, 1e3);
        this.D();
    }
    q($A, Yr);
    function aB(a) {
        var b = document.createElement("iframe");
        b.className = "purchaseFrame";
        b.src = a.url;
        b.style.border = "none";
        b.style.padding = "0";
        b.style.background = "transparent";
        b.style.height = "calc(100% - 5px)";
        b.style.width = "100%";
        b.style.transition = "height 200ms, opacity 1s";
        b.style.opacity = "0";
        return b;
    }
    function bB() {
        var a = document.createElement("div");
        a.innerHTML = "&lt; ";
        a.style.display = "none";
        a.style.color = "#999";
        a.style.cursor = "pointer";
        a.style.fontSize = "20px";
        a.style.fontWeight = "bold";
        a.style.borderRadius = "50px";
        a.style.padding = "2px 0 5px 7px";
        var b = document.createElement("small");
        b.innerText = "Back";
        b.style.fontSize = "12px";
        b.style.verticalAlign = "middle";
        b.style.lineHeight = "9px";
        a.appendChild(b);
        return a;
    }
    $A.prototype.vn = function () {
        var a = document.createElement("div");
        a.style.animationName = "spin";
        a.style.position = "absolute";
        a.style.top = "50%";
        a.style.left = "50%";
        a.style.width = "30px";
        a.style.height = "31px";
        a.style.margin = "-15px 0 0 -15px";
        a.style.background = 'url("https://static-assets.highwebmedia.com/tsdefaultassets/images/loading_spinner.svg")';
        a.style.backgroundSize = "cover";
        a.style.animationName = "spin";
        a.style.animationDuration = "2s";
        a.style.webkitAnimationDuration = "2s";
        a.style.animationTimingFunction = "linear";
        a.style.webkitAnimationTimingFunction = "linear";
        a.style.animationIterationCount = "infinite";
        a.style.webkitAnimationIterationCount = "infinite";
        a.style.zIndex = "-1";
        return a;
    };
    $A.prototype.show = function () {
        var a = this;
        Yr.prototype.show.call(this);
        window.setTimeout(function () {
            a.element.style.opacity = "1";
        }, 1);
        window.setTimeout(function () {
            a.content.style.right = "10px";
        }, 500);
    };
    $A.prototype.D = function () {
        this.content.style.height = window.innerHeight - this.MB - 10 + "px";
        this.element.style.top = Math.min(this.MB, window.innerHeight - this.content.offsetHeight - 10) + "px";
    };
    function cB(a) {
        w.call(this);
        var b = this;
        this.data = a;
        this.disabled = !1;
        this.rS = function (d) {
            b.disabled &&
                (d.preventDefault(),
                void 0 !== b.data.oJ
                    ? Md(b.data.oJ, function () {
                          void 0 !== b.dk && b.dk(d);
                      })
                    : void 0 !== b.dk && b.dk(d));
        };
        this.Kz = function () {
            void 0 !== b.Wh && (b.Wh.style.display = "block");
        };
        this.Pn = function () {
            void 0 !== b.Wh && (b.Wh.style.display = "none");
        };
        this.element.removeAttribute("id");
        O(this.element, "menuItem");
        this.element.style.padding = "9px 0";
        this.element.style.cursor = "pointer";
        this.element.style.boxSizing = "border-box";
        this.element.style.position = "relative";
        this.element.style.overflow = "visible";
        this.element.style.borderWidth = "1px";
        this.element.style.borderStyle = "solid";
        void 0 !== a.Wh && ((this.Wh = a.Wh), (this.Wh.style.top = "57px"), this.element.appendChild(a.Wh));
        this.Hl = document.createElement("dt");
        this.Hl.style.margin = "0";
        this.Hl.style.padding = "0 8px 5px 28px";
        this.Hl.style.backgroundSize = "14px 14px";
        this.Hl.innerText = a.label;
        this.element.appendChild(this.Hl);
        var c = a.description;
        void 0 !== c && 0 < c.length && ((this.Bp = document.createElement("dd")), (this.Bp.style.margin = "0"), (this.Bp.style.padding = "0 8px 0 28px"), (this.Bp.innerText = c), this.element.appendChild(this.Bp));
        dB += 1;
        c = "ButtonMenuItem" + dB.toString();
        this.input = document.createElement("input");
        this.input.id = c;
        this.input.name = c;
        this.input.type = "radio";
        this.input.style.cursor = "pointer";
        this.input.style.position = "absolute";
        this.input.style.opacity = "0";
        this.input.style.width = "0";
        this.input.style.height = "0";
        this.element.appendChild(this.input);
        void 0 !== a.dk && (this.dk = a.dk);
        v("mouseenter", this.element, function () {
            b.disabled && void 0 !== b.Wh && b.Kz();
        });
        v("mouseleave", this.element, function () {
            b.disabled && void 0 !== b.Wh && b.Pn();
        });
        this.Cs = a.Cs;
        v("click", this.element, function (d) {
            b.disabled ? void 0 !== b.dk && b.dk(d) : b.Cs(d);
        });
        v("touchstart", this.element, this.rS);
        v("focus", this.input, function () {
            b.element.style.outline = "2px solid Highlight";
        });
        v("blur", this.input, function () {
            b.element.style.removeProperty("outline");
        });
    }
    q(cB, w);
    k = cB.prototype;
    k.select = function () {
        O(this.Hl, "selected");
    };
    k.yn = function () {
        P(this.Hl, "selected");
    };
    k.ld = function () {
        return this.data.value;
    };
    k.Rs = function () {
        var a = this.data.WH;
        return void 0 === a ? this.data.label : a;
    };
    k.disable = function () {
        this.disabled || ((this.disabled = !0), O(this.element, "disabled"));
    };
    k.enable = function () {
        this.disabled && ((this.disabled = !1), P(this.element, "disabled"));
    };
    var dB = 0;
    function fB(a, b) {
        Xu.call(this);
        var c = this;
        this.width = 280;
        this.visible = !1;
        this.pH = new y("visibilityChange");
        this.Wq = new y("selectionChange");
        var d = [],
            e = a.length;
        0 === e && r("ButtonMenu requires at least one option!", "tipping.ts", "ui");
        O(this.element, "menu");
        this.element.style.padding = "0";
        this.element.style.display = "none";
        this.element.style.width = this.width + "px";
        this.element.style.textAlign = "left";
        this.element.style.fontSize = "14px";
        this.element.style.lineHeight = "14px";
        this.element.style.borderRadius = "4px";
        this.S.style.zIndex = "1002";
        this.element.style.zIndex = "1003";
        this.element.style.overflow = "visible";
        this.element.style.removeProperty("height");
        for (var f = -1, g = e - 1, h = {}, m = 0; m < e; h = { hg: h.hg, Bv: h.Bv }, m += 1) {
            var n = a[m];
            n.value === b && (f = m);
            n.Cs = (function (p) {
                return function (u) {
                    u.stopPropagation();
                    c.wq(p.hg);
                };
            })(h);
            h.hg = new cB(n);
            h.Bv = (function (p) {
                return function (u) {
                    u.preventDefault();
                    u.stopPropagation();
                    c.wq(p.hg);
                    return !1;
                };
            })(h);
            v(
                "keyup",
                h.hg.input,
                (function (p) {
                    return function (u) {
                        return 32 === u.keyCode ? p.Bv(u) : !0;
                    };
                })(h)
            );
            v(
                "keydown",
                h.hg.input,
                (function (p) {
                    return function (u) {
                        return 13 === u.keyCode ? p.Bv(u) : !0;
                    };
                })(h)
            );
            0 === m && ((h.hg.element.style.borderTopWidth = "1px"), (h.hg.element.style.borderTopLeftRadius = "2px"), (h.hg.element.style.borderTopRightRadius = "2px"));
            m === g && ((h.hg.element.style.borderBottomLeftRadius = "2px"), (h.hg.element.style.borderBottomRightRadius = "2px"));
            this.G(h.hg);
            d.push(h.hg.input);
        }
        this.Am = this.children()[-1 === f ? 0 : f];
        this.Kp = d;
        this.Wq.g(function (p) {
            p.current.select();
            void 0 !== p.previous && p.previous.yn();
        });
        this.fc.g(function () {
            c.B();
        });
    }
    q(fB, Xu);
    k = fB.prototype;
    k.ld = function () {
        return this.Am.ld();
    };
    k.Rs = function () {
        return this.Am.Rs();
    };
    k.isVisible = function () {
        return this.visible;
    };
    k.show = function (a) {
        this.isVisible() || (this.pH.h(!0), (this.element.style.display = "inline-block"), (this.element.style.top = a.top + "px"), (this.element.style.left = a.left + "px"), this.xh(), (this.visible = !0), this.R());
    };
    k.B = function (a) {
        a = void 0 === a ? !1 : a;
        this.isVisible() && (a || this.pH.h(!1), (this.visible = !1), (this.element.style.display = "none"), this.Lb());
    };
    k.toggle = function (a) {
        this.isVisible() ? this.B() : this.show(a);
    };
    k.Gd = function () {
        Xu.prototype.Gd.call(this);
        var a = { current: this.Am };
        a.current.select();
        void 0 !== a.previous && a.previous.yn();
    };
    k.PC = function () {
        for (var a, b = this.parent; void 0 !== b; b = b.parent)
            if ("hidden" === window.getComputedStyle(b.element).overflowY) {
                a = b.element;
                break;
            }
        return a;
    };
    k.D = function () {
        if (this.isVisible()) {
            var a = this.PC();
            a = (void 0 !== a ? a.getBoundingClientRect().bottom : document.documentElement.clientHeight) - this.element.getBoundingClientRect().bottom;
            32 > a && (this.element.style.top = this.element.offsetTop - (32 - a) + "px");
        }
    };
    k.wq = function (a) {
        var b = this.Am;
        this.B();
        a !== b && ((this.Am = a), this.Wq.h({ previous: b, current: a }));
    };
    function gB(a) {
        w.call(this);
        var b = this;
        this.enabled = this.np = this.Et = !0;
        this.JU = new y("tipTypeChange");
        O(this.element, "sendTip");
        this.element.style.margin = "6px";
        this.element.style.display = "inline-block";
        this.element.style.verticalAlign = "top";
        this.element.style.cssFloat = "right";
        this.element.style.overflow = "visible";
        this.element.style.position = "static";
        this.element.style.removeProperty("width");
        this.element.style.removeProperty("height");
        this.mb = this.iC();
        this.ah = hB(this);
        this.ah.innerHTML = "&#9660;";
        this.ah.id = "id_tip_type_select_tm";
        this.xd = new fB(iB, a);
        this.mb.innerText = this.xd.Rs();
        a = l(this.xd.children());
        for (var c = a.next(); !c.done; c = a.next()) jB(c.value);
        this.element.appendChild(this.mb);
        this.element.appendChild(this.ah);
        this.Pm = this.xd.ld();
        this.G(this.xd);
        this.xd.Wq.g(function (d) {
            b.np && ((d = d.current.ld()), kB(b, d), b.mb.focus());
        });
        v("mouseenter", this.mb, function () {
            b.mb.style.textDecoration = "underline";
        });
        v("mouseleave", this.mb, function () {
            b.mb.style.textDecoration = "none";
        });
        v("click", this.ah, function (d) {
            d.preventDefault();
            d.stopPropagation();
            d = b.element;
            var e = zy(b.mb);
            b.xd.toggle({ top: e.height + 2 * e.top, left: d.offsetLeft + d.offsetWidth + 1 - b.xd.width });
            return !1;
        });
        this.xd.pH.g(function (d) {
            d || b.mb.focus();
        });
        this.Kp = [this.mb, this.ah];
        G.g(function (d) {
            if (d.A.FH) {
                d = b.xd.ld();
                b.np = !0;
                var e = b.xd.children();
                1 < e.length && e[1].enable();
                kB(b, d);
            } else (b.np = !1), (d = b.xd.children()), 1 < d.length && d[1].disable(), kB(b, "public");
        });
    }
    q(gB, w);
    function lB(a, b) {
        a.mb.innerHTML = b + " &#9656;";
        a.mb.title = b;
        a.Et && (a.hasFocus() && a.mb.focus(), (a.Et = !1), a.xd.B(), (a.mb.style.borderRadius = "4px"), (a.ah.style.display = "none"), (a.Kp = [a.mb]));
    }
    function mB(a) {
        a.np ? ((a.mb.innerText = a.xd.Rs()), (a.mb.title = a.xd.Rs())) : ((a.mb.innerHTML = Rf), (a.mb.title = Rf));
    }
    k = gB.prototype;
    k.isEnabled = function () {
        return this.enabled;
    };
    k.disable = function () {
        this.isEnabled() && ((this.enabled = !1), this.xd.B(), (this.mb.disabled = !0), O(this.mb, "disabled"), (this.ah.disabled = !0), O(this.ah, "disabled"));
    };
    k.enable = function () {
        this.isEnabled() || ((this.enabled = !0), (this.mb.disabled = !1), P(this.mb, "disabled"), (this.ah.disabled = !1), P(this.ah, "disabled"));
    };
    k.hasFocus = function () {
        return -1 < nB(this).index;
    };
    function oB(a) {
        a = nB(a);
        var b = a.elements.length;
        --a.index;
        if (-2 === a.index) a.index = b - 1;
        else if (-1 === a.index) return !1;
        a.elements[a.index].focus();
        return !0;
    }
    function pB(a) {
        a = nB(a);
        var b = a.elements.length;
        a.index += 1;
        if (a.index >= b) return !1;
        a.elements[a.index].focus();
        return !0;
    }
    function nB(a) {
        var b = a.Kp;
        a.Et && a.xd.isVisible() && (b = a.Kp.concat(a.xd.Kp));
        return { elements: b, index: b.indexOf(document.activeElement) };
    }
    function kB(a, b) {
        a.Pm = b;
        a.JU.h(b);
        mB(a);
    }
    function jB(a) {
        a.Hl.style.fontFamily = "'UbuntuMedium', Helvetica, Arial, sans-serif";
        void 0 !== a.Bp && (a.Bp.style.fontFamily = "'UbuntuRegular', Helvetica, Arial, sans-serif");
    }
    k.uw = function () {
        var a = document.createElement("button");
        O(a, "buttons");
        a.style.position = "relative";
        a.style.display = "inline-block";
        a.style.cursor = "pointer";
        a.style.fontSize = "14px";
        a.style.borderWidth = "1px";
        a.style.borderStyle = "solid";
        a.style.height = "32px";
        a.style.verticalAlign = "top";
        a.style.margin = "0";
        v("focus", a, function () {
            a.style.zIndex = "100";
        });
        v("blur", a, function () {
            a.style.zIndex = "auto";
        });
        return a;
    };
    k.iC = function () {
        var a = this.uw();
        a.type = "submit";
        a.title = Rf;
        a.style.padding = "6px 18px";
        a.style.borderRadius = "4px 0 0 4px";
        a.style.borderRight = "0 none transparent";
        a.style.maxWidth = "145px";
        a.style.overflow = "hidden";
        a.style.textOverflow = "ellipsis";
        a.style.whiteSpace = "nowrap";
        return a;
    };
    function hB(a) {
        a = a.uw();
        a.style.padding = "6px 0";
        a.style.borderRadius = "0 4px 4px 0";
        a.style.width = "24px";
        return a;
    }
    var iB = [
        { label: Uf, value: "public", description: Vf, WH: Rf, Cs: function () {} },
        {
            label: Wf,
            value: "anonymous",
            description: Xf,
            WH: ag,
            Cs: function () {},
            dk: function () {
                F("SupporterPageOpened", { source: "anon_tip" });
                null !== window.top && (window.top.location.href = "/supporter/upgrade/?source=" + A.current.Ub.SUPPORTER_SOURCE_ANON_TIP_UPSELL);
            },
            Wh: nw({ content: cn, qg: !1, width: 240, Rc: 0, wd: "40px" }),
            oJ: cn + " " + cg,
        },
    ];
    function qB(a, b) {
        window.setTimeout(function () {
            b.np && F("SendTipViewed", { source: a, tipType: b.Pm, localStorage: Qa() });
        }, 0);
    }
    function rB(a) {
        a = a.source;
        if ("" === window.location.search) {
            var b = "/tipping/purchase_tokens/";
            null !== a && void 0 !== a && "" !== a && (b += "?source=" + a);
        } else (b = "/tipping/purchase_tokens/" + window.location.search), null !== a && void 0 !== a && "" !== a && (b += "&source=" + a);
        return b;
    }
    function sB() {
        var a = document.createElement("input");
        O(a, "tipAmountInput");
        v("keypress", a, function (b) {
            b.metaKey || 8 === b.charCode || 0 === b.charCode || 13 === b.charCode || (15 < a.value.length ? b.preventDefault() : (48 <= b.charCode && 57 >= b.charCode) || b.preventDefault());
        });
        v("paste", a, function () {
            window.setTimeout(function () {
                /^[1-9]\d*$/.test(a.value) || (a.value = "");
                a.value = a.value.substring(0, 15);
            }, 0);
        });
        return a;
    }
    var tB;
    function uB(a) {
        var b = void 0 === a ? {} : a;
        a = void 0 === b.Yy ? !1 : b.Yy;
        b = void 0 === b.source ? void 0 : b.source;
        var c = rB({ source: b }),
            d = new Xd(["PrchPgIfrmV4", "PrchPgPopupV4"], "purchaseredesign");
        d.Co();
        d.Cn && d.active
            ? ((c = d.lp),
              (b = rB({ source: b })),
              "PrchPgIfrmV4" === c
                  ? a
                      ? uu(b, "_blank", "height=715, width=430, scrollbars=1")
                      : void 0 === tB || tB.MD
                      ? (tB = new $A())
                      : tB.show()
                  : "PrchPgPopupV4" === c
                  ? uu(b, "_blank", "height=715, width=430, scrollbars=1")
                  : uu(b, "_blank", "height=615, width=850, scrollbars=1"))
            : uu(c, "_blank", "height=615, width=850, scrollbars=1");
    }
    function vB(a, b, c) {
        b = void 0 === b ? !1 : b;
        Md(
            a,
            function () {
                uB({ Yy: b, source: c });
            },
            void 0,
            { Kv: eg }
        );
    }
    function wB(a) {
        for (var b = l(document.querySelectorAll(".tokencount[updatable-count]")), c = b.next(); !c.done; c = b.next()) c.value.textContent = "" + a;
    }
    function xB(a) {
        var b = a.dataset.purchaseEventSource;
        if (null !== b && void 0 !== b && "" !== b && Object.values(A.current.Ub).includes(b))
            return Object.values(A.current.Ub).find(function (c) {
                return c === b;
            });
    }
    function yB(a) {
        a.onclick = function (b) {
            a.classList.contains("welcome-page-purchase-tokens") && F("WelcomePagePurchaseTokensClicked");
            if (!b.ctrlKey && !b.metaKey) {
                var c = xB(a);
                b.preventDefault();
                uB({ Yy: b.target.className.includes("popup_only"), source: c });
            }
        };
        "" === a.href && (a.href = "/tipping/purchase_tokens/");
    }
    function zB(a, b) {
        w.call(this);
        var c = this;
        this.username = a;
        this.SS = b;
        this.hR = function (d) {
            d.metaKey || 8 === d.charCode || 0 === d.charCode || (15 < c.Mg.value.length ? d.preventDefault() : (48 <= d.charCode && 57 >= d.charCode) || (13 === d.keyCode && c.LN(), d.preventDefault()));
        };
        this.gR = function () {
            window.setTimeout(function () {
                /^[1-9]\d*$/.test(c.Mg.value) || (c.Mg.value = "");
                c.Mg.value = c.Mg.value.substring(0, 15);
            }, 0);
        };
        this.iR = function (d) {
            c.ug && 13 !== d.keyCode && (AB(c, Ve(c.username)), (c.ug = !1));
            BB(c);
        };
        this.LN = function () {
            if ("none" === c.xv.style.display) {
                var d = parseInt(c.Mg.value);
                isNaN(d) ||
                    (F("SendTipClicked", { amount: d, location: "PMWindow" }),
                    100 < d && !c.ug
                        ? (AB(c, he(d)), (c.ug = !0), c.Jo.focus())
                        : ZA({ J: c.username, KG: c.Mg.value, message: c.kA.value, source: "sitewide", LG: "sitewidePMs", Pm: "public", ee: Y() })
                              .then(function (e) {
                                  e.success
                                      ? (F("SendTipSuccess", { amount: d, location: "PMWindow" }), c.mk())
                                      : void 0 !== e.error
                                      ? !0 === e.aO
                                          ? vB(e.error)
                                          : R(e.error)
                                      : r("unknown send tip error", "pmTipCallout.tsx", "components");
                                  c.kA.value = "";
                                  void 0 !== e.$e && VA.h({ Ua: e.$e, J: c.username });
                              })
                              .catch(function (e) {
                                  r("Error sending tip (" + e + ")", "pmTipCallout.tsx", "components");
                              })
                              .finally(function () {
                                  AB(c, Ve(c.username));
                                  c.ug = !1;
                              }));
            }
        };
        this.mk = function () {
            c.SS();
        };
        this.H = new Ub();
        this.ug = !1;
        CB(this);
        z(
            WA.g(function (d) {
                c.pv(d.Ua);
            }, !1),
            this.H
        );
    }
    q(zB, w);
    k = zB.prototype;
    k.cC = function () {
        return (this.S = V("div", { style: { display: "block", width: "100%", height: "225px", position: "absolute", bottom: 0, left: 0, cursor: "pointer" }, colorClass: "pmWindowTipOverlay", onClick: this.mk }));
    };
    k.zw = function () {
        var a = this;
        return (this.element = V(
            "div",
            { colorClass: "pmWindowTipCallout", style: { position: "absolute", bottom: "0px", height: "183px", width: "280px", fontSize: "12px", zIndex: 999 } },
            V(
                "div",
                { style: { height: "31px", lineHeight: "31px", borderRadius: "4px 4px 0px 0px", padding: "0 6px" }, colorClass: "titleBar" },
                V("span", { style: { fontSize: "14px", fontWeight: "bold" } }, Tf),
                V(DB, { style: { right: "5px", top: "-4px", cursor: "pointer" }, $j: this.mk })
            ),
            V(
                "div",
                { style: { padding: "6px", boxSizing: "border-box" } },
                V(
                    "div",
                    null,
                    V("span", null, Rh),
                    V("span", {
                        style: { margin: "0 5px", display: "inline-block", width: "90px" },
                        colorClass: "tokenBalance",
                        ref: function (b) {
                            return (a.YI = b);
                        },
                    }),
                    V(
                        "a",
                        {
                            onClick: function () {
                                uu("/tipping/purchase_tokens/?source=" + A.current.Ub.TOKEN_SOURCE_PRIVATE_MESSAGE_WINDOW, "_blank", "height=615, width=850");
                            },
                            colorClass: "purchaseLink",
                            style: { textDecoration: "underline", cursor: "pointer" },
                            ref: function (b) {
                                return (a.cR = b);
                            },
                        },
                        Aq
                    )
                ),
                V(
                    "div",
                    null,
                    V("span", null, Vh),
                    V("input", {
                        type: "text",
                        style: { width: "69px", height: "24px", borderWidth: "1px", borderStyle: "solid", boxSizing: "border-box", borderRadius: "4px", marginLeft: "5px" },
                        colorClass: "tipInput",
                        value: 25,
                        onKeyPress: this.hR,
                        onPaste: this.gR,
                        onKeyUp: this.iR,
                        ref: function (b) {
                            a.Mg = b;
                        },
                    }),
                    V(
                        "span",
                        {
                            style: { marginLeft: "8px", display: "none" },
                            colorClass: "tokenInputError",
                            ref: function (b) {
                                a.xv = b;
                            },
                        },
                        Bq
                    )
                ),
                V("div", null, Qf),
                V("textarea", {
                    style: { width: "100%", height: "32px", borderRadius: "4px", resize: "none", borderWidth: "1px", borderStyle: "solid", margin: "5px 0 0 0", boxSizing: "border-box" },
                    colorClass: "tipMessage",
                    ref: function (b) {
                        return (a.kA = b);
                    },
                }),
                V(
                    "div",
                    { style: { width: "100%", display: "flex", justifyContent: "flex-end", marginTop: "5px" } },
                    V(
                        "button",
                        {
                            style: { boxSizing: "border-box", maxWidth: "100%", height: "32px", fontSize: "14px", fontWeight: "bold", cursor: "pointer", overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" },
                            colorClass: "sendTipButton",
                            onClick: this.LN,
                            ref: function (b) {
                                return (a.Jo = b);
                            },
                        },
                        Ve(this.username)
                    )
                )
            )
        ));
    };
    k.dispose = function () {
        Vb(this.H);
    };
    k.focus = function () {
        this.Mg.focus();
        this.Mg.setSelectionRange(0, 9999);
    };
    function CB(a) {
        XA(a.username)
            .then(function (b) {
                a.YI.innerText = b.ob + " " + ge(b.ob, !1);
            })
            .catch(ct);
    }
    k.pv = function (a) {
        this.YI.innerText = a + " " + ge(a, !1);
    };
    function BB(a) {
        /^[1-9]\d*$/.test(a.Mg.value) ? ((a.xv.style.display = "none"), (a.Jo.style.cursor = "pointer"), (a.Jo.disabled = !1)) : (a.YN(), (a.Jo.style.cursor = ""), (a.Jo.disabled = !0));
    }
    k.YN = function () {
        this.xv.style.display = "";
    };
    function AB(a, b) {
        a.Jo.textContent = b;
        a.Jo.title = b;
    }
    function EB(a) {
        var b = (Date.now() - a.getTime()) / 1e3;
        return 60 > b
            ? Zo
            : 120 >= b
            ? $o
            : 3600 > b
            ? Math.floor(b / 60) + " " + cp
            : 7200 >= b
            ? ap
            : 86400 > b
            ? Math.floor(b / 3600) + " " + dp
            : 172800 >= b
            ? bp
            : 604800 > b
            ? Math.floor(b / 86400) + " " + ep
            : a.toLocaleDateString();
    }
    var FB = new y("switchedToHLS");
    new y("openTipCalloutRequest");
    var GB = new y("loadRoomRequest");
    new y("userPanelRequest");
    new y("sendMessageInputFocus");
    new y("sendMessageInputBlur");
    var HB = new y("siteHeaderMenuOpened");
    new y("tabChanged");
    var IB = new y("toggleSitewidePms");
    var JB = new y("privateJoinInitiated");
    function KB(a) {
        var b = "tipping/private_show_tokens_per_minute/" + a + "/";
        return new Promise(function (c, d) {
            C(b)
                .then(function (e) {
                    e = new H(e.responseText);
                    c({ RL: Sc(e, "private_show_minimum_minutes"), VM: N(e, "price"), dN: M(e, "recordings_allowed"), kP: M(e, "allowed", !0, !1) });
                    ad(e);
                })
                .catch(function (e) {
                    d(e);
                });
        });
    }
    function LB(a) {
        JB.h(void 0);
        Wu(tk) ||
            (F("RequestPrivateShow"),
            KB(a.j())
                .then(function (b) {
                    if (b.kP) {
                        var c = se(a.j(), b.VM, b.RL, b.dN);
                        Md(c, function () {
                            MB(a, b.VM, b.RL, b.dN)
                                .then(function (d) {
                                    "" !== d && vB(d, !1, A.current.Ub.TOKEN_SOURCE_LOW_TOKEN_BALANCE);
                                })
                                .catch(function (d) {
                                    "privatewatching" !== a.status && (R(fk), r("Error entering private show: " + d, "privateShow.ts", "common"));
                                });
                            F("StartPrivateShow");
                        });
                    } else R(sk);
                })
                .catch(function () {}));
    }
    function NB(a) {
        JB.h(void 0);
        if (!Wu(uk)) {
            F("RequestSpyShow");
            var b = "tipping/spy_on_private_show_tokens_per_minute/" + a.j() + "/";
            C(b)
                .then(function (c) {
                    var d = Number(c.responseText);
                    isNaN(d)
                        ? r("isNaN on " + c.responseText, "privateShow.ts", "common")
                        : 0 === d
                        ? R(vk)
                        : Md(T(S("Spy on private show for (%(price)s tokens per minute)"), { price: d }, !0), function () {
                              OB(a)
                                  .then(function (e) {
                                      "" !== e && vB(e, !1, A.current.Ub.TOKEN_SOURCE_LOW_TOKEN_BALANCE);
                                  })
                                  .catch(function (e) {
                                      "privatespying" !== a.status && (R(gk), r("Error entering spy show: " + e, "privateShow.ts", "common"));
                                  });
                              F("StartSpyShow");
                          });
                })
                .catch(function () {});
        }
    }
    function PB(a, b) {
        Md(
            kk,
            function () {
                F("LeavePrivateOrSpyShow");
                QB(a)
                    .then(function (c) {
                        void 0 !== b && b();
                        "" !== c && R(c);
                    })
                    .catch(function () {});
            },
            function () {
                void 0 !== b && b();
            }
        );
    }
    function RB() {
        E("tipping/private_show_approve/", { foo: "bar" })
            .then(function () {})
            .catch(function () {});
    }
    function SB() {
        E("tipping/private_show_decline/", { foo: "bar" })
            .then(function () {})
            .catch(function () {});
    }
    function TB() {
        E("tipping/return_from_away/", { foo: "bar" })
            .then(function () {})
            .catch(function () {});
    }
    function UB(a, b, c) {
        this.red = a;
        this.green = b;
        this.blue = c;
        this.$v = this.lx = this.jz = 10;
    }
    function VB(a, b) {
        var c = void 0 === c ? !1 : c;
        for (b = Math.min(255, b); b > a.brightness() && (!c || (255 !== a.red && 255 !== a.green && 255 !== a.blue)); )
            (a.red = Math.min(a.red + Math.max(1, 0.05 * a.red), 255)), (a.green = Math.min(a.green + Math.max(1, 0.05 * a.green), 255)), (a.blue = Math.min(a.blue + Math.max(1, 0.05 * a.blue), 255));
        a.red = Math.round(a.red);
        a.green = Math.round(a.green);
        a.blue = Math.round(a.blue);
    }
    UB.prototype.brightness = function () {
        return Math.round((this.jz / (this.jz + this.lx + this.$v)) * this.red + (this.lx / (this.jz + this.lx + this.$v)) * this.green + (this.$v / (this.jz + this.lx + this.$v)) * this.blue);
    };
    Object.assign(Object.assign({}, { ad: "videoPanel", $o: "tipOptions" }), { pY: "rewriteMessages" });
    function WB(a) {
        return {
            items: Rc(new H(a), "items").map(function (b) {
                b = new H(b);
                return { id: L(b, "id"), name: L(b, "name"), slot: N(b, "slot") };
            }),
        };
    }
    function XB(a) {
        return C("api/public/asp/broadcast/applist/" + a + "/").then(function (b) {
            return WB(b.responseText);
        });
    }
    var YB;
    function ZB(a) {
        void 0 === YB && (YB = XB(a));
        window.setTimeout(function () {
            YB = void 0;
        }, 1e3);
        return YB;
    }
    function $B() {
        w.call(this);
        this.nq = document.createElement("div");
        this.Uw = document.createElement("div");
        this.oG = this.hr = !1;
        this.params = {};
        this.pathname = "";
        this.element.style.position = "static";
        this.element.style.minHeight = "325px";
        this.element.style.margin = "14px";
        this.element.style.boxSizing = "border-box";
        this.element.style.width = "";
        this.element.style.height = "";
        this.element.style.paddingLeft = "8px";
        this.nq.innerText = Zg + "\u2026";
        this.nq.style.fontSize = "1.2em";
        this.Uw.innerText = "An error occurred trying to load this tab";
        this.Uw.style.fontSize = "1.2em";
    }
    q($B, w);
    $B.prototype.wp = function () {
        Kb(this);
    };
    $B.prototype.load = function (a, b) {
        var c = this;
        a = void 0 === a ? !0 : a;
        this.oG = !1;
        if ("" === this.pathname) this.wp(), aC(this, {});
        else {
            a && (this.wp(), this.element.appendChild(this.nq));
            var d = Ac(this.params);
            C(this.pathname + "?" + d)
                .then(function (e) {
                    try {
                        var f = c.L(e.responseText);
                    } catch (g) {
                        bC(c);
                        r("Error parsing response from resource " + c.pathname + ":", "baseRoomTab.ts", "broadcastTabs", g);
                        return;
                    }
                    a && c.nq.parentElement === c.element && c.element.removeChild(c.nq);
                    c.wp();
                    aC(c, f);
                    void 0 !== b && b();
                })
                .catch(function (e) {
                    r("Fetch data error " + c.pathname + ": " + e, "baseRoomTab.ts", "broadcastTabs");
                    bC(c);
                });
        }
    };
    function bC(a) {
        a.wp();
        a.oG = !0;
        a.element.appendChild(a.Uw);
    }
    $B.prototype.show = function (a, b) {
        this.hr = !0;
        this.element.style.display = "";
        this.load(!0, b);
    };
    $B.prototype.B = function () {
        this.hr = !1;
        this.element.style.display = "none";
    };
    new y("reloadAppTab", { ii: 1 });
    function cC() {
        var a = document.createElement("div");
        a.style.width = "100%";
        a.style.display = "inline-block";
        a.style.padding = "2px";
        return a;
    }
    function dC() {
        var a = void 0 === a ? "" : a;
        var b = document.createElement("div");
        b.style.fontFamily = "Tahoma,Arial,Helvetica,sans-serif";
        b.style.boxSizing = "border-box";
        b.style.width = "100%";
        b.style.paddingTop = "3px";
        b.style.paddingBottom = "3px";
        b.style.paddingLeft = "5px";
        b.style.paddingRight = "5px";
        b.style.overflowX = "hidden";
        0 < a.length && b.setAttribute("data-nick", a);
        return b;
    }
    function eC(a, b) {
        return b.username === a ? rm + " " : b.ec ? sm + " " : b.zd ? tm + " " : um + " ";
    }
    function fC() {
        var a = av();
        a = new UB(a.red, a.green, a.blue);
        var b = a.brightness();
        VB(a, 255 - b / 3);
        return "rgb(" + a.red + ", " + a.green + ", " + a.blue + ")";
    }
    function gC() {
        var a = document.createElement("span");
        a.innerText = ", ";
        return a;
    }
    function hC(a, b) {
        return new Promise(function (c, d) {
            ZB(a)
                .then(function (e) {
                    var f = document.createElement("span");
                    if (0 !== e.items.length) {
                        var g = document.createElement("span");
                        f.appendChild(g);
                        g = 0;
                        for (var h = {}, m = l(e.items), n = m.next(); !n.done; h = { Je: h.Je }, n = m.next())
                            (n = n.value),
                                (g += 1),
                                (h.Je = void 0),
                                "mobile" === b
                                    ? ((h.Je = document.createElement("div")), (h.Je.style.display = "inline"), (h.Je.style.position = "relative"), (h.Je.innerText = n.name))
                                    : ((h.Je = document.createElement("a")),
                                      (h.Je.href = "/apps2/" + n.slot + "/" + (n.id.split("-", 1)[0] + "-" + n.name.replace(/[^a-zA-Z0-9]/g, "-")) + "/"),
                                      (h.Je.target = "_blank"),
                                      (h.Je.innerText = n.name),
                                      O(h.Je, "msg-link"),
                                      (h.Je.onmouseenter = (function (p) {
                                          return function () {
                                              p.Je.style.textDecoration = "underline";
                                          };
                                      })(h)),
                                      (h.Je.onmouseleave = (function (p) {
                                          return function () {
                                              p.Je.style.textDecoration = "none";
                                          };
                                      })(h))),
                                f.appendChild(h.Je),
                                g < e.items.length && f.appendChild(gC());
                    }
                    c(f);
                })
                .catch(function (e) {
                    d(e);
                });
        });
    }
    function iC(a, b, c, d) {
        return Wy(this, function f() {
            var g, h, m, n, p;
            return Aa(f, function (u) {
                switch (u.aa) {
                    case 1:
                        g = dC();
                        h = document.createElement("span");
                        h.innerText = te(a);
                        g.appendChild(h);
                        m = {};
                        for (n = 0; n < c.length; m = { Ke: m.Ke }, n += 1)
                            (m.Ke = void 0),
                                "mobile" === d
                                    ? ((m.Ke = document.createElement("div")), (m.Ke.style.display = "inline"), (m.Ke.style.position = "relative"), (m.Ke.innerText = c[n].fB))
                                    : ((m.Ke = document.createElement("a")),
                                      (m.Ke.href = c[n].IH),
                                      (m.Ke.target = "_blank"),
                                      (m.Ke.innerText = c[n].fB),
                                      O(m.Ke, "msg-link"),
                                      (m.Ke.onmouseenter = (function (x) {
                                          return function () {
                                              x.Ke.style.textDecoration = "underline";
                                          };
                                      })(m)),
                                      (m.Ke.onmouseleave = (function (x) {
                                          return function () {
                                              x.Ke.style.textDecoration = "none";
                                          };
                                      })(m))),
                                g.appendChild(m.Ke),
                                n < c.length - 1 && g.appendChild(gC()),
                                g.setAttribute("data-purecolor", fC()),
                                (g.className = "purecolor");
                        u.kn = 2;
                        return sa(u, hC(b, d), 4);
                    case 4:
                        p = u.td;
                        if ("" === p.innerText && 0 === c.length) return u.return(Promise.resolve(document.createElement("div")));
                        if ("" === p.innerText) return u.return(Promise.resolve(g));
                        0 < c.length && g.appendChild(gC());
                        g.appendChild(p);
                        ta(u, 3);
                        break;
                    case 2:
                        ua(u), 0 === c.length && (g = document.createElement("div"));
                    case 3:
                        return u.return(Promise.resolve(g));
                }
            });
        });
    }
    function jC(a, b) {
        var c = a.dataset.ts;
        if (void 0 === c || "" === c) b.appendChild(a);
        else {
            for (var d = b.children, e = b.children.length, f = 100 > d.length ? 0 : d.length - 100, g = d.length - 1; g > f; --g) {
                var h = d[g].getAttribute("data-ts");
                if (null !== h && "" !== h)
                    if (Number.parseInt(h) < Number.parseInt(c)) break;
                    else e = g;
            }
            e >= b.children.length ? b.appendChild(a) : b.insertBefore(a, d[e]);
        }
    }
    var kC = ["smcBadge", "followerBadge", "notesBadge"];
    function lC(a, b) {
        mC.has(a) ? r("Generator already registered for badge", "chatBadgeManager.ts", "common", a) : mC.set(a, b);
    }
    function nC(a) {
        var b = document.createElement("span");
        Q(b, { display: "inline-block", verticalAlign: "middle", marginTop: "-.5em", marginBottom: "-.5em", marginRight: "1px", overflow: "visible" });
        kC.forEach(function (c) {
            var d = mC.get(c);
            void 0 !== d && ((d = d(a)), d.classList.add(c + "_" + a), b.appendChild(d));
        });
        return b;
    }
    var mC = new Map();
    function oC() {
        return new Promise(function (a, b) {
            C("api/broadcastvideocontext/")
                .then(function (c) {
                    a(pC(c.responseText));
                })
                .catch(b);
        });
    }
    function pC(a) {
        return new Promise(function (b, c) {
            var d = new H(a);
            400 <= N(d, "status", !1) ? c("Bad response from server: " + a) : ((c = { j: L(d, "room"), YE: L(d, "originHost"), uS: L(d, "originPassword"), vS: L(d, "originWSEndpoint") }), b(c));
        });
    }
    var qC = new y("tryFullScreen");
    for (var rC = [], sC = 0; 256 > sC; ++sC) rC[sC] = (sC + 256).toString(16).substr(1);
    var tC = [
        [640, 360],
        [960, 540],
        [1280, 720],
    ];
    function uC(a) {
        var b;
        void 0 === b && (b = 200);
        a.forEach(function (c) {
            c.stop();
        });
        return new Promise(function (c) {
            window.setTimeout(function () {
                c();
            }, b);
        });
    }
    function vC() {
        return new Promise(function (a, b) {
            var c = "DevicePermsOnLoadGranted",
                d = "DevicePermsOnLoadDenied",
                e = "PermanentDevicePermsOnLoadDenied",
                f = Date.now();
            window.setTimeout(function () {
                c = "DevicePermsRequestGranted";
                d = "DevicePermsRequestDenied";
                e = "PermanentDevicePermsRequestDenied";
            }, 1e3);
            navigator.mediaDevices
                .getUserMedia({ audio: !0, video: !0 })
                .then(function (g) {
                    uC(g.getTracks())
                        .then(function () {
                            navigator.mediaDevices
                                .enumerateDevices()
                                .then(function (h) {
                                    h = Promise.all(
                                        h.map(function (n) {
                                            if ("videoinput" === n.kind) {
                                                var p = new Map();
                                                tC.forEach(function (u) {
                                                    var x = u[0];
                                                    u = u[1];
                                                    if (kb() && jb() && 960 === x && 540 === u) x = void 0;
                                                    else {
                                                        var D = x / u;
                                                        x = { id: x + "x" + u, tp: n.deviceId, label: x + " x " + u, width: x, height: u, ratio: D, Re: 1.4 < D, DR: 720 <= u };
                                                    }
                                                    void 0 !== x && p.set(x.id, x);
                                                });
                                                return Promise.resolve({ device: n, resolutions: p });
                                            }
                                            return Promise.resolve({ device: n });
                                        })
                                    );
                                    var m = { wE: new Map(), Vr: new Map() };
                                    h.then(function (n) {
                                        var p = !0;
                                        n.forEach(function (u) {
                                            var x = u.device;
                                            "" !== x.label && (p = !1);
                                            "audioinput" === x.kind
                                                ? m.wE.set(x.deviceId, { id: x.deviceId, label: x.label })
                                                : "videoinput" === x.kind && void 0 !== u.resolutions && 0 < u.resolutions.size && m.Vr.set(x.deviceId, { id: x.deviceId, label: x.label, nN: u.resolutions });
                                        });
                                        p ? (F(e, { time_elapsed_ms: Date.now() - f }), b(Error(vl))) : (F(c, { time_elapsed_ms: Date.now() - f }), a(m));
                                    }).catch(function (n) {
                                        b(n);
                                    });
                                })
                                .catch(function () {});
                        })
                        .catch(function () {});
                })
                .catch(function (g) {
                    F(d, { time_elapsed_ms: Date.now() - f });
                    b(g);
                });
        });
    }
    function wC() {
        return navigator.mediaDevices.enumerateDevices().then(function (a) {
            var b = !1,
                c = !1;
            a.forEach(function (d) {
                "" !== d.label && ("audioinput" === d.kind && (b = !0), "videoinput" === d.kind && (c = !0));
            });
            return b && c;
        });
    }
    var xC = {
            v: [{ name: "version", fa: /^(\d*)$/, ca: "%s" }],
            o: [{ name: "origin", fa: /^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/, ca: "%s %s %d %s IP%d %s", names: "username sessionId sessionVersion netType ipVer address".split(" ") }],
            s: [{ name: "name", fa: /(.*)/, ca: "%s" }],
            i: [{ name: "description", fa: /(.*)/, ca: "%s" }],
            u: [{ name: "uri", fa: /(.*)/, ca: "%s" }],
            e: [{ name: "email", fa: /(.*)/, ca: "%s" }],
            p: [{ name: "phone", fa: /(.*)/, ca: "%s" }],
            z: [{ name: "timezones", fa: /(.*)/, ca: "%s" }],
            r: [{ name: "repeats", fa: /(.*)/, ca: "%s" }],
            t: [{ name: "timing", fa: /^(\d*) (\d*)/, ca: "%d %d", names: ["start", "stop"] }],
            c: [{ name: "connection", fa: /^IN IP(\d) (\S*)/, ca: "IN IP%d %s", names: ["version", "ip"] }],
            b: [{ push: "bandwidth", fa: /^(TIAS|AS|CT|RR|RS):(\d*)/, ca: "%s:%s", names: ["type", "limit"] }],
            m: [{ fa: /^(\w*) (\d*) ([\w/]*)(?: (.*))?/, ca: "%s %d %s %s", names: ["type", "port", "protocol", "payloads"] }],
            a: [
                {
                    push: "rtp",
                    fa: /^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,
                    names: ["payload", "codec", "rate", "encoding"],
                    ca: function (a) {
                        return void 0 !== a.encoding ? "rtpmap:%d %s/%s/%s" : void 0 !== a.rate ? "rtpmap:%d %s/%s" : "rtpmap:%d %s";
                    },
                },
                { push: "fmtp", fa: /^fmtp:(\d*) ([\S| ]*)/, names: ["payload", "config"], ca: "fmtp:%d %s" },
                { name: "control", fa: /^control:(.*)/, ca: "control:%s" },
                {
                    name: "rtcp",
                    fa: /^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,
                    names: ["port", "netType", "ipVer", "address"],
                    ca: function (a) {
                        return void 0 !== a.address ? "rtcp:%d %s IP%d %s" : "rtcp:%d";
                    },
                },
                { push: "rtcpFbTrrInt", fa: /^rtcp-fb:(\*|\d*) trr-int (\d*)/, names: ["payload", "value"], ca: "rtcp-fb:%d trr-int %d" },
                {
                    push: "rtcpFb",
                    fa: /^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,
                    names: ["payload", "type", "subtype"],
                    ca: function (a) {
                        return void 0 !== a.subtype ? "rtcp-fb:%s %s %s" : "rtcp-fb:%s %s";
                    },
                },
                {
                    push: "ext",
                    fa: /^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,
                    names: ["value", "direction", "encrypt-uri", "uri", "config"],
                    ca: function (a) {
                        return "extmap:%d" + (void 0 !== a.direction ? "/%s" : "%v") + (void 0 !== a["encrypt-uri"] ? " %s" : "%v") + " %s" + (void 0 !== a.config ? " %s" : "");
                    },
                },
                { name: "extmapAllowMixed", fa: /^(extmap-allow-mixed)/, ca: "%s" },
                {
                    push: "crypto",
                    fa: /^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,
                    names: ["id", "suite", "config", "sessionConfig"],
                    ca: function (a) {
                        return void 0 !== a.sessionConfig ? "crypto:%d %s %s %s" : "crypto:%d %s %s";
                    },
                },
                { name: "setup", fa: /^setup:(\w*)/, ca: "setup:%s" },
                { name: "connectionType", fa: /^connection:(new|existing)/, ca: "connection:%s" },
                { name: "mid", fa: /^mid:([^\s]*)/, ca: "mid:%s" },
                { name: "msid", fa: /^msid:(.*)/, ca: "msid:%s" },
                { name: "ptime", fa: /^ptime:(\d*)/, ca: "ptime:%d" },
                { name: "maxptime", fa: /^maxptime:(\d*)/, ca: "maxptime:%d" },
                { name: "direction", fa: /^(sendrecv|recvonly|sendonly|inactive)/, ca: "%s" },
                { name: "icelite", fa: /^(ice-lite)/, ca: "%s" },
                { name: "iceUfrag", fa: /^ice-ufrag:(\S*)/, ca: "ice-ufrag:%s" },
                { name: "icePwd", fa: /^ice-pwd:(\S*)/, ca: "ice-pwd:%s" },
                { name: "fingerprint", fa: /^fingerprint:(\S*) (\S*)/, names: ["type", "hash"], ca: "fingerprint:%s %s" },
                {
                    push: "candidates",
                    fa: /^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,
                    names: "foundation component transport priority ip port type raddr rport tcptype generation network-id network-cost".split(" "),
                    ca: function (a) {
                        var b = "candidate:%s %d %s %d %s %d typ %s" + (void 0 !== a.raddr ? " raddr %s rport %d" : "%v%v");
                        b += void 0 !== a.tcptype ? " tcptype %s" : "%v";
                        void 0 !== a.generation && (b += " generation %d");
                        b += void 0 !== a["network-id"] ? " network-id %d" : "%v";
                        return (b += void 0 !== a["network-cost"] ? " network-cost %d" : "%v");
                    },
                },
                { name: "endOfCandidates", fa: /^(end-of-candidates)/, ca: "%s" },
                { name: "remoteCandidates", fa: /^remote-candidates:(.*)/, ca: "remote-candidates:%s" },
                { name: "iceOptions", fa: /^ice-options:(\S*)/, ca: "ice-options:%s" },
                {
                    push: "ssrcs",
                    fa: /^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,
                    names: ["id", "attribute", "value"],
                    ca: function (a) {
                        var b = "ssrc:%d";
                        void 0 !== a.attribute && ((b += " %s"), void 0 !== a.value && (b += ":%s"));
                        return b;
                    },
                },
                { push: "ssrcGroups", fa: /^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/, names: ["semantics", "ssrcs"], ca: "ssrc-group:%s %s" },
                { name: "msidSemantic", fa: /^msid-semantic:\s?(\w*) (\S*)/, names: ["semantic", "token"], ca: "msid-semantic: %s %s" },
                { push: "groups", fa: /^group:(\w*) (.*)/, names: ["type", "mids"], ca: "group:%s %s" },
                { name: "rtcpMux", fa: /^(rtcp-mux)/, ca: "%s" },
                { name: "rtcpRsize", fa: /^(rtcp-rsize)/, ca: "%s" },
                {
                    name: "sctpmap",
                    fa: /^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,
                    names: ["sctpmapNumber", "app", "maxMessageSize"],
                    ca: function (a) {
                        return void 0 !== a.maxMessageSize ? "sctpmap:%s %s %s" : "sctpmap:%s %s";
                    },
                },
                { name: "xGoogleFlag", fa: /^x-google-flag:([^\s]*)/, ca: "x-google-flag:%s" },
                {
                    push: "rids",
                    fa: /^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,
                    names: ["id", "direction", "params"],
                    ca: function (a) {
                        return void 0 !== a.params ? "rid:%s %s %s" : "rid:%s %s";
                    },
                },
                {
                    push: "imageattrs",
                    fa: RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),
                    names: ["pt", "dir1", "attrs1", "dir2", "attrs2"],
                    ca: function (a) {
                        return "imageattr:%s %s %s" + (a.dir2 ? " %s %s" : "");
                    },
                },
                {
                    name: "simulcast",
                    fa: RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~,]+))?$"),
                    names: ["dir1", "list1", "dir2", "list2"],
                    ca: function (a) {
                        return "simulcast:%s %s" + (a.dir2 ? " %s %s" : "");
                    },
                },
                { name: "simulcast_03", fa: /^simulcast:[\s\t]+([\S+\s\t]+)$/, names: ["value"], ca: "simulcast: %s" },
                { name: "framerate", fa: /^framerate:(\d+(?:$|\.\d+))/, ca: "framerate:%s" },
                { name: "sourceFilter", fa: /^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/, names: ["filterMode", "netType", "addressTypes", "destAddress", "srcList"], ca: "source-filter: %s %s %s %s %s" },
                { name: "bundleOnly", fa: /^(bundle-only)/, ca: "%s" },
                { name: "label", fa: /^label:(.+)/, ca: "label:%s" },
                { name: "sctpPort", fa: /^sctp-port:(\d+)$/, ca: "sctp-port:%s" },
                { name: "maxMessageSize", fa: /^max-message-size:(\d+)$/, ca: "max-message-size:%s" },
                { name: "keywords", fa: /^keywds:(.+)$/, ca: "keywds:%s" },
                { name: "content", fa: /^content:(.+)/, ca: "content:%s" },
                { name: "bfcpFloorCtrl", fa: /^floorctrl:(c-only|s-only|c-s)/, ca: "floorctrl:%s" },
                { name: "bfcpConfId", fa: /^confid:(\d+)/, ca: "confid:%s" },
                { name: "bfcpUserId", fa: /^userid:(\d+)/, ca: "userid:%s" },
                { name: "bfcpFloorId", fa: /^floorid:(.+) (?:m-stream|mstrm):(.+)/, names: ["id", "mStream"], ca: "floorid:%s mstrm:%s" },
                { push: "invalid", names: ["value"], fa: /(.*)/, ca: "%s" },
            ],
        },
        yC = /(\r\n|\r|\n)/,
        zC = /%[sdv%]/g,
        AC = RegExp.prototype.test.bind(/^([a-z])=(.*)/);
    function BC(a) {
        var b = 1,
            c = arguments,
            d = c.length;
        return a.replace(zC, function (e) {
            if (b >= d) return e;
            var f = c[b];
            b += 1;
            switch (e) {
                case "%%":
                    return "%";
                case "%s":
                    return String(f);
                case "%d":
                    return String(Number(f));
            }
            return "";
        });
    }
    function CC(a, b, c) {
        var d = b.ca;
        "function" === typeof b.ca && ((d = c), void 0 === b.push && void 0 !== b.name && (d = c[b.name]), (d = b.ca(d)));
        a = [a + "=" + d];
        if (void 0 !== b.names)
            for (d = 0; d < b.names.length; d += 1) {
                var e = b.names[d];
                void 0 !== b.name ? a.push(c[b.name][e]) : a.push(c[b.names[d]]);
            }
        else void 0 !== b.name && a.push(c[b.name]);
        return BC.apply(void 0, a);
    }
    function DC(a) {
        return String(Number(a)) === a ? Number(a) : a;
    }
    var EC = "vosiuepcbtrza".split(""),
        FC = ["i", "c", "b", "a"];
    function GC(a) {
        var b;
        void 0 === b && (b = { wS: EC, yR: FC });
        void 0 === a.version && (a.version = 0);
        void 0 === a.name && (a.name = " ");
        a.media.forEach(function (d) {
            void 0 === d.AS && (d.AS = "");
        });
        var c = [];
        b.wS.forEach(function (d) {
            xC[d].forEach(function (e) {
                void 0 !== e.name && e.name in a && void 0 !== a[e.name]
                    ? c.push(CC(d, e, a))
                    : void 0 !== e.push &&
                      e.push in a &&
                      void 0 !== a[e.push] &&
                      a[e.push].forEach(function (f) {
                          c.push(CC(d, e, f));
                      });
            });
        });
        a.media.forEach(function (d) {
            c.push(CC("m", xC.m[0], d));
            void 0 !== b &&
                b.yR.forEach(function (e) {
                    xC[e].forEach(function (f) {
                        void 0 !== f.name && f.name in d && void 0 !== d[f.name]
                            ? c.push(CC(e, f, d))
                            : void 0 !== f.push &&
                              f.push in d &&
                              void 0 !== d[f.push] &&
                              d[f.push].forEach(function (g) {
                                  c.push(CC(e, f, g));
                              });
                    });
                });
        });
        return c.join("\r\n") + "\r\n";
    }
    function HC(a) {
        var b = {},
            c = [];
        var d = b;
        a.split(yC)
            .filter(AC)
            .forEach(function (e) {
                var f = e[0],
                    g = e.slice(2);
                "m" === f && (c.push({ uY: [], rW: [] }), (d = c[c.length - 1]));
                void 0 !== xC[f] &&
                    xC[f].some(function (h) {
                        if (h.fa.test(g)) {
                            var m = d;
                            void 0 !== h.push && void 0 === m[h.push] ? (m[h.push] = []) : void 0 !== h.name && void 0 !== h.names && void 0 === m[h.name] && (m[h.name] = {});
                            var n = {};
                            void 0 === h.push && (n = void 0 !== h.name && void 0 !== h.names ? m[h.name] : m);
                            var p = g.match(h.fa),
                                u = n,
                                x = h.names,
                                D = h.name;
                            if (null !== p)
                                if (void 0 !== D && void 0 === x) u[D] = DC(p[1]);
                                else if (void 0 !== x) for (D = 0; D < x.length; D += 1) D + 1 < p.length && (u[x[D]] = DC(p[D + 1]));
                            void 0 !== h.push && m[h.push].push(n);
                            return !0;
                        }
                        return !1;
                    });
            });
        b.media = c;
        return b;
    }
    var IC = ["H264", "VP8", "VP9"];
    function JC(a) {
        this.sdp = HC(a);
        a = Bc(window.location.search)["video-bitrate"];
        void 0 !== a && (KC(this, parseInt(a)), (this.bV = !0));
        a = Bc(window.location.search)["video-codecs"];
        if (void 0 !== a) {
            a = a.split(",");
            var b,
                c = Bc(window.location.search)["video-profiles"];
            0 < a.length && void 0 !== c && (b = c.split(","));
            LC(this, a, b);
            this.cV = !0;
        }
    }
    JC.prototype.write = function () {
        return GC(this.sdp);
    };
    function KC(a, b) {
        if (!a.bV) {
            var c = MC(b);
            a.sdp.media.forEach(function (d) {
                "video" === d.type && NC(c, d);
            });
            return c;
        }
    }
    function LC(a, b, c) {
        a.cV ||
            a.sdp.media.forEach(function (d) {
                "video" === d.type && OC(a, b, d, c);
            });
    }
    function MC(a) {
        var b = 1500;
        void 0 !== a && (360 >= a ? (b = 800) : 540 < a && (b = 3e3));
        return b;
    }
    function NC(a, b) {
        var c = [];
        PC(IC, b).forEach(function (d) {
            c.push({ payload: d, config: "x-google-min-bitrate=" + a });
            c.push({ payload: d, config: "x-google-max-bitrate=" + a });
        });
        b.fmtp = b.fmtp.concat(c);
    }
    function OC(a, b, c, d) {
        var e = PC(IC, c),
            f = PC(b, c, d);
        c.rtp
            .filter(function (g) {
                return (
                    e.some(function (h) {
                        return h === g.payload;
                    }) &&
                    !f.some(function (h) {
                        return h === g.payload;
                    })
                );
            })
            .map(function (g) {
                return g.payload;
            })
            .forEach(function (g) {
                QC(a, g, c);
            });
    }
    function PC(a, b, c) {
        var d,
            e = b.rtp
                .filter(function (g) {
                    var h = a.some(function (m) {
                        return m.toUpperCase() === g.codec.toUpperCase();
                    });
                    h && "VP8" === g.codec.toUpperCase() && (d = g.payload);
                    return h;
                })
                .map(function (g) {
                    return g.payload;
                });
        if (void 0 !== c) {
            var f = ["profile-level-id=", "profile-id="];
            b = b.fmtp
                .filter(function (g) {
                    if (
                        e.some(function (m) {
                            return m === g.payload;
                        })
                    ) {
                        var h = !1;
                        g.config.split(";").forEach(function (m) {
                            f.forEach(function (n) {
                                if (m.startsWith(n)) {
                                    var p = m.split(n)[1].toUpperCase();
                                    c.some(function (u) {
                                        return u.toUpperCase() === p;
                                    }) && (h = !0);
                                }
                            });
                        });
                        return h;
                    }
                    return !1;
                })
                .map(function (g) {
                    return g.payload;
                });
            void 0 !== d &&
                e.some(function (g) {
                    return g === d;
                }) &&
                b.unshift(d);
            e = b;
        }
        return e;
    }
    function QC(a, b, c) {
        var d = c.payloads.split(" ");
        d = d.filter(function (e) {
            return parseInt(e) !== b;
        });
        c.payloads = d.join(" ");
        c.rtp = c.rtp.filter(function (e) {
            return e.payload !== b;
        });
        d = c.rtcpFb;
        void 0 !== d &&
            (c.rtcpFb = d.filter(function (e) {
                return e.payload !== b;
            }));
        c.fmtp = c.fmtp.filter(function (e) {
            return e.payload !== b;
        });
        c.fmtp
            .filter(function (e) {
                e = e.config;
                return e.startsWith("apt=") && parseInt(e.split("apt=")[1]) === b ? !0 : !1;
            })
            .map(function (e) {
                return e.payload;
            })
            .forEach(function (e) {
                QC(a, e, c);
            });
    }
    var RC = [
        { name: "year", zm: 31536e3 },
        { name: "month", zm: 2592e3 },
        { name: "week", zm: 604800 },
        { name: "day", zm: 86400 },
        { name: "hour", zm: 3600 },
        { name: "minute", zm: 60 },
    ];
    function SC(a) {
        var b = a.getTime() - new Date().getTime();
        if (0 === b) return "now";
        a = Math.floor(Math.abs(b) / 1e3);
        b = 0 < b;
        if (60 > a) return a + " second" + (1 === a ? "" : "s") + " " + (b ? "from now" : "ago");
        var c = 0,
            d = 0,
            e = "",
            f;
        for (f = 0; f < RC.length; f += 1)
            if (((c = Math.floor(a / RC[f].zm)), (d = RC[f].zm), 0 !== c)) {
                e = c + " " + RC[f].name + (1 === c ? "" : "s");
                break;
            }
        86400 < a && f + 1 < RC.length && ((f = RC[f + 1]), (a = Math.floor((a - d * c) / f.zm)), 0 !== a && (e = e + ", " + a + " " + f.name + (1 === a ? "" : "s")));
        return e + " " + (b ? "from now" : "ago");
    }
    var TC = new y("showOBSOverlay");
    function UC(a) {
        var b = void 0;
        void 0 === a || "number" === typeof a ? (b = a) : void 0 !== a.exact ? (b = a.exact) : void 0 !== a.ideal && (b = a.ideal);
        return b;
    }
    function VC(a) {
        a = Error.call(this, a);
        this.message = a.message;
        "stack" in a && (this.stack = a.stack);
        this.fatal = !0;
    }
    q(VC, Error);
    function WC(a, b) {
        this.Wx = this.fE = 0;
        this.SH = !1;
        this.kU = { applicationName: "live-origin", streamName: "stream", sessionId: "[empty]" };
        this.A = a;
        this.video = b;
        this.source = "desktop";
        a = new Uint8Array(16);
        window.crypto.getRandomValues(a);
        a[6] = (a[6] & 15) | 64;
        a[8] = (a[8] & 63) | 128;
        b = 0;
        this.Fh = [rC[a[b++]], rC[a[b++]], rC[a[b++]], rC[a[b++]], "-", rC[a[b++]], rC[a[b++]], "-", rC[a[b++]], rC[a[b++]], "-", rC[a[b++]], rC[a[b++]], "-", rC[a[b++]], rC[a[b++]], rC[a[b++]], rC[a[b++]], rC[a[b++]], rC[a[b++]]].join("");
        this.Wx = Date.now();
        this.Fj = !1;
    }
    k = WC.prototype;
    k.Pu = function (a) {
        var b = this;
        this.Wb = a;
        return new Promise(function (c, d) {
            if ("object" !== typeof navigator || "object" !== typeof navigator.mediaDevices || "function" !== typeof navigator.mediaDevices.getUserMedia)
                d(Error("Your browser doesn't support broadcasting. Recent versions of Safari, Firefox, or Chrome are recommended."));
            else {
                var e = "DevicePermsOnLoadDenied";
                window.setTimeout(function () {
                    e = "DevicePermsRequestDenied";
                }, 500);
                navigator.mediaDevices
                    .getUserMedia(a)
                    .then(function (f) {
                        b.stream = f;
                        var g = f.getVideoTracks();
                        if (0 === g.length || void 0 === g[0]) d(Error("We can't find any cameras, please ensure you have given permission to use your camera."));
                        else {
                            b.Km = g[0].getSettings();
                            if (void 0 !== b.Km.width && void 0 !== b.Km.height) {
                                var h = b.Km.width;
                                g = b.Km.height;
                                if (void 0 !== a.video) {
                                    var m = void 0;
                                    var n = void 0;
                                    var p = a.video;
                                    void 0 !== p && ((m = UC(p.width)), (n = UC(p.height)));
                                    p = n;
                                    if ((void 0 !== m && m !== h) || (void 0 !== p && p !== g))
                                        (n = { WebRTCHandlerError: "Stream resolution different from constraint resolution" }),
                                            void 0 !== m && ((m = a.video.width), "object" === typeof m && (m = JSON.stringify(m)), (n.WebRTCHandlerConstraintWidth = m), (n.WebRTCHandlerStreamWidth = h)),
                                            void 0 !== p && ((h = a.video.height), "object" === typeof h && (h = JSON.stringify(h)), (n.WebRTCHandlerConstraintHeight = h), (n.WebRTCHandlerStreamHeight = g)),
                                            F("WebRTCHandlerSetup", n);
                                }
                            }
                            JSON.stringify(a);
                            b.video.srcObject = f;
                            c(f);
                        }
                    })
                    .catch(function (f) {
                        var g = f.message;
                        if ("ConstraintNotSatisfiedError" === f.name) g = yl;
                        else if ("OverconstrainedError" === f.name) g = zl;
                        else if ("PermissionDeniedError" === f.name || "NotAllowedError" === f.name) g = ul;
                        else if ("" === g || null === g) g = Al;
                        F(e);
                        g = Error(g);
                        g.name = f.name;
                        d(g);
                    });
            }
        });
    };
    k.start = function () {
        var a = this;
        return new Promise(function (b, c) {
            a.Fj = !0;
            var d = !1;
            if (void 0 === a.stream) a.close(), c(new VC("Unable to get video from camera. Try refreshing the page and make sure you allow video/audio if any prompts come up."));
            else
                try {
                    void 0 === a.CA &&
                        ((a.closed = !1),
                        (a.CA = window.setInterval(function () {
                            XC(a);
                        }, 1e3))),
                        YC(a),
                        void 0 === a.tc
                            ? c(Error("Unable to connect to peer"))
                            : ((a.tc.oniceconnectionstatechange = function () {
                                  if (void 0 !== a.tc && !d) {
                                      if ("connected" === a.tc.iceConnectionState || "completed" === a.tc.iceConnectionState) (d = !0), F("WebRTCHandlerConnected", { WebRTCHandlerSource: a.source }), ZC.h(a.Fh), b();
                                      "failed" === a.tc.iceConnectionState && ((d = !0), c(Error("WebRTC failed")));
                                  }
                              }),
                              $C(a, a.A, c));
                } catch (e) {
                    c(e);
                }
        });
    };
    k.stop = function (a) {
        var b = this,
            c = !0 === a;
        return new Promise(function (d) {
            function e() {
                c || ((b.Fj = !1), aD.h(b.Fh));
                d(b.Fh);
            }
            c || b.close();
            if (void 0 !== b.zb) {
                if (b.zb.readyState !== WebSocket.CLOSING && b.zb.readyState !== WebSocket.CLOSED)
                    try {
                        b.zb.close();
                    } catch (f) {
                        r("could not close websocket connection " + f, "webRTCHandler.ts", "broadcastlib");
                    }
                b.zb = void 0;
            }
            if (void 0 !== b.tc) {
                try {
                    b.tc.close();
                } catch (f) {
                    r("could not close peer connection " + f, "webRTCHandler.ts", "broadcastlib");
                }
                b.tc = void 0;
            }
            b.fE = Date.now();
            c || void 0 === b.stream
                ? e()
                : uC(b.stream.getTracks())
                      .then(function () {
                          b.stream = void 0;
                          e();
                      })
                      .catch(function () {});
        });
    };
    k.Mu = function (a) {
        void 0 === this.stream ? r("no stream", "webRTCHandler.ts", "broadcastlib") : 0 < this.stream.getAudioTracks().length && (this.stream.getAudioTracks()[0].enabled = !a);
    };
    k.reset = function () {
        var a = this;
        return new Promise(function (b, c) {
            var d = a.Fj;
            a.stop()
                .then(function () {
                    void 0 !== a.Wb
                        ? a
                              .Pu(a.Wb)
                              .then(function () {
                                  d
                                      ? a
                                            .start()
                                            .then(function () {
                                                b();
                                            })
                                            .catch(function (e) {
                                                c(e);
                                            })
                                      : b();
                              })
                              .catch(function (e) {
                                  c(e);
                              })
                        : b();
                })
                .catch(function (e) {
                    c(e);
                });
        });
    };
    k.close = function () {
        this.closed = !0;
        void 0 !== this.CA && (clearInterval(this.CA), (this.CA = void 0));
    };
    function XC(a) {
        if (!0 === a.closed) a.stop();
        else {
            var b = Date.now();
            if (a.Wx < b - 1e4) {
                a.Wx = b;
                if (void 0 !== bD) {
                    a.stop();
                    return;
                }
                F("WebRTCHandlerRestart");
                a.stop(!0)
                    .then(function () {
                        C("api/switch_origin/?current_origin=" + a.A.YE)
                            .then(function (c) {
                                a.A.YE = c.responseText;
                                a.start().catch(function (d) {
                                    r("Could not restart stream: " + d.message, "webRTCHandler.ts", "broadcastlib");
                                });
                            })
                            .catch(function (c) {
                                r("Could not get new origin: " + c.message, "webRTCHandler.ts", "broadcastlib");
                            });
                    })
                    .catch(function () {});
            }
            b = a.jU;
            void 0 === a.zb && (b = { status: "connecting" });
            void 0 !== b && cD.h({ Fh: a.Fh, data: b });
        }
    }
    function YC(a) {
        void 0 === a.stream
            ? r("no stream", "webRTCHandler.ts", "broadcastlib")
            : (void 0 !== a.tc && (r("peerConnection already open", "webRTCHandler.ts", "broadcastlib"), a.tc.close(), (a.tc = void 0)),
              (a.tc = new RTCPeerConnection({ iceServers: [] })),
              (a.tc.onicecandidate = function () {}),
              0 < a.stream.getAudioTracks().length && a.tc.addTrack(a.stream.getAudioTracks()[0], a.stream),
              a.tc.addTrack(a.stream.getVideoTracks()[0], a.stream),
              a.tc
                  .createOffer()
                  .then(function (b) {
                      dD(a, b.sdp);
                  })
                  .catch(function () {}));
    }
    function $C(a, b, c) {
        void 0 !== a.zb && (r("WebSocket already open", "webRTCHandler.ts", "broadcastlib"), a.zb.close(), (a.zb = void 0));
        var d = new WebSocket("wss://" + b.YE + b.vS);
        d.binaryType = "arraybuffer";
        d.onopen = function () {
            a.zb = d;
            d.send(JSON.stringify({ method: "connect", username: b.j, password: b.uS }));
        };
        d.onerror = function (e) {
            r("webrtc websocket error", "webRTCHandler.ts", "broadcastlib", { error: e });
            c(Error("WebSocket error: " + JSON.stringify(e)));
        };
        d.onclose = function () {
            a.zb = void 0;
        };
        d.onmessage = function (e) {
            try {
                var f = JSON.parse(e.data);
            } catch (g) {
                return;
            }
            switch (f.method) {
                case "auth_valid":
                    a.createOffer(c);
                    break;
                case "stream_info":
                    a.jU = f;
                    a.Wx = Date.now();
                    break;
                case "already_publishing":
                    a.fE = Date.now();
                    R("You have started publishing from a new location, shutting down stream", function () {
                        qC.h("");
                        TC.h("");
                    });
                    a.stop();
                    break;
                case "shutdown":
                    a.fE < Date.now() - 1e3 &&
                        R("Error Publishing Stream", function () {
                            qC.h("");
                        });
                    a.stop();
                    break;
                case "origin_info":
                    break;
                default:
                    switch (f.command) {
                        case "sendOffer":
                            eD(a, f, c);
                            break;
                        default:
                            t("Unhandled", "webRTCHandler.ts", "broadcastlib", f);
                    }
            }
        };
    }
    function fD(a) {
        var b = a.Km,
            c = b.width;
        b = b.height;
        var d = Number(c) < Number(b);
        return "mobile" === a.source && d ? { width: b, height: c } : { width: c, height: b };
    }
    k.createOffer = function (a) {
        var b = this;
        void 0 === this.zb
            ? a(Error("ws undefined"))
            : void 0 === this.stream
            ? a(Error("stream undefined"))
            : (this.zb.send(JSON.stringify(Object.assign({ method: "publish", frameRate: this.Km.frameRate, source: this.source }, fD(this)))),
              void 0 === this.tc
                  ? r("peerConnection not open", "webRTCHandler.ts", "broadcastlib")
                  : this.tc
                        .createOffer()
                        .then(function (c) {
                            void 0 === b.tc
                                ? r("peerConnection not open", "webRTCHandler.ts", "broadcastlib")
                                : ((c.sdp = dD(b, c.sdp)),
                                  Na("gotDescription: " + JSON.stringify({ sdp: c }) + " " + b.tc),
                                  b.tc
                                      .setLocalDescription(c)
                                      .then(function () {
                                          void 0 === b.zb ? a(Error("ws undefined")) : b.zb.send(JSON.stringify({ direction: "publish", command: "sendOffer", streamInfo: b.kU, sdp: c }));
                                      })
                                      .catch(function (d) {
                                          a(d);
                                      }));
                        })
                        .catch(function (c) {
                            a(c);
                        }));
    };
    function eD(a, b, c) {
        if (void 0 === a.tc) r("peerConnection not open", "webRTCHandler.ts", "broadcastlib");
        else {
            var d = b.sdp;
            void 0 !== d &&
                null !== d &&
                a.tc.setRemoteDescription(d).catch(function (e) {
                    c(e);
                });
            b = b.iceCandidates;
            if (void 0 !== b)
                for (b = l(b), d = b.next(); !d.done; d = b.next())
                    a.tc.addIceCandidate(new RTCIceCandidate(d.value)).catch(function (e) {
                        c(e);
                    });
        }
    }
    function dD(a, b) {
        if (void 0 === b) return r("sdpStr undefined", "webRTCHandler.ts", "broadcastlib"), "";
        b = new JC(b);
        kb() ? LC(b, ["H264"], ["42e01f"]) : LC(b, ["H264", "VP8"], ["42e01f"]);
        var c = KC(b, a.Km.height);
        void 0 === c || a.SH || (F("WebRTCHandlerSDPUpdate", { WebRTCHandlerVideoBitrate: c }), (a.SH = !0));
        return (b = b.write());
    }
    var cD = new y("streamStatusUpdate"),
        ZC = new y("streamStart"),
        aD = new y("streamStop");
    function gD(a, b, c) {
        a = void 0 === a ? !0 : a;
        b = void 0 === b ? function () {} : b;
        c = void 0 === c ? function () {} : c;
        Yr.call(this);
        Q(this.element, {
            position: "fixed",
            overflow: "hidden",
            height: "auto",
            maxWidth: "1000px",
            minWidth: "450px",
            width: "90%",
            top: "50%",
            transform: "translateY(-50%)",
            left: "0px",
            right: "0px",
            margin: "auto",
            padding: "20px",
            borderWidth: "2px",
            borderStyle: "solid",
            borderRadius: "20px",
            zIndex: 1e4,
        });
        O(this.element, "broadcastTermsModal");
        this.S.style.background = "";
        a ? (O(this.S, "blackOverlay"), (this.ZE = !0)) : (O(this.S, "transparentOverlay"), this.fc.g(c));
        this.element.appendChild(this.tn());
        this.element.appendChild(hD(this));
        this.element.appendChild(this.OB(b));
    }
    q(gD, Yr);
    gD.prototype.tn = function () {
        return V("div", { colorClass: "header" }, V("h3", { style: { textAlign: "center" } }, "WARNING:  THIS SITE HAS A ZERO TOLERANCE POLICY ON UNDERAGE BROADCASTING."));
    };
    function hD(a) {
        var b = { textDecoration: "underline", fontWeight: "bold" };
        a.body = V(
            "div",
            { style: { height: "200px", overflow: "auto", padding: "0 15px 0 10px", borderWidth: "1px", borderStyle: "solid", margin: "0 auto", textAlign: "left" }, colorClass: "body" },
            V("p", null, "The Chaturbate service is for use by adults only.  By clicking the link below, you are affirming your representation and warranty to us that:"),
            V(
                "ol",
                null,
                V("li", null, 'You are at least 18 years old or the age of majority in your jurisdiction, whichever is older (the "Age of Majority");'),
                V("li", null, "Anyone appearing on camera with you has also reached the Age of Majority;"),
                V("li", null, "At no time will anyone who has not reached the Age of Majority be present while you are using the Chaturbate service;"),
                V("li", null, "You will not permit anyone who has not reached the Age of Majority to use the Chaturbate service; and"),
                V(
                    "li",
                    null,
                    "You will immediately report by email to ",
                    V("a", { href: "mailto:support@chaturbate.com" }, "support@chaturbate.com"),
                    " any and all instances you become aware of wherein an individual has used the Chaturbate service without first reaching the Age of Majority."
                ),
                V("li", null, "Obviously, you consent to and request your image being broadcast on the Chaturbate platform."),
                V("li", null, "You agree that you will be governed by the Chaturbate Terms and by the Chaturbate Broadcaster Agreement."),
                V("li", null, "You agree that only age verified broadcasters associated with this room may broadcast in this room.")
            ),
            V(
                "p",
                null,
                "If we suspect, in our sole discretion, that you are using the Chaturbate service without having complied in every respect with the foregoing statements, your account ",
                V("span", { style: b }, "will"),
                " be terminated immediately, and we ",
                V("span", { style: b }, "will"),
                " report your conduct to law enforcement."
            )
        );
        return a.body;
    }
    gD.prototype.OB = function (a) {
        var b = this;
        return V(
            "div",
            { style: { textAlign: "center", color: "#222" } },
            V(
                "a",
                {
                    style: { width: "200px", height: "30px", lineHeight: "30px", fontWeight: "bold", margin: "10px 5px 0px 5px", borderWidth: "1px", borderStyle: "solid", display: "inline-block", textAlign: "center", cursor: "pointer" },
                    colorClass: "acceptLink",
                    ref: function (c) {
                        b.mV = c;
                    },
                    onClick: function (c) {
                        c.stopPropagation();
                        b.B();
                        bc("broadcast_terms", "1", 7);
                        a();
                    },
                },
                "I AGREE"
            )
        );
    };
    function iD() {
        this.algorithm = 2;
        this.level = 0;
    }
    function jD(a, b) {
        var c = b.reduce(function (d, e) {
            return d + e * e;
        });
        a.level = Math.sqrt(c / b.length);
    }
    function kD(a, b) {
        var c = Number.MIN_SAFE_INTEGER;
        b.map(function (d) {
            d > c && (c = d);
            return d;
        });
        0 === b.length || 0 > c ? (c = 0) : 1 < c ? (c = 1) : (a.level = c);
    }
    iD.prototype.connect = function (a) {
        var b = this;
        this.level = 0;
        Va() &&
            ((this.context = "webkitAudioContext" in window ? new webkitAudioContext() : new AudioContext()),
            (this.sz = this.context.createScriptProcessor(2048, 1, 1)),
            (this.QL = this.context.createMediaStreamSource(a)),
            this.QL.connect(this.sz),
            this.sz.connect(this.context.destination),
            (this.sz.onaudioprocess = function (c) {
                c = c.inputBuffer.getChannelData(0);
                1 === b.algorithm ? jD(b, c) : 2 === b.algorithm ? kD(b, c) : r("invalid algorithm choice", "volumeLib.ts", "broadcastlib", b.algorithm);
            }));
    };
    iD.prototype.stop = function () {
        return Va() ? (this.QL.disconnect(), this.sz.disconnect(), this.context.close()) : Promise.resolve();
    };
    var lD = new y("historyPrivateMessage"),
        mD = new y("createNewSession");
    function nD() {
        var a,
            b = A.current;
        return b.NM || !0 === (null === (a = b.V) || void 0 === a ? void 0 : a.iq);
    }
    var oD;
    G.g(function (a) {
        oD = a.l;
    });
    function pD(a) {
        return { username: a, Pa: !0, zd: !1, Pe: !1, ec: !1, yf: !1, Gj: !1, zf: !1, kd: "", $c: "df" };
    }
    function qD(a) {
        return { message: "", T: 0, ik: a, bi: !1, ra: pD(a) };
    }
    function rD(a) {
        var b = Qc(a, "messages");
        return void 0 === b
            ? { wa: [], T: 0 }
            : {
                  wa: b.map(function (c) {
                      return {
                          K: bs(Uc(c, "from_user")),
                          message: L(c, "m"),
                          Bi: K(c, "c", !1),
                          qe: L(c, "i", !1),
                          bb: L(c, "other_user"),
                          font: L(c, "f"),
                          Qa: gs(Xc(c, "media")),
                          X: L(c, "tid", !1),
                          $i: new Date(1e3 * N(c, "created_at")),
                          Rx: !0,
                      };
                  }),
                  T: N(a, "num_unread"),
              };
    }
    function sD(a, b) {
        ("" === b ? tD(a) : uD(a, b))
            .then(function (c) {
                var d = !0;
                c = l(c.wa);
                for (var e = c.next(); !e.done; e = c.next()) (e = Object.assign(Object.assign({}, e.value), { gL: d })), lD.h(e), d && (d = !1);
            })
            .catch(function (c) {
                r("Failed getting pm history", "pm.ts", "api", c);
            });
    }
    function uD(a, b, c) {
        b = void 0 !== c ? Ac({ offset: c, room: b }) : Ac({ room: b });
        return C("api/ts/chatmessages/pm_list/" + a + "/?" + b).then(function (d) {
            return rD(new H(d.responseText));
        });
    }
    function tD(a, b) {
        a = "api/ts/chatmessages/pm_history/" + a + "/";
        void 0 !== b && (a += "?" + Ac({ offset: b }));
        return C(a).then(function (c) {
            return rD(new H(c.responseText));
        });
    }
    function vD(a, b) {
        var c = { m: a.message };
        void 0 !== a.media &&
            nD() &&
            (c.media_id = a.media.map(function (e) {
                return e.sc;
            }));
        if (void 0 !== b) {
            a = l(Object.keys(b));
            for (var d = a.next(); !d.done; d = a.next()) (d = d.value), (c[d] = b[d]);
        }
        return JSON.stringify(c);
    }
    function wD(a) {
        return Wy(this, function c() {
            var d, e, f, g, h, m;
            return Aa(c, function (n) {
                d = a;
                e = d.username;
                f = d.source;
                g = void 0 === d.J ? "" : d.J;
                h = new FormData();
                m = vD(a);
                A.current.V && fz.h({ message: a.message, Ec: e, K: A.current.V.username, media: a.media });
                h.append("room", g);
                h.append("to_user", e);
                h.append("message", m);
                return n.return(
                    E("api/ts/chatmessages/pm_publish/", h)
                        .then(function (p) {
                            var u = new H(p.responseText);
                            p = { username: e, source: f, is_reply: Pc(u, "is_reply"), token_color: K(u, "token_color"), in_fanclub: M(u, "in_fanclub", void 0, !1), success: "Ok" === L(u, "status") };
                            F("SendPrivateMessage", p);
                            p = Pc(u, "status");
                            if ("Ok" !== p) return (p = { username: e, errorMessage: p, bO: M(u, "show_sitewide_pm_link", !1, !1) }), Promise.reject(p);
                            if ("" !== g && void 0 !== oD) {
                                p = oD;
                                u = K(u, "sig");
                                p.event.ly.h(void 0);
                                var x = { f: "", c: "" };
                                void 0 !== u && (x.sig = u);
                                u = vD(a, x);
                                p.bd.th(xD(p) ? "addPrivateUserMsgToUser" : "addUserMsgToUser", { msg: u, room: p.j(), to_user: a.username });
                            }
                            return Promise.resolve();
                        })
                        .catch(function (p) {
                            r("Could not send private message: ", "pm.ts", "api", p);
                            return p instanceof hc ? Promise.reject({ errorMessage: Rp, RW: !1 }) : Promise.reject(p);
                        })
                );
            });
        });
    }
    var yD = new Map();
    function zD(a, b) {
        var c = "";
        void 0 !== b && "" !== b && (c = "?" + Ac({ room: b }));
        var d = "api/ts/chatmessages/user_info/" + a + "/" + c;
        if (yD.has(d)) return yD.get(d);
        c = C(d)
            .then(function (e) {
                e = new H(e.responseText);
                e = { T: N(e, "num_unread"), aI: M(e, "can_pm"), M: bs(new H(Vc(e, "user"))), FY: bs(new H(Vc(e, "sitewide_user"))) };
                var f = void 0 === b,
                    g = B.getState().j;
                f && "" !== g && a === g && (e.M.vt = !0);
                window.setTimeout(function () {
                    yD.delete(d);
                }, 2500);
                return e;
            })
            .catch(function (e) {
                r("Error getting user info for " + a + ": " + e, "pm.ts", "api");
                throw e;
            });
        yD.set(d, c);
        return c;
    }
    function AD(a) {
        w.call(this, "div");
        this.element.style.height = "";
        this.element.style.width = "";
        this.element.style.position = "relative";
        void 0 !== a && (a instanceof w ? this.G(a) : this.element.appendChild(a));
    }
    q(AD, w);
    function BD(a, b) {
        w.call(this, a);
        var c = this;
        this.fJ = "inline-block";
        this.HB = new y("collapse", { Ve: !1 });
        this.vj = [];
        this.Uu = [];
        this.yi = new AD();
        this.IB = [];
        if (void 0 === a || "string" === typeof a)
            this.element.appendChild(document.createTextNode(CD)), O(this.element, "chatAreaTabColor"), Q(this.element, { cursor: "pointer", width: "", height: "", padding: "0 10px", textAlign: "center" });
        this.jd = new Dw(this.element, !0 === b);
        Q(this, { userSelect: "none" });
        this.ha();
        Q(this.yi, { cssFloat: "right", height: "100%", visibility: "hidden" });
        this.jd.Jj.g(function (d) {
            c.onToggle(d);
        });
        gw.g(function (d) {
            c.jd.La() && c.jd.ha();
            DD(c, !d);
        });
        window.setTimeout(function () {
            if (void 0 !== c.parent || null !== c.element.parentElement) {
                var d = void 0 === c.parent ? c.element.parentElement : c.parent.element,
                    e = ED(c);
                void 0 !== e && d.insertBefore(c.yi.element, e.element.nextSibling);
            }
            DD(c);
        });
    }
    q(BD, w);
    function DD(a, b) {
        b = void 0 === b ? !0 : b;
        var c = a.jd.La();
        c && FD(a);
        a.Yq();
        if (0 === a.vj.length) a.La() && (a.ha(), (a.yi.element.style.paddingLeft = "0px"), a.HB.h(!1));
        else {
            var d;
            if ((d = 1 === a.vj.length && a.La())) {
                d = a.vj[0];
                var e = getComputedStyle(d.element);
                d = d.element.offsetWidth + vd(e.marginLeft) + vd(e.marginRight) + 5 <= a.element.offsetWidth + a.yi.element.offsetLeft - a.element.offsetLeft;
            }
            d
                ? (a.ha(), (d = a.yi.element.style.paddingLeft), (a.yi.element.style.paddingLeft = "0px"), a.Yq(), 0 < a.vj.length ? (a.Ja(a.fJ), (a.yi.element.style.paddingLeft = d)) : a.HB.h(!1))
                : a.La() || (a.Ja(a.fJ), a.tf(), a.HB.h(!0), a.Yq());
        }
        b && a.La() && a.TJ();
        c && (0 === a.vj.length ? a.jd.ha() : (GD(a), a.jd.tf()));
    }
    function ED(a) {
        if (void 0 !== a.parent) {
            a = l(a.parent.children());
            for (var b = a.next(); !b.done; b = a.next()) if (((b = b.value), HD(b.element))) return b;
        }
    }
    k = BD.prototype;
    k.D = function () {
        w.prototype.D.call(this);
        DD(this);
    };
    k.onToggle = function (a) {
        a.vb ? (this.Yq(), GD(this)) : FD(this);
    };
    function GD(a) {
        a.vj.forEach(function (b) {
            a.IB.unshift([b, b.nextSibling()]);
            a.jd.G(b);
            b.collapse(!0);
        });
    }
    function FD(a) {
        var b = a.parent;
        a.IB.forEach(function (c) {
            var d = c[0];
            Hb(b, d, c[1]);
            d.collapse(!1);
        });
        a.IB = [];
    }
    function ID(a) {
        return void 0 === a.parent
            ? []
            : a.parent.children().filter(function (b) {
                  return b instanceof JD && b.La();
              });
    }
    k.Yq = function () {
        var a = this;
        if (null !== this.element.parentElement && null !== this.element.parentElement.offsetParent) {
            var b = ID(this);
            this.vj = [];
            this.Uu = [];
            b.forEach(function (c) {
                if (null === c.element.parentElement) var d = !1;
                else
                    c.element.parentElement.offsetHeight <= c.element.offsetHeight
                        ? (d = c.element.offsetTop >= c.element.parentElement.offsetHeight)
                        : ((d = c.element.offsetTop >= c.element.offsetHeight), (d = c.element.parentElement.scrollHeight > c.element.parentElement.offsetHeight && d));
                d ? a.vj.push(c) : a.Uu.push(c);
            });
        }
    };
    k.tf = function () {
        null !== this.element.parentElement &&
            (Q(this.element, { position: "absolute", boxSizing: "border-box", textAlign: "center" }),
            (this.yi.element.style.paddingLeft = this.element.offsetWidth + "px"),
            this.element.removeAttribute("data-floatingnav"),
            "" === this.element.style.width && (this.element.style.width = this.element.offsetWidth + 1 + "px"));
    };
    k.TJ = function () {
        var a = this;
        if (void 0 !== this.parent) {
            for (var b = 0, c = l(this.parent.children()), d = c.next(); !d.done; d = c.next())
                (d = d.value), !HD(d.element) || d === this || (d instanceof JD && -1 === this.Uu.indexOf(d)) || (b = Math.max(d.element.offsetLeft + d.element.offsetWidth + vd(getComputedStyle(d.element).marginRight), b));
            this.element.offsetLeft !== b &&
                ((this.element.style.left = b + "px"),
                window.setTimeout(function () {
                    a.element.style.left = "";
                }));
        }
    };
    var CD = ".\u2009.\u2009.";
    function HD(a) {
        return "none" !== a.style.display && "right" !== a.style.cssFloat && "absolute" !== a.style.position && "fixed" !== a.style.position;
    }
    function JD(a) {
        w.call(this, void 0 === a ? "div" : a);
        var b = this;
        this.im = new y("collapse", { Ve: !1 });
        this.collapsed = !1;
        window.setTimeout(function () {
            b.im.h(b.collapsed);
        });
    }
    q(JD, w);
    JD.prototype.collapse = function (a) {
        (this.collapsed = a) ? this.element.classList.add("collapsed") : this.element.classList.remove("collapsed");
        this.im.h(a);
    };
    function KD() {
        w.call(this);
        this.pr = {
            position: "relative",
            padding: "5px",
            margin: "2px 0 0 2px",
            borderRadius: "4px 4px 0 0",
            minWidth: "16px",
            width: "auto",
            height: "100%",
            fontSize: "10px",
            cursor: "pointer",
            cssFloat: "left",
            VY: "none",
            WebkitTextSizeAdjust: "none",
            userSelect: "none",
        };
        this.qU = { cursor: "default" };
        O(this.element, "BaseTabsContainer");
        this.ac = new AD();
        this.ac.element.id = "tab-row";
        this.ac.element.style.overflow = "hidden";
        this.ac.element.style.width = "100%";
        this.ac.element.style.borderRadius = "2px 2px 0 0";
        w.prototype.G.call(this, this.ac);
        this.window = document.createElement("div");
        this.window.style.width = "100%";
        this.window.style.position = "absolute";
        O(this.window, "window");
        this.element.appendChild(this.window);
    }
    q(KD, w);
    k = KD.prototype;
    k.D = function () {
        this.window.style.height = this.element.clientHeight - this.ac.element.offsetHeight + "px";
    };
    k.G = function () {
        throw Error("addChild not implemented");
    };
    k.Ff = function (a) {
        a.element.style.width = "100%";
        a.element.style.height = "100%";
        a.element.style.display = "none";
        w.prototype.G.call(this, a, this.window);
        this.hB(a);
        return a;
    };
    k.hB = function (a) {
        var b = LD(a);
        this.ac.G(b);
        MD(a);
        O(b, "tab");
        O(b, "chatAreaTabColor");
        return b;
    };
    k.children = function () {
        return w.prototype.children.call(this).filter(function (a) {
            return a instanceof ND;
        });
    };
    function OD(a, b) {
        b !== a.ns && ((a.ns = b), b.$F());
        b = a.children();
        for (var c = b.length - 1; 0 <= c; --c) {
            var d = b[c];
            d !== a.ns ? d.ha() : a.ns.active || d.Ja();
        }
        a.R();
        a.Gd();
    }
    k.me = function () {
        return this.ns;
    };
    k.Vc = function () {
        for (var a = !1, b = l(this.children()), c = b.next(); !c.done; c = b.next()) a = MD(c.value) || a;
        a && this.ac.R();
    };
    k.jk = function (a) {
        a.active ? O(a.la, "active") : (P(a.la, "active"), a instanceof PD && (a.collapsed ? O(a.la, "collapsed") : P(a.la, "collapsed")));
        return Object.assign(Object.assign(Object.assign({}, this.pr), a instanceof PD && a.collapsed ? a.eR : {}), a.active ? this.qU : {});
    };
    function ND() {
        w.call(this);
        this.hL = this.active = !1;
        this.element.style.position = "relative";
    }
    q(ND, w);
    k = ND.prototype;
    k.Lg = function () {
        QD(this);
    };
    k.aE = function () {
        return "none" === this.la.element.style.display;
    };
    k.jj = function () {
        return [document.createTextNode("\u00a0")];
    };
    k.kk = function () {
        return "";
    };
    k.$F = function () {};
    function MD(a) {
        var b = a.la.element.textContent,
            c = document.createElement("span");
        null !== a.la.element.firstChild && ((c = a.la.element.firstChild), (c.innerHTML = ""));
        for (var d = l(a.jj()), e = d.next(); !e.done; e = d.next()) c.appendChild(e.value);
        a.la.element.appendChild(c);
        RD(a);
        c = "none" === a.la.element.style.display;
        a.la.element.style.display = a.aE() ? "none" : "inline-block";
        return b !== a.la.element.textContent || c !== ("none" === a.la.element.style.display);
    }
    function LD(a) {
        a.la = a.HI();
        for (
            Ab(["click", "touchstart"], a.la.element, function (e) {
                a.Lg(e);
                a instanceof PD && a.collapsed && (a.hL = !1);
            });
            null !== a.la.element.firstChild;

        )
            a.la.element.removeChild(a.la.element.firstChild);
        for (var b = document.createElement("span"), c = l(a.jj()), d = c.next(); !d.done; d = c.next()) b.appendChild(d.value);
        a.la.element.appendChild(b);
        a.la.element.id = a.kk();
        RD(a);
        wd(a.la).g(function (e) {
            a.hL = e;
            RD(a);
        });
        return a.la;
    }
    k.HI = function () {
        return new w(document.createElement("div"));
    };
    function QD(a) {
        void 0 === a.parent ? r("no parent", "tabs.ts", "ui") : OD(a.parent, a);
    }
    function SD(a) {
        return void 0 === a.parent ? (r("no parent", "tabs.ts", "ui"), !1) : a.parent.me() === a;
    }
    k.Vc = function () {
        void 0 === this.parent ? r("no parent", "tabs.ts", "ui") : this.parent.Vc();
    };
    k.jk = function () {
        return void 0 !== this.parent ? this.parent.jk(this) : {};
    };
    function RD(a) {
        Q(a.la, a.jk());
    }
    k.ha = function () {
        w.prototype.ha.call(this);
        this.active = !1;
        RD(this);
    };
    k.Ja = function () {
        w.prototype.Ja.call(this);
        this.active = !0;
        RD(this);
    };
    function PD() {
        ND.apply(this, arguments);
        this.eR = { display: "block", cssFloat: "none", padding: "9px 12px", margin: 0, borderRadius: "", border: "none", boxSizing: "border-box", width: "100%", height: "auto" };
    }
    q(PD, ND);
    PD.prototype.HI = function () {
        var a = this,
            b = new JD(document.createElement("div"));
        b.im.g(function (c) {
            a.collapsed = c;
            void 0 !== a.oS && a.oS(c);
            MD(a);
        });
        return b;
    };
    function TD(a) {
        w.call(this);
        O(this.element, "twitterUpdateRow");
        this.element.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        this.element.style.fontStyle = "normal";
        this.element.style.fontWeight = "normal";
        this.element.style.position = "relative";
        this.element.style.height = "";
        this.element.style.width = "";
        this.element.style.margin = "7px";
        this.element.style.padding = "6px";
        a.sh ? O(this.element, "seen") : P(this.element, "seen");
        this.element.style.borderWidth = "1px";
        this.element.style.borderStyle = "solid";
        this.element.style.borderRadius = "4px";
        var b = this.element,
            c = b.appendChild,
            d = a.text,
            e = document.createElement("div");
        e.innerHTML = d;
        UD(e);
        O(e, "contentSection");
        e.style.fontSize = "12px";
        e.style.lineHeight = "14px";
        e.style.whiteSpace = "pre-wrap";
        e.style.marginBottom = "6px";
        e.style.wordWrap = e.style.wordBreak = "break-word";
        e.style.overflow = "hidden";
        c.call(b, e);
        "" !== a.jv &&
            ((b = a.jv),
            (c = document.createElement("div")),
            O(c, "timeSince"),
            c.appendChild(document.createTextNode(b)),
            (c.style.fontSize = "9px"),
            (c.style.lineHeight = "13px"),
            (c.style.cssFloat = "left"),
            this.element.appendChild(c));
        "" !== a.url && ((b = "twitter_feed"), void 0 !== a.JE && (b = a.JE), (a = VD(a.url, b)), this.element.appendChild(a));
    }
    q(TD, w);
    function UD(a) {
        Array.from(a.querySelectorAll("a")).forEach(function (b) {
            O(b, "tweetLink");
            b.target = "_blank";
            b.style.outline = "none";
            b.style.fontSize = "12px";
            b.style.lineHeight = "14px";
            null !== b.firstChild && b.firstChild instanceof Text && null !== b.firstChild.textContent && (b.firstChild.textContent = b.firstChild.textContent.replace(/^http(s)?:\/\//, "").replace(/^www\./, ""));
            b.onclick = function () {
                F("NewsfeedItemLinkClick");
            };
        });
    }
    function WD(a) {
        switch (a) {
            case "twitter_feed":
                return Hk;
            case "offline_tip":
                return Ik;
            case "photo_video":
                return Jk;
        }
        return Kk;
    }
    function VD(a, b) {
        var c = document.createElement("a");
        c.href = a;
        c.target = "_blank";
        a = "twitter_feed" === b;
        c.appendChild(document.createTextNode(WD(b)));
        O(c, "twitterLink");
        c.style.fontSize = "9px";
        c.style.lineHeight = "13px";
        c.style.textAlign = "right";
        c.style.cssFloat = "right";
        a &&
            (c.onclick = function () {
                F("NewsfeedItemViewOnTwitter");
            });
        return c;
    }
    function XD() {
        w.call(this);
        this.element.style.overflow = "";
        this.element.style.position = "static";
        this.element.style.overflowX = "hidden";
        this.element.style.overflowY = "auto";
        YD(this);
    }
    q(XD, w);
    function YD(a) {
        if (/iPad|iPhone|iPod/.test(navigator.platform)) {
            a.element.style["-webkit-overflow-scrolling"] = "touch";
            var b = function () {
                a.element.style.overflowY = "scroll";
                Bb("scroll", a.element, b);
            };
            v("scroll", a.element, b);
        }
    }
    function ZD() {
        XD.call(this);
        this.G(new TD({ text: $g + "...", sh: !0, timestamp: 0, jv: "", url: "" }));
    }
    q(ZD, XD);
    function $D(a, b) {
        Jb(a);
        0 === b.length && a.G(new TD({ text: "" + Ym, sh: !0, timestamp: 0, jv: "", url: "" }));
        b.forEach(function (c) {
            a.G(new TD(c));
        });
    }
    ZD.prototype.ia = function () {
        this.element.style.maxHeight = "307px";
        this.element.style["-webkit-transform"] = "translateZ(0)";
    };
    function aE() {
        ZD.apply(this, arguments);
    }
    q(aE, ZD);
    aE.prototype.ia = function () {
        ZD.prototype.ia.call(this);
        this.element.style.maxHeight = "";
        Hu(this.element);
    };
    var bE = new y("dropDownToggle"),
        cE = new y("updatesAreRead"),
        dE = new y("updatesAreUnread"),
        eE = new y("tabItemsLoaded");
    function fE(a, b) {
        a = a
            .map(function (c) {
                return "notification_type=" + c;
            })
            .join("&");
        C("notifications/updates/?" + a)
            .then(function (c) {
                c = Qc(new H(c.responseText), "items");
                void 0 !== c &&
                    ((c = c.map(function (d) {
                        return { text: L(d, "text"), url: L(d, "url"), timestamp: N(d, "timestamp"), jv: L(d, "time_since"), sh: M(d, "seen"), JE: L(d, "notification_type") };
                    })),
                    b(c));
            })
            .catch(function () {});
    }
    function gE(a, b, c) {
        E(a, { timestamp: b.toString() })
            .then(function () {
                c();
            })
            .catch(function () {});
    }
    function hE(a) {
        ND.call(this);
        var b = this;
        this.T = 0;
        this.qt = this.iL = !1;
        this.items = [];
        this.sE = void 0;
        this.Qn = this.DA = 0;
        this.dA = Mk;
        this.cN = "notifications/record_last_seen/";
        this.cM = ["twitter_feed", "offline_tip"];
        this.BM = "NewsfeedOpened";
        this.yI = "NewsfeedClosed";
        this.fb = a ? new aE() : new ZD();
        this.G(this.fb);
        bE.g(function (c) {
            (b.qt = c) || (b.vb() && b.yz());
        });
        this.ub = void 0 === A.current.V;
        v("beforeunload", window, this.yz.bind(this));
        v("unload", window, this.yz.bind(this));
    }
    q(hE, ND);
    k = hE.prototype;
    k.iK = function () {};
    k.hK = function (a) {
        return new Ot(a);
    };
    function iE(a, b, c) {
        a.ub ||
            gE(a.cN, b, function () {
                void 0 !== c && c();
            });
    }
    k.yz = function () {
        if (0 !== this.DA) {
            var a = { duration_seconds: (new Date().getTime() - this.DA) / 1e3 };
            this.DA = 0;
            try {
                F(this.yI, a);
            } catch (b) {}
        }
    };
    k.jj = function () {
        return [document.createTextNode(99 < this.T ? this.dA + " (99+)" : 0 < this.T ? this.dA + " (" + this.T + ")" : this.dA)];
    };
    k.kk = function () {
        return "updates-tab";
    };
    k.Ja = function () {
        ND.prototype.Ja.call(this);
        this.D();
    };
    k.$F = function () {
        ND.prototype.$F.call(this);
        try {
            F(this.BM, { is_orange: 0 < this.T });
        } catch (a) {}
        this.DA = new Date().getTime();
        jE(this);
    };
    k.ha = function () {
        ND.prototype.ha.call(this);
        this.vb() && this.yz();
    };
    k.vb = function () {
        return this.qt && SD(this);
    };
    function jE(a) {
        a.iL
            ? ($D(a.fb, a.items), kE(a), eE.h())
            : fE(a.cM, function (b) {
                  var c, d;
                  a.items = b;
                  $D(a.fb, b);
                  b = a.AA;
                  a.T = b.length;
                  a.Qn = 0;
                  0 < b.length &&
                      (a.Qn = Math.max.apply(
                          Math,
                          ha(
                              b.map(function (e) {
                                  return e.timestamp;
                              })
                          )
                      ));
                  a.Vc();
                  a.iL = !0;
                  eE.h();
                  b = null === (c = A.current.V) || void 0 === c ? void 0 : c.yc;
                  void 0 !== b &&
                      a.hK(b).ea.g(function (e) {
                          lE(a, e.timestamp);
                          a.T = a.AA.length;
                          cE.h();
                          a.Vc();
                      });
                  null === (d = a.iK(b)) || void 0 === d
                      ? void 0
                      : d.ea.g(function (e) {
                            var f = 0;
                            0 < a.items.length &&
                                (f = Math.max.apply(
                                    Math,
                                    ha(
                                        a.items.map(function (g) {
                                            return g.timestamp;
                                        })
                                    )
                                ));
                            f < e.timestamp && (a.items.splice(0, 0, e), (a.T = a.AA.length), $D(a.fb, a.items), e.sh || ((a.Qn = e.timestamp), dE.h()), a.Vc(), kE(a));
                        });
                  c = void 0 !== b ? new Wt(b) : void 0;
                  null === c || void 0 === c
                      ? void 0
                      : c.ea.g(function (e) {
                            var f = 0;
                            0 < a.items.length &&
                                (f = Math.max.apply(
                                    Math,
                                    ha(
                                        a.items.map(function (g) {
                                            return g.timestamp;
                                        })
                                    )
                                ));
                            f < e.timestamp && (a.items.splice(0, 0, e), (a.T = a.AA.length), $D(a.fb, a.items), e.sh || ((a.Qn = e.timestamp), dE.h()), a.Vc(), kE(a));
                        });
              });
    }
    function lE(a, b) {
        a.items.forEach(function (c) {
            c.timestamp <= b && (c.sh = !0);
        });
    }
    function kE(a) {
        0 < a.T
            ? (void 0 !== a.sE && clearTimeout(a.sE),
              a.vb() &&
                  (lE(a, a.items[0].timestamp),
                  (a.sE = window.setTimeout(function () {
                      a.T = 0;
                      a.Qn = 0;
                      iE(a, a.items[0].timestamp, function () {
                          cE.h();
                      });
                  }, 500))))
            : cE.h();
    }
    da.Object.defineProperties(hE.prototype, {
        AA: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return this.items.filter(function (a) {
                    return !a.sh;
                });
            },
        },
    });
    function mE() {
        hE.apply(this, arguments);
        this.dA = Nk;
        this.cN = "notifications/record_last_seen_photo_video/";
        this.cM = ["photo_video"];
        this.BM = "PhotoVideoUpdatesOpened";
        this.yI = "PhotoVideoUpdatesClosed";
    }
    q(mE, hE);
    mE.prototype.iK = function (a) {
        if (void 0 !== a) return new Vt(a);
    };
    mE.prototype.hK = function (a) {
        return new Pt(a);
    };
    var nE = new y("openFeedbackForm");
    function oE() {
        return Zd("NvBrRdsn5");
    }
    function pE(a, b) {
        b = void 0 === b ? !1 : b;
        KD.call(this);
        var c = this;
        this.qt = !1;
        this.eA = 0;
        this.element.id = "UserUpdatesPanel";
        O(this.element, "userUpdatesPanel");
        this.ac.element.style.borderBottom = "none";
        this.ac.element.style.padding = "4px 0 0 6px";
        this.ac.element.style.marginBottom = "4px";
        this.ac.element.style.boxSizing = "border-box";
        this.window.style.position = "static";
        this.pr = Object.assign(Object.assign({}, this.pr), { fontSize: "12px", padding: "5px 10px" });
        this.hp = [new hE(b)];
        new Vd("PicVidUIPNtf").active && this.hp.push(new mE(b));
        this.hp.forEach(function (d) {
            c.Ff(d);
        });
        bE.g(function (d) {
            d &&
                ((c.eA = 0),
                c.hp.forEach(function (e) {
                    return jE(e);
                }));
        });
        eE.g(function () {
            c.eA += 1;
            c.eA === c.hp.length && qE(c);
        });
        this.AH();
        this.zC = this.NI(a);
        oE() && this.ac.ha();
    }
    q(pE, KD);
    pE.prototype.NI = function (a) {
        return new rE(this, a);
    };
    function sE(a, b) {
        dE.g(function () {
            tE(a) && (null === b || void 0 === b ? void 0 : b.classList.add("has_unseen"));
        });
        cE.g(function () {
            var c, d;
            tE(a) || (null !== (d = null === (c = document.querySelector("#pmListIconRoot")) || void 0 === c ? void 0 : c.classList.contains("has_unread")) && void 0 !== d && d) || (b.className = b.className.replace("has_unseen", ""));
        });
    }
    function qE(a) {
        OD(
            a,
            a.hp.reduce(function (b, c) {
                return c.Qn > b.Qn ? c : b;
            })
        );
    }
    function tE(a) {
        return a.hp.some(function (b) {
            return 0 < b.T;
        });
    }
    pE.prototype.AH = function () {
        var a = uE(!1);
        this.element.appendChild(a);
    };
    pE.prototype.D = function () {};
    pE.prototype.ia = function () {
        this.element.style.overflow = "";
        this.element.style.position = "static";
        this.element.style.borderWidth = "1px";
        this.element.style.borderStyle = "solid";
        this.element.style.borderTop = "none";
        this.element.style.borderRadius = "0 0 4px 4px";
    };
    function vE(a) {
        pE.call(this, a, !0);
        for (a = 1; a < this.element.children.length - 1; a += 1) this.element.children[a].style.height = "calc(100% - 60px)";
    }
    q(vE, pE);
    vE.prototype.NI = function (a) {
        return new wE(this, a);
    };
    vE.prototype.AH = function () {
        var a = uE(!0);
        this.element.appendChild(a);
    };
    vE.prototype.ia = function () {
        pE.prototype.ia.call(this);
        this.element.style.borderRight = "0";
    };
    function uE(a) {
        var b = document.createElement("A");
        O(b, "feedbackLink");
        b.innerText = Lk;
        b.style.fontSize = "11px";
        b.style.textAlign = "center";
        b.style.width = "100%";
        b.style.display = "block";
        b.style.padding = "5px 0";
        b.style.marginBottom = "7px";
        a
            ? ((b.href = Wq.gH), (b.target = "_blank"))
            : ((b.href = "#"),
              (b.onclick = function () {
                  nE.h({ source: "site_updates" });
              }));
        return b;
    }
    function xE(a, b, c) {
        c.g(function (d) {
            a.qt !== d.vb && ((a.qt = d.vb), bE.h(d.vb), b.classList.toggle("active", d.vb));
        });
        dE.g(function () {
            tE(a) && b.classList.add("has_unseen");
        });
        cE.g(function () {
            a.Vc();
            tE(a) || (b.className = b.className.replace("has_unseen", ""));
        });
        a.hp.forEach(function (d) {
            jE(d);
        });
    }
    function rE(a, b) {
        ww.call(this, b);
        this.element.appendChild(a.element);
        O(this.element, "userUpdatePanelDropDown");
        xE(a, b, this.Jj);
    }
    q(rE, ww);
    rE.prototype.ia = function () {
        ww.prototype.ia.call(this);
        var a = oE();
        Q(this.element, {
            maxHeight: "368px",
            height: "",
            width: "100%",
            zIndex: 1001,
            backgroundColor: "transparent",
            fontFamily: "UbuntuBold, Helvetica, Arial, sans-serif",
            left: a ? "auto" : "-1px",
            top: a ? "40px" : "24px",
            right: a ? "2px" : "auto",
        });
    };
    function wE(a, b) {
        ww.call(this, b);
        this.element.appendChild(a.element);
        xE(a, b, this.Jj);
    }
    q(wE, Aw);
    wE.prototype.ia = function () {
        Aw.prototype.ia.call(this);
        this.element.style.maxHeight = "";
        this.element.style.width = "100%";
        this.element.style.zIndex = "1001";
        this.element.style.backgroundColor = "#FFFFFF";
        this.element.style.fontFamily = "UbuntuBold, Helvetica, Arial, sans-serif";
        this.element.style.left = "-1px";
        this.element.style.top = "0";
        this.element.style.height = "calc(100% - 46px)";
        this.element.style.top = "46px";
    };
    function yE(a) {
        w.call(this, "div", a);
        var b = this;
        this.H = new Ub();
        this.hj = { uq: new y("navigateSuggestions"), Py: new y("openCurrentSuggestion"), mt: new y("inputChange"), aA: new y("suggestionActiveEvent") };
        this.value = "";
        z(
            a.te.g(function () {
                b.input.value = "";
            }),
            this.H
        );
        z(
            this.hj.aA.g(function (c) {
                c = c.jc;
                b.input.value = "" === c ? b.value : c;
            }),
            this.H
        );
        this.sQ = new Sd(
            function () {
                var c = b.value.match(/^[\w-]*$/);
                b.hj.mt.h({ OD: a.bm, Sf: null !== c, prefix: b.value });
            },
            { zc: 100, Qc: 1 }
        );
    }
    q(yE, w);
    yE.prototype.ia = function (a) {
        var b = this;
        this.element = V(
            "div",
            { colorClass: "SearchBar", style: { position: "relative", width: "100%", padding: "4px", boxSizing: "border-box", borderBottomWidth: "1px", borderBottomStyle: "solid" } },
            V("input", {
                colorClass: "searchUserInput",
                className: "search_autocomplete",
                type: "text",
                placeholder: Xo,
                style: {
                    background: "none",
                    height: "24px",
                    borderWidth: "1px",
                    borderStyle: "solid",
                    boxSizing: "border-box",
                    borderRadius: "3px",
                    margin: "0",
                    padding: "5px 22px 5px 8px",
                    width: "100%",
                    outline: "none",
                    fontFamily: "Tahoma, Arial, Helvetica, sans-serif",
                    fontSize: "12px",
                },
                onFocus: function () {
                    F("PMSearchStarted", { location: "" === a.j ? "PMWindow" : "PMTab" });
                },
                onKeyDown: function (c) {
                    if ("ArrowDown" === c.key || "ArrowUp" === c.key || 40 === c.keyCode || 38 === c.keyCode) c.preventDefault(), b.hj.uq.h({ event: c });
                    else if ("Enter" === c.key || 13 === c.keyCode) c.preventDefault(), b.hj.Py.h(void 0);
                },
                onInput: function () {
                    var c = b.input.value.toLowerCase();
                    b.value = c;
                    b.input.value = c;
                    Td(b.sQ);
                },
                ref: function (c) {
                    return (b.input = c);
                },
            }),
            V("img", { src: "https://static-assets.highwebmedia.com/tsdefaultassets/pms/icon-search.svg", alt: "Search", style: { height: "1em", margin: "auto", position: "absolute", right: "10px", top: "10px" } })
        );
    };
    yE.prototype.render = function () {
        return this.element;
    };
    yE.prototype.dispose = function () {
        Vb(this.H);
    };
    var zE = new y("roomPrivateMessage"),
        AE = new y("sitewidePrivateMessage"),
        BE = new y("showRoomPmSession"),
        CE = new y("closeRoomPmSession"),
        DE = new y("allPmsReadRoom"),
        EE = new y("allPmsReadSitewide");
    new y("pmEmoticonLoaded");
    var FE = { height: 0, name: "", mj: "", width: 0, Lr: "" };
    function GE(a) {
        var b = [],
            c = [],
            d = [];
        if (0 > a.indexOf("%%%[emoticon ")) a = { wf: [a], As: [] };
        else {
            for (var e = 0; e < a.length; e += 1)
                if ("%" === a[e])
                    if ("%%%[emoticon " === a.slice(e, e + 13)) {
                        var f = e + a.slice(e, a.length).indexOf("]%%%");
                        if ("]%%%" === a.slice(f, f + 4)) {
                            d.push(b.join(""));
                            b = [];
                            b: {
                                e = a.slice(e, f + 4);
                                e = e.replace("%%%[emoticon ", "").replace("]%%%", "");
                                e = e.split(/\|/);
                                if (6 === e.length) {
                                    if (((e = { name: e[0], rr: e[1], width: HE(e[2]) ? Number(e[2]) : 80, height: HE(e[3]) ? Number(e[3]) : 80, mj: e[4], Lr: e[5] }), void 0 !== e.rr && IE(e.rr))) break b;
                                } else if (5 === e.length && ((e = { name: e[0], mj: e[1], width: HE(e[2]) ? Number(e[2]) : 80, height: HE(e[3]) ? Number(e[3]) : 80, Lr: e[4] }), IE(e.mj))) break b;
                                e = void 0;
                            }
                            void 0 !== e ? c.push(e) : (r("Cannot parse emoticon: " + e, "parseemoticons.ts", "common"), c.push(FE));
                            e = f + 4 - 1;
                        }
                    } else b.push(a[e]);
                else b.push(a[e]);
            d.push(b.join(""));
            a = { wf: d, As: c };
        }
        this.vH = a;
    }
    GE.prototype.wf = function () {
        return this.vH.wf;
    };
    GE.prototype.As = function () {
        return this.vH.As;
    };
    function IE(a) {
        return null === a.match(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g) ? (r("Invalid emoticon URL", "parseemoticons.ts", "common"), !1) : !0;
    }
    function HE(a) {
        return isNaN(parseInt(a, 10)) ? (r("Invalid dimension argument", "parseemoticons.ts", "common"), !1) : !0;
    }
    function JE(a) {
        var b = a.split(",");
        a = ~~b[0];
        b = b.slice(1);
        var c = [];
        b = l(b);
        for (var d = b.next(); !d.done; d = b.next()) {
            var e = l(d.value.split("|"));
            d = e.next().value;
            var f = e.next().value,
                g = e.next().value;
            e = e.next().value;
            d = KE(d, f, g, e);
            c.push(d);
        }
        return { xA: a + c.length, mp: a, Oq: c };
    }
    function KE(a, b, c, d) {
        a = { username: a, Pa: !1, zd: !1, Td: "t" === d, Pe: !1, ec: !1, yf: !1, Gj: !1, zf: !1, kd: "", nc: c, $c: "un" };
        "o" === b
            ? (a.Pa = !0)
            : "m" === b
            ? (a.ec = !0)
            : "f" === b
            ? (a.zd = !0)
            : "l" === b
            ? (a.zf = !0)
            : "p" === b
            ? (a.Gj = !0)
            : "tr" === b
            ? (a.yf = !0)
            : "t" === b
            ? (a.Pe = !0)
            : "g" !== b && r("Unexpected IUserInfo colorGroup", "users.ts", "chatconnection", b);
        return a;
    }
    function LE(a) {
        return a.Pa ? "o" : a.ec ? "m" : a.zd ? "f" : a.zf ? "l" : a.Gj ? "p" : a.yf ? "tr" : a.Pe ? "t" : "g";
    }
    function ME(a) {
        if (1e3 > a) return "" + a;
        var b = Math.floor(("" + a).length / 3);
        a = parseFloat((a / Math.pow(1e3, b)).toPrecision(3));
        1 > a && ((a *= 1e3), --b);
        return "" + a + ["", "K", "M", "B", "T"][b];
    }
    var NE;
    function OE(a, b, c) {
        if (void 0 !== NE) return NE;
        var d = { roomname: a, private: c, sort_by: b, exclude_staff: !0 };
        return (NE = new Promise(function (e, f) {
            C("api/getchatuserlist/?" + Ac(d))
                .then(function (g) {
                    e(JE(g.responseText));
                    window.setTimeout(function () {
                        return (NE = void 0);
                    }, 3e3);
                })
                .catch(function (g) {
                    f(g);
                    NE = void 0;
                });
        }));
    }
    function PE(a, b) {
        Lt.call(this, { broadcaster_uid: a, show_id: b });
        if (0 === a.length) throw Error("room uid cannot be empty");
        if (0 === b.length) throw Error("show ID cannot be empty");
    }
    q(PE, Lt);
    PE.prototype.getKey = function () {
        return this.ka() + ":" + this.lb + ":" + this.aU;
    };
    PE.prototype.initData = function (a) {
        this.lb = a.broadcaster_uid;
        this.aU = a.show_id;
    };
    function QE() {
        PE.apply(this, arguments);
        this.Ct = 1;
    }
    q(QE, PE);
    QE.prototype.ka = function () {
        return "PrivateRoomUserPresenceTopic";
    };
    function RE() {
        PE.apply(this, arguments);
    }
    q(RE, PE);
    RE.prototype.ka = function () {
        return "PrivateRoomMessageTopic";
    };
    RE.prototype.L = function (a) {
        var b,
            c = PE.prototype.L.call(this, a);
        return Object.assign(Object.assign(Object.assign({}, c), fs(a)), { Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he });
    };
    function SE() {
        PE.apply(this, arguments);
    }
    q(SE, PE);
    SE.prototype.ka = function () {
        return "PrivateRoomTipAlertTopic";
    };
    SE.prototype.L = function (a) {
        var b,
            c = PE.prototype.L.call(this, a);
        return Object.assign(Object.assign({}, c), {
            K: bs(a),
            message: L(a, "message", !1),
            amount: N(a, "amount"),
            Nx: M(a, "is_anonymous_tip"),
            Ij: L(a, "to_username"),
            Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he,
            cg: "private",
        });
    };
    function TE() {
        PE.apply(this, arguments);
    }
    q(TE, PE);
    TE.prototype.ka = function () {
        return "PrivateRoomEnterLeaveTopic";
    };
    TE.prototype.L = function (a) {
        return Object.assign(Object.assign({}, PE.prototype.L.call(this, a)), { M: cs(Uc(a, "user")), action: L(a, "action"), Oc: Tc(a, "count"), connections: N(a, "num_connections"), X: "#room_enter_leave" });
    };
    function Z(a) {
        Lt.call(this, { broadcaster_uid: a });
        Mt(this.lb);
    }
    q(Z, Lt);
    Z.prototype.initData = function (a) {
        this.lb = a.broadcaster_uid;
    };
    Z.prototype.getKey = function () {
        return this.ka() + ":" + this.lb;
    };
    function UE(a, b) {
        Lt.call(this, { broadcaster_uid: a, user_uid: b });
        Mt(this.lb);
        Mt(this.yc);
    }
    q(UE, Lt);
    UE.prototype.getKey = function () {
        return this.ka() + ":" + this.lb + ":" + this.yc;
    };
    UE.prototype.initData = function (a) {
        this.lb = a.broadcaster_uid;
        this.yc = a.user_uid;
    };
    function VE() {
        Z.apply(this, arguments);
        this.Ct = 1;
    }
    q(VE, Z);
    VE.prototype.ka = function () {
        return "PrivilegedSessionTopic";
    };
    function WE() {
        UE.apply(this, arguments);
        this.Ct = 1;
    }
    q(WE, UE);
    WE.prototype.ka = function () {
        return "RoomUserPresenceTopic";
    };
    function XE() {
        Z.apply(this, arguments);
    }
    q(XE, Z);
    XE.prototype.ka = function () {
        return "RoomAnonPresenceTopic";
    };
    function YE() {
        Z.apply(this, arguments);
        this.Ct = 1;
    }
    q(YE, Z);
    YE.prototype.ka = function () {
        return "RoomPasswordProtectedTopic";
    };
    function ZE() {
        Z.apply(this, arguments);
    }
    q(ZE, Z);
    ZE.prototype.ka = function () {
        return "RoomTitleChangeTopic";
    };
    ZE.prototype.L = function (a) {
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { title: L(a, "title"), X: "#room_title_change" });
    };
    function $E() {
        Z.apply(this, arguments);
    }
    q($E, Z);
    $E.prototype.ka = function () {
        return "RoomTipAlertTopic";
    };
    $E.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign({}, c), {
            K: bs(a),
            message: L(a, "message"),
            amount: N(a, "amount"),
            Nx: M(a, "is_anonymous_tip"),
            Ij: L(a, "to_username"),
            Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he,
            cg: "public",
        });
    };
    function aF() {
        Z.apply(this, arguments);
    }
    q(aF, Z);
    aF.prototype.ka = function () {
        return "RoomStatusTopic";
    };
    aF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { status: Px(L(a, "status")), message: L(a, "message"), password: K(a, "hash"), X: "" });
    };
    function bF() {
        UE.apply(this, arguments);
    }
    q(bF, UE);
    bF.prototype.ka = function () {
        return "RoomUserHiddenCamStatusTopic";
    };
    bF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, UE.prototype.L.call(this, a)), { status: L(a, "status") });
    };
    function cF() {
        Z.apply(this, arguments);
    }
    q(cF, Z);
    cF.prototype.ka = function () {
        return "RoomMessageTopic";
    };
    cF.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign(Object.assign({}, c), fs(a)), { Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he });
    };
    function dF() {
        Z.apply(this, arguments);
    }
    q(dF, Z);
    dF.prototype.ka = function () {
        return "RoomSilenceTopic";
    };
    dF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { username: L(a, "username"), K: L(a, "from_username"), X: "#room_silence" });
    };
    function eF() {
        Z.apply(this, arguments);
    }
    q(eF, Z);
    eF.prototype.ka = function () {
        return "RoomKickTopic";
    };
    eF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { username: L(a, "username"), K: "Unknown", X: "#room_kick" });
    };
    function fF() {
        Z.apply(this, arguments);
    }
    q(fF, Z);
    fF.prototype.ka = function () {
        return "RoomModeratorPromotedTopic";
    };
    fF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { username: L(a, "username"), K: L(a, "from_username"), X: "#mod_promoted" });
    };
    function gF() {
        Z.apply(this, arguments);
    }
    q(gF, Z);
    gF.prototype.ka = function () {
        return "RoomModeratorRevokedTopic";
    };
    gF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { username: L(a, "username"), K: L(a, "from_username"), X: "#mod_revoked" });
    };
    function hF() {
        Z.apply(this, arguments);
    }
    q(hF, Z);
    hF.prototype.ka = function () {
        return "RoomNoticeTopic";
    };
    hF.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign(Object.assign({}, c), is(a)), { Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he, Bf: void 0, Ec: void 0 });
    };
    function iF() {
        UE.apply(this, arguments);
    }
    q(iF, UE);
    iF.prototype.ka = function () {
        return "RoomUserNoticeTopic";
    };
    iF.prototype.L = function (a) {
        var b,
            c = UE.prototype.L.call(this, a);
        return Object.assign(Object.assign(Object.assign({}, c), is(a)), { Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he, Bf: void 0, Ec: this.yc });
    };
    function jF() {
        Z.apply(this, arguments);
    }
    q(jF, Z);
    jF.prototype.ka = function () {
        return "RoomAppLogTopic";
    };
    jF.prototype.L = function (a) {
        var b = Object,
            c = b.assign,
            d = Object.assign({}, Z.prototype.L.call(this, a)),
            e = L(a, "type");
        if ("log" === e) var f = L(a, "message");
        else if ("apperrorlog" === e) {
            var g = Pc(a, "message");
            var h = [];
            h.push([W("App Error: ")]);
            if ("string" === typeof g) h.push([W(g)]);
            else if (g instanceof Array) {
                g = l(g);
                for (var m = g.next(); !m.done; m = g.next()) h.push([W(m.value)]);
            } else r("parseAppLog error: Invalid message type " + (void 0 === g ? "undefined" : g.toString()), "messageParsers.ts", "chatconnection");
        } else r("parseAppLog error: Unknown app log type: " + e, "messageParsers.ts", "chatconnection");
        a = { type: e, GC: h, vC: f, X: L(a, "tid") };
        return c.call(b, d, a);
    };
    function kF() {
        Z.apply(this, arguments);
    }
    q(kF, Z);
    kF.prototype.ka = function () {
        return "RoomPurchaseTopic";
    };
    kF.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign({}, c), { K: cs(Uc(a, "user")), message: L(a, "message"), Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he });
    };
    function lF() {
        Z.apply(this, arguments);
    }
    q(lF, Z);
    lF.prototype.ka = function () {
        return "RoomFanClubJoinedTopic";
    };
    lF.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign({}, c), { K: cs(Uc(a, "user")), message: L(a, "message"), Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he });
    };
    function mF() {
        Z.apply(this, arguments);
    }
    q(mF, Z);
    mF.prototype.ka = function () {
        return "RoomSettingsTopic";
    };
    mF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), {
            ge: M(a, "allow_private_shows"),
            Xd: N(a, "private_show_tokens_per_minute"),
            vf: N(a, "spy_on_private_show_tokens_per_minute"),
            pi: N(a, "private_min_minutes"),
            Pi: M(a, "allow_show_recordings"),
        });
    };
    function nF() {
        Z.apply(this, arguments);
    }
    q(nF, Z);
    nF.prototype.ka = function () {
        return "RoomEnterLeaveTopic";
    };
    nF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { M: cs(Uc(a, "user")), action: L(a, "action"), Oc: Tc(a, "count"), connections: N(a, "num_connections"), X: "#room_enter_leave" });
    };
    function oF() {
        Z.apply(this, arguments);
    }
    q(oF, Z);
    oF.prototype.ka = function () {
        return "RoomPrivilegedEnterTopic";
    };
    oF.prototype.L = function (a) {
        var b,
            c = Object.assign(Object.assign({}, Vc(a, "user")), { source_name: K(a, "source"), exploringHashTag: null !== (b = K(a, "exploring_hash")) && void 0 !== b ? b : "" });
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { action: "enter", M: cs(new H(c)), connections: N(a, "num_connections"), Oc: Tc(a, "count"), X: "#privileged_enter" });
    };
    function pF() {
        Z.apply(this, arguments);
    }
    q(pF, Z);
    pF.prototype.ka = function () {
        return "RoomPrivilegedLeaveTopic";
    };
    pF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { action: "leave", M: cs(Uc(a, "user")), Oc: Tc(a, "count"), connections: N(a, "num_connections"), X: "#privileged_leave" });
    };
    function qF() {
        Z.apply(this, arguments);
    }
    q(qF, Z);
    qF.prototype.ka = function () {
        return "RoomUpdateTopic";
    };
    qF.prototype.L = function (a) {
        var b = Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { target: L(a, "target"), X: "#app_panel_refresh" });
        a = L(a, "target_user");
        "" !== a && (b.TY = a);
        return b;
    };
    function rF() {
        UE.apply(this, arguments);
    }
    q(rF, UE);
    rF.prototype.ka = function () {
        return "RoomUserPrivateStatusTopic";
    };
    rF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, UE.prototype.L.call(this, a)), { status: L(a, "status"), Uc: Sc(a, "show_id") });
    };
    function sF() {
        Z.apply(this, arguments);
    }
    q(sF, Z);
    sF.prototype.ka = function () {
        return "QualityUpdateTopic";
    };
    sF.prototype.L = function (a) {
        return Object.assign(Object.assign({}, Z.prototype.L.call(this, a)), { quality: L(a, "quality"), rate: N(a, "rate"), stopped: M(a, "stopped"), X: L(a, "tid") });
    };
    var tF = 3e4 * (1 + Math.floor(10 * Math.random())),
        uF = tF + 6e4 * (2 + Math.floor(10 * Math.random())),
        vF = new y("roomUsersUpdate", {
            ii: 1,
            rc: function () {
                return 50 + 3 * Ob;
            },
        }),
        wF = "o m f l p tr t g".split(" ");
    function xF() {
        var a = this;
        this.pu = new Map();
        this.rF = new Ub();
        this.om = new Ub();
        this.KS = !1;
        G.g(function (b) {
            a.l = b.l;
            a.j = b.A.j;
            a.lb = b.A.lb;
            a.So = b.A.Da.kr;
            a.pT = performance.now();
            a.BF = 0;
            yF(a);
            a.l.event.Mc.g(function (c) {
                if ("privatewatching" === c.Sa) {
                    var d, e;
                    a.Ao = new zF(void 0, a.So);
                    AF(a.Ao);
                    A.current.oj &&
                        ((c = null === (d = a.l) || void 0 === d ? void 0 : BF(d) ? d.ZM : ""),
                        void 0 === c ? r("roomUsers: no private show user when initializing private user list", "roomUsers.ts", "cb") : ((d = null === (e = a.Lk) || void 0 === e ? void 0 : e.xD.get(c)), void 0 !== d && a.Ao.bn(d)));
                    vF.h(CF(a));
                    DF(a);
                } else "privatewatching" === c.Lc && (Vb(a.om), (a.Ao = void 0), vF.h(CF(a)));
            });
        });
        mv.g(function (b) {
            b.kr !== a.So && ((a.So = b.kr), EF(a, !0).catch(ct));
        });
        Kc.g(function () {
            Vb(a.rF);
            a.pu.clear();
            window.clearTimeout(a.ru);
            window.clearInterval(a.LS);
            a.ru = void 0;
            a.Lk = void 0;
            Vb(a.om);
            a.Ao = void 0;
            vF.h(CF(a));
        });
    }
    var FF;
    function GF() {
        void 0 === FF && (FF = new xF());
        return FF;
    }
    function CF(a) {
        var b, c, d;
        a = a.zH;
        return {
            xA: null !== (b = null === a || void 0 === a ? void 0 : a.kg.length + a.HH) && void 0 !== b ? b : 0,
            mp: null !== (c = null === a || void 0 === a ? void 0 : a.HH) && void 0 !== c ? c : 0,
            Oq: null !== (d = null === a || void 0 === a ? void 0 : a.kg) && void 0 !== d ? d : [],
        };
    }
    xF.prototype.yr = function (a) {
        var b, c;
        return !0 === (null === (b = this.zH) || void 0 === b ? void 0 : b.Fl.has(a)) ? 0 : !0 === (null === (c = this.Lk) || void 0 === c ? void 0 : c.Fl.has(a)) ? 1 : 2;
    };
    function EF(a, b) {
        b = void 0 === b ? !1 : b;
        var c = void 0 === c ? !1 : c;
        var d;
        return Wy(a, function f() {
            var g = this,
                h,
                m,
                n,
                p,
                u;
            return Aa(f, function (x) {
                if (1 == x.aa) {
                    h = g;
                    if (!A.current.oj || (!b && (void 0 !== g.ru || g.KS))) return x.return();
                    window.clearTimeout(g.ru);
                    g.ru = window.setTimeout(function () {
                        h.ru = void 0;
                    }, 2e3);
                    return sa(x, HF(g, !0), 2);
                }
                m = x.td;
                n = new zF(m, g.So);
                AF(n);
                g.pu.forEach(function (D) {
                    var J = D.M;
                    "enter" === D.action ? n.bn(J) : IF(n, J);
                });
                p = void 0 !== g.Lk && !n.Ep(g.Lk);
                if (c || (A.current.oj && p))
                    void 0 !== g.AL && ((u = performance.now() - g.AL), (u = (u - tF) / 6e4)),
                        F("RoomUserListsMismatched", {
                            current_size: null === (d = g.Lk) || void 0 === d ? void 0 : d.kg.length,
                            new_size: n.kg.length,
                            time_elapsed_m: (performance.now() - g.pT) / 6e4,
                            time_since_last_refetch_m: u,
                            refetch_count: g.BF,
                            lag_window_m: tF / 6e4,
                        });
                g.AL = performance.now();
                g.BF += 1;
                g.Lk = n;
                vF.h(CF(g));
                x.aa = 0;
            });
        });
    }
    function HF(a, b) {
        b = void 0 === b ? !1 : b;
        var c, d;
        if (void 0 === a.j) return r("roomUsers: calling fetchRoomUsers when not in a room", "roomUsers.ts", "cb"), Promise.reject("not in a room");
        b = b ? !1 : null !== (d = null === (c = a.l) || void 0 === c ? void 0 : BF(c)) && void 0 !== d ? d : !1;
        return OE(a.j, a.So, b);
    }
    function yF(a) {
        JF(a);
        window.setTimeout(function () {
            EF(a).catch(ct);
        }, 3e3);
        window.setTimeout(function () {
            EF(a).catch(ct);
        }, tF);
        a.LS = window.setInterval(function () {
            EF(a).catch(ct);
        }, uF);
    }
    function JF(a) {
        if (void 0 === a.lb) r("roomUsers: listening for public enter/leaves without room uid", "roomUsers.ts", "cb");
        else if (A.current.oj || B.getState().nd)
            z(
                new oF(a.lb).ea.g(function (b) {
                    KF(a, b.M, b.action);
                }),
                a.rF
            ),
                z(
                    new pF(a.lb).ea.g(function (b) {
                        0 === b.connections && KF(a, b.M, b.action);
                    }),
                    a.rF
                );
    }
    function KF(a, b, c) {
        var d, e;
        "enter" === c ? (null === (d = a.Lk) || void 0 === d ? void 0 : d.bn(b)) : null === (e = a.Lk) || void 0 === e ? void 0 : IF(e, b);
        LF(a, b, c);
        vF.h(CF(a));
    }
    function LF(a, b, c) {
        var d = a.pu.get(b.username);
        void 0 !== d && window.clearTimeout(d.timeout);
        d = window.setTimeout(function () {
            a.pu.delete(b.username);
        }, tF);
        a.pu.set(b.username, { M: b, action: c, timeout: d });
    }
    function DF(a) {
        function b(f) {
            void 0 === a.lb
                ? r("roomUsers: listening for private enter/leaves without room uid", "roomUsers.ts", "cb")
                : z(
                      new TE(a.lb, f).ea.g(function (g) {
                          if ("leave" !== g.action || 0 === g.connections) {
                              var h = g.M,
                                  m,
                                  n;
                              "enter" === g.action ? (null === (m = a.Ao) || void 0 === m ? void 0 : m.bn(h)) : null === (n = a.Ao) || void 0 === n ? void 0 : IF(n, h);
                              vF.h(CF(a));
                          }
                      }),
                      a.om
                  );
        }
        var c = B.getState();
        if ("" !== c.Uc) b(c.Uc);
        else {
            var d = -1,
                e = B.mi.g(function () {
                    var f = B.getState().Uc;
                    "" !== f && (b(f), e.removeListener(), clearTimeout(d));
                }, !1);
            d = window.setTimeout(function () {
                r("roomUsers: no private show ID after 10 seconds", "roomUsers.ts", "cb");
                e.removeListener();
            }, 1e4);
        }
    }
    da.Object.defineProperties(xF.prototype, {
        zH: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                var a;
                return null !== (a = this.Ao) && void 0 !== a ? a : this.Lk;
            },
        },
    });
    function zF(a, b) {
        var c = this,
            d,
            e;
        this.Fl = new Set();
        this.xD = new Map();
        this.kg = null !== (d = null === a || void 0 === a ? void 0 : a.Oq) && void 0 !== d ? d : [];
        this.HH = null !== (e = null === a || void 0 === a ? void 0 : a.mp) && void 0 !== e ? e : 0;
        this.So = b;
        this.kg.forEach(function (f) {
            c.Fl.add(f.username);
            c.xD.set(f.username, f);
        });
    }
    zF.prototype.bn = function (a) {
        if (!this.Fl.has(a.username)) {
            if ("a" === this.So) {
                for (var b = this.kg, c = 0, d = b.length; c < d; ) {
                    var e = Math.floor((c + d) / 2),
                        f = b[e],
                        g = wF.indexOf(LE(a)),
                        h = wF.indexOf(LE(f));
                    0 <= (g !== h ? (g < h ? -1 : 1) : a.username.localeCompare(f.username)) ? (c = e + 1) : (d = e);
                }
                this.kg.splice(c, 0, a);
            } else this.kg.push(a);
            this.Fl.add(a.username);
            this.xD.set(a.username, a);
        }
    };
    function IF(a, b) {
        if (a.Fl.has(b.username)) {
            var c = a.kg.findIndex(function (d) {
                return d.username === b.username;
            });
            a.kg.splice(c, 1);
            a.Fl.delete(b.username);
        }
    }
    function AF(a) {
        var b;
        if (void 0 !== A.current.V && A.current.oj) {
            var c = A.current.V.username,
                d = null !== (b = A.current.V.nc) && void 0 !== b ? b : "";
            b = KE(c, "o", d, "f");
        } else b = void 0;
        void 0 !== b && a.bn(b);
    }
    zF.prototype.Ep = function (a) {
        return (
            a.kg.length === this.kg.length &&
            this.kg.every(function (b) {
                return a.Fl.has(b.username);
            })
        );
    };
    v(
        "scroll",
        document,
        function () {
            return MF.h();
        },
        !0
    );
    v(
        "click",
        document,
        function () {
            return NF.h();
        },
        !0
    );
    function OF(a) {
        w.call(this, "span", a);
        var b = this;
        this.listeners = new Ub();
        this.Pn = function () {
            var d, e;
            null === (e = null === (d = b.Nz) || void 0 === d ? void 0 : d.parentElement) || void 0 === e ? void 0 : e.removeChild(b.Nz);
            b.Nz = void 0;
        };
        var c = Object.assign({ display: "inline-block", width: "16px", height: "16px", marginLeft: "4px" }, a.style);
        this.element = V("span", { colorClass: "InRoomIndicator", style: c });
        PF(this);
        QF(this);
        z(
            vF.g(function () {
                b.yr = GF().yr(a.username);
                RF(b);
            }),
            this.listeners
        );
        this.yr = GF().yr(a.username);
        RF(this);
    }
    q(OF, w);
    OF.prototype.dispose = function () {
        Vb(this.listeners);
    };
    function QF(a) {
        z(MF.g(a.Pn), a.listeners);
        z(NF.g(a.Pn), a.listeners);
        wd(a.element).g(function (b) {
            b ? a.Kz() : a.Pn();
        });
        v("touchend", a.element, function (b) {
            void 0 === a.Nz ? a.Kz() : a.Pn();
            b.preventDefault();
        });
    }
    function PF(a) {
        var b = { qg: !1, Rc: 1, wd: "5px" };
        a.RK = nw(Object.assign({ content: rq }, b));
        a.aM = nw(Object.assign({ content: tq }, b));
        a.bM = nw(Object.assign({ content: sq }, b));
        a = l([a.RK, a.aM, a.bM]);
        for (b = a.next(); !b.done; b = a.next()) (b = b.value), P(b, "tooltip"), O(b, "tooltip-white"), (b.style.position = "fixed"), (b.style.display = "");
    }
    OF.prototype.Kz = function () {
        var a;
        this.Pn();
        switch (this.yr) {
            case 0:
                var b = this.RK;
                break;
            case 1:
                b = this.aM;
                break;
            case 2:
                b = this.bM;
        }
        document.body.appendChild(b);
        var c = this.element.getBoundingClientRect(),
            d = Fd(),
            e = -d.left + c.left - 7;
        b.style.top = -d.top + c.top - b.offsetHeight - 6 + "px";
        b.style.left = e + "px";
        b.style.width = Bd(null !== (a = b.textContent) && void 0 !== a ? a : "", b) + 1 + "px";
        this.Nz = b;
    };
    function RF(a) {
        P(a.element, "inRoom");
        P(a.element, "notInPrivate");
        P(a.element, "notInRoom");
        switch (a.yr) {
            case 0:
                O(a.element, "inRoom");
                break;
            case 1:
                O(a.element, "notInPrivate");
                break;
            case 2:
                O(a.element, "notInRoom");
        }
    }
    OF.prototype.render = function () {
        return this.element;
    };
    var MF = new y("InRoomIndicator.documentClick", {
            rc: function () {
                return 50 + 3 * Ob;
            },
        }),
        NF = new y("InRoomIndicator.documentScroll", {
            rc: function () {
                return 50 + 3 * Ob;
            },
        });
    function SF(a) {
        w.call(this, "div", a);
    }
    q(SF, w);
    k = SF.prototype;
    k.initData = function (a) {
        this.Ha = a.Ha;
        this.sv = NA(a.ri.ra);
        this.bb = a.ri.ra.username;
        this.K = a.ri.ik;
        this.message = a.ri.message;
        this.bi = a.ri.bi;
        this.T = a.ri.T;
        this.time = a.ri.time;
        this.Ha = a.Ha;
        this.ri = a.ri;
    };
    k.ia = function (a) {
        var b = this,
            c = { display: "inline-block", left: TF + "px", position: "absolute", verticalAlign: "bottom", whiteSpace: "nowrap" },
            d = { bottom: "8px", paddingLeft: TF - 8 + "px", overflow: "hidden", position: "absolute", whiteSpace: "nowrap", width: "calc(100% - 36px)", boxSizing: "border-box" },
            e = { verticalAlign: "middle", position: "relative", top: "-1px" },
            f = { display: "inline-block", verticalAlign: "top" },
            g = void 0 === this.time || this.rt() ? "" : EB(new Date(this.time)),
            h = UF(this),
            m = this.bb !== this.K;
        m && (h.style.maxWidth = "calc(100% - 14px)");
        var n = 0 < this.T && "" !== this.message;
        this.hm = V("span", null, n ? " (" + this.T + ")" : "");
        this.Jl = V("div", { className: "timeString", style: { fontSize: "10px", position: "absolute", right: "8px", textAlign: "right", top: "8px" } }, g);
        this.OO = V(
            "span",
            { colorClass: this.sv, style: { fontFamily: "Tahoma, Arial, Helvetica, sans-serif", fontWeight: "bold", overflow: "hidden", textOverflow: "ellipsis", display: "inline-block", verticalAlign: "bottom" } },
            this.bb
        );
        VF(this);
        this.element = V(
            "div",
            {
                colorClass: ["PmListItem", n ? "unreadBg" : ""],
                style: {
                    borderBottomWidth: "1px",
                    borderBottomStyle: "solid",
                    cursor: "pointer",
                    fontFamily: "Tahoma, Arial, Helvetica, sans-serif",
                    fontSize: "12px",
                    height: "40px",
                    lineHeight: "14px",
                    overflowX: "hidden",
                    padding: "8px",
                    position: "relative",
                    textAlign: "left",
                },
                onClick: function () {
                    a.te.h(b.bb);
                },
            },
            V(WF, { name: this.bb, style: { marginTop: "-16px", position: "absolute", top: "50%" }, color: "", size: "32px", sv: this.sv }),
            V(
                "div",
                {
                    style: c,
                    ref: function (p) {
                        return (b.WP = p);
                    },
                },
                this.OO,
                this.hm,
                A.current.hz &&
                    !this.Ha &&
                    V(OF, {
                        classRef: function (p) {
                            return (b.FD = p);
                        },
                        username: this.bb,
                        style: e,
                    })
            ),
            this.Jl,
            V(
                "div",
                {
                    colorClass: "messageDiv",
                    style: d,
                    ref: function (p) {
                        return (b.pe = p);
                    },
                },
                m && "" !== this.message ? Dr(f) : "",
                h
            )
        );
    };
    k.render = function () {
        return this.element;
    };
    k.B = function () {
        var a;
        null === (a = this.parent) || void 0 === a ? void 0 : a.removeChild(this);
        this.element.remove();
        this.dispose();
    };
    k.dispose = function () {
        var a;
        null === (a = this.FD) || void 0 === a ? void 0 : a.dispose();
    };
    k.D = function () {
        w.prototype.D.call(this);
        XF(this);
    };
    k.Pv = function () {
        w.prototype.Pv.call(this);
        XF(this);
    };
    function VF(a) {
        var b, c;
        if (a.Ha) {
            var d = 240 - Bd(null !== (b = a.Jl.textContent) && void 0 !== b ? b : "", a.Jl) - Bd(null !== (c = a.hm.textContent) && void 0 !== c ? c : "", a.hm);
            a.OO.style.maxWidth = d + "px";
        }
    }
    function YF(a) {
        var b = Br();
        Q(b, { display: "none", position: "absolute", right: "8px", top: "calc(50% - 8px)" });
        b.onclick = function (d) {
            d.stopPropagation();
            d.preventDefault();
            ZF(a.bb, a.Ha);
        };
        var c = a.pe.style.width;
        v("mouseenter", a.element, function () {
            b.style.display = "block";
            a.Jl.style.display = "none";
            a.pe.style.width = "calc(100% - 56px)";
        });
        v("mouseleave", a.element, function () {
            b.style.display = "none";
            a.Jl.style.display = "block";
            a.pe.style.width = c;
        });
        a.element.appendChild(b);
    }
    function XF(a) {
        0 < a.element.clientWidth && (a.Jl.style.visibility = a.WP.clientWidth > a.element.clientWidth - TF - 8 - a.Jl.clientWidth ? "hidden" : "");
    }
    k.oc = function () {
        return this.T;
    };
    k.Bz = function (a) {
        this.T = a;
        0 === this.T ? ((this.hm.innerText = ""), P(this.element, "unreadBg")) : ((this.hm.innerText = " (" + this.T + ")"), O(this.element, "unreadBg"));
    };
    function UF(a) {
        if ("" === a.message && a.bi) return V("span", null, Tp);
        a = new GE(a.message);
        var b = a.wf()[0];
        b = V("span", { style: { maxWidth: "100%", overflow: "hidden", whiteSpace: "nowrap", textOverflow: "ellipsis", display: "inline-block" } }, b.split("\n")[0]);
        for (var c = 1; c < a.wf().length; c += 1) {
            var d = V("span", { style: { cursor: "pointer" } }, ":" + a.As()[c - 1].name);
            b.appendChild(d);
            "" !== a.wf()[c] && ((d = V("span", null, a.wf()[c])), b.appendChild(d));
        }
        return wb() ? b : twemoji.parse(b);
    }
    k.rt = function () {
        return "" === this.message && !this.bi;
    };
    var TF = 48;
    function $F(a) {
        this.wf = [];
        this.oD = [];
        var b = a.match(/#[a-z0-9\-_]{2,50}/g);
        if (null !== b) {
            b = l(b);
            for (var c = b.next(); !c.done; c = b.next()) this.oD.push(c.value.substr(1));
        }
        this.wf = a.split(/#[a-z0-9\-_]{2,50}/g);
    }
    function aG() {
        return void 0 === window.ReactAPIRegistry
            ? (r("ReactAPIRegistry is undefined - React code is likely not loaded", "ReactAPIRegistry.ts", "api", { argument: "getApprovedTagsFromTitle" }),
              function () {
                  return Promise.reject();
              })
            : void 0 === window.ReactAPIRegistry.getApprovedTagsFromTitle
            ? (r("ReactAPIRegistry does not contain API function getApprovedTagsFromTitle - React code may not be up to date", "ReactAPIRegistry.ts", "api", { argument: "getApprovedTagsFromTitle" }),
              function () {
                  return Promise.reject();
              })
            : window.ReactAPIRegistry.getApprovedTagsFromTitle;
    }
    function bG(a) {
        return aG()(a);
    }
    function cG(a, b, c) {
        if ("" !== b) {
            var d = [],
                e = ie(b),
                f = new $F(e),
                g = function (h) {
                    for (var m = 0; m < f.wf.length; m += 1) {
                        var n = W(f.wf[m]);
                        n.FM = !1;
                        d.push(n);
                        m < f.oD.length && d.push($r(f.oD[m], h));
                    }
                    a.event.ya.h({ wa: [d], colorClass: "titleChange", mc: "#DC5500", weight: "bold", Fa: !1 });
                    a.event.MG.h(b);
                };
            void 0 !== c
                ? g(c)
                : bG(b)
                      .then(g)
                      .catch(function () {
                          g([]);
                      });
        }
    }
    function dG(a, b) {
        nu(b.K.username) || a.event.Nq.h(b);
    }
    function eG(a, b, c) {
        nu(a.K.username) || ((c = void 0 === c ? b : c), "" !== b && c === b ? zE.h(a) : "" === c && AE.h(Object.assign(Object.assign({}, a), { j: c })));
    }
    function fG(a, b) {
        "enter" !== b.action || (void 0 !== b.connections && 1 !== b.connections) ? "leave" !== b.action || (void 0 !== b.connections && 0 !== b.connections) || gG(a, b.M) : hG(a, b.M);
    }
    function iG(a, b) {
        b.username === a.username() && a.event.UL.h(!0);
        var c = b.K;
        var d = b.username;
        c = T(S("%(from)s has granted moderator privileges to %(to)s."), { from: c, to: d }, !0);
        a.event.ya.h({ wa: [[W(c)]], Fa: [b.K, b.username].includes(a.username()) });
        ez.h({ ec: !0, username: b.username });
    }
    function jG(a, b) {
        b.username === a.username() && a.event.UL.h(!1);
        var c = b.K;
        var d = b.username;
        c = T(S("%(from)s has revoked moderator privileges from %(to)s."), { from: c, to: d }, !0);
        a.event.ya.h({ wa: [[W(c)]], Fa: [b.K, b.username].includes(a.username()) });
        ez.h({ ec: !1, username: b.username });
    }
    function kG(a, b) {
        b = void 0 === b ? zg : b;
        a.event.ya.h({ wa: [[W(b)]], Fa: !0 });
        lG(a, "notconnected");
    }
    function mG(a) {
        lG(a, "passwordprotected");
        a.event.ya.h({ wa: [[W(mg)]], Fa: !0 });
    }
    function nG(a, b) {
        a.event.mz.h({ username: b.username });
        var c = a.event.ya,
            d = c.h;
        var e = b.username;
        var f = b.K;
        e = T(S("User %(username)s was silenced by %(silencer)s and their messages have been removed"), { username: e, silencer: f }, !0);
        d.call(c, { wa: [[W(e)]], Fa: [b.K, b.username].includes(a.username()) });
        a.event.zy.h({ Wk: b.username, jr: b.K, Yl: !1 });
    }
    function oG(a, b) {
        a.event.mz.h({ username: b.username });
        var c = a.event.ya,
            d = c.h;
        var e = b.username;
        e = T(S("User %(username)s was kicked out of the room and their messages have been removed"), { username: e }, !0);
        d.call(c, { wa: [[W(e)]], Fa: b.username === a.username() });
        a.event.zy.h({ Wk: b.username, jr: b.K, Yl: !0 });
    }
    function pG(a, b) {
        a.ZM = b.MO;
        a.event.FS.h(b);
        if (a.Qb) {
            switch (a.status) {
                case "public":
                case "away":
                    break;
                default:
                    t("unexpected status: " + a.status, "messagehandler.ts", "chatconnection");
            }
            lG(a, "privaterequesting");
            a.Qb && a.event.au.h("PrivateShow");
        }
    }
    function qG(a) {
        switch (a.status) {
            case "public":
                lG(a, "privatenotwatching");
                break;
            case "privaterequesting":
                a.bd.th("leaveRoom", { room: a.j() });
                rG(a);
                lG(a, "privatewatching");
                break;
            default:
                t("private show approve unexpected status: " + a.status, "messagehandler.ts", "chatconnection");
        }
        var b = W(qg);
        "privatewatching" === a.status
            ? (a.event.ya.h({ wa: [[b]], mc: "#222", background: "#ff8b45", weight: "bold", Fa: !0 }), a.Qb && !A.current.nb && a.event.ya.h({ wa: [[W(Dp)]], Fa: !0 }))
            : a.event.ya.h({ wa: [[b, W(" ("), { Yf: 3 }, W(")")]], mc: "#222", background: "#ff8b45", weight: "bold", Fa: !0 });
    }
    function sG(a) {
        function b() {
            lG(a, "away");
            a.event.ya.h({ wa: [[W(rg)]], mc: "#222", background: "#ff8b45", weight: "bold", Fa: !0 });
        }
        switch (a.status) {
            case "privaterequesting":
                lG(a, "public");
                a.event.ya.h({ wa: [[W(sg)]], mc: "#222", background: "#ff8b45", weight: "bold", Fa: !0 });
                break;
            case "away":
            case "hidden":
            case "public":
            case "hiddenwatching":
                break;
            case "privatewatching":
                a.bd.th("leavePrivateRoom", { room: a.j() });
                tG(a);
                b();
                break;
            case "privatespying":
            case "privatenotwatching":
                b();
                break;
            default:
                t("privateShowCancel wrong room status: " + a.status, "messagehandler.ts", "chatconnection");
        }
    }
    function uG(a) {
        switch (a.status) {
            case "away":
            case "public":
            case "privaterequesting":
                a.event.ya.h({ wa: [[W(xg)]], mc: "#222", background: "#ff8b45", weight: "bold", Fa: !0 });
                lG(a, "public");
                break;
            default:
                r("unexpected state: " + a.status, "messagehandler.ts", "chatconnection");
        }
    }
    function vG(a, b, c) {
        (void 0 !== c && c) || ((c = b.amount), a.event.au.h(1e3 <= c ? "HugeTip" : 500 <= c ? "LargeTip" : 100 <= c ? "MediumTip" : 15 <= c ? "SmallTip" : "TinyTip"));
        a.event.sr.h(b);
        c = ["" === b.K.username ? W(hh) : Zr(b.K), W(" tipped " + b.amount + " " + (1 < b.amount ? "tokens" : "token"))];
        b.Nx && c.push(W(" anonymously"));
        a.Qb && "" !== b.message && c.push(W(" -- " + b.message));
        a.event.ya.h({ wa: [c], background: "#ff3", mc: "#000", weight: "bold", Fa: b.K.username === a.username() || a.Qb, uC: b.K.username, Ga: b.Ga });
    }
    function wG(a, b) {
        "log" === b.type && void 0 !== b.vC ? a.event.cB.h(b.vC) : "apperrorlog" === b.type && void 0 !== b.GC ? a.event.ya.h({ wa: b.GC, Fa: !1 }) : r("handleAppDebugError invalid type", "messagehandler.ts", "chatconnection", b);
    }
    function xG(a, b) {
        for (var c = [], d = l(b.message.split(new RegExp("\\b" + b.K.username + "\\b", "gi"))), e = d.next(); !e.done; e = d.next()) (e = e.value), "" !== e && c.push(W(e)), c.push(Zr(b.K));
        c.pop();
        a.event.ya.h({ wa: [c], background: "#33ff33", mc: "#000", weight: "bold", Fa: b.K.username === a.username(), Ga: b.Ga });
    }
    function yG(a, b) {
        a.event.Fm.h(b);
        if (a.Xd !== b.Xd) {
            a.Xd = b.Xd;
            var c = a.j();
            var d = b.Xd;
            c = T(S("%(username)s changed Private Show price to %(price)s tokens per minute"), { username: c, price: d }, !0);
            a.event.ya.h({ wa: [[W(c)]], Fa: !0 });
        }
        a.vf !== b.vf &&
            0 !== b.vf &&
            ((a.vf = b.vf), (c = a.j()), (b = b.vf), (b = T(S("%(username)s changed Spy on Private Show price to %(price)s tokens per minute"), { username: c, price: b }, !0)), a.event.ya.h({ wa: [[W(b)]], Fa: !0 }));
    }
    function zG(a, b, c) {
        if (!a.Qb) {
            a.event.BK.h(c);
            switch (a.status) {
                case "privaterequesting":
                    QB(a);
                    break;
                case "public":
                case "hidden":
                case "hiddenwatching":
                    break;
                default:
                    r("handleHiddenShowStatusChange unexpected status: " + a.status, "messagehandler.ts", "chatconnection");
            }
            "public" === b
                ? window.setTimeout(function () {
                      lG(a, "public");
                  }, 3e3)
                : lG(a, b);
        }
    }
    function AG(a, b) {
        b
            ? window.setTimeout(function () {
                  lG(a, "hiddenwatching");
              }, 2e3)
            : lG(a, "hiddenwatching");
    }
    var BG = !1;
    function CG(a) {
        BG ||
            ((BG = !0),
            R(a, function () {
                BG = !1;
            }));
    }
    function DG(a, b, c) {
        function d(p) {
            "left" === p ? (m.style.fill = "#E2E2E2") : (n.style.fill = "#E2E2E2");
        }
        function e(p) {
            g.sd && ("left" === p ? (m.style.fill = "#B8B8B8") : (n.style.fill = "#B8B8B8"));
        }
        function f(p) {
            var u = document.createElementNS("http://www.w3.org/2000/svg", "svg"),
                x = document.createElementNS("http://www.w3.org/2000/svg", "path");
            x.setAttribute("d", "M5.7 0L0 5.55 18.6 24 0 42.45 5.7 48 30 24 5.7 0z");
            x.setAttribute("fill", "#E2E2E2");
            "left" === p && x.setAttribute("transform", "translate(30, 0) scale(-1,1)");
            u.appendChild(x);
            u.setAttribute("viewBox", "0 0 30 50");
            return u;
        }
        c = void 0 === c ? !0 : c;
        w.call(this);
        var g = this;
        this.sd = c;
        this.oe = document.createElement("div");
        this.We = document.createElement("div");
        this.oe.style.display = this.We.style.display = "inline-block";
        this.oe.style.height = this.We.style.height = "calc(100% - 20px)";
        this.oe.style.width = this.We.style.width = "50%";
        this.oe.style.top = this.We.style.top = "0px";
        this.oe.style.position = this.We.style.position = "absolute";
        this.oe.style.left = this.We.style.right = "0px";
        this.sd && (this.oe.style.cursor = this.We.style.cursor = "pointer");
        this.vg = document.createElement("div");
        this.Fg = document.createElement("div");
        this.vg.style.position = this.Fg.style.position = "absolute";
        this.vg.style.top = this.Fg.style.top = (this.oe.offsetHeight - 50) / 2 + "px";
        this.vg.style.height = this.Fg.style.height = "50px";
        this.vg.style.width = this.Fg.style.width = "30px";
        this.vg.style.userSelect = this.Fg.style.userSelect = "none";
        this.vg.style.webkitUserSelect = this.Fg.style.webkitUserSelect = "none";
        this.vg.style.left = this.Fg.style.right = "0";
        c = f("left");
        var h = f("right");
        this.vg.appendChild(c);
        this.Fg.appendChild(h);
        this.oe.appendChild(this.vg);
        this.We.appendChild(this.Fg);
        var m = this.vg.firstChild.firstChild,
            n = this.Fg.firstChild.firstChild;
        this.oe.onmouseenter = function () {
            e("left");
        };
        this.oe.onmouseleave = function () {
            d("left");
        };
        this.We.onmouseenter = function () {
            e("right");
        };
        this.We.onmouseleave = function () {
            d("right");
        };
        this.oe.onclick = a;
        this.We.onclick = b;
    }
    q(DG, w);
    function EG(a) {
        a.vg.style.left = a.Fg.style.right = "25px";
    }
    function FG(a) {
        a.oe.style.visibility = a.We.style.visibility = "hidden";
    }
    function GG(a) {
        var b = V("path", {
            fill: "#E2E2E2",
            d:
                "M11.7255 0.392534C11.6095 0.276307 11.4717 0.184097 11.32 0.121183C11.1684 0.0582692 11.0058 0.0258858 10.8415 0.0258858C10.6773 0.0258858 10.5147 0.0582692 10.363 0.121183C10.2113 0.184097 10.0735 0.276307 9.95753 0.392534L6.23553 4.11453C6.18867 4.16125 6.1252 4.18748 6.05903 4.18748C5.99287 4.18748 5.9294 4.16125 5.88253 4.11453L2.15953 0.392534C2.0448 0.270837 1.90682 0.173402 1.75375 0.106C1.60068 0.0385979 1.43564 0.00259895 1.26841 0.000135597C1.10118 -0.00232775 0.935151 0.0287947 0.780163 0.0916592C0.625176 0.154524 0.484381 0.247852 0.366117 0.366117C0.247852 0.484381 0.154524 0.625176 0.0916592 0.780163C0.0287947 0.935151 -0.00232775 1.10118 0.000135597 1.26841C0.00259895 1.43564 0.0385979 1.60068 0.106 1.75375C0.173402 1.90682 0.270837 2.0448 0.392534 2.15953L4.11453 5.88153C4.13782 5.90476 4.15629 5.93234 4.16889 5.96272C4.18149 5.99309 4.18798 6.02565 4.18798 6.05853C4.18798 6.09142 4.18149 6.12398 4.16889 6.15435C4.15629 6.18472 4.13782 6.21231 4.11453 6.23553L0.392534 9.95953C0.158287 10.1941 0.0267145 10.512 0.0267145 10.8435C0.0267145 11.175 0.158287 11.493 0.392534 11.7275C0.629353 11.9575 0.946449 12.0861 1.27653 12.0861C1.60662 12.0861 1.92371 11.9575 2.16053 11.7275L5.88253 8.00553C5.90567 7.98228 5.93317 7.96383 5.96346 7.95124C5.99375 7.93865 6.02623 7.93217 6.05903 7.93217C6.09184 7.93217 6.12431 7.93865 6.1546 7.95124C6.18489 7.96383 6.2124 7.98228 6.23553 8.00553L9.95953 11.7255C10.1967 11.9548 10.5137 12.0829 10.8435 12.0829C11.1734 12.0829 11.4904 11.9548 11.7275 11.7255C11.9618 11.491 12.0934 11.173 12.0934 10.8415C12.0934 10.51 11.9618 10.1921 11.7275 9.95753L8.00553 6.23553C7.98225 6.21231 7.96378 6.18472 7.95118 6.15435C7.93857 6.12398 7.93209 6.09142 7.93209 6.05853C7.93209 6.02565 7.93857 5.99309 7.95118 5.96272C7.96378 5.93234 7.98225 5.90476 8.00553 5.88153L11.7255 2.15953C11.8416 2.04354 11.9337 1.90581 11.9965 1.75422C12.0593 1.60262 12.0917 1.44013 12.0917 1.27603C12.0917 1.11194 12.0593 0.949446 11.9965 0.797851C11.9337 0.646255 11.8416 0.508526 11.7255 0.392534Z",
        });
        return V(
            "div",
            {
                className: "closeButton",
                style: { position: "absolute", width: "15px", padding: "15px", right: "0px", zIndex: 1102, cursor: "pointer" },
                onMouseEnter: function () {
                    b.style.fill = "#B8B8B8";
                },
                onMouseLeave: function () {
                    b.style.fill = "#E2E2E2";
                },
                onClick: a,
            },
            V("svg", { viewBox: "0 0 13 13", fill: "none", xmlns: "http://www.w3.org/2000/svg" }, b)
        );
    }
    function HG(a) {
        var b = this,
            c;
        this.Uf = a;
        this.element = V("div", null);
        this.zA = new Map();
        this.wO = new Map();
        IG();
        JG.has(a.Ek) || JG.set(a.Ek, []);
        null === (c = JG.get(a.Ek)) || void 0 === c ? void 0 : c.push(this);
        this.Uf.Qa.forEach(function (d) {
            var e,
                f = KG(b, d);
            b.element.appendChild(f);
            b.wO.set(d.sc, f);
            LG.has(d.sc) || LG.set(d.sc, []);
            null === (e = LG.get(d.sc)) || void 0 === e ? void 0 : e.push(b);
        });
    }
    function KG(a, b) {
        if ("" === b.url) {
            var c = V("div", { style: MG });
            NG(c);
            return c;
        }
        var d,
            e = !1;
        var f = V(
            "div",
            { style: MG },
            V(UA, { Gs: { background: "rgba(0,0,0,0.6)" } }),
            V("img", {
                src: b.Zo,
                ref: function (g) {
                    return (d = g);
                },
                style: { position: "absolute", maxHeight: "100%" },
                onLoad: function () {
                    e = !0;
                    if (!0 !== b.Yt)
                        if (a.Uf.yq) {
                            var g = document.createElement("span");
                            g.innerText = Yo;
                            Q(g, { color: "#FFFFFF", backgroundColor: "#2067AB", fontFamily: "'UbuntuBold', Arial, Helvetica, sans-serif", fontSize: "8px", position: "absolute", bottom: "2px", right: "2px", padding: "0px 1px", zIndex: 1 });
                            a.zA.set(b.sc, g);
                            f.appendChild(g);
                        } else {
                            g = d;
                            var h = document.createElement("canvas"),
                                m = h.getContext("2d"),
                                n = g.height;
                            h.width = g.width;
                            h.height = n;
                            m.drawImage(g, 0, 0, 8, 8);
                            m.imageSmoothingEnabled = !1;
                            m.drawImage(h, 0, 0, 8, 8, 0, 0, h.width, h.height);
                            h.style.zIndex = "1000";
                            h.style.position = "absolute";
                            a.zA.set(b.sc, h);
                            f.insertBefore(h, f.firstChild);
                        }
                },
                onError: function () {
                    return Wy(a, function h() {
                        return Aa(h, function (m) {
                            if (1 == m.aa)
                                return (
                                    qb()
                                        ? (m = sa(
                                              m,
                                              new Promise(function (n) {
                                                  return window.setTimeout(n, 300);
                                              }),
                                              3
                                          ))
                                        : ((m.aa = 2), (m = void 0)),
                                    m
                                );
                            if (2 != m.aa && e) return m.return();
                            NG(f);
                            m.aa = 0;
                        });
                    });
                },
            })
        );
        f.onclick = function () {
            var g = Object.assign(Object.assign({}, a.Uf), { Qa: [].concat(ha(a.Uf.Qa)) });
            void 0 === OG && (OG = new PG());
            OG.Uf !== g && OG.Bc(g);
            QG(OG, OG.Qa.indexOf(b));
        };
        return f;
    }
    function RG(a, b) {
        var c, d;
        a = null !== (c = JG.get(a)) && void 0 !== c ? c : [];
        c = l(a);
        for (a = c.next(); !a.done; a = c.next())
            if (((a = a.value), void 0 !== a)) {
                var e = a.zA.get(b);
                null === (d = null === e || void 0 === e ? void 0 : e.parentElement) || void 0 === d ? void 0 : d.removeChild(e);
                a.zA.delete(b);
            }
    }
    HG.prototype.Hw = function (a) {
        this.Uf.Qa = this.Uf.Qa.filter(function (c) {
            return c.sc !== a;
        });
        var b = this.wO.get(a);
        void 0 !== b && NG(b);
    };
    function SG(a) {
        var b,
            c = l(null !== (b = LG.get(a)) && void 0 !== b ? b : []);
        for (b = c.next(); !b.done; b = c.next()) b.value.Hw(a);
    }
    var JG = new Map(),
        LG = new Map();
    function NG(a) {
        for (var b = V("img", { src: "https://static-assets.highwebmedia.com/images/no_thumbnail_1.jpg", style: { position: "absolute", maxHeight: "100%", left: "-9px" } }); null !== a.firstChild; ) a.removeChild(a.firstChild);
        a.appendChild(b);
        a.onclick = function () {
            R(Cp);
        };
    }
    var TG = !1;
    function IG() {
        TG ||
            (UG.g(function (a) {
                SG(a);
            }),
            VG.g(function (a) {
                SG(a);
            }),
            (TG = !0));
    }
    function PG() {
        Yr.call(this, {
            jm: function () {
                a.element.classList.add("data-hj-suppress");
                a.element.style.display = "block";
                a.D();
            },
            Il: !0,
        });
        var a = this;
        this.ta = 0;
        UG.g(function (b) {
            a.Hw(b);
        }, !1);
        VG.g(function (b) {
            a.Hw(b);
        }, !1);
    }
    var OG;
    q(PG, Yr);
    k = PG.prototype;
    k.Bc = function (a) {
        var b;
        this.Uf = a;
        this.Uf.yq = null !== (b = this.Uf.yq) && void 0 !== b ? b : !1;
        a = l(this.Qa);
        for (b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            if (void 0 !== b.lt) break;
            b.lt = V("img", {
                src: b.url,
                style: { position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)", maxHeight: "calc(100% - 30px)", maxWidth: "calc(100% - 180px)" },
                onLoad: function () {
                    var c;
                    null === (c = OG) || void 0 === c ? void 0 : c.D();
                },
            });
        }
        WG(this);
    };
    function WG(a) {
        a.Hf = void 0;
        1 <
            a.Qa.filter(function (b) {
                return "" !== b.Zo;
            }).length &&
            ((a.Hf = new DG(
                function () {
                    a.previous();
                },
                function () {
                    a.next();
                }
            )),
            EG(a.Hf));
        a.element = V(
            "div",
            { tabIndex: -1, style: { position: "fixed", zIndex: 1101, padding: "0px 80px", outline: "none", width: "80vw", height: "80vh", left: "10vw", top: "10vh", boxSizing: "border-box" }, colorClass: "ChatMediaCarousel" },
            GG(function () {
                a.B();
            }),
            void 0 !== a.Hf ? a.Hf.oe : void 0,
            void 0 !== a.Hf ? a.Hf.We : void 0
        );
        v("keydown", a.element, function (b) {
            switch (b.key) {
                case "Left":
                case "ArrowLeft":
                    a.previous();
                    break;
                case "Right":
                case "ArrowRight":
                    a.next();
                    break;
                case "Esc":
                case "Escape":
                    a.B();
            }
        });
    }
    function XG(a) {
        var b, c, d;
        null === (d = null === (c = null === (b = a.aj) || void 0 === b ? void 0 : b.lt) || void 0 === c ? void 0 : c.parentElement) || void 0 === d ? void 0 : d.removeChild(a.aj.lt);
    }
    function QG(a, b) {
        b = void 0 === b ? 0 : b;
        a.show();
        XG(a);
        a.ta = b;
        void 0 !== a.aj && void 0 !== a.aj.lt && (a.element.appendChild(a.aj.lt), a.Uf.yq || !1 !== a.aj.Yt || ((a.aj.Yt = !0), YG(a.aj.VC, a.Uf.Ek, a.aj.sc), RG(a.Uf.Ek, a.aj.sc)));
        a.D();
    }
    k.B = function (a) {
        Yr.prototype.B.call(this, void 0 === a ? !0 : a);
        XG(this);
    };
    k.Hw = function (a) {
        var b,
            c = this.Qa.findIndex(function (d) {
                return d.sc === a;
            });
        -1 !== c && (this.ta === c && this.B(), this.Qa.splice(c, 1), this.ta > c && --this.ta, 1 === this.Qa.length && (null === (b = this.Hf) || void 0 === b ? void 0 : FG(b)));
    };
    k.next = function () {
        for (var a = (this.ta + 1) % this.Qa.length; "" === this.Qa[a].Zo; ) a = (a + 1) % this.Qa.length;
        QG(this, a);
    };
    k.previous = function () {
        for (var a = 0 < this.ta ? this.ta - 1 : this.Qa.length - 1; "" === this.Qa[a].Zo; ) a = 0 < a ? a - 1 : this.Qa.length - 1;
        QG(this, a);
    };
    k.D = function () {
        var a;
        null === (a = this.Hf) || void 0 === a ? void 0 : (a.vg.style.top = a.Fg.style.top = (this.element.offsetHeight - 50) / 2 + "px");
    };
    da.Object.defineProperties(PG.prototype, {
        Qa: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return this.Uf.Qa;
            },
        },
        aj: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return this.Qa[this.ta];
            },
        },
    });
    var MG = { width: "64px", height: "64px", margin: "0px 1px", display: "inline-block", backgroundSize: "cover", backgroundPosition: "center", position: "relative", cursor: "pointer", borderRadius: "4px", overflow: "hidden", zIndex: 0 };
    var ZG = Object.assign(Object.assign({}, MG), { cursor: "default" });
    function $G(a) {
        w.call(this);
        var b = this;
        this.bF = a;
        this.DN = aH;
        this.listeners = new Ub();
        a = { height: "100%", position: "absolute", zIndex: 1e3, opacity: 0.8, borderRadius: 0, border: "none", fill: "currentColor" };
        var c = { minHeight: "77px", width: "auto", minWidth: "100%", cssFloat: "left", boxSizing: "border-box", padding: bH + "px", whiteSpace: "nowrap", position: "relative" };
        this.lg = new w();
        Q(this.lg, c);
        this.element = V(
            "div",
            { className: "pmMediaDockContainer", style: { position: "absolute", width: "100%", display: "none", overflowX: "hidden", whiteSpace: "nowrap", height: "77px", bottom: 0 } },
            V(
                "button",
                {
                    ref: function (d) {
                        return (b.BN = d);
                    },
                    onClick: function () {
                        b.scrollLeft();
                    },
                    style: Object.assign(Object.assign({}, a), { left: 0 }),
                    colorClass: "scrollButton",
                },
                V(
                    "svg",
                    { width: "8", height: "12", viewBox: "0 0 8 12", xmlns: "http://www.w3.org/2000/svg" },
                    V("path", {
                        d:
                            "M9.19276e-07 5.98581C-0.000425611 5.65497 0.147594 5.33999 0.406233 5.12135L6.21431 0.216066C6.6146 -0.106384 7.20982 -0.0630863 7.55493 0.313586C7.90004 0.690259 7.8688 1.26253 7.48456 1.6025L2.40562 5.89181C2.37742 5.91555 2.36125 5.9498 2.36125 5.98581C2.36125 6.02182 2.37742 6.05607 2.40562 6.07981L7.48456 10.3691C7.75191 10.5845 7.87679 10.922 7.81086 11.251C7.74493 11.58 7.49854 11.8489 7.16704 11.9537C6.83554 12.0584 6.47093 11.9826 6.21431 11.7556L0.408316 6.85177C0.149051 6.63276 0.000328855 6.31734 9.19276e-07 5.98581Z",
                        fill: "#222222",
                    })
                )
            ),
            V(
                "button",
                {
                    ref: function (d) {
                        return (b.CN = d);
                    },
                    onClick: function () {
                        b.Gu.scrollLeft += b.DN;
                        cH(b);
                    },
                    style: Object.assign(Object.assign({}, a), { right: 0 }),
                    colorClass: "scrollButton",
                },
                V(
                    "svg",
                    { width: "8", height: "12", viewBox: "0 0 8 12", xmlns: "http://www.w3.org/2000/svg" },
                    V("path", {
                        d:
                            "M8 5.98581C8.00043 5.65497 7.85241 5.33999 7.59377 5.12135L1.78569 0.216066C1.3854 -0.106384 0.790178 -0.0630863 0.44507 0.313586C0.0999627 0.690259 0.131205 1.26253 0.515437 1.6025L5.59438 5.89181C5.62258 5.91555 5.63875 5.9498 5.63875 5.98581C5.63875 6.02182 5.62258 6.05607 5.59438 6.07981L0.515437 10.3691C0.248085 10.5845 0.123215 10.922 0.189144 11.251C0.255072 11.58 0.501458 11.8489 0.832959 11.9537C1.16446 12.0584 1.52907 11.9826 1.78569 11.7556L7.59168 6.85177C7.85095 6.63276 7.99967 6.31734 8 5.98581Z",
                        fill: "#222222",
                    })
                )
            ),
            V(
                "div",
                {
                    ref: function (d) {
                        return (b.Gu = d);
                    },
                    onScroll: function () {
                        cH(b);
                    },
                    style: { overflow: "scroll", width: "100%", position: "relative" },
                    className: "noScrollbar",
                },
                this.lg.element
            )
        );
        cH(this);
        z(
            UG.g(function (d) {
                var e;
                null === (e = b.Rp(d)) || void 0 === e ? void 0 : e.Gq();
            }),
            this.listeners
        );
        z(
            VG.g(function (d) {
                var e;
                null === (e = b.Rp(d)) || void 0 === e ? void 0 : e.KL();
            }),
            this.listeners
        );
    }
    q($G, w);
    k = $G.prototype;
    k.D = function () {
        cH(this);
    };
    k.scrollLeft = function () {
        this.Gu.scrollLeft -= this.DN;
        cH(this);
    };
    function cH(a) {
        var b = a.Gu;
        a.BN.style.display = 0 < b.scrollLeft ? "block" : "none";
        a.CN.style.display = b.scrollLeft < b.scrollWidth - b.offsetWidth ? "block" : "none";
    }
    k.toggle = function () {
        var a = this;
        this.La() ? this.B() : this.show();
        window.setTimeout(function () {
            cH(a);
        }, 0);
    };
    k.show = function () {
        this.La() || (this.Ja(), this.CN.click(), this.BN.click(), this.bF.R());
    };
    k.B = function () {
        this.ha();
        this.ph();
        this.bF.R();
    };
    k.removeItem = function (a) {
        this.lg.removeChild(a);
    };
    k.items = function () {
        return this.lg.children();
    };
    k.Rp = function (a) {
        return this.items().find(function (b) {
            var c;
            return (null === (c = b.media) || void 0 === c ? void 0 : c.sc) === a;
        });
    };
    k.clear = function () {
        for (; 0 < this.items().length; )
            this.items().forEach(function (a) {
                a.remove();
            });
    };
    function dH(a) {
        return 0 === a.items().length;
    }
    k.Qa = function () {
        return Wy(this, function b() {
            var c = this;
            return Aa(b, function (d) {
                return d.return(
                    Promise.all(
                        c.items().map(function (e) {
                            return e.tE;
                        })
                    )
                );
            });
        });
    };
    k.ph = function () {};
    var bH = 5;
    function eH(a, b) {
        w.call(this);
        var c = this;
        this.tE = a;
        this.oi = b;
        this.element = V(
            "div",
            { style: Object.assign(Object.assign({}, ZG), { backgroundImage: "" }), colorClass: "mediaDockItem" },
            V("img", {
                src: "https://static-assets.highwebmedia.com/tsdefaultassets/mediaDock/closeButton.svg",
                onClick: function (d) {
                    d.stopPropagation();
                    c.remove();
                },
                ref: function (d) {
                    return (c.tu = d);
                },
                style: { position: "absolute", top: 0, right: 0, zIndex: 1, cursor: "pointer" },
            }),
            V(
                "div",
                {
                    style: Object.assign(Object.assign({}, ZG), { position: "absolute" }),
                    ref: function (d) {
                        return (c.kt = d);
                    },
                },
                V(UA, {
                    cS: function (d) {
                        c.Bb = d;
                    },
                })
            )
        );
        a.then(function (d) {
            c.onload(d);
        });
    }
    q(eH, w);
    eH.prototype.onload = function (a) {
        var b = this;
        this.media = a;
        var c = new Image();
        c.onload = function () {
            var d = new Image();
            d.src = c.src;
            d.style.width = "100%";
            d.style.height = "auto";
            b.kt.appendChild(d);
            b.Bb.style.display = "none";
        };
        c.src = a.Zo;
    };
    eH.prototype.Gq = function () {
        this.oi.removeItem(this);
    };
    var aH = 66;
    function fH(a, b, c) {
        $G.call(this, a);
        var d = this;
        this.Ec = b;
        this.Dr = c;
        this.Js = V("input", { type: "file", accept: "image/*", multiple: !0 });
        this.Bb = new gH();
        this.ic = new hH(this.bF);
        this.ic.ic = this;
        a = V(
            "div",
            { style: Object.assign(Object.assign({}, ZG), { cursor: "pointer", backgroundImage: "none", backgroundColor: "#2C2C2C" }) },
            V(
                "div",
                { style: { position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%) scale(1.5)" } },
                V("img", { src: "https://static-assets.highwebmedia.com/tsdefaultassets/mediaDock/uploadBackground.svg" }),
                V("img", { src: "https://static-assets.highwebmedia.com/tsdefaultassets/mediaDock/uploadSymbol.svg", style: { position: "absolute", bottom: 0, right: 0, transform: "translate(50%, 25%) scale(0.66)" } })
            )
        );
        a.onclick = function () {
            d.Js.click();
        };
        this.lg.element.appendChild(a);
        this.Js.onchange = function () {
            iH(d);
        };
        jH(this);
        z(
            Qv.ud.g(function (e) {
                d.Dr.includes(e.Mf) && jH(d);
            }),
            this.listeners
        );
        z(
            kH.g(function (e) {
                d.Dr.includes(Y()) && d.Ec === e.Ec && (d.rK.apply(d, ha(e.files)), d.show());
            }),
            this.listeners
        );
        z(
            lH.g(function (e) {
                d.Dr.includes(Y()) && d.Nr(new mH(e.promise, d, d.Ec === e.Ec));
            }, !1),
            this.listeners
        );
    }
    q(fH, $G);
    k = fH.prototype;
    k.dispose = function () {
        Vb(this.listeners);
        this.ic.dispose();
    };
    function iH(a) {
        Wy(a, function c() {
            var d = this;
            return Aa(c, function (e) {
                null !== d.Js.files && (d.rK.apply(d, ha(d.Js.files)), (d.Js.value = ""));
                e.aa = 0;
            });
        });
    }
    k.rK = function () {
        var a = Ba.apply(0, arguments);
        return Wy(this, function c() {
            var d,
                e,
                f,
                g = this;
            return Aa(c, function (h) {
                1 == h.aa && ((d = l(a)), (e = d.next()));
                if (3 != h.aa) {
                    if (e.done) {
                        h.aa = 0;
                        return;
                    }
                    f = e.value;
                    return sa(h, nH(f, g.Ec), 3);
                }
                e = d.next();
                h.aa = 2;
            });
        });
    };
    k.Nr = function (a, b) {
        var c = this;
        (void 0 === b || !b) && 0 < this.items().length ? Gb(this.lg, a) : this.lg.G(a);
        for (
            a.tE.then(function (d) {
                d = c.ic.Rp(d.sc);
                void 0 !== d && (void 0 !== a.ic ? r("LibraryMediaDockItem sibling exists", "mediaDock.tsx", "pm") : ((a.selected = !0), (a.tu.style.display = "none"), (a.Hu.style.display = "block"), (a.ic = d), (a.ic.ic = a)));
            });
            20 < this.items().length;

        )
            this.lg.removeChild(this.lg.lastChild());
        cH(this);
    };
    k.Rp = function (a) {
        return this.items().find(function (b) {
            var c;
            return (null === (c = b.media) || void 0 === c ? void 0 : c.sc) === a;
        });
    };
    function jH(a) {
        Jb(a.lg);
        a.lg.G(a.Bb);
        cH(a);
        Td(oH);
        pH.then(function (b) {
            Jb(a.lg);
            a.Bb.element.style.display = "none";
            b = l(b);
            for (var c = b.next(); !c.done; c = b.next()) a.Nr(new mH(Promise.resolve(c.value), a), !0);
            cH(a);
        }).catch(function () {
            a.Bb.element.style.display = "none";
            cH(a);
        });
    }
    k.items = function () {
        return $G.prototype.items.call(this);
    };
    k.show = function () {
        $G.prototype.show.call(this);
        var a = this.ic;
        dH(a) || a.show();
    };
    k.B = function () {
        $G.prototype.B.call(this);
        this.ic.B();
    };
    function gH() {
        w.call(this);
        this.element = V("div", { style: Object.assign(Object.assign({}, ZG), { backgroundImage: "" }) }, V("div", { style: Object.assign(Object.assign({}, ZG), { position: "absolute" }) }, V(UA, null)));
    }
    q(gH, w);
    function mH(a, b, c) {
        c = void 0 === c ? !1 : c;
        eH.call(this, a, b);
        var d = this;
        this.qP = c;
        this.gN = this.selected = !1;
        a.catch(function (e) {
            d.Gq();
            if (e instanceof hc) {
                if (400 === e.xhr.status && ((e = JSON.parse(e.xhr.responseText).errors), void 0 !== e && "invalid_media" === e.media)) {
                    R(Ap);
                    return;
                }
                R(zp);
            } else "file_too_large" === e && R(Bp);
        });
        this.Hu = V("img", {
            ref: function (e) {
                return (d.Hu = e);
            },
            src: "https://static-assets.highwebmedia.com/tsdefaultassets/mediaDock/selected.svg",
            style: { position: "absolute", bottom: 0, right: 0, zIndex: 1, display: "none" },
        });
        this.element.appendChild(this.Hu);
        this.tu.style.display = "none";
    }
    q(mH, eH);
    k = mH.prototype;
    k.onload = function (a) {
        var b = this;
        eH.prototype.onload.call(this, a);
        this.tu.style.display = "block";
        this.qP &&
            window.setTimeout(function () {
                b.select();
            }, 0);
        this.element.onclick = function () {
            b.selected ? b.yn() : b.select();
        };
    };
    k.select = function () {
        this.selected ||
            ((this.selected = !0),
            (this.tu.style.display = "none"),
            (this.Hu.style.display = "block"),
            void 0 === this.ic && ((this.ic = new qH(this.tE, this.oi.ic)), (this.ic.ic = this)),
            this.oi.ic.Nr(this.ic),
            this.oi.ic.show(),
            cH(this.oi.ic));
    };
    k.yn = function (a) {
        var b;
        this.selected = !1;
        this.tu.style.display = "block";
        this.Hu.style.display = "none";
        (void 0 !== a && a) || (null === (b = this.ic) || void 0 === b ? void 0 : b.remove(!0));
    };
    k.remove = function () {
        var a = this;
        this.gN
            ? this.Gq()
            : Md(xp, function () {
                  if (void 0 === a.media) r("Attempting to delete media before it is loaded", "mediaDock.tsx", "pm");
                  else {
                      a.Bb.style.display = "block";
                      var b = a.kt.querySelector("img");
                      a.kt.removeChild(b);
                      rH(a.media.sc)
                          .then(function () {})
                          .catch(function () {
                              a.Bb.style.display = "none";
                              a.kt.appendChild(b);
                              R(yp);
                          });
                  }
              });
    };
    k.KL = function () {
        this.element.removeChild(this.kt);
        this.element.onclick = null;
        var a = V("div", { style: { whiteSpace: "break-spaces", fontSize: "11px", width: "100%", height: "100%", padding: "2px" }, colorClass: "rejected" }, Sp);
        this.element.appendChild(a);
        this.gN = !0;
    };
    k.Gq = function () {
        var a = this,
            b;
        eH.prototype.Gq.call(this);
        sH(1, 19).then(function (c) {
            var d;
            0 < c.length && ((c = Promise.resolve(c[0])), (c = new mH(c, a.oi)), a.oi.Nr(c, !0));
            null === (d = a.oi) || void 0 === d ? void 0 : cH(d);
        });
        this.Bb.style.display = "none";
        null === (b = this.oi) || void 0 === b ? void 0 : cH(b);
    };
    function hH(a) {
        $G.call(this, a);
        this.element.style.borderTopLeftRadius = "4px";
        this.element.style.borderTopRightRadius = "4px";
        this.element.style.transform = "translate(-1px, -27px)";
        O(this.element, "SelectedMediaDock");
    }
    q(hH, $G);
    hH.prototype.Nr = function (a) {
        this.lg.G(a);
    };
    hH.prototype.Rp = function (a) {
        return $G.prototype.Rp.call(this, a);
    };
    hH.prototype.ph = function () {
        this.clear();
    };
    hH.prototype.dispose = function () {
        Vb(this.listeners);
    };
    function qH(a, b) {
        eH.call(this, a, b);
    }
    q(qH, eH);
    qH.prototype.remove = function (a) {
        a = void 0 === a ? !1 : a;
        var b;
        this.Gq();
        cH(this.oi);
        var c = this.oi;
        dH(c) && c.B();
        a || (null === (b = this.ic) || void 0 === b ? void 0 : b.yn(!0));
    };
    qH.prototype.KL = function () {
        this.remove();
    };
    function tH(a, b) {
        if (uH) {
            var c = V(
                "div",
                { style: { position: "absolute", top: "0", left: "0", boxSizing: "border-box", height: "100%", width: "100%", background: "rgba(0,0,0,0.5)", padding: "10px", display: "none", zIndex: 1e3 } },
                V("div", { style: { border: "3px dashed white", padding: "10px", height: "calc(100% - 26px)" } })
            );
            a.appendChild(c);
            Ab(["dragenter", "dragover", "dragleave", "drop"], a, function (d) {
                d.preventDefault();
                d.stopPropagation();
            });
            Ab(["dragenter", "dragover"], a, function () {
                c.style.display = "block";
            });
            Ab(["dragleave", "drop"], c, function () {
                c.style.display = "none";
            });
            v("drop", c, function (d) {
                var e, f;
                d = Array.from(null !== (f = null === (e = d.dataTransfer) || void 0 === e ? void 0 : e.files) && void 0 !== f ? f : []);
                kH.h({ Ec: b, files: d });
            });
        }
    }
    var kH = new y("pmMediaDrop", {
            rc: function () {
                return Ob;
            },
        }),
        lH = new y("pmMediaUpload", {
            rc: function () {
                return Ob;
            },
        }),
        UG = new y("pmMediaDeleted", {
            rc: function () {
                return 2 + 2 * Ob;
            },
        }),
        VG = new y("pmMediaRejected", {
            rc: function () {
                return 2 + 2 * Ob;
            },
        }),
        uH = !1;
    function nH(a, b) {
        if (52428800 < a.size) a = Promise.reject("file_too_large");
        else {
            var c = new FormData();
            c.append("media", a);
            a = E("api/ts/chatmessages/media/upload/", c).then(function (d) {
                d = JSON.parse(d.responseText).payload;
                return { sc: d.media_id, url: d.media_url, Zo: d.media_thumbnail_url, Yt: !1, VC: d.user_uid };
            });
        }
        lH.h({ Ec: b, promise: a });
        return a;
    }
    function sH(a, b) {
        return C("api/ts/chatmessages/media/?media_type=I&limit=" + (void 0 === a ? 20 : a) + "&offset=" + (void 0 === b ? 0 : b)).then(function (c) {
            var d = [];
            c = JSON.parse(c.responseText).media;
            c = l(c);
            for (var e = c.next(); !e.done; e = c.next()) (e = e.value), d.push({ sc: e.media_id, url: e.media_url, Zo: e.media_thumbnail_url, Yt: !1, VC: e.user_uid });
            d.sort(function (f, g) {
                return Number(g.sc) - Number(f.sc);
            });
            return d;
        });
    }
    var pH,
        oH = new Sd(
            function () {
                pH = sH();
            },
            { zc: 10, Qc: 0 }
        );
    function rH(a) {
        return E("api/ts/chatmessages/media/delete/", { media_id: a.toString() })
            .then(function (b) {
                return 200 === b.status ? (UG.h(a), Promise.resolve()) : Promise.reject();
            })
            .catch(function () {
                return Promise.reject();
            });
    }
    function YG(a, b, c) {
        var d = new FormData();
        d.append("from_user_uid", a);
        d.append("message_id", b);
        d.append("media_id", c.toString());
        E("api/ts/chatmessages/media/opened/", d)
            .then(function (e) {
                return 204 === e.status;
            })
            .catch(function () {
                return !1;
            });
    }
    function vH() {
        var a = this;
        this.KN = -1;
        this.nu = new Set();
        this.HT = new Sd(
            function () {
                wH(a);
            },
            { zc: 10, Qc: 1 }
        );
        xH(this);
    }
    function xH(a) {
        -1 === a.KN &&
            ((a.KN = window.setInterval(function () {
                return wH(a);
            }, 6e4)),
            v(kb() ? "pagehide" : "beforeunload", window, function () {
                var b = a.Pl();
                void 0 === b || navigator.sendBeacon(ec(yH), b) || (r("beacon error marking PMs as read", "pmsReadSender.ts", "api"), zH(a));
            }));
    }
    function AH(a, b, c) {
        c = void 0 === c ? !1 : c;
        a.nu.add(b);
        c && Td(a.HT);
    }
    vH.prototype.Pl = function () {
        if (0 !== this.nu.size) {
            this.OM = new Set(this.nu);
            this.nu.clear();
            var a = new FormData();
            this.OM.forEach(function (b) {
                a.append("from_usernames", b);
            });
            a.append("csrfmiddlewaretoken", ac("csrftoken"));
            return a;
        }
    };
    function zH(a) {
        var b;
        null === (b = a.OM) || void 0 === b
            ? void 0
            : b.forEach(function (c) {
                  return a.nu.add(c);
              });
    }
    function wH(a) {
        var b = a.Pl();
        void 0 !== b &&
            E(yH, b).catch(function (c) {
                r("post error marking PMs as read: " + c, "pmsReadSender.ts", "api");
                zH(a);
            });
    }
    var yH = "api/ts/chatmessages/update_pms_last_seen/";
    function BH() {
        vH.call(this);
        var a = this;
        G.g(function (b) {
            a.j = b.l.j();
        });
        Kc.g(function () {
            wH(a);
        });
    }
    q(BH, vH);
    BH.prototype.Pl = function () {
        var a = vH.prototype.Pl.call(this);
        if (void 0 !== a && void 0 !== this.j) return a.append("room", this.j), a;
    };
    function CH() {
        vH.apply(this, arguments);
    }
    q(CH, vH);
    var DH, EH;
    function FH(a, b, c) {
        c = void 0 === c ? !1 : c;
        (void 0 === b ? 0 : b) ? (void 0 === EH && (EH = new CH()), AH(EH, a, c)) : (void 0 === DH && (DH = new BH()), AH(DH, a, c));
    }
    function GH() {
        this.fr = new Set();
        this.Wp = new Set();
    }
    k = GH.prototype;
    k.show = function (a) {
        this.fr.add(a);
        this.Wp.delete(a);
    };
    k.B = function (a) {
        this.Wp.add(a);
        this.fr.delete(a);
    };
    k.remove = function (a) {
        this.fr.delete(a);
        this.Wp.delete(a);
    };
    k.vb = function (a) {
        return this.fr.has(a);
    };
    k.clear = function () {
        this.fr.clear();
        this.Wp.clear();
    };
    var HH = new GH();
    function IH() {
        var a = this;
        this.j = "";
        this.xj = [];
        this.Dj = [];
        this.H = new Ub();
        this.vN = new Ub();
        JH(this);
        BE.g(function (b) {
            a.oq(b, !1, !0);
        });
        CE.g(function (b) {
            DE.h(b);
        });
        z(
            DE.g(function (b) {
                a.oq(b, !1, !1);
            }),
            this.H
        );
        z(
            EE.g(function (b) {
                a.oq(b.username, !0, b.XQ);
            }),
            this.H
        );
        z(
            AE.g(function (b) {
                KH(a, b, !0).catch(ct);
            }),
            this.H
        );
        z(
            zE.g(function (b) {
                KH(a, b, !1).catch(ct);
            }),
            this.H
        );
        z(
            G.g(function (b) {
                a.j = b.A.j;
                a.xj = [];
                for (var c = l(a.Dj), d = c.next(); !d.done; d = c.next()) (d = d.value), (d.ra.Pa = d.ra.username === a.j), (d.ra.vt = d.ra.username === a.j);
                void 0 !== LH && MH.h(b);
                fz.g(function (e) {
                    a.Be = e;
                });
                z(
                    new lF(b.A.lb).ea.g(function (e) {
                        var f,
                            g = !1,
                            h = a.xj.find(function (m) {
                                return m.ra.username === e.K.username;
                            });
                        void 0 !== h && (g = h.ra.zd = !0);
                        (null === (f = A.current.V) || void 0 === f ? void 0 : f.username) === a.j &&
                            ((f = a.Dj.find(function (m) {
                                return m.ra.username === e.K.username;
                            })),
                            void 0 !== f && (g = f.ra.zd = !0));
                        g && MH.h(void 0);
                    }),
                    a.vN
                );
            }),
            this.H
        );
        Kc.g(function () {
            Vb(a.vN);
        });
        z(
            $y.g(function (b) {
                if (b.focus) {
                    for (var c = !1, d = l(a.xj), e = d.next(); !e.done; e = d.next())
                        if (((e = e.value), e.ik === b.username || e.ra.username === b.username)) {
                            c = !0;
                            e.LF = !0;
                            break;
                        }
                    c
                        ? MH.h(void 0)
                        : zD(b.username, a.j)
                              .then(function (f) {
                                  NH(a, { message: "", T: 0, time: Date.now(), ik: a.j, ra: f.M, LF: !0, bi: !1, j: a.j });
                              })
                              .catch(function () {});
                }
            }),
            this.H
        );
        z(
            OH.g(function (b) {
                void 0 !== PH(a, b, !0)
                    ? MH.h(void 0)
                    : zD(b)
                          .then(function (c) {
                              NH(a, { message: "", T: 0, time: Date.now(), ik: b, ra: c.M, LF: !0, bi: !1, j: "" });
                          })
                          .catch(function () {});
            }),
            this.H
        );
        z(
            ez.g(function (b) {
                var c,
                    d = !1,
                    e = a.xj.find(function (f) {
                        return f.ra.username === b.username;
                    });
                void 0 !== e && ((e.ra.ec = b.ec), (d = !0));
                (null === (c = A.current.V) || void 0 === c ? void 0 : c.username) === a.j &&
                    ((c = a.Dj.find(function (f) {
                        return f.ra.username === b.username;
                    })),
                    void 0 !== c && ((c.ra.ec = b.ec), (d = !0)));
                d && MH.h(void 0);
            }),
            this.H
        );
        QH(this);
    }
    var LH;
    function RH() {
        void 0 === LH && (LH = new IH());
        return LH;
    }
    IH.prototype.dispose = function () {
        Vb(this.H);
    };
    function QH(a) {
        if (A.current.Ro && !Uu()) {
            var b = Ac({ offset: "0" });
            C("api/ts/chatmessages/pm_users/?" + b)
                .then(function (c) {
                    JSON.parse(c.responseText)
                        .reverse()
                        .forEach(function (d) {
                            d = new H(d);
                            d = { message: L(d, "m"), T: N(d, "num_unread"), time: 1e3 * N(d, "created_at"), ik: L(d, "from_user"), ra: bs(new H(Vc(d, "other_user"))), bi: M(d, "has_media") };
                            d.ra.username === a.j && (d.ra.vt = !0);
                            NH(a, Object.assign(Object.assign({}, d), { j: "" }));
                        });
                })
                .catch(function (c) {
                    r("Error fetching pm conversations: " + c, "pmListData.ts", "pm");
                });
        }
    }
    function KH(a, b, c) {
        return Wy(a, function e() {
            var f = this,
                g,
                h,
                m,
                n;
            return Aa(e, function (p) {
                if (1 == p.aa) {
                    !0 === b.VD && ((b.message = f.Be.message), (b.K.username = f.Be.K), (b.bb = f.Be.Ec), void 0 !== f.Be.media && (b.Qa = f.Be.media));
                    a: {
                        var u = b.bb;
                        for (var x = c ? f.Dj : f.xj, D = x.length - 1; 0 <= D; --D) {
                            var J = x[D];
                            if (J.ra.username === u) {
                                x.splice(D, 1);
                                u = J;
                                break a;
                            }
                        }
                        u = void 0;
                    }
                    g = u;
                    if (void 0 !== g) {
                        h = g.ra;
                        m = g.T + 1;
                        p.aa = 2;
                        return;
                    }
                    return sa(p, zD(b.bb, c ? void 0 : f.j), 3);
                }
                2 != p.aa && ((n = p.td), (h = n.M), (m = c ? n.T : 1));
                b.K.username !== b.bb && (m = 0);
                NH(f, { message: b.message, time: Date.now(), T: m, ik: b.K.username, ra: h, LF: !0, bi: 0 < b.Qa.length, j: c ? "" : f.j });
                p.aa = 0;
            });
        });
    }
    function NH(a, b) {
        "" === b.j ? a.Dj.unshift(b) : b.j === a.j && a.xj.unshift(b);
        SH.h(b);
        TH.h();
    }
    function PH(a, b, c) {
        return ((void 0 === c ? 0 : c) ? a.Dj : a.xj).find(function (d) {
            return d.ra.username === b;
        });
    }
    IH.prototype.oq = function (a, b, c) {
        if (b) {
            var d = this.Dj.find(function (e) {
                return e.ra.username === a;
            });
            void 0 !== d && (d.T = 0);
        } else
            (d = this.xj.find(function (e) {
                return e.ra.username === a;
            })),
                void 0 !== d && (d.T = 0);
        FH(a, b, c);
        UH.h({ username: a, eO: b });
        TH.h();
    };
    function JH(a) {
        var b,
            c = null === (b = A.current.V) || void 0 === b ? void 0 : b.yc;
        void 0 !== c &&
            (z(
                new Qt(c).ea.g(function (d) {
                    ut("pm_enabled") && eG(d, a.j, d.j);
                }),
                a.H
            ),
            z(
                new cu(c).ea.g(function (d) {
                    RG(d.Ek, d.sc);
                }),
                a.H
            ),
            z(
                new du(c).ea.g(function (d) {
                    d.AR ? VG.h(d.sc) : UG.h(d.sc);
                }),
                a.H
            ));
    }
    var MH = new y("pmListDataChanged"),
        SH = new y("pmListDatItemAdded"),
        TH = new y("pmListDataNumUnread"),
        UH = new y("pmListDataPmRead");
    var VH = new Set();
    function ZF(a, b) {
        b || CE.h(a);
        HH.B(a);
        VH.forEach(function (c) {
            c.Ha === b && WH(c, a);
        });
        b && XH.h(a);
    }
    function WF(a) {
        var b = {
            width: a.size,
            height: a.size,
            borderRadius: "50%",
            background: a.color,
            textAlign: "center",
            display: "table-cell",
            fontFamily: "UbuntuLight, Tahoma, Arial, Helvetica, sans-serif",
            fontSize: "16px",
            lineHeight: "14px",
            margin: "auto",
            verticalAlign: "middle",
        };
        return V("div", { colorClass: "avatarBubble", style: Object.assign({ position: "relative" }, a.style) }, V("div", { colorClass: a.sv, style: b }, a.name.charAt(0).toLocaleUpperCase()));
    }
    function YH(a) {
        w.call(this, "div", a);
        var b = this;
        this.ta = -1;
        this.T = 0;
        VH.add(this);
        z(
            G.g(function (c) {
                b.j = c.A.j;
                HH.clear();
                ZH(b);
            }),
            this.H
        );
        z(
            MH.g(function (c) {
                void 0 !== c && (b.j = c.A.j);
                b.Nj();
            }),
            this.H
        );
        UH.g(function (c) {
            var d = c.username;
            c.eO === b.Ha &&
                ((c = b.wb.find(function (e) {
                    return e.bb === d;
                })),
                void 0 !== c && c.Bz(0));
        });
        TH.g(function () {
            b.Oj(b.oc());
        });
        SH.g(function (c) {
            if (!((b.Ha && "" !== c.j) || (!b.Ha && "" === c.j))) {
                HH.show(c.ik);
                var d = !b.Ha && 1 === b.wb.length;
                if (0 === b.wb.length || d) b.Nj();
                else {
                    d = c.ra.username;
                    for (var e = b.wb.length - 1; 0 <= e; --e) {
                        var f = b.wb[e];
                        f.bb === d && (b.wb.splice(e, 1), f.element.remove());
                    }
                    $H(b, c, !0);
                    b.Oj(b.oc());
                }
            }
        });
        $y.g(function (c) {
            HH.show(c.username);
        });
        z(
            a.te.g(function () {
                b.ta = -1;
                aI(b, "");
            }),
            this.H
        );
        this.tG();
    }
    q(YH, w);
    k = YH.prototype;
    k.tG = function () {
        function a() {
            for (var c = l(b.wb), d = c.next(); !d.done; d = c.next()) {
                d = d.value;
                var e = void 0 === d.time || d.rt() ? "" : EB(new Date(d.time));
                d.Jl.innerText = e;
                VF(d);
            }
            window.setTimeout(a, 1e4);
        }
        var b = this;
        window.setTimeout(a, 1e4);
    };
    function bI(a, b) {
        return (
            -1 <
            a.wb.findIndex(function (c) {
                return c.ri.ra.username === b;
            })
        );
    }
    k.initData = function (a) {
        this.Ha = !0 === a.Ha;
        this.bm = a.bm;
        this.rk = !0 === a.rk;
        this.H = new Ub();
        this.wb = [];
        Uu() || (this.Te = RH());
        this.te = a.te;
        this.j = "";
        this.Oj = a.Oj;
    };
    k.ia = function () {
        var a = Object.assign(
                {
                    fontSize: "12px",
                    fontFamily: "UbuntuRegular, Tahoma, Arial, Helvetica, sans-serif",
                    height: "100%",
                    lineHeight: "16px",
                    overflowX: "hidden",
                    overflowY: "hidden",
                    position: "relative",
                    textAlign: "left",
                    width: "100%",
                    zIndex: 2,
                },
                this.Ha && { flex: 1, display: "flex", flexDirection: "column" }
            ),
            b = Object.assign({ maxHeight: "calc(100% - 32px)", overflowY: "auto", width: "100%" }, this.Ha && { flex: 1 }),
            c = this.Ha ? V(cI, null) : void 0;
        this.sf = V("div", { style: b, colorClass: "pmBodyRoot" }, 0 < this.wb.length ? this.wb : c);
        this.element = V("div", { style: a, colorClass: "pmListWrapper" }, this.sf);
        dI(this);
        eI(this);
    };
    k.render = function () {
        return this.element;
    };
    k.R = function () {
        w.prototype.R.call(this);
        for (var a = l(this.wb), b = a.next(); !b.done; b = a.next()) b.value.R();
    };
    k.Gd = function () {
        w.prototype.Gd.call(this);
        for (var a = l(this.wb), b = a.next(); !b.done; b = a.next()) b.value.Gd();
    };
    function dI(a) {
        a.ye = new yE({ bm: a.bm, te: a.te, j: a.j });
        z(
            a.ye.hj.uq.g(function (c) {
                a.uq(c.event);
            }),
            a.H
        );
        z(
            a.ye.hj.Py.g(function () {
                a.Py();
            }),
            a.H
        );
        z(
            a.ye.hj.mt.g(function (c) {
                c.OD === a.bm && ((a.ta = -1), c.Sf ? aI(a, c.prefix) : fI(a));
            }),
            a.H
        );
        var b = V("div", null, a.ye.element);
        a.element.insertBefore(b, a.element.firstChild);
    }
    k.Nj = function () {
        Wy(this, function b() {
            var c = this,
                d,
                e,
                f,
                g;
            return Aa(b, function (h) {
                if (1 == h.aa) {
                    d = c;
                    if (Uu()) return h.return();
                    fI(c);
                    void 0 === c.ye && dI(c);
                    return sa(h, ZH(c), 2);
                }
                e = h.td;
                void 0 !== c.Te &&
                    ((f = c.Ha ? c.Te.Dj : c.Te.xj),
                    (g = f.filter(function (m) {
                        return gI(d, m);
                    })),
                    hI(c, g, e));
                h.aa = 0;
            });
        });
    };
    k.dispose = function () {
        Vb(this.H);
        void 0 !== this.ye && this.ye.dispose();
    };
    function fI(a) {
        for (; null !== a.sf.firstChild; ) a.sf.removeChild(a.sf.firstChild);
        a.wb.forEach(function (b) {
            return b.dispose();
        });
        a.wb = [];
        a.Oj(a.oc());
    }
    function iI(a, b) {
        var c,
            d = (null === (c = A.current.V) || void 0 === c ? void 0 : c.username) === a.j;
        if ("" === a.j || d) return !1;
        b = void 0 === b ? !0 : a.j.startsWith(b);
        return !a.Ha && b && !a.rk && (Uu() || !d);
    }
    function ZH(a) {
        return Wy(a, function c() {
            var d = this,
                e,
                f,
                g,
                h;
            return Aa(c, function (m) {
                switch (m.aa) {
                    case 1:
                        e = iI(d);
                        if (!e) {
                            m.aa = 2;
                            break;
                        }
                        if (Uu()) {
                            fI(d);
                            f = qD(d.j);
                            $H(d, f);
                            m.aa = 2;
                            break;
                        }
                        if (void 0 === d.Te) {
                            m.aa = 2;
                            break;
                        }
                        g = PH(d.Te, d.j);
                        if (void 0 !== g) {
                            m.aa = 5;
                            break;
                        }
                        return sa(m, zD(d.j, d.j), 6);
                    case 6:
                        return (h = m.td), void 0 === PH(d.Te, d.j) && (fI(d), $H(d, { message: "", T: h.T, ik: h.M.username, ra: h.M, bi: !1 })), m.return(e);
                    case 5:
                        fI(d), $H(d, g);
                    case 2:
                        return m.return(e);
                }
            });
        });
    }
    function eI(a) {
        a.Ha && "" === a.EN && 0 === a.wb.length && a.sf.appendChild(V(cI, null));
    }
    function hI(a, b, c) {
        a.T = 0;
        b.forEach(function (d) {
            var e = d.ra.username,
                f = HH;
            if (f.fr.has(e) || f.Wp.has(e) ? HH.vb(d.ra.username) : !c || a.j !== d.ra.username) 0 < d.T && (a.T += 1), jI(a, d), a.Ha || mD.h(d.ra.username);
        });
        eI(a);
        a.Oj(a.T);
    }
    function jI(a, b, c) {
        c = void 0 === c ? !1 : c;
        var d;
        if (!bI(a, b.ra.username)) {
            var e = V(SF, {
                ri: b,
                te: a.te,
                Ha: a.Ha,
                classRef: function (h) {
                    var m = b.ra.username === a.j;
                    a.Ha || m || YF(h);
                    c ? (a.Ha || m ? a.wb.unshift(h) : a.wb.splice(1, 0, h)) : a.wb.push(h);
                },
            });
            if (c) {
                var f = a.sf.firstChild,
                    g = (null === (d = A.current.V) || void 0 === d ? void 0 : d.username) === a.j;
                d = b.ra.username === a.j;
                a.Ha || d || g || null === f ? a.sf.insertBefore(e, f) : a.sf.insertBefore(e, f.nextSibling);
            } else a.sf.appendChild(e);
            a.R();
            F("PmListItemAdded", { rendered_pm_count: a.wb.length, other_user: b.ra.username });
        }
    }
    k.oc = function () {
        for (var a = 0, b = l(this.wb), c = b.next(); !c.done; c = b.next()) (c = c.value), 0 !== c.oc() && "" !== c.ri.message && (a += 1);
        return (this.T = a);
    };
    function WH(a, b) {
        var c = a.wb.find(function (e) {
                return e.bb === b;
            }),
            d = !a.Ha && (null === c || void 0 === c ? void 0 : c.bb) === a.j;
        void 0 === c || d || (a.wb.splice(a.wb.indexOf(c), 1), c.B(), a.Oj(a.oc()), F("PmListItemRemoved", { rendered_pm_count: a.wb.length, other_user: b }), a.Ha && 0 === a.wb.length && a.sf.appendChild(V(cI, null)));
        eI(a);
        a.Oj(a.oc());
    }
    function aI(a, b) {
        Wy(a, function d() {
            var e = this,
                f,
                g,
                h,
                m,
                n,
                p;
            return Aa(d, function (u) {
                f = e;
                g = !1;
                void 0 !== e.Te &&
                    (fI(e),
                    (h = e.Ha ? e.Te.Dj : e.Te.xj),
                    iI(e, b) && ((n = PH(e.Te, e.j)), (m = void 0 !== n ? n : qD(e.j)), jI(e, m), (g = !0)),
                    (p = h.filter(function (x) {
                        return gI(f, x, b);
                    })),
                    hI(e, p, g));
                u.aa = 0;
            });
        });
    }
    function gI(a, b, c) {
        c = void 0 === c ? a.EN : c;
        return 0 === c.length || b.ra.username.startsWith(c);
    }
    function $H(a, b, c) {
        gI(a, b) && jI(a, b, void 0 === c ? !1 : c);
    }
    k.uq = function (a) {
        var b,
            c,
            d = this.ta;
        -1 < d && ((d = this.wb[d]), P(d.element, "selected"), 0 < d.oc() ? O(d.element, "unreadBg") : P(d.element, "unreadBg"));
        if ("ArrowDown" === a.key || 40 === a.keyCode) this.ta = this.ta + 1 >= this.wb.length ? -1 : this.ta + 1;
        else if ("ArrowUp" === a.key || 38 === a.keyCode) this.ta = -1 > this.ta - 1 ? this.wb.length - 1 : this.ta - 1;
        -1 < this.ta ? ((a = this.wb[this.ta].bb), this.Vl(this.ta, !0), null === (b = this.ye) || void 0 === b ? void 0 : b.hj.aA.h({ jc: a })) : null === (c = this.ye) || void 0 === c ? void 0 : c.hj.aA.h({ jc: "" });
    };
    k.Py = function () {
        var a;
        if (-1 < this.ta) {
            var b = this.wb[this.ta];
            F("PMSearchResultClicked", { location: "" === this.j ? "PMWindow" : "PMTab", color: b.sv });
            null === (a = this.ye) || void 0 === a ? void 0 : a.hj.aA.h({ jc: "" });
            this.te.h(b.bb);
        }
    };
    k.Vl = function (a, b) {
        -1 < a && ((a = this.wb[a]), b && (this.sf.scrollTop = this.ta * a.element.clientHeight - this.sf.clientHeight / 2), P(a.element, "unreadBg"), O(a.element, "selected"));
    };
    da.Object.defineProperties(YH.prototype, {
        EN: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                var a, b;
                return null !== (b = null === (a = this.ye) || void 0 === a ? void 0 : a.value.trim()) && void 0 !== b ? b : "";
            },
        },
    });
    function cI() {
        return V(
            "div",
            { style: { width: "100%", height: "100%", display: "flex", alignItems: "center", justifyContent: "center", flexDirection: "column", textAlign: "center", lineHeight: "20px", padding: "50px", boxSizing: "border-box" } },
            V("img", { src: "https://static-assets.highwebmedia.com/tsdefaultassets/pms/empty-chat-state.svg", style: { margin: "13px", width: "30px" }, alt: "empty-chat-state" }),
            V("span", { style: { fontFamily: "UbuntuBold, Arial, Helvetica, sans-serif", fontSize: "14px" }, colorClass: "sendPMPrompt" }, Vo),
            V("span", { colorClass: "cautionMessage" }, we())
        );
    }
    function kI(a) {
        ww.call(this, a.Dd, !0, a);
        var b = this;
        OH.g(function () {
            return b.ha();
        });
    }
    q(kI, ww);
    kI.prototype.ia = function () {
        var a = this,
            b = Uu(),
            c = Object.assign(
                {
                    fontFamily: "UbuntuRegular, Tahoma, Arial, Helvetica, sans-serif",
                    fontSize: "14px",
                    borderWidth: "1px",
                    borderStyle: "solid",
                    borderRadius: "4px 0 4px 4px",
                    boxShadow: "0px 0px 16px rgba(0, 0, 0, 0.32)",
                    height: b ? "" : "383px",
                    maxHeight: "383px",
                    padding: "1px",
                    position: "absolute",
                    right: "0",
                    width: "304px",
                    display: "none",
                    flexDirection: "column",
                },
                oE() && { top: "40px" }
            );
        this.hm = V("span", null);
        var d = new YH({
            Ha: !0,
            bm: !1,
            te: OH,
            Oj: function (e) {
                var f = 0 < e;
                a.hm.innerText = f ? "(" + e + ")" : "";
                f ? a.Dd.classList.add("has_unread") : a.Dd.classList.remove("has_unread");
            },
        });
        this.element = V(
            "div",
            { style: c, colorClass: "pmListDropdownRoot" },
            V("div", { style: { padding: "10px 8px", borderBottomWidth: "1px", borderBottomStyle: "solid" }, colorClass: "header" }, ip, " ", this.hm),
            b ? V(lI, null) : d.element
        );
    };
    kI.prototype.Ja = function () {
        O(this.Dd, "active");
        return ww.prototype.Ja.call(this, "flex");
    };
    kI.prototype.ha = function (a) {
        P(this.Dd, "active");
        return ww.prototype.ha.call(this, a);
    };
    function lI() {
        var a = { cursor: "pointer", fontSize: "12px" };
        return V(
            "div",
            { style: { fontSize: "12px", marginTop: "0", padding: "44px 0 16px", position: "static", textAlign: "center", top: "50%", width: "100%" } },
            V("img", { src: "https://static-assets.highwebmedia.com/tsdefaultassets/pms/empty-chat-state.svg", alt: "empty-chat-state" }),
            V("div", { style: { fontSize: "14px", lineHeight: "18px", margin: "8px 0" }, colorClass: "sendPMPrompt" }, Vo),
            V(
                "div",
                { style: { margin: "16px 0 44px" } },
                V(
                    "a",
                    {
                        style: a,
                        colorClass: "link",
                        onClick: function () {
                            Su({ pg: !0 });
                        },
                    },
                    Gf
                )
            ),
            V(
                "div",
                { colorClass: "signupPrompt" },
                hn,
                " ",
                V(
                    "a",
                    {
                        href: "/accounts/register",
                        style: a,
                        colorClass: "link",
                        onClick: function () {
                            F("PMSignupClicked");
                        },
                    },
                    Of
                )
            )
        );
    }
    function mI(a) {
        w.call(this, "div", a);
    }
    q(mI, w);
    k = mI.prototype;
    k.initData = function (a) {
        this.te = a.te;
        this.j = "";
        this.hO = !1;
        this.mM = a.mM;
        this.Ha = a.Ha;
        Uu() || (this.Te = RH());
    };
    k.ia = function () {
        var a = this;
        Q(this.element, { position: "relative", overflowX: "hidden", overflowY: "scroll" });
        Hu(this.element);
        this.Ha
            ? ((this.Pw = V(nI, null)), this.element.appendChild(this.Pw))
            : $y.g(function (b) {
                  var c,
                      d = null === (c = a.Te) || void 0 === c ? void 0 : PH(c, b.username);
                  void 0 !== d && a.Nj(d);
              });
        G.g(function (b) {
            var c;
            a.j = b.l.j();
            a.Ha ? oI(a) : (Jb(a), (null === (c = A.current.V) || void 0 === c ? void 0 : c.username) !== a.j && pI(a));
        });
        MH.g(function () {
            Uu() || void 0 !== a.Te || (a.Te = RH());
        });
        SH.g(function (b) {
            (a.Ha && "" !== b.j) || (!a.Ha && "" === b.j) || a.Nj(b);
        });
        UH.g(function (b) {
            var c = b.username;
            b.eO === a.Ha && ((b = qI(a, c)), void 0 !== b && (b.II.style.backgroundColor = "#FFF"));
        });
        this.tG();
    };
    k.Nj = function (a) {
        var b = this;
        var c = void 0 === c ? !0 : c;
        void 0 !== this.Pw && this.element.contains(this.Pw) && this.element.removeChild(this.Pw);
        var d = qI(this, a.ra.username);
        void 0 !== d
            ? (rI(d, a), HH.Wp.has(a.ra.username) && this.G(d))
            : ((d = new sI({
                  Tc: a,
                  onClick: function () {
                      b.te.h(a.ra.username);
                  },
                  kM: function () {
                      b.removeItem(a.ra.username);
                  },
                  Ha: this.Ha,
              })),
              this.G(d),
              F("PmListItemAdded", { rendered_pm_count: tI(this).length, other_user: a.ra.username }));
        HH.remove(a.ra.username);
        c && uI(this, d);
    };
    function oI(a) {
        var b;
        a.Ha &&
            (null === (b = a.Te) || void 0 === b
                ? void 0
                : b.Dj.forEach(function (c) {
                      var d = qI(a, c.ra.username);
                      void 0 !== d && d.jB.firstChild instanceof HTMLElement && ((c = OA(c.ra)), (d.jB.firstChild.style.backgroundColor = c), (d.$U.style.color = c));
                  }));
    }
    function uI(a, b) {
        a.Ha
            ? null !== a.element.firstChild
                ? a.element.insertBefore(b.element, a.element.firstChild)
                : a.element.appendChild(b.element)
            : null !== a.element.firstChild && null !== a.element.firstChild.nextSibling
            ? a.element.insertBefore(b.element, a.element.firstChild.nextSibling)
            : a.element.appendChild(b.element);
    }
    function qI(a, b) {
        return tI(a).find(function (c) {
            return c.Tc.ra.username === b;
        });
    }
    function pI(a) {
        var b,
            c,
            d = null !== (c = null === (b = a.Te) || void 0 === b ? void 0 : PH(b, a.j)) && void 0 !== c ? c : qD(a.j);
        b = qI(a, a.j);
        void 0 === b &&
            (b = new sI({
                Tc: d,
                onClick: function () {
                    a.te.h(a.j);
                },
                kM: function () {
                    a.removeItem(d.ra.username);
                },
                Ha: a.Ha,
            }));
        0 < tI(a).length ? Hb(a, b, tI(a)[0]) : a.G(b);
    }
    function tI(a) {
        return w.prototype.children.call(a);
    }
    k.oc = function () {
        return tI(this).filter(function (a) {
            return 0 < a.Tc.T;
        }).length;
    };
    k.removeItem = function (a) {
        var b = qI(this, a);
        void 0 !== b && this.element.contains(b.element) && (this.removeChild(b), HH.B(a), F("PmListItemRemoved", { rendered_pm_count: tI(this).length, other_user: a }));
    };
    k.tG = function () {
        var a = this;
        this.hO ||
            ((this.hO = !0),
            window.setInterval(function () {
                for (var b = l(tI(a)), c = b.next(); !c.done; c = b.next()) vI(c.value);
            }, 1e4));
    };
    function sI(a) {
        w.call(this, "div", a);
    }
    q(sI, w);
    sI.prototype.initData = function (a) {
        this.Tc = a.Tc;
    };
    sI.prototype.ia = function (a) {
        var b = this,
            c = { color: OA(a.Tc.ra), display: "block", fontWeight: "bold", marginBottom: "5px", overflow: "hidden", whiteSpace: "nowrap", textOverflow: "ellipsis", flex: 1, width: 0, marginRight: "10px" },
            d = { width: "18px", height: "18px", marginLeft: "20px" };
        this.jN = V(wI, null);
        this.rb = V("img", { src: "https://static-assets.highwebmedia.com/mobileassets/close.svg", style: { width: "18px", height: "18px", display: "inline-block" }, onClick: a.kM });
        this.jB = V(xI, { name: a.Tc.ra.username, color: OA(a.Tc.ra) });
        this.element = V(
            "div",
            {
                style: {
                    width: "100%",
                    height: "90px",
                    boxSizing: "border-box",
                    borderBottom: "1px solid #EFEFEF",
                    padding: "20px",
                    fontSize: "12px",
                    display: "flex",
                    alignItems: "center",
                    fontFamily: "Tahoma, Arial, Helvetica, sans-serif",
                },
                ref: function (e) {
                    return (b.II = e);
                },
            },
            V(
                "div",
                { style: { display: "flex", flex: 1, alignItems: "center" }, onClick: a.onClick },
                this.jB,
                V(
                    "div",
                    { style: { display: "flex", flexDirection: "column", justifyContent: "center", width: "100%", height: "100%" } },
                    V(
                        "div",
                        { style: { display: "flex", justifyContent: "space-between", width: "100%" } },
                        V(
                            "span",
                            {
                                style: c,
                                ref: function (e) {
                                    b.$U = e;
                                },
                            },
                            a.Tc.ra.username
                        ),
                        V("span", {
                            style: { color: "#6C6C78" },
                            ref: function (e) {
                                b.GU = e;
                            },
                        })
                    ),
                    V(
                        "span",
                        { style: { display: "flex" } },
                        this.jN,
                        V("span", {
                            style: { overflow: "hidden", whiteSpace: "nowrap", textOverflow: "ellipsis", flex: "1", width: "0px" },
                            ref: function (e) {
                                b.Kt = e;
                            },
                        })
                    )
                )
            ),
            !a.Ha && V("div", { style: d }, !a.Tc.ra.Pa && this.rb)
        );
        rI(this, a.Tc);
    };
    function rI(a, b) {
        a.Tc = b;
        a.jN.style.display = a.Tc.ra.username === a.Tc.ik || a.rt() ? "none" : "block";
        null !== a.Kt.firstChild && a.Kt.removeChild(a.Kt.firstChild);
        if ("" !== a.Tc.message) {
            b = a.Kt;
            var c = b.appendChild,
                d = new GE(a.Tc.message),
                e = V("span", null),
                f = d.wf()[0];
            e.innerText = f.split("\n")[0];
            for (f = 1; f < d.wf().length; f += 1) {
                var g = V("span", null);
                g.innerText = ":" + d.As()[f - 1].name;
                e.appendChild(g);
                "" !== d.wf()[f] && ((g = V("span", null)), (g.innerText = d.wf()[f]), e.appendChild(g));
            }
            c.call(b, e);
        } else a.Tc.bi && a.Kt.appendChild(V("span", null, Tp));
        vI(a);
        a.II.style.backgroundColor = 0 < a.Tc.T ? "#FCEADC" : "#FFF";
    }
    function vI(a) {
        if (!a.rt()) {
            var b = a.Tc.time;
            b = void 0 === b ? "" : EB(new Date(b));
            a.GU.innerText = "" + b;
        }
    }
    sI.prototype.rt = function () {
        return "" === this.Tc.message && !this.Tc.bi;
    };
    function wI() {
        return V("img", { src: "https://static-assets.highwebmedia.com/mobileassets/reply-icon.svg" });
    }
    function xI(a) {
        var b = {
            width: "45px",
            height: "45px",
            borderRadius: "50%",
            background: a.color,
            textAlign: "center",
            color: "#FFF",
            display: "flex",
            justifyContent: "center",
            alignItems: "center",
            fontFamily: "UbuntuLight, Tahoma, Arial, Helvetica, sans-serif",
            fontSize: "20px",
            margin: "auto 10px auto auto",
            verticalAlign: "middle",
        };
        return V("div", { colorClass: "avatarBubble", style: Object.assign({ position: "relative" }, a.style) }, V("div", { style: b }, a.name.charAt(0).toLocaleUpperCase()));
    }
    function nI() {
        return V(
            "div",
            {
                style: {
                    width: "100%",
                    height: "100%",
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    flexDirection: "column",
                    textAlign: "center",
                    lineHeight: "20px",
                    padding: "50px",
                    boxSizing: "border-box",
                    fontSize: "12px",
                    fontFamily: "UbuntuRegular, Helvetica, Arial, sans-serif",
                },
            },
            V("img", { src: "https://static-assets.highwebmedia.com/mobileassets/empty-chat-state.svg", style: { margin: "13px", width: "30px" }, alt: "empty-chat-state" }),
            V("span", { style: { fontFamily: "UbuntuBold, Arial, Helvetica, sans-serif", fontSize: "14px" } }, Vo),
            V("span", null, we())
        );
    }
    function yI() {
        this.Kh = [];
    }
    yI.prototype.Gf = function (a) {
        this.remove(a);
        this.Kh.unshift(a);
    };
    function zI(a, b) {
        a.remove(b);
        a.Kh.push(b);
    }
    yI.prototype.remove = function (a) {
        a = this.Kh.indexOf(a);
        -1 !== a && this.Kh.splice(a, 1);
    };
    function AI() {
        this.Bn = new yI();
        this.zn = new yI();
    }
    AI.prototype.Gf = function (a) {
        this.sb !== a && (this.zn.remove(a), this.Bn.Gf(a));
    };
    function BI(a) {
        var b = a.Bn.Kh.shift();
        void 0 !== a.sb && a.zn.Gf(a.sb);
        return (a.sb = b);
    }
    function CI(a) {
        var b = a.zn.Kh.shift();
        void 0 !== a.sb && a.Bn.Gf(a.sb);
        return (a.sb = b);
    }
    function DI(a) {
        for (;;) {
            var b = a.zn.Kh.pop();
            if (void 0 === b) break;
            zI(a.Bn, b);
        }
        void 0 !== a.sb && (zI(a.Bn, a.sb), (a.sb = void 0));
    }
    function EI(a) {
        for (;;) {
            var b = a.Bn.Kh.pop();
            if (void 0 === b) break;
            zI(a.zn, b);
        }
        void 0 !== a.sb && (zI(a.zn, a.sb), (a.sb = void 0));
    }
    AI.prototype.remove = function (a) {
        this.zn.remove(a);
        this.Bn.remove(a);
        this.sb === a && (this.sb = void 0);
    };
    function FI(a, b) {
        a.sb !== b && (a.Gf(b), BI(a));
    }
    var GI = [];
    G.g(function (a) {
        GI = a.A.lh;
    });
    var HI = new y("openEmoticonPreview"),
        II = new y("closeEmoticonPreview"),
        JI = new y("emoticonPreviewClosed");
    function KI() {
        Yr.call(this);
        var a = this;
        O(this.element, "emoticonPreviewModal");
        this.element.style.position = "fixed";
        this.element.style.width = "auto";
        this.element.style.height = "auto";
        this.element.style.borderRadius = "6px";
        this.element.style.padding = "10px";
        this.element.style.fontSize = "12px";
        this.element.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        this.element.style.zIndex = "1003";
        this.element.style.textAlign = "center";
        this.element.style.boxShadow = "0 0 18px rgba(0, 0, 0, 0.4)";
        this.S.style.backgroundColor = "#000000";
        this.S.style.opacity = "0.4";
        this.S.style.zIndex = "1003";
        var b = document.createElement("div");
        O(b, "closeButton");
        b.style.display = "inline-block";
        b.style.position = "absolute";
        b.style.width = "10px";
        b.style.height = "10px";
        b.style.top = "9px";
        b.style.right = "9px";
        b.style.cursor = "pointer";
        b.style.opacity = "1";
        b.onclick = function () {
            a.B();
        };
        b.onmouseenter = function () {
            b.style.opacity = "1";
        };
        b.onmouseleave = function () {
            b.style.opacity = "0.5";
        };
        this.element.appendChild(b);
        this.ve = document.createElement("img");
        this.ve.style.verticalAlign = "middle";
        this.ve.style.padding = "10px";
        v("load", this.ve, function () {
            a.ve.style.visibility = "visible";
            a.D();
        });
        this.element.appendChild(this.ve);
        this.hc = document.createElement("div");
        O(this.hc, "hrefColor");
        this.hc.innerText = "REPORT EMOTICON";
        this.hc.style.cursor = "pointer";
        this.hc.onclick = function () {
            a.hc.style.display = "none";
            a.si.style.display = "block";
            a.D();
        };
        this.hc.onmouseenter = function () {
            a.hc.style.textDecoration = "underline";
        };
        this.hc.onmouseleave = function () {
            a.hc.style.textDecoration = "none";
        };
        this.element.appendChild(this.hc);
        this.si = document.createElement("div");
        this.si.style.display = "none";
        this.element.appendChild(this.si);
        var c = document.createElement("span");
        c.innerText = "Choose a category:";
        c.style.marginRight = "6px";
        this.si.appendChild(c);
        var d = document.createElement("select");
        O(d, "categorySelect");
        d.style.borderRadius = "4px";
        d.style.marginBottom = "2px";
        c = l(LI);
        for (var e = c.next(); !e.done; e = c.next()) {
            e = e.value;
            var f = document.createElement("option");
            f.innerText = e.label;
            f.value = e.value;
            d.appendChild(f);
        }
        this.si.appendChild(d);
        c = document.createElement("span");
        c.style.display = "inline-block";
        e = document.createElement("span");
        O(e, "cancelButton");
        e.innerText = "CANCEL";
        e.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        e.style.fontSize = "12px";
        e.style.padding = "2px 6px";
        e.style.borderRadius = "4px";
        e.style.boxSizing = "border-box";
        e.style.cursor = "pointer";
        e.style.display = "inline-block";
        e.style.marginLeft = "6px";
        e.onclick = function () {
            a.hc.style.display = "block";
            a.si.style.display = "none";
            a.D();
        };
        c.appendChild(e);
        e = document.createElement("span");
        O(e, "reportButton");
        e.innerText = "REPORT";
        e.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        e.style.fontSize = "12px";
        e.style.padding = "2px 6px";
        e.style.borderRadius = "4px";
        e.style.boxSizing = "border-box";
        e.style.cursor = "pointer";
        e.style.display = "inline-block";
        e.style.marginLeft = "6px";
        e.onclick = function () {
            E("emoticon_report_abuse/" + a.zs.jc + "/", { category: d.value })
                .then(function () {
                    GI.push(a.zs.jc);
                    a.si.style.display = "none";
                    a.Qm.style.display = "block";
                    a.D();
                })
                .catch(function (h) {
                    r("Error reporting emoticon: " + h, "emoticonPreviewModal.ts", "common");
                });
        };
        c.appendChild(e);
        this.si.appendChild(c);
        this.Qm = document.createElement("div");
        this.Qm.style.display = "none";
        this.element.appendChild(this.Qm);
        c = document.createElement("span");
        c.innerText = "EMOTICON REPORTED - ";
        this.Qm.appendChild(c);
        var g = document.createElement("span");
        O(g, "hrefColor");
        g.innerText = "UNDO";
        g.style.cursor = "pointer";
        g.onclick = function () {
            E("emoticon_report_abuse/" + a.zs.jc + "/", { category: d.value })
                .then(function () {
                    var h = GI.indexOf(a.zs.jc, 0);
                    0 <= h && GI.splice(h, 1);
                    a.Qm.style.display = "none";
                    a.hc.style.display = "block";
                    a.D();
                })
                .catch(function (h) {
                    r("Error reporting emoticon: " + h, "emoticonPreviewModal.ts", "common");
                });
        };
        g.onmouseenter = function () {
            g.style.textDecoration = "underline";
        };
        g.onmouseleave = function () {
            g.style.textDecoration = "none";
        };
        this.Qm.appendChild(g);
        this.fc.g(function () {
            a.B();
        });
        II.g(function () {
            a.B();
        });
    }
    q(KI, Yr);
    KI.prototype.nj = function (a) {
        this.zs = a;
        this.ve.style.visibility = "hidden";
        this.ve.src = this.zs.url;
        this.hc.style.display = "none";
        this.si.style.display = "none";
        this.Qm.style.display = "none";
        0 <= GI.indexOf(a.jc) ? (this.Qm.style.display = "block") : (this.hc.style.display = "block");
        Yr.prototype.show.call(this);
        this.D();
    };
    KI.prototype.D = function () {
        this.element.style.left = (document.documentElement.clientWidth - this.element.offsetWidth) / 2 + "px";
        this.element.style.top = (document.documentElement.clientHeight - this.element.offsetHeight) / 2 + "px";
    };
    KI.prototype.B = function () {
        Yr.prototype.B.call(this);
        JI.h(void 0);
    };
    KI.prototype.show = function () {
        Yr.prototype.show.call(this);
        this.element.style.visibility = "";
        this.D();
    };
    function MI() {
        KI.call(this);
        this.ve.style.maxWidth = document.documentElement.clientWidth - 64 + "px";
        this.si.style.width = "300px";
        this.si.style.margin = "auto";
    }
    q(MI, KI);
    var LI = [
        { label: "Just ignore this emoticon", value: "ignore" },
        { label: "Offensive", value: "offensive" },
        { label: "Disgusting", value: "disgusting" },
        { label: "Fake Tip", value: "fake_tip" },
        { label: "Advertising", value: "advertising" },
    ];
    function NI(a) {
        w.call(this, "div", a);
        mu();
    }
    q(NI, w);
    k = NI.prototype;
    k.initData = function (a) {
        this.re = a.re;
        this.Hd = new Map();
        this.Aa = new AI();
    };
    k.ia = function () {
        var a = this;
        this.element = V(
            "div",
            { style: { width: "320px", position: "absolute", top: 0, bottom: 0, left: 0, backgroundColor: "#FFF", color: "#000", boxSizing: "border-box", display: "flex", flexDirection: "column" } },
            V(OI, {
                onClick: function () {
                    a.ha();
                },
            })
        );
        Yu(this.element, "left 150ms ease");
        this.nB();
        PI(this);
        this.oB();
        this.ha();
    };
    k.Ja = function () {
        Q(this.element, { left: 0 });
    };
    k.ha = function () {
        Q(this.element, { left: "-100%" });
        var a = this.Aa.sb;
        void 0 !== a && QI(this, a);
    };
    function PI(a) {
        var b;
        OH.g(function (e) {
            a.Ja();
            void 0 === a.Hd.get(e) && RI(a, e);
            a.Lz(e);
        });
        AE.g(function (e) {
            var f = a.Hd.get(e.bb);
            void 0 !== f && SI(f, e);
        });
        var c = null === (b = A.current.V) || void 0 === b ? void 0 : b.yc;
        void 0 !== c &&
            new Ut(c).ea.g(function (e) {
                var f = e.K.username !== a.re ? e.K.username : e.Ij;
                f = a.Hd.get(null !== f && void 0 !== f ? f : "");
                void 0 !== f && TI(f, e);
            });
        var d;
        HI.g(function (e) {
            void 0 === d && (d = new MI());
            d.nj(e);
        });
    }
    function RI(a, b) {
        if (!a.Hd.has(b)) {
            var c = new UI({ username: b, re: a.re, open: !0, oq: !1, Cq: function () {} });
            a.Hd.set(b, c);
            a.Aa.Gf(b);
            a.G(c);
            c.Bc(!0);
        }
    }
    k.Lz = function (a) {
        var b = this.Aa.sb;
        void 0 !== b && QI(this, b);
        b = this.Hd.get(a);
        void 0 !== b && (FI(this.Aa, a), b.lm(!0));
    };
    function QI(a, b) {
        a = a.Hd.get(b);
        void 0 !== a && a.lm(!1);
    }
    k.nB = function () {
        var a = this;
        HB.g(function (b) {
            b || a.ha();
        });
    };
    k.oB = function () {
        var a = this;
        v("resize", window, function () {
            var b,
                c = a.Hd.get(null !== (b = a.Aa.sb) && void 0 !== b ? b : "");
            b = !0 === (null === c || void 0 === c ? void 0 : c.Mb) ? c : void 0;
            kb() ||
                (null === b || void 0 === b
                    ? void 0
                    : ((c = Tv()),
                      250 > c
                          ? Q(b.dl, { height: c + "px", overflow: "scroll", transform: "translate(-50%)", top: "", bottom: "0", xS: "contain" })
                          : Q(b.dl, { height: "", overflow: "", transform: "translate(-50%, -50%)", top: "50%", bottom: "", xS: "" })));
        });
    };
    function VI(a) {
        w.call(this, "div", a);
    }
    q(VI, w);
    k = VI.prototype;
    k.initData = function (a) {
        this.yo = a.yo;
        this.fH = a.fH;
        this.mx = a.mx;
    };
    k.ia = function () {
        var a = this,
            b,
            c = { width: "320px", position: "fixed", top: 0, bottom: 0, left: 0, backgroundColor: "#FFF", color: "#000", boxSizing: "border-box", display: "flex", flexDirection: "column" },
            d = null === (b = A.current.V) || void 0 === b ? void 0 : b.username;
        void 0 !== d
            ? ((this.jF = new mI({ mM: function () {}, te: OH, Ha: !0 })),
              (b = new NI({ re: d })),
              (this.element = V(
                  "div",
                  { style: c },
                  V(OI, {
                      onClick: function () {
                          a.ha();
                      },
                  }),
                  this.jF.element,
                  b.element
              )))
            : ((b = { color: "#0a5a83", textDecoration: "none" }),
              (this.element = V(
                  "div",
                  { style: c },
                  V("div", { style: { height: "45px", display: "flex", alignItems: "center", paddingLeft: "10px", borderBottom: "1px solid #EFEFEF" } }, ip),
                  V(
                      "div",
                      { style: { display: "flex", justifyContent: "center", alignItems: "center", flexDirection: "column", flex: 1 } },
                      V("img", { style: { display: "inline-block", width: "50px", height: "50px" }, src: "https://static-assets.highwebmedia.com/tsdefaultassets/pms/empty-chat-state.svg" }),
                      V("span", { style: { margin: "25px 0", display: "inline-block" } }, Vo),
                      V(
                          "span",
                          {
                              style: Object.assign(Object.assign({}, b), { marginBottom: "50px" }),
                              onClick: function () {
                                  -1 === ("" + window.location.pathname + window.location.search).indexOf("/auth/login/") && Su({ pg: !0 });
                                  var e = document.querySelector(".push-overlay");
                                  a.ha();
                                  e instanceof HTMLElement && e.click();
                              },
                          },
                          Gf
                      ),
                      V("span", null, hn, " ", V("a", { href: "/accounts/register", style: b }, Hf))
                  )
              )));
        Yu(this.element, "left 150ms ease");
        WI(this);
        this.nB();
        XI(this);
        this.oB();
        this.ha();
    };
    k.Ja = function () {
        Q(this.element, { left: 0 });
        this.yo.classList.add("active");
    };
    k.ha = function () {
        Q(this.element, { left: "-100%" });
        this.yo.classList.remove("active");
    };
    k.La = function () {
        return "-100%" !== this.element.style.left;
    };
    function WI(a) {
        a.yo.onclick = function () {
            a.La() || a.Ja();
        };
    }
    k.nB = function () {
        var a = this;
        IB.g(function (b) {
            b && !a.La() ? a.Ja() : !b && a.La() && a.ha();
        });
        HB.g(function (b) {
            b || a.ha();
        });
    };
    function XI(a) {
        TH.g(function () {
            var b, c, d, e, f;
            void 0 !== a.jF &&
                (0 < (null === (b = a.jF) || void 0 === b ? void 0 : b.oc())
                    ? (a.yo.classList.add("has_unread"), null === (c = a.mx) || void 0 === c ? void 0 : c.classList.add("has_unseen"))
                    : (a.yo.classList.remove("has_unread"),
                      (null !== (e = null === (d = a.fH) || void 0 === d ? void 0 : d.classList.contains("has_unseen")) && void 0 !== e && e) || (null === (f = a.mx) || void 0 === f ? void 0 : f.classList.remove("has_unseen"))));
        });
    }
    k.oB = function () {
        var a = this;
        kb() ||
            v("resize", window, function () {
                a.element.style.top = 250 > Tv() ? "" : "0";
            });
    };
    function OI(a) {
        return V("span", { style: { height: "45px", display: "flex", alignItems: "center", paddingLeft: "10px", color: "#306A91", borderBottom: "1px solid #EFEFEF" }, onClick: a.onClick }, To);
    }
    function YI() {
        Jz.apply(this, arguments);
    }
    q(YI, Jz);
    YI.prototype.createElement = function (a) {
        return V("div", { className: "user-details" }, V(ZI, { V: a.V }), V($I, { V: a.V }));
    };
    function ZI() {
        Jz.apply(this, arguments);
    }
    q(ZI, Jz);
    ZI.prototype.createElement = function (a) {
        return V(
            "div",
            { className: "details-container" },
            V("a", { className: "main-text-container", href: "/p/" + a.V.username + "/?tab=tokens" }, V("span", { className: "main-text" }, V("span", { className: "tokencount", "updatable-count": "" }, a.V.ob), "\u00a0", ge(a.V.ob, !0))),
            V(
                "div",
                { className: "sub-text" },
                V(
                    "a",
                    { className: "sub-link purchase_tokens login-link", href: "/tipping/purchase_tokens/?source=" + A.current.Ub.TOKEN_SOURCE_USER_INFO_PANEL, "data-purchase-event-source": A.current.Ub.TOKEN_SOURCE_USER_INFO_PANEL },
                    "(" + Aq + ")"
                )
            )
        );
    };
    function $I() {
        Jz.apply(this, arguments);
    }
    q($I, Jz);
    $I.prototype.createElement = function (a) {
        return V(
            "div",
            { className: "details-container" },
            V("div", { className: "main-text-container" }, V("span", { className: "main-text" }, a.V.wk ? Tq : Sq)),
            !a.V.wk && V("div", { className: "sub-text" }, V("a", { className: "sub-link upgrade-membership upgrade", href: "/supporter/upgrade/?source=" + A.current.Ub.SUPPORTER_SOURCE_USER_INFO_PANEL }, "(" + Uq + ")"))
        );
    };
    function aJ(a, b, c) {
        ww.call(this, a);
        var d = this;
        this.username = b;
        this.Fw = c;
        this.Ud = oE();
        a = Object.assign(
            {
                display: "none",
                width: "100%",
                height: "auto",
                boxSizing: "border-box",
                top: "24px",
                left: "0px",
                zIndex: 1001,
                borderRadius: "0 0 5px 5px",
                borderStyle: "solid",
                borderWidth: "1px",
                borderTop: "none",
                fontFamily: "UbuntuBold, Helvetica, Arial, sans-serif",
                padding: "5px 0",
                position: "absolute",
                right: "auto",
            },
            this.Ud && { left: "auto", right: A.current.V ? "-1px" : "-13px", top: A.current.V ? "9px" : "20px" }
        );
        this.element.id = "UserMenuDropDown";
        O(this.element, "userMenuDropDown");
        O(this.element, "userInfoDropdownBgColor");
        Q(this.element, a);
        xe.lq || bJ(this);
        this.Ud && A.current.V && ((this.bP = new YI({ V: A.current.V })), this.element.insertBefore(this.bP.element, this.element.firstChild));
        if ("" !== b) {
            this.Kk = cJ(this, fg);
            this.element.appendChild(this.Kk);
            this.YL = cJ(this, Ff);
            this.YL.href = "/my_collection/";
            this.element.appendChild(this.YL);
            void 0 !== window.live_chat_support &&
                ((a = cJ(this, gg)),
                (a.href = "/accounts/support_chat/"),
                (a.onclick = function (g) {
                    g.preventDefault();
                    uu("/accounts/support_chat/", "support_chat", "height=630,width=375,resizable=0,location=0");
                }),
                this.element.appendChild(a));
            var e = document.createElement("form");
            e.method = "post";
            e.action = "/auth/logout/";
            e.target = "_top";
            e.style.display = "none";
            var f = document.createElement("input");
            f.type = "hidden";
            f.name = "csrfmiddlewaretoken";
            f.value = ac("csrftoken");
            e.appendChild(f);
            this.element.appendChild(e);
            a = cJ(this, jg);
            a.style.cursor = "pointer";
            a.onclick = function (g) {
                g.preventDefault();
                d.ha();
                nE.h({ source: "user_menu" });
            };
            this.element.appendChild(a);
            a = cJ(this, hg);
            a.href = "/auth/logout/";
            a.onclick = function (g) {
                g.preventDefault();
                d.ha();
                Md(ig, function () {
                    f.value = ac("csrftoken");
                    e.submit();
                });
            };
            this.element.appendChild(a);
            void 0 !== b && void 0 !== this.Kk && (this.Kk.href = "/p/" + b + "/?tab=bio");
        } else
            (b = cJ(this, Gf)),
                b.classList.add("login-link"),
                (b.href = "/auth/login"),
                this.element.appendChild(b),
                (b = cJ(this, Hf)),
                (b.href = "/accounts/register/?src=header"),
                this.element.appendChild(b),
                (b = cJ(this, jg)),
                (b.style.cursor = "pointer"),
                (b.href = "#"),
                (b.onclick = function (g) {
                    g.preventDefault();
                    d.ha();
                    nE.h({ source: "user_menu" });
                }),
                this.element.appendChild(b);
    }
    q(aJ, ww);
    function bJ(a) {
        if (void 0 !== a.Fw) {
            a.Vn = document.body.classList.contains("darkmode");
            var b = dJ(a);
            a.element.insertBefore(b, a.element.firstChild);
            !document.body.classList.contains("isIpad") && mb() && document.body.classList.add("isIpad");
        }
    }
    function dJ(a) {
        var b = document.createElement("div"),
            c = document.createElement("span");
        a.An = document.createElement("span");
        b.innerText = Jo;
        c.appendChild(a.An);
        b.appendChild(c);
        var d = Object.assign(
                { borderRadius: "25px", display: "inline-block", height: "20px", marginLeft: "10px", position: "relative", verticalAlign: "bottom", width: "44px", cssFloat: "right", right: "6px", top: "-2px" },
                a.Ud && { height: "13px", width: "22px", cssFloat: "right", right: "6px", top: "2px" }
            ),
            e = Object.assign({ borderRadius: "50%", display: "inline-block", height: "16px", width: "16px", position: "relative", top: "2px", left: "3px" }, a.Ud && { height: "10px", width: "10px", top: "-1px", left: "1px" });
        O(a.An, "dmSwitchCircle");
        Q(a.An, e);
        Q(c, d);
        O(c, "dmSwitch");
        Zu(b, "none");
        Yu(a.An, "left 100ms");
        O(b, "userInfoDropdownTextColor");
        O(b, "userInfoDropdownHighlightColor");
        b.style.fontSize = (a.Ud ? 13 : 14) + "px";
        b.style.fontWeight = "normal";
        b.style.cursor = "pointer";
        a.Ud ? ((b.style.fontFamily = "UbuntuBold, Arial, Helvetica, sans-serif"), (b.style.padding = "5px 0 5px 5px")) : ((b.style.fontFamily = "UbuntuMedium, Arial, Helvetica, sans-serif"), (b.style.padding = "5px 0 5px 10px"));
        b.onclick = function () {
            eJ(a);
            void 0 !== document.changeColorMode && document.changeColorMode();
        };
        Mr.g(function () {
            eJ(a);
        });
        a.Vn && (a.An.style.left = a.Ud ? "11px" : "25px");
        return b;
    }
    function eJ(a) {
        xe.lq ||
            (a.Vn
                ? ((a.An.style.left = a.Ud ? "1px" : "3px"), (a.Vn = !1), P(document.body, "darkmode"), O(document.body, "lightmode"), bc("theme_name", "lightmode", 60))
                : ((a.An.style.left = a.Ud ? "11px" : "25px"), (a.Vn = !0), P(document.body, "lightmode"), O(document.body, "darkmode"), bc("theme_name", "darkmode", 60)),
            xe.lq && ((a.element.style.backgroundColor = xe.LO), (a.element.style.border = "1px solid " + xe.cA)),
            F("colorModeChanged", { username: void 0 === a.username ? "__anon__" : a.username, color_mode: a.Vn ? "darkmode" : "lightmode" }),
            Lr.h(a.Vn ? "darkmode" : "lightmode"),
            Uu() || E("api/ts/accounts/userpreferredtheme/", { theme: a.Vn ? "darkmode" : "lightmode" }));
    }
    function cJ(a, b) {
        var c = document.createElement("a");
        c.style.textDecoration = "none";
        c.innerText = b;
        c.style.display = "block";
        c.style.fontSize = (a.Ud ? 13 : 14) + "px";
        c.style.padding = a.Ud ? "5px 0 5px 5px" : "5px 0 5px 10px";
        O(c, "userInfoDropdownTextColor");
        O(c, "userInfoDropdownHighlightColor");
        c.onclick = function () {
            a.ha();
        };
        return c;
    }
    aJ.prototype.Ja = function () {
        return ww.prototype.Ja.call(this);
    };
    aJ.prototype.ha = function () {
        return ww.prototype.ha.call(this);
    };
    function fJ() {
        function a() {
            return null === c ? !1 : "none" !== c.style.display && "" !== c.style.display;
        }
        var b = document.querySelector(".nav_list"),
            c = document.querySelector(".push-overlay");
        null !== c &&
            null !== b &&
            (v("click", b, function () {
                HB.h(!0);
            }),
            v("click", c, function () {
                HB.h(!1);
            }),
            IB.g(function (d) {
                d && !a() ? b.click() : !d && a() && c.click();
            }));
    }
    var gJ = new y("showJoinOverlay");
    function hJ() {
        Yr.call(this);
        var a = this;
        this.element.style.display = "none";
        this.element.style.position = "absolute";
        this.element.style.width = "560px";
        this.element.style.height = "auto";
        this.element.style.backgroundColor = "#ffffff";
        this.element.style.border = "2px solid #cccccc";
        this.element.style.borderRadius = "20px";
        this.element.style.padding = "10px";
        this.element.style.top = "45px";
        this.element.style.fontSize = "12px";
        this.element.style.fontFamily = "UbuntuRegular', Arial, Helvetica, sans-serif";
        this.S.style.background = "";
        this.S.classList.add("blurred-login-overlay");
        this.element.appendChild(this.vn());
        this.di = document.createElement("iframe");
        this.di.id = "join_iframe";
        this.di.frameBorder = "0";
        this.di.marginWidth = "0";
        this.di.scrolling = "no";
        this.di.marginHeight = "0";
        this.di.style.width = "560px";
        this.di.style.height = "650px";
        this.di.src = "/accounts/register_iframe/?next=" + encodeURIComponent(window.location.pathname);
        this.element.appendChild(this.di);
        var b = document.createElement("hr");
        b.style.margin = "15px 0 10px 0";
        b.style.border = "0";
        b.style.color = "#e4e4e4";
        b.style.backgroundColor = "#e4e4e4";
        b.style.height = "1px";
        this.element.appendChild(b);
        b = document.createElement("span");
        var c = document.createElement("img");
        c.src = "https://static-assets.highwebmedia.com/tsdefaultassets/arrow_back.gif";
        c.style.marginRight = "4px";
        c.style.verticalAlign = "bottom";
        b.appendChild(c);
        this.qh = document.createElement("a");
        this.qh.innerText = ui;
        this.qh.style.color = "#0a5a83";
        this.qh.style.position = "relative";
        this.qh.style.top = "-1px";
        this.qh.onmouseenter = function () {
            a.qh.style.textDecoration = "underline";
        };
        this.qh.onmouseleave = function () {
            a.qh.style.textDecoration = "none";
        };
        b.appendChild(this.qh);
        this.element.appendChild(b);
        b = document.createElement("span");
        b.style.cssFloat = "right";
        c = document.createElement("img");
        c.src = "https://static-assets.highwebmedia.com/tsdefaultassets/key.gif";
        c.style.marginRight = "4px";
        c.style.verticalAlign = "bottom";
        b.appendChild(c);
        c = document.createElement("span");
        c.innerText = vi;
        c.style.color = "#7f7f7f";
        c.style.position = "relative";
        c.style.top = "-1px";
        c.style.marginRight = "2px";
        b.appendChild(c);
        var d = document.createElement("a");
        d.href = "/auth/login/";
        d.innerText = wi;
        d.style.color = "#0a5a83";
        d.style.position = "relative";
        d.style.top = "-1px";
        d.onmouseenter = function () {
            d.style.textDecoration = "underline";
        };
        d.onmouseleave = function () {
            d.style.textDecoration = "none";
        };
        b.appendChild(d);
        this.element.appendChild(b);
        this.fc.g(function () {
            a.B();
            document.body.style.overflow = "";
            document.body.classList.remove("blurred-login-overlay-shown");
        });
        Iu.g(function () {
            a.B();
            document.body.style.overflow = "";
            document.body.classList.remove("blurred-login-overlay-shown");
        });
    }
    q(hJ, Yr);
    hJ.prototype.nj = function (a) {
        var b = this;
        this.qh.href = a.GD;
        this.qh.onclick = a.Kx;
        v("click", this.qh, function () {
            b.B();
            document.body.style.overflow = "";
        });
        Yr.prototype.show.call(this);
        this.element.style.display = "block";
        this.S.style.display = "flex";
        this.S.style.alignItems = "center";
        this.S.style.justifyContent = "center";
        document.body.style.overflow = "hidden";
        document.body.classList.add("blurred-login-overlay-shown");
        this.S.appendChild(this.element);
        this.S.style.overflow = "auto";
        this.di.onload = function () {
            var c = b.di.contentDocument;
            if (null !== c) {
                var d = c.getElementById("husername");
                null !== d && d.focus();
                d = c.querySelector("a.next");
                d.href = a.GD;
                d.onclick = a.Kx;
                c.querySelectorAll("a.medium_popup_link").forEach(function (e) {
                    e.onclick = function (f) {
                        f.preventDefault();
                        uu(e.href, "_blank", "status=0,toolbar=0,menubar=0,directories=0,resizable=1,scrollbars=1,height=700,width=715");
                    };
                });
            }
        };
        F("RegisterIframe_Shown");
    };
    hJ.prototype.vn = function () {
        var a = document.createElement("div");
        a.style.animationName = "spin";
        a.style.position = "absolute";
        a.style.top = "50%";
        a.style.left = "50%";
        a.style.width = "30px";
        a.style.height = "31px";
        a.style.margin = "-15px 0 0 -15px";
        a.style.background = 'url("https://static-assets.highwebmedia.com/tsdefaultassets/images/loading_spinner.svg")';
        a.style.backgroundSize = "cover";
        a.style.animationName = "spin";
        a.style.webkitAnimationName = "spin";
        a.style.animationDuration = "2s";
        a.style.webkitAnimationDuration = "2s";
        a.style.animationTimingFunction = "linear";
        a.style.webkitAnimationTimingFunction = "linear";
        a.style.animationIterationCount = "infinite";
        a.style.webkitAnimationIterationCount = "infinite";
        a.style.zIndex = "-1";
        return a;
    };
    var iJ = new y("commandeerJoinOverlayAnchors", { rc: -1, ii: 1 }),
        jJ = new y("restoreJoinOverlayAnchors", { rc: -1, ii: 1 }),
        kJ = !1;
    function lJ(a) {
        var b = this;
        this.anchor = a = void 0 === a ? document.createElement("a") : a;
        if (void 0 !== Bc(window.location.search).join_overlay) {
            var c = function () {
                kJ = !0;
                mJ(b);
            };
            kJ
                ? window.setTimeout(function () {
                      mJ(b);
                  }, 0)
                : iJ.addListener(c, this.anchor);
            var d = function () {
                kJ = !1;
                b.restore();
                iJ.removeListener(c);
                window.setTimeout(function () {
                    jJ.removeListener(d);
                }, 0);
            };
            jJ.addListener(d, this.anchor);
        }
    }
    function mJ(a) {
        a.Kx = a.anchor.onclick;
        a.GD = a.anchor.href;
        a.anchor.href = "/accounts/register/";
        a.anchor.onclick = function (b) {
            b.preventDefault();
            gJ.h(a);
            jJ.h(void 0);
        };
    }
    lJ.prototype.restore = function () {
        this.anchor.onclick = this.Kx;
        this.anchor.href = this.GD;
        this.Kx = null;
    };
    function nJ(a) {
        a = l(a.querySelectorAll("a:not(.nooverlay):not([href='#'])"));
        for (var b = a.next(); !b.done; b = a.next()) new lJ(b.value);
    }
    function oJ() {
        var a = document.getElementById("header");
        null !== a && nJ(a);
        a = document.getElementById("footer-holder");
        null !== a && nJ(a);
        a = document.getElementById("top-footer-holder");
        null !== a && nJ(a);
        a = document.getElementById("room_list");
        null !== a && nJ(a);
        a = document.getElementById("hashtag_ticker");
        null !== a && nJ(a);
        a = document.getElementsByClassName("sub-nav");
        0 !== a.length && nJ(a[0]);
    }
    function pJ(a, b, c) {
        var d = this,
            e;
        this.Fi = a;
        this.mm = !1;
        this.og = Zw;
        this.Dq = null !== (e = this.Fi.querySelector(".followed_counts")) && void 0 !== e ? e : void 0;
        Zd("MvFlwCt") && void 0 !== this.Dq && (this.Dq.remove(), (this.Dq = void 0));
        a = {
            username: c,
            ub: b,
            BA: function (f) {
                qJ(d, !0);
                0 === f.Ho.length && ((d.mm = !1), rJ(d));
            },
            xr: function (f, g) {
                qJ(d, !1);
                d.mm = 0 < f.XG.length;
                rJ(d);
                f.Kn && !g && d.Kn();
            },
            OQ: function () {
                qJ(d, !1);
                clearInterval(d.Ln);
                d.Ln = void 0;
                d.mm = !1;
                rJ(d);
            },
            yd: new kx(this.Fi, b, void 0 === this.Dq),
            PQ: this,
        };
        this.yd = a.yd;
        this.yd.Jj.g(function (f) {
            if (f.vb) {
                clearInterval(d.Ln);
                d.Ln = void 0;
                d.mm = !1;
                rJ(d);
                F("FollowedDropdownOpened", { onlineBroadcasters: d.og.Wf.Vf });
                if (Qa() && ((f = window.localStorage.getItem("onlineFollowedTab")), null !== f)) {
                    f = JSON.parse(f);
                    for (var g = l(f.unseenRooms), h = g.next(); !h.done; h = g.next()) f.seenRooms[h.value.room] = !0;
                    f.timestamp = Date.now();
                    f.flash = !1;
                    f.unseenRooms = [];
                    window.localStorage.setItem("onlineFollowedTab", JSON.stringify(f));
                }
                Qa() && window.localStorage.setItem("followedDropdownClicked", JSON.stringify({ timestamp: Date.now() }));
            }
        });
        this.og.Wf = Pw(this.Fi.innerText);
        this.og.Bc(a);
        qJ(this, !0);
    }
    pJ.prototype.Kn = function () {
        var a = this;
        if (void 0 === this.Ln) {
            var b = 3,
                c = !0;
            this.Ln = window.setInterval(function () {
                if (c) {
                    if ((O(a.Fi, "orange"), --b, 0 === b)) {
                        clearInterval(a.Ln);
                        a.Ln = void 0;
                        return;
                    }
                } else P(a.Fi, "orange");
                c = !c;
            }, 500);
        }
    };
    function qJ(a, b) {
        if (void 0 === a.Dq) lx(a.yd);
        else {
            var c = a.og.Wf;
            a.Fi.style.width = "auto";
            a.Dq.textContent = "(" + c.Vf + "/" + c.total + ")";
            null !== a.Fi.offsetParent &&
                window.setTimeout(function () {
                    b || (a.Fi.style.width = a.Fi.offsetWidth + 1 + "px");
                    a.yd.La() && a.yd.tf();
                });
        }
    }
    function rJ(a) {
        a.mm && !a.yd.La() ? O(a.Fi, "orange") : P(a.Fi, "orange");
    }
    function sJ(a) {
        w.call(this, a);
        a = a.querySelector(".nav");
        null !== a && a instanceof HTMLElement && iw(a, ["padding-left", "padding-right"], 10, 65, 500, 800);
        if (new Vd("newftlkV5").active || new Vd("newftlkV6").active) {
            var b = document.querySelector(".footercon");
            jw().g(function (e) {
                e ? document.body.clientWidth === window.innerWidth && Q(b, { gridTemplateColumns: "repeat(auto-fill, 160px)" }) : Q(b, { gridTemplateColumns: "repeat(auto-fill, 200px)" });
            });
            a = l(document.querySelectorAll(".col1, .col2, .col3, .col4, .col5"));
            for (var c = a.next(); !c.done; c = a.next()) iw(c.value, "padding-left", 20, 45, 500, 1e3);
        } else {
            var d = document.querySelector(".footer-holder .footer-cb-address");
            null !== d &&
                d instanceof HTMLElement &&
                iw(d, "margin-left", -55, 0, 500, 589, function (e) {
                    0 === e && (d.style.marginLeft = "");
                });
        }
    }
    q(sJ, w);
    function tJ(a) {
        w.call(this, a);
        this.Ud = oE();
        uJ();
        vJ();
        wJ();
        xJ(this);
        this.Ud || ((a = document.querySelector("#user_information")), null !== a && a instanceof HTMLElement && iw(a, "margin-right", 4, 15, 500, 600));
    }
    q(tJ, w);
    function xJ(a) {
        var b = document.querySelector(".nav-bar");
        null === b || a.Ud || iw(b, ["padding-left"], 4, 15, 500, 600);
        b = document.getElementById("nav");
        if (null !== b) {
            a.tq = new w(b);
            Array.from(b.children).forEach(function (d) {
                if (d instanceof HTMLLIElement) {
                    var e = new JD(d);
                    Eb(a.tq, e);
                    e.element.style.display = "block";
                    d = e.element.getElementsByTagName("a")[0];
                    if (null !== d && d instanceof HTMLAnchorElement) {
                        var f = getComputedStyle(d);
                        d.style.color = f.color;
                        d.style.font = f.font;
                        d.style.fontFamily = f.fontFamily;
                        d.style.fontWeight = f.fontWeight;
                        d.style.fontSize = f.fontSize;
                    }
                    e.im.g(function (g) {
                        e.element.style.padding = g ? "8px 4px" : "";
                    });
                }
            });
            var c = new BD("li", !a.Ud);
            a.tq.G(c);
            sd(c.element);
            Q(c, { border: "1px solid transparent", borderRadius: "4px 4px 0 0", height: "30px", top: "6px", width: "39px", paddingTop: "3px", color: xe.ZL });
            c.jd.Jj.g(function (d) {
                d.vb
                    ? (a.Ud && (c.jd.element.style.maxWidth = document.body.offsetWidth - parseInt(getComputedStyle(a.uH.element).left) + "px"), (c.element.style.border = "1px solid " + xe.cA))
                    : (c.element.style.border = "1px solid transparent");
            });
            Q(c.jd, Object.assign({ borderColor: "" + xe.cA, padding: "8px 20px 8px 8px" }, a.Ud && { whiteSpace: "nowrap", boxSizing: "border-box" }));
            c.jd.element.classList.add("header-dropdown");
            a.Ud && c.jd.element.classList.add("header-dropdown--NvBrRdsn");
            a.uH = c;
            yJ(a);
        }
    }
    function yJ(a) {
        if (void 0 !== a.tq && null !== a.tq.element.parentElement) {
            for (var b = 0, c = l(a.tq.element.parentElement.children), d = c.next(); !d.done; d = c.next()) (d = d.value), d !== a.tq.element && d instanceof HTMLElement && (b += d.offsetWidth);
            a.uH.yi.element.style.width = b + "px";
        }
    }
    function vJ() {
        var a = document.querySelector("#header .ad");
        if (null !== a && a instanceof HTMLElement) {
            var b = document.querySelector(".right_section"),
                c = ud(null !== a.firstElementChild && a.firstElementChild instanceof HTMLElement ? a.firstElementChild : a),
                d = c.width ? c.right : ud(a).right;
            gw.g(function () {
                a.style.display = (null === b ? document.body.offsetWidth : b.offsetLeft) - 25 < d ? "none" : "block";
            });
        }
    }
    function wJ() {
        var a = document.querySelector("#header .ad a");
        null !== a &&
            (a.onclick = function () {
                F("BannerAdClicked", { content: "real_ads", location: A.current.EM });
            });
    }
    function uJ() {
        var a = document.querySelector(".logo-zone");
        if (null !== a && a instanceof HTMLElement) {
            var b = document.querySelector(".logo-zone svg"),
                c = document.querySelector(".logo-zone strong:last-child");
            iw(a, "padding-left", 8, 15, 500, 600);
            iw(a, "padding-top", 12, 6, 500, 600);
            null !== b && b instanceof HTMLElement && (iw(b, "width", 145, 198, 500, 600), iw(b, "height", 45, 61, 500, 600));
            null !== c && c instanceof HTMLElement && (iw(c, "font-size", 8, 10, 500, 600), iw(c, "padding-left", 13, 17, 500, 600));
            var d = document.querySelector(".logo-zone .logo");
            if (null !== d && d instanceof HTMLElement) {
                var e = d.clientWidth;
                e > 500 - yd() &&
                    gw.g(function () {
                        d.style.maxWidth = e + d.offsetLeft > Uv() ? Uv() - d.offsetLeft - 1 + "px" : "";
                    });
            }
        }
    }
    var zJ = new Map();
    function AJ() {
        var a = this;
        this.Ar = new Set();
        Uu() ||
            A.current.nb ||
            (C("api/notes/usernames/")
                .then(function (b) {
                    b = new H(b.responseText);
                    JSON.parse(Zc(b, "usernames")).forEach(function (c) {
                        a.Ar.add(c);
                    });
                })
                .catch(function () {
                    r("Could not retrieve list of users for which currentUser has notes on", "notes.tsx", "common");
                }),
            lC("notesBadge", function (b) {
                return a.PB(b);
            }));
    }
    var BJ;
    function CJ() {
        void 0 === BJ && (BJ = new AJ());
        return BJ;
    }
    AJ.prototype.bn = function (a) {
        this.Ar.add(a);
        this.nv(a);
    };
    function DJ(a, b) {
        a.Ar.has(b) && (a.Ar.delete(b), a.nv(b));
    }
    AJ.prototype.PB = function (a) {
        var b = document.createElement("span");
        b.style.display = this.Ar.has(a) ? "" : "none";
        b.style.marginRight = ".1em";
        b.title = pq;
        a = V(
            "div",
            { style: { display: "inline-block" }, colorClass: ["noteIconSvg"] },
            V(
                "svg",
                { style: { height: "1.2em", width: "1.2em" }, viewBox: "0 0 12 12", xmlns: "https://www.w3.org/2000/svg" },
                V("path", {
                    d:
                        "M5.5 2.00002H2C1.73478 2.00002 1.48043 2.10537 1.29289 2.29291C1.10536 2.48044 1 2.7348 1 3.00002V10C1 10.2652 1.10536 10.5196 1.29289 10.7071C1.48043 10.8947 1.73478 11 2 11H9C9.26522 11 9.51957 10.8947 9.70711 10.7071C9.89464 10.5196 10 10.2652 10 10V6.50002",
                    "stroke-width": "1.5",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round",
                }),
                V("path", {
                    d:
                        "M9.25 1.24985C9.44891 1.05094 9.7187 0.939194 10 0.939194C10.2813 0.939194 10.5511 1.05094 10.75 1.24985C10.9489 1.44877 11.0607 1.71855 11.0607 1.99985C11.0607 2.28116 10.9489 2.55094 10.75 2.74985L6 7.49985L4 7.99985L4.5 5.99985L9.25 1.24985Z",
                    "stroke-width": "1.5",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round",
                })
            )
        );
        b.appendChild(a);
        return b;
    };
    AJ.prototype.nv = function (a) {
        var b = this.Ar.has(a);
        Array.from(document.body.querySelectorAll(".notesBadge_" + a)).forEach(function (c) {
            c.style.display = b ? "inline-block" : "none";
        });
    };
    function EJ(a, b, c, d) {
        w.call(this);
        this.os = a;
        this.Eh = b;
        this.Ny = c;
        this.Ky = d;
        this.by = !0;
        this.element.style.position = "relative";
        this.element.appendChild(this.fb());
        FJ(this);
    }
    q(EJ, w);
    EJ.prototype.fb = function () {
        function a() {
            c.by ||
                ((c.fj = c.na.value.trim()),
                GJ(c),
                c.na.value !== c.Rh
                    ? (void 0 !== u && (clearTimeout(u), (u = void 0)), void 0 !== c.Ky && c.Ky())
                    : (u = window.setTimeout(function () {
                          p || ((m.style.display = "none"), (g.style.display = "none"));
                          p = !1;
                      }, 500)),
                c.Qv());
        }
        function b() {
            HJ(c);
            n.style.opacity = "0.5";
            n.style.cursor = "not-allowed";
        }
        var c = this,
            d = document.createElement("div");
        d.style.paddingTop = "8px";
        O(d, "ucmNote");
        d.style.borderTopWidth = "1px";
        d.style.borderTopStyle = "solid";
        var e = document.createElement("div");
        O(e, "notesIcon");
        e.style.display = "inline-block";
        e.style.width = "12px";
        e.style.height = "12px";
        e.style.marginRight = "5px";
        e.style.marginLeft = "1px";
        var f = document.createElement("span");
        f.textContent = Po;
        f.style.display = "inline-block";
        f.style.verticalAlign = "top";
        f.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        f.style.fontSize = "12px";
        f.style.lineHeight = "12px";
        var g = document.createElement("span");
        g.textContent = So;
        g.style.display = "inline-block";
        g.style.verticalAlign = "top";
        g.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        g.style.fontSize = "12px";
        g.style.lineHeight = "12px";
        g.style.marginLeft = "2px";
        g.style.display = "none";
        f.appendChild(g);
        var h = document.createElement("div");
        O(h, "ucmLinkColor");
        h.style.margin = "0px 10px 8px 10px";
        h.style.height = "15px";
        h.appendChild(e);
        h.appendChild(f);
        d.appendChild(h);
        this.na = document.createElement("textarea");
        this.na.style.width = "calc(100% - 38px)";
        this.na.style.height = "56px";
        this.na.style.lineHeight = "14px";
        this.na.style.borderWidth = "1px";
        this.na.style.borderStyle = "solid";
        this.na.style.borderRadius = "4px";
        this.na.style.resize = "none";
        this.na.style.display = "block";
        this.na.style.padding = "7px 8px";
        this.na.style.margin = "0px auto";
        this.na.style.overflow = "auto";
        this.na.placeholder = Qo;
        this.na.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        this.na.style.fontSize = "100%";
        this.na.tabIndex = 1;
        d.appendChild(this.na);
        var m = document.createElement("div");
        m.style.margin = "10px 10px 0px 0px";
        m.style.textAlign = "right";
        m.style.display = "none";
        e = document.createElement("a");
        O(e, "cancelLink");
        e.innerText = Ej;
        e.style.display = "inline-block";
        e.style.marginRight = "8px";
        e.style.verticalAlign = "middle";
        e.style.cursor = "pointer";
        e.href = "#";
        e.tabIndex = 3;
        var n = document.createElement("input");
        n.type = "submit";
        n.value = Fh;
        n.style.opacity = "0.5";
        n.style.borderWidth = "1px";
        n.style.borderStyle = "solid";
        n.style.borderRadius = "4px";
        n.style.boxSizing = "border-box";
        n.style.cursor = "pointer";
        n.style.height = "27px";
        n.style.width = "69px";
        n.style.font = "16px UbuntuMedium,Helvetica,sans-serif";
        n.style.webkitAppearance = "none";
        n.style.display = "inline-block";
        n.style.textAlign = "center";
        n.tabIndex = 2;
        var p = !1,
            u;
        this.Qv = function () {
            if (!c.by) {
                var x = c.Rh !== c.fj,
                    D = 300 >= c.na.value.length;
                n.style.opacity = x && D ? "1" : "0.5";
                n.style.cursor = x && D ? "pointer" : "not-allowed";
                g.style.display = x ? "" : "none";
                m.style.display = x ? "" : "none";
            }
        };
        rb() &&
            v("keyup", this.na, function (x) {
                8 === x.keyCode && a();
            });
        jb() &&
            v("keyup", this.na, function () {
                "" === c.fj && (c.na.placeholder = Ro);
            });
        v("input", this.na, function () {
            a();
        });
        v("click", this.na, function (x) {
            x.stopPropagation();
        });
        v("keydown", this.element, function (x) {
            x.ctrlKey || x.metaKey || 27 === x.keyCode || (x.stopPropagation(), !mb() && x.shiftKey && 13 === x.keyCode && (x.preventDefault(), (p = !0), b()));
        });
        v("click", e, function (x) {
            x.preventDefault();
            IJ(c);
            c.Ny();
        });
        v("click", n, function (x) {
            x.preventDefault();
            p = !0;
            b();
        });
        m.appendChild(e);
        m.appendChild(n);
        d.appendChild(m);
        e = document.createElement("div");
        e.style.margin = "4px 0px";
        e.style.height = "2px";
        d.appendChild(e);
        return d;
    };
    function FJ(a) {
        if (Uu()) (a.Rh = a.na.value), (a.na.placeholder = Ro), (a.by = !1);
        else {
            var b = JJ(a);
            KJ(a.Eh)
                .then(function (c) {
                    c = void 0 === c.text ? "" : c.text;
                    void 0 !== b && c === b.Rh ? ((a.na.value = b.fj), (a.fj = b.fj)) : ((a.na.value = c), (a.fj = c));
                    a.Rh = c;
                    a.na.placeholder = Ro;
                    a.by = !1;
                    a.Qv();
                    a.na.selectionStart = a.na.selectionEnd = a.na.value.length;
                    a.na.blur();
                    a.na.focus();
                    a.na.scrollTop = a.na.scrollHeight;
                })
                .catch(function () {
                    r("Unable to get notes for user " + a.Eh, "notes.tsx", "common");
                });
        }
    }
    function JJ(a) {
        return zJ.has(a.Eh) ? zJ.get(a.Eh) : void 0;
    }
    function GJ(a) {
        Uu() || zJ.set(a.Eh, { Rh: a.Rh, fj: a.fj });
    }
    function IJ(a) {
        zJ.has(a.Eh) && zJ.delete(a.Eh);
    }
    function KJ(a) {
        return C("api/notes/for_user/" + a + "/").then(function (b) {
            return { text: K(new H(b.responseText), "text") };
        });
    }
    function LJ(a) {
        var b;
        a = new H(a);
        var c = $c(a, "error", !1);
        if (void 0 === c) return { success: M(a, "success") };
        a = new H(c);
        c =
            null === (b = Qc(a, "text")) || void 0 === b
                ? void 0
                : b.map(function (d) {
                      return { message: L(d, "message"), code: L(d, "code") };
                  });
        b = { text: void 0 === c ? [] : c };
        return { success: M(a, "success"), error: b };
    }
    function MJ(a) {
        return new Promise(function (b, c) {
            E("api/notes/for_user/" + a.M + "/", { text: a.text })
                .then(function (d) {
                    b(LJ(d.responseText));
                })
                .catch(function (d) {
                    c(d.status);
                });
        });
    }
    function HJ(a) {
        if (!Wu('You must be logged in to add a Note. Click "OK" to login.')) {
            var b = a.na.value.trim();
            a.Rh !== b && 300 >= b.length
                ? MJ({ M: a.Eh, text: b })
                      .then(function (c) {
                          if (c.success) (a.Rh = b), a.na.blur(), IJ(a), a.Ny(), F("NoteSaved", { username: a.os, to_user: a.Eh }), "" === a.Rh ? DJ(CJ(), a.Eh) : CJ().bn(a.Eh);
                          else if (void 0 !== c.error) {
                              var d = "Following error(s) occurred:<br/>";
                              c.error.text.forEach(function (e) {
                                  d += "Note text: " + e.message + " <br/>";
                              });
                              R(d, void 0, !0);
                          }
                      })
                      .catch(function () {
                          r("Was not able to update notes for user " + a.Eh, "notes.tsx", "common");
                      })
                : 300 < b.length
                ? R("Note text must be shorter than 300 characters.")
                : a.Ny();
        }
    }
    function NJ() {
        EJ.apply(this, arguments);
    }
    q(NJ, EJ);
    NJ.prototype.fb = function () {
        function a() {
            c.fj = c.na.value.trim();
            GJ(c);
            c.na.value !== c.Rh
                ? (void 0 !== u && (clearTimeout(u), (u = void 0)), void 0 !== c.Ky && c.Ky())
                : (u = window.setTimeout(function () {
                      p || ((m.style.display = "none"), (g.style.display = "none"));
                      p = !1;
                  }, 500));
            c.Qv();
        }
        function b() {
            HJ(c);
            n.style.opacity = "0.5";
            n.style.cursor = "not-allowed";
        }
        var c = this,
            d = document.createElement("div");
        O(d, "pmUcmNote");
        d.style.paddingTop = "8px";
        d.style.borderTopWidth = "1px";
        d.style.borderTopStyle = "solid";
        var e = document.createElement("div");
        O(e, "notesIcon");
        e.style.display = "inline-block";
        e.style.width = "14px";
        e.style.height = "14px";
        e.style.marginRight = "5px";
        e.style.marginLeft = "2px";
        var f = document.createElement("span");
        f.textContent = Po;
        f.style.display = "inline-block";
        f.style.verticalAlign = "top";
        f.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        f.style.fontSize = "12px";
        f.style.lineHeight = "12px";
        var g = document.createElement("span");
        g.textContent = So;
        g.style.display = "inline-block";
        g.style.verticalAlign = "top";
        g.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        g.style.fontSize = "12px";
        g.style.lineHeight = "12px";
        g.style.marginLeft = "2px";
        g.style.display = "none";
        f.appendChild(g);
        var h = document.createElement("div");
        O(h, "ucmLinkColor");
        h.style.margin = "0px 10px 8px 10px";
        h.style.height = "15px";
        h.appendChild(e);
        h.appendChild(f);
        d.appendChild(h);
        this.na = document.createElement("textarea");
        this.na.style.width = "calc(100% - 17px)";
        this.na.style.height = "50px";
        this.na.style.lineHeight = "14px";
        this.na.style.borderWidth = "1px";
        this.na.style.borderStyle = "solid";
        this.na.style.borderRadius = "4px";
        this.na.style.resize = "none";
        this.na.style.display = "block";
        this.na.style.padding = "7px 8px";
        this.na.style.margin = "0px auto";
        this.na.style.overflow = "auto";
        this.na.style.boxSizing = "border-box";
        this.na.placeholder = Qo;
        this.na.style.fontSize = A.current.nb ? "16px" : "100%";
        d.appendChild(this.na);
        e = document.createElement("form");
        var m = document.createElement("div");
        m.style.margin = "10px 10px 0px 0px";
        m.style.textAlign = "right";
        m.style.display = "none";
        f = document.createElement("a");
        O(f, "cancelLink");
        f.innerText = Ej;
        f.style.display = "inline-block";
        f.style.marginRight = "8px";
        f.style.verticalAlign = "middle";
        f.style.cursor = "pointer";
        f.href = "#";
        var n = document.createElement("input");
        n.type = "submit";
        n.value = Fh;
        n.style.opacity = "0.5";
        n.style.borderRadius = "4px";
        n.style.boxSizing = "border-box";
        n.style.cursor = "pointer";
        n.style.height = "27px";
        n.style.width = "69px";
        n.style.font = "16px ubuntumedium,Arial,Helvetica,sans-serif";
        n.style.webkitAppearance = "none";
        n.style.display = "inline-block";
        n.style.textAlign = "center";
        var p = !1,
            u;
        this.Qv = function () {
            var x = c.Rh !== c.fj,
                D = 300 >= c.na.value.length;
            n.style.opacity = x && D ? "1" : "0.5";
            n.style.cursor = x && D ? "pointer" : "not-allowed";
            g.style.display = x ? "" : "none";
            m.style.display = x ? "" : "none";
        };
        rb() &&
            v("keyup", this.na, function (x) {
                8 === x.keyCode && a();
            });
        v("input", this.na, function () {
            a();
        });
        v("keydown", this.element, function (x) {
            x.ctrlKey || x.metaKey || 27 === x.keyCode || (x.stopPropagation(), x.shiftKey && 13 === x.keyCode && (x.preventDefault(), b()));
        });
        v("click", f, function (x) {
            x.preventDefault();
            IJ(c);
            c.Ny();
        });
        v("submit", e, function (x) {
            x.preventDefault();
            p = !0;
            b();
        });
        e.appendChild(f);
        e.appendChild(n);
        m.appendChild(e);
        d.appendChild(m);
        e = document.createElement("div");
        e.style.margin = "4px 0px";
        e.style.height = "2px";
        d.appendChild(e);
        return d;
    };
    function OJ(a, b, c) {
        this.ub = a;
        this.lT = b;
        this.nb = c;
        PJ(this);
    }
    function PJ(a) {
        a.Yv();
        xx(yx(), function () {
            a.Yv();
        });
    }
    OJ.prototype.Yv = function () {
        var a = this,
            b = document.querySelectorAll("#" + this.lT);
        if (null !== b) {
            b = l(b);
            for (var c = b.next(); !c.done; c = b.next()) {
                var d = {};
                c = l(c.value.querySelectorAll("div.icon_following, div.icon_not_following"));
                for (var e = c.next(); !e.done; d = { Av: d.Av }, e = c.next())
                    (d.Av = e.value),
                        (d.Av.onclick = (function (f) {
                            return function () {
                                QJ(a, f.Av);
                            };
                        })(d));
            }
        }
    };
    function RJ(a) {
        a.classList.remove("icon_update_following");
        a.classList.add("icon_following", "no_hover");
        window.setTimeout(function () {
            a.classList.remove("no_hover");
        }, 3e3);
        a.title = mh;
    }
    function SJ(a, b) {
        b.classList.remove("icon_not_following");
        b.classList.add("icon_update_following");
        var c = b.getAttribute("data-slug");
        null !== c &&
            ((c = Gz(c, a.ub)),
            void 0 !== c &&
                c
                    .then(function (d) {
                        d ? RJ(b) : TJ(a, b);
                    })
                    .catch(function () {}));
    }
    function UJ(a) {
        a.classList.remove("icon_update_following");
        a.classList.add("icon_not_following", "no_hover");
        window.setTimeout(function () {
            a.classList.remove("no_hover");
        }, 3e3);
        a.title = nh;
    }
    function TJ(a, b) {
        b.classList.remove("icon_following");
        b.classList.add("icon_update_following");
        var c = b.getAttribute("data-slug");
        null !== c && (void 0 !== Hz(c, a.ub) ? UJ(b) : (b.classList.remove("icon_update_following"), b.classList.add("icon_following")));
    }
    function QJ(a, b) {
        b.classList.contains("icon_following")
            ? TJ(a, b)
            : b.classList.contains("icon_not_following") &&
              (a.ub
                  ? a.nb
                      ? Md("To follow this broadcaster, please create an account or login now.", function () {
                            Su({ pg: !0 });
                        })
                      : Su({ pg: !0 })
                  : SJ(a, b));
    }
    function VJ() {
        window.setTimeout(function () {
            yu || location.reload();
            xu.g(function () {
                location.reload();
            });
        }, 1728e5);
    }
    function WJ(a) {
        return "Enter" === a.key || 13 === a.keyCode;
    }
    function XJ(a) {
        return "undefined" == typeof a.which ? !0 : "number" == typeof a.which && 0 < a.which ? !a.ctrlKey && !a.metaKey && !a.altKey : !1;
    }
    function YJ() {
        return void 0 !== A.current.V ? "searchHistory:" + A.current.V.username : "";
    }
    function ZJ(a, b) {
        if (Qa() && void 0 !== A.current.V && "" !== a) {
            a = a.toLowerCase().trim();
            var c = window.localStorage.getItem(YJ());
            b = { content: a, type: b };
            var d = JSON.stringify([b]);
            if (null !== c) {
                c = JSON.parse(c);
                d = 0;
                for (var e = l(c), f = e.next(); !f.done; f = e.next()) {
                    if (f.value.content === a) {
                        c.splice(d, 1);
                        break;
                    }
                    d += 1;
                }
                c.unshift(b);
                5 < c.length && c.pop();
                d = JSON.stringify(c);
            }
            window.localStorage.setItem(YJ(), d);
        }
    }
    function $J(a) {
        if (Qa()) {
            var b = window.localStorage.getItem(YJ());
            null !== b &&
                ((b = null !== b ? JSON.parse(b) : []),
                b.splice(
                    b.findIndex(function (c) {
                        return c.content === a;
                    }),
                    1
                ),
                (b = JSON.stringify(b)),
                window.localStorage.setItem(YJ(), b));
        }
    }
    function aK() {
        var a = window.localStorage.getItem(YJ());
        if (null !== a)
            try {
                for (var b = JSON.parse(a), c = l(b), d = c.next(); !d.done; d = c.next()) {
                    var e = d.value;
                    if (void 0 === e.content || void 0 === e.type) {
                        window.localStorage.removeItem(YJ());
                        break;
                    }
                }
            } catch (f) {
                window.localStorage.removeItem(YJ());
            }
    }
    var bK = new y("SuggestionClicked"),
        cK = { fontSize: "9px", position: "relative", width: "105px" },
        dK = { display: "inline-block", position: "relative", top: "6px", height: "18px", padding: "5px 10px", width: "18px" },
        eK = { display: "inline-block", margin: "0px", position: "relative" },
        fK = { borderBottomStyle: "solid", borderBottomWidth: "1px", cursor: "pointer", height: "42px", position: "relative" },
        gK = { textDecoration: "none" },
        hK = { display: "inline-block", position: "absolute", top: "6px", height: "35px", width: pb() ? "calc(100% - 38px)" : "180px" },
        iK = { font: "12px UbuntuBold, Arial, Helvetica, sans-serif", marginRight: "0px" },
        jK = { font: "12px UbuntuRegular, Arial, Helvetica, sans-serif", marginRight: "0px" };
    function kK() {
        Jz.apply(this, arguments);
    }
    q(kK, Jz);
    k = kK.prototype;
    k.Ts = function () {
        return "";
    };
    k.Vs = function () {
        return "";
    };
    k.Sp = function () {
        return "";
    };
    function lK(a, b) {
        var c = b.input;
        c = b.Ya.startsWith("#") ? c.replace(/%23/g, "#") : c.replace(/#/g, "");
        var d = b.Ya.toLowerCase().indexOf(c.toLowerCase()),
            e = 0 <= d ? b.Ya.slice(d, d + c.length) : b.Ya;
        c = d + c.length < b.Ya.length && 0 <= d ? b.Ya.slice(d + c.length) : "";
        return [V("span", { style: iK }, 0 < d ? b.Ya.slice(0, d) : ""), V("span", { style: jK }, e), V("span", { style: iK }, c), V("div", { className: "statusText", style: cK }, a.Vs())];
    }
    k.createElement = function (a) {
        var b = this;
        return V(
            "a",
            {
                style: gK,
                href: a.href,
                tabIndex: -1,
                onKeyDown: function (c) {
                    WJ(c) && b.By(a);
                },
                onContextMenu: function (c) {
                    return pb() || A.current.nb ? (c.preventDefault(), !1) : !0;
                },
                onBlur: function (c) {
                    mK.h(c);
                },
                onClick: function (c) {
                    "" === a.href && c.preventDefault();
                    b.By(a);
                },
            },
            V("div", { className: this.Sp(), style: fK }, V("div", { className: this.Ts(), style: dK }), V("div", { style: hK }, V("p", { className: this.Sp(), style: eK }, lK(this, a))))
        );
    };
    k.By = function (a) {
        ZJ(a.Ya, "online");
        F("SearchBarResultsClick", { resultType: "broadcaster", resultString: a.Ya });
    };
    function nK() {
        kK.apply(this, arguments);
    }
    q(nK, kK);
    nK.prototype.Ts = function () {
        return "icon-hashtag";
    };
    nK.prototype.Vs = function () {
        return "";
    };
    nK.prototype.Sp = function () {
        return "hashtag_suggestion";
    };
    nK.prototype.By = function (a) {
        a = "#" + a.Ya;
        ZJ(a, "hashtags");
        F("SearchBarResultsClick", { resultType: "hashtag", resultString: a });
    };
    var oK = new y("historyDeleteClicked"),
        pK = { width: "23px", height: "23px", display: "block", position: "absolute", top: "20%", left: "unset", right: "2px", backgroundPosition: "50% top", backgroundSize: "14px 14px" };
    function qK() {
        kK.apply(this, arguments);
    }
    q(qK, kK);
    k = qK.prototype;
    k.Ts = function () {
        return "icon-history";
    };
    k.Vs = function () {
        return No;
    };
    k.Sp = function () {
        return "history_suggestion";
    };
    k.By = function (a) {
        F("SearchBarResultsClick", { resultType: "history", resultString: a.Ya });
        a.href.includes("/tag/") || ("" !== a.href ? ZJ(a.Ya, "online") : bK.h(a.Ya));
    };
    k.createElement = function (a) {
        var b = kK.prototype.createElement.call(this, a),
            c = V("div", {
                style: pb() ? pK : {},
                className: "historyDelete",
                onClick: function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                },
                onMouseDown: function (e) {
                    e.ctrlKey || e.metaKey || 2 === e.button || ($J(a.Ya), oK.h(a.Ya), e.preventDefault(), e.stopPropagation());
                },
            }),
            d = b.firstElementChild;
        null !== d && ((d = d.lastElementChild), null !== d && d.appendChild(c));
        ("" === a.href || a.href.includes("/tag/")) && b.setAttribute("data-floatingnav", "");
        return b;
    };
    function rK() {
        kK.apply(this, arguments);
    }
    q(rK, kK);
    rK.prototype.Ts = function () {
        return "icon-offline";
    };
    rK.prototype.Vs = function () {
        return Mo;
    };
    rK.prototype.Sp = function () {
        return "broadcaster_suggestion";
    };
    function sK() {
        kK.apply(this, arguments);
    }
    q(sK, kK);
    sK.prototype.Ts = function () {
        return "icon-online";
    };
    sK.prototype.Vs = function () {
        return Lo;
    };
    sK.prototype.Sp = function () {
        return "broadcaster_suggestion";
    };
    function tK(a) {
        var b = ex();
        return "" === b || "" === a ? "/tag/" + a : new Vd("GdrChkbx6").active ? "/tag/" + a + "/" : "/tag/" + a + "/" + b + "/";
    }
    var uK = ["hashtags", "online", "offline"],
        vK = { borderWidth: "1px", borderStyle: "solid", height: "", display: "none", font: "12px UbuntuBold, Arial, Helvetica, sans-serif", overflow: "", position: "absolute", right: "0px", top: "25px", width: "227px" };
    function wK(a, b) {
        w.call(this);
        var c = this;
        this.Ul = this.ta = -1;
        this.hF = this.mq = !1;
        this.gA = 0;
        this.input = a;
        this.CT = b;
        this.ae = [];
        xK.g(function () {
            c.hE = void 0;
        });
        bK.g(function (d) {
            null !== d && ((c.input.element.value = d), c.CT.Ut());
        });
        oK.g(function (d) {
            var e = c.ae.findIndex(function (f) {
                return f.label === d;
            });
            c.ae[e].element.remove();
            c.ae.splice(e, 1);
            c.Ul = c.ae.length - 1;
            c.gr();
            c.input.element.focus();
            c.input.element.select();
        });
        O(this.element, "suggestionsDiv");
    }
    q(wK, w);
    wK.prototype.ia = function () {
        Q(this.element, vK);
    };
    function yK(a) {
        P(a, "active");
    }
    function zK(a) {
        a.ae = [];
        for (a.Ul = -1; null !== a.element.lastChild; ) a.element.removeChild(a.element.lastChild);
        a.ha();
    }
    function AK(a, b, c, d, e, f) {
        var g = "/" + b + "/";
        switch (d) {
            case "online":
                var h = new sK({ Ya: b, input: c, count: e, href: g }).element;
                break;
            case "offline":
                h = new rK({ Ya: b, input: c, count: e, href: g }).element;
                break;
            case "hashtags":
                g = tK(b);
                h = new nK({ Ya: b, input: c, count: e, href: g }).element;
                break;
            default:
                "hashtags" === f ? (g = tK(b.replace("#", ""))) : "history" === f && (g = ""), (h = new qK({ Ya: b, input: c, count: e, href: g }).element);
        }
        a.element.appendChild(h);
        var m = h.firstElementChild;
        m.onmouseenter = function () {
            BK(a);
            O(m, "active");
            var n = h.getAttribute("index");
            null !== n && (a.ta = parseInt(n, 10));
            a.mq = !1;
        };
        m.onmouseleave = function () {
            BK(a);
            yK(m);
            a.ta = -1;
            a.mq = !1;
        };
        a.ae.push({ label: b, element: m });
    }
    wK.prototype.uq = function (a) {
        if (0 < this.ae.length) {
            this.mq || (this.SJ = this.input.element.value);
            this.mq = !0;
            var b = this.ta;
            -1 < b && yK(this.ae[b].element);
            a: if ("Tab" === a.key)
                if (-1 < this.ta && this.ta <= this.Ul) {
                    if (a.shiftKey) {
                        if (0 === this.ta) {
                            CK(this);
                            this.input.element.value = this.SJ;
                            break a;
                        }
                        --this.ta;
                    } else {
                        if (this.ta === this.Ul) {
                            CK(this);
                            this.input.element.value = this.SJ;
                            break a;
                        }
                        this.ta += 1;
                    }
                    a.preventDefault();
                } else -1 !== this.ta || a.shiftKey || ((this.ta = 0), a.preventDefault());
            if ("ArrowDown" === a.key || 40 === a.keyCode) this.ta = this.ta + 1 <= this.Ul ? this.ta + 1 : 0;
            else if ("ArrowUp" === a.key || 38 === a.keyCode) (this.ta = 0 <= this.ta - 1 ? this.ta - 1 : this.Ul), a.preventDefault();
            a = this.ae[this.ta];
            if (void 0 !== a) {
                var c;
                b = null !== (c = a.element.getAttribute("class")) && void 0 !== c ? c : "";
                void 0 !== b && (this.input.element.value = b.includes("hashtag_suggestion") ? "#" + a.label : a.label);
                O(a.element, "active");
            }
            c = l(this.ae);
            for (a = c.next(); !a.done; a = c.next()) (a = a.value), a !== this.ae[this.ta] && yK(a.element);
        }
    };
    function DK(a, b) {
        if (a.hF) "" === a.input.element.value && zK(a);
        else {
            0 !== a.gA && window.clearTimeout(a.gA);
            var c = a.input.element.value.trim().replace(/^#/, "%23"),
                d = c.split(" "),
                e = function (f) {
                    return (
                        f.some(function (g) {
                            return 30 < g.length;
                        }) ||
                        6 < f.length ||
                        60 < c.length
                    );
                };
            c === a.hE || e(d)
                ? (e(d) && EK(a, c), b ? a.gr() : a.Xp())
                : (a.gA = window.setTimeout(function () {
                      a.QY = FK(a, b);
                  }, 250));
        }
    }
    function FK(a, b) {
        return Wy(a, function d() {
            var e = this,
                f,
                g,
                h;
            return Aa(d, function (m) {
                return 1 == m.aa
                    ? ((f = e),
                      (g = e.input.element.value),
                      (h = g.trim().replace(/^#/, "%23")),
                      (e.gA = 0),
                      "" === g
                          ? ((e.hE = void 0), EK(e, g), e.gr(), m.return())
                          : sa(
                                m,
                                C("ax/search/?keywords=" + h)
                                    .then(function (n) {
                                        if (f.input.element.value === g) {
                                            f.hE = h;
                                            EK(f, h);
                                            var p = f.ae.length,
                                                u = new H(n.responseText);
                                            uK.forEach(function (x) {
                                                var D = Pc(u, x);
                                                void 0 !== D &&
                                                    Object.keys(D).forEach(function (J) {
                                                        10 <= p || (AK(f, D[J], g, x, p), (f.Ul = p), (p += 1));
                                                    });
                                            });
                                            f.nF ? (f.nF = !1) : b ? f.gr() : f.Xp();
                                        }
                                    })
                                    .catch(function () {
                                        f.hF = !0;
                                        window.setTimeout(function () {
                                            f.hF = !1;
                                        }, 6e4);
                                        F("TooManySearchAutocompleteError");
                                        t("Too many autocomplete queries, wait before resuming", "inputSuggestions.ts", "searchBar");
                                    }),
                                2
                            ))
                    : m.return(m.td);
            });
        });
    }
    function EK(a, b) {
        zK(a);
        GK(a, b);
        a.Ul = a.ae.length - 1;
    }
    function GK(a, b) {
        if (Qa()) {
            aK();
            var c = 0;
            if (!Uu()) {
                var d = window.localStorage.getItem(YJ());
                null !== d &&
                    JSON.parse(d).forEach(function (e) {
                        void 0 !== e.content && e.content.includes(b.replace(/%23/g, "#").toLowerCase()) && ((c += 1), AK(a, e.content, b, "history", c, e.type));
                    });
            }
        }
    }
    wK.prototype.Xp = function () {
        BK(this);
        this.ha();
        CK(this);
    };
    function CK(a) {
        a.ta = -1;
        a.mq = !1;
    }
    function BK(a) {
        -1 < a.ta && a.ae.length > a.ta && yK(a.ae[a.ta].element);
    }
    wK.prototype.gr = function () {
        this.ae.length ? this.Ja() : this.ha();
    };
    function HK() {
        document.querySelectorAll("li.in_content_promo").forEach(function (a) {
            return a.remove();
        });
    }
    var IK = { padding: "6px", boxSizing: "border-box", display: "flex", flexDirection: "column", justifyContent: "space-between", alignItems: "center" };
    Object.assign(Object.assign({}, IK), { backgroundColor: "black" });
    Object.assign(Object.assign({}, IK), { backgroundColor: "white" });
    var JK = new y("reloadCheckboxes");
    var KK = { display: "inline-block", position: "relative" },
        LK = { position: "relative", overflow: "", width: "", height: "" },
        MK = { height: "", width: "", overflow: "", position: "relative", borderRadius: "3px", borderStyle: "solid", borderWidth: "1px", display: "inline-block", paddingRight: "23px", marginTop: "3px", right: "0px" },
        mK = new y("SearchBlur");
    function NK() {
        w.call(this);
        var a = this;
        this.Uq = "";
        this.element.id = "SearchInput";
        Q(this.element, KK);
        this.form = new w("form");
        this.form.element.method = "GET";
        this.form.element.action = "/";
        this.form.element.id = "filter_search_form";
        this.input = new w("input");
        this.input.element.name = "keywords";
        this.input.element.className = "search_input";
        this.input.element.type = "text";
        this.input.element.placeholder = "" + Ko;
        this.input.element.maxLength = 150;
        this.input.element.autocomplete = "off";
        this.input.element.id = "keywords";
        this.Uq = xc(new URLSearchParams(window.location.search).get("keywords"), "");
        this.input.element.value = this.Uq;
        Q(this.input.element, MK);
        this.delete = new w();
        O(this.delete.element, "inputDelete");
        this.form.G(this.input);
        Q(this.form.element, LK);
        this.G(this.form);
        this.form.G(this.delete);
        Q(this.delete.element, { visibility: "" !== this.input.element.value ? "visible" : "hidden" });
        this.input.element.oninput = function () {
            DK(a.Ae, !0);
            OK(a);
        };
        mK.g(function (d) {
            PK(a, d) ||
                window.setTimeout(function () {
                    a.Ae.Xp();
                }, 250);
        });
        this.input.element.onkeydown = function (d) {
            WJ(d)
                ? (d.preventDefault(), BK(a.Ae), (d = a.Ae), d.mq && -1 < d.ta && d.ae.length > d.ta ? ((d = a.Ae), d.ae[d.ta].element.click()) : a.Ut())
                : "ArrowDown" === d.key || "ArrowUp" === d.key || "Tab" === d.key
                ? a.Ae.uq(d)
                : d.shiftKey || "Tab" === d.key || (BK(a.Ae), CK(a.Ae));
            OK(a);
        };
        this.input.element.onfocus = function (d) {
            PK(a, d) && (OK(a), DK(a.Ae, !0));
        };
        this.input.element.onblur = function (d) {
            mK.h(d);
        };
        this.delete.element.onmousedown = function (d) {
            d.ctrlKey || d.metaKey || 2 === d.button || ((a.input.element.value = ""), OK(a), mb() && (OK(a), DK(a.Ae, !0)), a.input.element.focus(), DK(a.Ae, !0), d.preventDefault(), d.stopImmediatePropagation());
        };
        this.TK();
        this.form.G(this.Ae);
        if ("" !== this.input.element.value) {
            DK(this.Ae, !1);
            var b = this.input.element.value.trim(),
                c = window.location.pathname;
            1 <= b.length && (c.includes("/tag/") && c.includes(b.replace(/#/g, "")) ? (ZJ(b, "hashtags"), yc(new Map([["keywords", ""]]))) : ZJ(b, "history"));
        }
    }
    q(NK, w);
    NK.prototype.TK = function () {
        this.Ae = new wK(this.input, this);
    };
    function OK(a) {
        "" !== a.input.element.value ? Q(a.delete.element, { visibility: "visible" }) : Q(a.delete.element, { visibility: "hidden" });
    }
    NK.prototype.Ut = function () {
        0 === this.input.element.value.trim().length && (this.input.element.value = "");
        OK(this);
        var a = xc(this.input.element.value, "");
        this.Ae.Xp();
        this.Uq = 2 > a.length ? "" : a.trim();
        this.input.element.blur();
        ZJ(this.Uq, "history");
        QK(this);
    };
    function QK(a) {
        xK.h(a.input.element.value);
        yc(new Map([["keywords", a.Uq]]));
        a.Ae.nF = !0;
        window.setTimeout(function () {
            a.Ae.nF = !1;
        }, 400);
        JK.h(void 0);
        Bx(yx(), function () {
            "" !== a.input.element.value && HK();
        });
    }
    function PK(a, b) {
        return a.element.contains(document.activeElement) || a.input.element === document.activeElement || (b.relatedTarget instanceof Node && a.element.contains(b.relatedTarget));
    }
    var xK = new y("onSubmit");
    var RK = { display: "none", top: "26px", width: "100%", right: "-1px", overflow: "" };
    function SK(a, b) {
        wK.call(this, a, b);
        a = document.getElementById("mobile_advanced_options_container");
        null !== a && (this.SL = a);
        Q(this.element, RK);
    }
    q(SK, wK);
    SK.prototype.Xp = function () {
        wK.prototype.Xp.call(this);
        Q(this.SL, { overflow: "hidden" });
    };
    SK.prototype.gr = function () {
        wK.prototype.gr.call(this);
        Q(this.SL, { overflow: "visible" });
    };
    var TK = { overflow: "", width: "100%", display: "block", zIndex: 106 },
        UK = { width: "23px", height: "23px", display: "block", position: "absolute", top: "13%", right: "2px", backgroundPosition: "50% top", backgroundSize: "14px 14px" };
    function VK() {
        NK.call(this);
        var a = this;
        Q(this.element, TK);
        Q(this.delete, UK);
        var b = V(
            "button",
            {
                className: "submit",
                onClick: function (c) {
                    c.preventDefault();
                    a.Ut();
                },
            },
            "search"
        );
        this.form.element.appendChild(b);
        WK(this);
    }
    q(VK, NK);
    VK.prototype.TK = function () {
        this.Ae = new SK(this.input, this);
    };
    VK.prototype.Ut = function () {
        NK.prototype.Ut.call(this);
        WK(this);
    };
    function WK(a) {
        var b = document.querySelector("#mobile-sort-container");
        b && (b.style.display = "" !== a.Uq ? "none" : "block");
    }
    var XK = new y("showSearchingOverlay"),
        YK = new y("updateShowLocation");
    function ZK(a) {
        a = void 0 === a ? !1 : a;
        w.call(this, zd());
        var b = this;
        this.nb = a;
        this.dr = this.Un = !1;
        this.PS = new y("regionsChanged");
        this.uk = new Vd("hpfilter1").active || new Vd("hpfilter2").active || new Vd("hpfilter3").active;
        this.open = function () {
            b.Ja();
            F("RoomsFilterOpened");
        };
        this.close = function () {
            b.ha();
            F("RoomsFilterClosed");
        };
        this.toggle = function () {
            b.La() ? b.ha() : b.Ja();
            F("AdvancedSearchOptionsClicked");
        };
        this.mB = function () {
            var c = document.querySelectorAll(".advanced_search_region"),
                d = document.querySelector("#main");
            null !== d &&
                c.forEach(function (e) {
                    e.onclick = function () {
                        b.Ja();
                        fb().scrollTop > d.offsetTop && (window.location.href = "#main");
                    };
                });
        };
        this.NN = function () {
            b.dr = null !== b.Vj ? b.Vj.checked : !1;
        };
        this.qE = document.querySelector("#main .content");
        $K(this);
        aL(this);
        this.uk && bL(this);
        cL(this);
        dL(this);
        this.mB();
        eL(this);
        fL(this);
        gL();
        hL(this);
        iL();
        jL(this);
        kL(this);
        lL(this);
        xx(yx(), this.mB);
        this.Un && (ox = this.dr);
        mL(this);
        XK.g(function (c) {
            c ? nL(b) : oL(b);
        });
        !this.nb && new Vd("GdrChkbx6").active && ((a = document.querySelector(".advanced-search-button-container")), null !== a && iw(a, "right", 4, 15, 500, 600));
    }
    q(ZK, w);
    function pL(a, b) {
        a.onmouseover = function () {
            a.style.display = "block";
        };
        a.onmouseout = function () {
            window.setTimeout(function () {
                a.matches(":hover") || b.matches(":hover") || (a.style.display = "none");
            }, 75);
        };
        b.onmouseover = function () {
            a.style.display = "block";
        };
        b.onmouseout = function () {
            window.setTimeout(function () {
                a.matches(":hover") || b.matches(":hover") || (a.style.display = "none");
            }, 75);
        };
    }
    function qL(a, b, c) {
        c.style.cursor = "default";
        c.style.opacity = "0.5";
        b.style.cursor = "default";
        var d = nw({ content: fn, hasHTML: "true", width: "auto", divotPosition: "0", divotLeftOrTop: "40px" });
        O(d, "disabledTooltipColor");
        Q(d, { marginTop: "5px", marginLeft: "42px", borderWidth: "1px", borderStyle: "solid", borderRadius: "4px", boxShadow: "0px 0px 16px rgba(0,0,0,0.16)" });
        var e = d.querySelector(".divotTop"),
            f = d.querySelector(".divotBorder"),
            g = d.querySelector(".divotBackground");
        null !== e && null !== f && null !== g && (Q(e, { top: "-5px" }), Q(f, { borderWidth: "4px" }), Q(g, { borderWidth: "5px", top: "1px", left: "-1px" }));
        a.uk && ((d.style.left = "-28px"), (d.style.width = "171px"));
        pL(d, c);
        b.readOnly = !0;
        b.onclick = function () {};
        return d;
    }
    function rL(a, b, c) {
        var d;
        c.style.cursor = "default";
        c.style.opacity = "0.5";
        b.style.cursor = "default";
        var e = nw({ content: Se(null === (d = A.current) || void 0 === d ? void 0 : d.Ub.SUPPORTER_SOURCE_PREVIEW_ROOMS_UPSELL), hasHTML: "true", width: "auto", divotPosition: "0", divotLeftOrTop: "40px" });
        d = e.querySelector("a");
        null !== d &&
            (d.onclick = function () {
                F("SupporterPageOpened", { source: "AnimateRoomImagesTooltip" });
            });
        O(e, "disabledTooltipColor");
        Q(e, { marginTop: "5px", marginLeft: "42px", borderWidth: "1px", borderStyle: "solid", borderRadius: "4px", boxShadow: "0px 0px 16px rgba(0,0,0,0.16)" });
        d = e.querySelector(".divotTop");
        var f = e.querySelector(".divotBorder"),
            g = e.querySelector(".divotBackground");
        null !== d && null !== f && null !== g && (Q(d, { top: "-5px" }), Q(f, { borderWidth: "4px" }), Q(g, { borderWidth: "5px", top: "1px", left: "-1px" }));
        a.uk && ((e.style.left = "-28px"), (e.style.width = "171px"));
        pL(e, c);
        b.readOnly = !0;
        b.onclick = function () {};
        return e;
    }
    function bL(a) {
        var b = document.querySelector("#filter_gender_form");
        null !== b &&
            ((b.onchange = function () {
                sL(a, b);
            }),
            b.querySelectorAll("input[type=checkbox]").forEach(function (c) {
                v("change", c, function () {
                    F("RoomsFilterGenderClicked", { gender: c.value, checked: c.checked });
                });
            }));
    }
    function cL(a) {
        var b = document.querySelector("#filter_location_form");
        null !== b &&
            ((b.onchange = function () {
                sL(a, b);
            }),
            b.querySelectorAll("input[type=checkbox]").forEach(function (c) {
                v("change", c, function () {
                    a.PS.h(void 0);
                    F("RoomsFilterRegionClicked", { region: c.value, checked: c.checked });
                });
            }));
    }
    function dL(a) {
        var b = document.querySelector("#filter_options_form");
        null !== b &&
            (b.onchange = function () {
                sL(a, b);
            });
    }
    function $K(a) {
        var b = document.querySelector("#animate_thumbnails_form");
        a.Vj = document.querySelector("#id_animate_thumbnails");
        if (
            null !== b &&
            null !== a.Vj &&
            (a.Vj.disabled || (a.Un = !0),
            (a.dr = a.Vj.checked),
            (a.Vj.onchange = function () {
                a.Un && (sL(a, b), void 0 !== document.setAnimateFollowedTab && document.setAnimateFollowedTab(a.dr));
            }),
            ((a.Un ? a.Vj : b).onclick = function () {
                var d;
                F("AnimateRoomImagesClicked", { checked: null === (d = a.Vj) || void 0 === d ? void 0 : d.checked });
            }),
            !a.Un)
        ) {
            var c = b.querySelector("label[for='id_animate_thumbnails']");
            null !== c && ((c = rL(a, a.Vj, c)), b.appendChild(c));
        }
    }
    function lL(a) {
        if (a.uk) {
            var b = document.querySelector(".collapse-filters");
            document.querySelector(".expand-filters").onclick = a.open;
            b.onclick = a.close;
        } else (b = document.querySelector(".advanced_search_button")), null !== b && (b.onclick = a.toggle);
    }
    function tL(a) {
        a.Ja();
        var b = document.querySelector("label[for='id_enable_floatingplayer']");
        if (null !== b) {
            var c = b.style.color;
            b.style.color = "#ff6b00";
            a.uk &&
                window.setTimeout(function () {
                    yc(new Map([["advanced_options", ""]]));
                    b.scrollIntoView({ behavior: "auto", block: "center", inline: "center" });
                }, 500);
            a.AJ.onclick = function () {
                b.style.color = c;
            };
        }
    }
    function aL(a) {
        var b = document.querySelector("#floatingplayer_options_form");
        if (null !== b) {
            a.AJ = b;
            window.location.search.includes("advanced_options") && tL(a);
            var c = document.querySelector("#id_enable_floatingplayer");
            null !== c &&
                (c.onchange = function () {
                    E(b.action, new FormData(a.AJ))
                        .then(function () {
                            var d = c.checked;
                            F("EnableFloatingPlayerOption", { isEnabled: d });
                            d ? void 0 !== document.enableFloatingPlayer && document.enableFloatingPlayer() : void 0 !== document.disableFloatingPlayer && document.disableFloatingPlayer();
                        })
                        .catch(function () {});
                });
        }
    }
    function nL(a) {
        clearTimeout(a.CM);
        document.querySelectorAll(".searching-overlay").forEach(function (b) {
            uL(b);
            b.style.display = "block";
        });
    }
    function oL(a) {
        var b = document.querySelectorAll(".searching-overlay");
        b.forEach(function (c) {
            uL(c);
        });
        clearTimeout(a.CM);
        a.CM = window.setTimeout(function () {
            b.forEach(function (c) {
                c.style.display = "none";
            });
        }, 300);
    }
    function sL(a, b) {
        a.NN();
        XK.h(!0);
        E(b.action, new FormData(b))
            .then(function () {
                a.Un && (ox = a.dr);
                a.mB();
                mL(a);
                Bx(yx(), function () {
                    XK.h(!1);
                    vL();
                });
            })
            .catch(function () {});
    }
    function uL(a) {
        var b = a.nextElementSibling;
        if (null !== b) {
            if ("discover_root" !== b.id) {
                var c = b.querySelector(".list");
                null === c && (c = b.lastElementChild);
                b = null === c ? void 0 : c;
            }
        } else b = void 0;
        c = b;
        if (void 0 !== c) {
            var d = c.getBoundingClientRect().width;
            b = c.getBoundingClientRect().height;
            a.style.height = b + "px";
            a.style.left = c.offsetLeft + "px";
            a.style.top = c.offsetTop + "px";
            a.style.right = document.documentElement.clientWidth - c.offsetLeft - d + "px";
            a.style.lineHeight = b + "px";
            a = a.querySelector(".searching-overlay-spinner");
            null !== a &&
                (50 > b
                    ? (a.classList.add("searching-overlay-spinner-very-small"), a.classList.remove("searching-overlay-spinner-small"), a.classList.remove("searching-overlay-spinner-medium"))
                    : 50 <= b && 200 > b
                    ? (a.classList.remove("searching-overlay-spinner-very-small"), a.classList.add("searching-overlay-spinner-small"), a.classList.remove("searching-overlay-spinner-medium"))
                    : 200 <= b && 550 > b
                    ? (a.classList.remove("searching-overlay-spinner-very-small"), a.classList.remove("searching-overlay-spinner-small"), a.classList.add("searching-overlay-spinner-medium"))
                    : (a.classList.remove("searching-overlay-spinner-very-small"), a.classList.remove("searching-overlay-spinner-small"), a.classList.remove("searching-overlay-spinner-medium")));
        }
    }
    function fL(a) {
        var b = document.querySelector("#filter_options_form"),
            c = document.querySelector("#id_enable_recommendations"),
            d = !1;
        if (null !== b) {
            null !== c &&
                ((c.onchange = function () {
                    F("EnableRecommendationsOptionClicked", { isEnabled: c.checked });
                }),
                c.disabled || (d = !0));
            var e = b.querySelector("label[for='id_enable_recommendations']");
            d || null === c || null === e || ((a = qL(a, c, e)), b.appendChild(a));
        }
    }
    function eL(a) {
        var b = document.querySelector("#refresh_cams_form");
        null !== b &&
            (b.onchange = function () {
                var c = b.querySelector("#id_refresh_frequency");
                if (null !== c) {
                    var d = parseInt(c.value);
                    a.NN();
                    E(b.action, new FormData(b))
                        .then(function () {
                            F("RefreshFrequencyChanged", { seconds: d });
                            a.Un && (ox = a.dr);
                            Cx(d);
                        })
                        .catch(function () {});
                }
            });
    }
    ZK.prototype.Ja = function () {
        this.La() || (this.uk ? (this.qE.classList.remove("collapsed"), Qa() && localStorage.setItem("homepageFiltersCollapsed", "false")) : this.element.classList.remove("collapsed"));
    };
    ZK.prototype.ha = function () {
        this.La() && (this.uk ? (this.qE.classList.add("collapsed"), Qa() && localStorage.setItem("homepageFiltersCollapsed", "true")) : this.element.classList.add("collapsed"));
    };
    ZK.prototype.La = function () {
        return this.uk ? !this.qE.classList.contains("collapsed") : !this.element.classList.contains("collapsed");
    };
    function mL(a) {
        if (a.uk) {
            a = wL("#filter_gender_form input[type=checkbox]:checked");
            var b = wL("#filter_gender_form input[type=checkbox]"),
                c = wL("#filter_location_form input[type=checkbox]:checked"),
                d = wL("#filter_location_form input[type=checkbox]");
            yc(
                new Map([
                    ["g", a === b ? "" : a.replace("s", "t")],
                    ["r", c === d ? "" : c],
                ])
            );
        }
    }
    function hL(a) {
        var b = a.element.querySelector(".show-type");
        null !== b &&
            v("change", b, function () {
                F("RoomsFilterShowTypeChanged", { showType: b.options[b.selectedIndex].text.toLowerCase().split(" ")[0] });
                window.location.href = b.value;
            });
    }
    function iL() {
        document.querySelectorAll("#hashtag_ticker a").forEach(function (a) {
            v("click", a, function () {
                F("RoomsFilterTagsClicked", { tagName: a.textContent });
            });
        });
    }
    function jL(a) {
        if (a.nb) {
            a = new VK();
            var b = document.getElementById("SearchInputEntry");
            null !== b && b.appendChild(a.element);
        }
        var c = document.querySelector(".search_input");
        a = document.querySelector("#search_icon");
        b = document.querySelector(".suggestionsDiv");
        if (null !== c && null !== a && null !== b) {
            var d = function () {
                F("RoomsFilterSearchClicked", { keyword: c.value });
            };
            [a, b].forEach(function (e) {
                v(
                    "click",
                    e,
                    function () {
                        d();
                    },
                    !0
                );
            });
            [c, a, b].forEach(function (e) {
                v(
                    "keydown",
                    e,
                    function (f) {
                        WJ(f) && d();
                    },
                    !0
                );
            });
        }
    }
    function kL(a) {
        if (!a.nb) {
            var b = V("img", {
                style: { position: "absolute", height: "12px", width: "14px", right: "16px", top: "13px", cursor: "pointer" },
                src: "https://static-assets.highwebmedia.com/tsdefaultassets/option_close.svg",
                onClick: a.toggle,
            });
            a.element.appendChild(b);
        }
    }
    function gL() {
        var a = document.querySelector("#id_show_location");
        null !== a &&
            v("change", a, function () {
                F("ShowLocationClicked", { checked: a.checked });
                YK.h(a.checked);
            });
    }
    function wL(a) {
        return Array.from(document.querySelectorAll(a))
            .filter(function (b) {
                return null !== b.parentElement && -1 === b.parentElement.className.indexOf("transparentCheckbox");
            })
            .map(function (b) {
                return b.value;
            })
            .join(",");
    }
    function vL() {
        if (new Xd(["SmplCrd3T1", "SmplCrd3T2", "SmplCrd3T3", "SmplCrd3T4"], "RmCrdOvrhl").active) {
            var a = document.querySelectorAll(".broadcaster-cell");
            if (0 < a.length) {
                var b = a[0].getBoundingClientRect();
                0 < b.width &&
                    a.forEach(function (c) {
                        c.style.width = b.width + "px";
                        c.style.height = 0.75 * b.width + "px";
                    });
            }
        }
    }
    var xL = "";
    function yL(a) {
        this.dF(a);
        A.current = this.context;
        this.Bc();
        if (!0 === A.current.Fw && void 0 === A.current.DU) {
            a = new Vd("DrkSysStngsV3");
            var b = window.matchMedia("(prefers-color-scheme: dark)").matches;
            b && a.Co();
            a.active && (b ? bc("sys_color_settings", "darkmode", 60) : bc("sys_color_settings", "lightmode", 60));
        }
    }
    k = yL.prototype;
    k.dF = function (a) {
        var b, c, d;
        var e = a.logged_in_user,
            f;
        var g =
            null !== e
                ? {
                      username: e.username,
                      nc: e.gender,
                      bv: null !== (f = e.subgender) && void 0 !== f ? f : void 0,
                      wk: e.is_supporter,
                      iq: e.is_staff,
                      ob: e.token_balance,
                      yc: e.user_uid,
                      dU: e.signed_username,
                      tb: e.is_age_verified,
                      Qb: e.is_broadcasting,
                      YY: e.total_followed,
                      Wf: e.online_followed,
                  }
                : void 0;
        e = a.current_logo;
        f = a.is_mobile;
        var h = a.sample_metrics_off,
            m = a.quality_message,
            n = a.animate_thumbnails;
        var p = a.social_auths;
        if (void 0 !== p) {
            var u = [];
            p = l(JSON.parse(p));
            for (var x = p.next(); !x.done; x = p.next()) (x = x.value), u.push({ qm: x[0], name: x[1] });
        } else u = void 0;
        this.context = {
            qQ: e,
            nb: f,
            xT: h,
            Mk: m,
            V: g,
            lP: n,
            fO: u,
            uF: ot(a),
            oj: !1,
            Fw: a.dark_mode_enabled,
            DU: a.theme_name,
            wX: a.chat_settings.max_pm_age,
            NM: null !== (b = a.pm_photos_enabled) && void 0 !== b ? b : !1,
            Ro: null !== (c = a.sitewide_pms_enabled) && void 0 !== c ? c : !1,
            JI: a.entrypoint_context_id,
            XI: a.csrftoken,
            Bs: !0 === a.offline_room_chat_pm_enabled,
            jL: void 0,
            CY: null !== (d = a.show_paxum_notice) && void 0 !== d ? d : !1,
            hz: !0 === a.realtime_userlist_enabled,
            QW: a.INTERNAL,
            EM: "homepage",
            Ub: a.PurchaseEventSources,
        };
        ox = this.context.lP;
        Qa() && ((b = window.localStorage.getItem("contextID")), window.localStorage.setItem("contextID", this.context.JI), (this.context.jL = b === this.context.JI));
        xL = a.language_code;
    };
    k.Bc = function () {
        VJ();
        !0 === this.context.NM && (uH = !0);
        this.roomReload = { addOnLoadHandler: Ex, loadRooms: Fx, scheduleRefresh: Gx, chatRoomListOnClick: Ix, startStreaming: Kx, stopStreaming: Lx, clearRefresh: Hx, setRoomAnimation: Jx };
        this.addPageAction = F;
        this.context.nb ? (zL(!0), AL(!0), fJ(), new ZK(!0), BL(this), CL(), (this.showLoginOverlay = Su)) : DL(this);
        var a = history.length.toString();
        try {
            void 0 !== Cc && Cc.setCustomAttribute("history_length", a);
        } catch (b) {
            r("New Relic Error in setCustomAttribute: " + b, "newrelic.ts", "common");
        }
    };
    function DL(a) {
        EL(a);
        var b = zL(!1),
            c = AL(!1);
        BL(a);
        FL(a);
        a.Yv();
        a.oK();
        GL(a);
        HL();
        IL();
        JL();
        if (oE()) {
            var d = document.querySelector(".right_section");
            if (null !== d)
                gw.once(function () {
                    d.classList.add("visible");
                });
            KL(c, b);
        }
        CL();
        LL();
        void 0 === a.context.V && ("/auth/login/" !== window.location.pathname && a.fG(), void 0 !== Bc(window.location.search).join_overlay && "/accounts/register/" !== window.location.pathname && ML());
        NL();
        OL();
        a.displayLoginOverlay = Su;
        a.openFeedbackForm = function (e) {
            nE.h({ source: e });
        };
        a.showModal = Mx;
    }
    k.Sn = function () {
        CJ();
    };
    function ML() {
        oJ();
        iJ.h(void 0);
        var a;
        gJ.g(function (b) {
            void 0 === a && (a = new hJ());
            window.scrollTo(0, 0);
            a.nj(b);
        });
    }
    function NL() {
        nE.g(function (a) {
            void 0 === PL && (PL = new QL());
            var b = PL,
                c = b.form;
            c.source.value = a.source;
            RL(c);
            void 0 !== a.Ko && b.form.Ko.vh(a.Ko);
            b.show();
        });
    }
    k.fG = function () {
        for (var a = l(document.querySelectorAll("a.login-link")), b = a.next(); !b.done; b = a.next())
            b.value.onclick = function (c) {
                Su({});
                c.preventDefault();
            };
    };
    k.oK = function () {
        v("popstate", window, function (a) {
            void 0 !== a.state && null !== a.state && location.reload();
        });
    };
    function EL(a) {
        var b = document.querySelector("#userInfoPanelMenuDropdownRoot"),
            c = oE() ? "user_information_header" : "user_information_profile_container";
        c = document.getElementById(c);
        null !== b && null !== c && ((a = new aJ(c, void 0 !== a.context.V ? a.context.V.username : "", a.context.Fw)), b.appendChild(a.element), a.R());
    }
    function zL(a) {
        a = void 0 === a ? !1 : a;
        var b = document.querySelector("#userUpdatesBellRoot"),
            c = document.querySelector("#userUpdatesMenuDropdownRoot"),
            d = document.querySelector("#mmnav");
        if (!xe.lq && null !== b && null !== c) {
            if (void 0 === a ? 0 : a) {
                var e = new vE(b);
                void 0 !== d && null !== d && sE(e, d);
            } else e = new pE(b);
            c.appendChild(e.zC.element);
        }
        return e;
    }
    function AL(a) {
        var b = document.querySelector("#userUpdatesBellRoot"),
            c = document.querySelector("#pmListDropdownRoot"),
            d = document.querySelector("#pmListIconRoot"),
            e = document.querySelector("#mmnav");
        if (void 0 === a ? 0 : a) null !== d && null !== c && c.appendChild(new VI({ yo: d, fH: b, mx: e }).element);
        else {
            if (null !== d && null !== c) {
                var f = new kI({ Dd: d });
                c.appendChild(f.element);
            }
            return f;
        }
    }
    function BL(a) {
        for (var b = l(document.querySelectorAll(".purchase_tokens a, a.purchase_tokens")), c = b.next(); !c.done; c = b.next())
            (c = c.value),
                void 0 !== a.context.V
                    ? yB(c)
                    : (c.onclick = function (d) {
                          Su({});
                          d.preventDefault();
                      });
    }
    function OL() {
        if (window.hasOwnProperty("ReportingObserver")) {
            var a = function (c) {
                    c = l(c);
                    for (var d = c.next(); !d.done; d = c.next()) (d = d.value), "intervention" === d.type && F("AdIntervention", { report: JSON.stringify(d.body) });
                },
                b = new window.ReportingObserver(
                    function (c) {
                        a(c);
                    },
                    { buffered: !0 }
                );
            b.observe();
            v("beforeunload", window, function () {
                var c = b.takeRecords();
                a(c);
            });
        }
    }
    function FL(a) {
        var b = document.getElementById("followed_anchor");
        if (null !== b && b instanceof HTMLAnchorElement) {
            b.onclick = function (d) {
                d.ctrlKey || d.metaKey || d.preventDefault();
            };
            var c = document.getElementById("followed_tab");
            b = null !== c && (new Vd("hpfilter1").active || new Vd("hpfilter2").active) ? c : b;
            new pJ(b, void 0 === a.context.V, void 0 !== a.context.V ? a.context.V.username : "");
        }
    }
    function IL() {
        var a = document.querySelector("#header");
        null !== a && a instanceof HTMLElement && new tJ(a);
    }
    function JL() {
        var a = document.querySelector(".footer-holder");
        null !== a && a instanceof HTMLElement && new sJ(a);
    }
    function LL() {
        function a(b, c) {
            var d = {};
            b = l(document.querySelectorAll(b + " input[type='checkbox']"));
            for (var e = b.next(); !e.done; d = { Mi: d.Mi, ol: d.ol }, e = b.next())
                (e = e.value),
                    (d.Mi = e),
                    (d.ol = new qv(16, d.Mi.checked)),
                    (d.ol.element.style.top = "4px"),
                    d.ol.Lo(
                        (function (f) {
                            return function () {
                                f.Mi.click();
                            };
                        })(d)
                    ),
                    void 0 !== c && Q(d.ol, c),
                    (e = e.parentNode),
                    null !== e &&
                        (e.insertBefore(d.ol.element, d.Mi),
                        (d.Mi.style.display = "none"),
                        d.Mi.disabled && d.ol.disable(),
                        v(
                            "change",
                            d.Mi,
                            (function (f) {
                                return function () {
                                    f.Mi.disabled || pv(f.ol, f.Mi.checked);
                                };
                            })(d)
                        ));
        }
        a("#filter_gender_form");
        a("#filter_location_form");
        a("#filter_options_form");
        a("#animate_thumbnails_form");
        a("#floatingplayer_options_form");
        new Vd("GdrChkbx6").active && a("#checkable_gender_form", { boxSizing: "border-box", top: "3px" });
    }
    function GL(a) {
        var b,
            c = window.location.pathname.startsWith("/staff_tools"),
            d = document.getElementById("header");
        null === d || null === d.offsetParent || c || ((!0 === (null === (b = a.context.V) || void 0 === b ? void 0 : b.iq) || (void 0 !== a.context.V && A.current.Ro)) && SL(a.context.V.username));
    }
    function HL() {
        var a;
        HI.g(function (b) {
            void 0 === a && (a = new KI());
            a.nj(b);
        });
    }
    k.Yv = function () {
        var a,
            b = (a = void 0 === a ? !1 : a) ? "broadcasters" : "room_list",
            c = document.querySelector("div.icon_not_following"),
            d = document.querySelector("div.icon_following");
        null === document.querySelector("#" + b) || (null === c && null === d) || new OJ(void 0 === this.context.V, b, a);
    };
    function CL() {
        var a,
            b = null === (a = A.current.V) || void 0 === a ? void 0 : a.yc;
        void 0 !== b &&
            new Tt(b).ea.g(function (c) {
                WA.h(c);
                wB(c.Ua);
            });
    }
    function KL(a, b) {
        if (void 0 !== a && void 0 !== b) {
            var c = document.querySelector(".right_section"),
                d = function (e, f, g) {
                    void 0 !== e && null !== c && ((e = e.element), c.offsetWidth >= f ? ((e.style.left = "0"), (e.style.right = "auto")) : ((e.style.left = "auto"), (e.style.right = g + "px")));
                };
            d(a, 304, 0);
            d(b.zC, 249, 2);
            gw.g(function () {
                d(a, 304, 0);
                d(b.zC, 249, 2);
            });
        }
    }
    window.TS = yL;
    var TL = { marginLeft: "8px", verticalAlign: "middle", fontSize: "14px" },
        UL = { marginLeft: "10px", fontSize: "14px" };
    function VL() {
        w.call(this);
        this.element = V(
            "form",
            { className: "subgenderModal", style: { position: "relative" } },
            V("p", { style: UL }, Wp),
            V("p", { style: UL }, Xp),
            V("div", { style: { margin: "5px" } }, V("input", { type: "radio", name: "subgender", id: "subgender1", value: "tf", checked: !0 }), V("label", { style: TL, htmlFor: "subgender1" }, Yp)),
            V("div", { style: { margin: "5px" } }, V("input", { type: "radio", name: "subgender", id: "subgender2", value: "tm" }), V("label", { style: TL, htmlFor: "subgender2" }, Zp)),
            V("div", { style: { margin: "5px" } }, V("input", { type: "radio", name: "subgender", id: "subgender3", value: "tn" }), V("label", { style: TL, htmlFor: "subgender3" }, $p))
        );
    }
    q(VL, w);
    function WL(a, b) {
        var c;
        a = new H(a);
        b = {
            Kc: {
                username: b,
                nW: N(a, "fan_club_cost", !1),
                pj: M(a, "fan_club_is_member"),
                Sl: M(a, "performer_has_fanclub"),
                oW: L(a, "fan_club_join_url") + "?source=" + (null === (c = A.current) || void 0 === c ? void 0 : c.Ub.SUPPORTER_SOURCE_JOIN_FAN_CLUB_BUTTON),
                location: L(a, "location"),
                Mx: Zc(a, "interested_in"),
                gz: L(a, "real_name"),
                wi: vc(L(a, "sex")),
                bv: vc(L(a, "subgender")),
                SC: N(a, "follower_count"),
                Fb: N(a, "display_age", !1),
                aw: L(a, "body_decorations"),
                Kw: L(a, "display_birthday", !1),
                yt: K(a, "time_since_last_broadcast"),
                Sz: L(a, "smoke_drink"),
                cw: L(a, "body_type"),
                languages: L(a, "languages"),
                sa: L(a, "room_status"),
                tj: M(a, "needs_supporter_to_pm"),
            },
            Hv: L(a, "about_me"),
            LA: L(a, "wish_list"),
            $t: (function (d) {
                var e = [];
                d = l(JSON.parse(d));
                for (var f = d.next(); !f.done; f = d.next())
                    (f = new H(JSON.stringify(f.value))),
                        e.push({
                            id: N(f, "id"),
                            name: L(f, "name"),
                            ds: L(f, "cover_url"),
                            Ua: N(f, "tokens"),
                            Xb: M(f, "is_video"),
                            Cr: M(f, "video_has_sound"),
                            sd: M(f, "user_can_access"),
                            Gp: M(f, "fan_club_only"),
                            Ya: L(f, "label_text"),
                            Tf: L(f, "label_color"),
                            nm: M(f, "pending_approval", !1, !1),
                            cH: M(f, "user_has_purchased"),
                        }),
                        ad(f);
                return e;
            })(Zc(a, "photo_sets")),
            Tz: (function (d) {
                var e = [];
                d = l(JSON.parse(d));
                for (var f = d.next(); !f.done; f = d.next())
                    (f = new H(JSON.stringify(f.value))), e.push({ id: N(f, "id"), qA: L(f, "title_name"), pk: L(f, "image_url"), Ua: N(f, "tokens"), jY: M(f, "purchased"), Ya: L(f, "label_text"), Tf: L(f, "label_color") }), ad(f);
                return e;
            })(Zc(a, "social_medias")),
            wW: (function (d) {
                if (void 0 !== d) return { description: d.description, aK: d.game_url, image: d.image_64x64, name: d.name, uid: d.uid, Oc: d.viewers };
            })(Xc(a, "game_selection")),
        };
        ad(a);
        F("BioLoaded");
        return b;
    }
    function XL(a) {
        return new Promise(function (b, c) {
            C("api/biocontext/" + a + "/")
                .then(function (d) {
                    b(WL(d.responseText, a));
                })
                .catch(function (d) {
                    c(d);
                });
        });
    }
    function YL(a, b) {
        F("PhotoSetClicked", { source: b, photoset_id: a.id, cost: a.Ua, is_video: a.Xb });
    }
    function ZL(a, b, c) {
        c = void 0 === c ? !1 : c;
        var d = void 0 === d ? !1 : d;
        a = a.getElementsByTagName("*");
        b.style.position = "relative";
        b = {};
        a = l(a);
        for (var e = a.next(); !e.done; b = { Ug: b.Ug, Ni: b.Ni }, e = a.next())
            (b.Ug = e.value),
                b.Ug instanceof HTMLElement &&
                    ("fixed" === b.Ug.style.position && (b.Ug.style.position = "absolute"),
                    (e = parseInt(b.Ug.style.zIndex)),
                    !isNaN(e) && 100 <= e && (b.Ug.style.zIndex = "99"),
                    c && $L(b.Ug),
                    d &&
                        "img" === b.Ug.tagName.toLowerCase() &&
                        ((b.Ni = b.Ug.cloneNode()),
                        (b.Ni.style.visibility = "hidden"),
                        document.body.appendChild(b.Ni),
                        (b.Ni.onload = (function (f) {
                            return function () {
                                f.Ug.style.height = 0.5 * f.Ni.offsetHeight + "px";
                                f.Ug.style.width = 0.5 * f.Ni.offsetWidth + "px";
                                document.body.removeChild(f.Ni);
                            };
                        })(b)),
                        (b.Ni.onerror = (function (f) {
                            return function () {
                                document.body.removeChild(f.Ni);
                            };
                        })(b))));
    }
    function $L(a) {
        null !== a.style.top && 0 > parseInt(a.style.top, 10) && (a.style.top = "0");
        null !== a.style.marginTop && 0 > parseInt(a.style.marginTop, 10) && (a.style.marginTop = "0");
        null !== a.style.left && 0 > parseInt(a.style.left, 10) && (a.style.left = "0");
        null !== a.style.marginLeft && 0 > parseInt(a.style.marginLeft, 10) && (a.style.marginLeft = "0");
    }
    function aM() {
        $B.call(this);
        var a = this;
        this.customSections = [];
        O(this.element, "BioContents");
        this.element.style.width = "100%";
        this.element.style.margin = "0 0 14px";
        this.nq.style.padding = "14px 14px 0";
        this.Uw.style.padding = "14px 14px 0";
        Nc.g(function (b) {
            a.Ck(b.A.j);
        });
        G.g(function (b) {
            a.Ck(b.A.j);
        });
        window.refreshSocials = function () {
            a.load();
        };
    }
    q(aM, $B);
    k = aM.prototype;
    k.Ck = function (a) {
        this.j = a;
        var b = void 0 === b ? {} : b;
        this.pathname = "api/biocontext/" + this.j + "/";
        this.params = b;
        this.load();
    };
    k.show = function () {
        this.element.style.display = "";
        this.element.style.height = "";
        this.element.style.minHeight = "325px";
        void 0 !== this.Nv && this.Nv();
        void 0 !== this.Ov && this.Ov();
        this.oG && this.load();
    };
    k.B = function () {
        this.element.style.height = "0";
        this.element.style.minHeight = "0";
        this.element.style.margin = "0";
    };
    k.L = function (a) {
        return WL(a, this.j);
    };
    k.wp = function () {
        $B.prototype.wp.call(this);
        bM(this);
    };
    function bM(a) {
        void 0 !== a.Ov && gw.removeListener(a.Ov);
        void 0 !== a.Nv && gw.removeListener(a.Nv);
    }
    function cM(a) {
        bM(a);
        a.Ov = iw(a.IR, ["width", "min-width"], 117, 150, 500, 600);
        a.Nv = iw(a.tU, ["margin-right", "padding-right"], 0, 14, 500, 530);
    }
    k.D = function () {
        for (var a = l(this.customSections), b = a.next(); !b.done; b = a.next()) ZL(b.value, this.Zv);
    };
    function dM(a, b, c) {
        c = void 0 === c ? !1 : c;
        var d = b.$t.filter(function (f) {
                return f.Xb;
            }),
            e = b.$t.filter(function (f) {
                return !f.Xb;
            });
        if (0 < d.length || c) (d = eM(d, b.Kc.username, "video")), a.cd.appendChild(d);
        if (0 < e.length || c) (b = eM(e, b.Kc.username)), a.cd.appendChild(b);
    }
    function aC(a, b) {
        var c = void 0 === c ? !1 : c;
        a.Zv = V("div", { style: { paddingLeft: "14px", overflow: "hidden" } });
        a.cd = V(
            "table",
            {
                style: { tableLayout: "fixed", width: "100%" },
                ref: function (e) {
                    a.tU = e;
                },
            },
            V(
                "tr",
                { style: { height: "1px" } },
                V("th", {
                    style: { width: "150px", minWidth: "150px" },
                    ref: function (e) {
                        a.IR = e;
                    },
                }),
                V("th", null)
            ),
            V(
                "tr",
                { style: { verticalAlign: "top" } },
                V(
                    "th",
                    { colSpan: 2 },
                    V("h1", {
                        colorClass: ["defaultColor", "bioHeader"],
                        style: { fontSize: "14.4px", fontFamily: "UbuntuMedium, Arial, Helvetica, sans-serif", fontWeight: "normal", margin: "10px 0 20px", lineHeight: "20px", textAlign: "left" },
                        ref: function (e) {
                            a.qa = e;
                        },
                    })
                )
            )
        );
        a.Zv.appendChild(a.cd);
        a.element.appendChild(a.Zv);
        cM(a);
        var d = b.Kc;
        a.j === d.username &&
            ((a.qa.innerText = vc(a.j) + "'s " + Yg),
            fM(a, d),
            1 <= b.Tz.length && ((d = gM(b.Tz, b.Kc.username)), a.cd.appendChild(d)),
            1 <= b.$t.length && dM(a, b, c),
            1 <= b.Hv.length && ((c = hM(b.Hv, Cg)), nJ(c), a.cd.appendChild(c), iM(a, c)),
            1 <= b.LA.length && ((b = hM(b.LA, Dg)), nJ(b), a.cd.appendChild(b), iM(a, b)),
            a.D());
    }
    function fM(a, b) {
        "" !== b.gz && a.cd.appendChild(jM(Hg, b.gz, !1));
        var c = a.cd,
            d = c.appendChild;
        var e = b.SC;
        e = jM(Ig, isNaN(e) ? "0" : e.toString(), !1);
        d.call(c, e);
        "" !== b.Kw && a.cd.appendChild(jM(Mg, b.Kw, !1));
        isNaN(b.Fb) || a.cd.appendChild(jM(Ng, b.Fb.toString(), !1));
        "A Couple" === b.wi ? a.cd.appendChild(jM(Kg, b.wi, !1)) : "Trans" === b.wi && b.bv ? a.cd.appendChild(jM(Jg, b.wi + " (" + b.bv + ")", !1)) : a.cd.appendChild(jM(Jg, b.wi, !1));
        if ("" !== b.Mx) {
            c = b.Mx;
            for (c = c.slice(1, c.length - 1); c.includes('"'); ) c = c.replace('"', "");
            c = c.split(",").join(", ");
            a.cd.appendChild(jM(Qg, c, !1));
        }
        "" !== b.location && a.cd.appendChild(jM(Rg, b.location, !1));
        void 0 !== b.yt && "" !== b.yt && a.cd.appendChild(jM(Tg, b.yt, !1));
        "" !== b.languages && a.cd.appendChild(jM(Sg, b.languages, !1));
        "" !== b.cw && a.cd.appendChild(jM(Og, b.cw, !1));
        "" !== b.Sz && a.cd.appendChild(jM(Wg, b.Sz, !1));
        "" !== b.aw && a.cd.appendChild(jM(Pg, b.aw, !1));
    }
    function gM(a, b) {
        function c(h) {
            var m = new lJ().anchor,
                n = "/socials/social_media/" + b + "/" + h.id;
            m.href = n;
            m.style.position = "relative";
            m.style.display = "inline-block";
            m.style.marginBottom = "17px";
            m.style.marginRight = "5px";
            m.style.cursor = "pointer";
            m.className = "userUpload socialMediaUpload";
            m.title = h.qA;
            sd(m);
            m.onclick = function () {
                uu(n, void 0, "resizable,dependent,scrollbars,height=700,width=700,top=" + (screen.height / 2 - 600) + ",left=" + (screen.width / 2 - 800));
                return !1;
            };
            var p = document.createElement("img");
            O(p, "previewBorder");
            p.src = h.pk;
            p.width = 150;
            p.height = 100;
            p.style.borderWidth = "1px";
            p.style.borderStyle = "solid";
            p.style.display = "block";
            p.style.borderRadius = "3%";
            p.style.display = "block";
            m.appendChild(p);
            p = document.createElement("span");
            O(p, "tokenText");
            p.innerText = h.Ya;
            p.style.backgroundColor = h.Tf;
            p.style.position = "absolute";
            p.style.top = "80px";
            p.style.right = "8px";
            p.style.fontSize = "9px";
            p.style.borderRadius = "2px";
            p.style.padding = "1px 3px";
            p.style.lineHeight = "12px";
            m.appendChild(p);
            p = document.createElement("div");
            O(p, "link");
            p.innerText = h.qA;
            p.style.fontSize = "14px";
            p.style.left = "0px";
            p.style.maxWidth = "145px";
            p.style.whiteSpace = "nowrap";
            p.style.textOverflow = "ellipsis";
            p.style.overflow = "hidden";
            p.style.lineHeight = "16px";
            p.style.textDecoration = "none";
            m.appendChild(p);
            return m;
        }
        for (var d = [], e = 0, f = l(a), g = f.next(); !g.done && 8 !== e; g = f.next()) d.push(c(g.value)), (e += 1);
        d.push(kM(b, 8 < a.length));
        a = jM(ni, d);
        O(a, "smContainer");
        return a;
    }
    function kM(a, b) {
        var c = document.createElement("div");
        c.style.marginBottom = "20px";
        if (b) {
            b = new lJ().anchor;
            var d = "/socials/social_media/list_popup/" + a + "/";
            O(b, "link");
            b.href = d;
            b.innerText = ji;
            b.style.fontSize = "14px";
            b.style.cursor = "pointer";
            sd(b);
            b.onclick = function (e) {
                uu(d, void 0, "resizable,dependent,scrollbars,height=600,width=800,top=" + screen.height / 2 + ",left=" + screen.width / 2);
                e.preventDefault();
            };
            c.appendChild(b);
        }
        return c;
    }
    function eM(a, b, c) {
        function d(m) {
            var n = new lJ().anchor;
            n.href = "/photo_videos/photoset/detail/" + b + "/" + m.id;
            n.target = "_blank";
            n.style.position = "relative";
            n.style.display = "inline-block";
            n.style.marginBottom = "17px";
            n.style.marginRight = "5px";
            n.style.cursor = "pointer";
            sd(n);
            n.className = "userUpload";
            qb() || (n.title = m.name);
            n.onclick = function (D) {
                YL(m, "BioTab");
                nv.h(m.id);
                D.preventDefault();
            };
            var p = document.createElement("img");
            O(p, "previewBorder");
            p.src = m.ds;
            p.width = 150;
            p.height = 100;
            p.style.borderWidth = "1px";
            p.style.borderStyle = "solid";
            p.style.display = "block";
            p.style.borderRadius = "3%";
            p.style.display = "block";
            n.appendChild(p);
            m.sd
                ? m.sd &&
                  m.cH &&
                  ((p = document.createElement("span")),
                  O(p, "purchasedBadge"),
                  (p.style.backgroundColor = "#6d85b5"),
                  (p.style.color = "#fff"),
                  (p.style.position = "absolute"),
                  (p.style.top = "80px"),
                  (p.style.right = "8px"),
                  (p.style.padding = "1px 3px"),
                  (p.style.lineHeight = "12px"),
                  (p.style.borderRadius = "2px"),
                  (p.style.fontSize = "9px"),
                  (p.textContent = Eg),
                  n.appendChild(p))
                : ((p = document.createElement("div")),
                  (p.style.width = "151px"),
                  (p.style.height = "101px"),
                  (p.style.borderRadius = "3%"),
                  (p.style.position = "absolute"),
                  (p.style.left = "0px"),
                  (p.style.top = "0px"),
                  (p.style.backgroundColor = "rgba(0, 0, 0, .55)"),
                  n.appendChild(p),
                  (p = document.createElement("img")),
                  (p.src = "https://static-assets.highwebmedia.com/tsdefaultassets/lock.svg"),
                  (p.width = 18),
                  (p.height = 18),
                  (p.style.marginLeft = "-9px"),
                  (p.style.marginTop = "-9px"),
                  (p.style.position = "absolute"),
                  (p.style.left = "50%"),
                  (p.style.top = "40%"),
                  (p.style.padding = "4px"),
                  (p.style.border = "none"),
                  n.appendChild(p),
                  "" !== m.Ya &&
                      ((p = document.createElement("span")),
                      O(p, "tokenText"),
                      (p.innerText = m.Ya),
                      (p.style.backgroundColor = m.Tf),
                      (p.style.position = "absolute"),
                      (p.style.top = "80px"),
                      (p.style.right = "8px"),
                      (p.style.fontSize = "9px"),
                      (p.style.padding = "1px 3px"),
                      (p.style.lineHeight = "12px"),
                      (p.style.borderRadius = "2px"),
                      n.appendChild(p)));
            m.Xb &&
                ((p = document.createElement("img")),
                (p.src = "https://static-assets.highwebmedia.com/tsdefaultassets/video.svg"),
                (p.height = 18),
                (p.style.position = "absolute"),
                (p.style.top = "8px"),
                (p.style.right = "8px"),
                n.appendChild(p));
            if (m.Xb && !m.Cr && !m.nm) {
                p = document.createElement("img");
                p.src = "https://static-assets.highwebmedia.com/tsdefaultassets/no-audio.svg";
                p.height = 18;
                p.style.position = "absolute";
                p.style.top = "8px";
                p.style.right = "32px";
                var u = nw({ content: "" + el, qg: !1, width: 175, Rc: 1, wd: "90px" });
                u.style.boxShadow = "0px 2px 8px rgba(0, 0, 0, 0.25)";
                u.style.textAlign = "center";
                O(u, "tooltip-white");
                P(u, "tooltip");
                var x = document.createElement("span");
                u.appendChild(x);
                n.appendChild(u);
                p.onmouseenter = function () {
                    u.style.display = "block";
                    u.style.left = "12px";
                    u.style.top = "-32px";
                };
                p.onmouseleave = function () {
                    u.style.display = "none";
                };
                n.appendChild(p);
            }
            p = document.createElement("div");
            O(p, "link");
            p.innerText = m.name;
            p.style.fontSize = "14px";
            p.style.left = "0px";
            p.style.maxWidth = "145px";
            p.style.whiteSpace = "nowrap";
            p.style.textOverflow = "ellipsis";
            p.style.overflow = "hidden";
            p.style.lineHeight = "16px";
            p.style.textDecoration = "none";
            n.appendChild(p);
            return n;
        }
        c = void 0 === c ? "photo" : c;
        for (var e = [], f = 0, g = l(a), h = g.next(); !h.done && 8 !== f; h = g.next()) e.push(d(h.value)), (f += 1);
        a = lM(b, 8 < a.length);
        a.style.marginBottom = "20px";
        e.push(a);
        c = jM("video" === c ? mi : li, e);
        O(c, "psContainer");
        return c;
    }
    function lM(a, b) {
        var c = document.createElement("div");
        b &&
            ((b = new lJ().anchor),
            (b.href = "/photo_videos/photoset/list_popup/" + a + "/"),
            O(b, "link"),
            (b.innerText = ji),
            (b.style.fontSize = "14px"),
            (b.style.cursor = "pointer"),
            sd(b),
            (b.onclick = function (d) {
                nv.h(void 0);
                d.preventDefault();
            }),
            c.appendChild(b));
        return c;
    }
    function jM(a, b, c) {
        c = void 0 === c ? !1 : c;
        return V(
            "tr",
            { style: { fontSize: "14px", fontWeight: "normal", lineHeight: "15px", verticalAlign: "top", textAlign: "left" } },
            V("td", { colorClass: "label", style: { paddingBottom: "9px", fontFamily: "UbuntuMedium, Arial, Helvetica, sans-serif", height: "16px" } }, V("span", null, a, ":")),
            V("td", {
                colorClass: "contentText",
                style: { fontSize: "14px", lineHeight: "16px", fontFamily: "UbuntuRegular, Arial, Helvetica, sans-serif" },
                ref: function (d) {
                    if ("string" === typeof b)
                        if (c) {
                            var e = V("div", null);
                            d.appendChild(e);
                            e.innerHTML = b;
                            0 !== e.children.length && (e.children[0].style.display = "unset");
                        } else d.innerText = b;
                    else
                        b.forEach(function (f) {
                            d.appendChild(f);
                        });
                },
            })
        );
    }
    function hM(a, b) {
        return jM(vc(b), a, !0);
    }
    function iM(a, b) {
        a.customSections.push(b);
        ZL(b, a.Zv);
    }
    var mM,
        nM = new y("recaptchaLoaded", { ii: 1 });
    window.recaptchaLoadCallback = function () {
        mM = window.grecaptcha;
        nM.h(void 0);
    };
    function oM() {
        w.call(this);
        this.element.style.height = "";
        this.element.style.width = "";
    }
    q(oM, w);
    oM.prototype.render = function (a) {
        var b = this;
        nM.once(function () {
            void 0 === a.theme && (a.theme = document.body.classList.contains("darkmode") ? "dark" : "light");
            void 0 === b.listener &&
                (b.listener = Lr.g(function (d) {
                    void 0 !== b.Vm && ((b.Vm.parameters.theme = "darkmode" === d ? "dark" : "light"), b.reset());
                }));
            var c = mM.render(b.element, a);
            b.Vm = { WO: c, parameters: a };
        });
    };
    oM.prototype.reset = function () {
        if (void 0 !== this.Vm && (mM.reset(this.Vm.WO), void 0 !== this.Vm)) {
            var a = this.element.getElementsByTagName("iframe")[0];
            a.src = "dark" === this.Vm.parameters.theme ? a.src.replace("theme=light", "theme=dark") : a.src.replace("theme=dark", "theme=light");
        }
    };
    oM.prototype.getResponse = function () {
        return void 0 !== this.Vm ? mM.getResponse(this.Vm.WO) : "";
    };
    function pM() {}
    k = pM.prototype;
    k.$z = function (a) {
        a.style.padding = "3px 0";
    };
    k.av = function (a) {
        a.style.minWidth = "130px";
        a.style.width = "auto";
        a.style.paddingTop = "10px";
        a.style.paddingBottom = "1px";
        a.style.verticalAlign = "top";
        a.style.textAlign = "right";
    };
    k.nr = function (a) {
        O(a, "defaultColor");
        a.style.textAlign = "right";
        a.style.fontWeight = "bold";
        a.style.font = "1em/1.3em 'UbuntuMedium', Arial, Helvetica, sans-serif";
        a.style.padding = "0";
        a.style.margin = "0 4px 0 0";
    };
    k.Xo = function (a) {
        O(a, "defaultColor");
    };
    k.Dc = function (a) {
        O(a, "field");
        a.style.borderWidth = "1px";
        a.style.borderStyle = "solid";
        a.style.borderRadius = "4px";
        a.style.padding = "2px 4px";
        a.style.lineHeight = "18px";
        a.style.marginTop = "4px";
        a.style.width = "225px";
    };
    k.Zz = function (a) {
        O(a, "defaultColor");
        a.style.fontFamily = "UbuntuRegular, Arial, Helvetica, sans-serif";
        a.style.fontSize = "11px";
        a.style.width = "350px";
    };
    function qM() {}
    q(qM, pM);
    qM.prototype.Dc = function (a) {
        pM.prototype.Dc.call(this, a);
        a.style.width = "auto";
        a.style.marginTop = "7px";
    };
    function rM() {}
    q(rM, qM);
    rM.prototype.Dc = function (a) {
        qM.prototype.Dc.call(this, a);
        a.style.height = "";
        a.size = 10;
    };
    function sM() {}
    q(sM, pM);
    function tM() {}
    q(tM, pM);
    tM.prototype.Dc = function (a) {
        O(a, "fieldTextArea");
        a.style.width = "350px";
        a.style.lineHeight = "18px";
        a.style.marginTop = "4px";
        a.style.borderWidth = "1px";
        a.style.borderStyle = "solid";
        a.style.borderRadius = "4px";
        a.style.padding = "2px 4px";
        a.style.overflow = "hidden";
        a.style.height = "150px";
    };
    function uM() {}
    q(uM, pM);
    uM.prototype.Xo = function (a) {
        pM.prototype.Xo.call(this, a);
        a.style.paddingTop = "7px";
    };
    function vM() {}
    q(vM, pM);
    vM.prototype.Xo = function (a) {
        pM.prototype.Xo.call(this, a);
        a.style.paddingTop = "7px";
    };
    vM.prototype.Dc = function (a) {
        pM.prototype.Dc.call(this, a);
        a.style.width = "auto";
        a.style.marginTop = "7px";
    };
    function wM() {}
    q(wM, pM);
    wM.prototype.Dc = function (a) {
        pM.prototype.Dc.call(this, a);
        a.style.position = "";
        a.style.padding = "";
        a.style.overflow = "";
        a.style.background = "";
        a.style.border = "";
    };
    function xM() {}
    q(xM, pM);
    xM.prototype.$z = function (a) {
        a.style.display = "none";
    };
    function yM(a) {
        this.disabled = this.required = !1;
        this.errorMessage = "";
        this.lf(a);
        this.dh = document.createElement("div");
        O(this.dh, "fieldError");
        this.dh.style.display = "none";
        this.label = document.createElement("label");
        this.pa.nr(this.label);
        this.label.innerText = this.Ya + ": " + (this.required ? "*" : "");
        this.wt = document.createElement("th");
        this.pa.av(this.wt);
        "" === this.Ya && (this.wt.style.display = "none");
        this.Hh = document.createElement("td");
        this.pa.Xo(this.Hh);
        this.wt.appendChild(this.label);
        this.Nd();
        this.pp();
        a = this.Hh;
        var b = a.appendChild;
        if (this.hf instanceof HTMLElement) {
            this.pa.Zz(this.hf);
            var c = this.hf;
        } else (c = document.createElement("div")), "" === this.hf ? (c.style.display = "none") : (this.pa.Zz(c), (c.innerHTML = this.hf));
        b.call(a, c);
        this.Hh.appendChild(this.dh);
    }
    k = yM.prototype;
    k.lf = function (a) {
        this.name = a.name;
        this.defaultValue = void 0 === a.defaultValue ? "" : String(a.defaultValue);
        this.Ya = void 0 === a.Ya ? "" : a.Ya;
        this.hf = void 0 === a.hf ? "" : a.hf;
        this.required = void 0 === a.required ? !1 : a.required;
        this.disabled = void 0 === a.disabled ? !1 : a.disabled;
        this.onChange = void 0 === a.onChange ? function () {} : a.onChange;
        this.pa = void 0 === a.pa ? new pM() : a.pa;
    };
    k.Oa = function () {
        return this.Hp;
    };
    k.fh = function () {
        return this.name;
    };
    k.RE = function () {};
    k.ar = function (a, b) {
        this.dh.style.display = "";
        this.dh.innerText = a;
        (void 0 === b || b) && O(this.label, "fieldError");
    };
    k.Wi = function (a) {
        this.dh.style.display = "none";
        this.dh.innerText = "";
        if (void 0 === a || a) P(this.label, "fieldError"), this.pa.nr(this.label);
    };
    k.Lo = function (a) {
        this.onChange = a;
    };
    function zM(a, b) {
        a.Ya = b;
        a.label.innerText = a.Ya + ": " + (a.required ? "*" : "");
        a.wt.style.display = "" === a.Ya ? "none" : "";
    }
    k.Nd = function () {
        this.Hp = document.createElement("tr");
        this.pa.$z(this.Hp);
        this.Hp.appendChild(this.wt);
        this.Hp.appendChild(this.Hh);
    };
    function AM(a) {
        yM.call(this, a);
    }
    q(AM, yM);
    AM.prototype.ld = function () {
        return this.Ib.value;
    };
    AM.prototype.Lf = function () {
        var a = document.createElement("input");
        a.name = this.name;
        a.value = this.defaultValue;
        this.pa.Dc(a);
        a.required = this.required;
        a.disabled = this.disabled;
        void 0 !== this.minLength && (a.minLength = this.minLength);
        void 0 !== this.maxLength && (a.maxLength = this.maxLength);
        return a;
    };
    AM.prototype.pp = function () {
        this.Ib = this.Lf();
        this.Hh.appendChild(this.Ib);
    };
    AM.prototype.lf = function (a) {
        yM.prototype.lf.call(this, a);
        this.minLength = a.minLength;
        this.maxLength = a.maxLength;
        this.pa = void 0 === a.pa ? new sM() : a.pa;
    };
    function BM(a) {
        yM.call(this, a);
    }
    q(BM, yM);
    BM.prototype.ld = function () {
        return this.Ib.value;
    };
    BM.prototype.Lf = function () {
        function a() {
            var c = b.offsetHeight - b.clientHeight;
            b.style.height = "auto";
            b.style.height = b.scrollHeight + c + 15 + "px";
        }
        var b = document.createElement("textarea");
        b.name = this.name;
        b.id = "id_" + this.name;
        b.value = this.defaultValue;
        b.required = this.required;
        b.disabled = this.disabled;
        void 0 !== this.minLength && (b.minLength = this.minLength);
        void 0 !== this.maxLength && (b.maxLength = this.maxLength);
        this.pa.Dc(b);
        window.setTimeout(function () {
            a();
        }, 0);
        v("input", b, function () {
            a();
        });
        return b;
    };
    BM.prototype.pp = function () {
        this.Ib = this.Lf();
        this.Hh.appendChild(this.Ib);
    };
    BM.prototype.lf = function (a) {
        yM.prototype.lf.call(this, a);
        this.minLength = a.minLength;
        this.maxLength = a.maxLength;
        this.pa = void 0 === a.pa ? new tM() : a.pa;
    };
    function CM(a) {
        yM.call(this, a);
    }
    q(CM, yM);
    CM.prototype.ld = function () {
        return this.Ib.value;
    };
    CM.prototype.Lf = function () {
        var a = this,
            b = document.createElement("select");
        b.name = this.name;
        this.pa.Dc(b);
        for (var c = l(this.Vi), d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            var e = document.createElement("option");
            e.innerText = String(d.label);
            e.value = String(d.value);
            b.appendChild(e);
        }
        b.multiple = this.multiple;
        b.required = this.required;
        b.value = this.defaultValue;
        b.disabled = this.disabled;
        v("change", b, function () {
            a.onChange(a);
        });
        return b;
    };
    CM.prototype.pp = function () {
        this.Ib = this.Lf();
        this.Hh.appendChild(this.Ib);
    };
    CM.prototype.lf = function (a) {
        yM.prototype.lf.call(this, a);
        this.multiple = void 0 === a.multiple ? !1 : a.multiple;
        this.Vi = void 0 === a.Vi ? [] : a.Vi;
        this.pa = void 0 === a.pa ? new qM() : a.pa;
        "true" === this.defaultValue ? (this.defaultValue = "True") : "false" === this.defaultValue && (this.defaultValue = "False");
    };
    function DM() {
        AM.apply(this, arguments);
    }
    q(DM, AM);
    DM.prototype.Lf = function () {
        var a = this,
            b = document.createElement("input");
        b.name = this.name;
        b.value = this.defaultValue;
        b.checked = "True" === this.defaultValue;
        b.required = this.required;
        b.disabled = this.disabled;
        b.type = "checkbox";
        this.pa.Dc(b);
        v("change", b, function () {
            a.Ib.value = b.checked ? "True" : "False";
            a.onChange(a);
        });
        return b;
    };
    DM.prototype.ld = function () {
        return this.Ib.value;
    };
    DM.prototype.lf = function (a) {
        AM.prototype.lf.call(this, a);
        this.pa = void 0 === a.pa ? new uM() : a.pa;
        "true" === this.defaultValue ? (this.defaultValue = "True") : "false" === this.defaultValue && (this.defaultValue = "False");
    };
    DM.prototype.$q = function (a) {
        this.Ib.checked = a;
    };
    function EM(a) {
        yM.call(this, a);
    }
    q(EM, AM);
    EM.prototype.ld = function () {
        for (var a = [], b = l(this.qI), c = b.next(); !c.done; c = b.next()) (c = c.value), c.Va.checked && a.push(c.Va.value);
        return a;
    };
    EM.prototype.lf = function (a) {
        AM.prototype.lf.call(this, a);
        this.Vi = void 0 === a.Vi ? [] : a.Vi;
        this.pa = void 0 === a.pa ? new vM() : a.pa;
    };
    EM.prototype.pp = function () {
        var a = document.createElement("div");
        this.qI = [];
        for (var b = l(this.Vi), c = b.next(); !c.done; c = b.next()) {
            var d = c.value;
            c = new qv(16, -1 !== this.defaultValue.indexOf(String(d.value)));
            c.Va.name = this.name;
            c.Va.value = String(d.value);
            this.pa.Dc(c.element);
            this.disabled && c.disable();
            c.element.style.marginRight = "3px";
            c.element.style.transform = "translateY(4px)";
            this.qI.push(c);
            var e = document.createElement("label");
            e.style.padding = "0 10px 0 0";
            d = document.createTextNode(String(d.label));
            e.appendChild(c.element);
            e.appendChild(d);
            a.appendChild(e);
        }
        this.Hh.appendChild(a);
    };
    function FM(a) {
        a = Object.assign(Object.assign({}, a), { Vi: [] });
        yM.call(this, a);
    }
    q(FM, CM);
    FM.prototype.lf = function (a) {
        CM.prototype.lf.call(this, Object.assign(Object.assign({}, a), { Vi: [] }));
        this.vQ = void 0 === a.day ? "0" : a.day.toString(10);
        this.wQ = void 0 === a.month ? "0" : a.month.toString(10);
        this.yQ = void 0 === a.year ? "0" : a.year.toString(10);
    };
    FM.prototype.ld = function () {
        return [this.WL.value, this.eJ.value, this.XO.value];
    };
    function GM(a, b, c, d) {
        var e = document.createElement("select");
        e.name = a.name + "_" + d;
        a.pa.Dc(e);
        b = l(b);
        for (d = b.next(); !d.done; d = b.next()) {
            d = d.value;
            var f = document.createElement("option");
            f.innerText = "" + d.label;
            f.value = "" + d.value;
            e.appendChild(f);
        }
        e.value = c;
        e.required = a.required;
        return e;
    }
    FM.prototype.pp = function () {
        var a = [];
        a.push({ label: "---", value: "0" });
        for (var b = 1; 31 >= b; b += 1) {
            var c = b.toString(10);
            a.push({ label: c, value: c });
        }
        this.eJ = GM(this, a, this.vQ, "day");
        a = [];
        b = [Dn, En, Fn, Gn, Hn, In, Jn, Kn, Ln, Mn, Nn, On];
        a.push({ label: "---", value: "0" });
        for (c = 0; c < b.length; c += 1) a.push({ label: b[c], value: (c + 1).toString(10) });
        this.WL = GM(this, a, this.wQ, "month");
        a = [];
        b = new Date().getFullYear() - 18;
        for (a.push({ label: "---", value: "0" }); 1900 < b; --b) (c = b.toString(10)), a.push({ label: c, value: c });
        this.XO = GM(this, a, this.yQ, "year");
        this.Hh.appendChild(this.WL);
        this.Hh.appendChild(this.eJ);
        this.Hh.appendChild(this.XO);
    };
    function HM(a) {
        yM.call(this, a);
    }
    q(HM, yM);
    k = HM.prototype;
    k.lf = function (a) {
        yM.prototype.lf.call(this, a);
        this.pa = void 0 === a.pa ? new wM() : a.pa;
        this.sitekey = a.Wu;
    };
    k.ld = function () {
        return this.ou.getResponse();
    };
    k.Lf = function () {
        this.ou = new oM();
        this.pa.Dc(this.ou.element);
        return this.ou.element;
    };
    k.pp = function () {
        var a = this;
        this.Ib = this.Lf();
        this.ou.render({
            sitekey: this.sitekey,
            callback: function () {
                a.Wi();
            },
        });
        this.Hh.appendChild(this.Ib);
    };
    k.RE = function () {
        yM.prototype.RE.call(this);
        this.ou.reset();
    };
    function IM(a) {
        yM.call(this, a);
    }
    q(IM, AM);
    IM.prototype.Lf = function () {
        var a = AM.prototype.Lf.call(this);
        a.required = !1;
        a.type = "hidden";
        return a;
    };
    var JM = void 0 !== window.performance && void 0 !== performance.now;
    function KM() {
        var a = Error.apply(this, arguments);
        this.message = a.message;
        "stack" in a && (this.stack = a.stack);
        this.GR = !0;
    }
    q(KM, Error);
    function LM(a, b) {
        return function () {
            if ("function" !== typeof window.injectReCaptchaV3Token) return r("window.injectReCaptchaV3Token is not a function: ", "recaptcha.ts", "formvalidate", typeof window.injectReCaptchaV3Token), Promise.resolve(!0);
            var c = JM ? performance.now() : 0;
            return window
                .injectReCaptchaV3Token(a)
                .then(function (d) {
                    return MM(d, b);
                })
                .then(function (d) {
                    if ("" === d) (d = document.createElement("input")), (d.type = "hidden"), (d.name = "sign_recaptcha_failed"), (d.value = "1"), b.appendChild(d);
                    else {
                        var e = document.createElement("input");
                        e.type = "hidden";
                        e.name = "signed_recaptcha";
                        e.value = d;
                        b.appendChild(e);
                    }
                    F("ReCAPTCHA3_frontend", { result: "success", IU: JM ? performance.now() - c : void 0 });
                    return !0;
                })
                .catch(function (d) {
                    if (d.PW) return !1;
                    F("ReCAPTCHA3_frontend", { result: d, IU: JM ? performance.now() - c : void 0 });
                    return NM(a, b).then(function (e) {
                        return e ? !1 : !0;
                    });
                });
        };
    }
    function NM(a, b) {
        return "function" !== typeof window.bindNoReCaptchaField
            ? (r("window.bindNoReCaptchaField is not a function: ", "recaptcha.ts", "formvalidate", typeof window.bindNoReCaptchaField), Promise.resolve(!1))
            : null === a.parentNode
            ? (r("replaceWithNoReCaptcha: captcha element hasn't a parent", "recaptcha.ts", "formvalidate"), Promise.resolve(!1))
            : C("accounts/ajax_norecaptcha_html/").then(function (c) {
                  var d = document.createElement("div");
                  if (null === a.parentNode || "function" !== typeof window.bindNoReCaptchaField) return !1;
                  a.parentNode.insertBefore(d, a);
                  d.outerHTML = c.responseText;
                  c = b.querySelector(".g-recaptcha");
                  if (null === c) return r("replaceWithNoReCaptcha: html doesn't contain norecaptcha", "recaptcha.ts", "formvalidate"), !1;
                  window.bindNoReCaptchaField(c);
                  c = document.createElement("a");
                  c.href = b.action;
                  d = Bc(c.search);
                  d["force-nocaptcha"] = "1";
                  b.action = ("/" === c.pathname[0] ? "" : "/") + c.pathname + "?" + Ac(d);
                  return !0;
              });
    }
    function MM(a, b) {
        var c = b.querySelector("[data-formvalidate-sign-url]");
        if (null === c) return Promise.resolve("");
        var d = c.getAttribute("data-formvalidate-sign-url");
        b = b.querySelector("[name=csrfmiddlewaretoken]");
        return "string" !== typeof d || null === b
            ? Promise.resolve("")
            : E(d, { recaptcha3: a, field_to_sign: c.value, csrfmiddlewaretoken: b.value })
                  .then(function (e) {
                      e = JSON.parse(e.responseText);
                      if (!0 !== e.valid) throw new KM(e.errors);
                      return e.signed_value;
                  })
                  .catch(function (e) {
                      if (e.GR) throw e;
                      r("Can't sign recaptcha: ", "recaptcha.ts", "formvalidate", e);
                      return "";
                  });
    }
    function OM(a) {
        var b = new H(a),
            c = Vc(b, "initial"),
            d = Yc(b, "schema"),
            e = Qc(d, "fieldsets");
        e =
            void 0 === e
                ? []
                : e.map(function (n) {
                      return { Na: Rc(n, "fields"), label: L(n, "label") };
                  });
        a = JSON.parse(a).schema.fields;
        for (var f = {}, g = l(Object.keys(a)), h = g.next(); !h.done; h = g.next()) {
            h = h.value;
            var m = new H(JSON.stringify(a[h]));
            f[h] = {
                defaultValue: null === c[h] ? void 0 : c[h],
                name: h,
                minLength: Tc(m, "min_length"),
                maxLength: Tc(m, "max_length"),
                lW: K(m, "empty_value"),
                Vi: PM(Qc(m, "choices")),
                required: M(m, "required"),
                disabled: M(m, "disabled"),
                hf: L(m, "help_text"),
                Ya: L(m, "label"),
                MJ: L(m, "type"),
                Wu: K(m, "site_key"),
            };
            ad(m);
        }
        return { mW: Vc(b, "extra"), initial: c, Rk: { prefix: K(d, "prefix"), Na: f, Is: e, WW: K(d, "label_suffix"), NJ: Rc(d, "field_order") } };
    }
    function PM(a) {
        if (void 0 === a) return [];
        var b = [];
        a = l(a);
        for (var c = a.next(); !c.done; c = a.next()) {
            var d = c.value;
            c = b;
            var e = c.push,
                f = Sc(d, "label");
            var g = void 0;
            g = void 0 === g ? !0 : g;
            var h = Pc(d, "value");
            "string" !== typeof h && "number" !== typeof h && "boolean" !== typeof h
                ? (g && t("getStringWithNumbersOrBoolean(value): " + h + " is wrong type", "argjsonmap.ts", "common", { message: d.Ye }), (d = ""))
                : (d = "boolean" === typeof h ? h : "" + h);
            e.call(c, { label: f, value: d });
        }
        return b;
    }
    function QM(a, b, c) {
        function d(f, g) {
            E(f, g)
                .then(function () {
                    e.loading = !1;
                    e.options.Vt(g);
                })
                .catch(function (h) {
                    var m;
                    e.loading = !1;
                    var n = JSON.parse(h.xhr.responseText).errors;
                    if (null !== n && "object" === typeof n) {
                        for (var p = l(Object.keys(e.Na)), u = p.next(); !u.done; u = p.next()) null === (m = e.Na[u.value]) || void 0 === m ? void 0 : m.RE();
                        for (var x in n) {
                            m = n[x][0];
                            if ("string" !== typeof m) break;
                            p = e.Oa(Zd("InCntntSUp") && "subgender" === x ? "gender" : x);
                            void 0 === p ? (Zd("InCntntSUp") && "__all__" === x) || r("Form error on unknown field " + x, "djangoForm.ts", "ui") : p.ar(m, e.options.xt);
                        }
                        e.options.My(h);
                    }
                });
        }
        c = void 0 === c ? {} : c;
        w.call(this, "form");
        var e = this;
        this.data = a;
        this.Na = {};
        this.Is = {};
        this.loading = !1;
        RM(this, c);
        this.element.style.position = "static";
        a = document.createElement("table");
        this.element.appendChild(a);
        this.DG = document.createElement("tbody");
        a.appendChild(this.DG);
        this.mb = this.iC();
        this.element.appendChild(this.mb);
        SM(this);
        this.element.onsubmit = function (f) {
            f.preventDefault();
            TM(e);
            e.loading ||
                ((e.loading = !0),
                (f = new FormData(e.element)),
                e.Xr instanceof IM
                    ? LM(e.Xr.Ib, e.element)()
                          .then(function (g) {
                              !0 === g && d(b, new FormData(e.element));
                          })
                          .catch(function () {})
                    : d(b, f));
        };
    }
    q(QM, w);
    function RM(a, b) {
        var c = { Hp: new pM(), Va: new uM(), input: new sM(), select: new qM(), CU: new tM(), KX: new vM(), bS: new rM(), $L: new wM(), JS: new xM() };
        a.options = { Vt: void 0 === b.Vt ? function () {} : b.Vt, My: void 0 === b.My ? function () {} : b.My, xt: void 0 === b.xt ? !0 : b.xt, pa: void 0 === b.pa ? c : Object.assign(Object.assign({}, c), b.pa) };
    }
    function SM(a) {
        if (0 < a.data.Rk.NJ.length) for (var b = l(a.data.Rk.NJ), c = b.next(); !c.done; c = b.next()) UM(a, a.Lf(a.data.Rk.Na[c.value]));
        else if (void 0 !== a.data.Rk.Is) {
            b = l(a.data.Rk.Is);
            for (var d = b.next(); !d.done; d = b.next()) {
                d = d.value;
                var e = a.DG;
                c = e.appendChild;
                var f = a,
                    g = d.label,
                    h = document.createElement("fieldset"),
                    m = document.createElement("table"),
                    n = document.createElement("tbody"),
                    p = h,
                    u = p.appendChild,
                    x = g,
                    D = document.createElement("legend");
                O(D, "label");
                D.innerText = x;
                D.style.fontSize = "1.266em";
                D.style.fontFamily = "'UbuntuMedium', Arial, Helvetica, sans-serif";
                D.style.fontWeight = "normal";
                D.style.padding = "10px 0px 10px 0px";
                "" === x && (D.style.display = "none");
                u.call(p, D);
                h.appendChild(m);
                m.appendChild(n);
                f.Is[g] = n;
                c.call(e, h);
                e = l(d.Na);
                for (c = e.next(); !c.done; c = e.next())
                    (f = a.data.Rk.Na[c.value]),
                        (Zd("InCntntSUp") && void 0 === f) ||
                            ((c = a),
                            (f = a.Lf(f)),
                            (g = d.label),
                            (h = c.Is[g]),
                            void 0 === h
                                ? r("Fieldset " + g + " does not exist", "djangoForm.ts", "ui")
                                : void 0 !== c.Na[f.fh()]
                                ? r("Field " + f.fh() + " already exists", "djangoForm.ts", "ui")
                                : ((c.Na[f.fh()] = f), h.appendChild(f.Oa())));
            }
        } else for (b = l(Object.keys(a.data.Rk.Na)), c = b.next(); !c.done; c = b.next()) UM(a, a.Lf(a.data.Rk.Na[c.value]));
    }
    QM.prototype.Lf = function (a) {
        var b;
        switch (a.MJ) {
            case "CharField":
                return void 0 === a.maxLength ? new BM(Object.assign(Object.assign({}, a), { pa: this.options.pa.CU })) : new AM(Object.assign(Object.assign({}, a), { pa: this.options.pa.input }));
            case "EmailField":
                return new AM(Object.assign(Object.assign({}, a), { pa: this.options.pa.input }));
            case "BooleanField":
                return new DM(Object.assign(Object.assign({}, a), { pa: this.options.pa.Va }));
            case "ChoiceField":
                return new CM(Object.assign(Object.assign({}, a), { pa: this.options.pa.select }));
            case "TypedChoiceField":
                return new CM(Object.assign(Object.assign({}, a), { pa: this.options.pa.select }));
            case "MultiSelectFormField":
                return new EM(Object.assign(Object.assign({}, a), { pa: this.options.pa.bS }));
            case "DateField":
                return new FM(Object.assign(Object.assign({}, a), { day: this.data.initial[a.name + "__day"], month: this.data.initial[a.name + "__month"], year: this.data.initial[a.name + "__year"], pa: this.options.pa.select }));
            case "NoReCaptchaField":
                var c = null !== (b = a.Wu) && void 0 !== b ? b : "";
                "" === c && r("siteKey must be provided for NoReCaptchaField", "djangoForm.ts", "ui");
                return (this.Xr = new HM(Object.assign(Object.assign({}, a), { Wu: c, pa: this.options.pa.$L })));
            case "ReCaptcha3Field":
                return (
                    (b = null !== (c = a.Wu) && void 0 !== c ? c : ""),
                    "" === b && r("siteKey must be provided for ReCaptcha3Field", "djangoForm.ts", "ui"),
                    (this.Xr = new IM(Object.assign(Object.assign({}, a), { Wu: b, pa: this.options.pa.JS })))
                );
            default:
                return r("DjangoForm received an unknown field type: " + a.MJ, "djangoForm.ts", "ui"), new AM({ name: "" });
        }
    };
    function UM(a, b) {
        void 0 !== a.Na[b.fh()] ? r("Field " + b.fh() + " already exists", "djangoForm.ts", "ui") : ((a.Na[b.fh()] = b), a.DG.appendChild(b.Oa()));
    }
    function TM(a) {
        for (var b = l(Object.keys(a.Na)), c = b.next(); !c.done; c = b.next()) (c = a.Na[c.value]), void 0 !== c && c.Wi(a.options.xt);
    }
    QM.prototype.iC = function () {
        var a = document.createElement("input");
        a.type = "submit";
        a.value = Gj;
        a.className = "button";
        a.style.display = "block";
        a.style.cursor = "pointer";
        a.style.padding = "0px 30px 2px 15px";
        a.style.margin = "15px 0px 0px 137px";
        a.style.width = "auto";
        a.style.height = "28px";
        a.style.borderRadius = "4px";
        a.style.font = "1.16em/1.0em 'UbuntuMedium', Arial, Helvetica, sans-serif";
        return a;
    };
    function VM(a) {
        var b = Object.keys(a.Na)[0];
        void 0 !== b && ((a = a.Na[b]), void 0 !== a && a.Ib.focus());
    }
    QM.prototype.Oa = function (a) {
        return this.Na[a];
    };
    new y("privateSettingsClicked");
    new y("broadcastSettingsSaved");
    new y("genderSettingsSaved");
    function WM(a) {
        return new Promise(function (b, c) {
            E("api/ts/accounts/editsubgender/", a)
                .then(function () {
                    b(a.get("subgender"));
                    "function" === typeof window.RefreshBroadcastBioTabSocialMedia && window.RefreshBroadcastBioTabSocialMedia();
                })
                .catch(function () {
                    c();
                });
        });
    }
    var XM = ["public", "private", "hidden", "away", "connecting"];
    function YM(a) {
        var b = document.createElement("div");
        b.style.paddingLeft = "10px";
        b.style.paddingTop = "3px";
        b.style.fontSize = "20px";
        b.textContent = a;
        return b;
    }
    function ZM(a) {
        a = YM(a);
        a.style.paddingTop = "10px";
        a.style.fontFamily = "UbuntuRegular";
        a.style.fontSize = "15px";
        return a;
    }
    function $M() {
        var a = document.createElement("select");
        O(a, "select");
        a.style.width = "177px";
        a.style.height = "20px";
        a.style.marginLeft = "10px";
        a.style.marginTop = "10px";
        a.style.fontFamily = "UbuntuRegular";
        a.style.fontSize = "12px";
        a.style.borderWidth = "1px";
        a.style.borderStyle = "solid";
        a.style.borderRadius = "4px";
        a.style.overflow = "hidden";
        return a;
    }
    function aN() {
        var a = document.createElement("video");
        a.autoplay = !0;
        a.muted = !0;
        a.setAttribute("playsinline", "");
        a.oncontextmenu = function (b) {
            b.preventDefault();
        };
        return a;
    }
    function bN() {
        this.dw = !1;
        this.wG = void 0;
    }
    bN.prototype.Pu = function (a, b, c) {
        var d = this,
            e = { video: { deviceId: { exact: c.tp }, width: { ideal: c.width } }, frameRate: { min: 24, max: 30 } };
        pb() ? (e.aspectRatio = 1.777777778) : (e.video.height = { ideal: c.height });
        "we-only-need-a-silent-mic" !== c.Ht &&
            ((e.audio = { deviceId: { exact: c.Ht } }),
            (e.audio.advanced = [{ autoGainControl: !0 }, { noiseSuppression: !0 }]),
            hb() && (e.audio.advanced.push({ AW: !0 }), e.audio.advanced.push({ BW: !0 }), e.audio.advanced.push({ DW: !0 })));
        this.Qf = new WC(b, a);
        this.Fh = this.Qf.Fh;
        return new Promise(function (f, g) {
            void 0 !== d.Qf &&
                d.Qf.Pu(e)
                    .then(function (h) {
                        d.stream = h;
                        void 0 !== d.Qf && d.Qf.Mu(c.muted);
                        f();
                    })
                    .catch(function (h) {
                        g(h);
                    });
        });
    };
    bN.prototype.stop = function () {
        var a = this;
        void 0 === this.wG &&
            (this.wG = new Promise(function (b) {
                function c() {
                    a.Qf = void 0;
                    a.stream = void 0;
                    a.dw = !1;
                    b();
                }
                void 0 !== a.Qf
                    ? a.Qf.stop()
                          .then(function (d) {
                              a.Fh === d && c();
                          })
                          .catch(function () {})
                    : c();
            }));
        return this.wG;
    };
    bN.prototype.start = function () {
        var a = this;
        this.dw = !1;
        if (void 0 !== this.Qf) {
            if (Ya && !Gu(this.Qf.Km.facingMode)) {
                var b = Hl;
                Fu() && (b = Il);
                return Promise.reject(Error(b));
            }
            return new Promise(function (c, d) {
                if (void 0 !== a.Qf) {
                    var e = !1,
                        f = function (h) {
                            (void 0 !== h && h !== a.Fh) || !1 !== e || ((e = a.dw = !0), ZC.removeListener(g), c());
                        },
                        g = function (h) {
                            f(h);
                        };
                    ZC.g(g);
                    a.Qf.start()
                        .then(function () {
                            f();
                        })
                        .catch(function (h) {
                            !0 === h.fatal && (ZC.removeListener(g), d(h));
                        });
                }
            });
        }
        return Promise.resolve();
    };
    bN.prototype.Mu = function (a) {
        return void 0 !== this.Qf && void 0 !== this.stream ? (this.Qf.Mu(a), !0) : !1;
    };
    function cN(a, b, c, d) {
        w.call(this);
        this.videoWidth = 268;
        this.A = a;
        this.M = d;
        this.config = c;
        this.Wb = b;
        this.zK = this.XB();
        this.SI();
    }
    var dN;
    q(cN, w);
    k = cN.prototype;
    k.start = function () {
        function a() {
            void 0 !== b.Db &&
                (tc(function () {
                    return eN(b, !1);
                }),
                (b.video.style.height = Math.floor(b.videoWidth / b.SO) + "px"),
                fN(b));
        }
        var b = this;
        this.stop()
            .then(function () {
                b.Db = new bN();
                b.Db.Pu(b.video, b.A, b.Wb)
                    .then(a)
                    .catch(function (c) {
                        hb() && lb() && "Could not start video source" === c.message ? a() : R(Xl + ":\n" + c.message);
                    });
            })
            .catch(function () {});
    };
    k.stop = function () {
        var a = this;
        eN(this, !0);
        return gN(this).then(function () {
            return void 0 !== a.Db ? a.Db.stop() : Promise.resolve();
        });
    };
    function gN(a) {
        return new Promise(function (b) {
            void 0 !== a.JA && (a.JA.style.width = "0%");
            void 0 !== a.Er
                ? a.Er.stop()
                      .then(function () {
                          clearInterval(a.hV);
                          a.Er = void 0;
                          b();
                      })
                      .catch(function () {})
                : b();
        });
    }
    function fN(a) {
        gN(a)
            .then(function () {
                Va() &&
                    void 0 !== a.Db &&
                    void 0 !== a.Db.stream &&
                    0 < a.Db.stream.getAudioTracks().length &&
                    ((a.Er = new iD()),
                    a.Er.connect(a.Db.stream),
                    (a.hV = window.setInterval(function () {
                        void 0 !== a.Er && void 0 !== a.JA && (a.JA.style.width = 100 * a.Er.level + "%");
                    })));
            })
            .catch(function () {});
    }
    function hN(a, b) {
        var c = a.lJ.Vr.get(a.Wb.tp);
        void 0 !== c && ((b = c.nN.get(b.value)), void 0 !== b && ((a.Wb.width = b.width), (a.Wb.height = b.height), (a.SO = b.ratio), void 0 !== a.yK && (a.yK.style.visibility = b.DR ? "visible" : "hidden"), a.start()));
    }
    function iN(a) {
        var b = a.lJ.Vr.get(a.Wb.tp);
        if (void 0 !== b) {
            for (var c = a.ti.options.length - 1; 0 <= c; --c) a.ti.removeChild(a.ti.options[c]);
            var d = $b("selected_res"),
                e = 0,
                f = -1;
            b.nN.forEach(function (g) {
                var h = document.createElement("option");
                h.label = g.label;
                h.text = g.label;
                h.value = g.id;
                a.ti.add(h);
                h.value === d && (f = e);
                e += 1;
            });
            -1 === f && (f = Math.floor(a.ti.options.length / 2));
            b = a.ti.options[f];
            b.selected = !0;
            hN(a, b);
        }
    }
    function jN(a) {
        var b = a.jn.selectedIndex;
        0 <= b && ((b = a.jn.options[b]), (a.Wb.tp = b.value), bc("selected_cam", b.value, 60), bc("selected_res", "", 0), iN(a));
    }
    function kN(a) {
        var b = a.ti.selectedIndex;
        0 <= b && ((b = a.ti.options[b]), bc("selected_res", b.value, 60), hN(a, b));
    }
    k.SI = function () {
        O(this.element, "previewPanel");
        this.element.style.height = "382px";
        this.element.style.width = "488px";
        this.element.style.paddingLeft = "5px";
        this.element.appendChild(this.js());
        this.element.appendChild(this.vw());
        this.element.appendChild(this.lC());
    };
    k.js = function () {
        var a = document.createElement("div");
        O(a, "welcomeTitle");
        a.style.width = "100%";
        a.style.height = "32px";
        var b = document.createElement("span");
        b.style.paddingLeft = "10px";
        b.style.verticalAlign = "sub";
        b.style.lineHeight = "32px";
        b.textContent = Wl + ", " + this.A.j;
        a.appendChild(b);
        return a;
    };
    k.vw = function () {
        var a = this,
            b = document.createElement("div");
        b.style.width = "198px";
        b.style.cssFloat = "left";
        b.style.height = "318px";
        b.style.padding = "10px 0 10px 0";
        b.appendChild(this.MI());
        b.appendChild(this.QI());
        wC()
            .then(function (c) {
                c ? a.getUserMedia() : (eN(a, !0), lN(a));
            })
            .catch(function () {
                a.getUserMedia();
            });
        return b;
    };
    k.getUserMedia = function () {
        var a = this;
        mN(this);
        vC()
            .then(function (b) {
                eN(a, !1);
                a.lJ = b;
                if (0 < b.wE.size && void 0 !== a.fo) {
                    var c = document.createElement("option");
                    c.label = Ol;
                    c.text = c.label;
                    c.value = "we-only-need-a-silent-mic";
                    a.fo.add(c);
                    var d = $b("selected_mic"),
                        e = 1,
                        f = 1;
                    c.value === d && (f = 0);
                    b.wE.forEach(function (n) {
                        var p = document.createElement("option");
                        p.label = n.label;
                        p.text = n.label;
                        p.value = n.id;
                        void 0 !== a.fo && a.fo.add(p);
                        p.value === d && (f = e);
                        e += 1;
                    });
                    c = a.fo.options[f];
                    c.selected = !0;
                    a.Wb.Ht = c.value;
                }
                if (0 < b.Vr.size) {
                    var g = $b("selected_cam"),
                        h = 0,
                        m = 0;
                    b.Vr.forEach(function (n) {
                        var p = document.createElement("option");
                        p.label = n.label;
                        p.text = n.label;
                        p.value = n.id;
                        a.jn.add(p);
                        p.value === g && (m = h);
                        h += 1;
                    });
                    b = a.jn.options[m];
                    b.selected = !0;
                    a.Wb.tp = b.value;
                    iN(a);
                }
            })
            .catch(function (b) {
                eN(a, !0);
                var c = "",
                    d = "";
                null !== b.message && void 0 !== b.message
                    ? (c =
                          "OverconstrainedError" === b.name || "NotFoundError" === b.name || "DevicesNotFoundError" === b.name
                              ? ql
                              : "PermissionDeniedError" === b.name || "NotAllowedError" === b.name
                              ? tl
                              : "NotReadableError" === b.name
                              ? b.message + ". " + Bl
                              : b.message)
                    : null !== b.name && void 0 !== b.name && (c = b.name);
                "" !== c && (d = ". ");
                lN(a, "" + Gl + d + c);
            });
    };
    function mN(a) {
        for (var b = l([a.jn, a.ti, a.fo]), c = b.next(); !c.done; c = b.next()) (c = c.value), void 0 !== c && (c.disabled = !1);
        a.zK.style.display = "none";
    }
    function lN(a, b) {
        void 0 !== b && (dN = b);
        void 0 !== dN ? ((a.zq.textContent = dN), (a.zq.style.display = ""), (a.rh.style.display = "none")) : ((a.zq.style.display = "none"), (a.rh.style.display = ""));
        b = l([a.jn, a.ti, a.fo]);
        for (var c = b.next(); !c.done; c = b.next()) (c = c.value), void 0 !== c && (c.disabled = !0);
        a.zK.style.display = "";
    }
    k.XB = function () {
        var a = this,
            b = document.createElement("div");
        O(b, "helpOverlay");
        b.style.fontSize = "14px";
        b.style.fontFamily = "UbuntuRegular";
        b.style.display = "none";
        b.style.width = "304px";
        b.style.fontWeight = "bold";
        b.style.borderRadius = "6px";
        b.style.textAlign = "center";
        b.style.padding = "8px";
        b.style.position = "absolute";
        b.style.top = "25%";
        b.style.left = "50%";
        b.style.transform = "translateX(-50%)";
        b.style.zIndex = "1";
        b.style.borderWidth = "2px";
        b.style.borderStyle = "solid";
        var c = document.createElement("div");
        c.style.marginBottom = "16px";
        c.textContent = void 0 !== window.InstallTrigger ? sl : rl;
        b.appendChild(c);
        this.zq = document.createElement("div");
        O(this.zq, "error");
        this.zq.style.display = "none";
        b.appendChild(this.zq);
        this.rh = document.createElement("button");
        this.rh.style.width = "268px";
        this.rh.style.padding = "7px 6px";
        this.rh.style.margin = "auto";
        this.rh.style.fontWeight = "normal";
        this.rh.style.fontSize = "14px";
        this.rh.style.fontFamily = "UbuntuRegular";
        this.rh.style.cursor = "pointer";
        this.rh.innerText = xl;
        this.rh.onclick = function () {
            a.getUserMedia();
        };
        b.appendChild(this.rh);
        c = document.createElement("div");
        c.style.marginTop = "16px";
        c.innerHTML = wl;
        var d = c.querySelector("#camAndMicInfoLink");
        null !== d &&
            (d.onclick = function () {
                return F("DevicePermsInfoLinkClicked");
            });
        b.appendChild(c);
        this.element.appendChild(b);
        return b;
    };
    k.MI = function () {
        var a = this,
            b = document.createElement("div");
        O(b, "settingsPanel");
        b.style.width = "100%";
        b.style.height = "158px";
        b.style.marginBottom = "5px";
        b.style.borderWidth = "1px";
        b.style.borderStyle = "solid";
        b.style.boxSizing = "border-box";
        var c = YM(Jl);
        c.style.lineHeight = "28px";
        c.style.paddingTop = "8px";
        b.appendChild(c);
        c = $M();
        c.style.marginTop = "8px";
        c.style.height = "32px";
        b.appendChild(c);
        var d = ZM(Kl);
        d.style.marginTop = "16px";
        d.style.fontSize = "12px";
        d.style.paddingTop = "0";
        b.appendChild(d);
        d = $M();
        d.style.marginTop = "5px";
        d.style.height = "32px";
        b.appendChild(d);
        c.onchange = function () {
            jN(a);
        };
        d.onchange = function () {
            kN(a);
        };
        this.jn = c;
        this.ti = d;
        return b;
    };
    k.QI = function () {
        function a(p) {
            if (void 0 !== b.Db) {
                if (!b.Db.Mu(p)) return !1;
            } else return !1;
            p ? pv(m, !0) : pv(m, !1);
            bc("broadcast_muted", String(p), 60);
            return !0;
        }
        var b = this,
            c = document.createElement("div");
        O(c, "settingsPanel");
        c.style.width = "100%";
        c.style.height = "162px";
        c.style.paddingTop = "8px";
        c.style.borderWidth = "1px";
        c.style.borderStyle = "solid";
        c.style.boxSizing = "border-box";
        var d = YM(Ll);
        d.style.lineHeight = "28px";
        c.appendChild(d);
        var e = $M();
        c.appendChild(e);
        e.style.marginTop = "8px";
        e.style.height = "32px";
        e.onchange = function () {
            var p = e.selectedIndex;
            0 <= p && ((p = e.options[p]), (b.Wb.Ht = p.value), bc("selected_mic", p.value, 60), b.start());
        };
        if ((d = Va())) {
            var f = document.createElement("div"),
                g = ZM(Ml + ":");
            g.style.paddingTop = "16px";
            g.style.paddingLeft = "8px";
            g.style.display = "inline-block";
            for (var h = 16; 85 < Cd(Ml + ":", h + "px UbuntuRegular") && 1 < h; ) --h;
            g.style.fontSize = h + "px";
            f.appendChild(g);
            g = document.createElement("div");
            O(g, "inputLevelBar");
            g.style.width = "82px";
            g.style.margin = "23px 8px 0 10px";
            g.style.borderWidth = "1px";
            g.style.borderStyle = "solid";
            g.style.display = "inline-block";
            g.style.height = "7px";
            h = document.createElement("div");
            h.style.width = "78px";
            h.style.height = "7px";
            h.style.width = "0%";
            h.style.backgroundColor = "lightgreen";
            this.JA = h;
            g.appendChild(h);
            f.appendChild(g);
            c.appendChild(f);
        }
        f = document.createElement("div");
        var m = new qv(16, !1, function () {
            var p = !b.Wb.muted;
            a(p) && (b.Wb.muted = p);
        });
        m.Va.value = "Mute";
        m.element.id = "mutebox";
        m.element.style.marginTop = "8px";
        m.element.style.marginLeft = "8px";
        m.disable();
        var n = window.setInterval(function () {
            a(b.Wb.muted) && (m.enable(), clearInterval(n));
        }, 200);
        f.appendChild(m.element);
        g = document.createElement("label");
        g.textContent = Nl;
        g.htmlFor = "mutebox";
        g.style.paddingLeft = "5px";
        g.style.transform = "translateY(-4px)";
        g.style.fontFamily = "UbuntuRegular";
        g.style.fontSize = "14px";
        g.style.display = "inline-block";
        g.style.lineHeight = "22px";
        f.appendChild(g);
        d || ((m.element.style.marginTop = "100px"), (g.style.marginTop = "70px"));
        c.appendChild(f);
        this.fo = e;
        return c;
    };
    k.lC = function () {
        var a = document.createElement("div");
        a.style.width = "289px";
        a.style.cssFloat = "left";
        a.style.height = "318px";
        a.style.padding = "10px 0 10px 0";
        var b = aN();
        b.style.width = this.videoWidth + "px";
        b.style.height = "150px";
        b.style.marginLeft = "10px";
        b.style.marginRight = "10px";
        a.appendChild(b);
        this.video = b;
        b = document.createElement("div");
        O(b, "hdLabel");
        b.style.fontSize = "24px";
        b.style.fontFamily = "UbuntuBold";
        b.style.marginLeft = "10px";
        b.style.marginTop = "10px";
        b.textContent = "HD";
        b.style.visibility = "hidden";
        this.yK = b;
        a.appendChild(b);
        a.appendChild(this.hC());
        b = ZM(Sl + ":");
        b.style.fontSize = "11px";
        b.style.paddingLeft = "0";
        b.style.paddingTop = "5px";
        b.style.textAlign = "center";
        a.appendChild(b);
        b = document.createElement("div");
        b.style.textAlign = "center";
        var c = document.createElement("a");
        O(c, "hrefColor");
        c.style.fontSize = "12px";
        c.text = Tl;
        c.style.cursor = "pointer";
        b.appendChild(c);
        a.appendChild(b);
        c.onclick = function () {};
        return a;
    };
    k.hC = function () {
        var a = this,
            b = document.createElement("div");
        b.style.textAlign = "center";
        var c = document.createElement("button");
        O(c, "startButton");
        c.style.marginTop = "75px";
        c.style.width = "268px";
        c.style.height = "32px";
        c.style.fontWeight = "normal";
        c.style.fontSize = "14px";
        c.textContent = Pl;
        c.style.fontFamily = "UbuntuBold";
        c.style.cursor = "pointer";
        b.appendChild(c);
        c.disabled = !0;
        c.onclick = function () {
            if (a.M)
                if ("s" === a.M.nc && void 0 === a.M.bv) {
                    var d = new VL();
                    Rd(d.element, function () {
                        WM(new FormData(d.element))
                            .then(function (e) {
                                a.M && (a.M.bv = e);
                                a.Zu();
                            })
                            .catch(function () {});
                    });
                } else a.Zu();
            v(
                "keydown",
                window,
                function (e) {
                    "Escape" === e.key && e.stopImmediatePropagation();
                },
                !0
            );
        };
        this.Wz = c;
        return b;
    };
    function eN(a, b) {
        a.Wz.disabled = b;
        a.Wz.style.opacity = b ? ".5" : "1";
        a.Wz.style.cursor = b ? "default" : "pointer";
    }
    k.Zu = function () {
        var a = this;
        sc()
            .then(function (b) {
                "" !== b
                    ? (R(Pe(b)),
                      eN(a, !0),
                      tc(function () {
                          eN(a, !1);
                      }))
                    : a
                          .stop()
                          .then(function () {
                              a.config.Ly();
                          })
                          .catch(function () {});
            })
            .catch(function () {});
    };
    function nN(a, b, c) {
        cN.call(this, a, b, c);
    }
    q(nN, cN);
    k = nN.prototype;
    k.stop = function () {
        return cN.prototype.stop.call(this);
    };
    k.start = function () {
        cN.prototype.start.call(this);
    };
    k.SI = function () {
        this.element.style.width = "402px";
        this.element.style.backgroundColor = "transparent";
        this.element.style.position = "relative";
        this.element.appendChild(this.js());
        var a = this.element,
            b = a.appendChild,
            c = document.createElement("div");
        c.style.display = "inline-block";
        c.style.position = "relative";
        c.style.right = "-1px";
        c.style.width = c.style.height = "17px";
        c.style.cssFloat = "right";
        c.style.cursor = "pointer";
        c.onclick = this.config.uj;
        var d = document.createElement("img");
        d.src = "https://static-assets.highwebmedia.com/tsdefaultassets/close-gray.svg";
        d.style.width = d.style.height = "100%";
        c.appendChild(d);
        b.call(a, c);
        this.element.appendChild(this.lC());
        a = this.element;
        b = a.appendChild;
        c = document.createElement("div");
        O(c, "infoPanel");
        c.style.marginTop = "6px";
        c.style.padding = "6px 5px 9px 4px";
        c.style.borderWidth = "1px";
        c.style.borderStyle = "solid";
        c.style.boxSizing = "border-box";
        var e;
        d = l(this.config.xR);
        for (e = d.next(); !e.done; e = d.next()) {
            e = e.value;
            var f = document.createElement("div");
            f.style.fontFamily = "UbuntuRegular";
            f.style.fontStyle = "normal";
            f.style.fontWeight = "bold";
            f.style.fontSize = "12px";
            f.style.lineHeight = "14px";
            f.style.textAlign = "center";
            f.textContent = e;
            c.appendChild(f);
        }
        b.call(a, c);
        this.element.appendChild(this.vw());
        this.element.appendChild(this.hC());
    };
    k.js = function () {
        var a = document.createElement("div");
        a.style.width = "200px";
        a.style.height = "26px";
        a.style.display = "inline-block";
        var b = document.createElement("div");
        O(b, "title");
        b.style.fontFamily = "UbuntuBold";
        b.style.fontSize = "18px";
        b.textContent = this.config.title;
        a.appendChild(b);
        return a;
    };
    k.lC = function () {
        this.videoWidth = 400;
        var a = document.createElement("div");
        a.style.textAlign = "center";
        var b = aN();
        b.style.width = this.videoWidth + "px";
        b.style.height = this.videoWidth / this.SO + "px";
        a.appendChild(b);
        this.video = b;
        return a;
    };
    k.vw = function () {
        var a = cN.prototype.vw.call(this);
        a.style.width = "100%";
        a.style.height = "auto";
        a.style.padding = "9px 0px 0px 0px";
        a.style.cssFloat = "";
        return a;
    };
    k.XB = function () {
        var a = cN.prototype.XB.call(this);
        a.style.top = "11%";
        return a;
    };
    k.MI = function () {
        var a = this,
            b = document.createElement("div");
        O(b, "settingsPanel");
        b.style.width = "100%";
        b.style.height = "68px";
        b.style.paddingTop = "5px";
        b.style.borderWidth = "2px";
        b.style.borderStyle = "solid";
        b.style.boxSizing = "border-box";
        var c = document.createElement("div");
        c.style.display = "inline-block";
        var d = oN(Jl),
            e = $M();
        e.style.marginLeft = "8px";
        e.style.marginTop = "8px";
        c.appendChild(d);
        c.appendChild(e);
        d = document.createElement("div");
        d.style.display = "inline-block";
        d.style.paddingLeft = "16px";
        var f = oN(Kl);
        f.style.paddingLeft = "10px";
        var g = $M();
        g.style.marginTop = "8px";
        d.appendChild(f);
        d.appendChild(g);
        b.appendChild(c);
        b.appendChild(d);
        e.onchange = function () {
            jN(a);
        };
        g.onchange = function () {
            kN(a);
        };
        this.jn = e;
        this.ti = g;
        return b;
    };
    k.QI = function () {
        this.Wb.Ht = "we-only-need-a-silent-mic";
        var a = document.createElement("div");
        a.style.display = "none";
        return a;
    };
    k.hC = function () {
        var a = this,
            b = document.createElement("div");
        b.style.textAlign = "center";
        b.style.paddingTop = "10px";
        var c = document.createElement("button");
        O(c, "startButton");
        c.style.width = "305px";
        c.style.height = "27px";
        c.style.borderWidth = "1px";
        c.style.borderStyle = "solid";
        c.style.borderRadius = "4px";
        c.textContent = this.config.iU;
        c.style.fontFamily = "UbuntuBold";
        c.style.fontSize = "16px";
        c.style.cursor = "pointer";
        c.style.whiteSpace = "nowrap";
        c.style.overflow = "hidden";
        c.style.textOverflow = "ellipsis";
        b.appendChild(c);
        c.disabled = !0;
        c.onclick = function () {
            c.disabled = !0;
            a.Zu();
        };
        this.Wz = c;
        return b;
    };
    function oN(a) {
        var b = document.createElement("div");
        b.style.paddingLeft = "8px";
        b.style.paddingTop = "3px";
        b.style.fontSize = "16px";
        b.style.fontFamily = "UbuntuBold";
        b.textContent = a;
        return b;
    }
    function pN(a, b, c) {
        function d() {
            var p = performance.now(),
                u = window.setInterval(function () {
                    if (n) {
                        var x = performance.now(),
                            D = Math.floor((x - p) / 1e3);
                        1 > D ||
                            (10 <= D && (p = x),
                            void 0 !== f.Op && (f.Op.textContent = ""),
                            void 0 !== f.status &&
                                ((f.status.textContent = Ul + " " + (10 - D + 1) + "..."),
                                33 < f.status.textContent.length ? (f.status.style.paddingTop = "2px") : "ja" === xL ? (f.status.style.fontSize = "14px") : (f.status.style.paddingTop = "10px")));
                    } else clearInterval(u);
                }, 200);
        }
        function e(p, u) {
            void 0 !== f.status &&
                void 0 !== f.KA &&
                (!0 !== u || h
                    ? !0 !== u &&
                      h &&
                      ((f.status.style.color = "black"),
                      (f.status.style.fontFamily = "UbuntuRegular"),
                      (f.status.style.width = ""),
                      (f.status.style.paddingLeft = "0px"),
                      (f.status.style.cssFloat = "none"),
                      (f.status.title = ""),
                      (f.KA.style.display = "none"),
                      (h = !1))
                    : ((h = !0),
                      (f.status.style.color = "#D80000"),
                      (f.status.style.fontFamily = "UbuntuBold"),
                      (f.status.style.width = "28%"),
                      (f.status.style.paddingLeft = "18%"),
                      (f.status.style.cssFloat = "left"),
                      (f.status.title = f.KA.title = pl),
                      (f.KA.style.display = "")),
                (f.status.textContent = p),
                (f.status.style.paddingTop = 27 < p.length ? "2px" : "10px"));
        }
        w.call(this);
        var f = this;
        this.xG = !1;
        this.yO = 0;
        this.A = a;
        this.config = c;
        this.Wb = b;
        this.LI();
        var g = !1,
            h = !1,
            m = !1,
            n = !0;
        d();
        this.vM = function (p) {
            if (void 0 !== f.Db && f.Db.Fh === p.Fh) {
                p = p.data;
                if (void 0 !== p.fps) {
                    var u = p.fps,
                        x = 20,
                        D = 15;
                    pb() && ((x = 12), (D = 9));
                    var J = !0;
                    u = Math.round(u);
                    u >= x ? (x = "frameRateGood") : u >= D ? (x = "frameRateAvg") : ((x = "frameRateBad"), (J = !1));
                    void 0 !== f.Op && ((f.Op.className = ""), O(f.Op, x), (f.Op.textContent = u + " FPS"));
                    g = J ? !1 : !0;
                }
                void 0 !== p.status &&
                    ((p = p.status),
                    "connecting" !== p && (n = !1),
                    qN(p)
                        ? e("(Offline)")
                        : "away" !== p || m
                        ? "away" !== p && m
                            ? (void 0 !== f.Wv && (f.Wv.style.display = "none"), (f.kb.style.display = ""), (m = !1))
                            : ((u = p.charAt(0).toUpperCase() + p.slice(1)), "connecting" === p ? n || ((n = !0), d()) : g && 0 < f.yO && 5e3 < performance.now() - f.yO ? e(Cl, !0) : e("(" + u + " Broadcasting)"))
                        : ((f.kb.style.display = "none"), void 0 !== f.Wv && (f.Wv.style.display = ""), (m = !0)));
            }
        };
        this.wM = function (p) {
            void 0 === f.Db || f.Db.Fh !== p || f.xG || f.stop(!0);
        };
        cD.g(this.vM);
        aD.g(this.wM);
        this.start();
    }
    q(pN, w);
    k = pN.prototype;
    k.LI = function () {
        var a = this.$B();
        a.appendChild(this.Aw());
        a.appendChild(this.TB());
        var b = document.createElement("div");
        b.innerText = Cq;
        Q(b, { color: "#ffffff", position: "absolute", fontSize: "1.0em", fontWeight: "bold", top: "8px", left: "8px", zIndex: 100, display: "none", backgroundColor: "rgba(255, 255, 255, 0.5)", lineHeight: "150%", padding: "1px" });
        b.setAttribute("draggable", "false");
        v("orientationchange", window, function () {
            Ya && !Gu() ? ((b.style.display = ""), (b.innerText = Fu() ? Dq : Eq)) : (b.style.display = "none");
        });
        a.appendChild(b);
        var c = rN();
        c.appendChild(this.js());
        c.appendChild(sN());
        c.appendChild(this.Zi());
        O(this.element, "broadcastPanel");
        this.element.appendChild(a);
        this.element.appendChild(c);
        this.kb = a;
        this.Wv = c;
    };
    k.Qb = function () {
        return void 0 !== this.Db ? this.Db.dw : !1;
    };
    k.start = function () {
        var a = this;
        this.stop()
            .then(function () {
                function b(d, e) {
                    a.Db = new bN();
                    a.Db.Pu(a.video, a.A, a.Wb)
                        .then(function () {
                            void 0 !== a.Db &&
                                a.Db.start()
                                    .then(function () {
                                        a.Ay = function (f) {
                                            f.preventDefault();
                                            f.returnValue = !1;
                                            return Dl;
                                        };
                                        v("beforeunload", window, a.Ay);
                                        a.Oy = function () {
                                            a.stop(!0);
                                        };
                                        v(tb(), window, a.Oy);
                                        ry.h(!0);
                                        d();
                                    })
                                    .catch(function (f) {
                                        e(Vl + ": " + f.message);
                                    });
                        })
                        .catch(function (f) {
                            if (mb() && "Invalid constraint" === f.message) {
                                c += 1;
                                if (5 >= c) {
                                    a.stop()
                                        .then(function () {
                                            window.setTimeout(function () {
                                                b(d, e);
                                            }, 500);
                                        })
                                        .catch(function () {});
                                    return;
                                }
                                e(ol);
                            }
                            e(Yl + ": " + f.message);
                        });
                }
                var c = 0;
                new Promise(b).catch(function (d) {
                    R(d);
                    a.stop(!0);
                });
            })
            .catch(function () {});
    };
    k.stop = function (a) {
        var b = this;
        this.xG = !0;
        void 0 !== this.Ay && (Bb("beforeunload", window, this.Ay), (this.Ay = void 0));
        void 0 !== this.Oy && (Bb(tb(), window, this.Oy), (this.Oy = void 0));
        var c = Promise.resolve();
        void 0 !== this.Db && (c = this.Db.stop());
        !0 === a && bc("last_broadcast_dt", Date.now().toString(10), 1);
        return new Promise(function (d, e) {
            c.then(function () {
                b.xG = !1;
                !0 === a && (cD.removeListener(b.vM), aD.removeListener(b.wM), b.config.mo(), ry.h(!1));
                d();
            }).catch(e);
        });
    };
    k.$B = function () {
        var a = document.createElement("div");
        a.style.height = "382px";
        a.style.width = "100%";
        a.style.overflow = "unset";
        return a;
    };
    function rN() {
        var a = document.createElement("div");
        a.style.height = "382px";
        a.style.width = "100%";
        a.style.backgroundColor = "black";
        a.style.display = "none";
        return a;
    }
    k.Aw = function () {
        var a = aN();
        a.style.width = "100%";
        a.style.height = "370px";
        a.style.backgroundColor = "black";
        return (this.video = a);
    };
    k.TB = function () {
        function a(p) {
            if (void 0 !== b.Db) {
                if (!b.Db.Mu(p)) return !1;
            } else return !1;
            p ? O(e, "muted") : P(e, "muted");
            bc("broadcast_muted", String(p), 60);
            return !0;
        }
        var b = this,
            c = document.createElement("div");
        O(c, "controls");
        c.style.width = "100%";
        c.style.height = "35px";
        var d = document.createElement("button");
        d.style.border = "0px";
        var e = document.createElement("div");
        O(e, "muteImg");
        e.textContent = "";
        e.style.height = "20px";
        e.style.width = "20px";
        e.style.border = "0px";
        e.style.paddingTop = "9px";
        jb() && !pb() && (e.style.paddingTop = "3px");
        e.style.outline = "none";
        d.appendChild(e);
        var f = document.createElement("div");
        f.style.cssFloat = "left";
        f.style.textAlign = "center";
        f.style.height = "34px";
        f.style.borderRight = "1px solid black";
        f.style.width = "10%";
        kb() && jb() && (f.style.width = "12%");
        f.appendChild(d);
        c.appendChild(f);
        d.onclick = function () {
            var p = !b.Wb.muted;
            a(p) && (b.Wb.muted = p);
        };
        d.disabled = !0;
        var g = window.setInterval(function () {
            a(b.Wb.muted) && ((d.disabled = !1), clearInterval(g));
        }, 200);
        f = document.createElement("div");
        O(f, "inBrowserStatus");
        f.style.cssFloat = "left";
        f.style.textAlign = "center";
        f.style.height = "34px";
        f.style.width = "51%";
        kb() && jb() && (f.style.width = "44%");
        f.style.borderRight = "1px solid black";
        f.style.padding = "0px";
        f.style.fontFamily = "UbuntuRegular";
        var h = YM("");
        h.style.cssFloat = "left";
        h.style.paddingLeft = "5px";
        h.style.paddingTop = "10px";
        var m = ZM("");
        m.style.paddingLeft = "0px";
        var n = document.createElement("img");
        n.src = "https://static-assets.highwebmedia.com/broadcastassets/warning.png";
        n.style.height = "16px";
        n.style.paddingTop = "9px";
        n.style.paddingLeft = "5px";
        n.style.display = "none";
        n.style.cssFloat = "left";
        f.appendChild(h);
        f.appendChild(m);
        f.appendChild(n);
        this.Op = h;
        this.status = m;
        this.KA = n;
        c.appendChild(f);
        f = document.createElement("button");
        h = document.createElement("input");
        h.type = "image";
        h.src = "https://static-assets.highwebmedia.com/broadcastassets/stop.svg";
        h.style.verticalAlign = "middle";
        h.style.height = "16px";
        h.style.paddingTop = "1px";
        f.appendChild(h);
        h = document.createElement("span");
        h.style.fontFamily = "UbuntuRegular";
        h.textContent = h.innerText = Ql;
        m = h.innerText.length;
        24 < m ? ((h.style.fontSize = "11px"), (h.style.paddingLeft = "1px")) : 24 > m && 18 < m ? ((h.style.fontSize = "13px"), (h.style.paddingLeft = "2px")) : ((h.style.fontSize = "18px"), (h.style.paddingLeft = "7px"));
        h.style.verticalAlign = "middle";
        f.appendChild(h);
        f.style.paddingTop = "5px";
        f.style.cssFloat = "right";
        f.style.border = "0";
        h = document.createElement("div");
        h.style.cssFloat = "left";
        h.style.textAlign = "center";
        h.style.height = "34px";
        h.appendChild(f);
        c.appendChild(h);
        f.onclick = function () {
            b.stop(!0);
        };
        return c;
    };
    k.js = function () {
        var a = document.createElement("div");
        a.style.textAlign = "center";
        a.style.paddingTop = "90px";
        var b = document.createElement("span");
        O(b, "awayTitle");
        b.textContent = Rl;
        b.style.fontFamily = "UbuntuRegular";
        b.style.fontSize = "40px";
        a.appendChild(b);
        return a;
    };
    function sN() {
        var a = document.createElement("div");
        a.style.textAlign = "center";
        a.style.paddingLeft = "16%";
        a.style.paddingRight = "16%";
        a.style.paddingTop = "50px";
        var b = document.createElement("span");
        O(b, "inBrowserAwayMessage");
        b.style.fontFamily = "UbuntuRegular";
        b.style.fontSize = "14px";
        b.textContent = El;
        a.appendChild(b);
        return a;
    }
    k.Zi = function () {
        var a = document.createElement("div");
        a.style.textAlign = "center";
        a.style.paddingTop = "35px";
        var b = document.createElement("a");
        O(b, "awayLink");
        b.text = Fl;
        b.style.fontFamily = "UbuntuRegular";
        b.style.fontSize = "20px";
        b.style.cursor = "pointer";
        b.style.textDecoration = "underline";
        a.appendChild(b);
        b.onclick = function () {
            TB();
        };
        return a;
    };
    function qN(a) {
        return !XM.some(function (b) {
            return b === a;
        });
    }
    var bD, tN;
    v("pageshow", window, function (a) {
        a.persisted && void 0 !== tN && uN(tN);
    });
    Or.push(function () {
        return new Promise(function (a, b) {
            void 0 !== tN && tN.Qb()
                ? Md(
                      qm,
                      function () {
                          void 0 !== tN ? a(uN(tN)) : a();
                      },
                      b
                  )
                : a();
        });
    });
    var vN = new y("showMyCamDidNotStart");
    function wN(a, b, c) {
        if (!ub() || sb() || ib()) return !1;
        var d;
        G.g(function (e) {
            void 0 !== tN && e.l.j() !== tN.Ok.j() && (tN.pw(), (tN = void 0));
            if (e.l.Fd)
                b.h(function () {
                    Su({});
                });
            else {
                void 0 === tN && (tN = new xN(e.l, a));
                var f = function () {
                    c.h("starting");
                    b.h(function () {});
                    void 0 !== d && d.removeListener();
                    d = vN.g(function () {
                        c.h("stopped");
                        b.h(f);
                    }, !1);
                    C("api/ts/chat/can-share-cam/" + e.A.j + "/")
                        .then(function (g) {
                            g = new H(g.responseText);
                            M(g, "can_share") && 0 === Rc(g, "shared_cam").length
                                ? void 0 !== tN && yN()
                                : (M(g, "is_grey")
                                      ? Md(im, function () {
                                            var h = "/tipping/purchase_tokens/?source=" + A.current.Ub.TOKEN_SOURCE_SHOW_MY_CAM;
                                            F("SharedCamPurchaseTokensClicked");
                                            uu(h, "_blank", "height=615, width=850, scrollbars=1");
                                        })
                                      : M(g, "is_private")
                                      ? R(hm)
                                      : 0 < Rc(g, "shared_cam").length
                                      ? (R(bm), F("SharedCamAlreadySharing"))
                                      : R(L(g, "message")),
                                  vN.h(void 0));
                        })
                        .catch(function () {});
                };
                tN.Ly.push(function () {
                    c.h("started");
                    b.h(function () {
                        F("SharedCamBroadcastStopClicked");
                        void 0 !== tN && uN(tN, !0);
                    });
                });
                tN.mo.push(function () {
                    c.h("inactiveStopped");
                    b.h(function () {
                        var g = T(S("Please allow up to %(sec)s seconds before sharing your cam again."), { sec: 5 }, !0);
                        R(g);
                    });
                    window.setTimeout(function () {
                        c.h("stopped");
                        b.h(function () {
                            f();
                        });
                    }, 5e3);
                });
                b.h(function () {
                    f();
                });
            }
        });
        return !0;
    }
    function zN(a, b) {
        var c = new y("requestChangeClickListener"),
            d = new y("showMyCamStateChanged");
        c.g(function (e) {
            a.onclick = e;
        });
        d.g(function (e) {
            switch (e) {
                case "starting":
                    a.textContent = $l;
                    a.style.opacity = "0.5";
                    a.style.cursor = "default";
                    break;
                case "started":
                    a.textContent = am;
                    a.style.opacity = "1";
                    a.style.cursor = "pointer";
                    break;
                case "inactiveStopped":
                    a.textContent = $l;
                    a.style.opacity = "0.5";
                    a.style.cursor = "default";
                    break;
                case "stopped":
                    (a.textContent = $l), (a.style.opacity = "1"), (a.style.cursor = "pointer");
            }
        });
        return wN(b, c, d);
    }
    function xN(a, b) {
        var c = this,
            d;
        this.Ly = [];
        this.mo = [];
        this.H = new Ub();
        this.Zu = function () {
            void 0 !== c.ku && c.ku.B();
            F("SharedCamBroadcastStartClicked");
            if (c.qz || c.nw) R(gm), vN.h(void 0);
            else {
                var e = c.mo;
                c.mo = [];
                uN(c)
                    .then(function () {
                        c.mo = e;
                        var f = !1,
                            g = window.setTimeout(function () {
                                void 0 !== c.Lh && AN(c.Lh);
                                F("SharedCamBroadcastStartTimedOut");
                                R(em);
                                r("smcViewer - timeout starting cam", "smcViewer.ts", "showMyCam");
                                f = !0;
                            }, 2e4);
                        E("api/ts/chat/share-my-cam/", { username: c.Ok.j() })
                            .then(function () {
                                if (!f) {
                                    c.Lh = new BN(c.ZH, c.Wb, c.AP, c.Ok, g);
                                    c.Lh.kG();
                                    v(nd(), document, c.Lh.kG);
                                    for (var h = l(c.Ly), m = h.next(); !m.done; m = h.next()) (m = m.value), m();
                                }
                            })
                            .catch(function () {
                                f || (R(dm), vN.h(void 0));
                            });
                    })
                    .catch(function () {});
            }
        };
        this.AP = function () {
            void 0 !== c.Lh && (Bb(nd(), document, c.Lh.kG), c.Lh.ps && c.Ok.event.ya.h({ wa: [[Zr(pD(c.Ok.j())), W(km)]], Fa: !0 }));
            c.Lh = void 0;
            for (var e = l(c.mo), f = e.next(); !f.done; f = e.next()) (f = f.value), f();
        };
        this.Ok = a;
        this.Wb = { Ht: "", tp: "", width: 0, height: 0, muted: !0 };
        this.qz = !0;
        z(
            b.g(function (e) {
                (c.qz = e) && uN(c);
            }, !1),
            this.H
        );
        this.nw = !0;
        z(
            a.event.Mc.g(function (e) {
                c.nw = "notconnected" === e.Sa;
                switch (e.Sa) {
                    case "privatenotwatching":
                    case "privatespying":
                    case "passwordprotected":
                    case "notconnected":
                        uN(c);
                }
            }),
            this.H
        );
        a = null === (d = A.current.V) || void 0 === d ? void 0 : d.yc;
        void 0 !== a &&
            z(
                new $t(a).ea.g(function (e) {
                    e.Fj ? Yt.h(e) : Zt.h(e);
                }),
                this.H
            );
    }
    function yN() {
        var a = tN;
        F("SharedCamStartClicked");
        a.qz || a.nw
            ? (R(gm), vN.h(void 0))
            : rc(a.Ok.username())
                  .then(function (b) {
                      b
                          ? (R(bm), vN.h(void 0))
                          : "1" === ac("broadcast_terms")
                          ? CN(a)
                          : new gD(
                                !1,
                                function () {
                                    CN(a);
                                },
                                function () {
                                    vN.h(void 0);
                                }
                            ).show();
                  })
                  .catch(function () {});
    }
    function uN(a, b) {
        return void 0 !== a.Lh ? AN(a.Lh, void 0 === b ? !1 : b) : Promise.resolve();
    }
    xN.prototype.pw = function () {
        uN(this);
        Vb(this.H);
    };
    function CN(a) {
        a.qz || a.nw
            ? (R(gm), vN.h(void 0))
            : oC()
                  .then(function (b) {
                      a.ZH = b;
                      void 0 !== a.ku && a.ku.B();
                      a.ku = new DN(a.ZH, a.Wb, a.Zu, a.Ok.j());
                      a.ku.show();
                  })
                  .catch(function () {});
    }
    xN.prototype.Qb = function () {
        return void 0 !== this.Lh;
    };
    function DN(a, b, c, d) {
        Yr.call(this);
        var e = this;
        this.paused = !1;
        this.iu = !0;
        this.S.style.backgroundColor = "rgba(0, 0, 0, 0.4)";
        O(this.element, "smc-preview-modal");
        this.element.style.boxShadow = "0px 0px 10px rgba(0, 0, 0, 0.3)";
        this.element.style.position = "fixed";
        this.element.style.overflow = "hidden";
        this.element.style.height = "auto";
        this.element.style.width = "422px";
        this.element.style.top = "50%";
        this.element.style.left = "50%";
        this.element.style.transform = "translate(-50%, -56%)";
        this.element.style.borderRadius = "6px";
        this.oF = new nN(a, b, {
            VX: function () {},
            Ly: c,
            title: Zl,
            xR: [Oe(d), cm],
            iU: Ne(d),
            uj: function () {
                vN.h(void 0);
                e.B();
            },
        });
        this.element.style.padding = "8px 10px";
        this.element.style.boxSizing = "border-box";
        this.fc.g(function () {
            vN.h(void 0);
            e.B();
        });
        this.G(this.oF);
    }
    q(DN, Yr);
    DN.prototype.show = function () {
        this.paused && this.oF.start();
        Yr.prototype.show.call(this);
        F("SharedCamPreviewDisplayed");
    };
    DN.prototype.B = function () {
        Yr.prototype.B.call(this);
        this.oF.stop();
        this.paused = !0;
    };
    function BN(a, b, c, d, e) {
        pN.call(this, a, b, {
            mo: function () {
                oc("api/ts/chat/share-my-cam/?", { username: f.Cu });
                null !== f.element.parentElement && f.element.parentElement.removeChild(f.element);
                Vb(f.H);
                bD = void 0;
                c();
            },
        });
        var f = this;
        this.Ok = d;
        this.ps = !1;
        this.H = new Ub();
        this.right = this.Ui = this.bottom = 16;
        this.Pp = 32;
        this.Qp = 0;
        this.Dw = new Map();
        this.kG = function () {
            var h = md();
            pd() && void 0 !== h
                ? (h.appendChild(f.element), (f.kb.style.bottom = f.Pp + "px"), (f.kb.style.right = f.Qp + "px"))
                : (document.body.appendChild(f.element), (f.kb.style.bottom = f.bottom + "px"), (f.kb.style.right = f.right + "px"));
        };
        this.Cu = d.j();
        this.cD();
        this.element.style.height = "auto";
        this.element.style.width = "auto";
        this.kb = this.$B();
        this.kb.appendChild(EN(this));
        this.kb.appendChild(this.Aw());
        this.kb.appendChild(this.TB());
        this.element.appendChild(this.kb);
        FN(this);
        gw.g(function () {
            GN(f);
        });
        var g = !0;
        z(
            cD.g(function (h) {
                h = h.data.status;
                "connecting" !== h && g && "hidden" === h ? (clearTimeout(e), (g = !1), HN(f)) : !g && qN(h) && (AN(f), R(dm), r("smcViewer - cam went offline", "smcViewer.ts", "showMyCam"));
            }, !1),
            this.H
        );
        z(
            IN.g(function () {
                GN(f);
            }),
            this.H
        );
    }
    q(BN, pN);
    function HN(a) {
        F("SharedCamBroadcastStarted");
        bD = a.Cu;
        z(
            Yt.g(function (b) {
                JN(a, !0, b);
            }, !1),
            a.H
        );
        z(
            Zt.g(function (b) {
                JN(a, !1, b);
            }, !1),
            a.H
        );
    }
    function AN(a, b) {
        b = void 0 === b ? !1 : b;
        v(
            "mouseenter",
            a.element,
            function (c) {
                c.stopPropagation();
            },
            !0
        );
        v(
            "mouseleave",
            a.element,
            function (c) {
                c.stopPropagation();
            },
            !0
        );
        b && F("SharedCamBroadcastStopClicked", { SW: a.ps });
        return a.stop(!0);
    }
    function JN(a, b, c) {
        a.ps = b;
        if (b) {
            if (!a.Dw.has(c.username)) {
                a.Uo.src = "https://static-assets.highwebmedia.com/broadcastassets/active-cam-overlaying-video.svg";
                a.kO.textContent = a.Cu + " " + lm;
                a.Dw.set(c.username, c);
                var d = jm;
            }
        } else a.Dw.has(c.username) && ((a.Uo.src = "https://static-assets.highwebmedia.com/broadcastassets/inactive-cam-overlaying-video.svg"), (a.kO.textContent = a.Cu + " " + mm), a.Dw.delete(c.username), (d = km));
        void 0 !== d && a.Ok.event.ya.h({ wa: [[Zr(pD(c.username)), W(d)]], Fa: !0 });
    }
    k = BN.prototype;
    k.LI = function () {};
    k.$B = function () {
        var a = document.createElement("div");
        a.style.height = "117px";
        a.style.width = (117 * this.Wb.width) / this.Wb.height + "px";
        a.style.backgroundColor = "#000";
        a.style.position = "fixed";
        a.style.zIndex = "1003";
        a.style.border = "1px solid #FFF";
        return a;
    };
    function EN(a) {
        var b = document.createElement("div");
        b.style.position = "absolute";
        b.style.right = "5px";
        b.style.top = "5px";
        b.style.width = b.style.height = "15px";
        b.style.zIndex = "1005";
        var c = document.createElement("img");
        c.src = "https://static-assets.highwebmedia.com/broadcastassets/inactive-cam-overlaying-video.svg";
        var d = document.createElement("div");
        d.style.position = "absolute";
        d.style.backgroundColor = "#303030";
        d.style.border = "1px solid #222222";
        d.style.color = "#EEE";
        d.style.width = "175px";
        d.style.padding = "9px";
        d.style.borderRadius = "4px";
        d.style.fontSize = "12px";
        d.style.display = "none";
        d.style.zIndex = "5";
        d.style.bottom = "25px";
        d.style.left = "-168px";
        var e = document.createElement("span");
        e.textContent = a.Cu + " " + mm;
        d.appendChild(e);
        d.appendChild(nr("#222222", "#303030", "168px", 2));
        b.appendChild(c);
        b.appendChild(d);
        a.Uo = c;
        a.Yz = d;
        a.kO = e;
        return b;
    }
    k.Aw = function () {
        var a = pN.prototype.Aw.call(this);
        a.style.height = "100%";
        return a;
    };
    k.TB = function () {
        var a = this,
            b = pc(),
            c = document.createElement("div");
        c.style.width = "100%";
        c.style.height = "26px";
        c.style.backgroundColor = "rgba(0, 0, 0, 0.4)";
        c.style.cursor = "move";
        KN(this, c);
        var d = document.createElement("div");
        d.style.paddingLeft = "10px";
        d.style.position = "relative";
        d.style.top = "50%";
        d.style.transform = "translateY(-50%)";
        d.style.color = "#FFF";
        d.style.cursor = "default";
        d.textContent = pm;
        d.style.cursor = "move";
        KN(this, d);
        c.appendChild(d);
        b.appendChild(c);
        c = qc({ NK: "broadcastassets/volume-mute-grey.svg", Df: nm, DD: 31, kI: "60%" });
        c.style.left = "50%";
        c.style.transform = "translateX(calc(-50% - 30px))";
        b.appendChild(c);
        c = qc({
            NK: "broadcastassets/close.svg",
            Df: om,
            DD: 23,
            kI: "60%",
            onClick: function () {
                AN(a, !0);
            },
        });
        c.style.left = "50%";
        c.style.transform = "translateX(calc(-50% + 30px))";
        b.appendChild(c);
        return (this.controls = b);
    };
    function FN(a) {
        function b() {
            a.controls.style.display = "none";
            a.Uo.src = a.ps ? "https://static-assets.highwebmedia.com/broadcastassets/active-cam-overlaying-video.svg" : "https://static-assets.highwebmedia.com/broadcastassets/inactive-cam-overlaying-video.svg";
        }
        function c() {
            a.controls.style.display = "block";
            a.Uo.src = a.ps ? "https://static-assets.highwebmedia.com/broadcastassets/active-cam.svg" : "https://static-assets.highwebmedia.com/broadcastassets/inactive-cam.svg";
        }
        v("mouseenter", a.kb, c);
        v("mouseleave", a.kb, b);
        var d = 0;
        v("touchstart", a.kb, function () {
            "none" === a.controls.style.display ? (c(), (d = 1)) : (d += 1);
        });
        v("touchend", a.kb, function () {
            1 < d && b();
        });
        v("touchstart", document, function (e) {
            a.element.contains(e.target) || b();
        });
        v("mouseenter", a.Uo, function () {
            a.Yz.style.display = "block";
        });
        v("mouseleave", a.Uo, function () {
            a.Yz.style.display = "none";
        });
        v("touchstart", a.Uo, function () {
            a.Yz.style.display = "block";
        });
        v(
            "touchstart",
            document,
            function () {
                a.Yz.style.display = "none";
            },
            !0
        );
    }
    function KN(a, b) {
        vy(b, function (c, d, e) {
            var f = LN(a, pd() ? a.Qp : a.right),
                g = MN(a, pd() ? a.Pp : a.bottom),
                h = f,
                m = g;
            return {
                enabled: !0,
                move: function (n, p) {
                    n -= d;
                    m = MN(a, g - (p - e));
                    h = LN(a, f - n);
                    a.kb.style.bottom = m + "px";
                    a.kb.style.right = h + "px";
                },
                end: function () {
                    pd() ? ((a.Qp = h), (a.Pp = m)) : ((a.right = h), (a.bottom = m), (a.Ui = m));
                    a.TF();
                },
            };
        });
    }
    function MN(a, b) {
        return Math.max(0, Math.min(window.innerHeight - a.kb.offsetHeight, b));
    }
    function LN(a, b) {
        return Math.max(0, Math.min(window.innerWidth - a.kb.offsetWidth, b));
    }
    function GN(a) {
        if (pd()) (a.kb.style.bottom = MN(a, a.Pp) + "px"), (a.kb.style.right = LN(a, a.Qp) + "px");
        else {
            var b = NN();
            a.bottom = 0 < b ? Math.max(a.Ui, b + 4) : a.Ui;
            a.kb.style.bottom = MN(a, a.bottom) + "px";
            a.kb.style.right = LN(a, a.right) + "px";
        }
    }
    k.cD = function () {
        if (Qa()) {
            var a = window.localStorage.getItem("smcBroadcastSettings");
            null !== a && ((a = JSON.parse(a)), (this.Ui = this.bottom = a.bottom), (this.right = a.right), (this.Pp = a.fullscreenBottom), (this.Qp = a.fullscreenRight));
        }
    };
    k.TF = function () {
        Qa() && window.localStorage.setItem("smcBroadcastSettings", JSON.stringify({ bottom: this.bottom, right: this.right, fullscreenBottom: this.Pp, fullscreenRight: this.Qp }));
    };
    function ON() {
        this.Jn = 0;
    }
    function PN(a) {
        a.Jn += 1;
        return Math.min(1e4, 1e3 * a.Jn);
    }
    ON.prototype.reset = function () {
        this.Jn = 0;
    };
    function QN() {
        Wy(this, function b() {
            return Aa(b, function (c) {
                return sa(c, E(RN, {}), 0);
            });
        });
    }
    function SN(a) {
        return Wy(this, function c() {
            var d = this,
                e;
            return Aa(c, function (f) {
                e = d;
                return f.return(
                    new Promise(function (g) {
                        return Wy(e, function m() {
                            var n;
                            return Aa(m, function (p) {
                                if (1 == p.aa) return sa(p, C("" + TN + encodeURI(a)), 2);
                                n = p.td;
                                g(UN(n.responseText));
                                p.aa = 0;
                            });
                        });
                    })
                );
            });
        });
    }
    function UN(a) {
        if (void 0 !== a && ((a = JSON.parse(a)), null !== a)) return { description: a.description, aK: a.game_url, image: a.image_64x64, name: a.name, uid: a.uid, Oc: a.viewers };
    }
    var RN = "api/ts/games/deselect/",
        TN = "api/ts/games/current/room/",
        VN = new y("gameSelectionChanged");
    function WN(a, b, c, d, e, f) {
        function g(p) {
            if (void 0 !== m) {
                var u = m.Ib;
                "s" === p.value || "t" === p.value ? (u.style.display = "inline") : ((u.style.display = "none"), (u.value = ""));
            }
        }
        QM.call(this, a, b, { pa: { Hp: new XN(), input: new XN(), select: new YN(), Va: new ZN(), $L: new $N() }, Vt: c, xt: !1 });
        this.LJ = { username: !0, password: !0, email: !0, birthday: !0 };
        this.Sx = d;
        a = ["username", "password", "email"];
        b = ["username", "email"];
        this.HR = this.Sx ? b : a;
        this.TP = ["gender", "subgender", "terms", "privacy_policy"];
        this.fg = this.vn();
        a = document.createElement("input");
        a.type = "hidden";
        a.name = "csrfmiddlewaretoken";
        a.value = ac("csrftoken");
        this.element.appendChild(a);
        a = this.mb;
        a.style.marginLeft = "0";
        a.style.width = "100%";
        a.style.height = "40px";
        a.style.fontSize = "18px";
        this.mb.value = If.toLocaleUpperCase();
        (a = this.Oa("username")) && a.Ib.setAttribute("data-formvalidate-sign-url", "accounts/ajax_validate_recaptcha3/");
        if ((a = this.Oa("password"))) a.Ib.type = "password";
        if ((a = this.Oa("prove_you_are_human"))) (a = a.Oa()), (b = a.querySelector("th")), (c = a.querySelector("td")), (d = document.createElement("td")), b && c && (a.appendChild(d), a.appendChild(b), a.appendChild(c));
        var h = this.Oa("gender"),
            m = this.Oa("subgender");
        if ((a = null === m || void 0 === m ? void 0 : m.Oa())) a.style.display = "none";
        aO(this);
        if (void 0 !== h) {
            var n = h.Ib;
            g(n);
            h.Lo(function () {
                "c" === n.value ? zM(h, Kg) : zM(h, Jg);
                g(n);
            });
        }
        bO(this);
        cO(this);
        dO(this, e, f);
    }
    q(WN, QM);
    function dO(a, b, c) {
        var d,
            e,
            f,
            g,
            h,
            m,
            n,
            p,
            u = null === (d = a.Oa("username")) || void 0 === d ? void 0 : d.Ib;
        d = null === (e = a.Oa("password")) || void 0 === e ? void 0 : e.Ib;
        e = null === (f = a.Oa("email")) || void 0 === f ? void 0 : f.Ib;
        f = null === (g = a.Oa("birthday")) || void 0 === g ? void 0 : g.Oa().querySelectorAll("select");
        var x = null === (h = a.Oa("gender")) || void 0 === h ? void 0 : h.Ib,
            D = null === (m = a.Oa("subgender")) || void 0 === m ? void 0 : m.Ib,
            J = null === (n = a.Oa("terms")) || void 0 === n ? void 0 : n.Ib;
        g = null === (p = a.Oa("privacy_policy")) || void 0 === p ? void 0 : p.Ib;
        p = a.mb;
        if (u && f && x && D && J && g) {
            h = f[0];
            m = f[1];
            var I = f[2];
            m.onkeydown = Dd(I, h);
            I.onkeydown = Dd(x, m);
            x.onkeydown = function () {
                return Dd("none" !== D.style.display ? D : J, I);
            };
            D.onkeydown = Dd(J, x);
            J.onkeydown = function () {
                return Dd(a.FG, "none" !== D.style.display ? D : x);
            };
            a.FG.onkeydown = Dd(g, J);
            g.onkeydown = function () {
                return Dd(a.bz, a.FG);
            };
            a.bz.onkeydown = Dd(p, g);
            p.onkeydown = Dd(c ? c : u, a.bz);
            a.Sx ? ((u.onkeydown = Dd(h, b ? b : p)), (h.onkeydown = Dd(m, u))) : !a.Sx && d && e && ((u.onkeydown = Dd(d, b ? b : p)), (d.onkeydown = Dd(e, u)), (e.onkeydown = Dd(h, d)), (h.onkeydown = Dd(m, e)));
        }
        b && u && c && (b.onkeydown = Dd(u, c));
        c && b && (c.onkeydown = Dd(b, p));
    }
    function aO(a) {
        var b = a.Oa("gender");
        a = a.Oa("subgender");
        if (void 0 !== b && void 0 !== a) {
            var c = b.Oa().querySelector("td");
            b = a.Oa().querySelector("td");
            null !== c &&
                null !== b &&
                b.childNodes.forEach(function (d) {
                    return c.appendChild(d);
                });
        }
    }
    function bO(a) {
        var b = "https://" + xe.NA + "/terms/",
            c = "https://" + xe.NA + "/privacy/",
            d = a.Oa("terms"),
            e = a.Oa("privacy_policy");
        if (d) {
            var f = d.Oa().querySelector("th"),
                g = d.Oa().querySelector("td"),
                h = d.Oa().querySelector("label"),
                m = d.dh,
                n = document.createElement("td");
            f &&
                g &&
                h &&
                ((h.innerHTML = T(S('I have read and agree to the <a href="%(link)s" target="_blank" rel="noopener noreferrer">terms and conditions.</a>'), { link: b }, !0)),
                (a.FG = h.querySelector("a")),
                (f.style.display = ""),
                (b = d.Oa()),
                b.appendChild(n),
                b.appendChild(g),
                b.appendChild(f),
                b.appendChild(m));
        }
        e &&
            ((f = e.Oa().querySelector("th")),
            (g = e.Oa().querySelector("td")),
            (b = e.Oa().querySelector("label")),
            (m = e.dh),
            (n = document.createElement("td")),
            f &&
                g &&
                b &&
                ((b.innerHTML = T(S('I have read and agree to the <a href="%(link)s" target="_blank" rel="noopener noreferrer">privacy policy.</a>'), { link: c }, !0)),
                (b.style.marginRight = "45px"),
                (a.bz = b.querySelector("a")),
                (a.bz.href = c),
                (f.style.display = ""),
                (a = e.Oa()),
                a.appendChild(n),
                a.appendChild(g),
                a.appendChild(f),
                a.appendChild(m)));
    }
    function eO(a, b, c) {
        var d = a.LJ[c];
        if (void 0 !== d)
            if ("birthday" === c) {
                if (((b = b.Oa().querySelectorAll("select")), 3 === b.length && "0" === b[2].value && !0 === d)) return !0;
            } else if (!b.Ib.value && !0 === d) return !0;
        return (a.LJ[c] = !1);
    }
    function fO(a, b, c) {
        if ("subgender" === c) {
            var d = a.Oa("gender");
            b = d ? d : b;
        }
        if (!eO(a, b, c)) {
            d = new FormData(a.element);
            var e = a.Sx ? "accounts/ajax_validate_sso_new_user_form/" : "accounts/ajax_validate_register_form/";
            gO(a, b, c);
            E(e, d)
                .then(function (f) {
                    f = JSON.parse(f.responseText).errors;
                    null !== f && "object" === typeof f && (b.Wi(!1), void 0 !== f[c] && ((f = f[c]), "string" === typeof f && b.ar(f, !1)), (a.fg.style.display = "none"));
                })
                .catch(function () {});
        }
    }
    function gO(a, b, c) {
        var d = b.Oa();
        if ("terms" === c || "privacy_policy" === c) {
            var e = d.querySelector("th");
            b = b.dh;
            e && (e.appendChild(a.fg), (a.fg.style.paddingTop = "0px"), (a.fg.style.marginLeft = "terms" === c ? "280px" : "240px"), (a.fg.style.verticalAlign = "bottom"), d.appendChild(b));
        } else
            "email" === c
                ? ((c = d.querySelector("td")),
                  (b = b.dh),
                  (d = null === c || void 0 === c ? void 0 : c.querySelector(".defaultColor")),
                  c && d && (c.appendChild(a.fg), (a.fg.style.marginLeft = "0px"), (a.fg.style.paddingTop = "22px"), (a.fg.style.verticalAlign = "middle"), c.appendChild(d), c.appendChild(b)))
                : ((c = d.querySelector("td")), (b = b.dh), c && (c.appendChild(a.fg), (a.fg.style.marginLeft = "0px"), (a.fg.style.paddingTop = "22px"), (a.fg.style.verticalAlign = "middle"), c.appendChild(b)));
        a.fg.style.display = "inline-block";
    }
    function cO(a) {
        function b(f, g) {
            var h = a.Oa(f);
            if (h) {
                var m = h.fh(),
                    n = new Sd(
                        function () {
                            return fO(a, h, m);
                        },
                        { zc: 500, Qc: 1 }
                    );
                h.Ib.addEventListener(g, function () {
                    Td(n);
                });
            } else r("InContentSignup: error adding validation listener for " + f + " field", "inContentSignupForm.ts", "common");
        }
        a.HR.forEach(function (f) {
            b(f, "keyup");
        });
        a.TP.forEach(function (f) {
            b(f, "change");
        });
        var c = a.Oa("birthday");
        if (c) {
            var d = c.fh(),
                e = new Sd(
                    function () {
                        return fO(a, c, d);
                    },
                    { zc: 500, Qc: 1 }
                );
            c.Oa()
                .querySelectorAll("select")
                .forEach(function (f) {
                    f.addEventListener("change", function () {
                        Td(e);
                    });
                });
        } else r("InContentSignup: error adding validation listeners for birthday field", "inContentSignupForm.ts", "common");
    }
    WN.prototype.vn = function () {
        var a = document.createElement("div");
        a.style.width = "0";
        a.style.height = "0px";
        a.style.display = "none";
        a.style.verticalAlign = "middle";
        a.style.paddingTop = "22px";
        a.style.position = "absolute";
        var b = document.createElement("div");
        b.style.animationName = "spin";
        b.style.width = "15px";
        b.style.height = "16px";
        b.style.margin = "-15px 0 8px 10px";
        b.style.background = 'url("https://static-assets.highwebmedia.com/tsdefaultassets/images/loading_spinner.svg")';
        b.style.filter = "invert(55%) sepia(37%) saturate(3280%) hue-rotate(346deg) brightness(100%) contrast(83%)";
        b.style.backgroundSize = "cover";
        b.style.animationName = "spin";
        b.style.animationDuration = "2s";
        b.style.webkitAnimationDuration = "2s";
        b.style.animationTimingFunction = "linear";
        b.style.webkitAnimationTimingFunction = "linear";
        b.style.animationIterationCount = "infinite";
        b.style.webkitAnimationIterationCount = "infinite";
        b.style.zIndex = "-1";
        a.appendChild(b);
        return a;
    };
    function XN() {}
    q(XN, pM);
    XN.prototype.av = function (a) {
        pM.prototype.av.call(this, a);
        a.style.minWidth = "";
        a.style.width = "auto";
        a.style.maxWidth = "130px";
    };
    XN.prototype.Dc = function (a) {
        pM.prototype.Dc.call(this, a);
        a.style.width = "295px";
    };
    XN.prototype.Zz = function (a) {
        pM.prototype.Zz.call(this, a);
        a.style.width = "250px";
    };
    function YN() {}
    q(YN, XN);
    YN.prototype.Dc = function (a) {
        XN.prototype.Dc.call(this, a);
        a.style.width = "";
    };
    function ZN() {}
    q(ZN, pM);
    k = ZN.prototype;
    k.av = function (a) {
        pM.prototype.av.call(this, a);
        a.style.textAlign = "left";
        a.style.float = "right";
        a.style.width = "350px";
    };
    k.nr = function (a) {
        pM.prototype.nr.call(this, a);
        a.style.textAlign = "left";
    };
    k.Xo = function (a) {
        pM.prototype.Xo.call(this, a);
        a.style.display = "inline-table";
    };
    k.Dc = function (a) {
        a.style.marginTop = "7px";
        a.style.float = "left";
        a.style.marginLeft = "-2px";
    };
    k.$z = function (a) {
        pM.prototype.$z.call(this, a);
        a.style.maxWidth = "300px";
    };
    function $N() {}
    q($N, wM);
    $N.prototype.Dc = function (a) {
        wM.prototype.Dc.call(this, a);
        a.style.width = "40px";
    };
    function hO(a) {
        var b = localStorage.getItem("InContentMessage");
        null !== b && (iO(a, b), localStorage.removeItem("InContentMessage"));
    }
    function jO() {
        Xu.call(this);
        var a = this;
        this.It = 550;
        this.wR = new Vd("InCntntSUp");
        this.pg = "Unknown";
        this.fc.g(function () {
            a.B();
        });
        v("resize", window, function () {
            a.B();
        });
    }
    q(jO, Xu);
    jO.prototype.ia = function () {
        function a() {
            void 0 !== h.Qo && (h.Ig.removeChild(h.Qo.element), h.Ig.removeChild(u), h.Ig.removeChild(x));
            C("api/ts/accounts/incontent_sso_signup/")
                .then(function (I) {
                    I = OM(I.responseText);
                    h.Yk = new WN(I, "api/ts/accounts/incontent_sso_signup/", f, !0, J, D.querySelector("a"));
                    h.Ig.appendChild(h.Yk.element);
                })
                .catch(function (I) {
                    r(I, "inContentSignupOverlay.tsx", "ui");
                })
                .then(function () {
                    h.qa.innerText = Lf;
                    var I = h.Yk.Oa("email");
                    if (I) {
                        var ja = I.Oa();
                        I.Ib.value = h.hU;
                        ja.style.display = "none";
                    }
                    I = document.createElement("input");
                    I.type = "hidden";
                    I.name = "partial_token";
                    I.value = h.zS;
                    h.Yk.element.appendChild(I);
                    h.Ig.appendChild(D);
                    VM(h.Yk);
                })
                .catch(function () {});
        }
        function b() {
            void 0 !== h.Yk && (h.Ig.removeChild(h.Yk.element), h.Ig.removeChild(D));
            C("api/ts/accounts/incontent_signup/")
                .then(function (I) {
                    I = OM(I.responseText);
                    h.Qo = new WN(I, "api/ts/accounts/incontent_signup/", g, !1, J, u.querySelector(".auth_option"));
                    h.Ig.appendChild(h.Qo.element);
                })
                .catch(function (I) {
                    r(I, "inContentSignupOverlay.tsx", "ui");
                })
                .then(function () {
                    h.qa.innerText = Jf;
                    h.Ig.appendChild(u);
                    h.Ig.appendChild(x);
                    VM(h.Qo);
                })
                .catch(function () {});
        }
        function c(I) {
            var ja = d();
            I.appendChild(ja);
            return ja;
        }
        function d() {
            return V("div", { style: { display: "block", margin: "10px 0 0 0" } });
        }
        function e(I) {
            var ja = "/auth-sso/login/" + I.qm + "/?popup=1";
            return V(
                "a",
                {
                    className: "auth_option",
                    href: "#",
                    tabIndex: 0,
                    onClick: function (Yb) {
                        Yb.preventDefault();
                        m += 1;
                        1 < m || (F("SsoSignupClick", { provider: I.qm, source: "InContentSignupOverlay", feature: h.pg }), uu(ja, "_blank", "status=0,toolbar=0,menubar=0,directories=0,resizable=1,scrollbars=1,height=700,width=715"));
                        window.setTimeout(function () {
                            m = 0;
                        }, 1e3);
                    },
                },
                V("div", null, V("img", { src: "https://static-assets.highwebmedia.com/images/sso-" + I.qm + ".svg", alt: I.qm }), V("p", null, Xe(I.name)))
            );
        }
        function f(I) {
            h.Yk.mb.disabled = !0;
            E("auth-sso/new-user/?incontent=1", I)
                .then(function () {
                    g();
                })
                .catch(function () {});
        }
        function g() {
            h.Qo.mb.disabled = !0;
            localStorage.setItem("InContentMessage", h.jx());
            window.location.reload();
        }
        var h = this;
        Xu.prototype.ia.call(this);
        this.element.id = "InContentSignUpOverlay";
        this.element.style.visibility = "hidden";
        this.element.style.position = "absolute";
        this.element.style.fontSize = "12px";
        this.element.style.height = "auto";
        this.element.style.margin = "auto";
        this.element.style.border = "1px solid gray";
        this.element.style.borderTop = "0.5px solid gray";
        this.element.style.borderRadius = "2px";
        this.element.style.zIndex = "9999";
        window.setPartialTokenAndEmail = function (I, ja) {
            h.hU = ja;
            h.zS = I;
            a();
        };
        window.sendMsgForSSOLogin = function () {
            g();
        };
        var m = 0;
        this.Ig = V("div", { style: { padding: "5px 30px 10px 30px", width: "auto" } });
        this.element.appendChild(this.Ig);
        var n = c(this.Ig),
            p = c(this.Ig),
            u = d(),
            x = d(),
            D = d(),
            J = document.createElement("input");
        J.type = "submit";
        J.onclick = function (I) {
            I.preventDefault();
            h.B();
        };
        J.value = "";
        J.style.background = "transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/close_icon2.svg) no-repeat center center";
        J.style.backgroundSize = "10px";
        J.style.padding = "10px 20px 8px 12px";
        J.style.border = "none";
        J.style.cursor = "pointer";
        n.appendChild(J);
        n.style.position = "absolute";
        n.style.top = "0px";
        n.style.right = "0px";
        n.style.margin = "0px";
        this.qa = document.createElement("h1");
        this.qa.innerText = Jf;
        this.qa.style.font = "18px ubuntumedium,Arial,Helvetica,sans-serif";
        this.qa.style.color = "#f47422";
        this.qa.style.marginBottom = "0px";
        n = document.createElement("p");
        n.textContent = "" + Kf;
        n.style.marginTop = "1px";
        n.style.fontSize = "11px";
        p.appendChild(this.qa);
        p.appendChild(n);
        p.style.textAlign = "left";
        p = A.current.fO;
        if (void 0 !== p && 0 < p.length) {
            n = V("div", { className: "or_separator" }, V("p", null, "\u00a0or\u00a0"));
            u.appendChild(n);
            p = l(p);
            for (n = p.next(); !n.done; n = p.next()) u.appendChild(e(n.value));
            u.style.marginBottom = "16px";
        }
        p = document.createElement("p");
        p.style.fontSize = "10px";
        p.textContent = "" + Nf;
        x.appendChild(p);
        p = document.createElement("img");
        p.src = "https://static-assets.highwebmedia.com/tsdefaultassets/arrow_back.gif";
        p.style.marginRight = "4px";
        p.style.verticalAlign = "bottom";
        n = document.createElement("a");
        n.textContent = "" + Mf;
        n.href = "#";
        n.tabIndex = 0;
        D.appendChild(p);
        D.appendChild(n);
        D.style.display = "block";
        D.style.cursor = "pointer";
        D.onclick = function (I) {
            I.preventDefault();
            b();
        };
        b();
    };
    jO.prototype.show = function (a) {
        var b = md();
        pd() && void 0 !== b ? (b.appendChild(this.S), b.appendChild(this.element)) : (document.body.appendChild(this.S), document.body.appendChild(this.element));
        b = a.jx;
        void 0 !== b && (this.jx = b);
        this.tf(a.wJ);
        this.pg = a.GJ;
        this.xh();
        this.element.style.visibility = "";
        b = this.element.getBoundingClientRect();
        a = b.y - 30;
        b = b.y + (b.height - 150) - a;
        window.innerHeight >= b + 200
            ? window.scroll({ top: (document.documentElement.scrollTop || document.body.scrollTop) + (a - 200), behavior: "smooth" })
            : window.innerHeight >= b
            ? window.scroll({ top: (document.documentElement.scrollTop || document.body.scrollTop) + (a - (window.innerHeight - b)), behavior: "smooth" })
            : window.scroll({ top: (document.documentElement.scrollTop || document.body.scrollTop) + a, behavior: "smooth" });
        this.wR.Co();
        void 0 !== this.Qo && VM(this.Qo);
        void 0 !== this.Yk && VM(this.Yk);
    };
    jO.prototype.B = function () {
        "hidden" !== this.element.style.visibility &&
            (null !== this.element.parentElement && this.element.parentElement.removeChild(this.element), null !== this.S.parentElement && this.S.parentElement.removeChild(this.S), this.Lb(), (this.element.style.visibility = "hidden"));
    };
    jO.prototype.tf = function (a) {
        a = a.getBoundingClientRect();
        var b = window.pageXOffset,
            c = window.pageYOffset;
        pd() && (c = b = 0);
        b = a.left + b;
        this.element.style.width = a.width + "px";
        this.element.style.top = a.top + 28 + c + "px";
        this.element.style.left = b + "px";
        if (a.width < this.It) {
            this.element.style.width = this.It + "px";
            c = a.right + (this.It - a.width) < window.innerWidth;
            var d = b - (this.It - a.width) + "px";
            this.element.style.left = a.left > this.It - a.width || !c ? d : b + "px";
        }
    };
    function kO(a, b, c) {
        var d = this;
        this.Pk = a;
        this.event = b;
        this.I = c;
        this.ig = void 0;
        this.iG = !0;
        this.UR = new lO(this.I);
        this.AF = new ON();
        mO(this);
        kb() &&
            ((this.gD = function () {
                d.disconnect();
            }),
            v("pagehide", window, this.gD));
    }
    function mO(a) {
        if (!ut("wowza_disabled")) {
            var b;
            if (0 < a.Pk.host.length) {
                var c = "http" === a.Pk.host.substring(0, 4) ? new SockJS(a.Pk.host) : new WebSocket(a.Pk.host);
                a.ig = c;
                c.onclose = function (d) {
                    Na("Connection closed:" + JSON.stringify(d));
                    void 0 !== b
                        ? nO(a)
                        : (tt() || (a.event.ya.h({ wa: [[W("Chat disconnected")]], Fa: !0 }), a.event.cQ.h(void 0)),
                          a.iG &&
                              (b = window.setTimeout(function () {
                                  nO(a);
                                  mO(a);
                              }, PN(a.AF))));
                };
                c.onerror = function (d) {
                    Na("Connection error:" + JSON.stringify(d));
                    void 0 === b &&
                        a.iG &&
                        (b = window.setTimeout(function () {
                            mO(a);
                        }, PN(a.AF)));
                };
                c.onmessage = function (d) {
                    var e = a.UR;
                    d = d.data;
                    var f = JSON.parse(d);
                    f = { method: f.method, callback: f.callback, Y: f.args };
                    if (0 <= Object.keys(oO).indexOf(f.method))
                        if ((e.cb.event.Kq.h(f), pO(f))) oO[f.method](e.cb, f);
                        else tt() && "onPersonallyKicked" === f.method && "rejoined" === f.Y[0] && e.cb.bd.disconnect();
                    else r("Unknown message method: " + f.method + " args: " + d, "wowzaHandler.ts", "chatconnection");
                };
                c.onopen = function () {
                    a.I.zt = new Date();
                    a.th("connect", { user: a.Pk.vp, password: a.Pk.TO, room: a.Pk.j, room_password: a.Pk.NF });
                };
            }
        }
    }
    k = kO.prototype;
    k.readyState = function () {
        if (void 0 !== this.ig)
            switch (this.ig.readyState) {
                case WebSocket.CLOSED:
                    return "closed";
                case WebSocket.OPEN:
                    return "open";
                case WebSocket.CLOSING:
                    return "closing";
                case WebSocket.CONNECTING:
                    return "connecting";
                default:
                    return "unknown";
            }
        else return "websocket undefined";
    };
    k.Ll = function () {
        var a;
        (void 0 !== this.ig && this.zb().readyState === WebSocket.CONNECTING) || qO(this) || (null === (a = this.ig) || void 0 === a ? void 0 : a.close(), mO(this));
    };
    k.zb = function () {
        return this.ig;
    };
    function qO(a) {
        return void 0 !== a.ig && a.ig.readyState === WebSocket.OPEN;
    }
    function rO(a) {
        a.AF.reset();
        pO({ method: "onTitleChange", callback: 0, Y: [] }) && cG(a.I, a.Pk.Tb);
    }
    k.disconnect = function () {
        this.iG = !1;
        void 0 !== this.ig && ((this.ig.onclose = function () {}), (this.ig.onerror = function () {}), this.ig.close(), (this.ig = void 0));
        void 0 !== this.gD && Bb("pagehide", window, this.gD);
    };
    function nO(a) {
        tt() || a.event.ya.h({ wa: [[W("Trying to reconnect")]], Fa: !0 });
    }
    function sO(a, b) {
        a.zb().send(b);
    }
    k.th = function (a, b) {
        b = void 0 === b ? {} : b;
        ut("wowza_disabled") || (qO(this) ? sO(this, JSON.stringify({ method: a, data: b })) : (this.Ll(), tO(this, a, b, 0)));
    };
    function tO(a, b, c, d) {
        qO(a)
            ? sO(a, JSON.stringify({ method: b, data: c }))
            : 5 > d
            ? window.setTimeout(function () {
                  tO(a, b, c, d + 1);
              }, 1e3)
            : F("WowzaMsgRetryFailed", { method: b, push_active: tt() });
    }
    function lO(a) {
        this.cb = a;
    }
    function pO(a) {
        return -1 !== ["onAuthResponse", "onPrivateMsg"].indexOf(a.method) || ("onNotify" === a.method && "push_backends" === L(new H(a.Y[0]), "type")) ? !0 : !tt();
    }
    window.debugAllMessages = function () {};
    var oO = {
        onAuthResponse: uO,
        onRoomCountUpdate: vO,
        onRoomMsg: wO,
        onNotify: xO,
        onTitleChange: yO,
        onPrivateMsg: zO,
        onPromotion: AO,
        onRevoke: BO,
        onPersonallyKicked: CO,
        onSilence: DO,
        onKick: EO,
        onNotifyPrivateShowRequest: FO,
        onNotifyPrivateShowApprove: GO,
        onNotifyPrivateShowCancel: HO,
        onNotifyLeavePrivateRoom: IO,
        onNotifyTokenBalanceUpdate: JO,
        onNotifyAwayModeCancel: KO,
    };
    function vO(a, b) {
        1 > b.Y.length ? r("Invalid onRoomCountUpdate args: " + b.Y, "wowzaHandler.ts", "chatconnection") : "" === b.Y[0] || wt() || a.event.um.h(parseInt(b.Y[0]));
    }
    function uO(a, b) {
        if (1 <= b.Y.length && "1" === b.Y[0]) {
            b = a.iO;
            "notconnected" !== a.status && (b = a.status);
            switch (b) {
                case "offline":
                case "away":
                case "privaterequesting":
                case "privatenotwatching":
                case "privatespying":
                case "hidden":
                case "hiddenwatching":
                case "public":
                    tG(a);
                    lG(a, b);
                    hO(a);
                    break;
                case "privatewatching":
                    "notconnected" === a.status
                        ? (rG(a), lG(a, b))
                        : Vx(a.j())
                              .then(function (c) {
                                  "privatenotwatching" === c.sa && a.Qb && (c.sa = "privatewatching");
                                  "privatewatching" === c.sa ? rG(a) : tG(a);
                                  lG(a, c.sa);
                              })
                              .catch(function (c) {
                                  r("Error getting room dossier on reconnect: " + c, "wowzaHandler.ts", "chatconnection", { room: a.j() });
                              });
                    break;
                default:
                    t("unexpected status: " + b, "wowzaHandler.ts", "chatconnection");
            }
            rO(a.bd);
        } else (0 < b.Y.length && "0" === b.Y[0]) || r("Error connecting!", "wowzaHandler.ts", "chatconnection", { message: b });
    }
    function yO(a, b, c) {
        1 > b.Y.length ? r("Invalid onTitleChange args: " + b.Y, "wowzaHandler.ts", "chatconnection") : (1 < b.Y.length && "0" === b.Y[1]) || cG(a, b.Y[0], c);
    }
    function zO(a, b) {
        if (!ut("pm_enabled"))
            if ("" === b.Y[0])
                1 < b.Y.length
                    ? iz()
                        ? zE.h({ message: "", qe: "08E3YGC", backgroundColor: void 0, K: { username: "", Pa: !1, Pe: !1, zd: !1, ec: !1, Gj: !1, yf: !1, zf: !1, kd: "", $c: "un", nc: "c" }, bb: "", Qa: [], VD: !0, Rx: !0 })
                        : a.event.ya.h({ wa: [[W(b.Y[1])]], Fa: !0 })
                    : r("handlePrivateMessage args: " + b.Y, "wowzaHandler.ts", "chatconnection");
            else {
                var c = b.Y;
                b = new H(c[1]);
                !0 !== Pc(b, "X-Successful") && r("X-Successful not true?", "messageParsers.ts", "chatconnection");
                c = Object.assign(Object.assign({}, es(c[0], b)), { bb: "" !== c[2] ? c[2] : c[0], Qa: gs(Xc(b, "media")), Rx: !0 });
                ad(b);
                eG(c, a.j());
            }
    }
    function AO(a, b) {
        2 !== b.Y.length ? r("Invalid onPromotion args: " + b.Y, "wowzaHandler.ts", "chatconnection") : iG(a, { username: b.Y[0], K: b.Y[1] });
    }
    function BO(a, b) {
        2 !== b.Y.length ? r("Invalid onRevoke args: " + b.Y, "wowzaHandler.ts", "chatconnection") : jG(a, { username: b.Y[0], K: b.Y[1] });
    }
    function CO(a, b) {
        1 !== b.Y.length
            ? r("Invalid onPersonallyKicked args: " + b.Y, "wowzaHandler.ts", "chatconnection")
            : ((b = b.Y[0]), "rejoined" === b ? ((b = yg), B.Hb({ Uc: "" })) : "kicked" === b ? (b = zg) : (t("createPersonallyKickedMessage called with unknown argument " + b, "wowzaHandler.ts", "chatconnection"), (b = Ag)), kG(a, b));
    }
    function DO(a, b) {
        2 !== b.Y.length ? r("Invalid onSilence args: " + b.Y, "wowzaHandler.ts", "chatconnection") : nG(a, { username: b.Y[0], K: b.Y[1] });
    }
    function EO(a, b) {
        1 !== b.Y.length ? r("Invalid onKick args: " + b.Y, "wowzaHandler.ts", "chatconnection") : ((b = { username: b.Y[0], K: a.j() }), oG(a, b));
    }
    function wO(a, b) {
        if ("" === b.Y[0])
            1 < b.Y.length
                ? "Chat disconnected. The broadcaster has set a new password on this room." === b.Y[1]
                    ? mG(a)
                    : a.event.ya.h({ wa: [[W(b.Y[1])]], Fa: !0 })
                : r("roomMessage invalid args: " + b.Y, "wowzaHandler.ts", "chatconnection");
        else {
            var c = new H(b.Y[1]);
            !0 !== Pc(c, "X-Successful") && r("X-Successful not true?", "wowzaHandler.ts", "chatconnection");
            b = Object.assign(Object.assign({}, es(b.Y[0], c)), { ER: !0 === Pc(c, "X-Spam") });
            dG(a, b);
        }
    }
    function FO(a, b) {
        2 > b.Y.length ? r("PrivateShowRequest invalid args: " + b.Y, "wowzaHandler.ts", "chatconnection") : pG(a, { MO: b.Y[0], NU: parseInt(b.Y[1]) });
    }
    function GO(a, b) {
        1 !== b.Y.length ? r("Invalid privateShowApprove args: " + b.Y, "wowzaHandler.ts", "chatconnection") : qG(a);
    }
    function HO(a, b) {
        0 !== b.Y.length && r("Invalid privateShowCancel args: " + b.Y, "wowzaHandler.ts", "chatconnection");
        sG(a);
    }
    function IO() {}
    function JO(a, b) {
        2 !== b.Y.length ? r("Invalid tokenBalanceUpdate args: " + b.Y, "wowzaHandler.ts", "chatconnection") : a.event.PG.h({ Ua: Number(b.Y[1]) });
    }
    function KO(a, b) {
        0 !== b.Y.length && t("Invalid awayModeCancel args: " + b.Y, "wowzaHandler.ts", "chatconnection");
        uG(a);
    }
    function xO(a, b) {
        var c = new H(b.Y[0]),
            d = L(c, "type");
        c.kf("send_to");
        c.kf("to_user");
        if ("function" !== typeof LO[d]) r("Unhandled onNotify type " + d, "wowzaHandler.ts", "chatconnection", { message: b });
        else (0, LO[d])({ cb: a, p: c, Os: 1 < b.Y.length && "true" === b.Y[1] });
    }
    var LO = {
        tip_alert: MO,
        log: NO,
        refresh_panel: OO,
        app_tab_refresh: PO,
        appnotice: QO,
        apperrorlog: RO,
        clear_app: SO,
        room_entry: TO,
        room_leave: UO,
        spy_room_leave: VO,
        purchase_notification: WO,
        settingsupdate: XO,
        hidden_show_status_change: YO,
        hidden_show_approve: ZO,
        hidden_show_deny: $O,
        is_restricted_hls_allowed: aP,
        compliance_image_required: bP,
        game_selection: cP,
        push_backends: dP,
    };
    function MO(a) {
        var b = hs(a.p);
        vG(a.cb, b, a.Os);
        a.cb.Qb &&
            C("tipping/get_token_balance/")
                .then(function (c) {
                    c = new H(c.responseText);
                    M(c, "success") && a.cb.event.PG.h({ Ua: N(c, "token_balance") });
                })
                .catch(function () {});
    }
    function NO(a) {
        if (a.cb.Qb) {
            var b = K(a.p, "msg");
            void 0 === b ? r("handleLog with an empty msg", "wowzaHandler.ts", "chatconnection") : ((b = { vC: b, type: L(a.p, "type"), X: L(a.p, "tid") }), a.cb.event.pN.h(b), wG(a.cb, b));
        }
    }
    function PO(a) {
        a.cb.event.eB.h({});
    }
    function OO(a) {
        a.cb.event.su.h({});
    }
    function QO(a) {
        var b = Pc(a.p, "msg"),
            c = [];
        if ("string" === typeof b) c.push([W("Notice: " + b)]);
        else if (b instanceof Array) {
            b = l(b);
            for (var d = b.next(); !d.done; d = b.next()) c.push([W("Notice: " + d.value)]);
        } else {
            r("handleAppNotice error: Invalid message type " + (void 0 === b ? "undefined" : b.toString()), "wowzaHandler.ts", "chatconnection");
            return;
        }
        c = { wa: c, Bf: K(a.p, "to_group"), Ec: K(a.p, "to_user"), background: K(a.p, "background", !1), mc: K(a.p, "foreground", !1), weight: K(a.p, "weight", !1), Fa: !1, X: L(a.p, "tid") };
        (void 0 !== a.Os && !1 !== a.Os) || a.cb.event.Qk.h(c);
        a.cb.event.ya.h(c);
    }
    function RO(a) {
        if (a.cb.Qb) {
            var b = Pc(a.p, "msg"),
                c = [];
            c.push([W("App Error: ")]);
            if ("string" === typeof b) c.push([W(b)]);
            else if (b instanceof Array) {
                b = l(b);
                for (var d = b.next(); !d.done; d = b.next()) c.push([W(d.value)]);
            } else {
                r("handleAppErrorLog error: Invalid message type " + (void 0 === b ? "undefined" : b.toString()), "wowzaHandler.ts", "chatconnection");
                return;
            }
            c = { GC: c, type: L(a.p, "type"), X: L(a.p, "tid") };
            (void 0 !== a.Os && !1 !== a.Os) || a.cb.event.pN.h(c);
            wG(a.cb, c);
        }
    }
    function SO(a) {
        a.cb.event.su.h({});
    }
    function TO(a) {
        hG(a.cb, cs(a.p));
    }
    function UO(a) {
        gG(a.cb, cs(a.p));
    }
    function VO(a) {
        "privatespying" === a.cb.status && lG(a.cb, "privatenotwatching");
    }
    function WO(a) {
        var b = cs(a.p);
        !0 !== M(a.p, "history") && t("purchase history is not true?", "wowzaHandler.ts", "chatconnection");
        b = { K: b, message: L(a.p, "message"), X: L(a.p, "tid") };
        xG(a.cb, b);
        a.cb.event.OF.h(b);
        b.K.username === a.cb.username() &&
            C("tipping/get_token_balance/")
                .then(function (c) {
                    c = new H(c.responseText);
                    M(c, "success") && a.cb.event.PG.h({ Ua: N(c, "token_balance") });
                })
                .catch(function () {});
    }
    function XO(a) {
        var b = a.p,
            c = { ge: M(b, "allow_privates"), Xd: N(b, "private_price"), vf: N(b, "spy_price"), pi: N(b, "private_min_minutes"), Pi: M(b, "allow_show_recordings"), X: L(b, "tid") };
        ad(b);
        yG(a.cb, c);
    }
    function YO(a) {
        if (!a.cb.Qb) {
            var b = M(a.p, "is_starting") ? "hidden" : "public",
                c = L(a.p, "hidden_message");
            ad(a.p);
            zG(a.cb, b, c);
        }
    }
    function ZO(a) {
        AG(a.cb, M(a.p, "initial_hide_cam"));
    }
    function $O(a) {
        ("public" !== a.cb.status && "hiddenwatching" !== a.cb.status) || lG(a.cb, "hidden");
    }
    function aP() {}
    function bP(a) {
        a.cb.event.qK.h({ message: "", X: L(a.p, "tid") });
        var b = "Compliance Image Required!\nPlease visit " + window.location.host + "/verify on your mobile\n     device to verify your identity.\n\nThis is required for broadcasters not showing their face.";
        a = Tc(a.p, "time");
        CG(void 0 !== a && 0 < a ? b + ("\n\nYou have " + a + " minute" + (1 === a ? "" : "s") + " to complete.") : b + "\n\nYou must complete this to continue broadcasting, failure to do so may result in broadcasting restrictions.");
    }
    function cP(a) {
        VN.h(UN($c(a.p, "game")));
    }
    function dP(a) {
        var b = Rc(a.p, "backends");
        void 0 === b ? t("backend change sent with invalid args", "wowzaHandler.ts", "chatconnection", { keys: a.p.keys() }, "PUSH_") : (qt(b), a.cb.bd.Ll());
    }
    function eP(a, b, c, d) {
        this.value = a;
        this.gf = b;
        this.IS = c;
        this.lV = d;
        this.bx = !1;
        this.El = new Date();
        this.KC = !1;
    }
    function fP(a, b, c) {
        var d = {},
            e = new Set(Object.keys(a).concat(Object.keys(b)));
        e = l(e);
        for (var f = e.next(); !f.done; f = e.next())
            if (((f = f.value), !0 !== c[f] && "function" !== typeof a[f] && !(a[f] instanceof Object && b[f] instanceof Object && Wb(a[f], b[f], Object.keys(c))) && a[f] !== b[f])) {
                var g = {};
                d[f] = ((g.wowza = a[f]), (g.push = b[f]), g);
            }
        return d;
    }
    function gP(a, b, c, d) {
        d = void 0 === d ? {} : d;
        this.l = a;
        this.name = b;
        this.jO = void 0 === c ? 0 : c;
        this.Xu = d;
        this.rm = [];
        this.UA = !0;
        this.version = 5;
        this.gF = this.fF = 0;
        this.size = 1e3;
        this.FU = 36e5;
        this.timeout = 5e3;
        this.CJ = 9e4;
        this.JG = new Set();
        this.Vv = new hP();
        this.$y = new hP();
    }
    k = gP.prototype;
    k.verify = function (a, b, c) {
        iP(this, a) || this.Lw(a, b, c);
    };
    function jP(a, b, c) {
        c = void 0 === c ? a.timeout : c;
        var d = window.setTimeout(function () {
            b();
            a.JG.delete(d);
        }, c);
        a.JG.add(d);
    }
    function iP(a, b) {
        var c;
        if ((c = Gt && rt()))
            if ((c = !a.UA)) {
                if (void 0 === b.X) a = 0;
                else
                    a: switch (((a = a.l.status), a)) {
                        case "notconnected":
                            a = !1;
                            break a;
                        case "privatewatching":
                        case "privatespying":
                        case "passwordprotected":
                        case "privaterequesting":
                        case "privatenotwatching":
                        case "away":
                        case "offline":
                        case "hidden":
                        case "public":
                        case "hiddenwatching":
                            a = !0;
                            break a;
                        default:
                            t("unexpected status: " + a, "verifier.ts", "chatconnection"), (a = !1);
                    }
                c = a;
            }
        return c && void 0 !== b.X ? !1 : !0;
    }
    k.Lw = function (a, b, c) {
        var d = this;
        if (!iP(this, a) && void 0 !== a.X) {
            var e = new eP(a, b, rt(), "open" === this.l.bd.readyState()),
                f = function (h, m, n) {
                    return 1 < n.length || (void 0 !== h.value.X && h.value.X.startsWith("#")) ? Wb(h.value, e.value, Object.keys(d.Xu)) : h.gf !== b && h.value.X === a.X;
                },
                g = this.Vv.get(a.X).find(f);
            void 0 !== g
                ? kP(this, g, e)
                : ((f = this.$y.get(a.X).find(f)),
                  void 0 !== f
                      ? lP(this, f, e)
                      : "push" === e.gf && void 0 !== a.Ka && a.Ka.Eq - a.Ka.mu > this.CJ
                      ? mP(this, e, c)
                      : (this.size < this.rm.length && this.rm.shift(),
                        this.rm.push(e),
                        this.Vv.push(a.X, e),
                        jP(this, function () {
                            iP(d, a) ||
                                void 0 === a.X ||
                                e.bx ||
                                (nP(d.Vv, a.X, e),
                                oP(d, e),
                                (0 < d.jO && e.El.valueOf() - d.l.zt.valueOf() < d.jO) ||
                                    (d.$y.push(a.X, e),
                                    jP(
                                        d,
                                        function () {
                                            iP(d, a) || e.bx || d.eD(e, c);
                                        },
                                        d.CJ
                                    )));
                        })));
        }
    };
    function oP(a, b) {
        a.rm = a.rm.filter(function (c) {
            return c !== b;
        });
    }
    function kP(a, b, c) {
        b.bx = !0;
        pP(b, c);
        if (!Wb(b.value, c.value, Object.keys(a.Xu))) {
            var d = fP("wowza" === b.gf ? b.value : c.value, "push" === b.gf ? b.value : c.value, a.Xu);
            qP(a, b, "differs", d, c.value);
            b.KC = !0;
        }
        nP(a.Vv, b.value.X, b);
        oP(a, b);
    }
    function lP(a, b, c) {
        b.bx = !0;
        b.KK = new Date().valueOf() - b.El.valueOf();
        pP(b, c);
        var d = "wowza" === b.gf ? b.value : c.value,
            e = "push" === b.gf ? b.value : c.value;
        d.fz = e.fz;
        Wb(b.value, c.value, Object.keys(a.Xu)) ? (nP(a.$y, b.value.X, b), oP(a, b), qP(a, b, "late")) : ((c = fP(d, e, a.Xu)), qP(a, b, "late and differs", c));
    }
    function pP(a, b) {
        var c = "wowza" === a.gf ? a : b;
        a = "push" === a.gf ? a : b;
        b = a.value;
        void 0 !== b.Ka && ((b = Object.assign(Object.assign({}, b.Ka), { wF: ks(new Date(b.Ka.Eq), !0).getTime() })), (c.Ka = b), (a.Ka = b));
    }
    k.eD = function (a, b) {
        nP(this.$y, a.value.X, a);
        oP(this, a);
        a.KC = !0;
        var c = "never arrived";
        if ("push" === a.gf) {
            var d = a.value;
            void 0 !== d.Ka && (a.Ka = Object.assign(Object.assign({}, d.Ka), { wF: ks(new Date(d.Ka.Eq), !0).getTime() }));
        }
        b || (c += ", topic was not subscribed");
        qP(this, a, c);
    };
    function mP(a, b, c) {
        b.KC = !0;
        var d = "arrived past timeout";
        if ("push" === b.gf) {
            var e = b.value;
            void 0 !== e.Ka && (b.Ka = Object.assign(Object.assign({}, e.Ka), { wF: ks(new Date(e.Ka.Eq), !0).getTime() }));
        }
        c || (d += ", topic was not subscribed");
        qP(a, b, d);
    }
    k.stop = function () {
        for (var a = l(this.JG.keys()), b = a.next(); !b.done; b = a.next()) clearTimeout(b.value);
        this.UA = !0;
    };
    k.start = function () {
        this.UA = !1;
    };
    function qP(a, b, c, d, e) {
        void 0 === b.value.X || (gb() && window.performance.now() > a.FU) || ((a = a.Dl(b, c, d, e)), void 0 !== Cc && F("PushServiceVerifier", a));
    }
    k.Dl = function (a, b, c) {
        var d = {};
        d.verifier_version = this.version;
        d.trace_id = a.value.X;
        d.publish_method = a.value.fz;
        d.provider_id = a.value.ez;
        d.running_apps = this.l.op();
        d.viewer_ignored = nu(this.l.username());
        d.received_from = a.gf;
        d.original = a.value;
        d.push_connected = a.IS;
        d.wowza_connected = a.lV;
        d.item_created = a.El;
        d.message_age = a.El.valueOf() - this.l.zt.valueOf();
        d.verifier = this.name;
        d.viewer = this.l.username();
        d.room = this.l.j();
        d.room_status = this.l.status;
        d.prev_room_status = this.l.Lc;
        d.last_connection_time = this.l.zt.getTime();
        d.created = this.l.El.getTime();
        "wowza" === a.gf ? (this.fF += 1) : "push" === a.gf && (this.gF += 1);
        void 0 !== a.Ka &&
            ((d.publish_ts = a.Ka.mu),
            (d.publish_delay = a.Ka.mu - a.Ka.he),
            (d.receive_ts = a.Ka.Eq),
            (d.receive_delay = a.Ka.Eq - a.Ka.mu),
            (d.provider_delay = a.Ka.HS - a.Ka.mu),
            (d.receive_ts_synced = a.Ka.wF),
            (d.time_sync_source = 0 === window.performance.timing.responseStart ? "date.getTime" : "performance"));
        void 0 !== a.KK && (d.late = a.KK);
        d.total_failures_push = this.fF;
        d.total_failures_wowza = this.gF;
        d.diff = c;
        void 0 !== c && (d.diff_fields = Object.keys(c));
        d.failure_reason = b;
        return d;
    };
    function rP(a, b, c, d) {
        d = void 0 === d ? {} : d;
        gP.call(this, a, b, void 0 === c ? 0 : c, d);
        var e = this;
        this.iT = a.event.um.g(function (f) {
            e.yu = f;
        });
    }
    q(rP, gP);
    rP.prototype.Dl = function (a, b, c, d) {
        a = gP.prototype.Dl.call(this, a, b, c, d);
        a.room_count = this.yu;
        return a;
    };
    rP.prototype.stop = function () {
        gP.prototype.stop.call(this);
        this.iT.removeListener();
    };
    function sP() {
        gP.apply(this, arguments);
        this.timeout = 15e3;
        this.uL = new Map();
    }
    q(sP, gP);
    sP.prototype.Lw = function (a, b, c) {
        ("push" === b && ((void 0 !== a.connections && "enter" === a.action && 1 !== a.connections) || ("leave" === a.action && 0 !== a.connections))) || gP.prototype.Lw.call(this, a, b, c);
    };
    sP.prototype.eD = function (a, b) {
        gP.prototype.eD.call(this, a, b);
        "wowza" === a.gf && "leave" === a.value.action && this.uL.set(a.value.M.username, new Date());
    };
    sP.prototype.Dl = function (a, b, c, d) {
        b = gP.prototype.Dl.call(this, a, b, c, d);
        c = this.uL.get(a.value.M.username);
        void 0 !== c && "push" === a.gf && "leave" === a.value.action && ((b.time_since_last_leave = new Date().getTime() - c.getTime()), (b.num_connections = a.value.connections));
        return b;
    };
    function tP(a, b, c, d) {
        d = void 0 === d ? {} : d;
        gP.call(this, a, b, void 0 === c ? 0 : c, d);
        var e = this;
        this.gT = 300;
        this.JC = 10;
        this.LQ = 1500;
        this.QR = 40;
        this.sF = { Lc: "unknown", Sa: "unknown" };
        this.sH = { Lc: "unknown", Sa: "unknown" };
        this.kT = B.mi.g(function (f) {
            e.sF = { Lc: e.sF.Sa, Sa: f.sa };
        }, !1);
    }
    q(tP, gP);
    tP.prototype.Lw = function (a, b) {
        var c = this;
        if ("wowza" === b) {
            this.sH = { Lc: this.sH.Sa, Sa: a.status };
            var d = 0,
                e,
                f = function () {
                    if (!iP(c, a)) {
                        d += 1;
                        if (d === c.JC) {
                            var g = new eP(a, b, rt(), "open" === c.l.bd.readyState());
                            qP(c, g, "RoomStatus does not match");
                            e = new Date();
                        }
                        if (B.getState().sa === a.status) {
                            if (d > c.JC) {
                                var h = new eP(a, b, rt(), "open" === c.l.bd.readyState());
                                g = e;
                                var m = d;
                                h = c.Dl(h, "RoomStatus fixed");
                                h.time_to_fix = new Date().getTime() - g.getTime();
                                h.numRetries = m;
                                F("PushServiceVerifier", h);
                            }
                        } else d < c.QR && jP(c, f, d > c.JC ? c.LQ : c.gT);
                    }
                };
            f();
        }
    };
    tP.prototype.Dl = function (a, b, c, d) {
        b = gP.prototype.Dl.call(this, a, b, c, d);
        b.push_room_status = B.getState().sa;
        b.prev_push_room_status = this.sF.Lc;
        b.wowza_room_status = a.value.status;
        b.prev_wowza_room_status = this.sH.Lc;
        return b;
    };
    tP.prototype.stop = function () {
        gP.prototype.stop.call(this);
        this.kT.removeListener();
    };
    function hP() {
        this.values = new Map();
    }
    function nP(a, b, c) {
        if (void 0 !== b) {
            var d = a.values.get(b);
            void 0 !== d &&
                ((d = d.filter(function (e) {
                    return e !== c;
                })),
                0 === d.length ? a.values.delete(b) : a.values.set(b, d));
        }
    }
    hP.prototype.push = function (a, b) {
        var c = this.values.get(a);
        void 0 === c ? this.values.set(a, [b]) : c.push(b);
    };
    hP.prototype.get = function (a) {
        a = this.values.get(a);
        return void 0 !== a ? a : [];
    };
    function uP() {
        Z.apply(this, arguments);
    }
    q(uP, Z);
    uP.prototype.ka = function () {
        return "RoomModeratorNoticeTopic";
    };
    uP.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign(Object.assign({}, c), is(a)), { Bf: "red", Ec: void 0, Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he });
    };
    function vP() {
        Z.apply(this, arguments);
    }
    q(vP, Z);
    vP.prototype.ka = function () {
        return "RoomFanClubTopic";
    };
    vP.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign(Object.assign({}, c), is(a)), { Bf: "green", Ec: void 0, Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he });
    };
    function wP() {
        Z.apply(this, arguments);
    }
    q(wP, Z);
    wP.prototype.ka = function () {
        return "RoomLightPurpleTopic";
    };
    wP.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign(Object.assign({}, c), is(a)), { Bf: "lightpurple", Ec: void 0, Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he });
    };
    function xP() {
        Z.apply(this, arguments);
    }
    q(xP, Z);
    xP.prototype.ka = function () {
        return "RoomDarkPurpleTopic";
    };
    xP.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign(Object.assign({}, c), is(a)), { Bf: "darkpurple", Ec: void 0, Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he });
    };
    function yP() {
        Z.apply(this, arguments);
    }
    q(yP, Z);
    yP.prototype.ka = function () {
        return "RoomDarkBlueTopic";
    };
    yP.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign(Object.assign({}, c), is(a)), { Bf: "darkblue", Ec: void 0, Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he });
    };
    function zP() {
        Z.apply(this, arguments);
    }
    q(zP, Z);
    zP.prototype.ka = function () {
        return "RoomLightBlueTopic";
    };
    zP.prototype.L = function (a) {
        var b,
            c = Z.prototype.L.call(this, a);
        return Object.assign(Object.assign(Object.assign({}, c), is(a)), { Bf: "lightblue", Ec: void 0, Ga: null === (b = c.Ka) || void 0 === b ? void 0 : b.he });
    };
    function AP(a) {
        var b = { onRoomCountUpdate: "#room_count", onTitleChange: "#room_title_change", onPromotion: "#mod_promoted", onRevoke: "#mod_revoked", onSilence: "#room_silence", onKick: "#room_kick" };
        return void 0 === b[a] ? "" : b[a];
    }
    var BP = 0;
    function CP(a) {
        this.l = a;
        this.jH = [];
        this.listeners = new Ub();
        this.om = new Ub();
    }
    function DP(a) {
        var b = B.getState(),
            c = b.lb,
            d = b.wv,
            e = [];
        st() &&
            ("" !== c &&
                e.push(
                    {
                        name: "roomTitleChange",
                        Gb: new ZE(c),
                        lc: a.l.event.Kq,
                        Vb: [20, 15],
                        Jc: { X: !0 },
                        Oh: function (f) {
                            return { title: f.Y[0], X: "0" === f.Y[1] ? "" : AP(f.method) };
                        },
                        Rg: rP,
                        X: "#room_title_change",
                    },
                    { name: "roomTipAlert", Gb: new $E(c), lc: a.l.event.sr, Vb: [3, 17], Jc: { K: !0, cg: !0, Ga: !0 }, delay: 6e3, Rg: rP },
                    {
                        name: "roomStatus",
                        Gb: new aF(c),
                        lc: a.l.event.Mc,
                        Vb: [20],
                        Jc: { message: !0, password: !0, X: !0 },
                        Oh: function (f) {
                            return { status: f.Sa, message: "", password: "", X: "#room_status" };
                        },
                        Rg: tP,
                        delay: 0,
                        X: "#room_status",
                    },
                    {
                        name: "roomSilence",
                        Gb: new dF(c),
                        lc: a.l.event.Kq,
                        Vb: [20],
                        Jc: { X: !0 },
                        Oh: function (f) {
                            return { username: f.Y[0], K: f.Y[1], X: AP(f.method) };
                        },
                        Rg: rP,
                        X: "#room_silence",
                    },
                    {
                        name: "roomKick",
                        Gb: new eF(c),
                        lc: a.l.event.Kq,
                        Vb: [20],
                        Jc: { X: !0, K: !0 },
                        Oh: function (f) {
                            return { username: f.Y[0], K: "Unknown", X: AP(f.method) };
                        },
                        Rg: rP,
                        X: "#room_kick",
                    },
                    {
                        name: "roomModPromoted",
                        Gb: new fF(c),
                        lc: a.l.event.Kq,
                        Vb: [20],
                        Jc: { X: !0 },
                        Oh: function (f) {
                            return { username: f.Y[0], K: f.Y[1], X: AP(f.method) };
                        },
                        Rg: rP,
                        X: "#mod_promoted",
                    },
                    {
                        name: "roomModRevoked",
                        Gb: new gF(c),
                        lc: a.l.event.Kq,
                        Vb: [20],
                        Jc: { X: !0 },
                        Oh: function (f) {
                            return { username: f.Y[0], K: f.Y[1], X: AP(f.method) };
                        },
                        Rg: rP,
                        X: "#mod_revoked",
                    },
                    { name: "roomNotice", Gb: new hF(c), lc: a.l.event.Qk, Vb: [4], Jc: { Ga: !0 }, Rg: rP },
                    {
                        name: "appPanelRefresh",
                        Gb: new qF(c),
                        lc: a.l.event.su,
                        Vb: [20],
                        Oh: function () {
                            return { target: "refresh_panel", X: "#app_panel_refresh" };
                        },
                        X: "#app_panel_refresh",
                    },
                    { name: "roomPurchase", Gb: new kF(c), lc: a.l.event.OF, Vb: [18], Jc: { Ga: !0 }, delay: 6e3, Rg: rP },
                    { name: "roomFanclubJoined", Gb: new lF(c), lc: a.l.event.OF, Vb: [19], Jc: { Ga: !0 }, delay: 6e3, Rg: rP },
                    { name: "roomSettings", Gb: new mF(c), lc: a.l.event.Fm, Vb: [], Rg: rP },
                    {
                        name: "roomEnterLeave",
                        Gb: new nF(c),
                        lc: a.l.event.oz,
                        Vb: [13, 20],
                        Jc: { X: !0, $c: !0, Oc: !0, connections: !0 },
                        Oh: function (f) {
                            return Object.assign(Object.assign({}, f), { Oc: 0, X: "#room_enter_leave" });
                        },
                        delay: 1e3,
                        Rg: sP,
                        X: "#room_enter_leave",
                    }
                ),
            a.l.Fd ||
                void 0 === d ||
                (e.push(
                    { name: "userTipAlert", Gb: new Ut(d), lc: a.l.event.sr, Vb: [2, 14], Jc: { K: !0, cg: !0, Ga: !0 }, delay: 6e3 },
                    {
                        name: "appTabRefresh",
                        Gb: new Rt(d),
                        lc: a.l.event.eB,
                        Vb: [2, 20],
                        Oh: function () {
                            return { target: "app_tab_refresh", X: "#app_tab_refresh" };
                        },
                        X: "#app_tab_refresh",
                    },
                    { name: "userAlert", Gb: new bu(d), lc: a.l.event.qK, Vb: [], Jc: { message: !0 } }
                ),
                "" !== c && (e.push({ name: "roomUserNotice", Gb: new iF(c, d), lc: a.l.event.Qk, Vb: [11], Jc: { Ec: !0, Ga: !0 } }), b.nd && e.push({ name: "roomModGroup", Gb: new uP(c), lc: a.l.event.Qk, Vb: [5], Jc: { Ga: !0 } })),
                b.pj && "" !== c && e.push({ name: "fanclubGroupNotice", Gb: new vP(c), lc: a.l.event.Qk, Vb: [6], Jc: { Ga: !0 } }),
                void 0 !== b.jl &&
                    "" !== c &&
                    (b.jl.Pe && e.push({ name: "lightBlueGroupNotice", Gb: new zP(c), lc: a.l.event.Qk, Vb: [7], Jc: { Ga: !0 } }),
                    b.jl.yf && e.push({ name: "darkBlueGroupNotice", Gb: new yP(c), lc: a.l.event.Qk, Vb: [8], Jc: { Ga: !0 } }),
                    b.jl.nA && e.push({ name: "lightPurpleGroupTopic", Gb: new wP(c), lc: a.l.event.Qk, Vb: [9], Jc: { Ga: !0 } }),
                    b.jl.zf && e.push({ name: "darkPurpleGroupTopic", Gb: new xP(c), lc: a.l.event.Qk, Vb: [10], Jc: { Ga: !0 } }))),
            EP(a, e));
    }
    function FP(a, b, c) {
        "" !== c &&
            "" !== b &&
            (Vb(a.om),
            (b = [
                { name: "privateRoomTipAlert", Gb: new SE(b, c), lc: a.l.event.sr, Vb: [3, 16], Jc: { K: !0, cg: !0, Ga: !0 }, delay: 6e3 },
                {
                    name: "privateRoomEnterLeave",
                    Gb: new TE(b, c),
                    lc: a.l.event.oz,
                    Vb: [13, 20, 16],
                    Jc: { X: !0, $c: !0, Oc: !0, connections: !0 },
                    Oh: function (d) {
                        return Object.assign(Object.assign({}, d), { Oc: 0, X: "#room_enter_leave" });
                    },
                    Rg: sP,
                    X: "#room_enter_leave",
                },
            ]),
            EP(a, b, !0));
    }
    function EP(a, b, c) {
        c = void 0 === c ? !1 : c;
        b.forEach(function (d) {
            var e = Dt(d.Gb.getKey()),
                f = GP(a, d.name, d.delay, d.Jc, d.Rg),
                g = c ? a.om : a.listeners;
            g.add(
                d.lc.g(function (h) {
                    h = void 0 !== d.Oh ? d.Oh(h) : h;
                    HP(a, d.Vb, h, d.X) && e && f.verify(h, "wowza", Dt(d.Gb.getKey()));
                }, !1)
            );
            g.add(
                d.Gb.Cg.g(function (h) {
                    return (e = h.zi);
                })
            );
            g.add(
                d.Gb.ea.g(function (h) {
                    HP(a, d.Vb, h, d.X) && e && f.verify(h, "push", Dt(d.Gb.getKey()));
                })
            );
        });
        150 > BP && IP(a);
    }
    function HP(a, b, c, d) {
        if (tt() || JP.has(a.l.status)) return !1;
        b = l(b);
        for (var e = b.next(); !e.done; e = b.next())
            if (((e = e.value), 0 === e)) {
                if (nu(c.K.username)) return !1;
            } else if (2 === e) {
                if (!a.l.Qb) return !1;
            } else if (3 === e) {
                if (a.l.Qb) return !1;
            } else if (12 === e) {
                if (!a.l.Qb && !a.l.nd) return !1;
            } else if (13 === e) {
                if (c.M.username === a.l.username()) return !1;
            } else if (14 === e) {
                if (c.K.username === a.l.username()) return !1;
            } else if (15 === e) {
                if ("" === c.title) return !1;
            } else if (16 === e) {
                if (!BF(a.l)) return !1;
            } else if (17 === e) {
                if (BF(a.l)) return !1;
            } else if (4 === e) {
                if (((e = c), void 0 !== e.Bf || void 0 !== e.Ec)) return !1;
            } else if (5 === e) {
                if ("red" !== c.Bf) return !1;
            } else if (6 === e) {
                if ("green" !== c.Bf) return !1;
            } else if (7 === e) {
                if ("lightblue" !== c.Bf) return !1;
            } else if (8 === e) {
                if ("darkblue" !== c.Bf) return !1;
            } else if (9 === e) {
                if ("lightpurple" !== c.Bf) return !1;
            } else if (10 === e) {
                if ("darkpurple" !== c.Bf) return !1;
            } else if (11 === e) {
                if (void 0 === c.Ec) return !1;
            } else if (18 === e) {
                if (c.message.includes("fan club")) return !1;
            } else if (19 === e) {
                if (!c.message.includes("fan club")) return !1;
            } else if (20 === e && void 0 !== d) {
                if (c.X !== d) return !1;
            } else if (0 > e && "" === c.X) return !1;
        return !0;
    }
    function GP(a, b, c, d, e) {
        d = void 0 === d ? {} : d;
        e = void 0 === e ? gP : e;
        b = new e(a.l, b, void 0 === c ? 2e3 : c, Object.assign(Object.assign({}, d), { Ka: !0, ez: !0, fz: !0 }));
        a.jH.push(b);
        return b;
    }
    CP.prototype.cv = function () {
        for (var a = l(this.jH), b = a.next(); !b.done; b = a.next()) b.value.stop(), --BP;
        Vb(this.listeners);
        Vb(this.om);
    };
    function IP(a) {
        a = l(a.jH);
        for (var b = a.next(); !b.done; b = a.next()) b.value.start(), (BP += 1);
    }
    var JP = new Set(["unknown", "notconnected", "offline"]);
    function KP() {
        Lt.call(this, {});
    }
    q(KP, Lt);
    KP.prototype.getKey = function () {
        return "" + this.ka();
    };
    KP.prototype.initData = function () {};
    function LP() {
        KP.apply(this, arguments);
    }
    q(LP, KP);
    LP.prototype.ka = function () {
        return "GlobalPushServiceBackendChangeTopic";
    };
    LP.prototype.L = function (a) {
        return Object.assign(Object.assign({}, KP.prototype.L.call(this, a)), { rP: Rc(a, "backends") });
    };
    function MP(a) {
        this.I = a;
        this.vr = new Map();
        this.HK = 10;
        this.finished = !1;
        this.listeners = new Ub();
        this.dt = [];
    }
    function NP(a) {
        st() && (OP(a), PP(a), QP(a), RP(a));
    }
    MP.prototype.dispose = function () {
        Vb(this.listeners);
    };
    MP.prototype.push = function (a) {
        this.dt.length > this.HK && this.dt.pop();
        this.dt.push(a);
    };
    function SP(a) {
        a.dt.forEach(function (b) {
            tt() && b();
        });
        a.dt = [];
    }
    function TP(a) {
        var b = {};
        Array.from(a.vr.entries()).forEach(function (c) {
            var d = l(c);
            c = d.next().value;
            d = d.next().value;
            b[c] = d.Rr;
        });
        return E("push_service/room_history/", { topics: JSON.stringify(b) })
            .then(function (c) {
                var d = 0;
                JSON.parse(c.responseText).forEach(function (e) {
                    e = l(Object.entries(e));
                    for (var f = e.next(); !f.done; f = e.next()) {
                        var g = l(f.value);
                        f = g.next().value;
                        g = g.next().value;
                        f = a.vr.get(f);
                        if (void 0 === f || d >= a.HK) break;
                        Kt(g);
                        g = new H(g);
                        if (It(f.vA, L(g, "tid"))) break;
                        d += 1;
                        f.callback(g);
                    }
                });
            })
            .catch(function (c) {
                r("history error", "pushServiceMessageHandler.ts", "chatconnection", c, "PUSH_");
            });
    }
    function OP(a) {
        function b(g) {
            return function (h) {
                h = g.L(h);
                h.Ij === a.I.j() && vG(a.I, h, !0);
            };
        }
        var c = B.getState(),
            d = c.lb,
            e = c.wv;
        c = c.Uc;
        var f = [];
        e === d ? f.push(new Ut(e)) : f.push(new $E(d));
        "" !== c && f.push(new SE(d, c));
        f.forEach(function (g) {
            a.vr.set(Ys(g), { callback: b(g), Rr: g.Qs(), vA: g.getKey() });
            var h = g.Cg.g(function (m) {
                m.zi && (RP(a), h.removeListener());
            });
            a.listeners.add(h);
        });
    }
    function PP(a) {
        var b = B.getState().lb;
        [new kF(b), new lF(b)].forEach(function (c) {
            a.vr.set(Ys(c), {
                callback: function (e) {
                    e = c.L(e);
                    xG(a.I, e);
                },
                Rr: c.Qs(),
                vA: c.getKey(),
            });
            var d = c.Cg.g(function (e) {
                e.zi && (RP(a), d.removeListener());
            });
            a.listeners.add(d);
        });
    }
    function QP(a) {
        var b = B.getState(),
            c = b.lb;
        b = b.Uc;
        var d = [];
        "" !== c && (d.push(new cF(c)), "" !== b && d.push(new RE(c, b)));
        d.forEach(function (e) {
            a.vr.set(Ys(e), {
                callback: function (g) {
                    g = e.L(g);
                    dG(a.I, g);
                },
                Rr: e.Qs(),
                vA: e.getKey(),
            });
            var f = e.Cg.g(function (g) {
                g.zi && (RP(a), f.removeListener());
            });
            a.listeners.add(f);
        });
    }
    function RP(a) {
        if (!a.finished && tt()) {
            for (var b = l(a.vr.values()), c = b.next(); !c.done; c = b.next()) if (!Dt(c.value.vA)) return;
            a.finished = !0;
            TP(a)
                .then(function () {
                    cG(a.I, B.getState().Tb);
                })
                .catch(function () {});
        }
    }
    function UP(a, b) {
        var c = this,
            d,
            e;
        this.A = a;
        this.I = b;
        this.listeners = { global: new Ub(), j: new Ub(), M: new Ub(), color: new Ub(), FJ: new Ub(), pm: new Ub(), cz: new Ub() };
        this.wA = new CP(this.I);
        this.PD = !1;
        this.history = new MP(this.I);
        this.cs = 0;
        z(
            yt.g(function (h) {
                if (!["connecting", "closing", "initialized"].includes(h.current)) {
                    var m = { state: h.current, previousState: h.previous, push_connection_type: void 0 === mt ? "not_connected" : mt.aD(), wowza_state: c.I.bd.readyState(), connection_id: Jt };
                    F("PushServiceConnection", m);
                    if (tt())
                        switch (h.current) {
                            case "closed":
                            case "failed":
                                c.I.event.ya.h({ wa: [[W("Chat disconnected")]], Fa: !0 });
                                qt(["w", "a"]);
                                break;
                            case "suspended":
                            case "disconnected":
                                if (6 < c.cs) {
                                    void 0 !== mt && mt.close();
                                    break;
                                }
                                c.cs += 1;
                                c.I.event.ya.h({ wa: [[W("Trying to reconnect")]], Fa: !0 });
                                break;
                            case "connected":
                                lG(c.I, c.I.iO);
                                c.cs = 0;
                                break;
                            default:
                                c.cs = 0;
                        }
                }
            }, !1),
            this.listeners.global
        );
        a = null !== (d = this.A.wv) && void 0 !== d ? d : "";
        var f = null !== (e = this.A.lb) && void 0 !== e ? e : "";
        this.Pa = "" !== f && a === f;
        var g = B.getState();
        d = g.Uc;
        e = g.nd;
        b = g.pj;
        g = g.jl;
        NP(this.history);
        VP(this);
        WP(this, f, a);
        XP(this, f);
        YP(this, a);
        ZP(this, f);
        $P(this, f, a);
        aQ(this, f, e || this.Pa);
        bQ(this, f, b);
        cQ(this, f, g);
        "" !== d && dQ(this, f, d);
        z(
            B.mi.g(function (h) {
                var m = B.getState();
                m.Uc !== h.Uc && dQ(c, f, m.Uc);
                m.nd !== h.nd && aQ(c, f, m.nd || c.Pa);
                m.pj !== h.pj && bQ(c, f, m.pj);
                cQ(c, f, m.jl, h.jl);
            }, !1),
            this.listeners.global
        );
        DP(this.wA);
    }
    UP.prototype.th = function (a, b) {
        var c = this,
            d = B.getState(),
            e = d.lb,
            f = d.Uc;
        d = d.userName;
        if (a !== this.I.j() || "" === e) return Promise.reject({ error: "room error", AY: a, HW: this.I.j(), lb: e });
        var g = { room: a, message: JSON.stringify({ m: b }) };
        BF(this.I) && "" !== f && (g.private_show_id = f);
        "" !== d && (g.username = d);
        tt() && this.I.bd.Ll();
        return E("push_service/publish_chat_message_live/", g).then(function (h) {
            var m,
                n = null !== (m = h.getResponseHeader("x-banned")) && void 0 !== m ? m : h.getResponseHeader("x-denied");
            m = new H(h.responseText);
            if (null !== n) tt() && c.I.event.ya.h({ wa: [[W(n)]], Fa: !0 });
            else {
                var p = Vc(m, "message");
                Kt(p);
                n = void 0 === g.private_show_id ? new cF(e) : new RE(e, g.private_show_id);
                p = n.L(new H(p));
                p.ER = "True" === h.getResponseHeader("x-spam");
                tt() && void 0 !== p.X && !It(n.getKey(), p.X) && dG(c.I, p);
            }
            return { m: b, f: "", c: "", tid: L(m, "tid"), sig: L(m, "sig") };
        });
    };
    function YP(a, b) {
        a.I.Fd ||
            "" === b ||
            (z(
                new St(b).ea.g(function (c) {
                    B.Hb({ jl: c });
                }),
                a.listeners.M
            ),
            z(
                new bu(b).ea.g(function (c) {
                    tt() && CG(c.message);
                }),
                a.listeners.M
            ));
    }
    function XP(a, b) {
        "" !== b &&
            z(
                new sF(b).ea.g(function (c) {
                    var d,
                        e,
                        f = B.getState(),
                        g = ["tid"],
                        h = {},
                        m;
                    for (m in c) Object.prototype.hasOwnProperty.call(c, m) && 0 > g.indexOf(m) && (h[m] = c[m]);
                    if (null != c && "function" === typeof Object.getOwnPropertySymbols) {
                        var n = 0;
                        for (m = Object.getOwnPropertySymbols(c); n < m.length; n++) 0 > g.indexOf(m[n]) && Object.prototype.propertyIsEnumerable.call(c, m[n]) && (h[m[n]] = c[m[n]]);
                    }
                    Wb(f.quality, h) ||
                        (B.Hb(Object.assign(Object.assign({}, f), { quality: h })),
                        null !== (e = null === (d = B.getState().quality) || void 0 === d ? void 0 : d.stopped) && void 0 !== e && e && ((c = { eventName: "streamEnd" }), (c = void 0 === c ? {} : c), Zx(c)));
                }),
                a.listeners.j
            );
    }
    function ZP(a, b) {
        "" !== b &&
            st() &&
            (eQ(a, b),
            z(
                new YE(b).ea.g(function () {}),
                a.listeners.j
            ),
            z(
                new fF(b).ea.g(function (c) {
                    a.I.username() === c.username && B.Hb({ nd: !0 });
                    tt() && iG(a.I, c);
                }),
                a.listeners.j
            ),
            z(
                new gF(a.A.lb).ea.g(function (c) {
                    a.I.username() === c.username && B.Hb({ nd: !1 });
                    tt() && jG(a.I, c);
                }),
                a.listeners.j
            ),
            z(
                new aF(b).ea.g(function (c) {
                    var d = B.getState().sa;
                    if (void 0 === c.password || "" === c.password || a.Pa || B.getState().NF === c.password) {
                        if ("hidden" === c.status) {
                            if (a.Pa || a.PD) return;
                            a.CK = new Date();
                            tt() && zG(a.I, c.status, c.message);
                        } else if ("privatenotwatching" === c.status) {
                            if (a.Pa || ["privaterequesting", "privatewatching", "privatenotwatching"].includes(d)) return;
                            tt() && qG(a.I);
                        } else if ("away" === c.status && "privatewatching" === d) tt() && (B.Hb({ Uc: "", sa: "away" }), sG(a.I));
                        else if ("public" === c.status && tt()) "away" === d ? uG(a.I) : ("hidden" === d || "hiddenwatching" === d) && zG(a.I, c.status, c.message);
                        else {
                            if ("passwordprotected" === c.status) return;
                            tt() && lG(a.I, c.status);
                        }
                        B.Hb({ sa: c.status });
                    } else a.pw(), tt() && (window.location.reload(), mG(a.I));
                }),
                a.listeners.j
            ),
            z(
                new ZE(b).ea.g(function (c) {
                    tt() && cG(a.I, c.title);
                }),
                a.listeners.j
            ),
            z(
                new dF(b).ea.g(function (c) {
                    tt() && nG(a.I, c);
                }),
                a.listeners.j
            ),
            z(
                new eF(b).ea.g(function (c) {
                    tt() && ((c.K = a.I.j()), a.I.username() === c.username ? kG(a.I, zg) : oG(a.I, c));
                }),
                a.listeners.j
            ),
            z(
                new qF(b).ea.g(function (c) {
                    tt() && "refresh_panel" === c.target && a.I.event.su.h({});
                }),
                a.listeners.j
            ),
            z(
                new mF(b).ea.g(function (c) {
                    B.Hb({ ge: c.ge, Xd: c.Xd, vf: c.vf, pi: c.pi, Pi: c.Pi });
                    (!BF(a.I) || a.Pa) && tt() && yG(a.I, c);
                }),
                a.listeners.j
            ));
    }
    function eQ(a, b) {
        z(
            new cF(b).ea.g(function (c) {
                BF(a.I)
                    ? ((c.Ga = void 0),
                      a.history.push(function () {
                          return dG(a.I, c);
                      }))
                    : tt() && dG(a.I, c);
            }),
            a.listeners.j
        );
        z(
            new lF(b).ea.g(function (c) {
                var d = B.getState();
                c.K.username === d.userName && B.Hb({ pj: !0 });
                BF(a.I)
                    ? ((c.Ga = void 0),
                      a.history.push(function () {
                          return xG(a.I, c);
                      }))
                    : tt() && xG(a.I, c);
            }),
            a.listeners.j
        );
        z(
            new kF(b).ea.g(function (c) {
                BF(a.I)
                    ? ((c.Ga = void 0),
                      a.history.push(function () {
                          return xG(a.I, c);
                      }))
                    : tt() && xG(a.I, c);
            }),
            a.listeners.j
        );
        z(
            new hF(b).ea.g(function (c) {
                BF(a.I) ? (c.Ga = void 0) : tt() && a.I.event.ya.h(c);
            }),
            a.listeners.j
        );
        a.Pa ||
            z(
                new $E(b).ea.g(function (c) {
                    BF(a.I)
                        ? ((c.Ga = void 0),
                          a.history.push(function () {
                              return vG(a.I, c, !0);
                          }))
                        : tt() && vG(a.I, c);
                }),
                a.listeners.j
            );
        a.Pa ||
            B.getState().nd ||
            z(
                new nF(b).ea.g(function (c) {
                    BF(a.I) || (tt() && fG(a.I, c), wt() && void 0 !== c.Oc && a.I.event.um.h(c.Oc));
                }),
                a.listeners.j
            );
    }
    function $P(a, b, c) {
        a.I.Fd ||
            "" === b ||
            "" === c ||
            (z(
                new iF(b, c).ea.g(function (d) {
                    BF(a.I) || (tt() && a.I.event.ya.h(d));
                }),
                a.listeners.j
            ),
            z(
                (a.Pa ? new Xt(b) : new rF(b, c)).ea.g(function (d) {
                    switch (d.status) {
                        case "started":
                            if ("privatenotwatching".includes(a.I.status)) break;
                            ["privatewatching", "privaterequesting"].includes(a.I.status) ? B.Hb({ Uc: d.Uc, sa: "privatewatching" }) : B.Hb({ sa: "privatenotwatching" });
                            var e = qG;
                            break;
                        case "declined":
                            B.Hb({ sa: "public" });
                            e = sG;
                            break;
                        case "stopped":
                            B.Hb({ sa: "away", Uc: "" });
                            e = sG;
                            break;
                        case "error":
                            B.Hb({ sa: "public", Uc: "" });
                            e = sG;
                            break;
                        case "spy_leave":
                            B.Hb({ sa: "public", Uc: "" });
                            e = function (f) {
                                lG(f, "privatenotwatching");
                            };
                            break;
                        default:
                            a.Pa || t("Invalid private show status on viewer", "pushServiceMessageHandler.ts", "chatconnection", d, "PUSH_");
                    }
                    tt() && void 0 !== e && e(a.I);
                }),
                a.listeners.j
            ),
            z(
                new bF(b, c).ea.g(function (d) {
                    "approved" === d.status
                        ? ((a.PD = !0),
                          (d = void 0 === a.CK || 2e3 > new Date().getTime() - a.CK.getTime()),
                          tt() && AG(a.I, d),
                          window.setTimeout(
                              function () {
                                  B.Hb({ sa: "hiddenwatching" });
                              },
                              d ? 2e3 : 0
                          ))
                        : "denied" === d.status && ((a.PD = !1), B.Hb({ sa: "hidden" }), tt() && lG(a.I, "hidden"));
                }),
                a.listeners.j
            ));
    }
    function dQ(a, b, c) {
        var d, e, f, g;
        "" !== b &&
            ("" === c
                ? (Vb(a.wA.om), Vb(a.listeners.cz), null === (d = a.XM) || void 0 === d ? void 0 : d.$n(), WP(a, b, null !== (e = a.A.wv) && void 0 !== e ? e : ""), SP(a.history))
                : (null === (f = a.Au) || void 0 === f ? void 0 : f.$n(),
                  null === (g = a.RO) || void 0 === g ? void 0 : g.removeListener(),
                  FP(a.wA, b, c),
                  (a.XM = new QE(b, c)),
                  a.XM.Dp({ presence_id: Jt }),
                  z(
                      new RE(b, c).ea.g(function (h) {
                          tt() && dG(a.I, h);
                      }),
                      a.listeners.cz
                  ),
                  z(
                      new TE(b, c).ea.g(function (h) {
                          tt() && fG(a.I, h);
                          wt() && void 0 !== h.Oc && a.I.event.um.h(h.Oc);
                      }),
                      a.listeners.cz
                  ),
                  a.Pa ||
                      z(
                          new SE(b, c).ea.g(function (h) {
                              tt() && vG(a.I, h);
                          }),
                          a.listeners.cz
                      )));
    }
    function aQ(a, b, c) {
        "" !== b &&
            (c
                ? (z(
                      new VE(b).ea.g(function () {}),
                      a.listeners.pm
                  ),
                  z(
                      new oF(b).ea.g(function (d) {
                          BF(a.I) || (tt() && fG(a.I, d), wt() && void 0 !== d.Oc && a.I.event.um.h(d.Oc));
                      }),
                      a.listeners.pm
                  ),
                  z(
                      new pF(b).ea.g(function (d) {
                          BF(a.I) || (tt() && fG(a.I, d), wt() && void 0 !== d.Oc && a.I.event.um.h(d.Oc));
                      }),
                      a.listeners.pm
                  ),
                  a.Pa
                      ? (z(
                            new jF(b).ea.g(function (d) {
                                tt() && wG(a.I, d);
                            }),
                            a.listeners.pm
                        ),
                        z(
                            new Rt(b).ea.g(function (d) {
                                tt() && "app_tab_refresh" === d.target && a.I.event.eB.h({});
                            }),
                            a.listeners.pm
                        ),
                        z(
                            new Ut(b).ea.g(function (d) {
                                d.Ij === a.I.username() &&
                                    (BF(a.I) && "public" === d.cg
                                        ? ((d.Ga = void 0),
                                          a.history.push(function () {
                                              return vG(a.I, d, !0);
                                          }))
                                        : tt() && vG(a.I, d));
                            }),
                            a.listeners.pm
                        ),
                        new Xt(b).ea.g(function (d) {
                            "requested" === d.status && (B.Hb({ sa: "privaterequesting" }), tt() && ((d = { MO: d.$S, NU: B.getState().Xd }), pG(a.I, d)));
                        }))
                      : z(
                            new uP(b).ea.g(function (d) {
                                tt() && a.I.event.ya.h(d);
                            }),
                            a.listeners.pm
                        ))
                : Vb(a.listeners.pm));
    }
    function bQ(a, b, c) {
        "" !== b &&
            (c
                ? z(
                      new vP(b).ea.g(function (d) {
                          tt() && a.I.event.ya.h(d);
                      }),
                      a.listeners.FJ
                  )
                : Vb(a.listeners.FJ));
    }
    function cQ(a, b, c, d) {
        if ("" !== b && void 0 !== c) {
            var e = function (f) {
                BF(a.I) || (tt() && a.I.event.ya.h(f));
            };
            !c.Pe || (void 0 !== d && d.Pe) || z(new zP(b).ea.g(e), a.listeners.color);
            !c.yf || (void 0 !== d && d.yf) || z(new yP(b).ea.g(e), a.listeners.color);
            !c.nA || (void 0 !== d && d.nA) || z(new wP(b).ea.g(e), a.listeners.color);
            !c.zf || (void 0 !== d && d.zf) || z(new xP(b).ea.g(e), a.listeners.color);
        }
    }
    function WP(a, b, c) {
        var d;
        "" !== b &&
            !0 !== (null === (d = A.current.V) || void 0 === d ? void 0 : d.iq) &&
            (a.I.Fd
                ? z(
                      new XE(b).Cg.g(function () {}),
                      a.listeners.j
                  )
                : "" !== c &&
                  (void 0 === a.Au &&
                      ((a.Au = new WE(b, c)),
                      (a.RO = a.Au.Cg.g(function (e) {
                          window.clearInterval(a.hu);
                          e.zi && fQ(a, 5e3, !0);
                      }))),
                  (b = ""),
                  "" !== a.A.kd && (b = L(new H(a.A.kd), "hashtag")),
                  a.Au.Dp({ exploring_hash: b, source_name: ds(a.A.$c), presence_id: Jt })));
    }
    function fQ(a, b, c) {
        window.clearInterval(a.hu);
        var d = 0;
        a.hu = window.setInterval(function () {
            "privatewatching" === B.getState().sa
                ? window.clearInterval(a.hu)
                : ((d += 1),
                  E("push_service/verify_presence/", { room: a.I.j(), time: String((b * d) / 1e3), initial_check: String(c) })
                      .then(function (e) {
                          M(new H(e.responseText), "success", !1, !0) && c && fQ(a, 3e5, !1);
                      })
                      .catch(function (e) {
                          404 === e.xhr.status && window.clearInterval(a.hu);
                          r("VerifyPresence", "pushServiceMessageHandler.ts", "chatconnection", e, "PUSH_");
                      }));
        }, b);
    }
    function VP(a) {
        z(
            new LP().ea.g(function (b) {
                qt(b.rP);
                a.I.bd.Ll();
            }),
            a.listeners.global
        );
    }
    UP.prototype.pw = function () {
        var a, b;
        window.clearInterval(this.hu);
        null === (a = this.Au) || void 0 === a ? void 0 : a.$n();
        null === (b = this.RO) || void 0 === b ? void 0 : b.removeListener();
        Object.values(this.listeners).forEach(function (c) {
            return Vb(c);
        });
        this.wA.cv();
        this.history.dispose();
    };
    function gQ(a) {
        var b = !0,
            c = this;
        b = void 0 === b ? !1 : b;
        this.d = a;
        this.El = new Date();
        this.zt = new Date();
        this.status = this.Lc = "offline";
        this.Qr = this.nd = !1;
        this.ZM = "";
        this.Qb = !1;
        this.kd = "";
        this.$c = "un";
        this.jT = new Sd(
            function () {
                return hQ(c);
            },
            { Qc: 2, zc: 6e4 }
        );
        this.event = {
            ly: new y("messageSent"),
            Nq: new y("roomMessage"),
            ya: new y("roomNotice"),
            Qk: new y("roomNoticeWowza"),
            pN: new y("roomAppErrorWowza"),
            Kq: new y("roomControlWowza"),
            OF: new y("roomPurchaseWowza"),
            oz: new y("roomEnterLeave"),
            qK: new y("handleComplianceImage"),
            WM: new y("privateMessage"),
            Mc: new y("statusChange", { rc: 15 }),
            BK: new y("hiddenMessageChange"),
            su: new y("refreshPanel"),
            MG: new y("titleChange"),
            YP: new y("clearApp"),
            mz: new y("removeMessages"),
            Fm: new y("settingsUpdate"),
            um: new y("roomCountUpdate"),
            UL: new y("modStatusChange"),
            PG: WA,
            FS: new y("privateShowRequest"),
            au: new y("playSound"),
            eB: new y("appTabRefresh"),
            cB: new y("appDebugLog"),
            sr: new y("tipAlert"),
            aX: new y("leftRoom"),
            cQ: new y("connectionLost"),
            zy: new y("onBanSilence"),
        };
        this.Qb = this.username() === this.j();
        this.Fd = 0 === a.vp.indexOf("__anonymous__");
        !1 === this.Fd && mu();
        this.nd = a.nd;
        this.vm = a.Da.vm;
        this.wm = a.Da.wm;
        this.iO = this.Qb ? "public" : a.sa;
        this.Xd = a.Xd;
        this.vf = a.vf;
        this.kd = this.d.kd;
        this.$c = this.d.$c;
        this.bd = new kO(this.d, this.event, this);
        b && (new Vd("PSLive").Co(), (this.tF = new UP(this.d, this)));
        lG(this, "notconnected");
        iQ(this);
    }
    k = gQ.prototype;
    k.op = function () {
        return this.d.op;
    };
    k.disconnect = function () {
        var a;
        this.bd.disconnect();
        null === (a = this.tF) || void 0 === a ? void 0 : a.pw();
    };
    function lG(a, b) {
        b !== a.status && ((a.Lc = a.status), (a.status = b), a.Qb && "notconnected" === a.Lc && "public" === a.status && SB(), (a.zt = new Date()), a.event.Mc.h({ Lc: a.Lc, Sa: a.status }));
    }
    function jQ(a) {
        a.Qr = !a.Qr;
        bz.h(a.Qr);
    }
    function xD(a) {
        switch (a.status) {
            case "privatewatching":
                return !0;
            case "privaterequesting":
            case "privatenotwatching":
            case "passwordprotected":
            case "public":
            case "away":
            case "hidden":
            case "hiddenwatching":
            case "offline":
            case "privatespying":
            case "notconnected":
                return !1;
            default:
                return t("unexpected status: " + a.status, "index.ts", "chatconnection"), !1;
        }
    }
    function iO(a, b) {
        function c(e) {
            a.bd.th(xD(a) ? "messagePrivateRoom" : "messageRoom", { room: a.d.j, msg: JSON.stringify({ m: e, f: "", c: "", tid: "" }) });
        }
        a.event.ly.h(void 0);
        F("SendRoomMessage");
        if (void 0 === a.tF) t("push service send handler not active", "index.ts", "chatconnection", {}, "PUSH_"), c(b);
        else {
            var d = xD(a);
            a.tF
                .th(a.d.j, b)
                .then(function (e) {
                    a.bd.th(d ? "messagePrivateRoom" : "messageRoom", { room: a.d.j, msg: JSON.stringify(e) });
                })
                .catch(function (e) {
                    r("Publishing live message", "index.ts", "chatconnection", e, "PUSH_");
                    c(b);
                });
        }
    }
    function kQ(a, b) {
        b = void 0 === b ? !1 : b;
        wt() || a.bd.th("updateRoomCount", { room_uid: a.d.lb, model_name: a.j(), private_room: BF(a) });
        b ? hQ(a) : Td(a.jT);
    }
    function hQ(a) {
        var b = B.getState().Uc,
            c = { presence_id: Jt };
        "" !== b && BF(a) && (c.private_show_id = b);
        b = "push_service/room_user_count/" + a.j() + "/?" + Ac(c);
        return C(b)
            .then(function (d) {
                wt() && ((d = N(new H(d.responseText), "count")), a.event.um.h(d));
            })
            .catch(function (d) {
                r("presence ajax failed", "index.ts", "chatconnection", d, "PUSH_");
            });
    }
    function lQ(a, b) {
        a.bd.th("kickUser", { user: b, room: a.j() });
    }
    function MB(a, b, c, d) {
        return new Promise(function (e, f) {
            "public" !== a.status
                ? f("unexpected status: " + a.status)
                : (a.bd.Ll(),
                  E("tipping/private_show_request/" + a.j() + "/", { chat_username: a.username(), price: "" + b, private_show_minimum_minutes: "" + c, recordings_allowed: "" + d })
                      .then(function (g) {
                          g = new H(g.responseText);
                          var h = L(g, "message", !1);
                          M(g, "success")
                              ? (ad(g), lG(a, "privaterequesting"), B.Hb({ sa: "privaterequesting" }), a.event.ya.h({ wa: [[W(wg)]], mc: "#222", background: "#ff8b45", weight: "bold", Fa: !0 }), e(""))
                              : ("" === h && (r("unknown cannot start private show reason", "index.ts", "chatconnection"), (h = "Cannot start private show.")), e(h));
                      })
                      .catch(function (g) {
                          f(g);
                      }));
        });
    }
    function OB(a) {
        return new Promise(function (b, c) {
            "privatenotwatching" !== a.status
                ? c("unexpected status: " + a.status)
                : (a.bd.Ll(),
                  E("tipping/spy_on_private_show_request/" + a.j() + "/", { chat_username: a.username() })
                      .then(function (d) {
                          d = new H(d.responseText);
                          var e = M(d, "success"),
                              f = L(d, "message", !1);
                          ad(d);
                          e
                              ? (lG(a, "privatespying"), B.Hb({ sa: "privatespying" }), a.event.ya.h({ wa: [[W("You are spying on the private show")]], mc: "#222", background: "#ff8b45", weight: "bold", Fa: !0 }), b(""))
                              : ("" === f && (f = "Error joining spy show"), b(f));
                      })
                      .catch(function (d) {
                          c(d);
                      }));
        });
    }
    function QB(a) {
        return new Promise(function (b, c) {
            var d = "tipping/private_show_cancel/" + a.j() + "/",
                e = a.status;
            E(d, {})
                .then(function (f) {
                    var g = new H(f.responseText),
                        h = M(g, "success");
                    f = N(g, "remaining_seconds");
                    var m = Sc(g, "private_show_minimum_minutes");
                    ad(g);
                    switch (e) {
                        case "privatewatching":
                            if (!h) {
                                0 === f
                                    ? b(ug)
                                    : ((g = Math.floor(f / 60)),
                                      (h =
                                          0 < g
                                              ? S(
                                                    "You have started a private show with a %(minimumMinutes)s minute minimum. You cannot cancel your private show yet. It still has %(minutesRemaining)s minutes and %(secondsRemaining)s seconds remaining."
                                                )
                                              : S("You have started a private show with a %(minimumMinutes)s minute minimum. You cannot cancel your private show yet. It still has %(secondsRemaining)s seconds remaining.")),
                                      (f = T(h, { minimumMinutes: m, minutesRemaining: g, secondsRemaining: f % 60 }, !0)),
                                      b(f));
                                break;
                            }
                            b("");
                            break;
                        case "privatespying":
                            if (!h) {
                                b(hk);
                                break;
                            }
                            lG(a, "privatenotwatching");
                            B.Hb({ sa: "privatenotwatching" });
                            b("");
                            break;
                        case "privaterequesting":
                            if (!h) {
                                b(ik);
                                break;
                            }
                            b("");
                            break;
                        default:
                            t("unable to leave private show from status: " + e, "index.ts", "chatconnection"), h ? b("") : b(T(S("Unable to leave private show from status: %(prevStatus)s"), { prevStatus: e }, !0));
                    }
                })
                .catch(c);
        });
    }
    function tG(a) {
        a.bd.th("joinRoom", { room: a.j(), exploringHashTag: a.kd, source_name: a.$c });
        a.kd = "";
        a.$c = "df";
    }
    function rG(a) {
        window.setTimeout(function () {
            a.bd.th("joinPrivateRoom", { room: a.j() });
        }, 500);
    }
    function BF(a) {
        return "privatewatching" === a.status;
    }
    k.j = function () {
        return this.d.j;
    };
    k.fe = function () {
        return this.d.fe;
    };
    k.username = function () {
        return this.d.vp;
    };
    k.kf = function (a) {
        var b = this;
        if (Uu())
            return (
                this.event.ya.h({ wa: [[W(en)]], Fa: !0 }),
                new Promise(function () {
                    return !1;
                })
            );
        if (this.d.j === this.d.userName)
            return (
                r("Error: cannot ignore users in this room", "index.ts", "chatconnection"),
                new Promise(function () {
                    return !1;
                })
            );
        var c = this.username() + "-hitMaxIgnore",
            d = 2e3 <= ju().size;
        return new Promise(function (e) {
            function f() {
                d && bc(c, "1", 30);
                var g = ju();
                hu(a)
                    .then(function (h) {
                        if (h)
                            for (var m = ju(), n = l(g), p = n.next(); !p.done; p = n.next())
                                (p = p.value), m.has(p) || b.event.ya.h({ wa: [[W(T(S("Ignore limit reached. Removed oldest user from list: %(username)s"), { username: p }, !0))]], Fa: !0 });
                        else b.event.ya.h({ wa: [[W(Fe(a))]], Fa: !0 });
                        e(h);
                    })
                    .catch(void 0);
            }
            void 0 === $b(c) && d ? Md(Vi, f) : f();
        });
    };
    function su(a, b) {
        return ku(b).then(function (c) {
            c || a.event.ya.h({ wa: [[W(Ge(b))]], Fa: !0 });
            return c;
        });
    }
    k.nf = function (a) {
        return nu(a);
    };
    function iQ(a) {
        var b,
            c = null === (b = A.current.V) || void 0 === b ? void 0 : b.yc;
        if (void 0 !== c) {
            var d = new fu(c).ea.g(function (e) {
                e.nf ? ((e = Ce(e.username)), a.event.ya.h({ wa: [[W(e)]], Fa: !0 })) : ((e = De(e.username)), a.event.ya.h({ wa: [[W(e)]], Fa: !0 }));
            });
            Kc.once(function () {
                return d.removeListener();
            });
        }
    }
    function hG(a, b) {
        switch (b.kd) {
            case "promotion":
                b.kd = "";
                b.$c = "pr";
                break;
            case "onlineannouncement":
                (b.kd = ""), (b.$c = "fn");
        }
        if (mQ(a, a.vm, b)) {
            var c = a.Qb ? b.kd : "",
                d = [W(eC(a.j(), b)), Zr(b), W(" " + vm)];
            "" !== c ? (d.push(W(" (from ")), d.push($r(c, [c])), d.push(W(")"))) : a.Qb && "pr" === b.$c ? d.push(W(" via promotion")) : a.Qb && "fn" === b.$c && d.push(W(" via online announcement"));
            d.push(W("."));
            a.event.ya.h({ wa: [d], Fa: b.username === a.username(), uC: b.username });
        }
        (b.Pa || b.ec || b.zd) && a.event.oz.h({ M: Object.assign(Object.assign({}, b), { kd: "" }), action: "enter" });
    }
    function gG(a, b) {
        if (mQ(a, a.wm, b)) {
            var c = " " + wm;
            b.Pa && !nQ.has(a.status) && (c += " " + xm);
            a.event.ya.h({ wa: [[W(eC(a.j(), b)), Zr(b), W(c)]], Fa: b.username === a.username(), uC: b.username });
        }
        (b.Pa || b.ec || b.zd) && a.event.oz.h({ M: Object.assign(Object.assign({}, b), { kd: "" }), action: "leave" });
    }
    function mQ(a, b, c) {
        if (c.username === a.username()) return !1;
        if (c.username === bD) return !0;
        if (nu(c.username)) return !1;
        switch (b) {
            case 3:
                break;
            case 2:
                if (c.username === a.j() || c.ec || c.zd) return !0;
                break;
            case 1:
                if (c.username === a.j() || c.ec || c.zd || (c.Pe && (a.Qb || a.nd))) return !0;
                break;
            case 0:
                if (c.username === a.j() || c.ec || c.zd || a.Qb || a.nd) return !0;
                break;
            default:
                r("Invalid EnterLeaveSetting", "index.ts", "chatconnection");
        }
        return !1;
    }
    var nQ = new Set(["privatewatching", "privatenotwatching", "privatespying"]);
    function oQ(a, b, c) {
        w.call(this);
        var d = this;
        this.username = a;
        this.message = b;
        this.l = c;
        this.Np = [];
        this.Gn = [];
        this.SD = !1;
        this.nn = new y("closeChatReportRequest");
        this.WS = new y("reportSent");
        this.PK = new y("ignoreReportedUser");
        this.RU = function (f) {
            f.stopPropagation();
            27 === f.keyCode ? d.nn.h(!1) : 9 === f.keyCode && (f.preventDefault(), d.SD ? pQ(d, d.Gn, f.shiftKey) : pQ(d, d.Np, f.shiftKey));
        };
        O(this.element, "chatReport");
        this.element.style.position = "static";
        this.element.style.fontFamily = "UbuntuBold, Arial, Helvetica, sans-serif";
        this.element.style.fontSize = "11px";
        this.form = document.createElement("form");
        b = document.createElement("div");
        a = document.createElement("div");
        this.Ld = document.createElement("textarea");
        this.form.appendChild(b);
        this.form.style.width = "100%";
        O(b, "headerDiv");
        b.style.margin = "6px";
        b.style.fontSize = "13px";
        b.innerText = bk + " " + this.username;
        b = this.jI();
        c = {};
        for (var e in b)
            (c.Sj = document.createElement("label")),
                (c.Vg = document.createElement("input")),
                (c.Tj = document.createElement("span")),
                (c.Sj.style.display = "block"),
                (c.Sj.style.margin = "6px 8px"),
                (c.Vg.type = "radio"),
                (c.Vg.style.margin = "0 4px 0 2px"),
                (c.Vg.name = "chatReport"),
                (c.Vg.value = e),
                (c.Tj.innerText = b[e]),
                c.Sj.appendChild(c.Vg),
                c.Sj.appendChild(c.Tj),
                this.form.appendChild(c.Sj),
                (c.Sj.onclick = (function (f) {
                    return function () {
                        d.Mv = f.Vg;
                    };
                })(c)),
                this.Np.push(c.Vg),
                window.setTimeout(
                    (function (f) {
                        return function () {
                            var g = f.Sj.offsetWidth - f.Vg.offsetWidth - 6;
                            Bd(f.Tj.innerText, f.Tj) > g &&
                                ((f.Vg.style.display = "inline-block"), (f.Vg.style.marginBottom = "5px"), (f.Tj.style.display = "inline-block"), (f.Tj.style.width = g + "px"), (f.Tj.style.verticalAlign = "bottom"));
                        };
                    })(c),
                    0
                ),
                (c = { Vg: c.Vg, Sj: c.Sj, Tj: c.Tj });
        a.style.margin = "6px 8px";
        this.Ld.draggable = !1;
        this.Ld.style.resize = "none";
        this.Ld.style.boxSizing = "border-box";
        this.Ld.style.height = "40px";
        this.Ld.style.width = "100%";
        this.Ld.style.borderWidth = "1px";
        this.Ld.style.borderStyle = "solid";
        this.Ld.maxLength = 255;
        this.Ld.oninput = function () {
            d.Ld.value = d.Ld.value.slice(0, 255);
        };
        a.appendChild(this.Ld);
        this.form.appendChild(a);
        this.Np.push(this.Ld);
        this.sp = document.createElement("div");
        this.sp.style.margin = "0 0 8px";
        this.sp.style.cssFloat = "right";
        this.sp.style.fontFamily = "UbuntuMedium, Arial, Helvetica, sans-serif";
        e = document.createElement("button");
        O(e, "submitButton");
        e.type = "submit";
        e.innerText = ck;
        e.style.fontSize = "11px";
        e.style.padding = "4px 6px 4px 6px";
        e.style.marginRight = "8px";
        e.style.borderRadius = "4px";
        e.style.boxSizing = "border-box";
        e.style.cursor = "pointer";
        e.style.display = "inline-block";
        a = document.createElement("span");
        O(a, "cancelSpan");
        a.innerText = Fj;
        a.style.fontSize = "11px";
        a.style.padding = "4px 6px 4px 6px";
        a.style.marginRight = "8px";
        a.style.borderRadius = "4px";
        a.style.boxSizing = "border-box";
        a.style.cursor = "pointer";
        a.style.display = "inline-block";
        this.sp.appendChild(a);
        this.sp.appendChild(e);
        this.form.appendChild(this.sp);
        this.Np.push(a);
        this.Np.push(e);
        qQ(this);
        v("submit", this.form, function (f) {
            f.preventDefault();
            d.Ld.blur();
            void 0 === d.Mv
                ? R($h, d.Ks.bind(d))
                : "other" === d.Mv.value && "" === d.Ld.value.trim()
                ? R(Vj, d.NQ.bind(d))
                : (d
                      .YF()
                      .then(function (g) {
                          g.success ? ((g = d.username), (g = T(S("%(username)s has been reported"), { username: g }, !0)), (d.jp.innerText = g)) : (d.jp.innerText = dk);
                      })
                      .catch(function (g) {
                          d.jp.innerText = 403 === g.xhr.status ? ek : dk;
                      }),
                  d.WS.h(void 0),
                  rQ(d));
        });
        v("click", a, function (f) {
            f.preventDefault();
            d.nn.h(!1);
        });
        this.element.appendChild(this.form);
        this.element.appendChild(this.Jp);
        v("keydown", this.element, this.RU);
    }
    q(oQ, w);
    k = oQ.prototype;
    k.jI = function () {
        return void 0 === this.message
            ? (r("ChatReport error: expected categories override", "chatReport.ts", "common"), {})
            : !0 === this.message.Rx && 0 < this.message.Qa.length
            ? { inappropriate: Wj, rude: Xj, spam: Yj, photo: Zj, other: ak }
            : { inappropriate: Wj, rude: Xj, spam: Yj, other: ak };
    };
    function rQ(a) {
        var b = a.element.offsetWidth,
            c = a.element.offsetHeight;
        a.form.style.display = "none";
        a.Jp.style.display = "block";
        a.Jp.style.width = b + "px";
        a.Jp.style.height = c + "px";
        a.gk.style.padding = c / 2 - a.gk.offsetHeight / 2 + "px 0 0";
        a.SD = !0;
    }
    k.YF = function () {
        var a = this;
        return new Promise(function (b, c) {
            var d = void 0 === a.Mv ? "" : a.Mv.value,
                e = a.Ld.value;
            if (void 0 === a.message) {
                r("ChatReport error: expected reportEndpoint override", "chatReport.ts", "common");
                var f = "";
            } else f = "chatmessages/report/" + a.message.qe + "/";
            return E(f, { spammer: a.username, category: d, additional_comments: e })
                .then(function (g) {
                    g = new H(g.responseText);
                    g = { success: "success" === K(g, "result"), AD: K(g, "html") };
                    b(g);
                })
                .catch(function (g) {
                    c(g);
                });
        });
    };
    function qQ(a) {
        a.Jp = document.createElement("div");
        a.gk = document.createElement("div");
        a.jp = document.createElement("div");
        a.Pb = document.createElement("button");
        var b = [],
            c = document.createElement("button");
        a.Gn.push(a.Pb);
        for (var d = l(b), e = d.next(); !e.done; e = d.next()) a.Gn.push(e.value);
        a.Gn.push(c);
        a.jp.innerText = bg;
        a.jp.style.margin = "0 0 8px 0";
        a.jp.style.textAlign = "center";
        O(a.Pb, "ignoreUserLink");
        O(c, "closeReportLink");
        a.Pb.style.textAlign = "center";
        a.Pb.style.fontSize = "13px";
        a.Pb.style.display = "block";
        a.Pb.style.margin = "0 auto 8px";
        a.Pb.style.background = "none";
        a.Pb.style.border = "none";
        a.Pb.style.cursor = "pointer";
        sQ(a, nu(a.username));
        d = l(b);
        for (e = d.next(); !e.done; e = d.next())
            (e = e.value), (e.style.textAlign = "center"), (e.style.fontSize = "13px"), (e.style.display = "block"), (e.style.margin = "0 auto 8px"), (e.style.background = "none"), (e.style.border = "none"), (e.style.cursor = "pointer");
        c.innerText = Dj;
        c.style.textAlign = "center";
        c.style.fontSize = "13px";
        c.style.display = "block";
        c.style.margin = "0 auto 8px";
        c.style.background = "none";
        c.style.border = "none";
        c.style.cursor = "pointer";
        tQ(c);
        a.Jp.style.display = "none";
        a.gk.style.fontSize = "13px";
        a.gk.style.fontFamily = "Arial, Helvetica, sans-serif";
        a.gk.appendChild(a.jp);
        a.VN() && a.gk.appendChild(a.Pb);
        b = l(b);
        for (e = b.next(); !e.done; e = b.next()) a.gk.appendChild(e.value);
        a.gk.appendChild(c);
        a.Jp.appendChild(a.gk);
        v("click", c, function (f) {
            f.preventDefault();
            a.nn.h(!0);
        });
    }
    function uQ(a) {
        a.Pb.disabled = !0;
        a.Pb.style.cursor = "default";
        a.Pb.style.textDecoration = "none";
        a.Pb.onmouseenter = function () {};
        a.Pb.onmouseleave = function () {};
        a.Pb.onclick = function () {};
        O(a.Pb, "disabled");
        var b = a.Gn.indexOf(a.Pb);
        -1 !== b && a.Gn.splice(b, 1);
        a.Pb.blur();
    }
    function pQ(a, b, c) {
        if (document.activeElement instanceof HTMLElement) {
            var d = b.indexOf(document.activeElement);
            -1 === d ? a.Ks() : (c ? ((a = d - 1), 0 > a && (a += b.length)) : (a = (d + 1) % b.length), b[a].focus());
        } else a.Ks();
    }
    function sQ(a, b) {
        b
            ? ((a.Pb.innerText = Ae(a.username)), uQ(a))
            : ((a.Pb.innerText = Be(a.username)),
              P(a.Pb, "disabled"),
              tQ(a.Pb),
              (a.Pb.disabled = !1),
              (a.Pb.onclick = function () {
                  Wu() ? (a.Pb.innerText = Ui) : (a.TE(), (a.Pb.innerText = Ae(a.username)), a.PK.h(void 0));
                  uQ(a);
              }));
    }
    k.NQ = function () {
        this.Ld.focus();
    };
    k.Ks = function () {
        this.SD ? this.Gn[0].focus() : this.Np[0].focus();
    };
    k.cv = function () {};
    function tQ(a) {
        a.onmouseenter = function () {
            a.style.textDecoration = "underline";
        };
        a.onmouseleave = function () {
            a.style.textDecoration = "none";
        };
    }
    k.VN = function () {
        return void 0 !== this.l && this.l.username() !== this.l.j();
    };
    k.TE = function () {
        void 0 !== this.l && this.l.kf(this.username);
    };
    function vQ(a, b, c) {
        oQ.call(this, a, b);
        this.ED = c;
        this.element.style.minWidth = "188px";
        this.element.style.maxWidth = "268px";
    }
    q(vQ, oQ);
    vQ.prototype.jI = function () {
        return { inappropriate: xq, rude: yq, spam: zq, other: ak };
    };
    vQ.prototype.VN = function () {
        return !0;
    };
    vQ.prototype.TE = function () {
        this.ED();
    };
    var wQ = new y("HlsNativePlayer:AirPlayChange");
    function xQ(a) {
        lz.call(this, a, "HlsNativePlayer");
        var b = this;
        this.yk = 0;
        this.kl = !1;
        this.mF = !0;
        this.Tu = this.PO = !1;
        this.iF = this.O;
        this.element.appendChild(this.O);
        hy(this.Ki, this.O);
        wQ.g(function (d) {
            b.PO = d;
        });
        pb() &&
            xu.g(function (d) {
                b.PO || (d ? qz(b, b.context) : b.O.pause());
            }, !1);
        vv.g(function (d) {
            b.up = d;
        });
        this.O.onclick = function () {
            b.play();
        };
        this.O.onpause = function () {};
        this.O.onplay = function () {
            F("VideoOnloadMuteStatus", { muted: b.O.muted, chatMode: b.up });
            b.O.muted ? (b.mF = !0) : (b.kl = !0);
        };
        this.O.oncanplay = function () {
            b.gi && uz(b);
        };
        this.O.oncanplaythrough = function () {
            (kb() && 15 <= ob()) || b.play();
        };
        this.O.onseeking = function () {};
        this.O.onerror = function (d) {
            r(d, "hlsNativePlayer.ts", "player", {}, "VIDEO_");
        };
        this.O.onvolumechange = function () {
            var d = b.O.volume,
                e = b.O.muted;
            0 === d && (e = !0);
            e || b.kl || 0 !== Gc || ((b.kl = !0), F("UserUnmuted", { chatMode: b.up }));
            b.mF !== e && b.Tu && F("ToggleMute", { newState: e });
            b.Ku.h({ va: e, save: !0 });
            b.aG.h({ volume: 100 * d, save: !0 });
            void 0 === b.xc || e || (b.element.removeChild(b.xc), (b.xc = void 0));
            b.mF = e;
        };
        this.O.onstalled = function () {
            yu &&
                !b.QD &&
                (b.O.pause(),
                window.setTimeout(function () {
                    b.play();
                }, 10));
        };
        v("enterpictureinpicture", this.O, function () {
            kz.h({ active: !0 });
        });
        v("leavepictureinpicture", this.O, function () {
            kz.h({ active: !1, oH: b.O.paused });
        });
        var c = this.O.webkitPresentationMode;
        v("webkitpresentationmodechanged", this.O, function () {
            var d = b.O.webkitPresentationMode;
            -1 !== ["inline", "fullscreen"].indexOf(c) && "picture-in-picture" === d ? kz.h({ active: !0 }) : "picture-in-picture" === c && -1 !== ["inline", "fullscreen"].indexOf(d) && kz.h({ active: !1, oH: b.O.paused });
            "fullscreen" === d && Ov("noninteractive-fullscreen");
            "fullscreen" === c && Ov(Qv.gE);
            c = d;
        });
        10 === ob() && yQ(this);
    }
    q(xQ, lz);
    k = xQ.prototype;
    k.GL = function (a, b) {
        var c = this;
        zz(this, a);
        null === this.O.onplaying &&
            (this.O.onplaying = function () {
                zz(c, a);
            });
        null === this.O.ontimeupdate &&
            (this.O.ontimeupdate = function () {
                var d = c.O.currentTime;
                5 < d - c.yk &&
                    ((c.yk = d),
                    zz(c, a, function () {
                        c.yk = 0;
                    }),
                    (c.yA = !1));
            });
        "" !== b ? ((this.O.src = b), this.Xc.B()) : this.O.removeAttribute("src");
        this.O.load();
        this.O.style.display = "inline";
        ("oncanplaythrough" in window && !(kb() && 15 <= ob())) || this.play();
        "" === b && (this.stop(), wz(this));
    };
    k.cr = function (a) {
        this.O.volume = a / 100;
    };
    k.Ql = function () {
        return this.O.muted || (!this.gi && this.O.paused) ? 0 : 100 * this.O.volume;
    };
    k.Tk = function (a) {
        this.O.muted = a;
        this.Ku.h({ va: a, save: !0 });
        a ? this.O.setAttribute("muted", "") : this.O.removeAttribute("muted");
    };
    k.stop = function () {
        this.yk = 0;
        this.O.style.display = "none";
        this.O.pause();
        this.O.removeAttribute("src");
        this.O.load();
        lz.prototype.stop.call(this);
    };
    k.Gm = function () {
        lz.prototype.Gm.call(this);
        this.Tu || ((this.Tu = !0), this.O.setAttribute("controls", ""), void 0 !== this.xc && (this.xc.style.display = "block"));
    };
    k.zx = function () {
        this.Tu && ((this.Tu = !1), this.O.removeAttribute("controls"), void 0 !== this.xc && (this.xc.style.display = "none"));
    };
    k.er = function () {
        lz.prototype.er.call(this);
        this.zx();
    };
    k.Mo = function () {};
    k.Nu = function (a, b) {
        this.O.volume = a / 100;
        0 === a || b ? ((this.O.muted = !0), this.O.setAttribute("muted", "")) : ((this.O.muted = !1), this.O.removeAttribute("muted"));
    };
    k.Es = function () {
        jd(this.O);
        this.Gm();
    };
    k.sA = function () {
        this.Es();
    };
    k.Up = function () {
        return this.O;
    };
    function yQ(a) {
        a.xc = document.createElement("span");
        a.xc.style.position = "absolute";
        a.xc.style.top = "6px";
        a.xc.style.right = "6px";
        a.xc.style.opacity = "0.8";
        a.xc.style.float = "right";
        a.xc.style.backgroundColor = "rgba(255, 255, 255, 0.8)";
        a.xc.style.borderRadius = "6px";
        a.xc.style.height = "36px";
        a.xc.style.padding = "3px";
        a.xc.style.cursor = "pointer";
        var b = document.createElement("span");
        b.textContent = Oo;
        b.style.color = "#0c6a93";
        b.style.fontSize = "14px";
        b.style.padding = "6px";
        b.style.position = "relative";
        b.style.top = "2px";
        b.style.textShadow = "0 0 1px #0c6a93";
        var c = document.createElement("img");
        c.src = "https://static-assets.highwebmedia.com/images/volume-mute.svg";
        c.style.width = "36px";
        c.style.height = "36px";
        c.style.display = "inline";
        c.style.verticalAlign = "middle";
        a.xc.appendChild(b);
        a.xc.appendChild(c);
        a.element.appendChild(a.xc);
        a.xc.onclick = function () {
            a.Tk(!1);
            void 0 !== a.xc && (a.element.removeChild(a.xc), (a.xc = void 0));
        };
        window.setTimeout(function () {
            b.style.display = "none";
        }, 5e3);
    }
    function zQ(a, b) {
        b = void 0 === b ? !1 : b;
        w.call(this);
        var c = this;
        this.Xc = a;
        this.Wn = b;
        this.Nk = new y("requestControlVisibility");
        this.bA = !1;
        this.Zy = new y("possibleQualityLevelsChanged");
        this.Ed = new y("videoOfflineChange");
        this.bu = new y("playbackStart");
        this.cm = 0;
        this.loading = !1;
        this.stopped = this.muted = !0;
        this.url = "";
        this.em = 0;
        this.H = new Ub();
        this.Ki = new ey(this.Wn ? "JpegToHlsPlayer" : "JpegPushPlayer");
        fy(this.Ki);
        this.element.style.background = "#333333 url(https://static-assets.highwebmedia.com/tsdefaultassets/cam_notice_background.jpg) center center / cover";
        this.element.className = "videoPlayerDiv";
        this.element.style.position = "static";
        this.ue = document.createElement("img");
        this.ue.style.width = "100%";
        this.ue.style.height = "100%";
        this.ue.style.objectFit = "contain";
        this.ue.style.backgroundColor = "black";
        this.ue.onload = function () {
            c.ue.style.display = "inline";
            c.loading = !1;
        };
        this.ue.onerror = function () {
            c.ue.style.display = "none";
            c.em -= 100;
            c.loading = !1;
        };
        this.element.appendChild(this.ue);
        sb() || ((this.requestAnimationFrame = $a()), AQ(this, 0));
    }
    q(zQ, w);
    function BQ(a) {
        a.em = Date.now();
        void 0 !== a.J &&
            E("get_edge_hls_url_ajax/", { room_slug: a.J, jpeg: "1" })
                .then(function (b) {
                    var c = new H(b.responseText),
                        d = M(c, "success");
                    "offline" === Px(L(c, "room_status"))
                        ? (a.Ed.h(!0), a.stop())
                        : (a.Ed.h(!1), c.kf("url"), c.kf("hidden_message"), d ? ((a.url = L(c, "cbjpeg_url", !1)), ad(c)) : r("Unable to refresh JPEG stream", "jpegPlayer.ts", "player", { error: b.responseText }, "VIDEO_"));
                })
                .catch(function (b) {
                    r("Unable to refresh JPEG stream", "jpegPlayer.ts", "player", { error: b }, "VIDEO_");
                });
    }
    function AQ(a, b) {
        a.Wn ||
            (5e3 < Date.now() - a.em && BQ(a),
            a.stopped || "" === a.url || sb()
                ? (a.ue.style.visibility = "hidden")
                : (0 === a.cm || 140 < b - a.cm) && !a.loading && ((a.loading = !0), (a.cm = b), (a.ue.src = a.url + "&f=" + Math.random()), "visible" !== a.ue.style.visibility && (a.bu.h(void 0), (a.ue.style.visibility = "visible"))),
            a.requestAnimationFrame.call(window, function (c) {
                AQ(a, c);
            }));
    }
    k = zQ.prototype;
    k.hh = function (a) {
        var b = this;
        this.stopped = !1;
        Vb(this.H);
        z(
            a.l.event.Mc.g(function (c) {
                void 0 !== b.Xc.Vk.get(c.Sa) || b.Ge ? b.stop() : (b.stopped = !1);
            }),
            this.H
        );
        this.J = a.A.j;
        this.url = jz(a.A) ? "" : xe.Xn + "stream?room=" + this.J;
        this.Nk.h(!0);
        this.Wn && ((this.ue.src = this.url + "&f=" + Math.random()), (this.ue.style.visibility = "visible"));
    };
    k.cr = function (a) {
        this.volume = a;
    };
    k.Ql = function () {
        return this.muted ? 0 : this.volume;
    };
    k.Tk = function (a) {
        this.muted = a;
    };
    k.stop = function () {
        this.ue.style.visibility = "hidden";
        this.stopped = !0;
    };
    k.Mo = function () {};
    k.xb = function () {
        this.Nk.h(!0);
    };
    k.rg = function () {
        this.Nk.h(!1);
    };
    k.Es = function () {
        jd(this.element);
    };
    k.Nu = function () {};
    k.Xg = function () {
        this.stop();
        Vb(this.H);
    };
    k.Up = function () {};
    var CQ = window.videojs,
        DQ = window.Hls;
    function EQ(a) {
        lz.call(this, a, "VideoJsPlayer");
        var b = this;
        this.yk = 0;
        this.va = !0;
        this.kl = this.CE = !1;
        this.xl = document.createElement("div");
        this.Qe = !1;
        this.O.className = "video-js vjs-default-skin";
        CQ.log.level("error");
        this.xl.style.position = "absolute";
        this.xl.style.backgroundColor = "#000000";
        this.xl.style.width = "inherit";
        this.xl.style.height = "inherit";
        var c = this;
        this.element.onclick = function () {
            b.CE && (hz() ? b.er() : b.Gm(), (b.CE = !1));
        };
        var d = CQ(this.O, {
            techOrder: ["html5"],
            autoplay: !0,
            html5: {
                hlsjsConfig: { debug: !1, liveSyncDuration: 3, liveSyncDurationCount: void 0, liveDurationInfinity: Infinity, liveMaxLatencyDuration: 7, liveMaxLatencyDurationCount: void 0, liveBackBufferLength: 30, autoStartLoad: !1 },
            },
            controlBar: { playToggle: !1, progressControl: !1, remainingTimeDisplay: !1, durationDisplay: !1, currentTimeDisplay: !1, timeDivider: !1, pictureInPictureToggle: !1 },
        });
        d.qualityPickerPlugin();
        this.ba = d;
        if (void 0 !== d) {
            hy(this.Ki, d);
            void 0 !== CQ.Html5Hlsjs &&
                CQ.Html5Hlsjs.addHook("beforeinitialize", function (f, g) {
                    f === d && b.Ki.xP(g);
                    g.on(DQ.Events.MANIFEST_LOADED, function (h, m) {
                        h = "auto";
                        if (Qa()) {
                            var n = window.localStorage.getItem("defaultVideoQuality");
                            null !== n && (h = n);
                        }
                        if (void 0 !== m.levels && "auto" !== h) {
                            n = -1;
                            for (var p = l(m.levels), u = p.next(); !u.done; u = p.next()) (u = u.value), u.height <= parseInt(h, 10) && (n = m.levels.indexOf(u));
                            g.startLevel = n;
                        }
                    });
                    g.on(DQ.Events.MANIFEST_LOADED, function () {
                        g.startLoad();
                    });
                    g.on(DQ.Events.LEVEL_SWITCHED, function () {
                        if (void 0 !== b.Az && b.Az[b.Az.length - 1].ap) {
                            var h = b.Az,
                                m = g.currentLevel;
                            if (Qa()) {
                                h = l(h);
                                for (var n = h.next(); !n.done; n = h.next()) (n = n.value), n.value === m && window.localStorage.setItem("defaultVideoQuality", n.label);
                            }
                        }
                    });
                });
            this.iF = d;
            FQ(this);
            d.on("volumechange", function () {
                c.cr(c.Ql(!1));
            });
            d.on("canplay", function () {
                c.play();
                c.gi && uz(c);
            });
            d.on("canplaythrough", function () {
                c.play();
            });
            var e = this.Zy;
            d.on("updateVideoControlQuality", function (f, g) {
                f = [];
                g = l(g);
                for (var h = g.next(); !h.done; h = g.next()) (h = h.value), f.push({ label: h.label, ap: h.selected, value: h.id });
                e.h(f);
                GQ(c, f);
            });
            d.on("enterpictureinpicture", function () {
                kz.h({ active: !0 });
            });
            d.on("leavepictureinpicture", function () {
                window.setTimeout(function () {
                    kz.h({ active: !1, oH: d.paused() });
                }, 0);
            });
            d.on("touchstart", function () {
                document.getElementsByClassName("vjs-volume-panel")[0].classList.add("vjs-hover");
            });
        }
        d.controls(hz());
        window.videoJsPlayer = d;
        vv.g(function (f) {
            b.up = f;
        });
        void 0 !== d.controlBar && d.controlBar.setAttribute("data-paction", "VideoJSControls");
    }
    q(EQ, lz);
    function FQ(a) {
        var b = 0,
            c = window.setInterval(function () {
                10 <= b && clearInterval(c);
                void 0 !== a.ba &&
                    void 0 !== a.ba.chromecastSessionManager &&
                    (a.ba.chromecastSessionManager.getCastContext().addEventListener("sessionstatechanged", function (d) {
                        if (void 0 !== d.sessionState)
                            switch (d.sessionState) {
                                case "SESSION_STARTED":
                                case "SESSION_RESUMED":
                                    HQ(a);
                                    a.Qe || void 0 === a.ba || (a.ba.off("canplay"), a.ba.off("canplaythrough"));
                                    a.stop();
                                    window.setTimeout(function () {
                                        a.Qe = !0;
                                        qz(a, a.context);
                                        a.cr(a.Ql(!1));
                                        IQ(a);
                                        void 0 !== a.ba && (a.ba.tech_._ui._findTitleEl().style.visibility = "hidden");
                                    }, 1e3);
                                    a.Xc.B();
                                    JQ(a);
                                    break;
                                case "SESSION_ENDED":
                                    window.setTimeout(function () {
                                        if (void 0 !== a.ba) {
                                            a.Qe = !1;
                                            var e = a.Ql(!1);
                                            a.ba.muted(a.va);
                                            a.ba.volume(e);
                                            qz(a, a.context);
                                            KQ(a);
                                            LQ(a);
                                        }
                                    }, 2500),
                                        a.xl.parentElement === a.element && a.element.removeChild(a.xl),
                                        a.Xc.show();
                            }
                    }),
                    clearInterval(c));
                b += 1;
            }, 1e3);
    }
    k = EQ.prototype;
    k.GL = function (a, b) {
        if ("" === b) this.stop();
        else {
            this.Xc.B();
            var c = this;
            this.Qe ? (JQ(this), this.Xc.B(), wz(this)) : zz(this, a);
            void 0 !== this.ba
                ? (this.Qe
                      ? this.ba.tech_.setSource({ src: b, type: "application/x-mpegURL" })
                      : this.Qe ||
                        (this.ba.on("playing", function () {
                            zz(c, a);
                        }),
                        this.ba.on("waiting", function () {
                            zz(c, a);
                        }),
                        this.ba.on("timeupdate", function () {
                            if (void 0 !== c.ba) {
                                var d = c.ba.currentTime();
                                5 < d - c.yk &&
                                    ((c.yk = d),
                                    zz(c, a, function () {
                                        c.yk = 0;
                                    }),
                                    (c.yA = !1));
                            }
                        }),
                        this.ba.off("error"),
                        this.ba.on("error", function (d) {
                            if (void 0 !== c.ba) {
                                var e = c.ba.error();
                                null === e || (2 !== e.code && 4 !== e.code) || (c.gi || qz(c, a), r(e.message, "videoJsPlayer.ts", "player", d, "VIDEO_"));
                            } else r("Videojs error type undefined", "videoJsPlayer.ts", "player", d, "VIDEO_");
                        }),
                        this.ba.src({ src: b, type: "application/x-mpegURL" }),
                        this.ba.qualityPickerPlugin(),
                        this.ba.show(),
                        this.ba.muted(this.va),
                        (this.O.style.display = "inline")),
                  (this.iF = this.ba),
                  KQ(this))
                : R("something went wrong");
        }
    };
    function IQ(a) {
        if (a.Qe && void 0 !== a.ba && void 0 !== a.ba.chromecastSessionManager) {
            var b = a.ba.chromecastSessionManager.getCastContext().getCurrentSession();
            if (void 0 !== b) {
                var c = 0;
                b.addMessageListener("urn:x-cast:com.highwebmedia.cast.media", function (d, e) {
                    a.Qe && e.includes("PAUSED")
                        ? (clearTimeout(c),
                          (c = window.setTimeout(function () {
                              qz(a, a.context);
                          }, 2500)))
                        : a.Qe && e.includes("BUFFERING")
                        ? (clearTimeout(c),
                          (c = window.setTimeout(function () {
                              qz(a, a.context);
                          }, 7500)))
                        : !a.Qe || e.includes("PLAYING")
                        ? clearTimeout(c)
                        : a.Qe && e.includes("MEDIA_ERROR") && qz(a, a.context);
                });
            }
        }
    }
    k.cr = function (a) {
        if (void 0 !== this.ba) {
            var b = this.va;
            this.va = 0 === a || this.ba.muted();
            !b || this.va || this.kl || ((this.kl = !0), F("UserUnmuted", { chatMode: this.up }));
            b !== this.va && F("ToggleMute", { newState: this.va });
            this.aG.h({ volume: a, save: !0 });
            this.Ku.h({ va: this.va, save: !0 });
        }
    };
    k.Tk = function (a) {
        !this.va || a || this.kl || ((this.kl = !0), F("UserUnmuted", { chatMode: this.up }));
        a !== this.va && F("ToggleMute", { newState: a });
        this.va = a;
        this.Ku.h({ va: a, save: !0 });
        void 0 !== this.ba && this.ba.muted(a);
    };
    k.Nu = function (a, b) {
        this.va = b;
        void 0 !== this.ba && (this.ba.volume(a / 100), this.ba.muted(b));
    };
    k.Ql = function (a) {
        return void 0 !== this.ba ? ((void 0 === a || a) && this.ba.muted() ? 0 : 100 * this.ba.volume()) : 0;
    };
    k.stop = function () {
        this.yk = 0;
        if (!this.Qe && void 0 !== this.ba) this.ba.off("timeupdate"), this.ba.off("waiting"), this.ba.off("playing"), this.ba.pause(), HQ(this), this.ba.src(), this.ba.hide(), this.ba.muted(this.va);
        else if (this.Qe && void 0 !== this.ba) {
            this.ba.pause();
            this.ba.src();
            this.ba.hide();
            return;
        }
        lz.prototype.stop.call(this);
    };
    function JQ(a) {
        a.xl !== a.element.firstChild && a.element.insertBefore(a.xl, a.element.firstChild);
    }
    function KQ(a) {
        a.Qe ||
            void 0 !== a.Nm ||
            void 0 === a.ba ||
            ((a.Nm = a.ba.tech()),
            a.Nm.on("loadedqualitydataTS", function (b, c) {
                F("VideoOnloadMuteStatus", { muted: a.va, chatMode: a.up });
                a.va || (a.kl = !0);
                b = [];
                for (var d = "auto", e = l(c.qualityData.video), f = e.next(); !f.done; f = e.next()) (f = f.value), b.push({ label: f.label, ap: f.selected, value: f.id }), !0 === f.selected && (d = f.label);
                e = l(document.getElementsByClassName("vjs-menu-item vjs-selected"));
                for (f = e.next(); !f.done; f = e.next())
                    (f = f.value), f.getElementsByClassName("vjs-menu-item-text")[0].innerHTML !== d && (f.classList.remove("vjs-selected"), (f.ariaChecked = "false"), (f.getElementsByClassName("vjs-control-text")[0].innerHTML = ""));
                a.Az = b;
                a.Zy.h(b);
                GQ(a, b);
                void 0 === c.qualitySwitchCallback &&
                    F(
                        "clickMenuLink:QualitySelect-" +
                            b.filter(function (g) {
                                return g.ap;
                            })[0].label
                    );
            }));
    }
    function LQ(a) {
        a.Qe ||
            void 0 === a.ba ||
            (a.ba.on("canplay", function () {
                a.play();
                a.gi && uz(a);
            }),
            a.ba.on("canplaythrough", function () {
                a.play();
            }));
    }
    function HQ(a) {
        a.Qe || void 0 === a.Nm || (a.Nm.off("loadedqualitydataTS"), void 0 !== a.Nm.hlsProvider && a.Nm.hlsProvider.dispose(), a.Nm.reset(), (a.Nm = void 0));
    }
    k.Mo = function (a) {
        void 0 !== this.ba && this.ba.selectQualityButton(a);
    };
    k.fD = function () {
        lz.prototype.fD.call(this);
        this.Nk.h(!0);
        this.CE = !0;
    };
    k.Gm = function () {
        lz.prototype.Gm.call(this);
        void 0 !== this.ba && this.ba.controls(!0);
    };
    k.er = function () {
        lz.prototype.er.call(this);
        this.zx();
    };
    k.zx = function () {
        void 0 !== this.ba && this.ba.controls(!1);
    };
    k.Es = function () {
        void 0 !== this.ba && (this.ba.requestFullscreen(), this.Gm());
    };
    k.Up = function () {
        return this.O;
    };
    function GQ(a, b) {
        b = l(b);
        for (var c = b.next(); !c.done; c = b.next()) (c = c.value), c.ap && a.Ki.Mo(c.label);
    }
    function MQ(a, b, c) {
        w.call(this);
        var d = this;
        this.Xc = b;
        this.Ed = new y("videoOfflineChange");
        a = NQ(a);
        this.ww(a, c);
        this.Ef = document.createElement("img");
        this.Ef.src = Vq();
        this.Ef.className = "cbLogo";
        Q(this.Ef, { position: "fixed", width: "90px", height: "27px", top: "8px", right: "8px", userSelect: "none", msUserSelect: "none", pointerEvents: "none" });
        this.Ef.setAttribute("draggable", "false");
        this.element.appendChild(this.Ef);
        xe.hG && (this.Ef.style.visibility = "hidden");
        Qv.ud.g(function () {
            d.N.xb();
        });
        this.Mk = document.createElement("div");
        this.Mk.innerText = "Broadcaster's stream is experiencing network issues";
        Q(this.Mk, { display: "none", color: "#0000ff", position: "absolute", fontSize: "1.0em", fontWeight: "bold", top: "8px", left: "8px", userSelect: "none", pointerEvents: "none", msUserSelect: "none" });
        this.Mk.setAttribute("draggable", "false");
        this.element.appendChild(this.Mk);
    }
    q(MQ, w);
    k = MQ.prototype;
    k.pB = function () {
        var a = this,
            b,
            c;
        null === (b = this.N.HF) || void 0 === b
            ? void 0
            : b.g(function (d) {
                  a.TC(d);
              });
        this.N.Ed.g(function (d) {
            a.Ed.h(d);
            a.Xc.eG(d);
        });
        !0 === (null === (c = A.current.V) || void 0 === c ? void 0 : c.iq) &&
            !0 === A.current.Mk &&
            B.mi.g(function () {
                var d = B.getState().quality;
                a.Mk.style.display = "okay" === (null === d || void 0 === d ? void 0 : d.quality) || "bad" === (null === d || void 0 === d ? void 0 : d.quality) || "stop" === (null === d || void 0 === d ? void 0 : d.quality) ? "" : "none";
                a.Mk.style.color = "bad" === (null === d || void 0 === d ? void 0 : d.quality) ? "#ff0000" : "0000ff";
                a.Mk.innerText = "stop" === (null === d || void 0 === d ? void 0 : d.quality) ? "Broadcaster's stream has stopped." : "Broadcaster's stream is experiencing network issues";
            });
    };
    k.nO = function () {};
    function OQ() {
        return kb() ? "hlsnative" : "videojs";
    }
    function NQ(a) {
        var b = Bc(window.location.search).player;
        return void 0 !== b ? ("hls" === b && (b = OQ()), b) : Za() || Oa.isSupported() ? (a ? OQ() : "jpegToHls") : (Zx({ eventName: "jpegFallback", hlsNativeSupported: Za(), hlsJsSupported: Yx.isSupported() }), "jpeg");
    }
    k.ww = function (a, b) {
        var c;
        switch (a) {
            case "videojs":
                a = new EQ(this.Xc);
                break;
            case "hlsnative":
                a = new xQ(this.Xc);
                break;
            case "jpeg":
                a = new zQ(this.Xc);
                break;
            case "jpegToHls":
                a = new zQ(this.Xc, !0);
                break;
            default:
                r("received unexpected player name: " + a, "basePlayer.ts", "player");
                R("unknown player: " + a);
                return;
        }
        b = !(null !== (c = null === b || void 0 === b ? void 0 : b.jS) && void 0 !== c && c);
        this.N = Fb(this, a);
        b && this.Pr();
    };
    k.Pr = function () {
        Ec = this.N instanceof EQ ? "videojs" : this.N instanceof xQ ? "hlsnative" : this.N instanceof zQ ? (this.N.Wn ? "jpegToHls" : "jpeg") : "unknown player type";
        this.pB();
        this.nO();
    };
    function PQ(a) {
        a.N.stop();
        a.N.Ki.no();
        a.removeChild(a.N);
    }
    function QQ(a, b, c) {
        c = void 0 === c ? !0 : c;
        PQ(a);
        var d = "hlsnative" === OQ() ? new xQ(a.Xc) : new EQ(a.Xc);
        v("loadeddata", d.O, function () {
            d.Tk(!c);
        });
        d.hh(b);
        qz(d, b);
        c ? (d.cr(100), d.Tk(!1)) : d.Tk(!0);
        a.N = Fb(a, d);
        a.Pr();
        a.D();
    }
    k.TC = function (a) {
        PQ(this);
        this.ww("jpeg");
        this.N.hh(a);
    };
    function RQ(a, b, c) {
        var d = b / (c ? 0.5625 : 0.75);
        d > a && ((d = a), (b = d * (c ? 0.5625 : 0.75)));
        return [d, b];
    }
    function SQ(a, b) {
        var c = document.createElement("div");
        c.innerText = a;
        c.style.color = "#72C0FF";
        c.style.cursor = "pointer";
        c.style.paddingTop = "5px";
        c.onmouseenter = function () {
            c.style.textDecoration = "underline";
        };
        c.onmouseleave = function () {
            c.style.textDecoration = "none";
        };
        c.style.pointerEvents = "auto";
        c.onclick = function (d) {
            b(d);
        };
        return c;
    }
    function TQ(a) {
        a = void 0 === a ? !0 : a;
        w.call(this);
        var b = this;
        this.QM = a;
        this.sq = SQ("More Rooms", function (d) {
            Xy.h(void 0);
            d.stopPropagation();
        });
        this.Vk = new Map();
        this.qj = SQ("", function () {});
        this.XT = !0;
        this.On = "";
        this.EI = Iq;
        this.pt = !1;
        this.element.style.display = "none";
        this.element.style.position = this.QM ? "fixed" : "absolute";
        this.element.style.height = "auto";
        this.element.style.width = "auto";
        this.element.style.boxSizing = "border-box";
        this.element.style.padding = "0 50px";
        this.element.style.left = "0";
        this.element.style.textAlign = "center";
        this.element.style.pointerEvents = "none";
        this.element.style.zIndex = "1";
        this.qa = document.createElement("div");
        this.qa.style.fontSize = "32px";
        this.qa.style.lineHeight = "32px";
        this.qa.style.color = "#72c0ff";
        this.qa.style.marginBottom = "20px";
        this.element.appendChild(this.qa);
        this.body = document.createElement("div");
        this.body.style.fontSize = "16px";
        this.body.style.color = "#ffffff";
        this.text = document.createElement("span");
        this.body.appendChild(this.text);
        this.sq.style.display = "none";
        this.body.appendChild(this.sq);
        this.qj.style.display = "none";
        this.body.appendChild(this.qj);
        this.Ej = document.createElement("span");
        this.Ej.innerText = vk;
        this.Ej.style.display = "none";
        this.Ej.style.paddingTop = "5px";
        this.body.appendChild(this.Ej);
        this.element.appendChild(this.body);
        this.Vk.set("away", function () {
            b.qa.innerText = Kq;
            b.text.innerText = Lq;
            b.qj.style.display = "none";
            b.Ej.style.display = "none";
            UQ(b, !0);
            b.element.style.display = "block";
        });
        this.Vk.set("privatenotwatching", function (d) {
            b.qa.innerText = rk;
            b.text.innerText = Mq;
            b.qj.innerText = Nq;
            b.qj.style.display = b.rL ? "block" : "none";
            b.Ej.style.display = b.rL ? "none" : "block";
            b.qj.onclick = function () {
                NB(d);
            };
            UQ(b, !0);
            b.element.style.display = "block";
        });
        this.Vk.set("hidden", function () {
            b.qa.innerText = Oq;
            b.text.innerText = b.On;
            b.qj.style.display = "none";
            b.Ej.style.display = "none";
            UQ(b, !1);
            b.element.style.display = "block";
        });
        this.Vk.set("offline", function () {
            b.qa.innerText = aq;
            b.text.innerText = Pq;
            b.qj.style.display = "none";
            b.Ej.style.display = "none";
            b.element.style.display = "block";
            UQ(b, !0);
        });
        this.Vk.set("passwordprotected", function () {
            b.qa.innerText = Qq;
            b.text.innerText = Rq;
            b.qj.style.display = "none";
            b.Ej.style.display = "none";
            UQ(b, !0);
            b.element.style.display = "block";
            pd() && kd();
        });
        var c = new Ub();
        G.g(function (d) {
            b.qC = d.l;
            b.rL = 0 < d.A.vf;
            z(
                d.l.event.Mc.g(function (e) {
                    VQ(b, d.l, e.Sa);
                }),
                c
            );
            z(
                d.l.event.BK.g(function (e) {
                    b.On = e;
                }),
                c
            );
            z(
                FB.g(function () {
                    VQ(b, d.l, d.A.sa);
                }),
                c
            );
            b.On = d.A.On;
            VQ(b, d.l, d.A.sa);
        });
        Kc.g(function () {
            Vb(c);
            b.On = "";
            b.Ge = !1;
        });
    }
    q(TQ, w);
    TQ.prototype.B = function () {
        this.element.style.display = "none";
    };
    TQ.prototype.show = function () {
        this.element.style.display = "block";
    };
    TQ.prototype.eG = function (a) {
        this.Ge = a;
        void 0 !== this.qC && VQ(this, this.qC, this.qC.status);
    };
    TQ.prototype.D = function () {
        if (void 0 !== this.parent) {
            var a = this.parent.element.getBoundingClientRect(),
                b = document.documentElement.clientWidth,
                c = document.documentElement.clientHeight;
            a.width <= b ? ((this.element.style.width = a.width + "px"), this.QM && (this.element.style.left = a.left + "px")) : ((this.element.style.width = b + "px"), (this.element.style.left = "0"));
            this.element.style.top =
                a.height <= c
                    ? "fixed" === this.parent.element.style.position
                        ? a.top + 0.5 * a.height - 0.5 * this.element.offsetHeight + "px"
                        : 0.5 * a.height - 0.5 * this.element.offsetHeight + "px"
                    : 0.5 * c - 0.5 * this.element.offsetHeight + "px";
            this.element.style.maxHeight = a.height + "px";
        }
    };
    function VQ(a, b, c) {
        a.Ge && (c = "offline");
        var d = a.Vk.get(c);
        if (void 0 !== d) d(b), a.R();
        else
            switch ((a.pt || ((a.sq.style.display = "none"), (a.element.style.display = "none")), c)) {
                case "public":
                case "privaterequesting":
                case "privatewatching":
                case "privatespying":
                case "notconnected":
                case "hiddenwatching":
                    break;
                default:
                    t("unexpected status: " + c, "roomStatusNotifier.ts", "common");
            }
    }
    function UQ(a, b) {
        var c = a.pt && !a.Ge;
        a.sq.style.display = (void 0 !== b && !b) || c || !a.XT ? "none" : "block";
    }
    var WQ = [];
    function XQ(a) {
        if (
            !WQ.some(function (c) {
                return c.yc === a;
            })
        ) {
            var b = new au(a);
            b.Dp();
            WQ.push(b);
        }
    }
    function YQ(a) {
        void 0 !== a
            ? (WQ = WQ.filter(function (b) {
                  return b.yc === a ? (b.$n(), !1) : !0;
              }))
            : (WQ.forEach(function (b) {
                  b.$n();
              }),
              (WQ = []));
    }
    new y("stopCamRequest");
    new y("shutdownCamRequest");
    var ZQ = !1;
    function $Q(a, b) {
        var c, d;
        ZQ ||
            ((ZQ = !0),
            "" !== a.lb &&
                new au(a.lb).yy.g(function () {
                    b.stop();
                    R(fm);
                    YQ(a.lb);
                }),
            !0 === (null === (d = null === (c = A.current) || void 0 === c ? void 0 : c.V) || void 0 === d ? void 0 : d.Qb) &&
                (YQ(),
                C("api/ts/chat/share-my-cam/")
                    .then(function (e) {
                        e = Qc(new H(e.responseText), "shared_rooms");
                        if (void 0 !== e) {
                            e = l(e);
                            for (var f = e.next(); !f.done; f = e.next()) L(f.value, "username") === a.j && XQ(a.lb);
                        }
                    })
                    .catch(function () {})));
    }
    function aR() {
        return V(
            "div",
            { style: { height: "1.2em", width: "1.2em", display: "inline-block", position: "relative" }, colorClass: "followerStarSvg" },
            V(
                "svg",
                { xmlns: "http://www.w3.org/2000/svg", viewBox: "8 7 48 46" },
                V("g", { transform: "translate(0,-952.36218)" }, V("path", { d: "M32,959.4l8,14.3l16,3.2L44.9,989l1.9,16.3L32,998.4l-14.8,6.9l1.9-16.3L8,976.9l16-3.2L32,959.4z" }))
            )
        );
    }
    function bR() {
        var a = this,
            b,
            c;
        this.Ls = new Set();
        if (A.current.oj) {
            var d = null !== (c = null === (b = A.current.V) || void 0 === b ? void 0 : b.yc) && void 0 !== c ? c : "";
            new eu(d).ea.g(function (e) {
                e.Td ? cR(a, e.username) : ((e = e.username), a.Ls.delete(e), a.nv(e));
            });
            G.g(function (e) {
                window.setTimeout(function () {
                    HF(GF())
                        .then(function (f) {
                            f.Oq.forEach(function (g) {
                                !0 === g.Td && cR(a, g.username);
                            });
                        })
                        .catch(void 0);
                }, 5e3);
                e.l.event.Nq.g(function (f) {
                    !0 === f.K.Td && cR(a, f.K.username);
                });
                e.l.event.sr.g(function (f) {
                    !0 === f.K.Td && cR(a, f.K.username);
                });
                new oF(e.A.lb).ea.g(function (f) {
                    !0 === f.M.Td && cR(a, f.M.username);
                });
            });
            lC("followerBadge", function (e) {
                return a.PB(e);
            });
        }
    }
    var dR;
    function cR(a, b) {
        a.Ls.has(b) || (a.Ls.add(b), a.nv(b));
    }
    function eR(a, b) {
        return a.Ls.has(b) && b !== B.getState().j;
    }
    bR.prototype.PB = function (a) {
        var b = document.createElement("span");
        Q(b, { position: "relative", display: eR(this, a) ? "" : "none", marginRight: ".1em" });
        var c = aR(),
            d = nw({ content: oq, qg: !1, Rc: 1, wd: "8px" });
        P(d, "tooltip");
        O(d, "tooltip-white");
        d.style.padding = "6px";
        d.style.fontFamily = "UbuntuLight, Helvetica, Arial, sans-serif";
        d.style.lineHeight = "normal";
        d.style.position = "fixed";
        d.style.display = "block";
        wd(c).g(function (e) {
            var f;
            e ? document.body.appendChild(d) : null === (f = d.parentElement) || void 0 === f ? void 0 : f.removeChild(d);
            e = c.getBoundingClientRect();
            f = Fd();
            d.style.top = -f.top + e.top - d.offsetHeight - e.height / 5 - 5 + "px";
            d.style.left = -f.left + e.left + e.width / 2 - 18 + "px";
        });
        b.appendChild(c);
        return b;
    };
    bR.prototype.nv = function (a) {
        var b = eR(this, a);
        Array.from(document.body.querySelectorAll(".followerBadge_" + a)).forEach(function (c) {
            c.style.display = b ? "" : "none";
        });
    };
    var fR;
    G.g(function (a) {
        fR = a.l.j();
    });
    function gR(a) {
        var b = void 0 === fR || "" === fR ? a : fR;
        return new Promise(function (c, d) {
            C("api/ts/accounts/usermenu/" + a + "/" + b + "/")
                .then(function (e) {
                    e = new H(e.responseText);
                    var f = M(e, "online"),
                        g = L(e, "username"),
                        h = N(e, "display_age", !1),
                        m = L(e, "gender"),
                        n = L(e, "image_url"),
                        p = M(e, "can_silence"),
                        u = Tc(e, "silence_id"),
                        x = M(e, "can_access"),
                        D = M(e, "needs_supporter_to_pm");
                    ad(e);
                    c({ username: g, Fb: h, nc: m, pk: n, Vf: f, cI: p, kw: x, tj: D, Oz: u });
                })
                .catch(function (e) {
                    d(e);
                });
        });
    }
    function hR() {
        var a = iR;
        return 0 === a || 1 === a;
    }
    function jR(a, b, c) {
        var d;
        Xu.call(this);
        var e = this;
        this.M = a;
        this.message = c;
        this.wr = new Ub();
        this.rO = function (g) {
            var h = g.ctrlKey || g.metaKey,
                m = h && 83 === g.keyCode,
                n = h && 191 === g.keyCode,
                p = 191 === g.keyCode;
            h = h && 76 === g.keyCode;
            var u = 27 === g.keyCode;
            (9 === g.keyCode || m || n || h || u || p) && e.Lb();
        };
        this.Tl = function () {
            e.Lb();
        };
        this.$P = b;
        this.cF = null !== (d = kR) && void 0 !== d ? d : b.offsetParent;
        lR(this);
        mR(this);
        nR(this);
        this.$A();
        oR(this);
        this.YA();
        v("keydown", document, this.rO);
        v(nd(), document, this.Tl);
        v("popstate", window, this.Tl);
        z(jv.g(this.Tl, !1), this.wr);
        z(Hr.g(this.Tl, !1), this.wr);
        z(Nr.g(this.Tl, !1), this.wr);
        var f = window.innerWidth;
        z(
            gw.g(function () {
                window.innerWidth < f && e.Tl();
                f = window.innerWidth;
            }),
            this.wr
        );
        this.cF.appendChild(this.element);
        this.Gd();
        this.fc.g(function () {
            e.Lb();
        });
        Xu.prototype.xh.call(this);
        this.co();
    }
    var kR;
    q(jR, Xu);
    k = jR.prototype;
    k.co = function () {
        var a = this;
        iR = 0;
        this.position(!0);
        gR(this.M.username)
            .then(function (b) {
                2 !== iR && (void 0 === a.data && ((a.data = b), (a.Im = a.data.tj), pR(a), qR(a), (iR = 1)), a.position());
            })
            .catch(function (b) {
                r("Could not process user menu request: " + b, "userContextMenu.ts", "common");
            });
    };
    function lR(a) {
        iR = 0;
        a.element = document.createElement("div");
        a.element.id = "user-context-menu";
        a.zg = document.createElement("div");
        a.ki = document.createElement("div");
        a.zg.style.backgroundColor = "";
        a.element.appendChild(a.zg);
        a.element.style.textShadow = "none";
        a.element.style.position = "absolute";
        a.element.style.borderRadius = "4px";
        a.element.style.borderStyle = "solid";
        a.element.style.borderWidth = "1px";
        a.element.style.top = "0";
        a.element.style.fontWeight = "normal";
        a.element.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        a.element.style.fontSize = "12px";
        a.element.style.width = "188px";
        a.element.style.cursor = "default";
        a.element.style.visibility = "visible";
        a.element.style.zIndex = "1010";
        a.S.style.zIndex = "1010";
        z(
            G.g(function (b) {
                a.J = b.A.j;
                a.Sh = b.A.userName;
                a.I = b.l;
            }),
            a.wr
        );
    }
    function mR(a) {
        var b = document.createElement("div");
        O(b, "ucmHeader");
        b.style.padding = "9px 10px";
        b.style.fontWeight = "bold";
        b.style.borderTopLeftRadius = "4px";
        b.style.borderTopRightRadius = "4px";
        a.name = document.createElement("div");
        a.name.style.display = "inline-block";
        a.name.style.maxWidth = "100px";
        a.name.style.height = "12px";
        a.name.style.marginRight = "4px";
        b.appendChild(a.name);
        void 0 === dR && (dR = new bR());
        var c = dR.Ls.has(a.M.username);
        if (A.current.oj && c && a.M.username !== B.getState().j) {
            var d = aR(),
                e = nw({ content: oq, qg: !1, Rc: 1, wd: "8px" });
            P(e, "tooltip");
            O(e, "tooltip-white");
            e.style.padding = "6px";
            e.style.fontFamily = "UbuntuLight, Helvetica, Arial, sans-serif";
            e.style.lineHeight = "normal";
            e.style.position = "fixed";
            e.style.display = "block";
            e.style.width = "max-content";
            e.style.zIndex = "1011";
            wd(d).g(function (f) {
                var g;
                f ? document.body.appendChild(e) : null === (g = e.parentElement) || void 0 === g ? void 0 : g.removeChild(e);
                f = d.getBoundingClientRect();
                g = Fd();
                e.style.top = -g.top + f.top - e.offsetHeight - f.height / 5 - 5 + "px";
                e.style.left = -g.left + f.left + f.width / 2 - 18 + "px";
            });
            b.appendChild(d);
        }
        c = document.createElement("div");
        c.style.display = "inline-block";
        c.style.width = "38px";
        c.style.height = "12px";
        c.style.position = "absolute";
        c.style.right = "8px";
        a.fe = document.createElement("span");
        O(a.fe, "ucmAgespan");
        a.fe.style.display = "inline-block";
        a.fe.style.width = "15px";
        a.fe.style.minHeight = "14px";
        a.fe.style.fontSize = "12px";
        a.fe.style.fontWeight = "bold";
        a.fe.style.marginRight = "6px";
        a.fe.style.verticalAlign = "top";
        c.appendChild(a.fe);
        O(a.fe, "ucmPlaceholder");
        a.Nl = document.createElement("span");
        a.Nl.style.display = "inline-block";
        a.Nl.style.width = "15px";
        a.Nl.style.height = "14px";
        a.Nl.style.verticalAlign = "top";
        a.Hc = document.createElement("img");
        void 0 !== a.M.nc ? ((a.Hc.src = RA(a.M.nc)), (a.Hc.style.display = "inline-block"), (a.Hc.title = bx(a.M.nc))) : (O(a.Nl, "ucmPlaceholder"), (a.Hc.style.display = "none"));
        a.Hc.height = 14;
        a.Hc.width = 14;
        a.Nl.appendChild(a.Hc);
        c.appendChild(a.Nl);
        b.appendChild(c);
        a.zg.appendChild(b);
    }
    function oR(a) {
        var b = document.createElement("a");
        b.innerText = a.M.username;
        O(b, NA(a.M));
        b.style.fontWeight = "bold";
        b.href = "/" + a.M.username + "/";
        b.target = "_blank";
        b.style.textDecoration = "none";
        b.style.overflow = "hidden";
        b.style.textOverflow = "ellipsis";
        b.style.maxWidth = "100px";
        b.style.display = "inline-block";
        b.style.cursor = "pointer";
        b.onmouseenter = function () {
            b.style.textDecoration = "underline";
        };
        b.onmouseleave = function () {
            b.style.textDecoration = "none";
        };
        v("click", a.name, function (c) {
            F("ViewProfile", { username: a.M.username });
            c.stopPropagation();
            a.Lb();
        });
        a.name.appendChild(b);
        a.S.style.background = "rgba(0, 0, 0, 0.01)";
        a.element.style.visibility = "visible";
    }
    function pR(a) {
        var b,
            c,
            d = document.createElement("div");
        d.style.width = "188px";
        d.style.height = "75px";
        d.style.overflow = "hidden";
        d.style.borderRadius = "4px 4px 0px 0px";
        if (!0 === (null === (b = a.data) || void 0 === b ? void 0 : b.Vf)) {
            var e = document.createElement("img");
            v("load", e, function () {
                var f = d.getBoundingClientRect(),
                    g = e.getBoundingClientRect();
                f.height < g.height && ((e.style.position = "relative"), (e.style.left = "0px"), (e.style.top = (f.height - g.height) / 2 + "px"));
            });
            e.src = a.data.pk;
            e.style.width = "100%";
            d.appendChild(e);
            a.element.style.top = a.element.offsetTop - 75 + "px";
            a.element.insertBefore(d, a.element.firstChild);
        }
        P(a.fe, "ucmPlaceholder");
        P(a.Nl, "ucmPlaceholder");
        !0 === (null === (c = a.data) || void 0 === c ? void 0 : c.kw) &&
            (!isNaN(a.data.Fb) && 18 <= a.data.Fb && (a.fe.innerText = a.data.Fb.toString()), P(a.fe, "ucmPlaceholder"), (a.Hc.src = RA(a.data.nc)), (a.Hc.style.display = "inline-block"));
    }
    function nR(a) {
        var b = PA(a.M),
            c = QA(a.M);
        if (void 0 !== b) {
            var d = document.createElement("div");
            O(d, "ucmUserLabel");
            d.style.padding = "9px 10px";
            d.style.borderTopWidth = "1px";
            d.style.borderTopStyle = "solid";
            a.zg.appendChild(d);
            var e = document.createElement("div");
            e.style.width = "74px";
            e.style.height = "12px";
            e.style.width = "100%";
            e.innerText = b;
            O(e, NA(a.M));
            e.style.fontWeight = "bold";
            d.appendChild(e);
            void 0 !== c &&
                ((a = document.createElement("div")),
                O(a, "ucmSublabel"),
                (a.style.height = "10px"),
                (a.style.fontSize = "10px"),
                (a.style.marginTop = "4px"),
                (a.style["-webkit-text-size-adjust"] = "none"),
                (a.innerText = c),
                d.appendChild(a));
        }
    }
    k.$A = function () {
        this.XA(this.M);
        this.zg.appendChild(this.ki);
        O(this.ki, "ucmModSection");
        this.ki.style.borderTopWidth = "1px";
        this.ki.style.borderTopStyle = "solid";
        this.ki.style.padding = "5px 0";
        this.ki.style.display = "none";
        rR(this, this.M.username);
    };
    function rR(a, b) {
        void 0 !== a.Sh &&
            a.Sh !== b &&
            ((a.eH = new EJ(
                a.Sh,
                b,
                function () {
                    a.Lb();
                },
                function () {
                    a.position();
                }
            )),
            a.zg.appendChild(a.eH.element));
    }
    k.XA = function () {
        this.Ag = document.createElement("div");
        O(this.Ag, "ucmLinks");
        this.Ag.style.padding = "5px 0";
        this.Ag.style.fontSize = "12px";
        this.Ag.style.borderTopWidth = "1px";
        this.Ag.style.borderTopStyle = "solid";
        this.zg.appendChild(this.Ag);
    };
    k.YA = function () {
        if (this.Sh !== this.M.username)
            if (void 0 === this.I) r("ignoreText: Chatconnection should be defined", "userContextMenu.ts", "common");
            else {
                var a = sR(this, this.M.username, !0);
                this.Ag.appendChild(a);
                A.current.Ro && ((a = sR(this, this.M.username, !1)), this.Ag.appendChild(a));
                a = tR(this, this.M.username);
                this.Ag.appendChild(a);
                this.J !== this.Sh && ((a = uR(this, this.M.username, this.I)), this.Ag.appendChild(a));
                void 0 !== this.message && ((a = vR(this, this.M.username, this.message)), this.Ag.appendChild(a));
            }
        else this.Ag.style.display = "none";
    };
    k.eI = function () {
        return !1;
    };
    function qR(a) {
        if (void 0 !== a.data && a.data.cI && (void 0 === a.data.Oz || a.eI())) {
            var b = document.createElement("div"),
                c = a.Zi(),
                d = wR(),
                e = a.data.username;
            d.style.paddingLeft = "20px";
            c.appendChild(d);
            b.appendChild(c);
            d.innerText = void 0 !== a.data.Oz ? uj : tj;
            c.onclick = function () {
                void 0 !== a.data && void 0 !== a.data.Oz && void 0 !== a.J
                    ? E("edit_room_ban/", { banid: String(a.data.Oz), action: "remove_silence", room_username: a.J }).catch(function (f) {
                          r(f, "userContextMenu.ts", "common");
                          R("Error removing silence from user " + e);
                      })
                    : Md("Silence " + a.M.username + "?", function () {
                          F("SilenceUser", { username: a.M.username, to_user: a.M.username });
                          E("roomsilence/" + a.M.username + "/" + a.J + "/", {}).catch(function (f) {
                              r(f, "userContextMenu.ts", "common");
                              R("Error silencing user " + a.M.username);
                          });
                      });
                a.Lb();
            };
            a.ki.appendChild(b);
            a.ki.style.display = "";
        }
    }
    k.PC = function () {
        if (pd()) return { VH: md(), UH: md() };
        for (var a, b, c = this.cF; void 0 !== c && "body" !== c.tagName.toLowerCase(); c = null === c.parentElement ? void 0 : c.parentElement) {
            var d = c,
                e = window.getComputedStyle(d);
            void 0 === a && "hidden" === e.overflowY && (a = d);
            void 0 === b && "hidden" === e.overflowX && (b = d);
            d = l([a, b]);
            a = d.next().value;
            b = d.next().value;
            if (void 0 !== a && void 0 !== b) break;
        }
        return { VH: a, UH: b };
    };
    k.position = function (a) {
        if (void 0 === a ? 0 : a) {
            a = this.$P.getBoundingClientRect();
            if (document.body.contains(this.name)) {
                var b = this.name.getBoundingClientRect(),
                    c = this.element.offsetLeft + (a.left - b.left);
                this.element.style.top = this.element.offsetTop + (a.top - b.top) + "px";
                this.element.style.left = c + "px";
            }
            a = window.innerHeight - (this.element.getBoundingClientRect().top + this.element.offsetHeight + 37);
            0 > a && (this.element.style.top = parseInt(this.element.style.top.slice(0, -2)) + a + "px");
        }
        b = this.PC();
        a = b.VH;
        b = b.UH;
        b = void 0 === b ? document.documentElement : b;
        var d = (void 0 === a ? document.documentElement : a).getBoundingClientRect(),
            e = b.getBoundingClientRect();
        c = this.element.getBoundingClientRect();
        a = d.bottom - c.height;
        b = e.right - c.width;
        d = d.top;
        e = e.left;
        var f = c.top;
        c = c.left;
        d > f && (this.element.style.top = this.element.offsetTop + (d - f) + 4 + "px");
        e > c && (this.element.style.left = this.element.offsetLeft + (e - c) + 4 + "px");
        a < f && (this.element.style.top = this.element.offsetTop + (a - f) - 4 + "px");
        b < c && (this.element.style.left = this.element.offsetLeft + (b - c) - 4 + "px");
    };
    k.Lb = function () {
        2 !== iR &&
            (Xu.prototype.Lb.call(this),
            void 0 !== this.ib && this.ib.cv(),
            Bb("keydown", document, this.rO),
            Bb(nd(), document, this.Tl),
            Bb("popstate", window, this.Tl),
            Vb(this.wr),
            this.cF.removeChild(this.element),
            this.Xg(),
            (iR = 2));
    };
    function sR(a, b, c) {
        var d = a.Zi(),
            e = document.createElement("div"),
            f = wR();
        O(d, "ucmPMLink");
        d.appendChild(e);
        d.appendChild(f);
        f.innerText = c ? ei : fi;
        O(e, c ? "ucmSendPmIcon" : "ucmSendDmIcon");
        e.style.padding = "0px 4px 0 0";
        e.style.verticalAlign = "bottom";
        e.style.width = "14px";
        e.style.height = "14px";
        e.style.display = "inline-block";
        e.style.marginRight = "4px";
        v("click", d, function (g) {
            a.Lb();
            Wu(c ? gi : hi) ||
                (c ? (F("StartPrivateMessage", { username: b, to_user: b, location: "PMTab" }), $y.h({ username: b, focus: !0, Im: a.Im })) : (F("StartDirectMessage", { username: b, to_user: b }), OH.h(b)), g.stopPropagation());
        });
        return d;
    }
    function tR(a, b) {
        var c = a.Zi(),
            d = document.createElement("div"),
            e = wR();
        e.innerText = ii;
        O(d, "ucmMentionIcon");
        d.style.width = "14px";
        d.style.height = "14px";
        d.style.padding = "0px 4px 0 0px";
        d.style.verticalAlign = "bottom";
        d.style.display = "inline-block";
        d.style.marginRight = "4px";
        c.id = "ucm-mentionuser";
        c.appendChild(d);
        c.appendChild(e);
        v("click", c, function () {
            az.h(b);
            a.Lb();
        });
        return c;
    }
    function uR(a, b, c) {
        var d = a.Zi(),
            e = document.createElement("div"),
            f = wR();
        c.nf(b) ? ((f.style.paddingLeft = "20px"), (f.innerText = Li)) : (O(d, "notIgnored"), (f.style.paddingLeft = "0"), (f.innerText = Ni), d.appendChild(e));
        O(d, "ucmIgnoreLink");
        d.appendChild(f);
        O(e, "ucmIgnoreIcon");
        e.style.padding = "0px 4px 0 0px";
        e.style.verticalAlign = "bottom";
        e.style.width = "14px";
        e.style.height = "14px";
        e.style.display = "inline-block";
        e.style.marginRight = "4px";
        v("click", d, function () {
            c.nf(b) ? su(c, b) : c.kf(b);
            a.Lb();
        });
        return d;
    }
    function vR(a, b, c) {
        var d = a.Zi(),
            e = document.createElement("div"),
            f = wR();
        O(d, "ucmReportLink");
        d.appendChild(e);
        d.appendChild(f);
        O(e, "ucmReportIcon");
        e.style.padding = "0 4px 0 0";
        e.style.verticalAlign = "middle";
        e.style.width = "14px";
        e.style.height = "14px";
        e.style.display = "inline-block";
        e.style.marginRight = "4px";
        f.innerText = Oi;
        v("click", d, function () {
            F("ReportChatUser", { username: b, to_user: b });
            a.element.removeChild(a.zg);
            a.ib = new oQ(b, c, a.I);
            a.element.appendChild(a.ib.element);
            a.position();
            a.ib.Ks();
            a.ib.nn.g(function () {
                a.Lb();
            });
        });
        return d;
    }
    k.Zi = function () {
        var a = document.createElement("div");
        a.style.padding = "3px 10px";
        a.style.whiteSpace = "nowrap";
        a.style.fontWeight = "normal";
        a.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        a.style.fontSize = "12px";
        a.style["-webkit-text-size-adjust"] = "none";
        O(a, "ucmLinkColor");
        xR(a);
        return a;
    };
    function wR() {
        var a = document.createElement("span");
        a.style.fontWeight = "normal";
        a.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        a.style.fontSize = "12px";
        a.style["-webkit-text-size-adjust"] = "none";
        O(a, "ucmLinkColor");
        return a;
    }
    function xR(a) {
        O(a, "ucmLinkHover");
        a.onmouseenter = function () {
            a.style.cursor = "pointer";
        };
        a.onmouseleave = function () {
            a.style.cursor = "default";
        };
    }
    var iR = 2;
    function yR(a, b, c) {
        jR.call(this, a, b, c);
    }
    q(yR, jR);
    yR.prototype.$A = function () {
        var a = this;
        jR.prototype.$A.call(this);
        if (this.Sh !== this.M.username) {
            this.ki.style.display = "";
            this.Bq = document.createElement("div");
            O(this.Bq, "ucmPromoteModSection");
            this.Bq.style.borderTopWidth = "1px";
            this.Bq.style.borderTopStyle = "solid";
            this.Bq.style.padding = "5px 0";
            this.Vp = document.createElement("div");
            O(this.Vp, "ucmHasTippedSection");
            this.Vp.style.padding = "9px 10px";
            this.Vp.style.borderTopWidth = "1px";
            this.Vp.style.borderTopStyle = "solid";
            this.zg.insertBefore(this.Bq, this.ki.nextSibling);
            this.zg.appendChild(this.Vp);
            var b = this.Zi(),
                c = wR();
            c.style.paddingLeft = "20px";
            this.ki.appendChild(b);
            b.appendChild(c);
            c.innerText = xn;
            v("click", b, function () {
                a.Lb();
                Wu('You must be logged in to ban a user. Click "OK" to login.') ||
                    Md(He(a.M.username), function () {
                        F("BanUser", { username: a.M.username });
                        E("roomban/" + a.M.username + "/" + a.J + "/", {})
                            .then(function () {
                                void 0 !== a.I ? lQ(a.I, a.M.username) : r("Chat Connection undefined when trying to ban a user", "broadcastUserContextMenu.ts", "broadcastlib");
                            })
                            .catch(function (m) {
                                r(m, "broadcastUserContextMenu.ts", "broadcastlib");
                                R("Error banning user " + a.M.username);
                            });
                    });
            });
            b = document.createElement("div");
            c = document.createElement("img");
            var d = document.createElement("span");
            c.src = "https://static-assets.highwebmedia.com/tsdefaultassets/ico-tip.gif";
            c.style.width = "13px";
            c.style.height = "13px";
            c.style.padding = "2px 4px 0 1px";
            b.appendChild(c);
            b.appendChild(d);
            d.innerText = Ie(this.M.username) + ":";
            this.Vp.appendChild(b);
            c = document.createElement("div");
            d = document.createElement("div");
            var e = document.createElement("div");
            c.style.paddingLeft = "20px";
            d.style.paddingLeft = "20px";
            e.style.paddingLeft = "20px";
            var f = document.createElement("span"),
                g = document.createElement("span"),
                h = document.createElement("span");
            c.appendChild(f);
            d.appendChild(g);
            e.appendChild(h);
            f.innerText = Je(0);
            g.innerText = Ke(0);
            h.innerText = Le(0);
            b.appendChild(c);
            b.appendChild(d);
            b.appendChild(e);
            void 0 !== this.J &&
                void 0 !== this.Sh &&
                E("api/getchatusermenu/", { roomname: this.J, fromuser: this.Sh, touser: this.M.username })
                    .then(function (m) {
                        a.Bq.appendChild(zR(a, !!m.getResponseHeader("X-Target_Is_Mod"), a.M));
                        f.innerText = Je(AR(m.getResponseHeader("X-Tipped_Performer_Last_Hour")));
                        g.innerText = Ke(AR(m.getResponseHeader("X-Tipped_Performer_Last_24_Hours")));
                        h.innerText = Le(AR(m.getResponseHeader("X-Tipped_Performer_Last_Two_Weeks")));
                    })
                    .catch(function (m) {
                        r(m, "broadcastUserContextMenu.ts", "broadcastlib");
                        R("Error fetching user menu");
                    });
        }
    };
    yR.prototype.YA = function () {
        jR.prototype.YA.call(this);
        var a = this.Zi();
        a.style.display = "none";
        var b = document.createElement("img");
        b.style.padding = "0px 4px 0 0";
        b.style.verticalAlign = "bottom";
        a.appendChild(b);
        b = wR();
        a.appendChild(b);
        G.once(function () {});
        this.Ag.prepend(a);
    };
    function zR(a, b, c) {
        var d = a.Zi(),
            e = wR();
        e.style.paddingLeft = "20px";
        if (b) {
            e.innerText = yn;
            var f = 'You must be logged in to remove a moderator. Click "OK" to login.';
            var g = "removemoderator/" + c.username + "/" + a.J + "/";
        } else (e.innerText = zn), (f = 'You must be logged in to promote a user to moderator. Click "OK" to login.'), (g = "addmoderator/" + c.username + "/" + a.J + "/");
        var h = "Error promoting user " + c.username;
        v("click", d, function () {
            a.Lb();
            Wu(f) ||
                E(g, {})
                    .then(function () {
                        ez.h({ ec: !b, username: c.username });
                    })
                    .catch(function (m) {
                        r(m, "broadcastUserContextMenu.ts", "broadcastlib");
                        R(h);
                    });
        });
        d.appendChild(e);
        return d;
    }
    function AR(a) {
        if (null === a) return 0;
        a = Number(a);
        return 0 > a ? 0 : a;
    }
    yR.prototype.eI = function () {
        return !0;
    };
    function BR(a, b, c) {
        function d(f) {
            f.preventDefault();
            null === e.element.parentElement ? r("Username span has no parent", "usernameLabel.ts", "common") : (F("OpenUserContextMenu", { username: a.username }), (f = e.ll), 2 === iR && (SA() ? new yR(a, f, b) : new jR(a, f, b)));
        }
        c = void 0 === c ? !1 : c;
        w.call(this);
        var e = this;
        this.M = a;
        O(this.element, NA(a));
        this.element.style.height = "auto";
        this.element.style.width = "auto";
        this.element.style.position = "";
        this.element.style.display = "inline-block";
        this.element.style.maxWidth = "100%";
        this.element.style.textOverflow = "ellipsis";
        this.element.style.whiteSpace = "nowrap";
        this.element.style.verticalAlign = "top";
        this.element.style.fontWeight = "bold";
        this.element.style.cursor = "pointer";
        this.element.style.overflow = "visible";
        this.NH = nC(a.username);
        this.element.appendChild(this.NH);
        this.ll = document.createElement("span");
        this.ll.textContent = a.username;
        this.ll.title = xi;
        this.element.appendChild(this.ll);
        c &&
            ((c = document.createElement("img")),
            (c.style.display = "inline-block"),
            (c.style.height = "16px"),
            (c.style.margin = "0 5px"),
            (c.style.verticalAlign = "middle"),
            (c.src = RA(a.nc)),
            (c.title = bx(a.nc)),
            this.element.insertBefore(c, this.element.firstChild),
            (this.element.style.whiteSpace = "nowrap"));
        this.element.onmouseenter = function () {
            e.element.style.textDecoration = "underline";
        };
        this.element.onmouseleave = function () {
            e.element.style.textDecoration = "none";
        };
        v("click", this.element, d);
        v("contextmenu", this.element, d);
    }
    q(BR, w);
    function CR(a, b) {
        a.ll.textContent = "@" + a.M.username;
        a.NH.style.display = "none";
        b && (O(a.element, "mentionHl"), (a.element.style.padding = "2px"));
        return a.element;
    }
    var DR = { Yf: 1, height: 0, name: "", mj: "", width: 0, Lr: "" };
    function ER(a) {
        this.Xz = "%%%[";
        this.Ds = "]%%%";
        this.OL = /((^|\s)@\w+)/;
        this.$d = a.$d;
        this.lh = a.lh;
        this.nb = a.nb;
    }
    function FR(a, b) {
        var c = document.createElement("span");
        c.className = "emoticonImage";
        GR(a, b).forEach(function (d) {
            switch (d.Yf) {
                case 0:
                    d = d.Xe;
                    "" !== d && c.appendChild(HR(a, d));
                    break;
                case 1:
                    "" !== d.name ? c.appendChild(IR(a, d)) : c.appendChild(HR(a, ""));
            }
        });
        return c;
    }
    function GR(a, b) {
        var c = [],
            d = [];
        if (0 > b.indexOf(a.Xz)) return [{ Yf: 0, Xe: b }];
        for (var e = 0; e < b.length; e += 1)
            if ("%" === b[e])
                if (b.slice(e, e + a.Xz.length) === a.Xz) {
                    var f = e + b.slice(e, b.length).indexOf(a.Ds);
                    if (b.slice(f, f + a.Ds.length) === a.Ds) {
                        0 !== c.length && d.push({ Yf: 0, Xe: c.join("") });
                        c = [];
                        e = b.slice(e, f + a.Ds.length);
                        if (e.slice(a.Xz.length).startsWith("emoticon")) {
                            b: {
                                e = e.replace("%%%[emoticon ", "").replace("]%%%", "");
                                e = e.split(/\|/);
                                if (6 === e.length) {
                                    if (((e = { Yf: 1, name: e[0], rr: e[1], width: JR(e[2]) ? Number(e[2]) : 80, height: JR(e[3]) ? Number(e[3]) : 80, mj: e[4], Lr: e[5] }), void 0 !== e.rr && KR(e.rr))) break b;
                                } else if (5 === e.length && ((e = { Yf: 1, name: e[0], mj: e[1], width: JR(e[2]) ? Number(e[2]) : 80, height: JR(e[3]) ? Number(e[3]) : 80, Lr: e[4] }), KR(e.mj))) break b;
                                e = void 0;
                            }
                            void 0 === e && (r("Cannot parse emoticon: " + e, "renderRoomMessage.ts", "common"), (e = DR));
                        } else e = { Yf: 0, Xe: e };
                        d.push(e);
                        e = f + a.Ds.length - 1;
                    }
                } else c.push(b[e]);
            else c.push(b[e]);
        0 !== c.length && d.push({ Yf: 0, Xe: c.join("") });
        return d;
    }
    function IR(a, b) {
        if (a.$d && -1 === a.lh.indexOf(b.name)) {
            var c = document.createElement("img"),
                d = b.rr;
            c.src = void 0 !== d ? d : b.mj;
            c.title = ":" + b.name;
            c.style.cursor = "pointer";
            c.onclick = function () {
                HI.h({ jc: b.name, url: b.mj });
            };
            a.nb && ((b.width *= 0.5), (b.height *= 0.5));
            c.height = b.height;
            c.width = b.width;
            c.style.verticalAlign = "top";
            return c;
        }
        a = document.createElement("span");
        O(a, "hrefColor");
        a.innerText = ":" + b.name;
        a.style.cursor = "pointer";
        a.onclick = function () {
            HI.h({ jc: b.name, url: b.mj });
        };
        return a;
    }
    function HR(a, b) {
        var c = document.createElement("span");
        a.OL.test(b)
            ? b.split(a.OL).forEach(function (d) {
                  var e = /^\s/.test(d);
                  if ("@" === d.trim().charAt(0)) {
                      var f = document.createElement("span");
                      f.innerText = d.trimStart();
                      f.className = "username-mention";
                      e && c.appendChild(document.createTextNode(" "));
                      c.appendChild(f);
                  } else 0 < d.trim().length && c.appendChild(document.createTextNode(d));
              })
            : (c.innerText = b);
        return c;
    }
    function KR(a) {
        return null === a.match(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g) ? (r("Invalid emoticon URL", "renderRoomMessage.ts", "common"), !1) : !0;
    }
    function JR(a) {
        return isNaN(parseInt(a, 10)) ? (r("Invalid dimension argument", "renderRoomMessage.ts", "common"), !1) : !0;
    }
    function LR(a, b) {
        "string" === typeof a && -1 !== a.indexOf(".") && 1 === parseFloat(a) && (a = "100%");
        var c = "string" === typeof a && -1 !== a.indexOf("%");
        a = 360 === b ? a : Math.min(b, Math.max(0, parseFloat(a)));
        c && (a = parseInt(String(a * b), 10) / 100);
        return 1e-6 > Math.abs(a - b) ? 1 : (a = 360 === b ? (0 > a ? (a % b) + b : a % b) / parseFloat(String(b)) : (a % b) / parseFloat(String(b)));
    }
    function MR(a) {
        a = parseFloat(a);
        if (isNaN(a) || 0 > a || 1 < a) a = 1;
        return a;
    }
    function NR(a) {
        return 1 >= a ? 100 * Number(a) + "%" : a;
    }
    function OR(a) {
        return 1 === a.length ? "0" + a : String(a);
    }
    function PR(a, b, c) {
        a = LR(a, 255);
        b = LR(b, 255);
        c = LR(c, 255);
        var d = Math.max(a, b, c),
            e = Math.min(a, b, c),
            f = 0,
            g = (d + e) / 2;
        if (d === e) f = e = 0;
        else {
            var h = d - e;
            e = 0.5 < g ? h / (2 - d - e) : h / (d + e);
            switch (d) {
                case a:
                    f = (b - c) / h + (b < c ? 6 : 0);
                    break;
                case b:
                    f = (c - a) / h + 2;
                    break;
                case c:
                    f = (a - b) / h + 4;
            }
            f /= 6;
        }
        return { ai: f, Xe: e, qc: g };
    }
    function QR(a, b, c) {
        0 > c && (c += 1);
        1 < c && --c;
        return c < 1 / 6 ? a + 6 * (b - a) * c : 0.5 > c ? b : c < 2 / 3 ? a + (b - a) * (2 / 3 - c) * 6 : a;
    }
    function RR(a, b, c, d) {
        a = [OR(Math.round(a).toString(16)), OR(Math.round(b).toString(16)), OR(Math.round(c).toString(16))];
        return d && a[0].startsWith(a[0].charAt(1)) && a[1].startsWith(a[1].charAt(1)) && a[2].startsWith(a[2].charAt(1)) ? a[0].charAt(0) + a[1].charAt(0) + a[2].charAt(0) : a.join("");
    }
    function SR(a, b, c, d, e) {
        a = [OR(Math.round(a).toString(16)), OR(Math.round(b).toString(16)), OR(Math.round(c).toString(16)), OR(Math.round(255 * parseFloat(d)).toString(16))];
        return e && a[0].startsWith(a[0].charAt(1)) && a[1].startsWith(a[1].charAt(1)) && a[2].startsWith(a[2].charAt(1)) && a[3].startsWith(a[3].charAt(1)) ? a[0].charAt(0) + a[1].charAt(0) + a[2].charAt(0) + a[3].charAt(0) : a.join("");
    }
    var TR = {
        pV: "#f0f8ff",
        qV: "#faebd7",
        rV: "#00ffff",
        sV: "#7fffd4",
        tV: "#f0ffff",
        uV: "#f5f5dc",
        vV: "#ffe4c4",
        yP: "#000000",
        wV: "#ffebcd",
        blue: "#0000ff",
        xV: "#8a2be2",
        yV: "#a52a2a",
        zV: "#deb887",
        AV: "#5f9ea0",
        CV: "#7fff00",
        DV: "#d2691e",
        FV: "#ff7f50",
        GV: "#6495ed",
        HV: "#fff8dc",
        IV: "#dc143c",
        KV: "#00ffff",
        LV: "#00008b",
        MV: "#008b8b",
        NV: "#b8860b",
        OV: "#a9a9a9",
        PV: "#006400",
        QV: "#a9a9a9",
        RV: "#bdb76b",
        SV: "#8b008b",
        TV: "#556b2f",
        UV: "#ff8c00",
        VV: "#9932cc",
        WV: "#8b0000",
        XV: "#e9967a",
        YV: "#8fbc8f",
        ZV: "#483d8b",
        $V: "#2f4f4f",
        aW: "#2f4f4f",
        bW: "#00ced1",
        cW: "#9400d3",
        eW: "#ff1493",
        fW: "#00bfff",
        gW: "#696969",
        hW: "#696969",
        jW: "#1e90ff",
        pW: "#b22222",
        qW: "#fffaf0",
        sW: "#228b22",
        uW: "#ff00ff",
        vW: "#dcdcdc",
        xW: "#f8f8ff",
        zW: "#daa520",
        yW: "#ffd700",
        EW: "#808080",
        green: "#008000",
        FW: "#adff2f",
        GW: "#808080",
        JW: "#f0fff0",
        KW: "#ff69b4",
        MW: "#cd5c5c",
        NW: "#4b0082",
        TW: "#fffff0",
        VW: "#f0e68c",
        YW: "#fff0f5",
        XW: "#e6e6fa",
        ZW: "#7cfc00",
        bX: "#fffacd",
        cX: "#add8e6",
        dX: "#f08080",
        eX: "#e0ffff",
        fX: "#fafad2",
        gX: "#d3d3d3",
        hX: "#90ee90",
        iX: "#d3d3d3",
        jX: "#ffb6c1",
        kX: "#ffa07a",
        lX: "#20b2aa",
        mX: "#87cefa",
        nX: "#778899",
        oX: "#778899",
        pX: "#b0c4de",
        qX: "#ffffe0",
        rX: "#00ff00",
        sX: "#32cd32",
        tX: "#faf0e6",
        uX: "#ff00ff",
        vX: "#800000",
        xX: "#66cdaa",
        yX: "#0000cd",
        zX: "#ba55d3",
        AX: "#9370db",
        BX: "#3cb371",
        CX: "#7b68ee",
        DX: "#00fa9a",
        EX: "#48d1cc",
        FX: "#c71585",
        GX: "#191970",
        HX: "#f5fffa",
        IX: "#ffe4e1",
        JX: "#ffe4b5",
        LX: "#ffdead",
        MX: "#000080",
        SX: "#fdf5e6",
        TX: "#808000",
        UX: "#6b8e23",
        mm: "#ffa500",
        WX: "#ff4500",
        XX: "#da70d6",
        ZX: "#eee8aa",
        $X: "#98fb98",
        aY: "#afeeee",
        bY: "#db7093",
        cY: "#ffefd5",
        dY: "#ffdab9",
        eY: "#cd853f",
        gY: "#ffc0cb",
        hY: "#dda0dd",
        iY: "#b0e0e6",
        kY: "#800080",
        lY: "#663399",
        red: "#ff0000",
        rY: "#bc8f8f",
        tY: "#4169e1",
        vY: "#8b4513",
        wY: "#fa8072",
        xY: "#f4a460",
        yY: "#2e8b57",
        zY: "#fff5ee",
        DY: "#a0522d",
        EY: "#c0c0c0",
        HY: "#87ceeb",
        IY: "#6a5acd",
        JY: "#708090",
        KY: "#708090",
        LY: "#fffafa",
        NY: "#00ff7f",
        PY: "#4682b4",
        tan: "#d2b48c",
        UY: "#008080",
        WY: "#d8bfd8",
        XY: "#ff6347",
        $Y: "#40e0d0",
        cZ: "#ee82ee",
        dZ: "#f5deb3",
        iV: "#ffffff",
        eZ: "#f5f5f5",
        gZ: "#ffff00",
        hZ: "#9acd32",
    };
    function UR(a) {
        var b,
            c = 0,
            d = 0,
            e = 0,
            f = 1,
            g = !1,
            h = !1;
        "string" === typeof a && (a = VR(a));
        if ("object" === typeof a) {
            if (WR(a.r) && WR(a.eb) && WR(a.b)) (c = 255 * LR(a.r, 255)), (d = 255 * LR(a.eb, 255)), (e = 255 * LR(a.b, 255)), (g = !0), (h = "%" === String(a.r).substr(-1) ? "prgb" : "rgb");
            else if (isNaN(Number(a.y)) || isNaN(Number(a.HM)) || isNaN(Number(a.RM)))
                if (WR(a.ai) && WR(a.Xe) && WR(a.Br)) {
                    d = NR(a.Xe);
                    e = NR(a.Br);
                    g = a.ai;
                    g = 6 * LR(g, 360);
                    c = LR(d, 100);
                    e = LR(e, 100);
                    d = Math.floor(g);
                    var m = g - d;
                    g = e * (1 - c);
                    h = e * (1 - m * c);
                    m = e * (1 - (1 - m) * c);
                    var n = d % 6;
                    c = 255 * [e, h, g, g, m, e][n];
                    d = 255 * [m, e, e, h, g, g][n];
                    e = 255 * [g, g, m, e, e, h][n];
                    g = !0;
                    h = "hsv";
                } else
                    WR(a.ai) && WR(a.Xe) && WR(a.qc)
                        ? ((d = NR(a.Xe)),
                          (e = NR(a.qc)),
                          (c = a.ai),
                          (c = LR(c, 360)),
                          (d = LR(d, 100)),
                          (e = LR(e, 100)),
                          0 === d ? (g = d = e) : ((g = 0.5 > e ? e * (1 + d) : e + d - e * d), (h = 2 * e - g), (e = QR(h, g, c + 1 / 3)), (d = QR(h, g, c)), (g = QR(h, g, c - 1 / 3))),
                          (c = 255 * e),
                          (d *= 255),
                          (e = 255 * g),
                          (g = !0),
                          (h = "hsl"))
                        : isNaN(Number(a.qc)) ||
                          isNaN(Number(a.a)) ||
                          isNaN(Number(a.b)) ||
                          ((e = (a.qc + 16) / 116),
                          (g = a.a / 500 + e),
                          (h = e - a.b / 200),
                          (g = 0.95047 * (0.008856 < g * g * g ? g * g * g : (g - 16 / 116) / 7.787)),
                          (e = 0.008856 < e * e * e ? e * e * e : (e - 16 / 116) / 7.787),
                          (h = 1.08883 * (0.008856 < h * h * h ? h * h * h : (h - 16 / 116) / 7.787)),
                          (c = 3.2406 * g + -1.5372 * e + -0.4986 * h),
                          (d = -0.9689 * g + 1.8758 * e + 0.0415 * h),
                          (e = 0.0557 * g + -0.204 * e + 1.057 * h),
                          (c = 0.0031308 < c ? 1.055 * Math.pow(c, 1 / 2.4) - 0.055 : 12.92 * c),
                          (d = 0.0031308 < d ? 1.055 * Math.pow(d, 1 / 2.4) - 0.055 : 12.92 * d),
                          (e = 0.0031308 < e ? 1.055 * Math.pow(e, 1 / 2.4) - 0.055 : 12.92 * e),
                          (c = 255 * Math.max(0, Math.min(1, c))),
                          (d = 255 * Math.max(0, Math.min(1, d))),
                          (e = 255 * Math.max(0, Math.min(1, e))),
                          (g = !0),
                          (h = "lab"));
            else (e = a.y), (g = a.HM), (d = a.RM), (c = Math.round(e + 1.402 * d)), (d = Math.round(e - 0.344 * g - 0.714 * d)), (e = Math.round(e + 1.772 * g)), (g = !0), (h = "ypbpr");
            Object.prototype.hasOwnProperty.call(a, "a") && (f = a.a);
        }
        f = MR(f);
        return { ok: g, format: null !== (b = a.format) && void 0 !== b ? b : h, r: Math.min(255, Math.max(c, 0)), eb: Math.min(255, Math.max(d, 0)), b: Math.min(255, Math.max(e, 0)), a: f };
    }
    var YR = RegExp("(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)"),
        ZR = RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
        $R = RegExp(
            "rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"
        ),
        aS = RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
        bS = RegExp(
            "hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"
        ),
        cS = RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
        dS = RegExp(
            "hsva[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"
        ),
        eS = /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
        fS = /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
        gS = /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
        hS = /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;
    function VR(a) {
        a = a.trim().toLowerCase();
        if (0 === a.length) return !1;
        var b = !1;
        if (TR[a]) (a = TR[a]), (b = !0);
        else if ("transparent" === a) return { r: 0, eb: 0, b: 0, a: 0, format: "name" };
        var c = ZR.exec(a);
        if (null !== c) return { r: c[1], eb: c[2], b: c[3] };
        c = $R.exec(a);
        if (null !== c) return { r: c[1], eb: c[2], b: c[3], a: c[4] };
        c = aS.exec(a);
        if (null !== c) return { ai: c[1], Xe: c[2], qc: c[3] };
        c = bS.exec(a);
        if (null !== c) return { ai: c[1], Xe: c[2], qc: c[3], a: c[4] };
        c = cS.exec(a);
        if (null !== c) return { ai: c[1], Xe: c[2], Br: c[3] };
        c = dS.exec(a);
        if (null !== c) return { ai: c[1], Xe: c[2], Br: c[3], a: c[4] };
        c = hS.exec(a);
        if (null !== c) return { r: parseInt(c[1], 16), eb: parseInt(c[2], 16), b: parseInt(c[3], 16), a: parseInt(c[4], 16) / 255, format: b ? "name" : "hex8" };
        c = fS.exec(a);
        if (null !== c) return { r: parseInt(c[1], 16), eb: parseInt(c[2], 16), b: parseInt(c[3], 16), format: b ? "name" : "hex" };
        c = gS.exec(a);
        if (null !== c) return { r: parseInt(c[1] + c[1], 16), eb: parseInt(c[2] + c[2], 16), b: parseInt(c[3] + c[3], 16), a: parseInt(c[4] + c[4], 16) / 255, format: b ? "name" : "hex8" };
        c = eS.exec(a);
        return null !== c ? { r: parseInt(c[1] + c[1], 16), eb: parseInt(c[2] + c[2], 16), b: parseInt(c[3] + c[3], 16), format: b ? "name" : "hex" } : !1;
    }
    function WR(a) {
        return !!YR.exec(String(a));
    }
    function iS(a, b) {
        var c = this;
        a = void 0 === a ? "" : a;
        b = void 0 === b ? {} : b;
        var d;
        this.ao = function (e) {
            return c.$r.ao(e);
        };
        this.Gw = function (e) {
            return c.$r.Gw(e);
        };
        this.Cj = function (e) {
            return c.$r.Cj(e);
        };
        this.gy = function (e) {
            return c.$r.gy(e);
        };
        if (a instanceof iS) return a.clone();
        "number" === typeof a && (a = { r: a >> 16, eb: (a & 65280) >> 8, b: a & 255 });
        a = UR(a);
        this.r = a.r;
        this.eb = a.eb;
        this.b = a.b;
        this.a = a.a;
        this.Du = Math.round(100 * this.a) / 100;
        this.format = null !== (d = b.format) && void 0 !== d ? d : a.format;
        1 > this.r && (this.r = Math.round(this.r));
        1 > this.eb && (this.eb = Math.round(this.eb));
        1 > this.b && (this.b = Math.round(this.b));
        this.Sf = a.ok;
        jS(this);
        kS(this);
        lS(this);
    }
    function jS(a) {
        a.PA = {
            ao: function (b) {
                var c = mS(a);
                c.qc += b / 100;
                c.qc = Math.min(1, Math.max(0, c.qc));
                return nS(c);
            },
            Gw: function (b) {
                return a.PA.ao(-b);
            },
            Cj: function (b) {
                var c = mS(a);
                c.qc = b;
                return nS(c);
            },
            gy: function (b) {
                b = nS(b).PA.Ak;
                var c = mS(a);
                c.qc = b;
                return nS(c);
            },
            get Ak() {
                return mS(a).qc;
            },
        };
    }
    function kS(a) {
        a.OA = {
            ao: function (b) {
                var c = oS(a);
                c.qc += b / 100;
                c.qc = Math.min(1, Math.max(0, c.qc));
                return nS(c);
            },
            Gw: function (b) {
                return a.OA.ao(-b);
            },
            Cj: function (b) {
                var c = oS(a);
                c.qc = b;
                return nS(c);
            },
            gy: function (b) {
                b = nS(b).OA.Ak;
                var c = oS(a);
                c.qc = b;
                return nS(c);
            },
            get Ak() {
                return oS(a).qc;
            },
        };
    }
    function lS(a) {
        a.RA = {
            ao: function (b) {
                var c = pS(a);
                c.y += (b / 100) * 255;
                c.y = Math.min(1, Math.max(0, c.y));
                return nS(c);
            },
            Gw: function (b) {
                return a.RA.ao(-b);
            },
            Cj: function (b) {
                var c = pS(a);
                c.y = b;
                return nS(c);
            },
            gy: function (b) {
                b = nS(b).RA.Ak;
                var c = pS(a);
                c.y = b;
                return nS(c);
            },
            get Ak() {
                return pS(a).y;
            },
        };
    }
    function nS(a) {
        var b = void 0 === b ? {} : b;
        return new iS(void 0 === a ? "" : a, b);
    }
    function qS(a, b) {
        a.a = MR(b);
        a.Du = Math.round(100 * a.a) / 100;
        return a;
    }
    function oS(a) {
        var b = a.r,
            c = a.eb,
            d = a.b;
        b /= 255;
        c /= 255;
        d /= 255;
        b = 0.04045 < b ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;
        c = 0.04045 < c ? Math.pow((c + 0.055) / 1.055, 2.4) : c / 12.92;
        d = 0.04045 < d ? Math.pow((d + 0.055) / 1.055, 2.4) : d / 12.92;
        a = (0.4124 * b + 0.3576 * c + 0.1805 * d) / 0.95047;
        var e = 0.2126 * b + 0.7152 * c + 0.0722 * d;
        b = (0.0193 * b + 0.1192 * c + 0.9505 * d) / 1.08883;
        a = 0.008856 < a ? Math.pow(a, 1 / 3) : 7.787 * a + 16 / 116;
        e = 0.008856 < e ? Math.pow(e, 1 / 3) : 7.787 * e + 16 / 116;
        b = 0.008856 < b ? Math.pow(b, 1 / 3) : 7.787 * b + 16 / 116;
        return { qc: 116 * e - 16, a: 500 * (a - e), b: 200 * (e - b) };
    }
    function mS(a) {
        var b = PR(a.r, a.eb, a.b);
        return { ai: 360 * b.ai, Xe: b.Xe, qc: b.qc, a: a.a };
    }
    function rS(a, b) {
        return RR(a.r, a.eb, a.b, void 0 === b ? !1 : b);
    }
    function sS(a) {
        return { r: Math.round(a.r), eb: Math.round(a.eb), b: Math.round(a.b), a: a.a };
    }
    function pS(a) {
        var b = a.r,
            c = a.eb;
        a = a.b;
        return { y: 0.299 * b + 0.587 * c + 0.114 * a, HM: -0.169 * b - 0.331 * c + 0.5 * a, RM: 0.5 * b - 0.419 * c - 0.081 * a };
    }
    function tS(a) {
        var b = Math.round(a.r),
            c = Math.round(a.eb),
            d = Math.round(a.b);
        return 1 === a.a ? "rgb(" + b + ", " + c + ", " + d + ")" : "rgba(" + b + ", " + c + ", " + d + ", " + a.Du + ")";
    }
    function uS(a) {
        function b(c) {
            return Math.round(100 * LR(c, 255));
        }
        return 1 === a.a ? "rgb(" + b(a.r) + "%, " + b(a.eb) + "%, " + b(a.b) + "%)" : "rgba(" + b(a.r) + "%, " + b(a.eb) + "%, " + b(a.b) + "%, " + a.Du + ")";
    }
    function vS(a) {
        if (0 === a.a) return "transparent";
        if (1 > a.a) return !1;
        a = "#" + RR(a.r, a.eb, a.b, !1);
        for (var b = l(Object.entries(TR)), c = b.next(); !c.done; c = b.next()) {
            var d = l(c.value);
            c = d.next().value;
            d = d.next().value;
            if (a === d) return c;
        }
        return !1;
    }
    iS.prototype.toString = function (a) {
        var b = !!a;
        a = null !== a && void 0 !== a ? a : this.format;
        var c = !1,
            d = 1 > this.a && 0 <= this.a;
        if (!b && d && (a.startsWith("hex") || "name" === a)) return "name" === a && 0 === this.a ? vS(this) : tS(this);
        "rgb" === a && (c = tS(this));
        "prgb" === a && (c = uS(this));
        if ("hex" === a || "hex6" === a) c = "#" + rS(this, !1);
        "hex3" === a && (c = "#" + rS(this, !0));
        "hex4" === a && (c = "#" + SR(this.r, this.eb, this.b, this.a, !0));
        "hex8" === a && (c = "#" + SR(this.r, this.eb, this.b, this.a, !1));
        "name" === a && (c = vS(this));
        "hsl" === a &&
            ((d = PR(this.r, this.eb, this.b)),
            (b = Math.round(360 * d.ai)),
            (c = Math.round(100 * d.Xe)),
            (d = Math.round(100 * d.qc)),
            (c = 1 === this.a ? "hsl(" + b + ", " + c + "%, " + d + "%)" : "hsla(" + b + ", " + c + "%, " + d + "%, " + this.Du + ")"));
        if ("hsv" === a) {
            c = this.r;
            d = this.eb;
            var e = this.b;
            c = LR(c, 255);
            d = LR(d, 255);
            e = LR(e, 255);
            a = Math.max(c, d, e);
            var f = Math.min(c, d, e),
                g = 0;
            b = a - f;
            if (a === f) g = 0;
            else {
                switch (a) {
                    case c:
                        g = (d - e) / b + (d < e ? 6 : 0);
                        break;
                    case d:
                        g = (e - c) / b + 2;
                        break;
                    case e:
                        g = (c - d) / b + 4;
                }
                g /= 6;
            }
            c = Math.round(360 * g);
            b = Math.round(100 * (0 === a ? 0 : b / a));
            a = Math.round(100 * a);
            c = 1 === this.a ? "hsv(" + c + ", " + b + "%, " + a + "%)" : "hsva(" + c + ", " + b + "%, " + a + "%, " + this.Du + ")";
        }
        return null !== c && void 0 !== c ? c : "#" + rS(this, !1);
    };
    iS.prototype.clone = function () {
        return nS(this.toString());
    };
    iS.prototype.Ep = function (a) {
        return tS(this) === tS(nS(a));
    };
    da.Object.defineProperties(iS.prototype, {
        $r: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return 1 === wS ? this.PA : 0 === wS ? this.OA : this.RA;
            },
        },
        Ak: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return this.$r.Ak;
            },
        },
        cL: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return this.Ep("#000000");
            },
        },
        sL: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return this.Ep("#FFFFFF");
            },
        },
        FR: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return 0 === this.a;
            },
        },
        KF: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                var a = 1 > this.a ? [this.r, this.eb, this.b, this.a] : [this.r, this.eb, this.b];
                var b = Math.max.apply(Math, ha(a));
                a = Math.min.apply(Math, ha(a));
                return b - a;
            },
        },
    });
    da.Object.defineProperties(iS, {
        bJ: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return nS("#202C39");
            },
        },
        cJ: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return nS("#FFFFFF");
            },
        },
        yP: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return nS("#000000");
            },
        },
        iV: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return nS("#FFFFFF");
            },
        },
        QU: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return nS("transparent");
            },
        },
    });
    var wS = 1;
    var xS = /\s*,\s*/,
        yS = /(?:[+-]?\d*\.?\d+)(?:%|[a-z]+)?/,
        AS = zS(["(?:", /#(?:[a-f0-9]{6}|[a-f0-9]{3})/, "|", "(?:rgb|hsl)", /\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*\)/, "|", "(?:rgba|hsla)", /\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*,\s*\d*\.?\d+\)/, "|", /[_a-z-][_a-z0-9-]*/, ")"], ""),
        BS = zS([AS, "(?:\\s+", yS, "(?:\\s+", yS, ")?)?"], ""),
        CS = zS(["(?:", BS, xS, ")*", BS], ""),
        DS = ["(?:(", zS(["(?:(", /(?:[+-]?\d*\.?\d+)(?:deg|grad|rad|turn)/, ")|", /to\s+((?:(?:left|right|top|bottom)(?:\s+(?:top|bottom|left|right))?))/, ")"], ""), ")", xS, ")?(", CS, ")"],
        ES = ["\\s*(", AS, ")", "(?:\\s+", "(", yS, "))?", "(?:", xS, "\\s*)?"];
    function FS(a, b, c) {
        var d;
        this.mr = [];
        this.line = c[1];
        a = b.exec(a);
        if (null !== a) for (this.angle = a[1], b = zS(ES, "gi"), c = b.exec(a[4]); null !== c; ) this.mr.push({ color: nS(c[1]), position: null !== (d = c[2]) && void 0 !== d ? d : "" }), (c = b.exec(a[4]));
    }
    function GS(a) {
        a = void 0 === a ? "" : a;
        if (0 !== a.trim().length && a.trim().toLowerCase().startsWith("linear-gradient")) {
            var b = zS(DS, "gi"),
                c = b.exec(a);
            if (null !== c) return new FS(a, b, c);
        }
    }
    FS.prototype.cL = function () {
        return this.mr.every(function (a) {
            return a.color.Ep("black");
        });
    };
    FS.prototype.sL = function () {
        return this.mr.every(function (a) {
            return a.color.Ep("white");
        });
    };
    FS.prototype.toString = function () {
        var a = [];
        void 0 !== this.angle && a.push(this.angle);
        for (var b = l(this.mr), c = b.next(); !c.done; c = b.next()) (c = c.value), a.push((tS(c.color) + " " + c.position).trim());
        return "linear-gradient(" + a.join(", ") + ")";
    };
    function zS(a, b) {
        return new RegExp(
            a.reduce(function (c, d) {
                return c + ("string" === typeof d ? d : d.source);
            }, ""),
            b
        );
    }
    Lr.g(function (a) {
        a = "darkmode" === a;
        for (var b = l(document.querySelectorAll(".dm-adjust")), c = b.next(); !c.done; c = b.next()) HS(c.value, a);
    });
    function HS(a, b) {
        var c, d;
        if ("photo" !== a.getAttribute("type") && ((a = a.firstElementChild), null !== a)) {
            var e = a.classList.contains("roomNotice");
            if (!e || a.innerText.startsWith("Notice:")) {
                var f = b ? (null !== (c = a.getAttribute("dm-adjust-bg")) && void 0 !== c ? c : "#202C39") : null !== (d = a.getAttribute("dm-init-bg")) && void 0 !== d ? d : "white";
                f.startsWith("linear-gradent") ? (a.style.backgroundImage = f) : (a.style.background = f);
                b = b ? a.getAttribute("dm-adjust-fg") : a.getAttribute("dm-init-fg");
                c = e ? a : a.querySelector("span.msg-text");
                null !== b && null !== c && (c.style.color = b);
            }
        }
    }
    wS = 2;
    var IS = iS.bJ.Ak,
        JS = iS.cJ.Ak;
    function KS(a) {
        this.background = a.RH;
        this.mc = a.JJ;
        LS(this);
    }
    function LS(a) {
        var b,
            c = GS(a.background);
        a.KJ = tS(qS(qS(nS(null !== (b = a.mc) && void 0 !== b ? b : iS.cJ), 1).Cj(JS), 1));
        void 0 !== c
            ? (c.mr.forEach(function (d) {
                  var e = sS(d.color);
                  var f = sS(nS(iS.bJ));
                  e = nS({ r: f.r + (e.r - f.r) * e.a, eb: f.eb + (e.eb - f.eb) * e.a, b: f.b + (e.b - f.b) * e.a });
                  d.color = e.Cj(IS);
              }),
              (a.lB = c.toString()))
            : ((b = nS(a.background)), (a.lB = !b.Sf || b.sL || b.FR || b.cL ? "#202C39" : tS(b.Cj(IS))));
    }
    function MS(a) {
        a.style.textShadow = "1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000";
    }
    function NS(a, b, c) {
        b = (null !== b && void 0 !== b ? b : "").trim();
        c = (null !== c && void 0 !== c ? c : "").trim();
        var d = a.firstElementChild,
            e = d,
            f = a;
        if (d.classList.contains("roomNotice")) {
            if (((f = d), !e.innerText.startsWith("Notice:"))) return;
        } else e = a.querySelector(".msg-text");
        a = nS(b);
        e.style.color = 10 > a.KF ? "#D3D3D3" : tS(qS(a.Cj(JS), 1));
        0 < c.length
            ? ((a = GS(c)),
              void 0 !== a
                  ? (a.mr.forEach(function (g) {
                        var h = g.color.a;
                        g.color = 10 > g.color.KF ? iS.QU : qS(g.color.Cj(IS), h);
                    }),
                    (f.style.background = a.toString()))
                  : ((c = nS(c)), 10 > c.KF ? (f.style.removeProperty("background"), MS(e)) : ((a = c.a), (c = qS(c.Cj(IS), a)), (f.style.background = tS(c)), 1 > a && MS(e))))
            : MS(e);
    }
    var OS = new y("updateUserMention", { Ve: !1 }),
        PS = [40, 37, 39, 38, 13, 27, 32, 9],
        QS = new y("hideUserList", { rc: 20 });
    function RS(a) {
        Xu.call(this, a);
        var b = this;
        this.config = a;
        this.Fj = this.visible = !1;
        this.H = new Ub();
        this.Fc = SS();
        this.element.style.visibility = "hidden";
        this.element.style.width = "auto";
        this.element.style.height = "auto";
        this.element.style.borderBottom = "none";
        this.element.style.fontFamily = "Helvetica, Arial, sans-serif";
        this.element.style.cursor = "pointer";
        this.element.style.userSelect = "none";
        this.fc.g(function () {
            TS(b) && lA(b.config.gb, " ", !0);
            b.B();
        });
        this.list = document.createElement("div");
        this.list.style.width = "260px";
        this.list.style.maxHeight = "180px";
        this.list.style.overflowY = "scroll";
        this.element.appendChild(this.list);
        v("keyup", this.config.gb.element, function (c) {
            36 < sA(b.config.gb) && (b.nx(c), b.D());
        });
        v("keydown", this.config.gb.element, function (c) {
            if (b.visible || b.Fj)
                if (38 === c.keyCode || 40 === c.keyCode) c.preventDefault(), b.uz(38 === c.keyCode);
                else if ([9, 39, 32, 13].includes(c.keyCode)) c.preventDefault(), c.stopPropagation(), b.B(), (A.current.nb && 13 === c.keyCode) || lA(b.config.gb, " ", !0);
                else if (27 === c.keyCode || 37 === c.keyCode) c.preventDefault(), b.B(), AA(b.config.gb);
        });
        z(
            mv.g(function (c) {
                b.delay = parseInt(c.Fn);
            }),
            this.H
        );
        z(
            QS.g(function () {
                b.B();
            }),
            this.H
        );
        z(
            G.g(function (c) {
                b.delay = parseInt(c.A.Da.Fn);
                b.B();
                b.Xi();
                b.Fc.Xi();
            }),
            this.H
        );
        O(this.element, "userMentionModal");
    }
    q(RS, Xu);
    k = RS.prototype;
    k.dispose = function () {
        Vb(this.H);
    };
    k.D = function () {
        var a = EA(this.config.gb) + this.config.At;
        this.element.style.left = Math.max(4, Math.min(a, this.config.gb.element.clientWidth - this.config.wu)) + "px";
    };
    k.nx = function (a) {
        Wy(this, function c() {
            var d = this,
                e;
            return Aa(c, function (f) {
                if (1 == f.aa) {
                    if (!(0 <= d.delay && -1 === PS.indexOf(a.keyCode))) {
                        f.aa = 0;
                        return;
                    }
                    e = yA(d.config.gb).match(/(^|\s)@([\w-]*)$/);
                    if (null === e || !GA(d.config.gb)) {
                        d.B();
                        f.aa = 0;
                        return;
                    }
                    return sa(f, US(d.Fc), 4);
                }
                d.prefix = e[2];
                d.ID = d.prefix;
                d.Nj();
                f.aa = 0;
            });
        });
    };
    k.Xi = function () {
        for (; null !== this.list.firstChild; ) this.list.removeChild(this.list.firstChild);
        this.selectedIndex = -1;
    };
    k.Nj = function () {
        var a = this;
        this.Xi();
        " " === this.prefix[this.prefix.length - 1] && this.B();
        var b = !1;
        this.Bm = VS(this.Fc);
        this.Bm.forEach(function (d, e) {
            "" === a.prefix || d.M.username.toLowerCase().startsWith(a.prefix.toLowerCase()) ? (WS(a, d, e), (b = !0)) : (d.visible = !1);
        });
        if (b) {
            var c = 0 >= this.list.children.length ? 0 : this.list.children.item(this.list.children.length - 1).offsetTop;
            this.list.scrollTop = c;
            this.visible || this.show();
        } else this.B(), (this.Fj = !0);
    };
    function WS(a, b, c) {
        var d = document.createElement("div");
        d.classList.add("userMentionModalItem");
        O(d, NA(b.M));
        d.innerText = b.M.username;
        d.style.padding = "2px 8px";
        d.onclick = function () {
            a.selectedIndex = c;
            a.Vl(!1);
            a.config.gb.focus();
            a.B();
            lA(a.config.gb, " ", !0);
        };
        d.style.fontWeight = "bold";
        d.style.textOverflow = "ellipsis";
        d.style.overflow = "hidden";
        b.element = d;
        b.visible = !0;
        a.list.appendChild(d);
    }
    k.uz = function (a) {
        var b;
        this.ID = TS(this) ? this.Bm[this.selectedIndex].M.username : this.prefix;
        var c = !1;
        this.mn();
        do
            if (((this.selectedIndex = TS(this) ? this.selectedIndex + (a ? -1 : 1) : a ? this.Bm.length - 1 : 0), 0 > this.selectedIndex)) {
                if (c) break;
                this.selectedIndex = this.Bm.length - 1;
                c = !0;
            } else if (this.selectedIndex >= this.Bm.length) {
                if (c) break;
                this.selectedIndex = 0;
                c = !0;
            }
        while (null === (b = this.Bm[this.selectedIndex]) || void 0 === b || !b.visible);
        this.Vl(!0);
    };
    k.mn = function () {
        this.list.querySelectorAll("div.highlight").forEach(function (a) {
            P(a, "highlight");
        });
    };
    k.Vl = function (a) {
        if (TS(this)) {
            this.mn();
            var b = this.Bm[this.selectedIndex],
                c = this.list.clientHeight,
                d = this.list.firstChild.getBoundingClientRect().height;
            a && (this.list.scrollTop = this.selectedIndex * d - c / 2);
            O(b.element, "highlight");
            a = b.M.username;
            vA(this.config.gb, yA(this.config.gb).replace(new RegExp(this.ID + "$"), a));
            this.ID = a;
            a = yA(this.config.gb).lastIndexOf(a);
            -1 < a && zA(this.config.gb, a);
        }
    };
    k.show = function () {
        var a = this;
        this.Fj = !0;
        0 <= this.delay &&
            window.setTimeout(function () {
                a.element.style.visibility = "";
                a.xh();
                a.R();
                a.visible = !0;
            }, this.delay);
    };
    k.B = function () {
        this.Lb();
        this.element.style.visibility = "hidden";
        this.Fj = this.visible = !1;
        this.Xi();
    };
    k.isVisible = function () {
        return this.visible;
    };
    function TS(a) {
        return -1 !== a.selectedIndex && a.selectedIndex < a.Bm.length;
    }
    function XS() {
        var a = this;
        this.ot = new Set();
        this.rG = !1;
        this.AB = new Ub();
        this.Fc = [];
        G.g(function (b) {
            a.zr = void 0;
            a.ub = b.l.Fd;
            z(
                b.l.event.Mc.g(function (c) {
                    var d = c.Sa;
                    c = c.Lc;
                    a.ub ||
                        -1 < ["offline", "notconnected", "hidden", "passwordprotected"].indexOf(d) ||
                        ((c = "privatespying" !== c && "privatewatching" !== c), (d = "privatespying" !== d && "privatewatching" !== d), !c && d ? ((a.zr = void 0), US(a)) : c && !d ? ((a.zr = void 0), US(a, !1)) : US(a));
                }),
                a.AB
            );
            a.ub ||
                z(
                    b.l.event.ya.g(function (c) {
                        c = l(c.wa);
                        for (var d = c.next(); !d.done; d = c.next()) {
                            d = l(d.value);
                            for (var e = d.next(); !e.done; e = d.next()) (e = e.value), 0 === e.Yf && void 0 !== e.M && YS(a, e.M);
                        }
                    }),
                    a.AB
                );
        });
        Kc.g(function () {
            Vb(a.AB);
        });
    }
    var ZS;
    function SS() {
        void 0 === ZS && (ZS = new XS());
        return ZS;
    }
    function US(a, b) {
        void 0 === a.zr && ((a.zr = a.CF(void 0 === b ? !0 : b)), $S(a));
        return a.zr;
    }
    XS.prototype.Xi = function () {
        this.Fc = [];
    };
    function $S(a) {
        window.setTimeout(function () {
            a.zr = void 0;
        }, 6e4);
    }
    function VS(a) {
        a.rG ||
            (a.Fc.sort(function (b, c) {
                return b.M.username.toLowerCase() < c.M.username.toLowerCase() ? -1 : b.M.username.toLowerCase() > c.M.username.toLowerCase() ? 1 : 0;
            }),
            (a.rG = !0));
        return a.Fc;
    }
    function aT(a) {
        return a.Fc.map(function (b) {
            return b.M;
        });
    }
    XS.prototype.CF = function (a) {
        var b = this;
        a = void 0 === a ? !0 : a;
        return HF(GF())
            .then(function (c) {
                var d = document.createElement("div");
                a ? bT(b) : (b.Fc = []);
                c = l(c.Oq);
                for (var e = c.next(); !e.done; e = c.next()) (e = e.value), cT(b, e.username) || b.Fc.push({ M: e, element: d, visible: !1, xF: !1 }), b.ot.has(e.username) && (OS.h(void 0), b.ot.delete(e.username));
                return b.Fc;
            })
            .catch(function (c) {
                r("Error loading username autocomplete: " + c, "MentionUserList.ts", "userMentions");
                return b.Fc;
            });
    };
    function YS(a, b) {
        var c = document.createElement("div");
        a.rG = !1;
        var d = dT(a, b.username);
        void 0 === d ? a.Fc.push({ M: b, element: c, visible: !1, xF: !0 }) : ((d.M = b), (d.xF = !0));
        a.ot.has(b.username) && (OS.h(void 0), a.ot.delete(b.username));
    }
    function eT(a, b) {
        b = l(b);
        for (var c = b.next(); !c.done; c = b.next()) a.ot.add(c.value);
    }
    function bT(a) {
        a.Fc = a.Fc.filter(function (b) {
            return b.xF;
        });
    }
    function dT(a, b) {
        return a.Fc.find(function (c) {
            return c.M.username === b;
        });
    }
    function cT(a, b) {
        return void 0 !== dT(a, b);
    }
    da.Object.defineProperties(XS.prototype, {
        count: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return this.Fc.length;
            },
        },
    });
    var fT,
        gT,
        hT = {};
    G.g(function (a) {
        fT = a.A.zu;
        gT = a.l;
        hT.$d = a.A.Da.$d;
        hT.lh = a.A.lh;
        hT.nb = !1;
    });
    mv.g(function (a) {
        hT.$d = a.$d;
    });
    function iT() {
        var a = av();
        a = new UB(a.red, a.green, a.blue);
        var b = a.brightness();
        VB(a, 255 - b / 3);
        return "rgb(" + a.red + ", " + a.green + ", " + a.blue + ")";
    }
    function jT(a, b) {
        var c = kT(a.K.username);
        c.style.fontSize = "";
        var d = new BR(a.K, a);
        d.element.style.paddingRight = "4px";
        c.appendChild(d.element);
        var e = FR(new ER(hT), a.message);
        e.style.color = void 0 !== a.Bi ? a.Bi : "#FFFFFF";
        void 0 !== a.font && ((d.element.style.fontFamily = a.font), (e.style.fontFamily = a.font));
        e.classList.add("msg-text");
        d.element.dataset.paction = "TheaterChat";
        d.element.dataset.pactionName = "Username";
        c.appendChild(e);
        qb()
            ? window.setTimeout(function () {
                  twemoji.parse(c, { className: "emojiChat" });
              }, 0)
            : wb() || twemoji.parse(c, { className: "emojiChat" });
        NS(c, a.Bi, a.backgroundColor);
        lT(c, b);
        void 0 !== a.Ga && (c.dataset.ts = a.Ga.toString());
        return c;
    }
    function lT(a, b) {
        var c,
            d = a.querySelectorAll(".username-mention");
        a = [];
        var e = SS(),
            f = aT(e),
            g = {};
        d = l(d);
        for (var h = d.next(); !h.done; g = { Gv: g.Gv }, h = d.next()) {
            h = h.value;
            g.Gv = h.innerText.replace("@", "").toLowerCase();
            var m = f.find(
                (function (n) {
                    return function (p) {
                        return p.username === n.Gv;
                    };
                })(g)
            );
            void 0 !== m ? ((m = CR(new BR(m, void 0), b === m.username)), null === (c = h.parentElement) || void 0 === c ? void 0 : c.replaceChild(m, h)) : a.push(g.Gv);
        }
        eT(e, a);
    }
    function mT(a, b) {
        var c = kT();
        c.style.padding = "1px 5px";
        var d = document.createElement("div");
        d.style.display = "inline-block";
        void 0 !== a.background && ((d.style.background = a.background), (d.style.color = "#000000"), (d.style.padding = "2px"), (d.style.textShadow = "none"));
        void 0 !== a.mc && (d.style.color = a.mc);
        "#ff3" === a.background && O(d, "isTip");
        O(d, "roomNotice");
        void 0 !== a.colorClass && O(d, a.colorClass);
        d.style.fontWeight = void 0 !== a.weight ? a.weight : "normal";
        c.appendChild(nT(d, a.wa));
        wb() || twemoji.parse(d, { className: "emojiChat" });
        NS(c, a.mc, a.background);
        lT(c, b);
        void 0 !== a.Ga && (c.dataset.ts = a.Ga.toString());
        return c;
    }
    function nT(a, b) {
        b = l(b);
        for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value;
            c = document.createElement("div");
            d = l(d);
            for (var e = d.next(); !e.done; e = d.next())
                switch (((e = e.value), e.Yf)) {
                    case 1:
                        c.appendChild(oT(e));
                        break;
                    case 0:
                        c.appendChild(new BR(e.M, void 0).element);
                        break;
                    case 2:
                        c.appendChild(pT(e.message));
                        break;
                    case 3:
                        c.appendChild(
                            qT(lh, function () {
                                "privatespying" !== gT.status && NB(gT);
                            })
                        );
                        break;
                    default:
                        r("Unknown roomNotice type for: " + e, "messageToDOM.ts", "fullvideolib");
                }
            a.appendChild(c);
        }
        return a;
    }
    function qT(a, b) {
        var c = document.createElement("a");
        O(c, "msg-link");
        c.style.textDecoration = "underline";
        c.innerText = a;
        c.onclick = b;
        c.style.cursor = "pointer";
        return c;
    }
    function pT(a) {
        var b = document.createElement("a");
        b.href = "/tag/" + a + "/" + (null !== fT && void 0 !== fT ? fT : "");
        O(b, "msg-link");
        b.style.textDecoration = "none";
        b.innerText = "#" + a;
        return b;
    }
    function rT(a) {
        var b = kT();
        b.innerText = a;
        b.style.color = iT();
        return b;
    }
    function sT(a, b) {
        function c(e) {
            var f = document.createElement("span");
            f.innerText = e;
            return f;
        }
        var d = kT();
        d.style.color = iT();
        d.appendChild(c(b ? cf : bf));
        d.appendChild(document.createElement("br"));
        d.appendChild(c(ff + " "));
        b = qT(gf, function () {});
        b.href = "/supporter/upgrade/?source=" + A.current.Ub.SUPPORTER_SOURCE_PM_UPSELL;
        b.target = "_blank";
        b.onclick = function () {
            F("SupporterPageOpened", { source: "chat" });
        };
        d.appendChild(b);
        d.appendChild(c(" " + ze(a) + "."));
        return d;
    }
    function kT(a) {
        a = void 0 === a ? "" : a;
        var b = document.createElement("div");
        b.style.fontFamily = "Tahoma,Arial,Helvetica,sans-serif";
        b.style.boxSizing = "border-box";
        b.style.paddingTop = "3px";
        b.style.paddingBottom = "3px";
        b.style.paddingLeft = "5px";
        b.style.paddingRight = "5px";
        b.style.overflowWrap = "break-word";
        b.style.wordWrap = "break-word";
        0 < a.length && b.setAttribute("data-nick", a);
        return b;
    }
    function oT(a) {
        var b = document.createElement("span");
        !1 !== a.FM ? (b = FR(new ER(hT), a.message)) : (b.innerText = a.message);
        b.style.color = void 0 !== a.mc ? a.mc : "";
        b.style.background = void 0 !== a.background ? a.background : "";
        b.style.fontWeight = void 0 !== a.weight ? a.weight : "";
        return b;
    }
    function tT(a) {
        var b = kT();
        return a.US(b);
    }
    var uT,
        vT = {};
    G.g(function (a) {
        vT.$d = a.A.Da.$d;
        vT.lh = a.A.lh;
        vT.nb = !1;
        uT = a.l;
    });
    mv.g(function (a) {
        vT.$d = a.$d;
    });
    function wT(a, b) {
        var c = xT(a.K.username),
            d = cC();
        d.style.padding = "0";
        var e = new BR(a.K, a);
        e.element.dataset.paction = "Chat";
        e.element.dataset.pactionName = "Username";
        e.element.style.paddingRight = "4px";
        d.appendChild(e.element);
        d.style.marginRight = "4px";
        var f = FR(new ER(vT), a.message);
        void 0 !== a.Bi && (f.style.color = a.Bi);
        void 0 !== a.font && ((e.element.style.fontFamily = a.font), (f.style.fontFamily = a.font));
        O(f, "msg-text");
        f.classList.add("split-mode");
        void 0 !== a.backgroundColor && (d.style.background = a.backgroundColor);
        yT(c, d, new KS({ JJ: a.Bi, RH: a.backgroundColor }));
        d.appendChild(f);
        c.appendChild(d);
        qb()
            ? window.setTimeout(function () {
                  twemoji.parse(c, { className: "emojiChat" });
              }, 0)
            : wb() || twemoji.parse(c, { className: "emojiChat" });
        lT(c, b);
        void 0 !== a.Ga && (c.dataset.ts = a.Ga.toString());
        return c;
    }
    function zT(a, b) {
        var c = cC();
        b = xT(b.username);
        a.style.marginTop = "6px";
        c.style.padding = "0";
        c.style.marginRight = "4px";
        c.appendChild(a);
        b.appendChild(c);
        b.setAttribute("type", "photo");
        return b;
    }
    function AT(a, b) {
        var c = xT(a.uC),
            d = document.createElement("div");
        d.style.display = "inline-block";
        void 0 !== a.background &&
            ((d.style.background = a.background),
            (d.style.marginTop = "1px"),
            (d.style.textShadow = "none"),
            (d.style.padding = "0px 1px"),
            O(d, "hasBg"),
            "#ff8b45" === a.background && ((d.style.padding = "0px 4px"), O(d, "bright-background")));
        "#ff3" === a.background && O(d, "isTip");
        O(d, "roomNotice");
        void 0 !== a.colorClass && O(d, a.colorClass);
        d.style.color = void 0 !== a.mc ? a.mc : "";
        d.style.fontWeight = void 0 !== a.weight ? a.weight : "normal";
        c.appendChild(BT(d, a.wa));
        wb() || twemoji.parse(d, { className: "emojiChat" });
        yT(c, d, new KS({ JJ: a.mc, RH: a.background }));
        lT(c, b);
        wb() || twemoji.parse(c);
        void 0 !== a.Ga && (c.dataset.ts = a.Ga.toString());
        return c;
    }
    function yT(a, b, c) {
        var d,
            e,
            f = void 0 !== c.lB,
            g = void 0 !== c.KJ;
        if (f || g)
            a.classList.add("dm-adjust"),
                f && (b.setAttribute("dm-adjust-bg", c.lB), b.setAttribute("dm-init-bg", null !== (d = c.background) && void 0 !== d ? d : "")),
                g && (b.setAttribute("dm-adjust-fg", c.KJ), b.setAttribute("dm-init-fg", null !== (e = c.mc) && void 0 !== e ? e : ""));
    }
    function BT(a, b) {
        b = l(b);
        for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value;
            c = document.createElement("div");
            d = l(d);
            for (var e = d.next(); !e.done; e = d.next())
                switch (((e = e.value), e.Yf)) {
                    case 1:
                        c.appendChild(CT(e));
                        break;
                    case 0:
                        c.appendChild(new BR(e.M, void 0).element);
                        break;
                    case 2:
                        c.appendChild(DT(e.message));
                        break;
                    case 3:
                        c.appendChild(
                            ET("spy private show", function () {
                                "privatespying" !== uT.status && NB(uT);
                            })
                        );
                        break;
                    case 4:
                        c.appendChild(
                            ET("start private show", function () {
                                "privaterequesting" === uT.status && RB();
                            })
                        );
                        break;
                    default:
                        r("Unknown roomNotice type for: " + JSON.stringify(e), "messageToDOM.ts", "theatermodelib");
                }
            a.appendChild(c);
        }
        return a;
    }
    function ET(a, b) {
        var c = document.createElement("a");
        O(c, "msg-link");
        c.style.textDecoration = "underline";
        c.innerText = a;
        c.onclick = b;
        c.style.cursor = "pointer";
        return c;
    }
    function DT(a) {
        var b,
            c = document.createElement("a");
        c.href = "/tag/" + a + "/" + (null !== (b = B.getState().zu) && void 0 !== b ? b : "");
        O(c, "camSubjectTagColor");
        c.style.textDecoration = "none";
        c.innerText = "#" + a;
        return c;
    }
    function FT(a) {
        var b = xT();
        b.innerText = a;
        return b;
    }
    function GT(a, b) {
        function c(e) {
            var f = document.createElement("span");
            f.innerText = e;
            return f;
        }
        var d = xT();
        d.appendChild(c(b ? cf : bf));
        d.appendChild(document.createElement("br"));
        d.appendChild(c(ff + " "));
        b = ET(gf, function () {});
        b.href = "/supporter/upgrade/?source=" + A.current.Ub.SUPPORTER_SOURCE_PM_UPSELL;
        b.target = "_blank";
        O(b, "msg-link");
        b.onclick = function () {
            F("SupporterPageOpened", { source: "chat" });
        };
        d.appendChild(b);
        d.appendChild(c(" " + ze(a) + "."));
        return d;
    }
    function xT(a) {
        a = void 0 === a ? "" : a;
        var b = document.createElement("div");
        b.classList.add("msg-text");
        b.style.fontFamily = "Tahoma,Arial,Helvetica,sans-serif";
        b.style.boxSizing = "border-box";
        b.style.paddingTop = "2px";
        b.style.paddingBottom = "3px";
        b.style.paddingLeft = "5px";
        b.style.paddingRight = "5px";
        b.style.overflowWrap = "break-word";
        b.style.wordWrap = "break-word";
        b.style.wordBreak = "break-word";
        0 < a.length && b.setAttribute("data-nick", a);
        return b;
    }
    function CT(a) {
        var b = document.createElement("span");
        !1 !== a.FM ? (b = FR(new ER(vT), a.message)) : (b.innerText = a.message);
        b.style.color = void 0 !== a.mc ? a.mc : "";
        b.style.backgroundColor = void 0 !== a.background ? a.background : "";
        b.style.fontWeight = void 0 !== a.weight ? a.weight : "";
        return b;
    }
    function HT(a) {
        var b = xT();
        return a.US(b);
    }
    function IT(a, b) {
        var c = xT();
        c.innerText = a;
        c.appendChild(b);
        c.setAttribute("data-purecolor", fC());
        c.classList.add("purecolor");
        c.classList.add("roomNotice");
        return c;
    }
    function JT(a, b) {
        var c = xT(b);
        c.textContent = a + " ";
        a = document.createElement("span");
        O(a, "hrefColor");
        a.textContent = Wo;
        a.style.cursor = "pointer";
        a.onclick = function () {
            IB.h(!0);
            OH.h(b);
        };
        c.appendChild(a);
        return c;
    }
    var KT = {};
    G.g(function (a) {
        KT.$d = a.A.Da.$d;
        KT.lh = a.A.lh;
        KT.nb = !1;
    });
    mv.g(function (a) {
        KT.$d = a.$d;
    });
    function LT(a, b, c, d, e) {
        var f = { padding: "5px 8px", display: "inline-block", textAlign: "left", maxWidth: "210px", borderRadius: "10px", overflowWrap: "break-word" },
            g = Object.assign(Object.assign({}, f), { marginRight: "8px" });
        f = Object.assign(Object.assign({}, f), { borderWidth: "1px", borderStyle: "solid", position: "relative" });
        return V("div", { colorClass: c, style: { textAlign: b ? "right" : "left", paddingTop: "2px" } }, V("div", { colorClass: d, style: b ? g : f, title: null !== e && void 0 !== e ? e : "" }, a));
    }
    function MT(a) {
        w.call(this, "div", a);
        this.HU = 3600;
        NT(this, a.TM);
    }
    q(MT, w);
    MT.prototype.initData = function (a) {
        w.prototype.initData.call(this, a);
        this.Se = a.Se;
        this.timestamp = a.Se.$i;
    };
    MT.prototype.ia = function (a) {
        w.prototype.ia.call(this, a);
        var b = a.Qx ? "me" : "other",
            c = void 0 !== this.Se.$i ? this.Se.$i.toLocaleString([], { year: "numeric", month: "short", day: "numeric", hour: "numeric", minute: "numeric", second: "numeric" }) : "",
            d;
        if (void 0 !== this.Se.Qa && 0 !== this.Se.Qa.length) {
            var e = new HG({ Ek: this.Se.qe, yq: this.Se.K.username === (null === (d = A.current.V) || void 0 === d ? void 0 : d.username), Qa: this.Se.Qa });
            d = zT(e.element, this.Se.K);
        } else d = void 0;
        e = FR(new ER(KT), this.Se.message);
        e.style.display = "block";
        var f = "";
        void 0 !== this.Se.$i &&
            ((f = this.Se.$i),
            f.toLocaleDateString() === new Date().toLocaleDateString()
                ? ((f = f.toLocaleTimeString([], { hour: "numeric", minute: "numeric" })), (f = T(S("Today at %(time)s"), { time: f }, !0)))
                : f.toLocaleDateString() === new Date(Date.now() - 864e5).toLocaleDateString()
                ? ((f = f.toLocaleTimeString([], { hour: "numeric", minute: "numeric" })), (f = T(S("Yesterday at %(time)s"), { time: f }, !0)))
                : (f =
                      f.getFullYear() === new Date().getFullYear()
                          ? f.toLocaleString([], { month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric" })
                          : f.toLocaleString([], { year: "numeric", month: "short", day: "numeric", hour: "numeric", minute: "numeric" })));
        this.hA = V("div", { style: { textAlign: "center", display: "none", padding: "8px 0 2px" }, colorClass: "timestamp" }, f);
        this.element = V("div", { style: { marginTop: "1px" } }, this.hA, "" !== this.Se.message && LT(e, a.Qx, "pmWindowMessage", b, c), d && LT(d, a.Qx, "pmWindowMessage", b));
    };
    function NT(a, b) {
        a.hA.style.display = void 0 !== a.timestamp && void 0 !== b && (a.timestamp.getTime() - b.getTime()) / 1e3 > a.HU ? "block" : "none";
    }
    function OT() {
        this.yD = new Set();
        this.FE = new Set();
    }
    function PT(a, b, c) {
        var d = c ? a.yD : a.FE,
            e = c ? a.FE : a.yD;
        if (void 0 === d || void 0 === e) return b;
        if (0 === e.size)
            return (
                b.forEach(function (f) {
                    return d.add(f.qe);
                }),
                b
            );
        b = b.filter(function (f) {
            return !e.has(f.qe);
        });
        0 < b.length && ((a.yD = void 0), (a.FE = void 0));
        return b;
    }
    var QT = {
        "/tip": function (a) {
            var b = {};
            if (0 < a.length) {
                var c = Number(a[0]);
                isNaN(c) ? (b.message = a.join(" ")) : (a.shift(), (b.amount = c), 0 < a.length && (b.message = a.join(" ")));
            }
            return { Gt: b, messageType: 1 };
        },
        "/debug": function () {
            return { messageType: 2 };
        },
    };
    function RT(a) {
        if ("/" === a.trim().charAt(0)) {
            a: {
                var b = a.match(/(\S+)/g);
                if (null !== b) {
                    var c = b.shift();
                    if (Object.prototype.hasOwnProperty.call(QT, c)) {
                        b = QT[c](b);
                        break a;
                    }
                }
                b = { messageType: 0 };
            }
            if (0 !== b.messageType) return b;
        }
        return { messageType: 0, Gt: a };
    }
    function ST(a) {
        w.call(this, "div", a);
        this.Z = a;
        this.Px = !1;
        this.nJ = !0;
    }
    q(ST, w);
    k = ST.prototype;
    k.initData = function () {
        this.H = new Ub();
        z(
            Zy.g(function () {}),
            this.H
        );
    };
    k.ia = function () {
        var a = this;
        this.element = V(
            "div",
            { style: { position: "absolute", bottom: "1px", width: "274px", height: "33px", margin: "0px 2px", borderWidth: "1px", borderStyle: "solid", borderRadius: "2px" }, colorClass: "pmWindowInput" },
            V("textarea", {
                style: {
                    position: "absolute",
                    width: "274px",
                    resize: "none",
                    boxSizing: "border-box",
                    backgroundColor: "transparent",
                    border: "none",
                    outline: "none",
                    fontFamily: "Tahoma, Helvetica, Arial, sans-serif",
                    fontSize: "12px",
                    padding: "8px 0 0 8px",
                },
                className: "noScrollbar",
                placeholder: di,
                maxLength: 4096,
                ref: function (b) {
                    return (a.Tn = b);
                },
                onKeyDown: function (b) {
                    return TT(a, b);
                },
                onInput: function () {
                    return UT(a);
                },
            }),
            V(
                "div",
                {
                    style: { position: "absolute", bottom: "4px", right: "0px", padding: "2px 6px 0px", margin: "4px 0px" },
                    ref: function (b) {
                        return (a.XH = b);
                    },
                },
                V(
                    "span",
                    {
                        style: { height: "23px", width: "47px", borderRadius: "4px", fontSize: "12px", lineHeight: "14px", cursor: "pointer", padding: "4px" },
                        colorClass: ["sendButton", "disabled"],
                        onClick: function () {
                            return a.submit();
                        },
                        ref: function (b) {
                            return (a.IN = b);
                        },
                    },
                    dh
                ),
                V(
                    "span",
                    {
                        style: { height: "23px", width: "47px", borderRadius: "4px", fontSize: "12px", lineHeight: "14px", padding: "4px", cursor: "pointer", marginLeft: "4px" },
                        colorClass: ["tipButton"],
                        onClick: function () {
                            return a.Z.Oo();
                        },
                    },
                    eh
                )
            )
        );
    };
    k.Rw = function () {
        this.nJ = !1;
        P(this.IN, "disabled");
    };
    k.focus = function () {
        var a = window.scrollX,
            b = window.scrollY;
        this.Tn.focus();
        if (pb()) {
            var c = window.setInterval(function () {
                window.scrollTo(a, b);
            }, 20);
            window.setTimeout(function () {
                window.clearInterval(c);
            }, 1e3);
        }
    };
    k.dispose = function () {
        Vb(this.H);
    };
    k.submit = function (a) {
        var b = this;
        a = void 0 === a ? !0 : a;
        if (!this.nJ) {
            var c = this.Tn.value.trim();
            this.Tn.value = "";
            UT(this);
            a && this.focus();
            if ("" !== c)
                switch (((a = RT(c)), a.messageType)) {
                    case 1:
                        this.Z.Oo(a.Gt.amount, a.Gt.message);
                        break;
                    default:
                        wD({ message: c, username: this.Z.Ij, source: "sitewidePM" }).catch(function (d) {
                            b.Z.JN(d);
                        });
                }
        }
    };
    function TT(a, b) {
        switch (b.keyCode) {
            case 76:
                if (b.ctrlKey || b.metaKey) b.preventDefault(), b.stopPropagation(), a.Z.qn();
                break;
            case 13:
                b.shiftKey || (b.preventDefault(), a.submit());
        }
    }
    function UT(a) {
        var b = a.XH.getBoundingClientRect().x - a.element.getBoundingClientRect().x;
        Bd(a.Tn.value, a.Tn) >= b - 20 || a.Tn.value.includes("\n") ? a.Px || (a.Z.Fy(), (a.element.style.height = "76px"), (a.Px = !0)) : a.Px && (a.Z.Ey(), (a.element.style.height = "33px"), (a.Px = !1));
    }
    k.render = function () {
        return this.element;
    };
    function VT(a) {
        Xu.call(this);
        var b = this;
        this.Z = a;
        this.EO = !1;
        this.Hx = function () {
            b.Z.ED();
            b.Z.dv();
        };
        this.WG = function () {
            b.Z.TU();
            b.Z.dv();
        };
        this.XS = function () {
            void 0 === b.dm
                ? r("PMUserContextMenu - reporting with no received message", "pmUserContextMenu.tsx", "pm")
                : (void 0 !== b.Z.kN && b.Z.kN(),
                  F("reportPMUser", { location: void 0 === b.Z.kN ? "PMTab" : "PMWindow" }),
                  (b.ib = new vQ(b.Z.kc.username, b.dm, b.Hx)),
                  b.element.removeChild(b.zg),
                  b.element.appendChild(b.ib.element),
                  (b.EO = !0),
                  b.ib.Ks(),
                  b.ib.nn.g(function () {
                      b.Z.dv();
                  }));
        };
        this.element = WT(this);
        this.fc.g(function () {
            b.element.style.display = "none";
            void 0 !== b.Z.pS && b.Z.pS();
            b.EO && b.Z.dv();
        });
    }
    q(VT, Xu);
    function WT(a) {
        var b = { display: "inline-block", cssFloat: "right", verticalAlign: "top", width: "36px", marginRight: "8px" };
        gR(a.Z.kc.username)
            .then(function (c) {
                a.TR.replaceWith(V("span", { style: b }, V(XT, { jy: c }), V(YT, { nc: c.nc })));
                c.Vf && (a.element.insertBefore(V(ZT, { vR: c.pk }), a.zg), (a.element.style.top = "-75px"));
            })
            .catch(function (c) {
                r("Could not process user menu request: " + c, "pmUserContextMenu.tsx", "pm");
            });
        a.Z.Sh !== a.Z.kc.username && ((a.SU = $T(a)), (a.eH = new NJ(a.Z.Sh, a.Z.kc.username, a.Z.dv).element));
        void 0 === a.Z.Ji && (a.Z.Ji = V(aU, { kc: a.Z.kc }));
        return V(
            "div",
            { style: { borderWidth: "1px", borderStyle: "solid", borderRadius: "4px", fontFamily: "Tahoma, Arial, Helvetica, sans-serif", cursor: "initial" }, colorClass: "pmUcmContainer" },
            V(
                "div",
                {
                    ref: function (c) {
                        return (a.zg = c);
                    },
                },
                V(
                    "div",
                    { style: { padding: "9px 0 4px 9px", minWidth: "188px", position: "relative", overflow: "hidden", boxSizing: "border-box" }, colorClass: "pmUcmHeader" },
                    a.Z.Ji,
                    V(
                        "span",
                        {
                            style: b,
                            ref: function (c) {
                                return (a.TR = c);
                            },
                        },
                        V("span", { colorClass: "placeholder", style: { width: "14px", height: "14px", cssFloat: "left" } }),
                        V("span", { colorClass: "placeholder", style: { width: "14px", height: "14px", cssFloat: "right" } })
                    )
                ),
                V(bU, { M: a.Z.kc }),
                a.SU,
                a.eH
            )
        );
    }
    function $T(a) {
        return V(
            "ul",
            { style: { borderTopWidth: "1px", borderTopStyle: "solid", listStyle: "none", padding: "5px 0", margin: 0 }, colorClass: "pmUcmLinks" },
            V(cU, { OK: "pmUcmIgnoreIcon", innerText: nu(a.Z.kc.username) ? Li : Ni, kc: a.Z.kc, $j: nu(a.Z.kc.username) ? a.WG : a.Hx }),
            V(cU, {
                ref: function (b) {
                    return (a.VS = b);
                },
                OK: "pmUcmReportIcon",
                innerText: wq,
                kc: a.Z.kc,
                $j: a.XS,
                hS: { display: void 0 !== a.dm ? "" : "none" },
            })
        );
    }
    function dU(a, b) {
        void 0 !== b && ((a.dm = b), (a.VS.style.display = ""));
    }
    VT.prototype.render = function () {
        return this.element;
    };
    function ZT(a) {
        return V("div", { style: { width: "100%", height: "75px", overflow: "hidden", borderRadius: "4px 4px 0px 0px" } }, V("img", { style: { position: "relative", left: "0px", width: "188px", top: "-50%" }, src: a.vR }));
    }
    function aU(a) {
        var b = V(
            "a",
            {
                href: "/" + a.kc.username + "/",
                target: "_blank",
                style: { fontWeight: "bold", textDecoration: "none", overflow: "hidden", textOverflow: "ellipsis", width: "120px", display: "inline-block", cursor: "pointer" },
                onClick: function (c) {
                    F("ViewProfile", { username: a.kc.username });
                    c.stopPropagation();
                },
            },
            a.kc.username
        );
        b.onmouseenter = function () {
            b.style.textDecoration = "underline";
        };
        b.onmouseleave = function () {
            b.style.textDecoration = "none";
        };
        return b;
    }
    function XT(a) {
        var b,
            c = Object.assign({ display: "inline-block", width: "15px", minHeight: "14px", fontSize: "12px", fontWeight: "bold", marginRight: "6px", verticalAlign: "top" }, a.NX),
            d = "";
        !0 === (null === (b = a.jy) || void 0 === b ? void 0 : b.kw) && !isNaN(a.jy.Fb) && 18 <= a.jy.Fb && (d = a.jy.Fb);
        c.background = "";
        return V("span", { style: c, colorClass: "ageIcon" }, d);
    }
    function YT(a) {
        var b = Object.assign({ display: "inline-block", width: "15px", height: "14px", verticalAlign: "top" }, a.PX),
            c = Object.assign({ display: "inline-block", width: "14px", height: "14px" }, a.OX),
            d = V("img", null);
        void 0 !== a.nc && "" !== a.nc && (d = V("img", { style: c, src: RA(a.nc), title: bx(a.nc) }));
        return V("span", { style: b }, d);
    }
    function bU(a) {
        var b = PA(a.M),
            c = NA(a.M);
        a = QA(a.M);
        if (void 0 !== b) {
            var d = { height: "10px", fontSize: "10px", marginTop: "4px", WebkitTextSizeAdjust: "none" },
                e = "";
            void 0 !== a && (e = V("div", { style: d }, a));
            return V(
                "div",
                { style: { padding: "9px 10px", borderTopWidth: "1px", borderTopStyle: "solid", fontSize: "12px" }, colorClass: "pmUcmDescription" },
                V("div", { style: { height: "12px", width: "100%", fontWeight: "bold" }, colorClass: c }, b),
                e
            );
        }
    }
    function cU(a) {
        var b = Object.assign(
            { padding: "3px 10px", whiteSpace: "nowrap", fontWeight: "normal", fontFamily: "Tahoma, Arial, Helvetica, sans-serif", fontSize: "12px", WebkitTextSizeAdjust: "none", cursor: "pointer", width: "100%", boxSizing: "border-box" },
            a.hS
        );
        return V(
            "li",
            { style: b, onClick: a.$j, colorClass: "pmUcmLinkItem" },
            V("span", { style: { padding: "0px 4px 0px 0px", verticalAlign: "bottom", width: "14px", height: "14px", display: "inline-block", marginRight: "4px" }, colorClass: a.OK }),
            V("span", { style: { fontWeight: "normal", fontFamily: "Tahoma, Arial, Helvetica, sans-serif", fontSize: "12px", WebkitTextSizeAdjust: "none" } }, a.innerText)
        );
    }
    function eU(a) {
        w.call(this, "div", a);
    }
    q(eU, w);
    eU.prototype.ia = function (a) {
        var b = {
                backgroundColor: "#000000",
                color: "#EDEDED",
                fontFamily: "Tahoma, Arial, Helvetica, sans-serif",
                fontSize: "10px",
                lineHeight: "14px",
                position: "absolute",
                height: "27px",
                borderRadius: "4px",
                bottom: void 0 === a.OU ? "40px" : a.OU,
                right: void 0 === a.PU ? "0px" : a.PU,
                padding: "0px 8px",
                width: "auto",
                whiteSpace: "nowrap",
                display: "none",
            },
            c = { height: "0px", width: "0px", bottom: "-5px", right: void 0 === a.KP ? "7px" : a.KP, position: "absolute", borderTop: "5px solid #000000", borderRight: "5px solid transparent", borderLeft: "5px solid transparent" };
        this.message = V("span", { style: { position: "relative", top: "7px" } }, a.message);
        this.element = V("div", { style: b }, V("div", { style: c }), this.message);
    };
    eU.prototype.show = function () {
        this.element.style.display = "block";
    };
    eU.prototype.B = function () {
        this.element.style.display = "none";
    };
    eU.prototype.render = function () {
        return this.element;
    };
    function fU(a) {
        w.call(this, "div", a);
        var b = this;
        void 0 !== a.colorClass
            ? ((this.colorClass = a.colorClass), gU(this, a.colorClass, a.FB))
            : zD(a.username)
                  .then(function (c) {
                      b.colorClass = NA(c.M);
                      gU(b, b.colorClass, a.FB);
                  })
                  .catch(ct);
    }
    q(fU, w);
    fU.prototype.ia = function (a) {
        var b = { maxWidth: a.xK ? "70px" : "140px", overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap", display: "inline-block" };
        this.element = V("div", {
            style: Object.assign(Object.assign({}, { position: "absolute", fontSize: "12px", fontFamily: "Tahoma, Arial, Helvetica, sans-serif", fontWeight: "bold", lineHeight: "14px", top: "10px", left: "8px" }), a.style),
        });
        this.ml = V("div", { style: b });
        this.ll = a.FB
            ? V(
                  "a",
                  {
                      onClick: function () {
                          void 0 !== a.vI && a.vI();
                      },
                      target: "_blank",
                  },
                  a.username
              )
            : V("a", null, a.username);
        this.ml.appendChild(this.ll);
        this.element.appendChild(this.ml);
        a.xK && ((b = V(hU, null)), this.element.appendChild(b));
    };
    function gU(a, b, c) {
        P(a.element, a.colorClass);
        P(a.ll, a.colorClass);
        a.colorClass = b;
        O(a.element, b);
        O(a.ll, b);
        "inFanclub" === b && void 0 !== c && c && void 0 === a.icon
            ? ((a.icon = document.createElement("img")),
              (a.icon.src = "https://static-assets.highwebmedia.com/tsdefaultassets/badge_star.svg"),
              (a.icon.height = 16),
              a.element.insertBefore(a.icon, a.ml),
              (a.ml.style.position = "relative"),
              (a.ml.style.left = "5px"),
              (a.ml.style.bottom = "2px"))
            : void 0 !== a.icon && (a.element.removeChild(a.icon), (a.icon = void 0), (a.ml.style.position = ""), (a.ml.style.left = ""), (a.ml.style.bottom = ""));
    }
    fU.prototype.render = function () {
        return this.element;
    };
    function iU(a, b) {
        zB.call(this, a, b);
    }
    q(iU, zB);
    iU.prototype.cC = function () {
        return (this.S = V("div", { style: { display: "block", width: "100%", position: "absolute", top: 0, right: 0, bottom: 0, left: 0 }, colorClass: "pmWindowTipOverlay", onClick: this.mk }));
    };
    iU.prototype.zw = function () {
        var a = zB.prototype.zw.call(this);
        this.Mg.type = Zd("DfTpKbrd") ? "number" : "tel";
        Q(a, { bottom: "", height: "", top: "50%", left: "50%", transform: "translate(-50%, -50%" });
        Q(this.Mg, { fontSize: "16px", fontFamily: "UbuntuRegular, Helvetica, Arial, sans-serif" });
        Q(this.kA, { fontSize: "16px", fontFamily: "UbuntuRegular, Helvetica, Arial, sans-serif" });
        Q(this.xv, { marginLeft: "" });
        Q(this.cR, { display: "block", textAlign: "right" });
        return a;
    };
    iU.prototype.YN = function () {
        this.xv.style.display = "block";
    };
    function jU(a) {
        ST.call(this, a);
    }
    q(jU, ST);
    jU.prototype.ia = function () {
        var a = this;
        this.element = V(
            "div",
            { style: { bottom: "1px", width: "100%", height: "33px", borderWidth: "1px", borderStyle: "solid", borderRadius: "2px", boxSizing: "border-box", display: "flex" }, colorClass: "pmWindowInput" },
            V("textarea", {
                style: {
                    width: "274px",
                    resize: "none",
                    boxSizing: "border-box",
                    backgroundColor: "transparent",
                    border: "none",
                    outline: "none",
                    fontFamily: "Tahoma, Helvetica, Arial, sans-serif",
                    fontSize: "16px",
                    padding: "6px 0 0 6px",
                },
                className: "noScrollbar",
                placeholder: di,
                maxLength: 4096,
                ref: function (b) {
                    return (a.Tn = b);
                },
                onKeyDown: function (b) {
                    return TT(a, b);
                },
                onInput: function () {
                    return UT(a);
                },
            }),
            V(
                "div",
                {
                    style: { padding: "0 3px 3px 3px", display: "flex", alignItems: "flex-end" },
                    ref: function (b) {
                        return (a.XH = b);
                    },
                },
                V(
                    "span",
                    {
                        style: { borderRadius: "4px", fontSize: "12px", lineHeight: "14px", cursor: "pointer", padding: "4px" },
                        colorClass: ["sendButton", "disabled"],
                        onClick: function () {
                            return a.submit(!1);
                        },
                        ref: function (b) {
                            return (a.IN = b);
                        },
                    },
                    dh
                ),
                V(
                    "span",
                    {
                        style: { borderRadius: "4px", fontSize: "12px", lineHeight: "14px", padding: "4px", cursor: "pointer", marginLeft: "4px" },
                        colorClass: ["tipButton"],
                        onClick: function () {
                            return a.Z.Oo();
                        },
                    },
                    eh
                )
            )
        );
    };
    function kU(a, b, c) {
        oQ.call(this, a, b, c);
        this.element.style.height = "auto";
        this.element.style.width = "auto";
        this.element.style.maxWidth = "90%";
        this.element.style.background = "white";
        this.element.style.borderRadius = "4px";
        this.element.style.margin = "auto";
        this.element.style.position = "absolute";
        this.element.style.boxShadow = "0 10px 20px rgba(0, 0, 0, 0.2), 0 6px 6px rgba(0, 0, 0, 0.25)";
        this.Ld.style.fontSize = "16px";
    }
    q(kU, oQ);
    kU.prototype.D = function () {
        oQ.prototype.D.call(this);
        this.element.style.width = Fu() && 768 > Uv() ? "90%" : 0.9 * Math.min(screen.width, screen.height) + "px";
        this.element.style.top = (Tv() - this.element.offsetHeight) / 2 + "px";
        this.element.style.left = (Uv() - this.element.offsetWidth) / 2 + "px";
    };
    kU.prototype.TE = function () {};
    function lU(a, b, c) {
        this.Xx = this.pl = 0;
        this.wL = this.cj = this.XK = a;
        this.mi = b;
        this.qM = void 0 === c ? function () {} : c;
    }
    function mU(a) {
        var b = { ih: !1, af: void 0 };
        a.XK = b;
        0 === a.pl && ((a.cj = b), a.mi(a.cj, !1));
    }
    function nU(a, b, c) {
        a.pl += 1;
        a.cj = b;
        a.mi(a.cj, !0);
        c.then(function (d) {
            d ? a.commit(a.pl) : oU(a, a.pl);
        }).catch(function () {
            oU(a, a.pl);
        });
    }
    lU.prototype.commit = function (a) {
        a > this.Xx && ((this.Xx = a), (this.wL = this.cj), this.mi(this.cj, a < this.pl));
    };
    function oU(a, b) {
        0 === a.Xx ? ((a.cj = a.XK), a.mi(a.cj, !1), a.qM()) : b > a.Xx && ((a.cj = a.wL), a.mi(a.cj, b < a.pl), a.qM());
    }
    var pU, qU, rU;
    G.g(function (a) {
        pU = a.A.j;
        qU = a.A.userName;
        rU = a.l;
    });
    function sU(a) {
        a = void 0 === a ? !0 : a;
        var b;
        Xu.call(this);
        var c = this;
        this.LD = !1;
        this.ag = new Yr({
            jm: function () {
                c.WE();
            },
            ph: function () {
                c.VE();
            },
            Il: !0,
        });
        this.nf = !1;
        qU = null === (b = A.current.V) || void 0 === b ? void 0 : b.username;
        this.Ch = document.createElement("div");
        this.element.appendChild(this.Ch);
        this.element.style.position = "relative";
        this.element.style.width = "auto";
        this.element.style.height = "auto";
        this.element.style.minHeight = "40px";
        this.element.style.padding = "4px";
        this.element.style.border = "1px solid #cccccc";
        this.element.style.borderRadius = "6px";
        this.element.style.marginBottom = "16px";
        O(this.element, "userPanel");
        this.Wc = document.createElement("img");
        this.Wc.style.width = "47px";
        this.Wc.style.height = "40px";
        this.Wc.style.marginRight = "16px";
        this.Wc.style.verticalAlign = "middle";
        this.Wc.style.borderRadius = "4px";
        this.Wc.style.display = "none";
        this.Ch.appendChild(this.Wc);
        this.Hc = document.createElement("img");
        this.Hc.style.position = "relative";
        this.Hc.style.top = "3px";
        this.Hc.style.height = "16px";
        this.Hc.style.padding = "6px 16px 0 0";
        this.Hc.style.display = "none";
        this.Ch.appendChild(this.Hc);
        this.Fb = document.createElement("span");
        this.Fb.innerText = "--";
        this.Fb.style.verticalAlign = "middle";
        this.Fb.style.marginRight = "16px";
        this.Fb.style.display = "none";
        this.Ch.appendChild(this.Fb);
        this.Kk = tU("View Profile");
        this.Kk.onclick = function () {
            GB.h(c.username);
        };
        a && this.Ch.appendChild(this.Kk);
        this.Xq = tU("Send PM");
        this.Xq.onclick = function () {
            Wu('You must be logged in to send a PM. Click "OK" to login.') || $y.h({ username: c.username, focus: !0, Im: c.tj });
        };
        this.Ch.appendChild(this.Xq);
        A.current.Ro &&
            ((this.Cm = tU(af)),
            (this.Cm.onclick = function () {
                Wu(hi) || (IB.h(!0), OH.h(c.username));
            }),
            this.Ch.appendChild(this.Cm));
        this.hy = tU("Mention");
        this.hy.style.display = "inline-block";
        this.hy.onclick = function () {
            az.h(c.username);
        };
        this.Ch.appendChild(this.hy);
        this.kh = tU("Ignore");
        this.jt = new lU(!1, this.LT.bind(this), function () {
            var d = c.nf ? Ge(c.username) : Fe(c.username);
            R(d);
        });
        this.kh.onclick = function () {
            c.lM();
        };
        this.Ch.appendChild(this.kh);
        this.ag.element.style.backgroundColor = "rgba(0, 0, 0, 0.3)";
        this.ag.element.style.position = "fixed";
        this.hc = tU("Report");
        this.hc.onclick = function () {
            c.LD ? c.ag.B() : (F("ReportChatUser", { username: c.username }), c.ag.show());
        };
        this.ag.fc.g(function () {
            c.ag.B();
        });
        this.Ch.appendChild(this.hc);
    }
    q(sU, Xu);
    k = sU.prototype;
    k.lM = function () {
        if (!Wu(Ui + " " + Ti)) {
            var a = this.jt,
                b = !this.nf;
            var c = this.username;
            c = this.nf ? su(rU, c) : rU.kf(c);
            nU(a, b, c);
        }
    };
    k.LT = function (a, b) {
        this.nf = a;
        this.kh.innerText = a ? "Unignore" : "Ignore";
        b ? ((this.kh.style.pointerEvents = "none"), (this.kh.style.color = "#6c757d")) : ((this.kh.style.pointerEvents = ""), (this.kh.style.color = "#156b95"));
        void 0 !== this.ib && sQ(this.ib, this.nf);
    };
    k.IO = function (a, b) {
        var c = this;
        this.username = a;
        this.Kk.style.display = a === pU ? "none" : "inline-block";
        rU.username() === pU ? (this.kh.style.display = "none") : (this.kh.style.display = "inline-block");
        qU === this.username
            ? ((this.kh.style.display = "none"), (this.Xq.style.display = "none"), (this.hc.style.display = "none"), void 0 !== this.Cm && (this.Cm.style.display = "none"))
            : (void 0 === b ? (this.hc.style.display = "none") : ((this.hc.style.display = "inline-block"), this.SB(b)), (this.Xq.style.display = "inline-block"), void 0 !== this.Cm && (this.Cm.style.display = "inline-block"));
        this.Wc.style.display = "none";
        this.Hc.style.display = "none";
        this.Fb.style.display = "none";
        gR(this.username)
            .then(function (d) {
                c.tj = d.tj;
                d.kw && ((c.Hc.src = RA(d.nc)), (c.Fb.innerText = isNaN(d.Fb) ? "" : "" + d.Fb), (c.Wc.src = d.pk), d.Vf && (c.Wc.style.display = "inline"), (c.Hc.style.display = "inline"), (c.Fb.style.display = "inline"));
                nU(c.jt, rU.nf(c.username), Promise.resolve(!0));
                uU(c, d.cI, d.username);
            })
            .catch(function (d) {
                r("Could not process user menu request: " + d, "userPanel.ts", "mobilelib");
            });
    };
    k.SB = function (a) {
        var b = this;
        void 0 !== this.ib && this.ag.removeChild(this.ib);
        this.ib = new kU(this.username, a, rU);
        this.ag.G(this.ib);
        this.ib.element.style.display = "none";
        this.ib.nn.g(function (c) {
            b.ag.B();
            c && (b.fc.h(void 0), void 0 !== b.ib && b.ib.cv());
        });
        this.ib.PK.g(function () {
            nU(b.jt, !0, rU.kf(b.username));
        });
    };
    function uU(a, b, c) {
        void 0 !== a.ir && (a.Ch.removeChild(a.ir), (a.ir = void 0));
        b &&
            ((a.ir = tU("Silence")),
            (a.ir.style.display = "inline-block"),
            (a.ir.onclick = function () {
                Md("Silence " + c + "?", function () {
                    F("SilenceUser", { username: c });
                    E("roomsilence/" + c + "/" + pU + "/", {})
                        .then(function () {})
                        .catch(function (d) {
                            r("Unable to silence user (" + d + ")", "userPanel.ts", "mobilelib", { room: pU, username: c });
                            R("Error silencing user " + c);
                        });
                });
            }),
            a.Ch.appendChild(a.ir));
    }
    k.WE = function () {
        this.hc.style.textDecoration = "underline";
        void 0 !== this.ib && ((this.ib.element.style.display = ""), this.ib.D());
        this.LD = !0;
    };
    k.VE = function () {
        this.LD = !1;
        this.hc.style.textDecoration = "none";
        void 0 !== this.ib && (this.ib.element.style.display = "none");
    };
    function vU() {
        sU.call(this, !0);
        var a = this;
        this.Kk.onclick = function () {
            void 0 !== rU ? GB.h(a.username) : (window.location.pathname = "/" + a.username + "/");
            IB.h(!1);
        };
    }
    q(vU, sU);
    k = vU.prototype;
    k.lM = function () {
        var a = this;
        Wu(Ui + " " + Ti) ||
            nU(
                this.jt,
                !this.nf,
                (function () {
                    return a.nf
                        ? ku(a.username).then(function () {
                              return !0;
                          })
                        : hu(a.username).then(function () {
                              return !0;
                          });
                })()
            );
    };
    k.IO = function (a, b) {
        var c = this;
        this.username = a;
        this.Kk.style.display = "inline-block";
        this.Xq.style.display = "none";
        this.hy.style.display = "none";
        void 0 !== this.Cm && (this.Cm.style.display = "none");
        qU === this.username
            ? ((this.kh.style.display = "none"), (this.Xq.style.display = "none"), (this.hc.style.display = "none"))
            : ((this.kh.style.display = "inline-block"), void 0 === b ? (this.hc.style.display = "none") : ((this.hc.style.display = "inline-block"), this.SB(b)));
        this.Wc.style.display = "none";
        this.Hc.style.display = "none";
        this.Fb.style.display = "none";
        gR(this.username)
            .then(function (d) {
                c.tj = d.tj;
                d.kw && ((c.Hc.src = RA(d.nc)), (c.Fb.innerText = isNaN(d.Fb) ? "" : "" + d.Fb), (c.Wc.src = d.pk), d.Vf && (c.Wc.style.display = "inline"), (c.Hc.style.display = "inline"), (c.Fb.style.display = "inline"));
                nU(c.jt, nu(c.username), Promise.resolve(!0));
            })
            .catch(function (d) {
                r("Could not process user menu request: " + d, "userPanel.ts", "mobilelib");
            });
    };
    k.SB = function (a) {
        var b = this;
        void 0 !== this.ib && this.ag.removeChild(this.ib);
        this.ib = new kU(this.username, a, void 0);
        this.ag.G(this.ib);
        this.ib.element.style.display = "none";
        this.ib.nn.g(function (c) {
            b.ag.B();
            c && (b.fc.h(void 0), void 0 !== b.ib && b.ib.cv());
        });
    };
    k.WE = function () {
        sU.prototype.WE.call(this);
        this.ag.element.style.top = "0";
    };
    k.VE = function () {
        sU.prototype.VE.call(this);
        this.ag.element.style.top = "";
    };
    function tU(a) {
        var b = document.createElement("span");
        b.innerText = a;
        b.style.verticalAlign = "middle";
        b.style.textDecoration = "none";
        b.style.cursor = "pointer";
        b.style.color = "#156b95";
        b.style.padding = "0 16px 6px 0";
        return b;
    }
    function hU() {
        w.call(this, "div");
    }
    q(hU, w);
    hU.prototype.ia = function () {
        this.element = V("div", {
            className: "numDisplay",
            style: {
                position: "relative",
                display: "none",
                left: "4px",
                bottom: "2px",
                minWidth: "16px",
                height: "15px",
                paddingTop: "1px",
                backgroundColor: "#F47321",
                color: "#FFFFFF",
                fontFamily: "Tahoma, Arial, Helvetica, sans-serif",
                textAlign: "center",
                borderRadius: "4px",
                fontWeight: "normal",
            },
        });
    };
    function wU(a, b) {
        a.element.textContent = 9 < b ? "9+" : "" + b;
        a.element.style.width = Bd(a.element.textContent, a.element) + 4 + "px";
    }
    hU.prototype.show = function () {
        this.element.style.display = "inline-block";
    };
    hU.prototype.B = function () {
        this.element.style.display = "none";
    };
    hU.prototype.render = function () {
        return this.element;
    };
    function xU(a) {
        return V("img", { src: a.tR, height: "13px", width: "13px", style: Object.assign({ position: "relative", height: "13px", width: "13px", left: "6px" }, a.uR) });
    }
    function yU(a) {
        return V(
            "div",
            {
                style: Object.assign({ position: "absolute", height: "25px", width: "25px", borderRadius: "5px", top: "5px" }, a.style),
                onMouseEnter: function () {
                    return a.so && P(a.so, "highlight");
                },
                onMouseLeave: function () {
                    return a.so && O(a.so, "highlight");
                },
                colorClass: "button",
                onClick: a.$j,
            },
            a.children
        );
    }
    function DB(a) {
        return V(yU, { so: a.so, style: a.style, $j: a.$j }, V(xU, { tR: "https://static-assets.highwebmedia.com/tsdefaultassets/close-gray.svg", uR: { top: "7px" } }));
    }
    function zU(a) {
        var b;
        w.call(this);
        var c = this;
        this.vb = !0;
        this.JL = this.Xl = this.VK = this.dH = this.bt = this.HJ = !1;
        this.MM = new OT();
        this.RS = function () {
            void 0 !== c.Sb && (c.element.removeChild(c.Sb.S), c.element.removeChild(c.Sb.element), P(c.Rd, "highlight"), (c.Sb = void 0));
        };
        this.Hx = function () {
            function d() {
                return AU(c, BU(Fe(c.username)));
            }
            hu(c.username)
                .then(function (e) {
                    return !e && d();
                })
                .catch(d);
        };
        this.WG = function () {
            function d() {
                return AU(c, BU(Ge(c.username)));
            }
            ku(c.username)
                .then(function (e) {
                    return !e && d();
                })
                .catch(d);
        };
        this.NO = function () {
            c.cO();
        };
        this.username = a.username;
        this.re = a.re;
        this.Cq = a.Cq;
        this.H = new Ub();
        this.UK();
        this.FI();
        this.lm(a.open, a.oq);
        a = null === (b = A.current.V) || void 0 === b ? void 0 : b.yc;
        void 0 !== a &&
            ((b = new Qt(a)),
            Dt(b.getKey())
                ? ((this.dH = !0), CU(this), this.Rw())
                : z(
                      b.Cg.g(function (d) {
                          d.zi && ((c.dH = !0), CU(c), c.Rw());
                      }),
                      this.H
                  ),
            new fu(a).ea.g(function (d) {
                d.username === c.username && (d.nf ? AU(c, BU(Ce(c.username))) : AU(c, BU(De(c.username))));
            }));
        zD(this.username)
            .then(function (d) {
                var e = d.M;
                d = d.aI;
                c.kc = e;
                c.colorClass = NA(e);
                c.bI = d;
                c.Ji = new fU({ username: c.username, FB: !0, xK: !1, colorClass: c.colorClass, vI: c.NO });
                c.Ji.element.appendChild(c.Gi.element);
                c.Ji.element.appendChild(c.ep);
                c.Rd.appendChild(c.Ji.element);
                "inFanclub" === c.colorClass && ((c.Gi.element.style.bottom = "4px"), (c.Gi.element.style.left = "8px"), (c.ep.style.right = "-10px"));
                G.g(function (f) {
                    c.kc.vt = c.username === f.A.j;
                    c.colorClass = NA(c.kc);
                    gU(c.Ji, c.colorClass, !0);
                });
            })
            .catch(ct);
    }
    q(zU, w);
    k = zU.prototype;
    k.Bc = function (a) {
        var b = this;
        this.bt ||
            ((this.JL = a),
            void 0 === this.colorClass
                ? zD(this.username)
                      .then(function (c) {
                          b.kc = c.M;
                          b.colorClass = NA(c.M);
                          b.bI = c.aI;
                          b.bt = !0;
                          CU(b);
                      })
                      .catch(ct)
                : ((b.bt = !0), CU(b)));
    };
    k.FI = function () {
        this.WB();
        this.RB();
        DU(this);
        this.element = V("div", { colorClass: "pmWindow", style: { cssFloat: "right", position: "relative", marginRight: "7px", borderRadius: "4px 4px 0px 0px", width: "280px" } }, this.Rd, this.Zj);
    };
    k.WB = function () {
        var a = this;
        this.ep = V("img", { src: "https://static-assets.highwebmedia.com/tsdefaultassets/orange_dot.svg", style: { position: "absolute", top: "0px", right: "-10px", display: "none" } });
        this.Gi = new hU();
        this.Rd = V("div", {
            style: { position: "relative", height: "34px", borderRadius: "4px 4px 0px 0px", borderBottomWidth: "2px", borderBottomStyle: "solid", cursor: "pointer" },
            colorClass: "pmWindowHeader",
            onMouseEnter: function () {
                O(a.Rd, "highlight");
            },
            onMouseLeave: function () {
                P(a.Rd, "highlight");
            },
            onClick: function (c) {
                c.target === a.Rd && a.lm(!a.Mb);
            },
        });
        var b = V(DB, {
            so: this.Rd,
            style: { right: "5px" },
            $j: function () {
                return a.qn();
            },
        });
        this.xp = new eU({ message: vq });
        v("mouseenter", b, function () {
            var c;
            null === (c = a.xp) || void 0 === c ? void 0 : c.show();
        });
        v("mouseleave", b, function () {
            var c;
            null === (c = a.xp) || void 0 === c ? void 0 : c.B();
        });
        b.appendChild(this.xp.element);
        this.Rd.appendChild(b);
    };
    k.UK = function () {
        var a = this;
        this.dl = new zB(this.username, function () {
            return a.mk();
        });
        this.pA = this.dl.zw();
        this.oA = this.dl.cC();
    };
    k.Rw = function () {
        this.input.Rw();
    };
    k.cO = function () {
        if (this.Mb) {
            if (void 0 === this.Sb) {
                var a = this.Ji.element.cloneNode(!0);
                a.childNodes[a.childNodes.length - 3].childNodes[0].setAttribute("href", "/" + this.username);
                this.Sb = new VT({ Sh: this.re, kc: this.kc, Ji: a, dv: this.RS, ED: this.Hx, TU: this.WG });
                this.Sb.element.style.display = "none";
                this.Sb.element.style.position = "absolute";
                this.Sb.element.style.left = "0px";
                this.Sb.element.style.top = "0";
                this.Sb.element.style.zIndex = "1001";
                this.Sb.element.onclick = function (b) {
                    b.stopPropagation();
                };
                this.element.appendChild(this.Sb.S);
                this.element.appendChild(this.Sb.element);
            }
            dU(this.Sb, this.dm);
            this.Cq(this.username);
            "none" === this.Sb.element.style.display && ((this.Sb.element.style.display = "block"), this.Sb.xh(), F("PMMenuClicked", { location: "PMWindow" }));
        } else this.lm(!0);
    };
    k.Oo = function (a, b) {
        var c = this.dl;
        void 0 !== a && (c.Mg.value = String(a));
        void 0 !== b && (c.kA.value = b);
        BB(c);
        CB(c);
        this.element.appendChild(this.oA);
        this.element.appendChild(this.pA);
        this.dl.focus();
        F("SendTipViewed", { location: "PMWindow", tipType: "public", localStorage: Qa() });
    };
    k.mk = function () {
        var a, b;
        null === (a = this.oA.parentElement) || void 0 === a ? void 0 : a.removeChild(this.oA);
        null === (b = this.pA.parentElement) || void 0 === b ? void 0 : b.removeChild(this.pA);
    };
    function TI(a, b) {
        var c = b.K.username === a.re;
        if (c) (b = b.amount), (b = T(ee("You tipped %(num)s token.", "You tipped %(num)s tokens.", b), { num: b }, !0));
        else if (0 < b.message.length) {
            var d = a.username,
                e = b.amount;
            b = b.message;
            b = T(ee("%(otherUser)s tipped you %(num)s token. -- %(message)s", "%(otherUser)s tipped you %(num)s tokens. -- %(message)s", e), { otherUser: d, num: e, message: b }, !0);
        } else (d = a.username), (b = b.amount), (b = T(ee("%(otherUser)s tipped you %(num)s token.", "%(otherUser)s tipped you %(num)s tokens.", b), { otherUser: d, num: b }, !0));
        c = BU(b, c ? 2 : 1, "tipNotice");
        AU(a, c);
    }
    k.oc = function () {
        var a;
        return null !== (a = this.T) && void 0 !== a ? a : 0;
    };
    k.RB = function () {
        var a = this,
            b,
            c;
        this.Zj = V(
            "div",
            {
                style: { height: "224px", position: "relative", fontFamily: "Tahoma, Arial, Helvetica, sans-serif", fontSize: "12px" },
                ref: function (d) {
                    a.Zj = d;
                },
            },
            V(
                "div",
                {
                    style: { position: "relative", height: "175px", overflowY: "auto" },
                    onScroll: function () {
                        EU(a);
                    },
                    onMouseDown: function (d) {
                        b = d.pageX;
                        c = d.pageY;
                    },
                    onMouseUp: function (d) {
                        var e = d.pageX - b;
                        d = d.pageY - c;
                        2 > Math.sqrt(e * e + d * d) && a.input.focus();
                    },
                    ref: function (d) {
                        return (a.pe = d);
                    },
                },
                V(
                    "div",
                    {
                        style: { width: "100%", boxSizing: "border-box", padding: "0px 4px" },
                        ref: function (d) {
                            return (a.Ia = d);
                        },
                    },
                    BU(Qe(this.username)),
                    BU(we()),
                    V(
                        "div",
                        {
                            ref: function (d) {
                                return (a.ky = d);
                            },
                        },
                        V(
                            "div",
                            {
                                style: { marginTop: "44px" },
                                ref: function (d) {
                                    return (a.xg = d);
                                },
                            },
                            V(TA, { Gs: { margin: "auto" } })
                        )
                    )
                )
            ),
            V(ST, {
                classRef: function (d) {
                    return (a.input = d);
                },
                Ij: this.username,
                Fy: function () {
                    return a.Fy();
                },
                Ey: function () {
                    return a.Ey();
                },
                Oo: function (d, e) {
                    return a.Oo(d, e);
                },
                JN: function (d) {
                    AU(a, BU(d.errorMessage));
                },
                qn: function () {
                    return a.qn();
                },
            })
        );
    };
    function EU(a) {
        var b = a.pe.scrollTop;
        0 !== b || a.Xl || FU(a, !0, a.vs);
        1 > a.pe.scrollHeight - b - a.pe.clientHeight && GU(a);
    }
    function DU(a) {
        Iz(a.username)
            .then(function (b) {
                b &&
                    C("follow/is_following/" + a.username + "/")
                        .then(function (c) {
                            c = JSON.parse(c.responseText).following;
                            a.GI(c);
                        })
                        .catch(ct);
            })
            .catch(ct);
    }
    k.GI = function (a) {
        var b = this;
        this.Gc = V(yU, { so: this.Rd, style: { right: "30px" }, $j: function () {} });
        this.Of = new Oz({ jc: this.username, Td: a });
        Q(this.Of, { height: "20px", width: "20px", backgroundSize: "20px 20px", backgroundPosition: "center", padding: "2px 3px", margin: "0px" });
        this.Yw = new eU({ message: a ? mh : nh });
        v("mouseenter", this.Gc, function () {
            var c;
            null === (c = b.Yw) || void 0 === c ? void 0 : c.show();
        });
        v("mouseleave", this.Gc, function () {
            var c;
            null === (c = b.Yw) || void 0 === c ? void 0 : c.B();
        });
        this.Gc.appendChild(this.Of.element);
        this.Gc.appendChild(this.Yw.element);
        this.Rd.appendChild(this.Gc);
    };
    k.openWindow = function (a) {
        var b;
        this.Zj.style.display = "block";
        P(this.element, "collapsed");
        this.element.style.width = "280px";
        this.element.style.bottom = "260px";
        null === (b = this.xp) || void 0 === b ? void 0 : (b.message.textContent = vq);
        a && (HU(this), GU(this, !0));
        void 0 !== this.Gc && (this.Gc.style.display = "block");
    };
    k.lm = function (a, b) {
        if ((this.Mb = a)) this.openWindow(void 0 === b ? !0 : b);
        else {
            var c;
            this.Zj.style.display = "none";
            O(this.element, "collapsed");
            this.element.style.bottom = "36px";
            null === (c = this.xp) || void 0 === c ? void 0 : (c.message.textContent = uq);
            0 < this.oc() && (wU(this.Gi, this.oc()), this.Gi.show(), (this.ep.style.display = "none"));
            void 0 !== this.Gc && (this.Gc.style.display = "none");
            this.mk();
        }
        IU.h({ username: this.username, Mb: a });
        IN.h(void 0);
    };
    k.qn = function () {
        var a;
        XH.h(this.username);
        null === (a = this.xp) || void 0 === a ? void 0 : a.B();
    };
    k.EF = function () {
        this.element.remove();
        this.vb = !1;
    };
    k.Vd = function () {
        return 40 < this.Ia.offsetHeight - (this.pe.scrollTop + this.pe.offsetHeight);
    };
    k.Ea = function () {
        this.pe.scrollTop = this.Ia.offsetHeight;
    };
    function JU(a, b) {
        a.Vd() ||
            b.querySelectorAll("img").forEach(function (c) {
                var d = c.src;
                c.src = "";
                c.onload = function () {
                    return a.Ea();
                };
                c.src = d;
            });
    }
    function HU(a) {
        a.Ea();
        document.activeElement !== a.input.element && a.input.focus();
    }
    k.Fy = function () {
        var a = this.Vd();
        this.pe.style.height = "132px";
        a || this.Ea();
    };
    k.Ey = function () {
        this.pe.style.height = "175px";
    };
    function CU(a) {
        a.bt && a.dH && !a.VK && (FU(a, a.JL), (a.VK = !0));
    }
    function FU(a, b, c) {
        tD(a.username, c)
            .then(function (d) {
                var e = d.wa;
                50 > e.length && (a.Xl = !0);
                a.HJ || ((a.HJ = !0), a.xg.remove(), a.Bz(d.T), b && GU(a, !0));
                0 < e.length
                    ? ((a.vs = e[0].qe),
                      void 0 === a.dm &&
                          (a.dm = []
                              .concat(ha(e))
                              .reverse()
                              .find(function (f) {
                                  return f.K.username === a.username;
                              })),
                      void 0 === a.kE && (a.kE = e[e.length - 1].$i),
                      void 0 === c ? ((d = PT(a.MM, e, !0)), rV(a, d), sV(a), a.Ea(), JU(a, a.ky)) : rV(a, e))
                    : void 0 === c && sV(a);
            })
            .catch(ct);
    }
    function rV(a, b) {
        if (0 !== b.length) {
            var c = V("div", null),
                d;
            void 0 !== a.xy && NT(a.xy, b[b.length - 1].$i);
            var e;
            b.forEach(function (f, g) {
                d = new MT({ Se: f, Qx: f.K.username === a.re, TM: e });
                c.appendChild(d.element);
                e = f.$i;
                0 === g && ((d.hA.style.display = "block"), (a.xy = d));
            });
            a.ky.insertBefore(c, a.ky.firstChild);
            a.pe.scrollTop = c.offsetHeight;
        }
    }
    function BU(a, b, c) {
        switch (void 0 === b ? 0 : b) {
            case 0:
                return V("div", { style: { maxWidth: "271px", textAlign: "center", fontSize: "11px", lineHeight: "12px", padding: "4px", margin: "auto" }, colorClass: "logMessage" }, a);
            case 2:
                return LT(a, !0, "logMessage", c);
            case 1:
                return LT(a, !1, "logMessage", c);
        }
    }
    function AU(a, b) {
        !1 !== a.bt && (a.Ia.appendChild(b), a.Ea());
    }
    function sV(a) {
        var b;
        if (!a.bI) {
            var c = !0 === (null === (b = A.current.V) || void 0 === b ? void 0 : b.tb) ? ef : df;
            AU(a, BU(c));
        }
    }
    function SI(a, b) {
        if (0 !== PT(a.MM, [b], !1).length) {
            var c = b.K.username === a.re,
                d = c ? 0 : a.oc() + 1,
                e = a.Vd(),
                f = b.K.username === a.re;
            f || (a.dm = b);
            f = new MT({ Se: b, Qx: f, TM: a.kE });
            JU(a, f.element);
            a.Ia.appendChild(f.element);
            a.kE = b.$i;
            void 0 === a.xy && ((f.hA.style.display = "block"), (a.xy = f));
            (!c && e) || a.Ea();
            c || a.Bz(d);
            a.Mb && a.vb && !e && GU(a);
        }
    }
    k.Bz = function (a) {
        0 === a ? GU(this) : ((this.T = a), this.Mb ? (this.ep.style.display = "inline-block") : (wU(this.Gi, a), this.Gi.show()));
    };
    function GU(a, b) {
        b = void 0 === b ? !1 : b;
        0 !== a.oc() && (tV(a), EE.h({ username: a.username, XQ: b }));
    }
    function tV(a) {
        0 !== a.oc() && ((a.T = 0), (a.ep.style.display = "none"), a.Gi.B());
    }
    function uV(a) {
        O(a.Rd, "loadedHighlight");
        window.setTimeout(function () {
            return P(a.Rd, "loadedHighlight");
        }, 4e3);
    }
    function UI(a) {
        zU.call(this, a);
        var b = this;
        this.NO = function () {
            vV(b);
        };
    }
    q(UI, zU);
    k = UI.prototype;
    k.FI = function () {
        var a = this;
        this.WB();
        this.RB();
        DU(this);
        this.element = V(
            "div",
            { colorClass: "pmWindow", style: { boxShadow: "none", display: "flex", flexDirection: "column", flex: 1, height: "1px" } },
            this.Rd,
            this.Zj,
            V(jU, {
                classRef: function (b) {
                    return (a.input = b);
                },
                Ij: this.username,
                Fy: function () {},
                Ey: function () {},
                Oo: function (b, c) {
                    return a.Oo(b, c);
                },
                JN: function (b) {
                    AU(a, BU(b.errorMessage));
                },
                qn: function () {
                    return a.qn();
                },
            })
        );
    };
    k.WB = function () {
        this.ep = V("img", { src: "https://static-assets.highwebmedia.com/tsdefaultassets/orange_dot.svg", style: { position: "absolute", top: "0px", right: "-10px", display: "none" } });
        this.Gi = new hU();
        this.Rd = V("div", { style: { position: "relative", height: "34px", borderRadius: "4px 4px 0px 0px", borderBottomWidth: "1px", borderBottomStyle: "solid", cursor: "pointer" }, colorClass: "pmWindowHeader" });
    };
    k.RB = function () {
        var a = this;
        this.Zj = V(
            "div",
            {
                style: { fontFamily: "Tahoma, Arial, Helvetica, sans-serif", fontSize: "12px", flex: 1, height: "1px", display: "flex" },
                ref: function (b) {
                    a.Zj = b;
                },
            },
            V(
                "div",
                {
                    style: { width: "100%", height: "100%", overflowY: "auto" },
                    onScroll: function () {
                        EU(a);
                    },
                    onTouchStart: function (b) {
                        a.zE = b.touches;
                    },
                    onTouchMove: function (b) {
                        var c = a.pe.scrollTop,
                            d = 1 > a.pe.scrollHeight - c - a.pe.clientHeight,
                            e = b.touches[0].pageY;
                        e = e > (void 0 !== a.zE ? a.zE[0].pageY : e);
                        1 < b.touches.length || !((0 === c && e) || (d && !e)) || (b.cancelable && b.preventDefault());
                    },
                    onTouchEnd: function () {
                        a.zE = void 0;
                    },
                    ref: function (b) {
                        return (a.pe = b);
                    },
                },
                V(
                    "div",
                    {
                        style: { width: "100%", boxSizing: "border-box", padding: "4px 4px 8px 4px" },
                        ref: function (b) {
                            return (a.Ia = b);
                        },
                    },
                    BU(Qe(this.username)),
                    BU(we()),
                    V(
                        "div",
                        {
                            ref: function (b) {
                                return (a.ky = b);
                            },
                        },
                        V(
                            "div",
                            {
                                style: { marginTop: "44px" },
                                ref: function (b) {
                                    return (a.xg = b);
                                },
                            },
                            V(TA, { Gs: { margin: "auto" } })
                        )
                    )
                )
            )
        );
    };
    k.UK = function () {
        var a = this;
        this.dl = new iU(this.username, function () {
            return a.mk();
        });
        this.pA = this.dl.zw();
        this.oA = this.dl.cC();
    };
    k.GI = function (a) {
        this.Of = new Oz({ jc: this.username, Td: a });
        Q(this.Of, { height: "20px", width: "20px", backgroundSize: "20px 20px", backgroundPosition: "center", padding: "2px 3px", margin: "0px" });
        this.Gc = V(yU, { style: { right: "8px" }, $j: function () {} });
        this.Gc.appendChild(this.Of.element);
        this.Rd.appendChild(this.Gc);
    };
    k.lm = function (a, b) {
        b = void 0 === b ? !0 : b;
        a ? this.Ja() : this.ha();
        zU.prototype.lm.call(this, a, b);
    };
    k.openWindow = function (a) {
        this.Zj.style.display = "flex";
        P(this.element, "collapsed");
        this.Ea();
        a && GU(this, !0);
        void 0 !== this.Gc && (this.Gc.style.display = "block");
    };
    k.qn = function () {
        this.Zj.style.display = "none";
        0 < this.oc() && (wU(this.Gi, this.oc()), this.Gi.show(), (this.ep.style.display = "none"));
        void 0 !== this.Gc && (this.Gc.style.display = "none");
        this.mk();
    };
    k.cO = function () {};
    function vV(a) {
        void 0 === a.Bh &&
            ((a.Bh = new vU()),
            Q(a.Bh.element, { top: a.Rd.offsetHeight + "px", backgroundColor: "#FFF", fontSize: "12px" }),
            z(
                IB.g(function () {
                    wV(a);
                }),
                a.H
            ),
            z(
                a.Bh.fc.g(function () {
                    wV(a);
                }),
                a.H
            ));
        a.Bh.IO(a.username, a.dm);
        a.Rd.appendChild(a.Bh.S);
        a.Rd.appendChild(a.Bh.element);
        a.Bh.xh();
    }
    function wV(a) {
        var b;
        null === (b = a.Bh) || void 0 === b ? void 0 : b.Lb();
        void 0 !== a.Bh && null !== a.Bh.element.parentElement && a.Bh.element.parentElement.removeChild(a.Bh.element);
    }
    k.Ja = function () {
        zU.prototype.Ja.call(this, "flex");
    };
    var OH = new y("createChatWindowEvent"),
        XH = new y("removeChatWindowEvent"),
        IU = new y("updateWindowIsOpenEvent"),
        xV = new y("removePmChatBarRequest"),
        yV = new y("restorePmChatBarRequest"),
        IN = new y("repositionFloatingPlayer");
    IN.g(function () {
        void 0 !== document.repositionFloatingPlayer && document.repositionFloatingPlayer();
    });
    function zV(a) {
        var b;
        w.call(this);
        var c = this;
        this.Hd = new Map();
        this.qx = !1;
        this.Cq = function (d) {
            c.Hd.forEach(function (e, f) {
                e.element.style.zIndex = f === d ? "2" : "1";
            });
        };
        this.re = a;
        this.H = new Ub();
        z(
            XH.g(function () {
                AV(c);
            }),
            this.H
        );
        z(
            IU.g(function () {
                BV(c);
            }),
            this.H
        );
        z(
            AE.g(function (d) {
                var e = c.Hd.get(d.bb);
                null === e || void 0 === e ? void 0 : SI(e, d);
            }),
            this.H
        );
        z(
            EE.g(function (d) {
                d = c.Hd.get(d.username);
                null === d || void 0 === d ? void 0 : tV(d);
            }),
            this.H
        );
        z(
            Az.g(function (d) {
                var e = c.Hd.get(d.J);
                if (void 0 !== e) {
                    d = d.ij;
                    var f;
                    e.Of.Hb({ isActive: d });
                    null === (f = e.Yw) || void 0 === f ? void 0 : (f.message.textContent = d ? mh : nh);
                }
            }),
            this.H
        );
        a = null === (b = A.current.V) || void 0 === b ? void 0 : b.yc;
        void 0 !== a &&
            z(
                new Ut(a).ea.g(function (d) {
                    var e = d.K.username !== c.re ? d.K.username : d.Ij;
                    e = c.Hd.get(null !== e && void 0 !== e ? e : "");
                    null === e || void 0 === e ? void 0 : TI(e, d);
                }),
                this.H
            );
        CV(this);
        v("mousedown", this.element, function () {
            JA = !1;
        });
        v("mouseup", window, function () {
            JA = !0;
        });
    }
    q(zV, w);
    zV.prototype.ia = function () {
        var a = this;
        w.prototype.ia.call(this);
        this.Mz = V("div", { style: { display: "inline-block", cssFloat: "right" } });
        this.element = V("div", { id: "ChatWindowBar", style: { position: "fixed", bottom: "0px", right: "10px", minWidth: "350px", width: "100vw", height: "0px", backgroundColor: "rgba(255, 255, 255, 0.5)", zIndex: 1003 } }, this.Mz);
        pb() &&
            null !== window.visualViewport &&
            (v(
                "focus",
                this.element,
                function () {
                    return DV(a);
                },
                !0
            ),
            v(
                "blur",
                this.element,
                function () {
                    return EV(a);
                },
                !0
            ),
            window.visualViewport.addEventListener("resize", function () {
                a.qx && FV(a);
            }),
            MA(function () {
                a.qx && FV(a);
            }));
    };
    function CV(a) {
        var b;
        if (A.current.oj) {
            z(
                ez.g(function (d) {
                    var e = a.Hd.get(d.username);
                    void 0 !== e && ((d = Object.assign(Object.assign({}, e.kc), { ec: d.ec })), (e.kc = d), gU(e.Ji, NA(d)));
                }),
                a.H
            );
            var c = null === (b = A.current.V) || void 0 === b ? void 0 : b.yc;
            void 0 !== c &&
                z(
                    new lF(c).ea.g(function (d) {
                        d = a.Hd.get(d.K.username);
                        if (void 0 !== d) {
                            var e = Object.assign(Object.assign({}, d.kc), { zd: !0 });
                            d.kc = e;
                            gU(d.Ji, NA(e));
                        }
                    }),
                    a.H
                );
        }
    }
    function DV(a) {
        window.setTimeout(function () {
            a.element.style.position = "absolute";
            a.element.style.bottom = "unset";
            a.RR = document.body.offsetHeight;
            FV(a);
            a.qx = !0;
        }, 1);
    }
    function EV(a) {
        window.setTimeout(function () {
            a.element.style.position = "fixed";
            a.element.style.bottom = "0px";
            a.element.style.top = "unset";
            a.qx = !1;
        }, 0);
    }
    function FV(a) {
        null !== window.visualViewport && (a.element.style.top = Math.min(window.scrollY + window.visualViewport.height, a.RR) + "px");
    }
    function AV(a) {
        void 0 !== a.Po && (a.Po.EF(), (a.Po = void 0), BV(a), IN.h(void 0));
    }
    zV.prototype.Lz = function (a, b, c) {
        AV(this);
        this.Mz.appendChild(a.element);
        a.vb = !0;
        a.lm(b);
        b && HU(a);
        c && uV(a);
        this.Po = a;
        BV(this);
        IN.h(void 0);
    };
    function BV(a) {
        if (Qa()) {
            var b;
            void 0 !== a.Po && (b = { username: a.Po.username, isOpen: a.Po.Mb });
            var c = window.localStorage.getItem("pmChatWindow");
            c = null !== c ? JSON.parse(c) : {};
            c[a.re] = JSON.stringify(b);
            window.localStorage.setItem("pmChatWindow", JSON.stringify(c));
        }
    }
    function SL(a) {
        function b() {
            if (Qa()) {
                var f = window.localStorage.getItem("pmChatWindow");
                if (null !== f && ((f = JSON.parse(f)[a]), void 0 !== f)) {
                    f = JSON.parse(f);
                    c(f.username, f.isOpen, !1);
                    if (null === d || void 0 === d) void 0;
                    else {
                        var g;
                        null === (g = d.Po) || void 0 === g ? void 0 : g.Bc(!1);
                    }
                    IN.h(void 0);
                }
            }
        }
        function c(f, g, h) {
            if (a !== f) {
                void 0 === d && ((d = new zV(a)), document.body.appendChild(d.element));
                var m = d;
                var n = m.Hd.get(f);
                void 0 === n ? (n = !1) : (m.Mz.appendChild(n.element), m.Lz(n, !0, h), (n = !0));
                n || ((n = new zU({ username: f, re: m.re, open: g, oq: h, Cq: m.Cq })), h && n.Bc(!0), m.Hd.set(f, n), m.Mz.appendChild(n.element), m.Lz(n, g, h));
            }
        }
        var d,
            e = !1;
        mu();
        b();
        xV.g(function (f) {
            f && (e = !0);
            void 0 !== d && (document.body.removeChild(d.element), (d = void 0));
        });
        yV.g(function () {
            e && (b(), (e = !1));
        });
        OH.g(function (f) {
            e || c(f, !0, !0);
        });
    }
    function NN(a) {
        return Array.from(a ? a.querySelectorAll(".pmWindow") : document.querySelectorAll(".pmWindow")).reduce(function (b, c) {
            return Math.max(b, c.offsetHeight);
        }, 0);
    }
    var GV = new y("floatingPlayerShow"),
        nz = new y("floatingPlayerHide"),
        HV = new y("floatingPlayerShowLoginOverlay");
    function IV(a, b, c) {
        function d() {
            window.setTimeout(function () {
                e.$l = !1;
            }, 100);
        }
        w.call(this);
        var e = this;
        this.F = a;
        this.tS = b;
        this.onclose = c;
        this.Sg = document.createElement("a");
        this.J = document.createElement("a");
        this.vb = this.$l = !1;
        this.Re = !0;
        this.iy = !1;
        this.width = 280;
        this.Ui = this.bottom = this.right = 15;
        a = { right: "6px", top: "7px" };
        c = { right: "6px", top: "6px" };
        O(this.element, "floatingPlayer");
        Q(this.element, {
            zIndex: 1004,
            right: "0px",
            bottom: "0px",
            position: "fixed",
            overflow: "visible",
            animationName: "fadein",
            WebkitAnimationName: "fadein",
            animationDuration: "0.2s",
            WebkitAnimationDuration: "0.2s",
            animationTimingFunction: "linear",
            WebkitAnimationTimingFunction: "linear",
            height: "auto",
            width: "auto",
            borderWidth: "1px",
            borderStyle: "solid",
            borderRadius: "4px",
        });
        this.element.onclick = function (h) {
            h.stopPropagation();
        };
        v("touchstart", document.getElementsByTagName("body")[0], function () {});
        this.cD();
        G.g(function (h) {
            e.Re = h.A.Re;
        });
        b = document.createElement("div");
        O(b, "header");
        Q(b, { height: "30px", lineHeight: "30px", width: "100%", position: "relative", top: "0px", left: "0px", borderTopLeftRadius: "4px", borderTopRightRadius: "4px" });
        this.element.appendChild(b);
        Q(this.J, {
            marginLeft: "15px",
            userSelect: "none",
            msUserSelect: "none",
            WebkitUserSelect: "none",
            fontFamily: "UbuntuMedium, Arial, Helvetica, sans-serif",
            overflow: "hidden",
            textOverflow: "ellipsis",
            height: "30px",
            maxWidth: "calc(100% - 60px)",
            whiteSpace: "nowrap",
            cursor: "pointer",
            position: "relative",
            display: "inline-block",
            zIndex: 1005,
        });
        wd(this.J).g(function (h) {
            e.J.style.textDecoration = !0 === h ? "underline" : "none";
        });
        b.appendChild(this.J);
        this.XL = JV(b, "move");
        Q(this.XL, { position: "absolute", top: "0px", left: "0px", height: "30px", width: "calc(100% - 60px)" });
        var f = document.createElement("div");
        O(f, "optionsArea");
        Q(f, { position: "absolute", right: "30px", top: "3px", height: "25px", width: "25px", borderRadius: "4px", cursor: "pointer" });
        f.ontouchstart = function (h) {
            KV(e);
            h.preventDefault();
        };
        f.onclick = function (h) {
            KV(e);
            h.preventDefault();
        };
        b.appendChild(f);
        var g = LV("https://static-assets.highwebmedia.com/tsdefaultassets/menu.svg", f, c);
        O(g, "lightOptionsIcon");
        c = LV("https://static-assets.highwebmedia.com/tsdefaultassets/darkmode-menu.svg", f, c);
        O(c, "darkOptionsIcon");
        c = document.createElement("div");
        O(c, "closeArea");
        Q(c, { position: "absolute", right: "5px", top: "3px", height: "25px", width: "25px", borderRadius: "4px", cursor: "pointer" });
        c.ontouchstart = function (h) {
            e.close();
            h.preventDefault();
        };
        c.onclick = function () {
            e.close();
        };
        b.appendChild(c);
        b = LV("https://static-assets.highwebmedia.com/tsdefaultassets/floating-player-close.svg", c, a);
        O(b, "lightCloseIcon");
        a = LV("https://static-assets.highwebmedia.com/tsdefaultassets/floating-player-close-darkmode.svg", c, a);
        O(a, "darkCloseIcon");
        Q(this.Sg, { position: "relative", cursor: "pointer", display: "block" });
        a = JV(this.Sg, "pointer");
        Q(a, { top: "0", left: "0", right: "0", bottom: "0", borderBottomRightRadius: "4px", borderBottomLeftRadius: "4px" });
        MV(a);
        this.Sg.onclick = function (h) {
            h.metaKey || h.ctrlKey || (h.preventDefault(), e.$l || e.expand());
        };
        this.element.appendChild(this.Sg);
        Pz(this.element, function (h) {
            return function (m, n, p) {
                var u = e.Re ? 0.5625 : 0.75,
                    x = { $p: e.bottom, aq: e.right, YK: e.width, bq: n, cq: p, minWidth: 150, ratio: u },
                    D = e.right,
                    J = e.bottom,
                    I = e.width;
                n = l(NV());
                var ja = n.next().value,
                    Yb = n.next().value;
                e.$l = !0;
                m.stopPropagation();
                return {
                    enabled: !0,
                    move: function (Ta, oa) {
                        Ta = Math.min(Math.max(x.minWidth, x.YK + Qz(x, Ta, oa, h)), 0.66 * window.innerWidth);
                        oa = x.YK - Ta;
                        var Nb = x.$p,
                            db = x.aq;
                        switch (h) {
                            case 1:
                                db = x.aq + oa;
                                break;
                            case 2:
                                db = x.aq + oa;
                                Nb = x.$p + oa * x.ratio;
                                break;
                            case 3:
                                Nb = x.$p + oa * x.ratio;
                                break;
                            case 4:
                                Nb = x.$p + (oa * x.ratio) / 2;
                                break;
                            case 5:
                                db = x.aq + oa;
                                Nb = x.$p + (oa * x.ratio) / 2;
                                break;
                            case 6:
                                db = x.aq + oa / 2;
                                Nb = x.$p + oa * x.ratio;
                                break;
                            case 7:
                                db = x.aq + oa / 2;
                        }
                        Ta = l([db, Nb, Ta]);
                        D = Ta.next().value;
                        J = Ta.next().value;
                        I = Ta.next().value;
                        Ta = I * u;
                        e.setPosition(Math.min(Math.max(J, 0), ja - (Ta + 30)), Math.min(Math.max(D, 0), Yb - I));
                        e.Sg.style.width = I + "px";
                        e.Sg.style.height = Ta + "px";
                    },
                    end: function () {
                        e.bottom = J;
                        e.Ui = J;
                        e.right = D;
                        e.width = I;
                        e.TF();
                        d();
                    },
                };
            };
        });
        sb() &&
            ((a = document.createElement("object")),
            (a.style.position = "absolute"),
            (a.style.width = "calc(100% + 10px)"),
            (a.style.height = "calc(100% + 10px)"),
            (a.style.top = "-5px"),
            (a.style.left = "-5px"),
            (a.style.zIndex = "-1"),
            (a.type = "application/x-mpegURL"),
            (a.data = ""),
            a.setAttribute("wmode", "transparent"),
            this.element.appendChild(a));
        vy(this.XL, function (h, m, n) {
            var p = e.element.offsetHeight,
                u = e.element.offsetWidth,
                x = e.right,
                D = e.bottom,
                J = e.bottom,
                I = e.right;
            h = l(NV());
            var ja = h.next().value,
                Yb = h.next().value;
            return {
                enabled: !0,
                move: function (Ta, oa) {
                    Ta -= m;
                    J = Math.min(Math.max(D - (oa - n), 0), ja - p);
                    I = Math.min(Math.max(x - Ta, 0), Yb - u);
                    e.setPosition(J, I);
                },
                end: function () {
                    e.bottom = J;
                    e.Ui = J;
                    e.right = I;
                },
            };
        });
        kz.g(function (h) {
            e.element.style.visibility = h.active ? "hidden" : "visible";
        });
        Az.g(function (h) {
            h.J === e.j && void 0 !== e.Of && e.Of.Hb({ isActive: h.ij });
        });
        IN.g(function () {
            e.D();
        });
        this.D();
    }
    q(IV, w);
    function KV(a) {
        void 0 === a.Bd ? OV(a) : a.iy ? ((a.Bd.style.display = "none"), (a.iy = !1)) : ((a.Bd.style.display = "block"), (a.iy = !0));
    }
    function OV(a) {
        a.iy = !0;
        a.Bd = document.createElement("div");
        O(a.Bd, "menuBubble");
        a.Bd.innerHTML = bn;
        var b = a.Bd.querySelector("a");
        O(b, "link");
        b.onclick = function (f) {
            f.metaKey || f.ctrlKey || f.defaultPrevented || qb() || ib() || (f.preventDefault(), Qr(b.href), KV(a));
        };
        var c = document.createElement("div");
        O(c, "caret");
        c.style.position = "absolute";
        c.style.height = "0px";
        c.style.width = "0px";
        c.style.right = "5px";
        c.style.top = "-5px";
        c.style.borderBottomWidth = "5px";
        c.style.borderBottomStyle = "solid";
        c.style.borderRight = "5px solid transparent";
        c.style.borderLeft = "5px solid transparent";
        var d = { position: "relative", verticalAlign: "middle", marginLeft: "4px", height: "14px", width: "14px" },
            e = LV("https://static-assets.highwebmedia.com/tsdefaultassets/option_cog_light.svg", b, d);
        O(e, "lightAdvancedOptionsIcon");
        d = LV("https://static-assets.highwebmedia.com/tsdefaultassets/option_cog_dark.svg", b, d);
        O(d, "darkAdvancedOptionsIcon");
        a.Bd.appendChild(c);
        a.Bd.style.position = "absolute";
        a.Bd.style.width = "240px";
        a.Bd.style.right = "32px";
        a.Bd.style.top = "40px";
        a.Bd.style.opacity = "0.8";
        a.Bd.style.borderWidth = "1px";
        a.Bd.style.borderStyle = "solid";
        a.Bd.style.boxSizing = "border-box";
        a.Bd.style.borderRadius = "4px";
        a.Bd.style.padding = "4px";
        a.Bd.style.zIndex = "1005";
        a.element.appendChild(a.Bd);
    }
    k = IV.prototype;
    k.cD = function () {
        if (Qa()) {
            var a = window.localStorage.getItem("floatingPlayerSettings");
            null !== a && ((a = JSON.parse(a)), (this.Ui = this.bottom = a.bottom), (this.right = a.right), (this.width = a.width));
        }
    };
    k.TF = function () {
        Qa() && window.localStorage.setItem("floatingPlayerSettings", JSON.stringify({ bottom: 0 > this.bottom ? 0 : this.bottom, right: this.right, width: this.width }));
    };
    k.setPosition = function (a, b) {
        Q(this.element, { bottom: (0 > a ? 0 : a) + "px", right: b + "px" });
    };
    k.D = function (a) {
        w.prototype.D.call(this);
        var b = l(NV()),
            c = b.next().value;
        b = b.next().value;
        var d = Math.min(this.width, 0.66 * b);
        this.Sg.style.height = d * (this.Re ? 0.5625 : 0.75) + "px";
        this.Sg.style.width = d + "px";
        a = NN(a);
        this.bottom = 0 < a ? Math.max(this.Ui, a + 4) : this.Ui;
        this.setPosition(Math.min(this.bottom, Math.max(0, c - this.element.offsetHeight)), Math.min(this.right, Math.max(0, b - this.element.offsetWidth)));
    };
    function LV(a, b, c) {
        var d = document.createElement("img");
        d.src = a;
        d.height = 13;
        d.width = 13;
        Q(d, Object.assign({ height: "13px", width: "13px", position: "absolute", cursor: "pointer", userSelect: "none", msUserSelect: "none", WebkitUserSelect: "none" }, c));
        d.setAttribute("draggable", "false");
        b.appendChild(d);
        return d;
    }
    function MV(a) {
        var b = LV("https://static-assets.highwebmedia.com/tsdefaultassets/return-to-room.svg", a, { top: "50%", left: "50%", width: "25px", height: "25px", display: "none", transform: "translate(-50%, -50%)" });
        wd(a).g(function (c) {
            !0 === c ? ((a.style.backgroundColor = "rgba(0, 0, 0, 0.6)"), (b.style.display = "block")) : ((a.style.backgroundColor = "rgba(0, 0, 0, 0.01)"), (b.style.display = "none"));
        });
        nz.g(function () {
            a.style.backgroundColor = "rgba(0, 0, 0, 0.01)";
            b.style.display = "none";
        });
    }
    function JV(a, b) {
        var c = document.createElement("div");
        c.style.position = "absolute";
        c.style.cursor = b;
        c.style.backgroundColor = "rgba(0, 0, 0, 0.01)";
        a.appendChild(c);
        return c;
    }
    function PV(a, b) {
        a.j = b;
        a.J.textContent = Qm + " " + vc(b);
        a.J.href = "/" + b + "/";
        a.Sg.href = "/" + b + "/";
    }
    function QV(a, b) {
        void 0 !== a.Of && a.Sg.removeChild(a.Of.element);
        a.Of = new Oz({ jc: a.j, Td: b, location: "FloatingPlayer" });
        a.Of.element.style.top = "5px";
        a.Of.element.style.right = "5px";
        a.Sg.appendChild(a.Of.element);
    }
    k.show = function () {
        pd() || this.vb || (this.Sg.insertBefore(this.F.N.element, this.Sg.firstChild), document.body.appendChild(this.element), (this.vb = !0), this.R(), GV.h(void 0));
    };
    k.B = function () {
        this.vb && ((this.vb = !1), this.F.element.insertBefore(this.F.N.element, this.F.element.firstChild), null !== this.element.parentElement && this.element.parentElement.removeChild(this.element), nz.h(void 0));
    };
    function NV() {
        if ("BackCompat" === document.compatMode) {
            var a = document.body.clientHeight;
            var b = document.body.clientWidth;
        } else (a = document.documentElement.clientHeight), (b = document.documentElement.clientWidth);
        if (40 < window.innerWidth - b || window.innerWidth < b) (a = window.innerHeight), (b = window.innerWidth);
        return [a, b];
    }
    k.close = function () {
        this.onclose();
        this.B();
    };
    k.expand = function () {
        this.tS();
        this.B();
    };
    var RV = new y("canvasOpen"),
        SV = new y("canvasClose");
    function TV(a) {
        var b = document.createElement("div");
        b.style.display = "block";
        void 0 !== a && a.appendChild(b);
        return b;
    }
    function UV() {
        w.apply(this, arguments);
    }
    q(UV, w);
    UV.prototype.initData = function () {
        this.element = TV();
        this.control = document.createElement("button");
        this.control.type = "button";
        this.control.tabIndex = 0;
        this.element.appendChild(this.control);
    };
    UV.prototype.ia = function () {
        this.element.style.position = "absolute";
        this.element.style.top = "0";
        this.element.style.right = "0";
        this.element.style.margin = "12px 12px 0 0";
        O(this.control, "closeControl");
        this.control.style.padding = "4px";
        this.control.style.cursor = "pointer";
        this.control.style.width = "12px";
        this.control.style.height = "12px";
        this.control.style.border = "none";
        this.control.style.boxSizing = "content-box";
    };
    function VV() {
        w.apply(this, arguments);
    }
    q(VV, w);
    VV.prototype.initData = function () {
        this.element = TV();
        O(this.element, "header");
        this.qa = document.createElement("h2");
        this.qa.textContent = jg;
        this.element.appendChild(this.qa);
    };
    VV.prototype.ia = function () {
        Q(this.qa, { fontSize: "14px", lineHeight: "18px", fontFamily: "UbuntuRegular, Helvetica, Arial, sans-serif", margin: "0 0 8px" });
    };
    function WV() {
        w.apply(this, arguments);
    }
    q(WV, w);
    WV.prototype.initData = function () {
        this.element = TV();
        O(this.element, "submitRow");
        this.submit = document.createElement("button");
        this.submit.type = "submit";
        this.submit.textContent = Am;
        this.submit.disabled = !0;
        this.element.appendChild(this.submit);
    };
    WV.prototype.ia = function () {
        this.element.style.textAlign = "right";
        Q(this.submit, { fontFamily: "UbuntuRegular, Helvetica, Arial, sans-serif", marginTop: "16px", borderStyle: "solid", borderWidth: "1px", borderRadius: "4px", boxSizing: "border-box", opacity: "0.5", padding: "7px" });
    };
    WV.prototype.disable = function () {
        this.submit.disabled = !0;
        this.submit.style.opacity = "0.5";
        this.submit.style.cursor = "default";
    };
    WV.prototype.enable = function () {
        this.submit.disabled = !1;
        this.submit.style.opacity = "1";
        this.submit.style.cursor = "pointer";
    };
    function XV() {
        w.call(this);
        this.mt = new y("inputChange");
        var a = xe.Rz;
        this.xQ = T(S("Overall, how was your %(siteName)s experience today?"), { siteName: a }, !0);
        this.element = TV();
        this.ax = new Vy("hidden", "sentiment", this.xQ, !1);
        this.element.appendChild(this.ax.element);
        a = TV();
        Q(a, { height: "auto", width: "224px", margin: "12px auto 16px", position: "relative" });
        a.appendChild(this.wn("0"));
        a.appendChild(this.wn("1"));
        a.appendChild(this.wn("2"));
        a.appendChild(this.wn("3"));
        a.appendChild(this.wn("4", !0));
        this.element.appendChild(a);
    }
    q(XV, w);
    XV.prototype.wn = function (a, b) {
        var c = this;
        b = void 0 === b ? !1 : b;
        var d = document.createElement("button");
        d.type = "button";
        O(d, "sentimentOption");
        O(d, YV(a));
        Q(d, {
            height: "24px",
            width: "24px",
            padding: "4px",
            boxSizing: "content-box",
            backgroundPosition: "center center",
            backgroundRepeat: "no-repeat",
            display: "inline-block",
            backgroundColor: "transparent",
            border: "none",
            cursor: "pointer",
            marginRight: b ? "0" : "16px",
            verticalAlign: "middle",
        });
        this.mt.g(function (e) {
            e === a ? O(d, "selected") : P(d, "selected");
        });
        d.onclick = function () {
            c.vh(a);
        };
        return d;
    };
    XV.prototype.vh = function (a) {
        this.ax.input.value = a;
        this.mt.h(a);
    };
    XV.prototype.ld = function () {
        return this.ax.input.value;
    };
    XV.prototype.mn = function () {
        this.vh("");
    };
    function ZV(a) {
        w.call(this);
        var b = this;
        this.Z = a;
        this.Md = [];
        this.element = TV();
        for (var c = l(a.dz), d = c.next(); !d.done; d = c.next())
            (d = new Vy("textarea", "comments", d.value, a.required)),
                O(d.input, "feedbackComment"),
                Q(d.input, { width: "306px", resize: "none", minHeight: a.BU + "px", boxSizing: "border-box", marginBottom: "8px" }),
                (d.input.maxLength = 5e3),
                O(d.error, "error"),
                (d.error.style.marginBottom = "12px"),
                v("keyup", d.input, a.onChange),
                v("touchend", d.input, a.onChange),
                v("paste", d.input, a.onChange),
                v("cut", d.input, a.onChange),
                this.element.appendChild(d.element),
                this.Md.push(d);
        for (a = { Rj: 0 }; a.Rj < this.Md.length; a = { Rj: a.Rj }, a.Rj++)
            v(
                "keydown",
                this.Md[a.Rj].input,
                Dd(
                    (function (e) {
                        return function () {
                            return e.Rj + 1 < b.Md.length ? b.Md[e.Rj + 1].input : void 0;
                        };
                    })(a),
                    (function (e) {
                        return function () {
                            return 0 < e.Rj ? b.Md[e.Rj - 1].input : void 0;
                        };
                    })(a)
                )
            );
    }
    q(ZV, w);
    k = ZV.prototype;
    k.dz = function () {
        return this.Z.dz;
    };
    k.values = function () {
        return this.Md.map(function (a) {
            return a.input.value;
        });
    };
    k.clear = function () {
        for (var a = l(this.Md), b = a.next(); !b.done; b = a.next()) b.value.input.value = "";
    };
    k.focus = function () {
        this.Md[0].input.focus();
    };
    k.blur = function () {
        this.Md.forEach(function (a) {
            return a.input.blur();
        });
    };
    function $V(a) {
        return a.Md[a.Md.length - 1].input;
    }
    k.ar = function (a, b) {
        (0 > b || b >= this.Md.length) && r("Feedback comments error index out of range", "feedbackFormComponents.ts", "ui");
        0 < a.length && this.Md[b].ar(a);
    };
    k.qw = function () {
        this.Md.forEach(function (a) {
            return a.Wi();
        });
    };
    function aW(a) {
        return a.Md.some(function (b) {
            return "" !== b.input.value.trim();
        });
    }
    function bW(a, b) {
        w.call(this, "div", { control: a });
        this.canvas = b;
    }
    q(bW, w);
    bW.prototype.initData = function (a) {
        var b = this;
        this.element = document.createElement("div");
        O(this.element, "screenshot");
        this.df = document.createElement("button");
        this.df.type = "button";
        O(this.df, "editToggle");
        this.Nw = new Image();
        this.Nw.src = "https://static-assets.highwebmedia.com/images/feedback/select.svg";
        this.df.appendChild(this.Nw);
        this.BC = document.createElement("div");
        this.BC.textContent = Em;
        this.df.appendChild(this.BC);
        v("click", this.df, function () {
            b.canvas.show();
        });
        v("mouseenter", this.df, function () {
            b.Nw.src = "https://static-assets.highwebmedia.com/images/feedback/select_active.svg";
        });
        v("mouseleave", this.df, function () {
            b.Nw.src = "https://static-assets.highwebmedia.com/images/feedback/select.svg";
        });
        this.element.appendChild(this.df);
        this.rb = document.createElement("button");
        this.rb.type = "button";
        this.rb.onclick = function () {
            cW(a.control);
        };
        this.element.appendChild(this.rb);
    };
    bW.prototype.ia = function () {
        this.element.style.width = "100%";
        this.element.style.minHeight = "140px";
        this.element.style.maxHeight = "340px";
        this.element.style.position = "relative";
        this.element.style.backgroundSize = "contain";
        this.element.style.backgroundRepeat = "no-repeat";
        this.element.style.backgroundPosition = "center";
        this.element.style.justifyContent = "center";
        this.element.style.alignItems = "center";
        this.element.style.display = "none";
        this.df.style.width = "75%";
        this.df.style.height = "100px";
        this.df.style.boxShadow = "0px 4px 16px rgba(0, 0, 0, 0.3)";
        this.df.style.borderRadius = "4px";
        this.df.style.textAlign = "center";
        this.df.style.cursor = "pointer";
        this.df.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        this.BC.style.width = "100%";
        Q(this.rb, {
            position: "absolute",
            right: "10px",
            top: "10px",
            height: "24px",
            width: "24px",
            padding: "4px",
            background: "transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/feedback/remove-screenshot.svg) no-repeat center center",
            border: "none",
            cursor: "pointer",
        });
    };
    function dW(a, b) {
        w.call(this, "div", { canvas: b });
        this.Jt = a;
        this.canvas = b;
        this.KD = !1;
    }
    q(dW, w);
    dW.prototype.initData = function (a) {
        var b = this;
        this.element = TV();
        this.button = document.createElement("button");
        this.button.type = "button";
        this.button.textContent = Bm;
        v("click", this.button, function (c) {
            c.preventDefault();
            eW(b);
        });
        this.element.appendChild(this.button);
        this.Ba = new bW(this, a.canvas);
        this.G(this.Ba, this.element);
        this.info = document.createElement("div");
        this.info.style.display = "none";
        this.element.appendChild(this.info);
        this.error = document.createElement("span");
        this.element.appendChild(this.error);
    };
    dW.prototype.ia = function () {
        this.element.style.width = "306px";
        this.element.style.textAlign = "center";
        this.element.style.marginBottom = "8px";
        O(this.element, "screenShotControl");
        O(this.button, "sscButton");
        Q(this.button, { fontFamily: "UbuntuRegular, Arial, Helvetica, sans-serif", border: "none", boxSizing: "border-box", display: "block", cursor: "pointer", textDecoration: "underline", padding: "0", marginBottom: "16px" });
        O(this.error, "error");
        O(this.info, "info");
        this.info.style.margin = "8px 0 10px";
    };
    function eW(a) {
        if (fW(a.canvas) && (cW(a), gW(a.canvas), (a.error.textContent = ""), void 0 !== a.canvas.Ba)) {
            var b = a.canvas.Ba.getContext("2d");
            if (null !== b) {
                a.KD = !0;
                a.Jt.B();
                var c = !1,
                    d = document.createElement("video");
                d.style.display = "none";
                a.canvas.element.appendChild(d);
                a.canvas
                    .getDisplayMedia()
                    .then(function (e) {
                        d.srcObject = e;
                        a.eV = e;
                        d.play();
                        v(
                            "canplay",
                            d,
                            function () {
                                c ||
                                    ((c = !0),
                                    window.setTimeout(function () {
                                        var f = window.innerWidth,
                                            g = window.innerHeight,
                                            h = d.videoWidth / d.videoHeight;
                                        g * h < f ? (f = g * h) : (g = f / h);
                                        hW(a.canvas, f, g);
                                        b.drawImage(d, 0, 0, f, g);
                                        a.Ba.element.style.backgroundImage = 'url("' + b.canvas.toDataURL("image/png") + '")';
                                        a.Ba.element.style.height = (g / f) * 306 + "px";
                                        a.Ba.element.style.display = "flex";
                                        a.info.style.display = "block";
                                        a.button.style.display = "none";
                                        d.pause();
                                        a.eV.getTracks().forEach(function (m) {
                                            m.stop();
                                        });
                                        a.canvas.element.removeChild(d);
                                        a.Jt.show();
                                        window.setTimeout(function () {
                                            a.KD = !1;
                                        }, 1e3);
                                    }, 250));
                            },
                            !1
                        );
                    })
                    .catch(function (e) {
                        a.Jt.show();
                        a.error.textContent = "NotAllowedError" === e.name ? Im : Jm;
                        a.canvas.element.removeChild(d);
                        cW(a);
                    });
            }
        }
    }
    function cW(a) {
        fW(a.canvas) && ((a.Ba.element.style.backgroundImage = ""), (a.Ba.element.style.display = "none"), (a.button.textContent = Bm), (a.info.style.display = "none"), (a.button.style.display = "block"), iW(a.canvas), a.canvas.B());
    }
    function jW(a) {
        w.call(this, "div", { canvas: a });
        this.canvas = a;
        O(this.element, "drawControls");
    }
    q(jW, w);
    jW.prototype.initData = function (a) {
        var b = this;
        this.element = TV();
        this.element.tabIndex = -1;
        this.Mw = document.createElement("div");
        this.Mw.style.background = "url(https://static-assets.highwebmedia.com/images/feedback/drag.svg) no-repeat center";
        this.element.appendChild(this.Mw);
        this.ci = document.createElement("button");
        this.ci.type = "button";
        O(this.ci, "highlight");
        this.vD = new Image();
        this.vD.src = "https://static-assets.highwebmedia.com/images/feedback/highlight_issue.svg";
        this.ci.appendChild(this.vD);
        this.wD = document.createElement("span");
        this.wD.textContent = Gm;
        this.ci.appendChild(this.wD);
        v("click", this.ci, function () {
            kW(b.canvas);
        });
        this.element.appendChild(this.ci);
        this.B = document.createElement("button");
        this.B.type = "button";
        this.qD = document.createElement("div");
        this.B.appendChild(this.qD);
        this.sD = document.createElement("span");
        this.sD.textContent = Hm;
        this.B.appendChild(this.sD);
        O(this.B, "highlight");
        v("click", this.B, function () {
            var c = b.canvas;
            lW(c);
            mW(c);
            if (void 0 !== c.Ab) {
                var d = c.Ab.getContext("2d");
                null !== d && (O(c.controls.B, "active"), (d.globalAlpha = 1), (d.strokeStyle = "rgb(0, 0, 0)"), (d.lineWidth = 5), (c.fillRect = !0), nW(c));
            }
        });
        this.element.appendChild(this.B);
        this.oR = document.createElement("hr");
        this.element.appendChild(this.oR);
        this.done = document.createElement("a");
        O(this.done, "done");
        this.done.style.textDecoration = "none";
        v("click", this.done, function (c) {
            c.preventDefault();
            oW(b);
            b.canvas.B();
        });
        this.element.appendChild(this.done);
        Py(this.element, {}, [this.Mw]);
        v("keydown", a.canvas.element, function (c) {
            c.stopPropagation();
            27 === c.keyCode && "block" === b.element.style.display && (c.stopImmediatePropagation(), oW(b), b.canvas.B());
        });
    };
    function oW(a) {
        void 0 !== a.canvas.Ba && void 0 !== a.Ba && (a.Ba.element.style.backgroundImage = 'url("' + a.canvas.Ba.toDataURL("image/png") + '")');
    }
    jW.prototype.ia = function () {
        Q(this.element, {
            borderRadius: "4px",
            padding: "10px 15px 5px 15px",
            position: "fixed",
            zIndex: 2010,
            textAlign: "right",
            width: "115px",
            height: "101px",
            fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif",
            userSelect: "none",
            boxShadow: "10px 10px 25px -5px rgba(0,0,0,0.75)",
        });
        Q(this.Mw, { width: "20px", height: "10px", position: "absolute", right: "0", top: "5px" });
        O(this.ci, "highlight");
        Q(this.ci, {
            border: "0",
            display: "inline-block",
            padding: "5px",
            position: "relative",
            margin: "7px 0 0 0",
            left: "-15px",
            width: "145px",
            textAlign: "left",
            cursor: "pointer",
            fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif",
        });
        Q(this.vD, { width: "23px", verticalAlign: "middle", marginRight: "10px" });
        this.wD.style.verticalAlign = "middle";
        O(this.B, "highlight");
        Q(this.B, { border: "0", display: "inline-block", padding: "5px", position: "relative", margin: "0", left: "-15px", width: "145px", textAlign: "left", cursor: "pointer", fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif" });
        O(this.qD, "hideImage");
        Q(this.qD, { width: "20px", verticalAlign: "middle", marginRight: "10px", height: "20px", display: "inline-block" });
        this.sD.style.verticalAlign = "middle";
        Q(this.done, { padding: "4px", cursor: "pointer", textAlign: "right" });
        this.done.textContent = Pm;
    };
    function pW() {
        w.call(this);
        this.fillRect = !1;
        this.qq = navigator.mediaDevices;
        if (void 0 === this.qq || void 0 === this.qq.getDisplayMedia) this.qq = void 0;
        void 0 === document.createElement("canvas").toBlob && (this.qq = void 0);
        this.controls = new jW(this);
        this.G(this.controls, this.element);
    }
    q(pW, w);
    k = pW.prototype;
    k.initData = function () {
        var a = this;
        this.element = TV();
        this.Zp = TV(this.element);
        this.Zp.innerHTML = Fm + ' (<a href="#" onclick="this.parentNode.style.display=\'none\';">' + ti + "</a>)";
        v("click", this.Zp, function () {
            var b;
            null === (b = a.Ab) || void 0 === b ? void 0 : b.focus();
        });
        this.Zp.style.userSelect = "none";
    };
    k.ia = function () {
        O(this.element, "canvas");
        Q(this.element, { display: "none", position: "absolute", height: "100%", width: "100%" });
        O(this.Zp, "infoToolTip");
        Q(this.Zp, {
            position: "fixed",
            backgroundColor: "#FFFFD3",
            borderWidth: "1px",
            borderStyle: "solid",
            boxSizing: "border-box",
            zIndex: 2020,
            top: "100px",
            left: "0",
            right: "0",
            margin: "0 auto",
            padding: "12px",
            fontWeight: "bold",
            width: "500px",
            textAlign: "center",
            fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif",
            fontSize: "1.3em",
        });
    };
    function fW(a) {
        return void 0 !== a.qq && !pb();
    }
    k.getDisplayMedia = function () {
        if (!fW(this)) throw new ReferenceError("Display media not supported by browser");
        return this.qq.getDisplayMedia({ video: { iW: "browser", cursor: !1 }, audio: !1 });
    };
    function gW(a) {
        iW(a);
        a.Ba = document.createElement("canvas");
        Q(a.Ba, { zIndex: 2e3, top: "50%", left: "50%", transform: "translate(-50%, -50%)", margin: "0px auto", position: "fixed" });
        a.B();
        a.element.appendChild(a.Ba);
    }
    function iW(a) {
        qW(a);
        void 0 !== a.Ba && (a.element.removeChild(a.Ba), (a.Ba = void 0));
    }
    function hW(a, b, c) {
        void 0 !== a.Ba && ((a.Ba.width = b), (a.Ba.height = c), (a.Ba.style.width = b + "px"), (a.Ba.style.height = c + "px"));
    }
    function mW(a) {
        void 0 !== a.Ba && (void 0 !== a.Ab && (a.element.removeChild(a.Ab), (a.Ab = void 0)), (a.Ab = a.Ba.cloneNode()), (a.Ab.style.zIndex = "2001"), (a.Ab.tabIndex = 0), a.element.appendChild(a.Ab), rW(a));
    }
    function qW(a) {
        void 0 !== a.Ab && (a.element.removeChild(a.Ab), (a.Ab = void 0));
    }
    k.B = function () {
        this.element.style.display = "none";
        qW(this);
        lW(this);
        window.top !== window && null !== window.top && (window.top.document.body.style.display = "");
        document.body.style.overflow = "";
        SV.h(void 0);
    };
    k.show = function () {
        this.element.style.display = "block";
        this.controls.element.style.left = "75px";
        this.controls.element.style.bottom = "30px";
        this.Zp.style.display = "block";
        window.top !== window && null !== window.top && (window.top.document.body.style.display = "none");
        document.body.style.overflow = "hidden";
        mW(this);
        kW(this);
        void 0 !== this.Ab && this.Ab.focus();
        RV.h(void 0);
    };
    function rW(a) {
        if (void 0 !== a.Ab) {
            var b = a.Ab.getContext("2d");
            if (null !== b) {
                var c = a.Ba,
                    d = a.Ab;
                if (void 0 !== c && void 0 !== d) {
                    var e = d.getContext("2d");
                    if (null !== e) {
                        var f = e.globalAlpha;
                        e.globalAlpha = 1;
                        e.clearRect(0, 0, d.width, d.height);
                        e.drawImage(c, 0, 0);
                        e.globalAlpha = f;
                    }
                }
                c = b.globalAlpha;
                d = b.strokeStyle;
                b.globalAlpha = 0.1;
                b.strokeStyle = "rgb(0, 0, 0)";
                b.fillRect(0, 0, a.Ab.width, a.Ab.height);
                b.globalAlpha = c;
                b.strokeStyle = d;
            }
        }
    }
    function lW(a) {
        a.controls.B.style.backgroundColor = "transparent";
        a.controls.B.classList.toggle("active", !1);
        a.controls.ci.style.backgroundColor = "transparent";
        a.controls.ci.classList.toggle("active", !1);
        void 0 !== a.Ab && (void 0 !== a.ul && (Bb("mousedown", a.Ab, a.ul.yC), Bb("mouseup", window, a.ul.YG), Bb("mousemove", window, a.ul.move), (a.ul = void 0)), (a.Ab.style.cursor = "default"));
    }
    function kW(a) {
        lW(a);
        mW(a);
        if (void 0 !== a.Ab) {
            var b = a.Ab.getContext("2d");
            null !== b && (O(a.controls.ci, "active"), (b.globalAlpha = 0.8), (b.strokeStyle = "rgb(249, 185, 144)"), (b.lineWidth = 5), (a.fillRect = !1), nW(a));
        }
    }
    function nW(a) {
        if (void 0 !== a.Ab) {
            a.Ab.style.cursor = "crosshair";
            var b = a.Ab.getContext("2d");
            if (null !== b) {
                var c = 0,
                    d = 0,
                    e = 0,
                    f = 0,
                    g = 0,
                    h = 0,
                    m = !1,
                    n = function () {
                        h = g = d = c = 0;
                        m = !1;
                    };
                a.ul = {
                    yC: function (p) {
                        m && (sW(a, c, d, g, h, b), n());
                        var u = a.Ab.getBoundingClientRect();
                        c = p.clientX - u.left;
                        d = p.clientY - u.top;
                        m = !0;
                        b.canvas.style.cursor = "crosshair";
                    },
                    YG: function () {
                        m && (sW(a, c, d, g, h, b), n());
                    },
                    move: function (p) {
                        if (m) {
                            var u = a.Ab.getBoundingClientRect();
                            e = p.clientX - u.left;
                            f = p.clientY - u.top;
                            rW(a);
                            g = e - c;
                            h = f - d;
                            p = c;
                            u = d;
                            var x = g,
                                D = h;
                            b.beginPath();
                            b.rect(p, u, x, D);
                            a.fillRect ? b.fill() : b.stroke();
                        }
                    },
                };
                v("mousedown", a.Ab, a.ul.yC);
                v("mouseup", window, a.ul.YG);
                v("mousemove", window, a.ul.move);
            }
        }
    }
    function sW(a, b, c, d, e, f) {
        if (void 0 !== a.Ba) {
            a.Ba.style.cursor = "crosshair";
            var g = a.Ba.getContext("2d");
            null !== g && ((g.globalAlpha = f.globalAlpha), (g.strokeStyle = f.strokeStyle), (g.lineWidth = f.lineWidth), g.beginPath(), g.rect(b, c, d, e), a.fillRect ? g.fill() : g.stroke());
        }
    }
    function tW(a) {
        w.call(this, "div", a);
        var b = this;
        this.errors = [];
        fW(this.canvas) && (RL(this), this.errors.push(this.Ba.error));
        this.errors.push(this.Nn);
        v("submit", this.form, function (c) {
            c.preventDefault();
            b.submit();
        });
    }
    q(tW, w);
    k = tW.prototype;
    k.ia = function (a) {
        this.element = TV();
        this.form = document.createElement("form");
        this.form.action = "/feedback/submit/";
        this.form.method = "POST";
        this.element.appendChild(this.form);
        this.Nn = document.createElement("p");
        this.Nn.style.color = "red";
        this.Nn.style.marginBottom = "8px";
        this.form.appendChild(this.Nn);
        this.Ko = this.wn();
        this.form.appendChild(this.Ko.element);
        this.Kf = this.hQ();
        this.form.appendChild(this.Kf.element);
        this.canvas = a.canvas;
        fW(this.canvas) && ((this.Ba = new dW(a.Jt, this.canvas)), this.G(this.Ba, this.form));
        this.Pt = document.createElement("p");
        O(this.Pt, "privacyNotice");
        this.Pt.style.fontSize = "10.5px";
        this.Pt.style.lineHeight = "14px";
        this.Pt.textContent = zm.replace("%SITE_NAME%", xe.Rz);
        this.form.appendChild(this.Pt);
        this.ks = document.createElement("input");
        this.ks.type = "hidden";
        this.ks.name = "csrfmiddlewaretoken";
        this.ks.value = ac("csrftoken");
        this.form.appendChild(this.ks);
        this.url = document.createElement("input");
        this.url.type = "hidden";
        this.url.name = "url";
        this.url.value = document.location.href.substr(0, 255);
        this.form.appendChild(this.url);
        this.source = document.createElement("input");
        this.source.type = "hidden";
        this.source.name = "source";
        this.source.value = "";
        this.form.appendChild(this.source);
        this.yh = new WV();
        this.G(this.yh, this.form);
    };
    k.wn = function () {
        return new XV();
    };
    k.hQ = function () {
        var a = this;
        return new ZV({
            dz: [ym],
            onChange: function () {
                window.setTimeout(function () {
                    aW(a.Kf) ? a.yh.enable() : a.yh.disable();
                }, 200);
            },
            required: !0,
            BU: 72,
        });
    };
    function uW(a) {
        return fW(a.canvas) && "none" !== a.Ba.button.style.display;
    }
    function RL(a) {
        uW(a) && (a.Ba.info.textContent = "footer" === a.source.value ? Dm : Cm);
    }
    k.qw = function () {
        this.errors.forEach(function (a) {
            a.textContent = "";
        });
        this.Kf.qw();
    };
    k.WJ = function () {
        Kb(this);
        this.element.appendChild(this.form);
        this.Kf.focus();
    };
    k.submit = function () {
        var a = this;
        this.qw();
        var b = new FormData();
        b.append("sentiment", this.Ko.ax.input.value);
        this.Kf.dz().forEach(function (c) {
            b.append("prompts", c);
        });
        this.Kf.values().forEach(function (c) {
            b.append("responses", c);
        });
        b.append("url", document.location.href.substr(0, 255));
        b.append("source", this.source.value);
        b.append("csrfmiddlewaretoken", ac("csrftoken"));
        void 0 !== this.canvas.Ba
            ? this.canvas.Ba.toBlob(function (c) {
                  null !== c && b.append("screenshot", c, "screenshot.png");
                  vW(a, b);
              })
            : vW(this, b);
    };
    function vW(a, b) {
        a.yh.disable();
        E(a.form.action, b)
            .then(function (c) {
                c = c.getResponseHeader("content-type");
                null !== c && c.includes("text/html")
                    ? ((a.Nn.textContent = Om), a.yh.enable())
                    : (a.WJ(), a.qw(), a.Kf.clear(), a.Ko.mn(), a.yh.disable(), a.form.reset(), fW(a.canvas) && cW(a.Ba), a.element.removeChild(a.form), (c = document.createElement("p")), (c.textContent = Lm), a.element.appendChild(c));
            })
            .catch(function (c) {
                if (429 === c.xhr.status) a.Nn.textContent = Nm;
                else
                    try {
                        var d = JSON.parse(c.xhr.response).responses;
                        void 0 !== d &&
                            d.forEach(function (e, f) {
                                return a.Kf.ar(e, f);
                            });
                    } catch (e) {
                        a.Nn.textContent = Mm;
                    }
                a.yh.enable();
            });
    }
    function QL() {
        Yr.call(this, {
            jm: function () {
                a.jm();
            },
            ph: function () {
                a.ph();
            },
            Il: !0,
        });
        var a = this;
        this.isVisible = !1;
        this.iu = this.ZE = !0;
        this.element.classList.add("block_CB1_chat_focus");
        O(this.S, "overlayOpacity");
        O(this.element, "userFeedbackForm");
        O(this.element, "defaultColor");
        RV.g(function () {
            a.element.style.display = "none";
        });
        SV.g(function () {
            a.element.style.display = "block";
        });
        Iu.g(function () {
            a.B();
        });
    }
    var PL;
    q(QL, Yr);
    k = QL.prototype;
    k.initData = function () {
        function a() {
            return b.form.yh.submit.disabled ? b.close.control : b.form.yh.submit;
        }
        var b = this;
        this.canvas = new pW();
        fW(this.canvas) && document.body.appendChild(this.canvas.element);
        this.HD = TV(this.element);
        this.close = new UV();
        v("click", this.close.control, function () {
            b.B();
        });
        this.G(this.close, this.HD);
        this.qa = new VV();
        this.G(this.qa, this.HD);
        this.form = this.kQ();
        fW(this.canvas) && (this.canvas.controls.Ba = this.form.Ba.Ba);
        this.G(this.form, this.HD);
        this.element.querySelectorAll(".sentimentOption").forEach(function (c) {
            v("keydown", c, Dd(b.form.Kf.Md[0].input, b.close.control));
        });
        v(
            "keydown",
            this.form.Kf.element,
            Dd(function () {
                return uW(b.form) ? b.form.Ba.button : a();
            }, this.close.control)
        );
        uW(this.form) && v("keydown", this.form.Ba.button, Dd(a, $V(this.form.Kf)));
        v(
            "keydown",
            this.form.yh.submit,
            Dd(this.close.control, function () {
                return uW(b.form) ? b.form.Ba.button : $V(b.form.Kf);
            })
        );
        v(
            "keydown",
            this.close.control,
            Dd(this.form.Kf.Md[0].input, function () {
                return b.form.yh.submit.disabled ? (uW(b.form) ? b.form.Ba.button : $V(b.form.Kf)) : b.form.yh.submit;
            })
        );
    };
    k.ia = function () {
        var a = this;
        Q(this.element, {
            position: "fixed",
            top: "150px",
            fontSize: "12px",
            left: "50%",
            marginLeft: "-157px",
            width: "310px",
            height: "auto",
            border: "4px",
            borderRadius: "4px",
            padding: "15px",
            fontFamily: "UbuntuRegular, Helvetica, Arial, sans-serif",
        });
        fW(this.canvas) &&
            v("resize", window, function () {
                a.form.Ba.KD || void 0 === a.canvas.Ba || (cW(a.form.Ba), (a.form.Ba.error.textContent = Km));
            });
    };
    k.kQ = function () {
        return new tW({ Jt: this, canvas: this.canvas });
    };
    k.jm = function () {
        this.form.ks.value = ac("csrftoken");
        this.form.url.value = document.location.href.substr(0, 255);
        this.element.style.display = "";
        this.D();
        this.isVisible = !0;
        v("keydown", this.element, wW);
        v("keydown", document.body, xW);
        this.form.WJ();
    };
    k.ph = function () {
        var a = this.isVisible;
        this.element.style.display = "none";
        this.isVisible = !1;
        a && (Bb("keydown", this.element, wW), Bb("keydown", document.body, xW));
        try {
            window.dispatchEvent(new Event("resize"));
        } catch (b) {
            -1 !== navigator.userAgent.indexOf("MSIE") || 0 < navigator.appVersion.indexOf("Trident/")
                ? ((a = document.createEvent("UIEvents")), a.initUIEvent("resize", !0, !1, window, 0), window.dispatchEvent(a))
                : r("Could not fire resize event", "userFeedbackModal.ts", "ui");
        }
        this.canvas.B();
    };
    function wW(a) {
        27 !== a.keyCode && a.stopImmediatePropagation();
    }
    function xW(a) {
        32 === a.keyCode && a.target === document.body && a.preventDefault();
    }
    function YV(a) {
        switch (a) {
            case "0":
                return "smileyInTrouble";
            case "1":
                return "smileyUnhappy";
            case "2":
                return "smileyIndifferent";
            case "3":
                return "smileySmirk";
            case "4":
                return "smileyInLove";
        }
    }
    var yW = new Map([
        [0, { UC: "force_sentiment", NB: "show_sentiment_survey", endpoint: "feedback/sentiment/submit/", delay: 3e5 }],
        [1, { UC: "force_smcSurvey", NB: "show_smc_sentiment_survey", endpoint: "feedback/sentiment/smc/submit/", delay: 3e5 }],
        [2, { UC: "force_bcastSurvey", NB: "show_broadcaster_sentiment_survey", endpoint: "feedback/sentiment/broadcaster/submit/", delay: 5e3 }],
    ]);
    function zW(a) {
        a = new AW(a);
        document.body.appendChild(a.element);
        a.show();
    }
    function BW() {
        var a,
            b,
            c = null !== (b = null === (a = window.location.pathname.match(/\/([^\/]+)\/?$/)) || void 0 === a ? void 0 : a[1]) && void 0 !== b ? b : "";
        b = yW.get(0);
        a = b.UC;
        var d = b.NB,
            e = b.endpoint;
        b = b.delay;
        var f = Bc(window.location.search)[a];
        if ("1" === f) zW(c);
        else {
            var g = ["unknown", "offline", "notconnected", "passwordprotected", "hidden"],
                h;
            G.g(function (n) {
                h = n.l;
            });
            var m = window.setTimeout(function () {
                if (void 0 !== h && -1 === g.indexOf(h.status)) {
                    var n = h.j();
                    "2" === f
                        ? zW(n)
                        : C(e)
                              .then(function (p) {
                                  M(new H(p.responseText), d) && zW(n);
                              })
                              .catch(function () {});
                }
            }, b);
            Nr.once(function () {
                clearTimeout(m);
            });
        }
    }
    function AW(a, b) {
        w.call(this);
        var c = this;
        this.j = a;
        this.oL = b;
        this.element = CW(this);
        this.AG = this.lQ();
        Nr.once(function () {
            c.close();
        });
        !0 === this.oL
            ? ((this.zI = "FeedbackSMCSentimentClosed"),
              (this.PM = "FeedbackSMCSentimentPopup"),
              (this.jJ = "FeedbackSMCSentimentDescribed"),
              (this.source = "smc_sentiment_survey"),
              (this.pO = "feedback/sentiment/smc/submit/"),
              (this.fI = "feedback/sentiment/smc/cancel/"),
              (this.WK = 25),
              (this.DI = 15))
            : ((this.zI = "FeedbackSentimentClosed"),
              (this.PM = "FeedbackSentimentPopup"),
              (this.jJ = "FeedbackSentimentDescribed"),
              (this.source = "sentiment_survey"),
              (this.pO = "feedback/sentiment/submit/"),
              (this.fI = "feedback/sentiment/cancel/"),
              (this.WK = 15),
              (this.DI = 7));
    }
    q(AW, w);
    function CW(a) {
        return V(
            "div",
            { style: { position: "fixed", width: "288px", bottom: "8px", right: "20px", borderRadius: "4px", overflow: "hidden", zIndex: 1004 }, colorClass: "cornerSurveyWrapper" },
            V(
                "div",
                {
                    style: { borderRadius: "4px", borderStyle: "solid", borderWidth: "4px 1px 1px 1px", paddingLeft: "16px" },
                    colorClass: "cornerSurveyContainer",
                    ref: function (b) {
                        a.Me = b;
                    },
                },
                V("img", {
                    style: { position: "absolute", width: "14px", height: "14px", top: "14px", right: "14px", padding: "2px", cursor: "pointer", zIndex: 1 },
                    src: "https://static-assets.highwebmedia.com/tsdefaultassets/popup_survey/close.svg",
                    onClick: function () {
                        a.close();
                        F(a.zI);
                    },
                }),
                V(
                    "div",
                    {
                        style: { margin: "-4px -17px" },
                        colorClass: "timerContainer",
                        ref: function (b) {
                            a.AO = b;
                        },
                    },
                    V("div", {
                        style: { position: "relative", width: "288px", height: "4px" },
                        colorClass: "timer",
                        ref: function (b) {
                            a.bl = b;
                        },
                    })
                )
            )
        );
    }
    k = AW.prototype;
    k.show = function () {
        this.Me.appendChild(this.AG);
        DW(this, this.WK, !0);
        F(this.PM);
    };
    k.close = function () {
        this.Me.contains(this.AG) && E(this.fI, {}).catch(function () {});
        null !== this.element.parentElement && this.element.parentElement.removeChild(this.element);
    };
    k.submit = function (a) {
        this.ET = a;
        E(this.pO, { rating: a, room_user: this.j, url: window.location.href }).catch(function () {});
        this.Me.removeChild(this.AG);
        this.Me.appendChild(this.iQ());
        DW(this, this.DI, !1);
    };
    k.lQ = function () {
        var a = { position: "relative", paddingTop: "16px", fontSize: "14px", width: "245px" };
        return V(
            "div",
            { colorClass: "survey" },
            !0 === this.oL ? V("div", { style: a, colorClass: "title" }, sp) : V("div", { style: a, colorClass: "title" }, rp),
            V("div", { style: { position: "relative", padding: "16px 0px 11px 0px" } }, this.fs("0"), this.fs("1"), this.fs("2"), this.fs("3"), this.fs("4"))
        );
    };
    k.fs = function (a) {
        return EW(this, a);
    };
    function EW(a, b) {
        return V(
            "div",
            {
                style: { position: "relative", display: "inline-block", width: "40px", height: "40px", boxSizing: "border-box", marginRight: "8px", borderRadius: "4px", borderStyle: "solid", borderWidth: "1px", cursor: "pointer" },
                colorClass: "emoteContainer",
                onClick: function () {
                    a.submit(b);
                },
            },
            V("div", { style: { position: "relative", width: "24px", height: "24px", top: "7px", left: "7px" }, colorClass: YV(b) })
        );
    }
    k.iQ = function () {
        return this.jQ();
    };
    k.jQ = function () {
        var a = this;
        return V(
            "div",
            { colorClass: "confirmation" },
            V("div", { style: { position: "relative", paddingTop: "16px", fontSize: "12px" }, colorClass: "title" }, tp),
            V(
                "a",
                {
                    href: "#",
                    style: { display: "block", paddingBottom: "12px", fontSize: "12px" },
                    colorClass: "feedbackLink",
                    onClick: function () {
                        a.close();
                        nE.h({ source: a.source, Ko: a.ET });
                        F(a.jJ);
                    },
                },
                up
            )
        );
    };
    function DW(a, b, c) {
        a.bl.classList.remove("timerBar25s");
        a.bl.classList.remove("timerBar15s");
        a.bl.classList.remove("timerBar7s");
        a.bl.classList.add("timerBar" + b + "s");
        c ? a.element.classList.add("pauseOnHover") : a.element.classList.remove("pauseOnHover");
        a.AO.removeChild(a.bl);
        a.bl = a.bl.cloneNode();
        a.AO.appendChild(a.bl);
        qb() || ib()
            ? window.setTimeout(function () {
                  a.close();
              }, 1e3 * b + 200)
            : v("animationend", a.bl, function () {
                  window.setTimeout(function () {
                      a.close();
                  }, 200);
              });
    }
    function FW() {
        var a = this;
        this.Yu = new Map();
        this.supported = !0;
        this.supported = Xa() && (Va() || Sa());
        this.Bc();
        v("beforeunload", window, function () {
            a.close();
        });
        xu.g(function (b) {
            b && kb() && ((b = ob()), void 0 !== b && 13 > b ? a.Bc() : void 0 !== a.context && a.context.resume());
        });
    }
    FW.prototype.Bc = function () {
        var a = this;
        if (this.supported)
            if (Va()) {
                Ma("Using audio context");
                this.close();
                GW(this, !1);
                var b = function () {
                    if (void 0 !== a.context) {
                        var c = a.context.createBufferSource();
                        c.buffer = a.context.createBuffer(1, 1, 22050);
                        c.connect(a.context.destination);
                        c.start(0);
                    }
                    Bb("click", document, b);
                    Bb("touchstart", document, b);
                    Bb("touchend", document, b);
                };
                v("click", document, b);
                v("touchstart", document, b);
                v("touchend", document, b);
            } else Ma("Using audio elements");
        else t("Sounds are not supported.", "audioHolder.ts", "common");
    };
    FW.prototype.close = function () {
        void 0 !== this.context && ("close" in this.context && this.context.close(), (this.context = void 0));
    };
    function HW(a, b, c) {
        a.Yu.set(b, { ready: !1 });
        if (void 0 !== a.context) {
            var d = new XMLHttpRequest();
            d.open("GET", c, !0);
            d.responseType = "arraybuffer";
            d.onload = function () {
                200 > d.status || 300 <= d.status
                    ? r("Error requesting sound " + b + " " + d.status + " " + d.statusText, "audioHolder.ts", "common")
                    : void 0 === a.context
                    ? a.supported && r("audioHolder loadSound missing context", "audioHolder.ts", "common")
                    : void a.context.decodeAudioData(
                          d.response.slice(0),
                          function (e) {
                              a.Yu.set(b, { ready: !0, buffer: e });
                          },
                          function (e) {
                              r("Error decoding sound " + b + " " + e, "audioHolder.ts", "common");
                          }
                      );
            };
            d.onerror = function () {
                r("Error requesting sound " + b + " (" + new hc(d) + ")", "audioHolder.ts", "common");
            };
            d.send();
        } else Sa() && a.Yu.set(b, { ready: !0, iB: new Audio(c) });
    }
    function IW(a) {
        HW(a, "HugeTip", "https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/huge.mp3");
        HW(a, "LargeTip", "https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/large.mp3");
        HW(a, "MediumTip", "https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/medium.mp3");
        HW(a, "SmallTip", "https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/small.mp3");
        HW(a, "TinyTip", "https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/tiny.mp3");
    }
    FW.prototype.au = function (a, b) {
        if (JW(this, a, b)) {
            var c = this.Yu.get(a);
            if (void 0 !== c)
                if (c.ready)
                    if (void 0 !== c.buffer)
                        if ((GW(this), void 0 === this.context)) this.supported && r("audioHolder playSound missing context", "audioHolder.ts", "common");
                        else {
                            var d = this.context.createBufferSource();
                            d.buffer = c.buffer;
                            c = this.context.createGain();
                            d.connect(c);
                            c.connect(this.context.destination);
                            c.gain.value = b / 3.5 / 100;
                            d.start(0);
                        }
                    else
                        void 0 !== c.iB
                            ? ((c.iB.volume = b / 100),
                              (b = c.iB.play()),
                              void 0 !== b &&
                                  b.catch(function (e) {
                                      r("Error playing sound " + a + " (" + e + ")", "audioHolder.ts", "common");
                                  }))
                            : r("Missing sound buffer or element for " + a, "audioHolder.ts", "common");
                else t("sound " + a + " not ready yet (and may never will be ready)", "audioHolder.ts", "common");
        }
    };
    function GW(a, b) {
        a.supported && void 0 === a.context && ((void 0 === b || b) && t("audioHolder context unexpectedly missing", "audioHolder.ts", "common"), (a.context = "webkitAudioContext" in window ? new webkitAudioContext() : new AudioContext()));
    }
    function JW(a, b, c) {
        return a.supported && 0 !== c ? (100 < c || 0 > c || isNaN(c) ? (r("setSoundVolume: invalid volume " + c, "audioHolder.ts", "common"), !1) : a.Yu.has(b) ? !0 : (r("Unknown sound: " + b, "audioHolder.ts", "common"), !1)) : !1;
    }
    function KW() {
        gB.apply(this, arguments);
    }
    q(KW, gB);
    KW.prototype.uw = function () {
        var a = gB.prototype.uw.call(this);
        a.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        return a;
    };
    function LW(a, b, c) {
        Xu.call(this);
        var d = this;
        this.tr = a;
        this.ce = b;
        this.ZF = c;
        this.cg = "public";
        this.ob = 0;
        this.ug = this.Ux = !1;
        this.rJ = 96;
        this.Om = new y("tipSent");
        this.closed = new y("tipClosed");
        this.isVisible = !1;
        this.element.id = "SplitModeTipCallout";
        O(this.element, "defaultColor");
        this.element.style.display = "none";
        this.element.style.position = "absolute";
        this.element.style.width = "390px";
        this.element.style.height = "auto";
        this.element.style.top = "0";
        this.element.style.borderWidth = "2px";
        this.element.style.borderStyle = "solid";
        this.element.style.borderRadius = "4px";
        this.element.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        this.element.style.fontSize = "12px";
        this.element.style.overflow = "visible";
        v("keydown", this.element, function (e) {
            27 === e.keyCode && d.B();
            9 === e.keyCode &&
                (e.shiftKey
                    ? d.da.hasFocus() && !oB(d.da)
                        ? d.Ca.focus()
                        : document.activeElement === d.Ca
                        ? d.xa.focus()
                        : d.da.hasFocus() || oB(d.da)
                    : d.da.hasFocus() && !pB(d.da)
                    ? d.xa.focus()
                    : document.activeElement === d.xa
                    ? d.Ca.focus()
                    : d.da.hasFocus() || pB(d.da),
                e.preventDefault());
        });
        this.Ti = nr("", "", "74px");
        O(this.Ti, "bottomDivot");
        this.element.appendChild(this.Ti);
        this.lv = mr("", "", "74px");
        O(this.lv, "topDivot");
        this.element.appendChild(this.lv);
        this.$x = or("", "", "30px");
        O(this.$x, "leftDivot");
        this.element.appendChild(this.$x);
        this.S.style.bottom = "";
        a = document.createElement("div");
        O(a, "titleBar");
        a.innerText = Tf;
        a.style.fontSize = "15px";
        a.style.fontFamily = "UbuntuBold, Helvetica, Arial, sans-serif";
        a.style.padding = "6px";
        this.element.appendChild(a);
        a = document.createElement("div");
        a.style.display = "inline-block";
        a.style.width = "100%";
        b = document.createElement("span");
        b.innerText = Rh;
        b.style.fontWeight = "bold";
        b.style.display = "inline-block";
        b.style.padding = "6px";
        a.appendChild(b);
        this.De = document.createElement("span");
        O(this.De, "tokenBalance");
        this.De.style.display = "inline-block";
        this.De.style.fontWeight = "bold";
        this.De.style.padding = "6px 6px 6px 0";
        a.appendChild(this.De);
        b = document.createElement("a");
        O(b, "purchaseTokens");
        b.innerText = eg;
        b.href = "/tipping/purchase_tokens/?source=" + A.current.Ub.TOKEN_SOURCE_TIP_CALLOUT;
        b.style.display = "inline-block";
        b.style.fontSize = "11px";
        b.style.marginLeft = "12px";
        b.style.cssFloat = "right";
        b.style.padding = "6px";
        b.onclick = function () {
            uB({ Yy: "embed" === d.tr, source: A.current.Ub.TOKEN_SOURCE_TIP_CALLOUT });
            return !1;
        };
        a.appendChild(b);
        this.element.appendChild(a);
        this.Cc = document.createElement("div");
        O(this.Cc, "warning");
        this.Cc.style.display = "none";
        this.Cc.style.fontWeight = "bold";
        this.Cc.style.padding = "6px";
        this.Cc.style.textAlign = "center";
        this.Cc.style.position = "absolute";
        this.Cc.style.left = "50%";
        a = document.createElement("div");
        a.innerText = Th;
        this.Cc.appendChild(a);
        a = document.createElement("div");
        a.innerText = Uh;
        this.Cc.appendChild(a);
        this.element.appendChild(this.Cc);
        this.uh = document.createElement("form");
        a = document.createElement("label");
        b = document.createElement("span");
        b.innerText = Vh;
        b.style.display = "inline-block";
        b.style.padding = "6px";
        a.appendChild(b);
        this.xa = sB();
        this.xa.value = "25";
        this.xa.min = "1";
        this.xa.style.width = "5em";
        this.xa.style.display = "inline-block";
        this.xa.style.padding = "4px";
        this.xa.style.borderWidth = "1px";
        this.xa.style.borderStyle = "solid";
        this.xa.style.borderRadius = "4px";
        this.xa.onclick = function () {
            d.Mn();
        };
        a.appendChild(this.xa);
        this.uh.appendChild(a);
        this.eg = document.createElement("div");
        this.eg.innerText = Pf;
        this.eg.style.padding = "6px 6px 0 6px";
        this.uh.appendChild(this.eg);
        this.Ng = document.createElement("div");
        this.Ca = document.createElement("textarea");
        O(this.Ca, "tipMessageInput");
        this.Ca.maxLength = 255;
        this.Ca.style.width = "100%";
        this.Ca.style.height = "40px";
        this.Ca.style.resize = "none";
        this.Ca.style.margin = "6px";
        this.Ca.style.padding = "4px";
        this.Ca.style.borderWidth = "1px";
        this.Ca.style.borderStyle = "solid";
        this.Ca.style.borderRadius = "4px";
        this.Ca.style.boxSizing = "border-box";
        this.Ng.appendChild(this.Ca);
        this.uh.appendChild(this.Ng);
        this.eg.onclick = function () {
            d.Ca.select();
        };
        this.tg = document.createElement("div");
        O(this.tg, "warning");
        this.tg.innerText = Wh;
        this.tg.style.display = "none";
        this.tg.style.paddingLeft = "5px";
        a.appendChild(this.tg);
        a = document.createElement("div");
        this.xa.oninput = function () {
            MW(d);
        };
        a.style.textAlign = "right";
        a.style.position = "relative";
        this.Od = document.createElement("div");
        this.Od.innerText = Xh;
        this.Od.style.position = "absolute";
        this.Od.style.display = "none";
        this.Od.style.fontSize = "10px";
        this.Od.style.lineHeight = "1.3em";
        this.Od.style.padding = "6px";
        this.Od.style.textAlign = "left";
        this.Od.style.top = "6px";
        this.Od.style.left = "0px";
        a.appendChild(this.Od);
        this.da = new KW();
        this.G(this.da, a);
        this.uh.appendChild(a);
        this.element.appendChild(this.uh);
        G.g(function (e) {
            d.sx = e.A.sx;
            d.tb = e.A.tb;
            d.J = e.l.j();
            e.l.event.Mc.g(function (f) {
                switch (f.Sa) {
                    case "privatewatching":
                        d.cg = "private";
                        break;
                    default:
                        d.cg = "public";
                }
            });
        });
        WA.g(function (e) {
            d.pv(e.Ua);
        });
        this.D();
        v("submit", this.uh, function (e) {
            e.preventDefault();
            var f = parseInt(d.xa.value);
            d.isVisible &&
                !isNaN(f) &&
                d.da.isEnabled() &&
                (F("SendTipClicked", { amount: f, location: "PMTab" }),
                100 < f && !d.ug
                    ? (lB(d.da, he(f)), (d.ug = !0), d.D())
                    : (d.xa.blur(),
                      (e = d.Ca.value),
                      void 0 !== d.$a && (e = "" === d.Ca.value ? d.$a.value : d.$a.value + " | " + d.Ca.value),
                      ZA({ J: d.J, KG: d.xa.value, message: e, source: d.tr, LG: d.cg, Pm: d.da.Pm, ee: Y() })
                          .then(function (g) {
                              g.success
                                  ? F("SendTipSuccess", { amount: f, location: "PMTab" })
                                  : void 0 !== g.error
                                  ? !0 === g.aO
                                      ? vB("" + g.error, !1, A.current.Ub.TOKEN_SOURCE_LOW_TOKEN_BALANCE)
                                      : R(g.error)
                                  : r("unknown send tip error", "tipCallout.ts", "theatermodelib");
                              NW(d);
                              d.Ca.value = "";
                              void 0 !== g.$e && VA.h({ Ua: g.$e, J: d.J });
                              d.Om.h({ amount: f, success: g.success });
                          })
                          .catch(function (g) {
                              r("Error sending tip. status: " + g, "tipCallout.ts", "theatermodelib");
                              d.Om.h({ amount: f, success: !1 });
                          }),
                      d.B()));
        });
        this.fc.g(function () {
            d.B();
        });
        this.closed.g(function () {
            d.da.xd.B(!0);
        });
    }
    q(LW, Xu);
    k = LW.prototype;
    k.D = function () {
        this.Ng.style.width = Math.max(0, this.element.clientWidth - 12) + "px";
        this.Od.style.maxWidth = Math.max(0, this.element.offsetWidth - this.da.element.offsetWidth - 15) + "px";
        var a = ud(this.ZF);
        this.Ti.style.display = "none";
        this.lv.style.display = "none";
        this.$x.style.display = "none";
        if ("fixed" === this.ce.style.position) (this.$x.style.display = "block"), (this.element.style.top = a.top - 30 + "px"), (this.element.style.left = a.right + 12 + "px");
        else {
            var b = a.left - 70,
                c = Math.max(0, b + this.element.offsetWidth - Uv() + 4);
            0 > b - c && (c += b - c);
            this.element.style.left = b - c + "px";
            pb() || this.element.offsetHeight + a.bottom + 20 > Tv() + document.documentElement.scrollTop
                ? ((this.Ti.style.display = "block"), (this.Ti.style.left = this.rJ + c + "px"), (this.element.style.top = a.top - this.element.offsetHeight - 11 + "px"))
                : ((this.lv.style.display = "block"), (this.lv.style.left = this.rJ + c + "px"), (this.element.style.top = a.bottom + 14 + "px"));
        }
        this.S.style.height = document.documentElement.offsetHeight + "px";
    };
    function MW(a) {
        /^[1-9]\d*$/.test(a.xa.value)
            ? (a.da.enable(), (a.tg.style.display = "none"), 0 < a.ob && parseInt(a.xa.value) > a.ob ? a.Ux || (F("TokenAmountTooHigh"), (a.Ux = !0)) : (a.Ux = !1))
            : (a.da.disable(), (a.tg.style.display = "inline-block"));
        a.ug && NW(a);
    }
    function NW(a) {
        var b = a.da;
        mB(b);
        b.np && !b.Et && ((b.Et = !0), (b.mb.style.borderRadius = "4px 0 0 4px"), (b.ah.style.display = "inline-block"), (b.Kp = [b.mb, b.ah]), b.R());
        a.ug = !1;
    }
    k.show = function (a) {
        var b = this;
        if (!this.tb) R("This broadcaster doesn't accept tips.");
        else if (!Wu('You must be logged in to tip. Click "OK" to login.')) {
            void 0 !== a.amount && ((this.xa.value = a.amount.toString()), MW(this));
            this.Ca.value = void 0 !== a.message ? a.message : "";
            this.Cc.style.display = this.sx ? "block" : "none";
            this.Od.style.display = void 0 !== a.rv && a.rv ? "none" : "block";
            if (mb()) {
                var c = document.createElement("input");
                c.type = "text";
                c.style.opacity = "0";
                c.style.height = "0px";
                this.xa.appendChild(c);
                c.focus();
            }
            qB(this.tr, this.da);
            this.De.innerText = $g + "...";
            XA(this.J)
                .then(function (d) {
                    var e;
                    b.xa.max = d.ob.toString();
                    if (void 0 !== d.$o) {
                        b.eg.innerText = d.$o.label;
                        void 0 !== b.$a && b.Ng.removeChild(b.$a);
                        b.$a = document.createElement("select");
                        O(b.$a, "tipOptionsSelect");
                        b.$a.style.width = "100%";
                        b.$a.style.fontSize = ".8125em";
                        b.$a.style.margin = "6px";
                        b.$a.style.borderWidth = "1px";
                        b.$a.style.borderStyle = "solid";
                        b.$a.style.boxSizing = "border-box";
                        b.Ng.insertBefore(b.$a, b.Ca);
                        var f = document.createElement("option");
                        f.innerText = "-- " + Zh + " --";
                        b.$a.appendChild(f);
                        d = l(d.$o.options);
                        for (f = d.next(); !f.done; f = d.next()) {
                            var g = f.value;
                            f = document.createElement("option");
                            f.innerText = g.label;
                            f.value = g.label;
                            b.$a.appendChild(f);
                        }
                    } else void 0 !== b.$a && ((b.eg.innerText = Pf), (b.Ca.value = ""), b.Ng.removeChild(b.$a), (b.$a = void 0));
                    b.element.style.display = "block";
                    b.xh();
                    b.D();
                    b.Mn();
                    void 0 !== c && (null === (e = c.parentElement) || void 0 === e ? void 0 : e.removeChild(c));
                    b.isVisible = !0;
                })
                .catch(function (d) {
                    r("Error getting token balance. status: " + d, "tipCallout.ts", "theatermodelib");
                    b.De.innerText = zj;
                });
        }
    };
    k.B = function () {
        this.element.style.display = "none";
        this.xa.blur();
        this.Lb();
        this.isVisible = !1;
        this.closed.h(void 0);
    };
    k.Mn = function () {
        document.activeElement !== this.xa && (this.xa.focus(), this.xa.setSelectionRange(0, 9999));
    };
    k.pv = function (a) {
        this.ob = a;
        this.De.innerText = a + " " + ge(a, !1);
    };
    var OW = new y("dossierLoaded", {
        rc: function () {
            return 10 + Ob;
        },
    });
    function PW() {
        w.call(this);
        this.LH = new FW();
        this.Vx = 0;
        this.H = new Ub();
        this.pf = { j: "", Tb: "" };
    }
    q(PW, w);
    k = PW.prototype;
    k.Zs = function () {};
    k.lD = function () {};
    k.tK = function () {};
    k.hD = function () {};
    k.px = function () {};
    k.jD = function () {
        this.F.N.stop();
    };
    k.kD = function () {
        null !== window.top && (window.top.location.href = "/auth/login/?next=" + window.location.pathname + window.location.search);
    };
    k.iD = function () {};
    k.hh = function () {};
    k.uK = function () {};
    k.gh = function () {};
    function QW(a) {
        mv.g(function (b) {
            a.Tg = b.Tg;
        });
    }
    function RW(a, b, c) {
        a.yb = a.G(new LW("theater", b, c));
        iv.g(function (d) {
            a.yb.isVisible ? a.yb.B() : a.yb.show(d);
        });
        a.yb.Om.g(function () {
            a.yb.B();
        });
    }
    k.fG = function () {
        jv.g(function (a) {
            Su({ pg: a });
        });
        Vu = function () {
            jv.h(!0);
        };
    };
    function SW(a) {
        gw.g(function () {
            a.R();
            a.gh();
        });
        window.onorientationchange = function () {
            kd();
            a.R();
        };
    }
    function TW(a, b) {
        a.Ck(b, !0);
        Hr.g(function (c) {
            172800 < (new Date().getTime() - Du) / 1e3 ? (window.location.pathname = "/" + c + "/") : a.Ck(c, !0);
        });
        G.g(function (c) {
            a.hh(c);
        });
    }
    k.zz = function (a, b) {
        document.title = a + " at Chaturbate: " + b;
    };
    k.Ck = function (a, b) {
        var c = this;
        if (a !== this.pf.j) {
            this.pf = { j: a, Tb: "" };
            var d = (this.Vx += 1);
            this.kK(a)
                .then(function (e) {
                    d === c.Vx && c.XE(e, b);
                })
                .catch(function (e) {
                    if (e instanceof hc && "" !== e.xhr.responseText)
                        if ("application/json" !== e.xhr.getResponseHeader("Content-Type")) r("Error reading room dossier error", "chatRoot.ts", "common", { room: a, error: e.xhr.responseText });
                        else {
                            var f = new H(e.xhr.responseText);
                            switch (K(f, "code", !1)) {
                                case "access-denied":
                                    R("Access Denied for room: " + a + "\n\n" + L(f, "detail"));
                                    break;
                                case "unauthorized":
                                    c.kD(a);
                                    break;
                                case "password-required":
                                    c.iD(a);
                                    break;
                                default:
                                    r("Error parsing room dossier error", "chatRoot.ts", "common", { room: a, error: e.xhr.responseText });
                            }
                        }
                    else r("Error occurred while processing room dossier:", "chatRoot.ts", "common", { room: a, error: e });
                });
        }
    };
    k.kK = function (a) {
        return Vx(a);
    };
    k.XE = function (a, b) {
        var c = this;
        void 0 !== this.Jf && this.Jf();
        Dc = a.j;
        void 0 !== this.CH && this.CH();
        this.zz(a.j, a.Tb);
        this.pf.Tb = a.Tb;
        B.Hb(a);
        OW.h(a);
        this.l = new gQ(a);
        this.l.event.MG.g(function (g) {
            c.zz(a.j, g);
        });
        this.Tg = a.Da.Tg;
        IW(this.LH);
        this.l.event.au.g(function (g) {
            c.tK(g);
        });
        this.lD(a.Re);
        var d = { A: a, l: this.l };
        this.F.N.hh(d);
        var e, f;
        this.Jf = function () {
            clearInterval(e);
            window.clearTimeout(f);
            c.l.disconnect();
            c.F.N.stop();
            Vb(c.H);
            Kc.h(void 0);
        };
        b && this.Zs(a);
        iz() ? this.px() : this.ZD(d.A) ? this.hD() : this.px();
        G.h(d);
        this.H.add(
            this.l.event.Mc.g(function (g) {
                "notconnected" === g.Lc &&
                    (clearInterval(e),
                    (e = window.setInterval(function () {
                        kQ(c.l);
                    }, 3e4)));
                var h = "privatewatching" === g.Lc || "privatewatching" === g.Sa;
                if ("notconnected" === g.Lc || h)
                    f = window.setTimeout(function () {
                        kQ(c.l, h);
                    }, 2e3);
                switch (g.Sa) {
                    case "passwordprotected":
                        c.jD(c.l);
                }
                c.uK(g);
            })
        );
        this.H.add(
            mv.g(function (g) {
                var h = c.l,
                    m = g.wm;
                h.vm = g.vm;
                h.wm = m;
            })
        );
        this.R();
    };
    k.ZD = function (a) {
        return "offline" === a.sa && !(a.Bs && iz());
    };
    function UW(a) {
        var b, c;
        w.call(this, "span");
        var d = this;
        this.Zg = new y("iconClicked", { ii: 0 });
        this.BI = "light";
        this.ZB();
        this.gB();
        VW(this, null === a || void 0 === a ? void 0 : a.ws);
        WW(this);
        XW(this, null !== (b = null === a || void 0 === a ? void 0 : a.UD) && void 0 !== b ? b : !1);
        YW(this, null !== (c = null === a || void 0 === a ? void 0 : a.UD) && void 0 !== c ? c : !1);
        this.element.onmouseenter = function () {
            d.Pc.style.visibility = "visible";
            d.dd.style.visibility = "visible";
            d.ed.style.visibility = "visible";
            d.image.style.backgroundColor = "rgba(203, 203, 203, 0.24)";
        };
        this.element.onmouseleave = function () {
            ZW(d);
        };
        this.Zg.g(function () {
            ZW(d);
        });
        a = $b("theme_name");
        void 0 === a || "lightmode" === a ? $W(this, "light") : "darkmode" === a ? $W(this, "dark") : (t("Unknown color mode, defaulting to light:", "controlIcon.ts", "player", a), $W(this, "light"));
        Lr.g(function (e) {
            switch (e) {
                case "lightmode":
                    $W(d, "light");
                    break;
                case "darkmode":
                    $W(d, "dark");
                    break;
                default:
                    t("Unknown color mode, defaulting to light:", "controlIcon.ts", "player", e), $W(d, "light");
            }
        });
    }
    q(UW, w);
    UW.prototype.ZB = function () {
        this.image = document.createElement("img");
        this.Pc = document.createElement("div");
        this.dd = document.createElement("div");
        this.ed = document.createElement("div");
    };
    UW.prototype.gB = function () {
        this.element.appendChild(this.Pc);
        this.element.appendChild(this.dd);
        this.element.appendChild(this.ed);
        this.element.appendChild(this.image);
    };
    function VW(a, b) {
        void 0 !== b && (a.element.id = b);
        a.element.style.display = "inline-block";
        a.element.style.position = "relative";
        a.element.style.overflow = "visible";
        a.element.style.height = "24px";
        a.element.style.width = "24px";
        a.element.style.cursor = "pointer";
        a.element.style.margin = "0 4px";
        a.element.style.padding = "0";
        a.element.classList.add("player-controls-icon");
    }
    function WW(a) {
        a.image.style.display = "inline-block";
        a.image.style.boxShadow = "border-box";
        a.image.style.height = "16px";
        a.image.style.width = "16px";
        a.image.style.padding = "4px";
        a.image.style.margin = "0";
        a.image.style.cursor = "pointer";
        a.image.style.borderRadius = "2px";
        a.image.style.backgroundColor = "rgba(0, 0, 0, 0)";
        a.image.onclick = function () {
            a.Zg.h(void 0);
        };
    }
    function XW(a, b) {
        a.Pc.style.position = "absolute";
        a.Pc.style.bottom = "calc(100% + 4px)";
        a.Pc.style.borderRadius = "6px";
        a.Pc.style.paddingTop = "6px";
        a.Pc.style.paddingBottom = "6px";
        a.Pc.style.paddingLeft = "8px";
        a.Pc.style.paddingRight = "8px";
        a.Pc.style.visibility = "hidden";
        b ? (a.Pc.style.right = "0") : (a.Pc.style.left = "0");
        a.Pc.classList.add("player-controls-icon-tooltip");
    }
    function YW(a, b) {
        a.dd.style.position = "absolute";
        a.dd.style.bottom = "100%";
        a.dd.style.width = "0px";
        a.dd.style.height = "0px";
        a.dd.style.visibility = "hidden";
        a.dd.style.border = "2px solid";
        a.dd.style.borderLeftColor = "transparent";
        a.dd.style.borderBottomColor = "transparent";
        a.ed.style.position = "absolute";
        a.ed.style.bottom = "100%";
        a.ed.style.width = "0px";
        a.ed.style.height = "0px";
        a.ed.style.visibility = "hidden";
        a.ed.style.border = "2px solid";
        a.ed.style.borderRightColor = "transparent";
        a.ed.style.borderBottomColor = "transparent";
        b ? ((a.ed.style.right = "8px"), (a.dd.style.right = "12px")) : ((a.dd.style.left = "8px"), (a.ed.style.left = "12px"));
        a.dd.classList.add("player-controls-icon-tooltip-decoration");
        a.ed.classList.add("player-controls-icon-tooltip-decoration");
    }
    function ZW(a) {
        a.Pc.style.visibility = "hidden";
        a.dd.style.visibility = "hidden";
        a.ed.style.visibility = "hidden";
        a.image.style.backgroundColor = "rgba(0, 0, 0, 0)";
    }
    function $W(a, b) {
        a.BI = b;
        "light" === a.BI
            ? ((a.Pc.style.backgroundColor = "white"),
              (a.Pc.style.color = "rgb(73, 73, 79)"),
              (a.dd.style.borderRightColor = "white"),
              (a.dd.style.borderTopColor = "white"),
              (a.ed.style.borderLeftColor = "white"),
              (a.ed.style.borderTopColor = "white"))
            : ((a.Pc.style.backgroundColor = "black"),
              (a.Pc.style.color = "white"),
              (a.dd.style.borderRightColor = "black"),
              (a.dd.style.borderTopColor = "black"),
              (a.ed.style.borderLeftColor = "black"),
              (a.ed.style.borderTopColor = "black"));
    }
    function aX(a, b) {
        b ? a.enable() : a.disable();
    }
    UW.prototype.enable = function () {
        this.element.style.display = "inline-block";
    };
    UW.prototype.disable = function () {
        this.element.style.display = "none";
    };
    function bX(a, b) {
        a.image.src = null !== b && void 0 !== b ? b : "";
    }
    function cX(a, b) {
        a.element.id = null !== b && void 0 !== b ? b : "";
    }
    function dX(a) {
        UW.call(this, a);
        this.cp.style.whiteSpace = "nowrap";
        this.cp.style.fontSize = "14px";
        this.cp.style.lineHeight = "16px";
        this.cp.classList.add("player-controls-icon-text");
        eX(this, null === a || void 0 === a ? void 0 : a.Df);
    }
    q(dX, UW);
    dX.prototype.ZB = function () {
        UW.prototype.ZB.call(this);
        this.cp = document.createElement("span");
    };
    dX.prototype.gB = function () {
        UW.prototype.gB.call(this);
        this.Pc.appendChild(this.cp);
    };
    function eX(a, b) {
        a.Df = b;
        void 0 === a.Df
            ? ((a.cp.innerText = ""), (a.Pc.style.display = "none"), (a.dd.style.display = "none"), (a.ed.style.display = "none"))
            : ((a.cp.innerText = a.Df), (a.Pc.style.display = ""), (a.dd.style.display = ""), (a.ed.style.display = ""));
    }
    function fX(a) {
        dX.call(this, Object.assign(Object.assign({}, a), { UD: !1 }));
    }
    q(fX, dX);
    function gX(a) {
        dX.call(this, Object.assign(Object.assign({}, a), { UD: !0 }));
    }
    q(gX, dX);
    function hX(a) {
        gX.call(this, a);
        var b = this;
        this.Ed = new y("videoOfflineChange");
        this.yH = new Ub();
        eX(this, $l);
        bX(this, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_inactive.svg");
        a = new y("requestChangeClickListener");
        var c = new y("showMyCamStateChanged");
        a.g(function (d) {
            Vb(b.yH);
            z(
                b.Zg.g(function () {
                    d();
                }),
                b.yH
            );
        });
        c.g(function (d) {
            switch (d) {
                case "started":
                    eX(b, am);
                    bX(b, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_active.svg");
                    break;
                case "inactiveStopped":
                    eX(b, $l);
                    bX(b, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_inactive.svg");
                    break;
                case "stopped":
                    eX(b, $l), bX(b, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_inactive.svg");
            }
        });
        this.$H = wN(this.Ed, a, c);
        aX(this, this.$H);
    }
    q(hX, gX);
    hX.prototype.enable = function () {
        this.$H ? gX.prototype.enable.call(this) : gX.prototype.disable.call(this);
    };
    hX.prototype.eG = function (a) {
        this.Ed.h(a);
    };
    function iX(a) {
        fX.call(this, a);
        var b = this;
        this.fM = new y("notifyMouseEnter");
        this.gM = new y("notifyMouseExit");
        this.element.onmouseenter = function () {
            b.fM.h(void 0);
        };
        this.element.onmouseleave = function (c) {
            b.gM.h(c);
        };
    }
    q(iX, fX);
    var jX = new y("showCustomVideoControls"),
        kX = new y("hideCustomVideoControls");
    function lX(a, b) {
        w.call(this);
        var c = this;
        this.F = a;
        this.hk = new y("forceHlsPlayerEvent");
        this.br = new y("setPlayerComponentMutedEvents");
        this.cG = new y("setPlayerComponentVolumeMutedEvents");
        this.Vy = new y("playerComponentEnterFullScreenModeEvent");
        this.Wy = new y("playerComponentReadjustForceHlsOverlayOrderEvent");
        this.Xy = new y("playerComponentReadjustPlayButtonContainerEvent");
        this.Hz = new y("showJpegPlayerComponentImage");
        this.sm = new y("requestVideoQualityButtonVisibilityChange");
        this.state = { volume: 60, va: !0 };
        this.vk = iz();
        this.Jk = this.Sd = this.Ms = this.Ns = this.visible = this.ct = this.mf = this.tb = !1;
        this.$G(a);
        a = Bc(window.location.search).disable_sound;
        (void 0 !== a && "true" === a.toLowerCase()) || "1" === a
            ? ((this.state.volume = 0), (this.state.va = !0))
            : Qa() && ((a = window.localStorage.getItem("videoControls")), null !== a ? ((a = JSON.parse(a)), (this.state = { volume: a.volume, va: this.wo ? a.isMuted : !0 })) : (this.state.va = !this.wo));
        Gc = this.state.va ? 0 : this.state.volume;
        this.Ur = window.navigator.userAgent;
        this.element.style.overflow = "";
        this.element.style.bottom = "0";
        this.element.style.left = "0";
        this.element.style.height = "50px";
        this.element.style.background = "linear-gradient(180deg, rgba(50, 50, 50, 0) 0%, rgba(50, 50, 50, 0.4) 66%, rgba(50, 50, 50, 0.7) 100%)";
        this.bg = document.createElement("div");
        this.bg.style.position = "absolute";
        this.bg.style.right = "0";
        this.bg.style.bottom = "0";
        this.bg.style.paddingRight = "8px";
        this.bg.style.paddingBottom = "12px";
        this.rj = document.createElement("div");
        this.rj.style.position = "absolute";
        this.rj.style.left = "0";
        this.rj.style.bottom = "0";
        this.rj.style.paddingLeft = "8px";
        this.rj.style.paddingBottom = "12px";
        this.nC();
        this.oC();
        this.mC(b);
        this.dC();
        this.ze = new hX({ Df: $l });
        this.gC();
        this.QB();
        this.kC();
        this.aC();
        this.jC();
        this.VB();
        this.G(this.pb, this.rj);
        this.G(this.qb, this.rj);
        this.G(this.dc, this.rj);
        this.G(this.Ue, this.bg);
        this.G(this.ze, this.bg);
        this.G(this.da, this.bg);
        this.G(this.Jd, this.bg);
        this.G(this.Fe, this.bg);
        this.G(this.Bg, this.bg);
        this.G(this.Nc, this.bg);
        this.G(this.Kb, this.bg);
        this.element.appendChild(this.rj);
        this.element.appendChild(this.bg);
        G.g(function (d) {
            var e, f;
            d.A.tb
                ? ((c.Jk = d.A.ge),
                  c.xi(d.l.status),
                  d.l.event.Mc.g(function (g) {
                      var h;
                      c.ZG(g.Sa);
                      c.xi(g.Sa);
                      "privatespying" === g.Sa && Jr.h(void 0);
                      c.Ru(g.Sa);
                      null === (h = c.Ob) || void 0 === h ? void 0 : pw(h);
                  }),
                  d.l.event.Fm.g(function (g) {
                      c.Jk = g.ge && d.A.tb;
                      c.xi(d.l.status);
                  }))
                : ((c.Jk = !1), c.xi(d.l.status));
            null === (e = c.Ob) || void 0 === e ? void 0 : e.show();
            ub() &&
                !sb() &&
                !ib() &&
                uc &&
                void 0 === c.Ob &&
                ((c.Ob = vw(
                    c.ze.element,
                    {
                        width: 250,
                        content: qp,
                        qg: !1,
                        Rc: 0,
                        wd: "135px",
                        kj: function () {
                            return 0;
                        },
                        Qj: function () {
                            return 15;
                        },
                        Gz: ["fullvideo", "fullscreen", "theater"],
                    },
                    null !== (f = c.Nb.parentElement) && void 0 !== f ? f : void 0
                )),
                c.Zf && void 0 !== c.Ob && (c.Ob.element.style.zIndex = "100"),
                c.ze.Zg.g(function () {
                    var g;
                    null === (g = c.Ob) || void 0 === g ? void 0 : sw(g);
                }));
            c.je = d;
            c.vo && !c.Ms && ((c.Ms = !0), c.UB(), c.Ru(d.A.sa));
            c.tb = d.A.tb;
            c.vk = "offline" === d.A.sa;
            c.Pj();
            c.Zf || mX(c);
            c.Mj();
            c.xb();
        });
        Qv.ud.g(function (d) {
            var e, f;
            "fullscreen" === d.Mf ? (null === (e = c.Ob) || void 0 === e ? void 0 : tw(e, 1)) : null === (f = c.Ob) || void 0 === f ? void 0 : tw(f, 0);
            c.Mj();
        });
        gw.g(function (d) {
            (c.visible && d) || c.xb();
        });
        Yy.g(function () {
            nX(c);
        });
        jv.g(function () {
            pd() && oX(c);
        });
        JB.g(function () {
            c.Oe();
        }, !1);
        v(nd(), document, function () {
            pd() && md() === c.WC && Ov("fullscreen");
        });
        this.element.onmousemove = function () {
            c.xb();
        };
        v("click", this.element, function (d) {
            d.stopPropagation();
        });
        this.F.Ed.g(function (d) {
            c.vk = d;
        });
        this.B();
    }
    q(lX, w);
    k = lX.prototype;
    k.$G = function (a) {
        this.Nb = a.element;
        this.wo = a.N.bA;
        a.N instanceof zQ ? ((this.Zf = !0), (this.vo = a.N.Wn)) : (this.vo = this.Zf = !1);
        this.cu = a.am;
        this.eq = a.eq();
    };
    k.mC = function (a) {
        function b(d) {
            d = d.target;
            c.dc.element.contains(d) || a.element.contains(d) || (c.sm.h(!1), Bb("touchend", document, b));
        }
        var c = this;
        this.dc = new iX({});
        bX(this.dc, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/quality-gear-sd.svg");
        eX(this.dc);
        this.dc.element.title = "Video Quality";
        this.dc.disable();
        this.dc.fM.g(function () {
            c.sm.h(!0);
            v("touchend", document, b);
        });
        this.dc.gM.g(function (d) {
            null !== d.relatedTarget && ((d = d.relatedTarget.parentNode), null === d || d.isEqualNode(a.element) || c.sm.h(!1));
        });
    };
    k.oC = function () {
        function a(c) {
            c !== b.state.volume && ((b.state.volume = c), (b.state.va = 0 === b.state.volume), pX(b), b.Pj(), b.Zd());
        }
        var b = this;
        this.qb = new ev({ md: 15, Ri: 50, gn: 1 });
        this.qb.element.style.display = "inline-block";
        this.qb.element.style.marginBottom = "7px";
        this.qb.element.style.verticalAlign = "bottom";
        this.qb.element.title = "Volume Slider";
        this.qb.HA.g(function (c) {
            b.Sd && void 0 !== b.je && (b.Oe(!1), F("ForceHLS"), b.hk.h({ Jq: b.je }), b.Lj(), hv.h(void 0));
            b.br.h(!1);
            a(c);
        });
        this.qb.IA.g(a);
        this.qb.GA.g(function (c) {
            a(c);
            0 === b.state.volume && b.br.h(!0);
            F("ChangeVolume", { volume: c });
            b.Zd();
        });
    };
    k.nC = function () {
        var a = this;
        this.pb.element.title = "Volume";
        this.pb = new fX({ Df: hp });
        bX(this.pb, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-off.svg");
        this.pb.Zg.g(function () {
            !a.Zf || -1 < a.Ur.indexOf("MSIE 10.0") || -1 < a.Ur.indexOf("MSIE 9.0")
                ? (F("ToggleMute", { newState: !a.state.va }), F("ChangeVolume", { volume: a.state.volume }), a.state.va ? a.Lj() : nX(a), a.xb())
                : void 0 === a.je
                ? r("unexpected switch to hls", "iconVideoControls.ts", "theatermodelib", {}, "VIDEO_")
                : (a.Sd && a.Oe(!1), F("ForceHLS"), a.hk.h({ Jq: a.je }), a.Lj(), hv.h(void 0));
        });
    };
    k.dC = function () {
        this.Ue = new gX({ Df: ng });
        bX(this.Ue, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/private_show.svg");
        this.Ue.Zg.g(function () {
            Jr.h(void 0);
        });
    };
    k.gC = function () {
        this.da = new gX({ Df: Rf + " (ctrl+s)", ws: "send-tip" });
        bX(this.da, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/tip-new.svg");
        this.da.Zg.g(function () {
            Gr.h({});
        });
    };
    k.QB = function () {
        this.Jd = new gX({ Df: gp, ws: "chat-btn" });
        this.Jd.disable();
        bX(this.Jd, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/chat-closed.svg");
        this.Jd.Zg.g(function () {
            Kr.h(void 0);
        });
    };
    k.kC = function () {
        this.Fe = new gX({ Df: fh, ws: "user-list" });
        bX(this.Fe, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/users.svg");
        this.Fe.Zg.g(function () {
            Fr.h(void 0);
        });
    };
    k.aC = function () {
        this.Bg = new gX({ Df: kh, ws: "more-rooms" });
        bX(this.Bg, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/users-search.svg");
        this.Bg.Zg.g(function () {
            Xy.h(void 0);
        });
    };
    k.jC = function () {
        var a = this;
        this.Nc = new gX({ Df: vj });
        bX(this.Nc, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/mode-theater.svg");
        this.Nc.Zg.g(function () {
            var b = "split";
            "split" === Y() && (b = "theater");
            Ov(b);
            Rv();
            a.Mj();
        });
    };
    k.VB = function () {
        var a = this;
        this.mf = ld() || kb();
        document[od()] = function () {
            pd() || ((a.mf = !1), a.Kb.disable(), R("Full screen is unavailable."));
        };
        this.Kb = new gX({ Df: wj, ws: "full-screen" });
        bX(this.Kb, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/fullscreen-expand.svg");
        this.mf || this.Kb.disable();
        this.Kb.Zg.g(function () {
            a.sA();
        });
        this.Kb.element.title = "Full Screen";
    };
    k.xi = function (a) {
        var b = ["privaterequesting", "privatespying", "privatewatching"];
        if (this.Jk || -1 !== b.indexOf(a)) {
            switch (a) {
                case "unknown":
                case "offline":
                case "notconnected":
                case "away":
                case "hidden":
                case "passwordprotected":
                case "privatenotwatching":
                    this.Ue.disable();
                    break;
                default:
                    aX(this.Ue, "split" !== Y());
            }
            this.R();
        } else this.Ue.disable();
    };
    k.Mj = function () {
        aX(this.da, this.tb);
        this.Bg.disable();
        this.Fe.enable();
        eX(this.Nc, vj);
        bX(this.Nc, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/mode-theater.svg");
        this.Nc.enable();
        eX(this.Kb, wj);
        bX(this.Kb, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/fullscreen-expand.svg");
        this.Jd.enable();
        this.ze.enable();
        void 0 !== this.je && this.xi(this.je.l.status);
        this.mf && this.Kb.enable();
        switch (Y()) {
            case "split":
                this.da.disable();
                this.Fe.disable();
                this.Jd.disable();
                this.Ue.disable();
                this.ze.disable();
                this.eq && this.Nc.disable();
                break;
            case "videoonly":
                this.da.disable();
                this.Fe.disable();
                this.Jd.disable();
                this.Ue.disable();
                this.ze.disable();
                this.Nc.disable();
                this.Kb.disable();
                break;
            case "theater":
                eX(this.Nc, yj);
                bX(this.Nc, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/mode-split.svg");
                cX(this.Nc, "default-view");
                this.Bg.enable();
                break;
            case "fullscreen":
                this.Bg.enable();
                this.Nc.disable();
                eX(this.Kb, xj + " (esc)");
                bX(this.Kb, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/fullscreen-shrink.svg");
                break;
            case "noninteractive-fullscreen":
                break;
            default:
                r("Unexpected VideoMode: " + Y(), "iconVideoControls.ts", "theatermodelib", {}, "VIDEO_");
        }
        this.vk && ((this.ze.element.style.display = "none"), this.da.disable(), this.Fe.disable(), this.Jd.disable());
        this.xb();
    };
    k.Pj = function () {
        var a = this.qb.ld();
        0 === a || this.state.va
            ? (bX(this.pb, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-off.svg"), cX(this.pb, "volume-mute"), eX(this.pb, hp))
            : (50 > a
                  ? (bX(this.pb, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-low.svg"), cX(this.pb, "volume-medium"))
                  : (bX(this.pb, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-full.svg"), cX(this.pb, "volume-high")),
              eX(this.pb, Nl));
    };
    function pX(a) {
        a.cG.h(Object.assign({}, a.state));
    }
    k.Zd = function () {
        Qa() && !this.cu && window.localStorage.setItem("videoControls", JSON.stringify({ volume: this.state.volume, isMuted: this.state.va }));
        Gc = this.state.va ? 0 : this.state.volume;
    };
    k.update = function () {
        mX(this);
        this.Zd();
    };
    function mX(a) {
        a.qb.vh(a.state.va ? 0 : a.state.volume);
        pX(a);
        a.Pj();
    }
    function nX(a) {
        a.Sm(!0);
        a.update();
    }
    k.Lj = function () {
        this.Sm(!1);
        0 === this.state.volume && (this.state.volume = 60);
        this.update();
    };
    k.toggle = function () {
        this.visible ? this.rg() : this.xb();
    };
    k.xb = function () {
        var a = this,
            b;
        this.vk
            ? this.rg()
            : (jX.h("icon"),
              null === (b = this.Ob) || void 0 === b ? void 0 : b.show(),
              (this.visible = !0),
              Yu(this.element, "100ms"),
              (this.element.style.display = "block"),
              void 0 !== this.km && (clearTimeout(this.km), (this.km = void 0)),
              (this.km = window.setTimeout(
                  function () {
                      a.km = void 0;
                      a.rg();
                  },
                  this.ct ? 2e3 : 5e3
              )));
    };
    k.rg = function () {
        var a;
        this.Sd || (kX.h(void 0), (this.visible = !1), (this.ct = !0), Yu(this.element, "500ms"), null === (a = this.Ob) || void 0 === a ? void 0 : a.B(), (this.element.style.display = "none"));
    };
    k.show = function () {
        this.element.style.visibility = "";
        this.xb();
        this.element.style.zIndex = this.Sd ? "100" : "3";
    };
    k.B = function () {
        this.element.style.visibility = "hidden";
    };
    k.qv = function (a) {
        this.state.volume = a;
        this.qb.vh(this.state.va ? 0 : this.state.volume);
        this.Pj();
    };
    k.Sm = function (a) {
        this.state.va = a;
        this.qb.vh(this.state.va ? 0 : this.state.volume);
        this.Pj();
    };
    k.GO = function (a) {
        this.qv(a);
        this.Zd();
    };
    k.FO = function (a) {
        this.Sm(a);
        this.Zd();
    };
    k.OD = function () {
        return !1;
    };
    k.sA = function () {
        this.Sd && this.Oe();
        pd() ? kd() : this.mf && this.Vy.h(void 0);
        this.Mj();
    };
    function oX(a) {
        "fullscreen" === Y() ? kd() : jd(a.WC);
    }
    k.ZG = function (a) {
        switch (a) {
            case "unknown":
            case "offline":
            case "notconnected":
            case "away":
            case "privatenotwatching":
            case "hidden":
            case "passwordprotected":
                if ("fullscreen" === Y()) {
                    aX(this.Kb, this.mf);
                    break;
                }
                pd() && kd();
                this.Kb.disable();
                break;
            case "public":
            case "privatespying":
            case "privatewatching":
            case "privaterequesting":
            case "hiddenwatching":
                aX(this.Kb, this.mf);
                break;
            default:
                r("unexpected room status", "iconVideoControls.ts", "theatermodelib", a, "");
        }
    };
    k.Oe = function (a) {
        a = void 0 === a ? !0 : a;
        this.Sd &&
            void 0 !== this.je &&
            (void 0 !== this.jb && null !== this.jb.parentElement && (this.jb.parentElement.removeChild(this.jb), (this.jb = void 0)),
            void 0 !== this.Ma && null !== this.Ma.parentElement && (this.Ma.parentElement.removeChild(this.Ma), (this.Ma = void 0)),
            (this.Sd = !1),
            this.rg(),
            this.B(),
            this.dc.disable(),
            !this.Ns && a && ((this.Ns = !0), F("ForceHLS"), this.hk.h({ Jq: this.je, Lj: !1 }), hv.h(void 0)),
            (this.element.style.zIndex = "3"));
    };
    function qX(a) {
        a.Zf && a.Sd && a.Oe();
    }
    k.YB = function () {
        var a = this;
        this.jb = document.createElement("div");
        this.jb.style.width = "100%";
        this.jb.style.height = "100%";
        this.jb.style.position = "absolute";
        this.jb.style.top = "0";
        this.jb.style.left = "0";
        this.jb.style.cursor = "pointer";
        v("click", this.jb, function () {
            a.Oe();
        });
        v("click", this.element, function () {
            a.Oe();
        });
        this.Wy.h(this.jb);
    };
    k.Ru = function (a) {
        void 0 !== this.Ma && void 0 !== this.jb && ("public" === a ? ((this.Ma.style.display = ""), (this.jb.style.display = "")) : ((this.Ma.style.display = "none"), (this.jb.style.display = "none")));
        this.R();
    };
    k.UB = function () {
        var a = this;
        if (this.Zf) {
            this.Sd = !0;
            this.Ma = document.createElement("div");
            var b = this.Nb.getBoundingClientRect(),
                c = document.createElement("img");
            c.src = "https://static-assets.highwebmedia.com/tsdefaultassets/play-inactive.svg";
            c.style.width = "60px";
            c.style.height = "60px";
            c.style.position = "relative";
            c.style.top = "40px";
            c.style.left = "45px";
            c.style.cursor = "pointer";
            v("click", c, function () {
                a.Oe();
            });
            this.Ma.style.position = "absolute";
            this.Ma.style.top = b.height / 2 - 70 + "px";
            this.Ma.style.left = b.width / 2 - 70 + "px";
            this.Ma.style.cursor = "pointer";
            this.Ma.style.width = "140px";
            this.Ma.style.height = "140px";
            this.Ma.style.borderRadius = "50%";
            this.Ma.style.backgroundColor = "rgba(0,0,0,0.25)";
            this.Ma.appendChild(c);
            this.Xy.h(this.Ma);
            this.Hz.h(void 0);
            this.YB();
            this.D();
        }
    };
    k.D = function () {
        if (void 0 !== this.Ma) {
            var a = this.Nb.getBoundingClientRect();
            this.Ma.style.top = a.height / 2 - 70 + "px";
            this.Ma.style.left = a.width / 2 - 70 + "px";
        }
    };
    k.eM = function (a) {
        this.cu = a;
    };
    k.hM = function (a) {
        this.wo = a;
    };
    k.LE = function (a) {
        this.Zf = a;
    };
    k.KE = function (a) {
        this.vo = a;
    };
    k.iM = function (a) {
        this.ze.eG(a);
    };
    k.ko = function () {};
    k.PN = function (a) {
        aX(this.dc, a);
    };
    k.ON = function (a) {
        this.dc.element.style.paddingTop = (a ? 14 : 0) + "px";
    };
    k.jK = function () {
        return this.rj.offsetLeft + this.dc.element.offsetLeft;
    };
    k.pI = function (a) {
        for (var b = l(this.qb.element.children), c = b.next(); !c.done; c = b.next()) if (a === c.value) return !0;
        return a === this.pb.element || a === this.qb.element || a === this.qb.la;
    };
    k.ty = function (a) {
        a ? bX(this.Jd, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/chat-closed.svg") : bX(this.Jd, "https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/chat-opened.svg");
    };
    function rX(a) {
        w.call(this);
        var b = this;
        this.mw = a;
        this.Zt = [];
        this.element.style.position = "fixed";
        this.element.style.height = "";
        this.element.style.textShadow = "1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000";
        this.element.style.fontSize = "12px";
        this.Wa = document.createElement("div");
        this.Wa.style.position = "absolute";
        this.Wa.style.bottom = "0";
        O(this.element, "hasDarkBackground");
        this.element.style.overflowWrap = "break-word";
        this.element.style.wordWrap = "break-word";
        this.element.appendChild(this.Wa);
        a.Or.g(function (c) {
            sX(b, c.rE(), c.BT);
        });
        Kc.g(function () {
            b.clear();
        });
        G.g(function (c) {
            b.element.style.fontSize = c.A.Da.fontSize;
            b.Dm();
        });
        mv.g(function (c) {
            b.element.style.fontSize = c.fontSize;
            b.Dm();
        });
    }
    q(rX, w);
    k = rX.prototype;
    k.Ea = function () {
        this.element.scrollTop = this.element.scrollHeight - this.element.offsetHeight;
    };
    k.clear = function () {
        for (var a = l(this.Zt), b = a.next(); !b.done; b = a.next()) clearTimeout(b.value);
        for (this.Zt = []; null !== this.Wa.firstChild; ) this.Wa.removeChild(this.Wa.firstChild);
    };
    k.Dm = function () {
        this.Wa.style.lineHeight = Number(this.element.style.fontSize.slice(0, -2)) + 7 + "pt";
    };
    function sX(a, b, c) {
        a.Wa.appendChild(b);
        tX(a, function () {
            b.style.opacity = "0";
        });
        a.R();
        (void 0 !== c && !0 !== c) || a.Ea();
    }
    function tX(a, b) {
        var c = window.setTimeout(function () {
            var d = a.Zt.indexOf(c);
            0 <= d && a.Zt.splice(d, 1);
            b();
        }, 2e4);
        a.Zt.push(c);
    }
    k.Pv = function () {
        var a = this;
        this.mw.Iw.g(function () {
            a.R();
        });
    };
    k.D = function () {
        var a = this.mw.Ia,
            b = this.mw.ab,
            c = a.getBoundingClientRect();
        this.element.style.left = c.left + "px";
        this.element.style.width = a.clientWidth + "px";
        this.Wa.style.width = a.clientWidth + "px";
        this.element.style.top = b.getBoundingClientRect().top + "px";
        this.element.style.height = b.clientHeight + "px";
        this.Wa.style.height = b.clientHeight + "px";
    };
    new y("MobileVideoControls:tap");
    new y("MobilePureChat:tap");
    new y("MobilePureChat:drag");
    new y("MobilePureChat:dragEnd");
    new y("MobileFullscreenSendChat");
    new y("MobilePlayer:Resize");
    new y("MobilePlayer:changeSize");
    new y("mobilePMChatLinkFullscreenToggle");
    new y("mobilePureChatChange");
    var uX = [40, 37, 39, 38, 13, 27, 32, 9];
    function vX(a, b) {
        this.Ip = a;
        this.hw = void 0 === b ? -1 : b;
        this.cache = new Map();
    }
    vX.prototype.get = function (a) {
        var b = void 0 === this.Ip || a.length > this.Ip ? a.substring(0, this.Ip) : a,
            c = this.cache.get(b);
        return b === a
            ? c
            : null === c || void 0 === c
            ? void 0
            : c.filter(function (d) {
                  return d.jc.startsWith(a);
              });
    };
    vX.prototype.set = function (a, b) {
        var c = this;
        if (void 0 === this.Ip || a.length <= this.Ip)
            this.cache.set(a, b),
                -1 !== this.hw &&
                    window.setTimeout(function () {
                        return c.cache.delete(a);
                    }, this.hw);
    };
    function wX(a) {
        Xu.call(this);
        var b = this;
        this.config = a;
        this.hw = -1;
        this.EU = new Sd(
            function () {
                b.getData()
                    .then(function (c) {
                        var d;
                        b.items = xX(b, c.responseText);
                        b.cache.set(b.prefix, b.items);
                        c = null !== (d = yX(b)) && void 0 !== d ? d : [];
                        b.Nj(c[1]);
                    })
                    .catch(function (c) {
                        r("Error autocomplete modal: " + c, "autocompleteModal.ts", "common");
                    });
            },
            { zc: 200, Qc: 2 }
        );
        this.fc.g(function () {
            void 0 !== b.selectedIndex && (lA(b.config.gb, " ", !0), b.config.gb.focus());
            b.B();
        });
        v("keyup", this.config.gb.element, function (c) {
            b.sK(c);
        });
        v("keydown", this.config.gb.element, function (c) {
            b.visible &&
                (38 === c.keyCode && (c.preventDefault(), b.uz(!0)),
                40 === c.keyCode && (c.preventDefault(), b.uz(!1)),
                [9, 39, 32, 13].includes(c.keyCode) && (c.preventDefault(), c.stopPropagation(), b.B(), (A.current.nb && 13 === c.keyCode) || lA(b.config.gb, " ", !0)),
                27 === c.keyCode || 37 === c.keyCode) &&
                (c.preventDefault(), b.B(), AA(b.config.gb));
        });
    }
    q(wX, Xu);
    k = wX.prototype;
    k.sK = function (a) {
        this.nx(a);
    };
    k.initData = function () {
        Xu.prototype.initData.call(this);
        this.list = document.createElement("div");
        this.sO = "";
        this.visible = !1;
        this.delay = 0;
        this.H = new Ub();
    };
    k.ia = function () {
        Xu.prototype.ia.call(this);
        O(this.element, "emoticonAutocompleteModal");
        this.element.style.visibility = "hidden";
        this.element.style.width = "auto";
        this.element.style.height = "auto";
        this.element.style.borderWidth = "1px";
        this.element.style.borderStyle = "solid";
        this.element.style.borderBottom = "none";
        this.element.style.fontFamily = "Helvetica, Arial, sans-serif";
        this.element.style.cursor = "pointer";
        this.list.style.width = "260px";
        this.list.style.maxHeight = "180px";
        this.list.style.overflowY = "scroll";
        this.element.appendChild(this.list);
    };
    k.dispose = function () {
        Vb(this.H);
    };
    k.D = function () {
        var a = EA(this.config.gb) + this.config.At;
        this.element.style.left = Math.max(4, Math.min(a, this.config.gb.element.clientWidth - this.config.wu)) + "px";
    };
    k.nx = function (a) {
        if (0 <= this.delay && -1 === uX.indexOf(a.keyCode))
            if (((a = yX(this)), null !== a))
                if (((this.prefix = a[2]), void 0 !== this.LL && this.prefix.length > this.LL)) t("Autocomplete prefix >" + this.LL + " chars. Not updating.", "autocompleteModal.ts", "common");
                else {
                    void 0 === this.cache && (this.cache = new vX(this.Ip, this.hw));
                    var b = this.cache.get(this.prefix);
                    void 0 !== b ? ((this.items = b), this.Nj(a[1])) : Td(this.EU);
                }
            else this.B();
    };
    function yX(a) {
        return yA(a.config.gb).match(a.NS);
    }
    k.Nj = function (a) {
        this.Xi();
        this.element.style.display = 0 === this.items.length ? "none" : "block";
        for (var b = 0; b < this.items.length; b += 1) this.appendItem(this.items[b], b);
        b = 0 >= this.list.children.length ? 0 : this.list.children.item(this.list.children.length - 1).offsetTop;
        this.list.scrollTop = b;
        this.sO = a;
        this.visible || this.show();
    };
    k.Xi = function () {
        for (; null !== this.list.firstChild; ) this.list.removeChild(this.list.firstChild);
        this.selectedIndex = void 0;
    };
    k.uz = function (a) {
        this.mn();
        a = void 0 === this.selectedIndex ? (a ? this.items.length - 1 : 0) : this.selectedIndex + (a ? -1 : 1);
        0 > a ? (a = this.items.length - 1) : a >= this.items.length && (a = 0);
        zX(this, a, !0);
    };
    k.Vl = function (a) {
        void 0 !== this.selectedIndex &&
            0 < this.items.length &&
            (this.mn(),
            O(this.items[this.selectedIndex].element, "selectedEmoticon"),
            a && (this.list.scrollTop = this.selectedIndex * this.list.firstChild.clientHeight - this.list.clientHeight / 2),
            (a = yA(this.config.gb).replace(new RegExp(this.ES + "$"), this.items[this.selectedIndex].jc)),
            vA(this.config.gb, a),
            zA(this.config.gb, this.sO.length + 1));
    };
    k.show = function () {
        var a = this;
        0 <= this.delay &&
            window.setTimeout(function () {
                null !== yX(a) && ((a.element.style.visibility = "visible"), 0 === vd(a.element.style.width) && (a.element.style.width = "auto"), (a.element.style.height = "auto"), a.xh(), a.R(), (a.visible = !0));
            }, this.delay);
    };
    k.B = function () {
        this.Lb();
        this.element.style.visibility = "hidden";
        this.element.style.width = "0";
        this.element.style.height = "0";
        this.visible = !1;
        this.Xi();
    };
    k.mn = function () {
        for (var a = l(this.items), b = a.next(); !b.done; b = a.next()) P(b.value.element, "selectedEmoticon");
    };
    k.getData = function () {
        var a = this,
            b = new XMLHttpRequest();
        return new Promise(function (c, d) {
            b.onload = function () {
                ic(b.status) ? c(b) : d(new hc(b));
            };
            b.onerror = function () {
                d(new hc(b));
            };
            b.open("GET", "https://emote.highwebmedia.com/autocomplete?slug=" + a.prefix + "&_=" + Date.now());
            b.withCredentials = !1;
            b.timeout = 6e4;
            b.send();
        });
    };
    k.appendItem = function (a, b) {
        var c = this,
            d = document.createElement("div");
        d.style.padding = "2px 8px";
        this.TN(a) && (d.style.display = "none");
        d.onclick = function (f) {
            zX(c, b, !1);
            f.preventDefault();
        };
        var e = document.createElement("div");
        e.textContent = a.jc;
        e.title = a.jc;
        e.style.overflow = "hidden";
        e.style.textOverflow = "ellipsis";
        d.appendChild(e);
        this.list.appendChild(d);
        return (a.element = d);
    };
    function zX(a, b, c) {
        a.ES = void 0 === a.selectedIndex ? a.prefix : a.items[a.selectedIndex].jc;
        a.selectedIndex = b;
        a.Vl(c);
        a.config.gb.focus();
    }
    k.TN = function () {
        return !1;
    };
    k.isVisible = function () {
        return this.visible;
    };
    var AX,
        BX = new y("hideEmoticons", {
            rc: function () {
                return 10 + Ob;
            },
        });
    Qv.ud.g(function () {
        BX.h(void 0);
    });
    function CX() {
        wX.apply(this, arguments);
    }
    q(CX, wX);
    k = CX.prototype;
    k.initData = function () {
        wX.prototype.initData.call(this);
        this.$f = document.createElement("div");
        this.ve = document.createElement("img");
        this.Li = document.createElement("div");
        this.NS = /(^|.*\s):([\w-]+)$/;
    };
    k.ia = function () {
        var a = this;
        O(this.$f, "previewWrapper");
        this.$f.style.display = "none";
        this.$f.style.width = "260px";
        this.$f.style.height = "110px";
        this.$f.style.lineHeight = "110px";
        this.$f.style.borderBottomWidth = "1px";
        this.$f.style.borderBottomStyle = "solid";
        this.$f.style.textAlign = "center";
        this.$f.onclick = function () {
            void 0 !== a.selectedIndex && HI.h(a.items[a.selectedIndex]);
        };
        this.element.appendChild(this.$f);
        wX.prototype.ia.call(this);
        this.ve.src = "https://static-assets.highwebmedia.com/tsdefaultassets/loading.png";
        this.ve.style.maxWidth = "240px";
        this.ve.style.maxHeight = "80px";
        this.ve.style.verticalAlign = "middle";
        this.ve.style.padding = "10px 10px 16px 10px";
        this.$f.appendChild(this.ve);
        O(this.Li, "hrefColor");
        this.Li.innerText = "VIEW / REPORT EMOTICON";
        this.Li.style.fontSize = "10px";
        this.Li.style.position = "relative";
        this.Li.style.bottom = "8px";
        this.Li.style.lineHeight = "0";
        this.Li.onmouseenter = function () {
            a.Li.style.textDecoration = "underline";
        };
        this.Li.onmouseleave = function () {
            a.Li.style.textDecoration = "none";
        };
        this.$f.appendChild(this.Li);
        this.H.add(
            G.g(function (b) {
                AX = b.A.lh;
                a.delay = parseInt(b.A.Da.Fn);
            })
        );
        this.H.add(
            mv.g(function (b) {
                a.delay = parseInt(b.Fn);
            })
        );
        this.H.add(
            BX.g(function () {
                void 0 !== a.S && a.B();
            })
        );
    };
    k.sK = function (a) {
        36 < sA(this.config.gb) && GA(this.config.gb) && (this.nx(a), this.D());
    };
    k.Xi = function () {
        wX.prototype.Xi.call(this);
        this.$f.style.display = "none";
    };
    k.Vl = function (a) {
        wX.prototype.Vl.call(this, a);
        void 0 !== this.selectedIndex && ((this.ve.src = "https://static-assets.highwebmedia.com/tsdefaultassets/loading.png"), (this.ve.src = this.items[this.selectedIndex].url), (this.$f.style.display = "block"));
    };
    function xX(a, b) {
        b = new H(b);
        L(b, "slug");
        var c = Vc(b, "emoticons"),
            d = [];
        c = l(c);
        for (var e = c.next(); !e.done; e = c.next()) (e = e.value), d.push({ jc: e.slug, url: e.url, element: DX, xm: e.score });
        d = d.map(function (f) {
            var g = void 0 === f.xm ? 0 : f.xm;
            f.jc === a.prefix ? (f.xm = g + 1e5) : 0 === f.jc.indexOf(a.prefix) && (f.xm = g + 9e3);
            return f;
        });
        d = d.sort(function (f, g) {
            return (void 0 === f.xm ? 0 : f.xm) - (void 0 === g.xm ? 0 : g.xm);
        });
        ad(b);
        return d;
    }
    k.TN = function (a) {
        return 0 <= AX.indexOf(a.jc);
    };
    var DX = document.createElement("div");
    G.g(function () {});
    function EX(a, b) {
        a.context = b;
        a.KQ.forEach(function (c) {
            c.il(b);
        });
        a.nU.forEach(function (c) {
            c.il(b);
        });
        FX(a, b);
        GX(a);
    }
    function FX(a, b) {
        var c = b.A.tb;
        a.YM.forEach(function (d) {
            d.ha();
        });
        !Uu() &&
            c &&
            b.A.ge &&
            z(
                b.l.event.Mc.g(function (d) {
                    a.Bu = d;
                    GX(a);
                }),
                a.H
            );
    }
    function GX(a) {
        if (void 0 !== a.context && void 0 !== a.Bu) {
            var b = function () {
                void 0 !== a.context &&
                    a.context.A.ge &&
                    a.YM.forEach(function (c) {
                        void 0 !== a.context && void 0 !== a.Bu && c.il(a.context.l, a.Bu.Sa, a.context.A.vf);
                    });
            };
            Wx(a.context, a.Bu)
                ? b()
                : Xx(a.context, a.Bu)
                      .then(b)
                      .catch(function () {});
        }
    }
    new (function () {
        var a = this;
        this.YM = [];
        this.KQ = [];
        this.nU = [];
        this.H = new Ub();
        G.g(function (b) {
            EX(a, b);
        });
        Kc.g(function () {
            Vb(a.H);
        });
    })();
    var HX = new y("toggleInputActionBar");
    function IX() {
        var a = this;
        this.jA = this.iA = this.mA = this.lA = this.rq = this.Ft = 0;
        this.yb = this.l = void 0;
        this.dP = "SessionMetrics";
        this.XF = function () {
            JX(a) &&
                (F(a.dP, {
                    messageSuccessCount: a.rq,
                    messageFailCount: a.Ft - a.rq,
                    tipSuccessCount: a.lA,
                    tipSuccessTotal: a.mA,
                    tipFailCount: a.iA,
                    tipFailTotal: a.jA,
                    refreshCount: void 0 === a.$E ? void 0 : Number(a.$E),
                    modeChange: !!a.EE,
                    newMode: a.EE,
                    currentMode: a.Mf,
                }),
                KX(a));
        };
        this.qS = function () {
            Jc(Y());
            F("ChangeVideoMode", { videoMode: Y() });
            JX(a) && Td(a.XR);
        };
        this.xM = function (b) {
            void 0 !== b.amount && (!0 === b.success ? ((a.lA += 1), (a.mA += b.amount)) : ((a.iA += 1), 0 < b.amount && (a.jA += b.amount)));
        };
        this.pM = function () {
            a.Ft += 1;
        };
        this.Iy = function (b) {
            void 0 !== a.l && b.K.username === a.l.username() && a.rq < a.Ft && (a.rq += 1);
        };
        this.zT = function () {
            void 0 !== window.sessionStorage && JX(a) && window.sessionStorage.setItem("refreshMeta", JSON.stringify({ href: window.location.href, unloadTimestamp: new Date().getTime() }));
        };
        KX(this);
        this.MR = new Date().getTime();
        this.$E = LX(this);
        this.Mf = Sv();
        Jc(this.Mf);
        this.XR = new Sd(
            function () {
                var b = Y();
                a.Mf !== b && ((a.EE = b), a.XF(), (a.Mf = b));
            },
            { zc: 100, Qc: 1 }
        );
        G.once(function () {
            Qv.ud.g(a.qS);
        });
        Kc.g(this.XF);
        v("beforeunload", window, this.XF);
        v("beforeunload", window, this.zT);
    }
    function MX(a, b) {
        b !== a.l && (void 0 !== a.l && (a.l.event.ly.removeListener(a.pM), a.l.event.Nq.removeListener(a.Iy), zE.removeListener(a.Iy)), (a.l = b), a.l.event.ly.g(a.pM), a.l.event.Nq.g(a.Iy), zE.g(a.Iy));
    }
    function NX(a, b) {
        b !== a.yb && (void 0 !== a.yb && a.yb.Om.removeListener(a.xM), (a.yb = b), a.yb.Om.g(a.xM, !1));
    }
    function JX(a) {
        return void 0 !== a.l && !a.l.Fd;
    }
    function KX(a) {
        a.Ft = 0;
        a.rq = 0;
        a.lA = 0;
        a.mA = 0;
        a.iA = 0;
        a.jA = 0;
        a.EE = void 0;
        a.$E = !1;
    }
    function OX() {
        if (void 0 !== window.performance) {
            var a = [];
            void 0 !== window.performance.getEntriesByType && (a = window.performance.getEntriesByType("navigation"));
            if (0 < a.length)
                switch (a[0].type) {
                    case "navigate":
                        return 0;
                    case "reload":
                        return 1;
                    case "back_forward":
                        return 2;
                    case "prerender":
                        return 3;
                    default:
                        return 255;
                }
            else return window.performance.navigation.type;
        }
    }
    function LX(a) {
        var b,
            c = OX();
        if (1 === c) return !0;
        if (0 === c || void 0 === c) {
            c = null === (b = window.sessionStorage) || void 0 === b ? void 0 : b.getItem("refreshMeta");
            if (null === c || void 0 === c) return;
            b = JSON.parse(c);
            return b.href === window.location.href && b.unloadTimestamp > a.MR - 1e4;
        }
        return !1;
    }
    var PX = { jM: "numPushNotificationTimeouts", zO: "pushNotificationTimeout" };
    function QX(a) {
        a = void 0 === a ? PX : a;
        Xu.call(this, a);
        var b = this;
        this.closed = new y("closed");
        this.fc.g(function () {
            b.close();
        });
    }
    q(QX, Xu);
    QX.prototype.initData = function (a) {
        Xu.prototype.initData.call(this);
        this.PE = a.jM;
        this.HG = a.zO;
        a = window.localStorage.getItem(this.PE);
        var b = window.localStorage.getItem(this.HG);
        null !== a && null !== b ? ((this.fA = new Date(b)), (this.OE = parseInt(a) + 1)) : ((this.fA = new Date()), (this.OE = 1));
    };
    QX.prototype.Gd = function () {
        Xu.prototype.Gd.call(this);
        this.xh();
    };
    QX.prototype.uB = function () {
        return new Date() >= this.fA;
    };
    QX.prototype.close = function () {
        this.element.style.display = "none";
        this.Lb();
        this.closed.h(void 0);
    };
    function RX(a, b) {
        var c = window.subscribeUserToPush;
        void 0 !== A.current.V &&
            c(A.current.V.dU)
                .then(function () {
                    a();
                    F("PushNotificationSettingsUpdated", { new_status: !0, old_status: !1, location: "notif-modal" });
                })
                .catch(b);
    }
    new y("userCountUpdate");
    function SX(a) {
        return Wy(this, function c() {
            var d;
            return Aa(c, function (e) {
                d = { room_user: a.xN, created_by: a.VI, banned_user: a.OH, is_silence: a.qL.toString() };
                return e.return(
                    E("api/ts/chat/ban-id/", d).then(function (f) {
                        return JSON.parse(f.responseText).banid;
                    })
                );
            });
        });
    }
    function TX(a, b, c, d, e) {
        E("edit_room_ban/", { banid: String(a), action: b, room_username: c })
            .then(function (f) {
                f = f.responseText;
                if (null === f) e();
                else {
                    try {
                        var g = JSON.parse(f);
                    } catch (h) {
                        e();
                        return;
                    }
                    void 0 !== g.error ? e() : d();
                }
            })
            .catch(function () {
                e();
            });
    }
    function UX(a, b) {
        var c = document.createElement("div");
        c.innerText = b;
        c.style.overflow = "hidden";
        c.style.maxHeight = "21px";
        a.appendChild(c);
    }
    function VX(a) {
        if (void 0 === a) return WX();
        a = { name: L(a, "name", !1), qr: L(a, "template", !1), QJ: Sc(a, "row1_label", !1), GN: Sc(a, "row2_label", !1), uO: Sc(a, "row3_label", !1), RJ: Sc(a, "row1_value", !1), HN: Sc(a, "row2_value", !1), vO: Sc(a, "row3_value", !1) };
        return WX(a);
    }
    function WX(a) {
        var b = document.createElement("tr"),
            c = document.createElement("tr"),
            d = document.createElement("tr");
        if (void 0 !== a) {
            var e = a.qr,
                f = [],
                g = [];
            if ("" !== a.QJ) {
                var h = document.createElement("th");
                h.style.padding = "2px";
                UX(h, a.QJ);
                f.push(h);
                b.appendChild(h);
                h = document.createElement("td");
                UX(h, a.RJ);
                b.appendChild(h);
                g.push(h);
                h.style.width = "50%";
                h.style.paddingLeft = "10px";
            } else (h = document.createElement("td")), UX(h, a.RJ), (h.colSpan = 2), g.push(h), b.appendChild(h), (h.style.textAlign = "center");
            "" !== a.GN
                ? ((h = document.createElement("th")),
                  (h.style.padding = "2px"),
                  (h.style.fontWeight = "bold"),
                  UX(h, a.GN),
                  f.push(h),
                  c.appendChild(h),
                  (h = document.createElement("td")),
                  UX(h, a.HN),
                  g.push(h),
                  c.appendChild(h),
                  (h.style.width = "50%"),
                  (h.style.paddingLeft = "10px"))
                : ((h = document.createElement("td")), UX(h, a.HN), (h.colSpan = 2), g.push(h), c.appendChild(h), (h.style.textAlign = "center"));
            "" !== a.uO
                ? ((h = document.createElement("th")),
                  (h.style.padding = "2px"),
                  UX(h, a.uO),
                  f.push(h),
                  d.appendChild(h),
                  (h = document.createElement("td")),
                  UX(h, a.vO),
                  g.push(h),
                  d.appendChild(h),
                  (h.style.width = "50%"),
                  (h.style.paddingLeft = "10px"))
                : ((h = document.createElement("td")), UX(h, a.vO), (h.colSpan = 2), g.push(h), d.appendChild(h), (h.style.textAlign = "center"));
            a = l(f);
            for (h = a.next(); !h.done; h = a.next()) (h = h.value), (h.style.overflow = "hidden"), (h.style.display = "block"), (h.style.cssFloat = "right");
            if ("3_rows_of_labels" === e) O(f[0], "threeRowsOfLabels"), (f[0].style.display = "block"), (f[0].style.margin = "0px auto"), (f[0].style.height = "16px"), (f[0].style.fontWeight = "bold");
            else if ("3_rows_11_21_31" === e || "3_rows_11_22_32" === e) O(g[0], "threeRows-11-21-31"), (g[0].style.fontWeight = "bold");
        } else (e = document.createElement("td")), b.appendChild(e.cloneNode()), c.appendChild(e.cloneNode()), d.appendChild(e.cloneNode());
        O(b, "rowOne");
        b.style.height = "33.3333%";
        O(c, "rowTwo");
        c.style.height = "33.3333%";
        O(d, "rowThree");
        d.style.height = "33.3333%";
        e = document.createElement("table");
        e.id = "AppPanelTable";
        e.style.fontSize = "11px";
        e.style.lineHeight = "1.7em";
        e.style.width = "100%";
        e.style.height = "100%";
        e.style.borderCollapse = "collapse";
        e.style.margin = "0 auto";
        e.style.tableLayout = "fixed";
        e.appendChild(b);
        e.appendChild(c);
        e.appendChild(d);
        return e;
    }
    function XX(a) {
        var b = new H(a);
        a = { backgroundColor: Sc(b, "background-color", !1), color: Sc(b, "color", !1), textAlign: Sc(b, "text-align", !1), fontStyle: Sc(b, "font-style", !1), fontWeight: Sc(b, "font-weight", !1) };
        var c = Zc(b, "col_1", !1);
        "" !== c && (a.qa = YX(c));
        b = Zc(b, "col_2", !1);
        "" !== b && (a.data = YX(b));
        return a;
    }
    function YX(a) {
        a = new H(a);
        return {
            backgroundColor: Sc(a, "background-color", !1),
            color: Sc(a, "color", !1),
            left: Sc(a, "left", !1),
            textAlign: Sc(a, "text-align", !1),
            fontStyle: Sc(a, "font-style", !1),
            fontWeight: Sc(a, "font-weight", !1),
            value: Sc(a, "value", !1),
            width: Sc(a, "width", !1),
        };
    }
    function ZX(a) {
        var b = document.createElement("div");
        b.style.height = "23px";
        b.style.lineHeight = "23px";
        b.style.width = "270px";
        if (void 0 !== a) {
            b.style.backgroundColor = a.backgroundColor;
            b.style.color = a.color;
            b.style.fontStyle = a.fontStyle;
            b.style.fontWeight = a.fontWeight;
            b.style.textAlign = a.textAlign;
            if (void 0 !== a.qa) {
                var c = $X(a.qa);
                b.appendChild(c);
            }
            void 0 !== a.data && ((a = $X(a.data)), b.appendChild(a));
        }
        return b;
    }
    function $X(a) {
        var b = document.createElement("div");
        b.style.position = "absolute";
        b.style.whiteSpace = "nowrap";
        b.style.overflow = "hidden";
        b.style.textOverflow = "ellipsis";
        b.style.position = "absolute";
        b.style.backgroundColor = a.backgroundColor;
        b.style.color = a.color;
        b.style.fontStyle = a.fontStyle;
        b.style.fontWeight = a.fontWeight;
        b.style.textAlign = a.textAlign;
        b.innerText = a.value;
        b.style.width = a.width;
        b.style.left = a.left;
        return b;
    }
    function aY() {
        w.call(this);
        var a = this;
        this.Ty = new y("panelUpdated");
        this.Rl = !1;
        this.element.style.display = "inline-block";
        this.element.style.paddingLeft = "5px";
        this.element.style.paddingTop = "3px";
        this.element.style.paddingRight = "5px";
        this.element.style.paddingBottom = "3px";
        this.element.style.position = "";
        this.element.style.width = "270px";
        this.element.style.height = "69px";
        this.element.style.textShadow = "none";
        this.element.style.fontSize = "11px";
        this.element.style.lineHeight = "1.7em";
        G.g(function (b) {
            a.fp(b.l.j());
            b.l.event.su.g(function () {
                a.fp(b.l.j());
            });
            b.l.event.YP.g(function () {
                a.fp(b.l.j());
            });
        });
        this.dn = VX();
        this.element.appendChild(this.dn);
    }
    q(aY, w);
    aY.prototype.fp = function (a) {
        var b = this;
        C("api/panel_context/" + a + "/")
            .then(function (c) {
                0 < b.element.children.length && b.element.removeChild(b.dn);
                c = new H(c.responseText);
                if ("no-content" === L(c, "code", !1)) (b.Rl = !1), (b.dn = VX());
                else {
                    b.Rl = !0;
                    var d = L(c, "template", !1);
                    switch (d) {
                        case "image_template":
                            L(c, "name", !1);
                            L(c, "template", !1);
                            var e = Pc(c, "layers");
                            if (void 0 !== e && e instanceof Array && 0 !== e.length) {
                                d = [];
                                var f = l(e);
                                for (var g = f.next(); !g.done; g = f.next()) {
                                    e = d;
                                    var h = e.push;
                                    g = JSON.stringify(g.value);
                                    g = new H(g);
                                    g = {
                                        color: Sc(g, "color", !1),
                                        filename: Sc(g, "filename", !1),
                                        fontFamily: Sc(g, "font-family", !1),
                                        fontSize: Sc(g, "font-size", !1),
                                        fontStyle: Sc(g, "font-style", !1),
                                        fontWeight: Sc(g, "font-weight", !1),
                                        height: Sc(g, "height", !1),
                                        pk: Sc(g, "image_url", !1),
                                        CL: Sc(g, "type", !1),
                                        left: Sc(g, "left", !1),
                                        maxWidth: Sc(g, "max-width", !1),
                                        opacity: Sc(g, "opacity", !1),
                                        text: Sc(g, "text", !1),
                                        textAlign: Sc(g, "text-align", !1),
                                        top: Sc(g, "top", !1),
                                        width: Sc(g, "width", !1),
                                    };
                                    h.call(e, g);
                                }
                                f = d;
                            }
                            d = Zc(c, "table", !1);
                            if (0 !== d.length) {
                                d = new H(d);
                                var m = { backgroundColor: Sc(d, "background-color", !1), color: Sc(d, "color", !1), textAlign: Sc(d, "text-align", !1), fontStyle: Sc(d, "font-style", !1), fontWeight: Sc(d, "font-weight", !1) };
                                e = Zc(d, "row_1", !1);
                                "" !== e && (m.uT = XX(e));
                                e = Zc(d, "row_2", !1);
                                "" !== e && (m.wT = XX(e));
                                d = Zc(d, "row_3", !1);
                                "" !== d && (m.vT = XX(d));
                            }
                            d = document.createElement("div");
                            d.style.position = "absolute";
                            d.style.height = "69px";
                            d.style.width = "270px";
                            d.style.backgroundColor = "white";
                            d.style.overflow = "hidden";
                            d.style.font = "1em 'UbuntuRegular', Arial, Helvetica, sans-serif";
                            if (void 0 !== f)
                                for (f = l(f), e = f.next(); !e.done; e = f.next())
                                    if (((e = e.value), "text" === e.CL)) {
                                        h = d;
                                        g = h.appendChild;
                                        var n = document.createElement("span");
                                        n.style.position = "absolute";
                                        n.style.whiteSpace = "nowrap";
                                        n.style.overflow = "hidden";
                                        n.style.textOverflow = "ellipsis";
                                        n.style.lineHeight = "normal";
                                        n.style.color = e.color;
                                        n.style.fontFamily = e.fontFamily;
                                        n.style.fontSize = e.fontSize;
                                        n.style.fontStyle = e.fontStyle;
                                        n.style.fontWeight = e.fontWeight;
                                        n.style.left = e.left;
                                        n.style.maxWidth = e.maxWidth;
                                        n.innerText = e.text;
                                        n.style.textAlign = e.textAlign;
                                        n.style.top = e.top;
                                        n.style.width = e.width;
                                        g.call(h, n);
                                    } else
                                        "image" === e.CL &&
                                            ((h = d),
                                            (g = h.appendChild),
                                            (n = document.createElement("img")),
                                            (n.style.position = "absolute"),
                                            (n.alt = ""),
                                            (n.style.height = e.height),
                                            (n.src = e.pk),
                                            (n.style.left = e.left),
                                            (n.style.top = e.top),
                                            (n.style.width = e.width),
                                            (n.style.opacity = e.opacity),
                                            g.call(h, n),
                                            (d.style.color = "#000000"));
                            if (void 0 !== m) {
                                f = m;
                                m = document.createElement("div");
                                m.style.height = "69px";
                                m.style.width = "270px";
                                m.style.backgroundColor = f.backgroundColor;
                                m.style.color = f.color;
                                m.style.fontStyle = f.fontStyle;
                                m.style.fontWeight = f.fontWeight;
                                m.style.textAlign = f.textAlign;
                                f = l([f.uT, f.wT, f.vT]);
                                for (e = f.next(); !e.done; e = f.next()) (e = e.value), (e = void 0 !== e ? ZX(e) : ZX()), m.appendChild(e);
                                d.appendChild(m);
                            }
                            b.dn = d;
                            break;
                        case "3_rows_11_21_31":
                        case "3_rows_11_22_32":
                        case "3_rows_12_21_31":
                        case "3_rows_12_22_31":
                        case "3_rows_of_labels":
                            b.dn = VX(c);
                            break;
                        default:
                            (b.Rl = !1), (b.dn = VX()), t("template of type (" + d + "): is not supported", "appPanel.ts", "common");
                    }
                    ad(c);
                }
                b.element.appendChild(b.dn);
                b.Ty.h(void 0);
            })
            .catch(function (c) {
                r("Error fetching app panel (" + c + ")", "appPanel.ts", "common");
            });
    };
    function bY(a) {
        var b = this;
        this.config = a;
        this.Id = new aY();
        this.Id.element.style.width = "270px";
        this.Id.element.style.position = "relative";
        this.vB = this.Rl = !1;
        G.g(function () {
            b.Rl = !1;
            b.vB = !1;
            b.Tv = void 0;
            b.nh = void 0;
            window.setTimeout(function () {
                b.vB = !0;
                b.Rl && cY(b);
            }, 2e3);
        });
        this.Id.Ty.g(function () {
            b.Rl = !0;
            b.vB && cY(b);
        });
    }
    function cY(a) {
        if (a.Id.Rl) {
            if (void 0 !== a.nh) {
                for (var b = 0; b < a.nh.children.length; b += 1) a.nh.removeChild(a.nh.children.item(b));
                a.nh.appendChild(dY(a));
            }
            void 0 === a.Tv
                ? (a.config.za(a.Id.element, function () {
                      return eY(a);
                  }),
                  (a.Tv = a.config.Us()))
                : ((b = a.Id.element.offsetTop - a.config.bR()),
                  (0 > b || b > a.config.aR() - 30) &&
                      20 < a.config.ny(a.Tv) &&
                      (a.config.lz(a.Id.element),
                      a.config.za(a.Id.element, function () {
                          return eY(a);
                      }),
                      (a.Tv = a.config.Us())));
        }
    }
    function dY(a) {
        a = a.Id.element.cloneNode(!0);
        a.style.width = "270px";
        return a;
    }
    function eY(a) {
        void 0 !== a.nh && null !== a.nh.parentNode && a.nh.parentNode.removeChild(a.nh);
        a.nh = document.createElement("div");
        a.nh.appendChild(dY(a));
        return a.nh;
    }
    function fY(a, b, c, d, e) {
        function f(n) {
            var p;
            null === n || void 0 === n ? void 0 : n.preventDefault();
            null === (p = g.parentElement) || void 0 === p ? void 0 : p.removeChild(g);
            Array.from(document.getElementsByClassName("undo-ban-options-" + a.Wk)).forEach(function (u) {
                var x;
                null === (x = u.parentElement) || void 0 === x ? void 0 : x.removeChild(u);
            });
        }
        var g = V("div", { className: "undo-ban-options-" + a.Wk, style: { boxSizing: "border-box", padding: "2px 5px 3px 25px", fontWeight: "bold" } }),
            h = V(
                "a",
                {
                    href: "#",
                    className: "msg-link",
                    onClick: function (n) {
                        null === n || void 0 === n ? void 0 : n.preventDefault();
                        f();
                        TX(
                            b,
                            a.Yl ? "remove_ban" : "remove_silence",
                            c.A.j,
                            function () {
                                d(a.Yl ? jp : kp);
                            },
                            function () {
                                d(a.Yl ? lp : np);
                            }
                        );
                    },
                },
                op
            ),
            m = V("a", { href: "#", style: { color: "inherit" }, onClick: f }, "(", ti, ")");
        g.appendChild(h);
        a.Yl ||
            c.A.userName !== c.A.j ||
            ((h = V(
                "a",
                {
                    href: "#",
                    style: { color: "red" },
                    onClick: function (n) {
                        null === n || void 0 === n ? void 0 : n.preventDefault();
                        Md(He(a.Wk), function () {
                            f();
                            TX(
                                b,
                                "convert_to_ban",
                                c.A.j,
                                function () {
                                    lQ(c.l, a.Wk);
                                    e({ Wk: a.Wk, jr: c.A.j, Yl: !0 }, c);
                                },
                                function () {
                                    d(mp);
                                }
                            );
                        });
                    },
                },
                pp
            )),
            g.appendChild(document.createTextNode("\u00a0".repeat(5))),
            g.appendChild(h));
        g.appendChild(document.createTextNode("\u00a0".repeat(5)));
        g.appendChild(m);
        return g;
    }
    function gY() {
        this.ej = new Set();
        this.SK();
    }
    gY.prototype.SK = function () {
        var a = this;
        Lc.g(function (b) {
            a.ej.add(b);
        });
        Kc.g(function () {
            a.ej.clear();
        });
    };
    var hY = new y("goPMList"),
        iY = new y("ignoreUser");
    function jY(a, b) {
        w.call(this);
        var c = this,
            d = { marginLeft: "8px", display: b === B.getState().j ? "none" : "" };
        this.element = V(
            "div",
            { colorClass: "PMControlBar", style: { width: "100%", height: "31px", lineHeight: "32px", borderBottomWidth: "1px", borderBottomStyle: "solid", fontSize: "12px", justifyContent: "flex-start" }, id: "pm-control-bar" },
            V(
                "span",
                {
                    colorClass: "backButton",
                    style: { marginLeft: "10px", cursor: "pointer" },
                    onClick: function () {
                        hY.h(a);
                    },
                },
                To
            ),
            V("span", { style: d }, bq),
            A.current.hz &&
                V(OF, {
                    classRef: function (e) {
                        return (c.FD = e);
                    },
                    username: b,
                    style: { marginTop: "8px" },
                })
        );
        this.element.classList.add("pm-control-bar");
    }
    q(jY, w);
    jY.prototype.dispose = function () {
        var a;
        null === (a = this.FD) || void 0 === a ? void 0 : a.dispose();
    };
    function kY() {
        var a = this;
        this.hr = !1;
        this.fK = function () {
            return a.element;
        };
        this.vb = function () {
            return a.hr;
        };
        this.FK = function () {
            a.element.style.display = "none";
            a.hr = !1;
        };
        this.ZN = function () {
            a.element.style.display = "block";
            a.hr = !0;
        };
        this.element = V("div", { style: { display: "none", textAlign: "center" } }, Uo);
    }
    function lY(a) {
        w.call(this);
        var b = this;
        this.config = a;
        this.se = document.createElement("a");
        this.se.style.textDecoration = "none";
        this.se.innerText = " (open conversation)";
        this.se.style.cursor = "pointer";
        this.se.className = "pmChatLink";
        this.se.onclick = function (c) {
            c.stopPropagation();
            b.config.onClick();
        };
    }
    q(lY, w);
    new y("pmReceived");
    function mY() {
        gY.call(this);
    }
    q(mY, gY);
    mY.prototype.SK = function () {
        var a = this;
        IU.g(function (b) {
            b.Mb && a.ej.add(b.username);
        });
        Kc.g(function () {
            a.ej.clear();
        });
    };
    function nY() {
        Jz.apply(this, arguments);
    }
    q(nY, Jz);
    nY.prototype.ia = function () {
        for (var a = l(this.element.querySelectorAll("a")), b = a.next(); !b.done; b = a.next()) O(b.value, "camSubjectTagColor");
        Nx(this.element);
    };
    nY.prototype.createElement = function (a) {
        return V("ul", { className: "subject camSubjectColor" }, V("li", { style: oY, dangerouslySetInnerHTML: { __html: a.zG } }));
    };
    var oY = { width: "auto", background: "0 0", border: "0", margin: "0", padding: "0 2px" };
    function pY() {
        Jz.apply(this, arguments);
    }
    q(pY, Jz);
    pY.prototype.createElement = function (a) {
        var b = a.Za.Oc,
            c = -1 < b ? T(ee("%(viewerCount)s viewer", "%(viewerCount)s viewers", b), { viewerCount: b }, !0) : "";
        -1 < b &&
            (new Vd("SmplCard2b").active
                ? (c = ME(b))
                : new Xd(["SmplCrd3T1", "SmplCrd3T2", "SmplCrd3T3", "SmplCrd3T4"], "RmCrdOvrhl").active && ((c = ME(b)), (c = T(ee("%(shortenedViewCount)s viewer", "%(shortenedViewCount)s viewers", b), { shortenedViewCount: c }, !0))));
        b = "" !== c && "" !== a.Za.xO;
        var d = { className: "details", style: qY },
            e = { className: "cardTitle title", style: rY },
            f = V("a", { className: "camHrefColor", href: "/" + a.Za.j + "/", "data-room-nav": "true" }, a.Za.j),
            g = V("span", { className: "age" }, a.Za.Fb);
        var h = a.Za.nc;
        h = h.includes("t") ? "genders" : "gender" + h;
        return V(
            "div",
            d,
            V("div", e, f, V("div", { className: "age_gender_container" }, g, V("span", { className: "camAltTextColor " + h, title: bx(a.Za.nc) }))),
            V(nY, { zG: a.Za.zG }),
            V(
                "ul",
                { className: "sub-info camAltTextColor", style: sY },
                void 0 !== a.Za.location ? V("li", { className: "location", style: tY }, a.Za.location) : "",
                V(
                    "li",
                    { className: "cams " + (b ? "" : "no-viewers"), style: tY },
                    V("span", { className: "time" + (-1 === a.Za.Oc ? " time-since" : "") }, a.Za.xO),
                    V("span", { className: "comma" }, b ? ", " : ""),
                    V("span", { className: "viewers" }, c)
                )
            )
        );
    };
    var qY = { padding: "4px 7px 0", textAlign: "left" },
        tY = { width: "145px", height: "15px", overflow: "hidden", margin: "0", padding: "0 0 0 18px", whiteSpace: "nowrap" },
        sY = { listStyle: "none", margin: "0", padding: "0 0 4px", overflow: "hidden" },
        rY = { width: "100%", overflow: "hidden", borderBottomWidth: "1px", borderBottomStyle: "solid" };
    function uY(a, b) {
        return void 0 !== a && ((a = vY(a)), "unknown" !== vY(a)) ? a.toLowerCase() : void 0 === b ? "unknown" : b;
    }
    function vY(a) {
        switch (a) {
            case "Recommended":
                return "Recommended";
            case "Recommended_popular":
                return "Recommended_popular";
            default:
                return "unknown";
        }
    }
    function wY(a) {
        function b(c, d) {
            c = N(c, d, !1);
            return isNaN(c) ? -1 : c;
        }
        return {
            j: L(a, "room", !1) || L(a, "username", !1),
            label: L(a, "label", !1) || L(a, "room_status_label", !1),
            qk: L(a, "img"),
            nc: L(a, "gender"),
            zG: L(a, "subject", !1) || L(a, "room_subject", !1),
            xO: L(a, "time_online"),
            Oc: Math.max(b(a, "viewers"), b(a, "num_users")),
            location: K(a, "location"),
            Fb: L(a, "display_age", !1) || L(a, "age", !1),
            Td: M(a, "is_following"),
            $c: ds(K(a, "source_name")),
            gU: Tc(a, "source_position"),
            Xk: K(a, "source_info"),
        };
    }
    function xY() {
        Jz.apply(this, arguments);
    }
    q(xY, Jz);
    xY.prototype.ia = function (a) {
        var b = this;
        this.Z = a;
        this.bG();
        Ab(["click", "mousedown", "touchstart"], this.element, function (c) {
            c.target instanceof HTMLElement && null !== c.target.getAttribute("data-room-nav") && b.Z.ui.qN.h({ index: b.Z.sN, Za: b.Z.Za, event: c });
        });
    };
    xY.prototype.createElement = function (a) {
        var b = this,
            c = uY(a.Za.Xk, a.Za.label);
        return V(
            "li",
            {
                className: "roomCard camBgColor camBorderColor",
                style: yY,
                onClick: function (d) {
                    d.target instanceof HTMLElement && null !== d.target.getAttribute("data-room-nav") && b.Z.ui.rN.h({ index: b.Z.sN, Za: b.Z.Za, event: d });
                },
            },
            V(
                "a",
                { className: "camHrefColor", style: zY, href: "/" + a.Za.j + "/", "data-room-nav": "true", "data-room": a.Za.j },
                V("img", {
                    style: AY,
                    width: 180,
                    height: 101,
                    src: a.Za.qk,
                    loading: "lazy",
                    alt: a.Za.j,
                    "data-room-nav": "true",
                    ref: function (d) {
                        b.qk = d;
                    },
                    className: "room_thumbnail",
                })
            ),
            V(BY, { tN: c }),
            V(pY, { Za: a.Za }),
            V(Oz, { jc: a.Za.j, Td: a.Za.Td })
        );
    };
    xY.prototype.bG = function () {
        var a = this;
        v("mouseenter", this.element, function () {
            ox && Kx(a.Z.Za.j, a.qk);
        });
        v("mouseleave", this.element, function () {
            ox && Lx(a.Z.Za.j);
        });
    };
    xY.prototype.Xg = function () {
        ox && void 0 !== this.Z && Lx(this.Z.Za.j);
        Jz.prototype.Xg.call(this);
    };
    var CY = { promoted: yk, recommended: zk, recommended_popular: Ak, offline: Bk, exhib: Ck, new: Dk, private: Ek, gaming: Fk },
        DY = {
            promoted: "thumbnail_label thumbnail_label_c_promoted",
            offline: "thumbnail_label thumbnail_label_offline",
            exhib: "thumbnail_label thumbnail_label_exhibitionist",
            new: "thumbnail_label thumbnail_label_c_new",
            private: "thumbnail_label_featured thumbnail_label_c_private_show",
            gaming: "thumbnail_label thumbnail_label_c_gaming",
            recommended: "thumbnail_label thumbnail_label_c thumbnail_label_recommender",
            recommended_popular: "thumbnail_label thumbnail_label_c thumbnail_label_recommender",
        },
        yY = {
            display: "inline-block",
            width: "180px",
            cssFloat: "left",
            margin: "0 7px 7px 0",
            borderWidth: "1px",
            borderStyle: "solid",
            borderRadius: "4px",
            maxHeight: "222px",
            overflow: "hidden",
            position: "relative",
            boxSizing: "border-box",
        },
        zY = { textDecoration: "none" },
        AY = { display: "block", borderStyle: "none" };
    function BY(a) {
        var b, c;
        return V("div", { className: null !== (b = DY[a.tN]) && void 0 !== b ? b : "thumbnail_label" }, null !== (c = CY[a.tN]) && void 0 !== c ? c : "");
    }
    function EY() {
        var a = this;
        this.KR = 10;
        this.vz = new Set();
        this.offset = 0;
        this.next = dt(function () {
            return Wy(a, function c() {
                var d = this,
                    e,
                    f,
                    g,
                    h,
                    m;
                return Aa(c, function (n) {
                    if (1 == n.aa) return (e = d), sa(n, FY(d), 2);
                    f = n.td;
                    g = new H(f.responseText);
                    h = JSON.parse(Zc(g, "rooms"));
                    m = h.map(function (p) {
                        return wY(new H(p));
                    });
                    d.offset += m.length;
                    return n.return(
                        m
                            .filter(function (p) {
                                return !e.vz.has(p.j);
                            })
                            .filter(function (p) {
                                e.vz.add(p);
                                return !0;
                            })
                    );
                });
            });
        }, []);
        this.offset = 0;
        this.listener = G.g(
            function (b) {
                a.Cw = dx(b.A.zu);
                a.ck = b.l.j();
                a.vz.add(a.ck);
            },
            !1,
            !0
        );
    }
    function GY(a, b) {
        b = void 0 === b ? [] : b;
        a.cK = b;
        a.offset = 0;
        a.vz = new Set();
    }
    function FY(a) {
        var b = new URLSearchParams(window.location.search);
        b.set("genders", (0 < a.cK.length ? a.cK : void 0 === a.Cw ? window.default_gender.split("") : [a.Cw]).join(","));
        b.set("room", a.ck);
        b.set("limit", "" + a.KR);
        b.set("offset", "" + a.offset);
        return C("api/ts/roomlist/more-rooms/?" + b.toString());
    }
    EY.prototype.dispose = function () {
        this.listener.removeListener();
    };
    function HY(a) {
        Jz.call(this, a);
        this.Ho = [];
        a = new Xd(["SmplCrd3T1", "SmplCrd3T2", "SmplCrd3T3", "SmplCrd3T4"], "RmCrdOvrhl");
        a.active && ((a = a.lp), void 0 !== a && ((a = parseInt(a.replace("SmplCrd3T", ""))), this.element.classList.add("simple_" + a)));
    }
    q(HY, Jz);
    HY.prototype.createElement = function () {
        return V("ul", { className: "list" });
    };
    HY.prototype.ia = function (a) {
        var b = this;
        Jz.prototype.ia.call(this, a);
        this.uN = a;
        G.g(function (c) {
            b.pQ = c.A.j;
        });
        this.rN = new y("roomClick");
        this.rN.g(function (c) {
            F("LoadRoomFromRoomList", { location: b.uN.nT, from_broadcaster: b.pQ, broadcaster: c.Za.j });
            A.current.nb ? GB.h(c.Za.j) : (c.event.preventDefault(), Hr.h(c.Za.j));
        });
        this.qN = new y("roomBeforeClick");
        this.qN.g(function (c) {
            var d = c.Za.j,
                e = "un" === c.Za.$c ? a.oT : c.Za.$c,
                f = c.index;
            c = { sourceIndex: void 0 === a.sourceIndex ? c.Za.gU : a.sourceIndex(c), vx: void 0 === a.vx ? void 0 : a.vx(c), Xk: void 0 === a.Xk ? void 0 : a.Xk(c) };
            nx(d, e, f, c);
        });
    };
    HY.prototype.il = function () {
        Jz.prototype.il.call(this);
        Jb(this);
        this.Ho = [];
        for (var a = this.uN.Ho(), b = !1, c = 0; c < a.length; c++) {
            var d = wY(new H(a[c]));
            var e = new xY({ ui: this, sN: c + 1, Za: d, animate: ox });
            this.Ho.push(e);
            this.G(e);
            b = b || void 0 !== d.location;
        }
        a = this.element;
        b ? a.classList.add("show-location") : a.classList.remove("show-location");
    };
    function IY() {
        w.call(this);
        var a = this;
        this.Wa = document.createElement("div");
        this.Gr = document.createElement("div");
        this.Rm = document.createElement("div");
        this.Gl = document.createElement("div");
        this.hl = document.createElement("span");
        this.ek = document.createElement("span");
        this.al = document.createElement("img");
        this.$k = document.createElement("img");
        this.hv = document.createElement("img");
        this.gv = document.createElement("img");
        this.rf = document.createElement("span");
        this.J = "";
        this.$e = 0;
        this.VO = !1;
        this.Fr = new lU({ ih: !1, af: void 0 }, this.NT.bind(this), this.sS.bind(this));
        this.FL = !1;
        this.Gr.style.display = "inline-block";
        this.Gr.style.verticalAlign = "top";
        this.Rm.style.display = "inline-block";
        this.Rm.style.cursor = "pointer";
        this.Rm.style.verticalAlign = "top";
        this.hl.style.margin = "0 3px";
        this.hl.style.verticalAlign = "top";
        this.Rm.appendChild(this.hl);
        JY(this);
        this.Rm.appendChild(this.al);
        this.Rm.appendChild(this.hv);
        this.Gr.appendChild(this.Rm);
        this.rf.style.margin = "0 3px";
        this.rf.style.verticalAlign = "top";
        this.rf.onclick = function () {
            return F("SatisfiedClicked");
        };
        this.Gr.appendChild(this.rf);
        this.Gl.style.display = "inline-block";
        this.Gl.style.cursor = "pointer";
        this.Gl.style.verticalAlign = "top";
        KY(this);
        this.Gl.appendChild(this.$k);
        this.Gl.appendChild(this.gv);
        this.ek.style.margin = "0 3px";
        this.ek.style.verticalAlign = "top";
        this.Gl.appendChild(this.ek);
        this.Gr.appendChild(this.Gl);
        this.Wa.appendChild(this.Gr);
        this.element.appendChild(this.Wa);
        mU(this.Fr);
        G.g(function (b) {
            a.I = b.l;
            a.J = b.A.j;
            a.$e = b.A.$e;
            b.A.rD && void 0 === b.A.Vz
                ? ((a.hl.style.display = "none"), (a.rf.style.display = "none"), (a.ek.style.display = "none"))
                : ((a.hl.innerText = "" + b.A.yj.hl),
                  (a.rf.innerText = b.A.yj.rf + "%"),
                  (a.ek.innerText = "" + b.A.yj.ek),
                  (a.hl.style.display = "inline"),
                  (a.rf.style.display = "inline"),
                  (a.ek.style.display = "inline"),
                  85 < b.A.yj.rf ? O(a.rf, "highPercent") : 65 < b.A.yj.rf ? O(a.rf, "mediumPercent") : O(a.rf, "lowPercent"));
            0 === b.A.jE ? nU(a.Fr, { ih: !0, af: "down" }, Promise.resolve(!0)) : 10 === b.A.jE ? nU(a.Fr, { ih: !0, af: "up" }, Promise.resolve(!0)) : nU(a.Fr, { ih: !1, af: void 0 }, Promise.resolve(!0));
            a.VO = b.A.yL;
            25 <= a.$e ? a.Sw() : a.Jw();
            a.FL || LY(a);
        });
    }
    q(IY, w);
    IY.prototype.sS = function () {};
    function MY(a, b) {
        a.src = b;
        a.height = 15;
        a.width = 15;
        a.style.height = "15px";
        a.style.width = "15px";
        a.style.verticalAlign = "top";
        a.style.margin = "0 3px";
        a.style.opacity = "0.8";
    }
    function JY(a) {
        MY(a.al, "https://static-assets.highwebmedia.com/tsdefaultassets/thumbs-up-inactive.svg");
        MY(a.hv, "https://static-assets.highwebmedia.com/tsdefaultassets/thumbs-up-active.svg");
        a.Rm.onclick = function (b) {
            F("SatisfiedClicked");
            b.stopPropagation();
            25 <= a.$e && (!1 === a.ih || "down" === a.af)
                ? (NY(a, !0),
                  (b = E("tipping/rate_model/" + a.J + "/", { rating: "10" })
                      .then(function () {
                          var c = a.I.event.ya,
                              d = c.h;
                          var e = a.J;
                          e = T(S("Note: Your confidential vote of thumbs up for %(room)s has been recorded. You may change your vote at any time today. Thank you for your feedback."), { room: vc(e) }, !0);
                          d.call(c, { wa: [[W(e)]], Fa: !0 });
                          return !0;
                      })
                      .catch(function (c) {
                          r("Error rating model: " + c, "satisfactionScore.ts", "common");
                          return !1;
                      })),
                  nU(a.Fr, { ih: !0, af: "up" }, b))
                : "up" === a.af && NY(a, !1);
        };
    }
    function KY(a) {
        MY(a.$k, "https://static-assets.highwebmedia.com/tsdefaultassets/thumbs-down-inactive.svg");
        MY(a.gv, "https://static-assets.highwebmedia.com/tsdefaultassets/thumbs-down-active.svg");
        a.Gl.onclick = function (b) {
            F("SatisfiedClicked");
            b.stopPropagation();
            25 <= a.$e && (!1 === a.ih || "up" === a.af)
                ? Md(ye(a.J), function () {
                      NY(a, !0);
                      var c = E("tipping/rate_model/" + a.J + "/", { rating: "0" })
                          .then(function () {
                              var d = a.J;
                              d = T(
                                  S("Note: Your confidential vote of thumbs down for %(room)s has been recorded. You may vote once every 90 days, and you may change your vote at any time today.  Thank you for your feedback."),
                                  { room: vc(d) },
                                  !0
                              );
                              a.VO &&
                                  ((d = a.J),
                                  (d = T(
                                      S("Note: Your confidential vote of thumbs down for %(room)s has been refreshed and will expire in 90 days. You may change your vote at any time today. Thank you for your feedback."),
                                      { room: vc(d) },
                                      !0
                                  )));
                              a.I.event.ya.h({ wa: [[W(d)]], Fa: !0 });
                              return !0;
                          })
                          .catch(function (d) {
                              r("Error rating model: " + d, "satisfactionScore.ts", "common");
                              return !1;
                          });
                      nU(a.Fr, { ih: !0, af: "down" }, c);
                  })
                : "down" === a.af && NY(a, !1);
        };
    }
    IY.prototype.Sw = function () {
        this.al.style.opacity = "1";
        this.$k.style.opacity = "1";
        this.al.style.cursor = "pointer";
        this.$k.style.cursor = "pointer";
    };
    IY.prototype.Jw = function () {
        this.al.style.opacity = "0.65";
        this.$k.style.opacity = "0.65";
        this.al.style.cursor = "";
        this.$k.style.cursor = "";
    };
    IY.prototype.NT = function (a) {
        void 0 === a.af || !1 === a.ih
            ? ((this.ih = !1), (this.af = void 0), (this.gv.style.display = "none"), (this.$k.style.display = ""), (this.hv.style.display = "none"), (this.al.style.display = ""))
            : "up" === a.af
            ? ((this.ih = !0), (this.af = "up"), (this.gv.style.display = "none"), (this.$k.style.display = ""), (this.hv.style.display = ""), (this.al.style.display = "none"))
            : "down" === a.af && ((this.ih = !0), (this.af = "down"), (this.gv.style.display = ""), (this.$k.style.display = "none"), (this.hv.style.display = "none"), (this.al.style.display = ""));
    };
    function LY(a) {
        a.FL = !0;
        VA.g(function (b) {
            if (a.I.j() === b.J) {
                if (25 <= b.Ua && (a.Sw(), 25 > a.$e)) {
                    var c = a.I.event.ya,
                        d = c.h;
                    var e = a.J;
                    e = T(
                        S("Note: For tipping at least %(tokens)s tokens today, you can now vote what you think about %(room)s. Your vote is confidential. See below for the satisfaction feedback controls."),
                        { tokens: 25, room: vc(e) },
                        !0
                    );
                    d.call(c, { wa: [[W(e)]], Fa: !0 });
                }
                a.$e = b.Ua;
            }
        });
        WA.g(function () {
            -1 !== ["privatewatching", "privatespying"].indexOf(a.I.status) &&
                C("tipping/tips_in_last_24/" + a.J + "/")
                    .then(function (b) {
                        b = N(new H(b.responseText), "tipped_performer_last_24hrs");
                        VA.h({ Ua: b, J: a.I.j() });
                    })
                    .catch(function () {});
        });
    }
    var OY = new Set();
    function PY(a) {
        OY.forEach(function (b) {
            a !== b.J && b.dispose();
        });
    }
    OW.g(function (a) {
        PY(a.j);
    });
    function QY(a, b) {
        var c;
        null === (c = a.Hg) || void 0 === c ? void 0 : c.dispose();
        if ((c = "AnonymousUser" !== b.userName && 0 < b.BB.trim().length)) {
            c = b.vp;
            var d = b.j;
            c === d ? (c = !0) : ((c = "rules_accepted_" + c + "_" + d), (c = Qa() ? "true" === localStorage.getItem(c) : "true" === $b(c)));
            c = !c;
        }
        if (c) return (a = new RY({ Lx: a.ma, Ta: a.Ta, J: b.j, userName: b.vp, text: b.BB.trim(), Ac: a, fd: b.Da })), (a.element.style.zIndex = "2"), a;
    }
    function RY(a, b) {
        b = void 0 === b ? !1 : b;
        var c;
        w.call(this);
        var d = this;
        this.UO = new y("visibilityChanged", { Ve: !1 });
        this.XN = function () {
            d.show();
        };
        this.ay = !1;
        this.H = new Ub();
        this.isVisible = !1;
        this.hI = function (e) {
            "Tab" === e.key && (document.activeElement === d.Jv ? d.xI.focus() : d.Jv.focus(), e.stopPropagation(), e.preventDefault());
        };
        OY.add(this);
        this.element.style.position = "absolute";
        this.element.style.textAlign = "center";
        this.element.style.height = "auto";
        b ? ((this.element.style.width = "70%"), (this.element.style.left = "15%")) : ((this.element.style.width = "95%"), (this.element.style.left = "2.5%"));
        this.element.style.bottom = "10px";
        this.element.style.borderWidth = "1px";
        this.element.style.borderStyle = "solid";
        this.element.style.borderRadius = "4px";
        this.element.style.margin = "0 auto";
        this.element.style.padding = "10px";
        this.element.style.boxSizing = "border-box";
        this.element.style.maxHeight = "95%";
        this.element.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        O(this.element, "rulesModal");
        this.Lx = a.Lx;
        this.qs = a.Ta;
        this.J = a.J;
        this.Ac = null !== (c = a.Ac) && void 0 !== c ? c : void 0;
        this.userName = a.userName;
        this.gp(a.fd);
        z(
            mv.g(function (e) {
                d.gp(e);
            }),
            this.H
        );
        this.Bc(a.text);
        this.ay || (v("focus", this.qs.element, this.XN), (this.ay = !0));
        SY(this);
    }
    q(RY, w);
    k = RY.prototype;
    k.gp = function (a) {
        this.element.style.fontFamily = a.fontFamily;
        this.element.style.fontSize = a.fontSize;
    };
    k.Bc = function (a) {
        this.element.style.display = "none";
        var b = document.createElement("div");
        b.style.fontWeight = "bold";
        b.style.textAlign = "left";
        b.style.paddingBottom = "5px";
        b.style.whiteSpace = "nowrap";
        b.style.textOverflow = "ellipsis";
        b.style.overflow = "hidden";
        b.innerText = "" + this.J[0].toUpperCase() + this.J.substring(1) + "'s Rules:";
        this.element.appendChild(b);
        this.ev = TY(this, a);
        a = document.createElement("div");
        O(a, "scrollIndicator");
        a.style.height = "50px";
        a.style.position = "absolute";
        a.style.bottom = "0";
        a.style.fontWeight = "bold";
        a.style.textAlign = "center";
        a.style.boxSizing = "border-box";
        a.style.width = "100%";
        this.AN = a;
        a = document.createElement("div");
        a.style.position = "relative";
        a.appendChild(this.ev);
        a.appendChild(this.AN);
        this.element.appendChild(a);
        this.Jv = this.OB();
        this.xI = this.zp();
        this.element.appendChild(this.Jv);
        this.element.appendChild(this.xI);
        this.D();
    };
    function TY(a, b) {
        var c = document.createElement("div");
        c.style.whiteSpace = "pre-line";
        c.style.textAlign = "left";
        c.style.lineHeight = "1.4";
        c.style.height = "auto";
        c.style.paddingBottom = "15px";
        c.style.boxSizing = "border-box";
        c.style.width = "100%";
        c.style.overflowY = "scroll";
        c.style.overflowWrap = "break-word";
        c.style.wordBreak = "break-word";
        c.style.wordWrap = "break-word";
        c.style.cssText += "; -ms-overflow-style: -ms-autohiding-scrollbar";
        c.style.marginBottom = "3px";
        c.style.paddingRight = "15px";
        c.onscroll = function () {
            SY(a);
        };
        c.appendChild(document.createTextNode(b));
        Hu(c);
        return c;
    }
    function SY(a) {
        a.AN.style.display = 1 >= a.ev.scrollHeight - a.ev.scrollTop - a.ev.clientHeight ? "none" : "block";
    }
    k.D = function () {
        var a = this.Ac.element.getBoundingClientRect().height;
        this.ev.style.maxHeight = "calc(" + a + "px - 120px)";
        SY(this);
    };
    k.show = function (a) {
        a = void 0 === a ? !1 : a;
        this.isVisible ||
            ((this.isVisible = !0), (this.element.style.display = "block"), this.qs.disable(), (this.Lx.style.pointerEvents = "none"), this.D(), this.Jv.focus(), v("keydown", document, this.hI, !0), a || this.UO.h(this.isVisible));
    };
    k.B = function (a) {
        a = void 0 === a ? !1 : a;
        this.isVisible && ((this.isVisible = !1), (this.element.style.display = "none"), this.qs.enable(), (this.Lx.style.pointerEvents = ""), this.Ac.R(), Bb("keydown", document, this.hI, !0), a || this.UO.h(this.isVisible));
    };
    k.accept = function () {
        var a = "rules_accepted_" + this.userName + "_" + this.J;
        Qa() ? localStorage.setItem(a, "true") : bc(a, "true", 1);
        PY();
        HX.h(void 0);
        this.qs.focus();
    };
    k.dispose = function () {
        this.B();
        this.ay && (Bb("focus", this.qs.element, this.XN), (this.ay = !1));
        Vb(this.H);
        void 0 !== this.parent && (delete this.parent.Hg, this.parent.removeChild(this));
        OY.delete(this);
    };
    k.OB = function () {
        var a = this,
            b = document.createElement("button");
        b.innerText = fp;
        b.style.fontFamily = "'UbuntuRegular',sans-serif";
        b.style.display = "inline-block";
        b.style.boxSizing = "content-box";
        b.style.width = "calc(100% - 16px)";
        b.style.padding = "8px";
        b.style.borderRadius = "4px";
        b.style.cursor = "pointer";
        b.style.fontWeight = "500";
        b.style.lineHeight = "16px";
        b.style.whiteSpace = "nowrap";
        b.style.overflow = "hidden";
        b.style.textOverflow = "ellipsis";
        b.style.fontSize = "120%";
        b.style.zIndex = "2";
        v("click", b, function () {
            a.accept();
        });
        O(b, "acceptRulesButton");
        return b;
    };
    k.zp = function () {
        var a = this,
            b = document.createElement("button"),
            c = document.createElement("img");
        c.src = "https://static-assets.highwebmedia.com/tsdefaultassets/close_icon.svg";
        c.style.backgroundColor = "inherit";
        b.appendChild(c);
        b.style.boxSizing = "border-box";
        b.style.padding = "5px 5px 4px 5px";
        b.style.position = "absolute";
        b.style.top = "2px";
        b.style.right = "2px";
        b.style.cursor = "pointer";
        v("click", b, function () {
            a.B();
        });
        O(b, "closeRulesButton");
        return b;
    };
    function UY() {
        w.call(this);
        this.element = V("div", { className: "buttonHolder", style: { position: "absolute", right: "6px" } });
        VY(this);
    }
    q(UY, w);
    function VY(a) {
        a.element.style.top = "calc(50% - " + a.height() / 2 + "px)";
    }
    function WY(a, b) {
        var c;
        a.element.appendChild(b);
        b.style.display = "inline-block";
        b.style.top = (a.height() - b.getBoundingClientRect().height) / 2 + "px";
        null === (c = a.parent) || void 0 === c ? void 0 : c.R();
        VY(a);
        return b;
    }
    function XY(a, b) {
        var c;
        a.G(b);
        b.element.style.display = "inline-block";
        b.element.style.top = (a.height() - b.element.getBoundingClientRect().height) / 2 + "px";
        null === (c = a.parent) || void 0 === c ? void 0 : c.R();
        VY(a);
        return b;
    }
    UY.prototype.height = function () {
        return this.element.getBoundingClientRect().height;
    };
    UY.prototype.width = function () {
        return this.element.getBoundingClientRect().width;
    };
    function YY() {
        ND.call(this);
        var a = this;
        this.T = 0;
        this.element.style.overflow = "";
        this.C = new ZY({
            Xt: function () {
                jQ(a.l);
            },
            Wt: function (b) {
                iv.h(b);
            },
            St: function (b) {
                iO(a.l, b);
                a.C.Yg();
            },
        });
        this.G(this.C);
        G.g(function (b) {
            a.l = b.l;
            a.C.za(FT(wn));
            a.C.za(FT(cq));
            iC(b.A.j, b.A.lb, b.A.op, "theater")
                .then(function (c) {
                    a.C.za(c);
                })
                .catch(function () {});
            QD(a);
        });
        Kc.g(function () {
            a.C.clear();
        });
    }
    q(YY, ND);
    k = YY.prototype;
    k.oc = function () {
        return this.T;
    };
    k.D = function () {
        ND.prototype.D.call(this);
        this.C.Ea();
    };
    k.Ea = function () {
        this.C.Ea();
    };
    k.jj = function () {
        return [document.createTextNode(99 < this.T ? ch + " (99+)" : 0 < this.T ? ch + " (" + this.T + ")" : ch)];
    };
    k.kk = function () {
        return "chat-tab-default";
    };
    k.ff = function () {
        this.C.ff();
    };
    k.Yg = function () {
        this.C.Yg();
    };
    k.Rf = function () {
        return this.C.Rf();
    };
    function $Y(a) {
        SD(a) || (a.T += 1);
        a.Vc();
    }
    k.Ja = function () {
        ND.prototype.Ja.call(this);
        this.T = 0;
        this.Vc();
        this.C.Ea();
    };
    k.ox = function (a) {
        for (var b = [], c = l(this.C.Ia.childNodes), d = c.next(); !d.done; d = c.next()) (d = d.value), d.getAttribute("data-nick") === a && b.push(d);
        a = l(b);
        for (b = a.next(); !b.done; b = a.next()) this.C.Ia.removeChild(b.value);
    };
    k.en = function (a) {
        this.C.en(a);
    };
    k.Ol = function () {
        return this.C.Ta;
    };
    k.Lg = function (a) {
        ND.prototype.Lg.call(this, a);
        F("FocusTab", { location: "chat" });
    };
    function aZ(a, b) {
        PD.call(this);
        var c = this;
        this.lE = a;
        this.rk = b;
        this.T = 0;
        this.eu = new y("pmReceived");
        this.uc = new Map();
        this.Aa = new AI();
        this.Ju = function (d) {
            var e = c.uc.get(c.Aa.sb);
            A.current.Ro && d.bO ? e.C.za(JT(d.errorMessage, d.username)) : e.C.za(FT(d.errorMessage));
        };
        this.element.classList.add("data-hj-suppress");
        this.Eg = new YH({
            bm: !1,
            te: BE,
            Oj: function (d) {
                d !== c.T && ((c.T = d), c.Vc());
            },
            rk: this.rk,
        });
        this.G(this.Eg);
        $y.g(function (d) {
            c.jf();
            bZ(c);
            void 0 === c.uc.get(d.username) && c.tk(d.username, !1, d.Im);
            FI(c.Aa, d.username);
            c.Vc();
            d.focus && QD(c);
            c.Uk();
        });
        G.g(function (d) {
            c.l = d.l;
            c.AE = d.A.userName;
            c.j = d.A.j;
        });
        Kc.g(function () {
            c.jf();
            c.Aa = new AI();
            for (var d = l(c.uc.keys()), e = d.next(); !e.done; e = d.next()) c.ak(e.value, !0);
        });
        CE.g(function (d) {
            c.ak(d);
        });
        BE.g(function (d) {
            c.jf();
            FI(c.Aa, d);
            c.Uk();
        });
        hY.g(function (d) {
            c.Hm(d, !0);
        });
        cz.g(function () {
            var d = c.uc.get(c.Aa.sb);
            !1 === d.Xl && c.nE(d);
        });
        mD.g(function (d) {
            c.Aa.Gf(d);
            c.tk(d, !1, !1);
        });
        zE.g(function (d) {
            var e = cZ(c);
            c.Wl() && LA(c) && void 0 !== e && e.isActive() && (c.ZA(e, d), d.bb !== e.username || e.C.Vd() || DE.h(e.username));
        });
    }
    q(aZ, PD);
    k = aZ.prototype;
    k.ZA = function (a, b) {
        var c = void 0 === c ? !1 : c;
        var d,
            e = (null === (d = A.current.V) || void 0 === d ? void 0 : d.username) === b.K.username;
        d = a.username === b.K.username;
        a.isActive() && !c && !e && d && F("PMReceivedOpen", { message_id: b.qe });
    };
    k.Hm = function (a, b) {
        b = void 0 === b ? !1 : b;
        if (!a) {
            this.jf();
            a = this.rk && 0 === this.Eg.sf.childNodes.length;
            var c = this.l.j() === this.AE;
            b || 1 < this.Eg.sf.childNodes.length || a || c ? ((this.Eg.element.style.display = "block"), this.Eg.R()) : (this.rk || FI(this.Aa, this.l.j()), this.Uk());
        }
    };
    function bZ(a) {
        a.Eg.element.style.display = "none";
    }
    k.Ea = function () {
        var a = cZ(this);
        void 0 !== a && a.C.Ea();
    };
    k.oc = function () {
        return this.T;
    };
    k.jj = function () {
        return [document.createTextNode(99 < this.T ? "PM (99+)" : 0 < this.T ? "PM (" + this.T + ")" : "PM")];
    };
    k.Lg = function () {
        F("FocusTab", { location: "PM", unread: this.oc() });
        this.Hm(!1);
        QD(this);
    };
    k.aE = function () {
        return !1;
    };
    k.kk = function () {
        return "pm-tab-default";
    };
    function LA(a) {
        return "block" === a.element.style.display;
    }
    k.ff = function () {
        var a = cZ(this);
        void 0 !== a && a.C.ff();
    };
    k.Yg = function () {
        var a = cZ(this);
        void 0 !== a && a.C.Yg();
    };
    k.Rf = function () {
        var a = cZ(this);
        return void 0 === a ? !1 : a.C.Rf();
    };
    k.D = function () {
        PD.prototype.D.call(this);
        var a = cZ(this);
        void 0 !== a && a.C.Ea();
    };
    k.tk = function (a, b, c, d) {
        var e = this;
        d = void 0 === d ? !1 : d;
        var f,
            g,
            h = this.uc.get(a);
        if (void 0 === h) {
            Ob += 1;
            var m = new ZY(
                {
                    Wt: function (n) {
                        iv.h(n);
                    },
                    Xt: function () {
                        jQ(e.l);
                    },
                    St: function (n) {
                        e.Aa.Gf(a);
                        var p = { message: n, username: a, media: [], source: "roomviewPM", J: e.l.j() },
                            u = h.eo.ic;
                        dH(u)
                            ? wD(p).catch(function (x) {
                                  e.Ju(x);
                              })
                            : u.Qa().then(function (x) {
                                  p.media = x;
                                  wD(p).catch(function (D) {
                                      e.Ju(D);
                                  });
                                  u.clear();
                              });
                    },
                },
                a
            );
            h = {
                C: m,
                T: 0,
                Rt: 0,
                username: a,
                Bk: new kY(),
                fi: !1,
                Xl: !1,
                eo: new fH(m, a, ["split"]),
                isActive: function () {
                    return "none" !== m.element.style.display;
                },
            };
            m.Tq.g(function () {
                void 0 !== h && e.WD(h) && DE.h(a);
            });
            this.uc.set(a, h);
            tH(h.C.element, a);
            h.C.zk = h.C.G(h.eo);
            h.C.Vq = h.C.G(h.eo.ic, h.C.ma);
            h.C.Wj(FT(Qe(a)));
            h.C.Wj(FT(we()));
            !b && c ? ((c = null !== (g = null === (f = A.current.V) || void 0 === f ? void 0 : f.tb) && void 0 !== g ? g : !1), h.C.Wj(GT(a, c))) : h.C.Wj(h.Bk.fK());
            h.C.element.style.display = "none";
            this.G(h.C);
        }
        !d &&
            b &&
            this.eu.h({
                username: a,
                QA: new dZ({
                    onClick: function () {
                        $y.h({ username: a, focus: !0, Im: !1 });
                    },
                }),
            });
        void 0 === this.Aa.sb && FI(this.Aa, a);
        return h;
    };
    k.nE = function (a) {
        if (!a.Bk.vb()) {
            a.Bk.ZN();
            var b = a.C.Ia.clientHeight,
                c = a.C.vs;
            uD(a.username, this.l.j(), c)
                .then(function (d) {
                    a.Bk.FK();
                    d = d.wa;
                    50 > d.length && (a.Xl = !0);
                    var e = d.length - 1;
                    d.reverse().forEach(function (f, g) {
                        a.C.za(wT(f), !0, !0);
                        g === e && a.C.Lu(f.qe);
                    });
                    a.C.ab.scrollTop = a.C.Ia.clientHeight - b;
                })
                .catch(function () {});
        }
    };
    k.za = function (a, b, c, d, e) {
        d = void 0 === d ? !1 : d;
        HS(a, document.body.classList.contains("darkmode"));
        this.Aa.Gf(c);
        var f = this.tk(c, b !== this.l.username(), !1, d);
        d && !1 === f.fi && (f.fi = !0);
        this.l.username() === b || (SD(this) && this.Aa.sb === c) || ((f.T += 1), (f.Rt += 1), this.Vc());
        f.fi && (a = f.C.za(a, void 0, !0));
        void 0 !== e && f.C.Lu(e);
        return a;
    };
    k.fu = function (a) {
        if (SD(this)) {
            var b = cZ(this);
            void 0 !== b && b.C.za(a);
        }
    };
    function cZ(a) {
        if (void 0 !== a.Aa.sb) return a.uc.get(a.Aa.sb);
    }
    k.Su = function (a) {
        this.jf();
        if (void 0 === ("next" === a ? BI(this.Aa) : CI(this.Aa))) return !1;
        this.Uk();
        return !0;
    };
    k.ak = function (a, b) {
        if (a !== this.j || (void 0 === b ? 0 : b))
            (b = this.uc.get(a)), void 0 !== b && (this.Aa.remove(a), b.C.dispose(), this.removeChild(b.C), this.uc.delete(a), SD(this) && (0 < this.uc.size ? this.Hm(!1, !0) : this.lE()), this.Vc(), --Ob, ZF(b.username, !1));
    };
    k.pn = function () {
        var a = cZ(this);
        void 0 === a ? r("cannot close current tab", "pmTab.ts", "theatermodelib") : this.ak(a.username);
    };
    k.Uk = function () {
        var a = this.Aa.sb;
        void 0 === a && ((a = this.l.j()), FI(this.Aa, a));
        var b = this.uc.get(a);
        void 0 === b && this.tk(a, !1, !1);
        b = this.uc.get(a);
        "split" !== Y() || b.fi || this.l.Fd || ((b.fi = !0), sD(b.username, this.l.j()));
        bZ(this);
        b.C.element.style.display = "block";
        b.C.ab.style.display = "block";
        b.C.ma.style.display = "block";
        b.C.R();
        LA(this) && this.Wl() && (0 < b.T && ((b.T = 0), this.Vc()), DE.h(b.username), Lc.h(b.username));
        dz.h();
    };
    k.jf = function () {
        var a = cZ(this);
        void 0 !== a && (a.C.element.style.display = "none");
    };
    k.Ol = function () {
        var a = cZ(this);
        if (void 0 !== a) return a.C.Ta;
    };
    k.Wl = function () {
        return "split" === Y();
    };
    k.WD = function (a) {
        return this.Wl() && LA(this) && cZ(this) === a && "none" === this.Eg.element.style.display;
    };
    function dZ(a) {
        lY.call(this, a);
        var b = this;
        this.se = document.createElement("span");
        this.se.style.fontWeight = "bold";
        this.se.innerHTML = hf;
        this.se.onclick = function (c) {
            c.stopPropagation();
            b.config.onClick();
        };
    }
    q(dZ, lY);
    function eZ(a) {
        lY.call(this, a);
        var b = this;
        this.se = document.createElement("span");
        a = document.createTextNode(" (");
        var c = document.createTextNode(")"),
            d = document.createElement("a");
        d.innerText = jf;
        this.se.appendChild(a);
        this.se.appendChild(d);
        this.se.appendChild(c);
        Q(this.se, { fontWeight: "bold", textDecoration: "" });
        Q(d, { cursor: "pointer" });
        O(d, "msg-link");
        O(d, "underline-link");
        d.onclick = function (e) {
            e.stopPropagation();
            b.config.onClick();
        };
    }
    q(eZ, lY);
    function fZ(a) {
        a = new H(a);
        var b = Qc(a, "banned_terms"),
            c = [];
        void 0 !== b &&
            (c = b.map(function (d) {
                return { EG: L(d, "term"), Qi: L(d, "ban_type") };
            }));
        return { tP: c, Xf: N(a, "page_count", !1), vd: N(a, "current_page", !1) };
    }
    function gZ() {
        Yr.call(this, {
            jm: function () {
                a.element.style.display = "block";
                a.R();
            },
            ph: function () {
                a.element.style.display = "none";
            },
            Il: !0,
        });
        var a = this;
        this.RD = !1;
        this.xg = document.createElement("div");
        this.fb = document.createElement("div");
        this.iu = !0;
        O(this.element, "BaseSettingsModal");
        this.element.style.display = "none";
        this.element.style.height = "auto";
        this.element.style.width = "auto";
        this.element.style.position = "absolute";
        this.element.style.borderRadius = "6px";
        this.element.style.padding = "10px";
        this.element.style.fontSize = "12px";
        this.S.style.backgroundColor = "#000000";
        this.S.style.opacity = "0.4";
        this.element.appendChild(this.fb);
        this.element.appendChild(this.xg);
        var b = document.createElement("img");
        b.src = "https://static-assets.highwebmedia.com/tsdefaultassets/loading.gif";
        b.style.width = "50px";
        b.style.height = "50px";
        b.style.padding = "14px";
        b.style.position = "absolute";
        b.style.left = "50%";
        b.style.top = "50%";
        b.style.transform = "translate(-50%, -50%";
        this.xg.appendChild(b);
        b = this.zp();
        this.element.appendChild(b);
    }
    q(gZ, Yr);
    gZ.prototype.zp = function () {
        var a = this,
            b = document.createElement("div");
        O(b, "closeButton");
        b.style.position = "absolute";
        b.style.width = "14px";
        b.style.height = "14px";
        b.style.top = "10px";
        b.style.right = "10px";
        b.style.cursor = "pointer";
        b.style.opacity = ".5";
        b.onclick = function () {
            a.B();
        };
        b.onmouseenter = function () {
            b.style.opacity = "1";
        };
        b.onmouseleave = function () {
            b.style.opacity = "0.5";
        };
        return b;
    };
    function hZ(a, b) {
        a.RD = b;
        a.RD ? ((a.fb.style.visibility = "hidden"), (a.xg.style.display = "block")) : ((a.fb.style.visibility = "visible"), (a.xg.style.display = "none"));
        a.R();
    }
    gZ.prototype.reload = function () {
        var a = this;
        this.RD ||
            (hZ(this, !0),
            this.co()
                .then(function (b) {
                    void 0 === b ? a.B() : ((a.data = b), hZ(a, !1), a.vq(), a.R());
                })
                .catch(function (b) {
                    hZ(a, !1);
                    a.B();
                    R("An error has occurred");
                    r("Error loading settings modal: " + b, "baseSettingsModal.ts", "broadcastChatSettings");
                }));
    };
    gZ.prototype.vq = function () {};
    gZ.prototype.D = function () {
        var a = (document.documentElement.clientHeight - this.element.offsetHeight) / 2;
        this.element.style.left = Math.max((document.documentElement.clientWidth - this.element.offsetWidth) / 2 + window.pageXOffset, 0) + "px";
        this.element.style.top = Math.max(a + window.pageYOffset, 0) + "px";
    };
    function iZ(a) {
        w.call(this);
        var b = this;
        this.Z = a;
        this.Xf = this.vd = 1;
        a = Object.assign({ height: "25px", listStyle: "none", padding: 0, display: "inline-block", marginBottom: 0, font: "1.166em/1.577em 'UbuntuMedium',Arial,Helvetica,sans-serif" }, this.Z.YX);
        this.element = V(
            "div",
            { style: { textAlign: "center" }, colorClass: "pagination" },
            V("ul", {
                style: a,
                ref: function (c) {
                    return (b.Ry = c);
                },
            })
        );
        jZ(this);
    }
    q(iZ, w);
    function kZ(a, b) {
        if (-200 === b) {
            if (1 === a.vd) return;
            --a.vd;
        } else if (-300 === b) {
            if (a.vd === a.Xf) return;
            a.vd += 1;
        } else a.vd = b;
        a.Z.ZS(a.vd);
        jZ(a);
    }
    function lZ(a, b) {
        var c = void 0 === c ? 1 : c;
        for (var d = []; a <= b; ) d.push(a), (a += c);
        return d;
    }
    function jZ(a) {
        var b = a.vd - 3,
            c = a.vd + 3;
        b = 2 < b ? b : 2;
        c = c < a.Xf ? c : a.Xf - 1;
        var d = lZ(b, c);
        2 < b && d.unshift(-100);
        c < a.Xf - 1 && d.push(-100);
        b = [-200, 1].concat(ha(d), [a.Xf, -300]);
        for (
            var e = { cssFloat: "left", minWidth: "21px", height: "21px", margin: "0 4px", textAlign: "center", lineHeight: "21px" },
                f = { display: "inline-block", minWidth: "21px", height: "21px", textDecoration: "none", cursor: "pointer", borderRadius: "5px" };
            null !== a.Ry.firstChild;

        )
            a.Ry.removeChild(a.Ry.firstChild);
        b.map(function (g) {
            var h =
                -100 === g
                    ? V("li", { style: e }, "...")
                    : -200 === g || -300 === g
                    ? V(
                          "li",
                          {
                              style: e,
                              onClick: function () {
                                  kZ(a, g);
                              },
                          },
                          V("a", { style: f, colorClass: "sidePagiAnchorColor" }, -200 === g ? "\u25c0" : "\u25b6")
                      )
                    : g === a.vd
                    ? V("li", { style: e }, g)
                    : V(
                          "li",
                          {
                              style: e,
                              onClick: function () {
                                  kZ(a, g);
                              },
                          },
                          V("a", { style: f, colorClass: "pagiAnchorColor", className: "pagiAnchor" }, g)
                      );
            a.Ry.appendChild(h);
        });
    }
    function mZ(a) {
        this.Z = a;
        this.table = this.xw();
        this.Sy = nZ(this);
        this.Z.Fu.length !== this.Z.Eu.length
            ? r("Settings table row header count does not match row generator count", "settingsTable.tsx", "broadcastChatSettings")
            : (this.table.appendChild(oZ(this)),
              (this.element = V(
                  "div",
                  { colorClass: "textColor" },
                  V("div", { colorClass: "bluetxt", style: { fontSize: "1.4em", fontFamily: "'UbuntuMedium', Arial, Helvetica, sans-serif", fontWeight: "normal", textAlign: "center", marginTop: "20px" } }, this.Z.title),
                  V("p", null, this.Z.info),
                  this.yw(),
                  this.Sy.element
              )));
    }
    k = mZ.prototype;
    k.reset = function () {
        for (; null !== this.table.firstChild; ) this.table.removeChild(this.table.firstChild);
        this.table.appendChild(oZ(this));
    };
    function pZ(a, b) {
        a.table.appendChild(a.Nd(b));
    }
    function qZ(a, b, c) {
        1 >= b ? (a.Sy.element.style.visibility = "hidden") : isNaN(b) || ((a.Sy.element.style.visibility = "visible"), (a = a.Sy), (a.Xf = b), (a.vd = c), jZ(a));
    }
    k.yw = function () {
        return V("div", { colorClass: "table", style: { width: "100%", minHeight: this.Z.minHeight, borderWidth: "1px", borderStyle: "solid", borderRadius: "4px", boxSizing: "border-box" } }, this.table);
    };
    k.xw = function () {
        return V("table", { style: { width: "100%", borderCollapse: "collapse" } });
    };
    function oZ(a) {
        return V(
            "thead",
            { style: { borderBottomWidth: "2px", borderBottomStyle: "solid" } },
            V(
                "tr",
                null,
                a.Z.Fu.map(function (b) {
                    return a.xn(b);
                })
            )
        );
    }
    k.xn = function (a) {
        return V("th", { style: { textAlign: "center", fontSize: "1.2em", padding: "3px" } }, a);
    };
    k.Nd = function (a) {
        return V(
            "tr",
            { colorClass: "row", style: { height: "22px", verticalAlign: "middle", borderBottomWidth: "1px", borderBottomStyle: "solid" } },
            this.Z.Eu.map(function (b) {
                return b(a);
            })
        );
    };
    function nZ(a) {
        return new iZ({
            ZS: function (b) {
                a.Z.Jy(b);
            },
        });
    }
    function rZ() {
        gZ.call(this);
        var a = this;
        this.ro = 12;
        this.Sk = "";
        this.Jh = "api/ts/chat/banned-terms-list/";
        O(this.element, "textColor");
        this.element.style.overflow = "visible";
        this.fb.style.width = "720px";
        this.fb.style.padding = "10px";
        this.table = new mZ({
            title: dq,
            info: eq,
            Jy: function (b) {
                a.page = b;
                a.reload();
            },
            Fu: [V("div", { style: { width: "308px" } }, gq), sZ(), Zn],
            Eu: [
                function (b) {
                    b = V("td", { style: { textAlign: "center", fontSize: "14px", overflowWrap: "break-word", LW: "auto", width: "300px", paddingLeft: "8px", display: "inline-block", lineHeight: "25px" } }, b.EG);
                    twemoji.parse(b);
                    return b;
                },
                function (b) {
                    return tZ(a, b);
                },
                function (b) {
                    return uZ(a, b);
                },
            ],
            minHeight: "360px",
        });
        this.fb.appendChild(this.table.element);
        this.fb.appendChild(vZ(this));
    }
    q(rZ, gZ);
    rZ.prototype.co = function () {
        var a = this.Jh;
        "" !== this.Sk ? ((a = this.Jh + "?limit=" + this.ro + "&search_term=" + this.Sk), (this.Sk = "")) : void 0 !== this.page && (a = this.Jh + "?page=" + this.page + "&limit=" + this.ro);
        return C(a).then(function (b) {
            return fZ(b.responseText);
        });
    };
    rZ.prototype.vq = function () {
        this.page = this.data.vd;
        qZ(this.table, this.data.Xf, this.page);
        this.table.reset();
        for (var a = l(this.data.tP), b = a.next(); !b.done; b = a.next()) pZ(this.table, b.value);
        "" !== this.Yo.value && this.Yo.focus();
        this.Yo.value = "";
    };
    function sZ() {
        var a = nw({ content: iq, qg: !1, width: Cd(iq, "12px UbuntuLight") + 8, Rc: 1, wd: "28px" });
        Q(a, { bottom: "20px", left: "-32px", textAlign: "left", maxWidth: "280px", fontFamily: "UbuntuLight, Helvetica, Arial, sans-serif" });
        P(a, "tooltip");
        O(a, "tooltip-white");
        return V(
            "div",
            null,
            hq,
            V(
                "span",
                {
                    style: {
                        width: "14px",
                        height: "14px",
                        background: "transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/broadcastnotification/infoicon.svg) no-repeat right 50%",
                        backgroundSize: "contain",
                        display: "inline-block",
                        marginLeft: "4px",
                        position: "relative",
                        verticalAlign: "top",
                    },
                    onMouseEnter: function () {
                        return (a.style.display = "");
                    },
                    onMouseLeave: function () {
                        return (a.style.display = "none");
                    },
                },
                a
            )
        );
    }
    function tZ(a, b) {
        var c = new rv("substring" === b.Qi, function () {}, { width: 28, height: 16 });
        c.Lo(function () {
            nc(a.Jh, { term: b.EG, ban_type: c.Va.checked ? "substring" : "exact" }).catch(function () {
                pv(c, !c.Va.checked);
                R(mq);
            });
        });
        return V("td", { style: { textAlign: "center", padding: "4px 0" } }, c.element);
    }
    function uZ(a, b) {
        var c = V("div", {
            colorClass: "removeButton",
            style: { margin: "auto", width: "14px", height: "14px", cursor: "pointer", opacity: ".5" },
            onClick: function () {
                return wZ(a, b);
            },
            onMouseEnter: function () {
                c.style.opacity = "1";
            },
            onMouseLeave: function () {
                c.style.opacity = ".5";
            },
        });
        return V("td", null, c);
    }
    function vZ(a) {
        a.Yo = V("input", { style: { width: "160px", height: "16px", margin: "0 8px" }, type: "text", name: "term", maxLength: 30, placeholder: jq });
        v("keydown", document, function (b) {
            document.body.contains(a.element) && document.activeElement !== a.Yo && XJ(b) && a.Yo.focus();
        });
        return V(
            "form",
            {
                colorClass: "bluetxt",
                style: { fontSize: "1.12em", fontFamily: "'UbuntuMedium', Arial, Helvetica, sans-serif", fontWeight: "normal", margin: "20px 0 8px", textAlign: "center" },
                onSubmit: function (b) {
                    b.preventDefault();
                    var c = a.Yo.value.trim();
                    "" === c
                        ? R(kq)
                        : E(a.Jh, { term: c })
                              .then(function () {
                                  a.Sk = c;
                                  a.reload();
                              })
                              .catch(function (d) {
                                  d = JSON.parse(d.xhr.responseText);
                                  "string" === typeof d.error ? ((d = JSON.parse(d.error)), R(d.term[0].message)) : R(lq);
                              });
                },
            },
            V("label", null, fq, ":"),
            a.Yo,
            V("button", { style: { cursor: "pointer", fontFamily: "'UbuntuMedium', Arial, Helvetica, sans-serif" }, type: "submit", colorClass: "submitButton" }, pp)
        );
    }
    function wZ(a, b) {
        oc(a.Jh, { term: b.EG })
            .then(function () {
                a.reload();
            })
            .catch(function () {
                R(nq);
            });
    }
    function xZ(a) {
        a = void 0 === a ? [] : a;
        var b = [];
        a = l(a);
        for (var c = a.next(); !c.done; c = a.next()) (c = c.value), b.push({ username: L(c, "username"), nQ: L(c, "created_by"), IC: L(c, "expires_at"), pC: L(c, "created_at"), id: N(c, "id") });
        return b;
    }
    var yZ;
    G.g(function (a) {
        yZ = a.l.j();
    });
    function zZ() {
        gZ.call(this);
        var a = this;
        this.ro = 12;
        this.tI = document.createElement("p");
        this.rI = document.createElement("p");
        this.uI = document.createTextNode("");
        this.sI = document.createTextNode("");
        this.Qi = ["banned", "silenced"];
        O(this.element, "textColor");
        this.fb.style.width = "720px";
        this.fb.style.padding = "10px";
        this.Qz = new mZ({
            title: Sn,
            info: Tn,
            Jy: function (b) {
                a.Qi = "silenced";
                a.page = b;
                a.reload();
            },
            Fu: [xi, Xn, Pn, Yn],
            Eu: [
                function (b) {
                    return a.hs(b);
                },
                function (b) {
                    return AZ(b);
                },
                function (b) {
                    return BZ(a, b);
                },
                function (b) {
                    return CZ(a, b, !1);
                },
            ],
            minHeight: "286px",
        });
        this.Xv = new mZ({
            title: Un,
            info: Vn,
            Jy: function (b) {
                a.Qi = "banned";
                a.page = b;
                a.reload();
            },
            Fu: [xi, Wn, Pn, Yn],
            Eu: [
                function (b) {
                    return a.hs(b);
                },
                function (b) {
                    return AZ(b);
                },
                function (b) {
                    return BZ(a, b);
                },
                function (b) {
                    return CZ(a, b, !0);
                },
            ],
            minHeight: "286px",
        });
        DZ(this, this.tI, this.uI);
        DZ(this, this.rI, this.sI);
        this.fb.appendChild(this.Qz.element);
        this.fb.appendChild(document.createElement("hr"));
        this.fb.appendChild(this.Xv.element);
        this.fb.appendChild(document.createElement("br"));
        this.fb.appendChild(EZ(this));
    }
    q(zZ, gZ);
    zZ.prototype.co = function () {
        var a = "api/ts/chat/ban-list/";
        void 0 !== this.page && (a = "api/ts/chat/ban-list/?ban_types=" + this.Qi + "&page=" + this.page + "&limit=" + this.ro);
        return C(a).then(function (b) {
            b = new H(b.responseText);
            var c = Yc(b, "ban_dict", !1),
                d = Yc(b, "silence_dict", !1);
            return {
                IM: L(b, "perm"),
                qp: { PH: xZ(Qc(c, "bans")), Xf: N(c, "page_count", !1), vd: N(c, "current_page", !1), AK: N(c, "hidden_bans", !1) },
                Vu: { fU: xZ(Qc(d, "silences")), Xf: N(d, "page_count", !1), vd: N(d, "current_page", !1), DK: N(d, "hidden_silences", !1) },
            };
        });
    };
    zZ.prototype.vq = function () {
        qZ(this.Qz, this.data.Vu.Xf, this.data.Vu.vd);
        qZ(this.Xv, this.data.qp.Xf, this.data.qp.vd);
        this.YC();
        var a = this.data.Vu.DK ? this.data.Vu.DK : 0,
            b = this.data.qp.AK ? this.data.qp.AK : 0;
        this.tI.style.display = 0 === a ? "none" : "";
        this.rI.style.display = 0 === b ? "none" : "";
        this.uI.textContent = T(
            ee(
                "We have automatically silenced %(numSilenced)s user possibly linked to a user you have previously silenced;",
                "We have automatically silenced %(numSilenced)s users possibly linked to a user you have previously silenced;",
                a
            ),
            { numSilenced: a },
            !0
        );
        this.sI.textContent = T(
            ee("We have automatically banned %(numSilenced)s user possibly linked to a user you have previously banned;", "We have automatically banned %(numSilenced)s users possibly linked to a user you have previously banned;", b),
            { numSilenced: b },
            !0
        );
        this.Qi = ["banned", "silenced"];
        this.page = void 0;
    };
    zZ.prototype.YC = function () {
        this.Qi.includes("silenced") && this.Qz.reset();
        this.Qi.includes("banned") && this.Xv.reset();
        if (this.Qi.includes("silenced"))
            for (var a = l(this.data.Vu.fU), b = a.next(); !b.done; b = a.next()) {
                b = b.value;
                a: {
                    var c = b.username;
                    for (var d = l(this.data.qp.PH), e = d.next(); !e.done; e = d.next())
                        if (c === e.value.username) {
                            c = !0;
                            break a;
                        }
                    c = !1;
                }
                c || pZ(this.Qz, b);
            }
        if (this.Qi.includes("banned")) for (a = l(this.data.qp.PH), b = a.next(); !b.done; b = a.next()) pZ(this.Xv, b.value);
    };
    zZ.prototype.hs = function (a) {
        a = a.username;
        var b = document.createElement("td"),
            c = document.createElement("a");
        O(c, "hrefColor");
        c.href = "/" + a;
        c.target = "_blank";
        c.innerText = a;
        c.style.fontSize = "15px";
        b.style.textAlign = "center";
        c.style.textOverflow = "ellipsis";
        c.style.overflow = "hidden";
        c.style.marginTop = "4px";
        b.appendChild(c);
        return b;
    };
    function AZ(a) {
        var b = a.pC;
        a = a.nQ;
        var c = document.createElement("td");
        var d = new Date(b);
        d = T(S("Created at %(date)s"), { date: d }, !0);
        c.title = d;
        c.style.fontSize = "12px";
        c.style.textAlign = "center";
        c.style.textOverflow = "ellipsis";
        c.style.overflow = "hidden";
        c.style.marginTop = "4px";
        d = document.createElement("span");
        d.innerText = SC(new Date(b));
        b = document.createElement("span");
        O(b, "byUsername");
        b.innerText = "\u00a0by " + a;
        b.style.fontSize = "0.8em";
        c.appendChild(d);
        c.appendChild(b);
        return c;
    }
    function BZ(a, b) {
        var c = b.IC;
        a = new Date(b.IC) > new Date(a.data.IM);
        b = document.createElement("td");
        var d = new Date(c);
        d = T(S("Expires on %(date)s"), { date: d }, !0);
        b.title = d;
        b.innerText = a ? "Never" : SC(new Date(c));
        b.style.textAlign = "center";
        b.style.fontSize = "12px";
        b.style.textOverflow = "ellipsis";
        b.style.overflow = "hidden";
        return b;
    }
    function CZ(a, b, c) {
        var d = b.id;
        b = new Date(b.IC) > new Date(a.data.IM);
        var e = document.createElement("td"),
            f = document.createElement("a"),
            g = document.createElement("a"),
            h = document.createTextNode(" | ");
        O(f, "hrefColor");
        O(g, "hrefColor");
        f.style.cursor = "pointer";
        g.style.cursor = "pointer";
        f.innerText = Zn;
        g.innerText = c ? $n : ao;
        e.style.textAlign = "center";
        e.appendChild(f);
        b || (e.appendChild(h), e.appendChild(g));
        f.onclick = function () {
            FZ(a, d, c ? "remove_ban" : "remove_silence");
        };
        g.onclick = function () {
            FZ(a, d, c ? "ban_perm" : "convert_to_ban");
        };
        return e;
    }
    function FZ(a, b, c) {
        E("edit_room_ban/", { banid: String(b), action: c, room_username: yZ })
            .then(function (d) {
                d = d.responseText;
                if (null === d) R("An error occurred, please try again"), a.reload();
                else {
                    try {
                        var e = JSON.parse(d);
                    } catch (f) {
                        R("An error occurred, please try again");
                        a.reload();
                        return;
                    }
                    void 0 !== e.error ? (R(e.error), void 0 !== e.reload && !0 === e.reload && a.reload()) : a.reload();
                }
            })
            .catch(function () {
                R("An error occurred, please try again");
            });
    }
    function DZ(a, b, c) {
        b.style.textAlign = "center";
        b.appendChild(c);
        c = document.createElement("a");
        O(c, "hrefColor");
        c.style.cursor = "pointer";
        c.innerText = bo;
        c.onclick = function () {
            E("clear_hidden_banned_users/" + yZ + "/", {})
                .then(function () {
                    a.reload();
                })
                .catch(function () {
                    R("An error occurred removing hidden silences and bans");
                });
        };
        b.appendChild(document.createElement("br"));
        b.appendChild(c);
    }
    function EZ(a) {
        var b = document.createElement("form"),
            c = document.createElement("label"),
            d = document.createElement("input"),
            e = document.createElement("button");
        O(e, "submitButton");
        e.style.borderWidth = "1px";
        e.style.borderStyle = "solid";
        e.style.borderRadius = "4px";
        e.style.cursor = "pointer";
        e.style.fontFamily = "'UbuntuMedium', Arial, Helvetica, sans-serif";
        c.innerText = co + ":";
        d.type = "text";
        d.placeholder = eo;
        e.type = "submit";
        e.innerText = "Ban";
        b.appendChild(c);
        b.appendChild(d);
        b.appendChild(e);
        O(b, "bluetxt");
        b.style.fontSize = "1.12em";
        b.style.fontFamily = "'UbuntuMedium', Arial, Helvetica, sans-serif";
        b.style.fontWeight = "normal";
        b.style.marginBottom = "20px";
        b.style.textAlign = "center";
        d.style.width = "160px";
        d.style.height = "16px";
        d.style.margin = "0 3px";
        v("keydown", document, function (f) {
            document.body.contains(a.element) && document.activeElement !== d && XJ(f) && d.focus();
        });
        b.onsubmit = function (f) {
            f.preventDefault();
            f = d.value;
            "" === f
                ? R("Please enter a username to ban")
                : f === yZ
                ? R("You cannot ban yourself")
                : E("add_offline_room_ban/", { username: f })
                      .then(function () {
                          d.value = "";
                          R("User banned from your room");
                          a.reload();
                      })
                      .catch(function () {
                          R("The username does not exist, please try again");
                      });
        };
        return b;
    }
    function GZ(a) {
        a = void 0 === a ? [] : a;
        var b = [];
        a = l(a);
        for (var c = a.next(); !c.done; c = a.next()) (c = c.value), b.push({ username: L(c, "username"), $R: N(c, "months") });
        return b;
    }
    function HZ() {
        gZ.call(this);
        this.Me = document.createElement("div");
        this.LC = this.xw();
        this.MC = IZ();
        this.Hs = document.createElement("tbody");
        this.uE = this.xw();
        this.NL = IZ();
        this.Dt = document.createElement("tbody");
        this.fb.style.width = "550px";
        this.fb.style.padding = "10px";
        this.fb.appendChild(this.Me);
        var a = this.yw(),
            b = this.yw();
        a.appendChild(this.LC);
        b.appendChild(this.uE);
        this.MC.innerText = Me(void 0 === this.data ? 0 : this.data.NC.length);
        this.NL.innerText = "All Members";
        var c = document.createElement("p");
        O(c, "textColor");
        c.innerText = Ao;
        var d = document.createElement("p");
        O(d, "textColor");
        d.innerHTML = Bo;
        this.Me.appendChild(this.MC);
        this.Me.appendChild(c);
        this.Me.appendChild(a);
        a = this.LC;
        c = a.appendChild;
        var e = document.createElement("thead");
        e.style.borderBottom = "2px solid darkgray";
        var f = document.createElement("tr");
        f.appendChild(this.xn(xi));
        f.appendChild(this.xn(Ho));
        f.appendChild(this.xn(Io));
        e.appendChild(f);
        c.call(a, e);
        this.LC.appendChild(this.Hs);
        this.Me.appendChild(document.createElement("br"));
        this.Me.appendChild(document.createElement("hr"));
        this.Me.appendChild(this.NL);
        this.Me.appendChild(d);
        this.Me.appendChild(b);
        b = this.uE;
        d = b.appendChild;
        a = document.createElement("thead");
        a.style.borderBottom = "2px solid darkgray";
        c = document.createElement("tr");
        c.appendChild(this.xn(xi));
        c.appendChild(this.xn(Io));
        a.appendChild(c);
        d.call(b, a);
        this.uE.appendChild(this.Dt);
        this.Qw = document.createElement("div");
        this.Qw.style.display = "none";
        this.Me.style.display = "";
        b = this.Qw;
        d = b.appendChild;
        a = document.createElement("span");
        O(a, "bluetxt");
        a.innerText = "No Current or Previous Fan Club Members";
        a.innerText = "No Current or Previous Fan Club Members";
        a.style.fontSize = "1.4em";
        a.style.fontFamily = "'UbuntuMedium', Arial, Helvetica, sans-serif";
        a.style.fontWeight = "normal";
        a.style.textAlign = "center";
        a.style.marginTop = "20px";
        d.call(b, a);
        this.fb.appendChild(this.Qw);
    }
    q(HZ, gZ);
    k = HZ.prototype;
    k.co = function () {
        return C("api/ts/chat/fan-list/").then(function (a) {
            a = new H(a.responseText);
            var b = Qc(a, "fans");
            b = void 0 === b ? [] : b;
            var c = [];
            b = l(b);
            for (var d = b.next(); !d.done; d = b.next()) (d = d.value), c.push({ username: L(d, "username"), pC: L(d, "created_at"), total: N(d, "total") });
            return { NC: c, nS: GZ(Qc(a, "old_members")), EH: GZ(Qc(a, "all_members")) };
        });
    };
    k.vq = function () {
        0 === this.data.EH.length ? ((this.Me.style.display = "none"), (this.Qw.style.display = "")) : (this.YC(), (this.MC.innerText = Me(void 0 === this.data ? 0 : this.data.NC.length)));
    };
    k.xw = function () {
        var a = document.createElement("table");
        a.style.width = "100%";
        a.style.borderCollapse = "collapse";
        return a;
    };
    function IZ() {
        var a = document.createElement("div");
        O(a, "bluetxt");
        a.style.fontSize = "1.4em";
        a.style.fontFamily = "'UbuntuMedium', Arial, Helvetica, sans-serif";
        a.style.fontWeight = "normal";
        a.style.textAlign = "center";
        a.style.marginTop = "20px";
        return a;
    }
    k.yw = function () {
        var a = document.createElement("div");
        O(a, "select");
        a.style.width = "100%";
        a.style.height = document.documentElement.clientHeight / 3.5 + "px";
        a.style.borderWidth = "1px";
        a.style.borderStyle = "solid";
        a.style.borderRadius = "4px";
        a.style.overflowY = "scroll";
        return a;
    };
    k.YC = function () {
        for (; null !== this.Hs.firstChild; ) this.Hs.removeChild(this.Hs.firstChild);
        for (; null !== this.Dt.firstChild; ) this.Dt.removeChild(this.Dt.firstChild);
        for (var a = l(this.data.NC), b = a.next(); !b.done; b = a.next()) {
            var c = this.Hs,
                d = c.appendChild;
            b = b.value;
            var e = document.createElement("tr");
            e.style.height = "22px";
            e.style.verticalAlign = "middle";
            e.style.borderBottom = "1px solid darkgray";
            e.appendChild(this.hs(b.username));
            var f = e,
                g = f.appendChild,
                h = b.pC,
                m = document.createElement("td");
            m.title = "Since " + new Date(h);
            m.style.fontSize = "12px";
            m.style.textAlign = "center";
            m.style.textOverflow = "ellipsis";
            m.style.overflow = "hidden";
            m.style.paddingLeft = "6px";
            m.style.marginTop = "4px";
            m.innerText = SC(new Date(h));
            g.call(f, m);
            e.appendChild(JZ(b.total));
            d.call(c, e);
        }
        a = l(this.data.EH);
        for (b = a.next(); !b.done; b = a.next()) {
            c = b.value;
            d = this.Dt;
            b = d.appendChild;
            a: {
                e = c.username;
                f = l(this.data.nS);
                for (g = f.next(); !g.done; g = f.next())
                    if (g.value.username === e) {
                        e = !1;
                        break a;
                    }
                e = !0;
            }
            f = document.createElement("tr");
            f.style.height = "22px";
            f.style.verticalAlign = "middle";
            f.style.borderBottom = "1px solid darkgray";
            e && (f.style.fontWeight = "bold");
            f.appendChild(this.hs(c.username));
            f.appendChild(JZ(c.$R));
            b.call(d, f);
        }
    };
    k.hs = function (a) {
        var b = document.createElement("td"),
            c = document.createElement("a");
        O(c, "bluetxt");
        c.href = "/" + a;
        c.target = "_blank";
        c.innerText = a;
        c.style.fontSize = "15px";
        c.style.textAlign = "left";
        c.style.textOverflow = "ellipsis";
        c.style.overflow = "hidden";
        c.style.paddingLeft = "12px";
        c.style.marginTop = "4px";
        b.appendChild(c);
        return b;
    };
    function JZ(a) {
        var b = document.createElement("td");
        b.style.fontSize = "12px";
        b.style.textAlign = "center";
        b.style.textOverflow = "ellipsis";
        b.style.overflow = "hidden";
        b.style.paddingLeft = "6px";
        b.style.marginTop = "4px";
        b.innerText = a + " month" + (1 === a ? "" : "s");
        return b;
    }
    k.xn = function (a) {
        var b = document.createElement("th");
        b.innerText = a;
        b.style.textAlign = "center";
        b.style.fontSize = "1.2em";
        b.style.padding = "3px";
        return b;
    };
    var KZ;
    G.g(function (a) {
        KZ = a.l.j();
    });
    function LZ() {
        gZ.call(this);
        var a = this,
            b = document.createElement("div");
        O(b, "bluetxt");
        b.innerText = Ii;
        b.style.fontSize = "15px";
        b.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        this.fb.appendChild(b);
        b = document.createElement("div");
        O(b, "textColor");
        b.innerText = Si;
        b.style.margin = "10px 0";
        this.fb.appendChild(b);
        b = document.createElement("div");
        b.style.display = "inline-block";
        b.style.marginRight = "10px";
        var c = document.createElement("div");
        O(c, "bluetxt");
        c.innerText = Hi;
        c.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        c.style.fontWeight = "bold";
        b.appendChild(c);
        this.Wd = document.createElement("select");
        O(this.Wd, "select");
        this.Wd.multiple = !0;
        this.Wd.style.borderWidth = "1px";
        this.Wd.style.borderStyle = "solid";
        this.Wd.style.borderRadius = "4px";
        this.Wd.style.marginTop = "4px";
        this.Wd.style.width = "200px";
        this.Wd.style.height = "200px";
        this.Wd.style.padding = "2px";
        this.Wd.onchange = function () {
            for (var d = a.Wd.selectedOptions.length, e = [].concat(ha(a.Wd.selectedOptions)), f = 0; f < d; f += 1) {
                var g = e[f];
                g.selected = !1;
                a.de.appendChild(g);
            }
        };
        b.appendChild(this.Wd);
        this.fb.appendChild(b);
        b = document.createElement("div");
        b.style.display = "inline-block";
        c = document.createElement("div");
        O(c, "bluetxt");
        c.innerText = Ji;
        c.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        c.style.fontWeight = "bold";
        b.appendChild(c);
        this.de = document.createElement("select");
        O(this.de, "select");
        this.de.multiple = !0;
        this.de.style.borderWidth = "1px";
        this.de.style.borderStyle = "solid";
        this.de.style.borderRadius = "4px";
        this.de.style.marginTop = "4px";
        this.de.style.width = "200px";
        this.de.style.height = "200px";
        this.de.style.padding = "2px";
        this.de.onchange = function () {
            for (var d = a.de.selectedOptions.length, e = [].concat(ha(a.de.selectedOptions)), f = 0; f < d; f += 1) {
                var g = e[f];
                g.selected = !1;
                a.Wd.appendChild(g);
            }
        };
        b.appendChild(this.de);
        this.fb.appendChild(b);
        b = document.createElement("div");
        b.style.textAlign = "right";
        c = document.createElement("span");
        c.innerText = Eh;
        c.style.display = "inline-block";
        c.style.color = "#ffffff";
        c.style.backgroundColor = "#ff7002";
        c.style.background = "linear-gradient(180deg, #ff9735 0%, #ff9e36 50%, #ff7002 60%)";
        c.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        c.style.fontSize = "14px";
        c.style.textShadow = "#f18112 1px 1px 0px";
        c.style.padding = "5px 15px 5px 15px";
        c.style.marginTop = "10px";
        c.style.borderRadius = "4px";
        c.style.cursor = "pointer";
        b.appendChild(c);
        c.onclick = function () {
            for (var d = {}, e = l(a.de.options), f = e.next(); !f.done; d = { Ev: d.Ev }, f = e.next())
                (d.Ev = f.value),
                    E("removemoderator/" + d.Ev.value + "/" + KZ + "/", {})
                        .then()
                        .catch(
                            (function (g) {
                                return function () {
                                    R("An error occurred removing moderator status from " + g.Ev.value);
                                };
                            })(d)
                        );
            a.B();
        };
        this.fb.appendChild(b);
    }
    q(LZ, gZ);
    LZ.prototype.co = function () {
        return C("api/ts/chat/mod-list/").then(function (a) {
            return { ZR: Rc(new H(a.responseText), "mods") };
        });
    };
    LZ.prototype.vq = function () {
        for (; null !== this.Wd.firstChild; ) this.Wd.removeChild(this.Wd.firstChild);
        for (; null !== this.de.firstChild; ) this.de.removeChild(this.de.firstChild);
        for (var a = l(this.data.ZR), b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            var c = document.createElement("option");
            c.innerText = b;
            c.value = b;
            this.Wd.appendChild(c);
        }
    };
    function MZ() {
        gZ.call(this);
        var a = this;
        this.page = 1;
        this.ro = 12;
        this.Sk = "";
        this.Jh = "api/ts/chat/geo-list/";
        this.ei = document.createElement("div");
        this.nK = function (b) {
            b = JSON.parse(b.xhr.responseText);
            "string" === typeof b.error ? NZ(a, b.error, !0) : NZ(a, wp, !0);
        };
        this.table = new mZ({
            title: Eo,
            info: "",
            Jy: function (b) {
                a.page = b;
                a.reload();
            },
            Fu: [OZ(), Zn],
            Eu: [
                function (b) {
                    var c = document.createElement("td");
                    c.style.height = "20px";
                    c.style.width = "200px";
                    c.style.fontSize = "14px";
                    c.style.textAlign = "left";
                    c.style.textOverflow = "ellipsis";
                    c.style.overflow = "hidden";
                    c.style.display = "block";
                    c.style.paddingLeft = "32px";
                    c.style.marginTop = "4px";
                    c.textContent = b;
                    return c;
                },
                function (b) {
                    return PZ(a, b);
                },
            ],
            minHeight: "350px",
        });
        this.table.element.style.marginBottom = "10px";
        this.fb.appendChild(this.table.element);
        QZ(this);
        this.fb.appendChild(this.hP);
    }
    q(MZ, gZ);
    function OZ() {
        var a = document.createElement("span");
        a.style.display = "inline-block";
        a.style.width = "100%";
        a.style.textAlign = "left";
        a.style.paddingLeft = "29px";
        a.textContent = xi;
        return a;
    }
    function PZ(a, b) {
        var c = document.createElement("td");
        c.style.width = "140px";
        var d = document.createElement("div");
        O(d, "removeButton");
        d.style.margin = "auto";
        d.style.width = "14px";
        d.style.height = "14px";
        d.style.cursor = "pointer";
        d.style.opacity = ".5";
        d.onclick = function () {
            return a.delete(b);
        };
        d.onmouseenter = function () {
            d.style.opacity = "1";
        };
        d.onmouseleave = function () {
            d.style.opacity = ".5";
        };
        c.appendChild(d);
        return c;
    }
    function QZ(a) {
        var b = document.createElement("form");
        b.style.fontSize = "1.12em";
        b.style.fontFamily = "'UbuntuMedium', Arial, Helvetica, sans-serif";
        b.style.fontWeight = "normal";
        b.style.textAlign = "center";
        b.style.paddingLeft = "4px";
        var c = document.createElement("label");
        O(c, "bluetxt");
        c.innerText = Co + ":";
        c.htmlFor = "regionBlockInput";
        b.appendChild(c);
        c = document.createElement("input");
        O(c, "select");
        c.id = "regionBlockInput";
        c.style.width = "134px";
        c.style.height = "16px";
        c.style.margin = "0 8px";
        c.type = "text";
        b.appendChild(c);
        var d = document.createElement("button");
        O(d, "submitButton");
        d.style.cursor = "pointer";
        d.style.fontFamily = "'UbuntuMedium', Arial, Helvetica, sans-serif";
        d.type = "submit";
        d.innerText = Do;
        b.appendChild(d);
        d = document.createElement("div");
        d.style.marginTop = "4px";
        b.appendChild(d);
        b.onsubmit = function (e) {
            e.preventDefault();
            a.submit();
        };
        a.Dh = c;
        a.ei = d;
        a.hP = b;
    }
    function NZ(a, b, c) {
        c ? (P(a.ei, "bluetxt"), O(a.ei, "inputError")) : (P(a.ei, "inputError"), O(a.ei, "bluetxt"));
        a.ei.style.fontSize = "0.8em";
        a.ei.innerText = b;
        a.ei.style.transition = "opacity 0ms";
        a.ei.style.opacity = "1";
        clearTimeout(a.fT);
        a.fT = window.setTimeout(function () {
            a.ei.style.transition = "opacity 1000ms";
            a.ei.style.opacity = "0";
        }, 2500);
    }
    MZ.prototype.co = function () {
        if ("" !== this.Sk) {
            var a = this.Jh + "?limit=" + this.ro + "&search_term=" + this.Sk;
            this.Sk = "";
        } else a = this.Jh + "?page=" + this.page + "&limit=" + this.ro;
        return C(a).then(function (b) {
            b = new H(b.responseText);
            return { $Q: Rc(b, "geos"), Xf: N(b, "page_count", !1), vd: N(b, "current_page", !1) };
        });
    };
    MZ.prototype.vq = function () {
        this.page = this.data.vd;
        qZ(this.table, this.data.Xf, this.page);
        this.table.reset();
        this.Dh.focus();
        for (var a = l(this.data.$Q.sort()), b = a.next(); !b.done; b = a.next()) pZ(this.table, b.value);
    };
    MZ.prototype.submit = function () {
        var a = this,
            b = this.Dh.value;
        this.Dh.value = "";
        E(this.Jh, { username: b })
            .then(function () {
                a.Sk = b;
                a.reload();
                NZ(a, vp, !1);
            })
            .catch(this.nK);
    };
    MZ.prototype.delete = function (a) {
        var b = this;
        oc(this.Jh, { username: a })
            .then(function () {
                b.reload();
            })
            .catch(this.nK);
    };
    function RZ() {
        wv.call(this);
    }
    q(RZ, wv);
    k = RZ.prototype;
    k.initData = function () {
        wv.prototype.initData.call(this);
        this.OS = new MZ();
        this.vP = new zZ();
        this.YR = new LZ();
        this.JQ = new HZ();
        this.uP = new rZ();
    };
    k.UI = function () {
        var a = this.Tm,
            b = a.appendChild;
        var c = document.createElement("label");
        this.Uz = document.createElement("select");
        c = this.Nd(c, sf, this.Uz, [
            { label: ko, value: "a" },
            { label: Tk, value: "t" },
        ]);
        b.call(a, c);
        this.Tm.appendChild(Fv(this));
        a = this.Tm;
        b = a.appendChild;
        this.zB = document.createElement("label");
        this.vl = document.createElement("select");
        c = this.Nd(this.zB, uf, this.vl, [
            { label: lo, value: "all" },
            { label: mo, value: "tip_recent" },
            { label: no, value: "tip_anytime" },
            { label: oo, value: "tokens" },
        ]);
        b.call(a, c);
        a = this.Tm;
        b = a.appendChild;
        c = document.createElement("label");
        this.qy = document.createElement("select");
        c = this.Nd(c, vf, this.qy, [
            { label: po, value: "1" },
            { label: qo, value: "2" },
            { label: ro, value: "7" },
            { label: so, value: "14" },
            { label: to, value: "30" },
            { label: uo, value: "60" },
            { label: vo, value: "180" },
        ]);
        b.call(a, c);
        a = this.Tm;
        b = a.appendChild;
        c = document.createElement("label");
        this.Pz = document.createElement("select");
        c = this.Nd(c, wf, this.Pz, [
            { label: wo, value: "false" },
            { label: xo, value: "live" },
            { label: xf, value: "true" },
        ]);
        b.call(a, c);
    };
    k.bC = function () {
        wv.prototype.bC.call(this);
        var a = this.jo,
            b = a.appendChild;
        var c = document.createElement("label");
        this.gw = document.createElement("select");
        c = this.Nd(c, yf, this.gw, [
            { label: zf, value: "0" },
            { label: Af, value: "300" },
            { label: Bf, value: "-1" },
        ]);
        b.call(a, c);
    };
    k.RI = function () {
        this.ni.appendChild(Gv(this));
        this.ni.appendChild(SZ(this, fo, this.vP));
        this.ni.appendChild(SZ(this, go, this.YR));
        this.ni.appendChild(SZ(this, ho, this.JQ));
        this.ni.appendChild(SZ(this, io, this.OS));
        this.ni.appendChild(Iv(this));
        this.ni.appendChild(SZ(this, jo, this.uP));
    };
    k.mK = function () {
        return "api/broadcasterchatsettings/";
    };
    k.lK = function () {
        return "choose_broadcaster_chat_color/";
    };
    k.tx = function () {
        return !0;
    };
    k.Pa = function () {
        return !0;
    };
    k.Pl = function () {
        var a = wv.prototype.Pl.call(this);
        a.sort_users = this.Uz.value;
        a.allowed_chat = this.vl.value;
        a.mod_expire = this.qy.value;
        a.silence_broadcasters = this.Pz.value;
        a.c2c_notify = this.gw.value;
        a.broadcaster_tip_volume = a.viewer_tip_volume;
        return a;
    };
    k.gp = function (a) {
        wv.prototype.gp.call(this, a);
        this.Uz.value = a.kr;
        this.vl.value = a.aB;
        this.qy.value = a.xE.toString(10);
        this.Pz.value = a.pG;
        this.gw.value = a.sB;
    };
    k.dG = function () {
        wv.prototype.dG.call(this);
        this.Da.kr = this.Uz.value;
        this.Da.aB = this.vl.value;
        this.Da.xE = parseInt(this.qy.value);
        this.Da.pG = this.Pz.value;
        this.Da.sB = Ox(this.gw.value);
    };
    k.hh = function (a) {
        var b = this;
        wv.prototype.hh.call(this, a);
        !1 === a.A.tb &&
            ((this.zB.innerText = uf + " (" + yo + ")"),
            (this.zB.style.color = "#888"),
            (this.vl.title = zo + "."),
            (this.vl.disabled = !0),
            (this.vl.onclick = function (c) {
                c.preventDefault();
                b.vl.blur();
            }));
    };
    function SZ(a, b, c) {
        var d = document.createElement("label");
        a = Jv(a, d, b);
        a.appendChild(d);
        d.onclick = function () {
            c.reload();
            c.show();
        };
        return a;
    }
    function TZ() {
        function a() {
            if (!b.Ou && (Dv(b.fd), void 0 !== b.parent)) {
                var f = b.parent;
                OD(f, f.children()[0]);
            }
        }
        PD.call(this);
        var b = this;
        this.fd = A.current.oj ? new RZ() : new wv();
        this.Ou = !1;
        this.element.id = "SplitModeChatSettingsTab";
        O(this.element, "defaultColor");
        this.element.style.fontSize = "12px";
        this.element.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        this.element.style.boxSizing = "border-box";
        this.ma = UZ();
        var c = VZ();
        this.pc = WZ(function () {
            return !1;
        }, 4096);
        v("click", this.pc.element, a);
        v("focus", this.pc.element, a);
        this.bf = new UY();
        this.Zc = WY(this.bf, new XZ(!1).element);
        this.Zc.style.marginLeft = "6px";
        this.Zc.onclick = a;
        c.appendChild(this.pc.element);
        this.ma.appendChild(c);
        this.ma.appendChild(this.bf.element);
        this.element.appendChild(this.ma);
        this.element.appendChild(this.ma);
        var d = document.createElement("div");
        d.innerText = bh;
        d.style.position = "absolute";
        d.style.top = "30px";
        d.style.right = "10px";
        d.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        d.style.color = "#000000";
        d.style.backgroundColor = "#d8deea";
        d.style.border = "1px solid #acacac";
        d.style.borderRadius = "4px";
        d.style.padding = "8px 12px";
        d.style.opacity = "0";
        this.element.appendChild(d);
        Qv.ud.g(function () {
            "split" === Y() && (Fb(b, b.fd), (b.fd.element.style.margin = "0"));
        });
        var e;
        this.fd.CB.g(function () {
            clearTimeout(e);
            Yu(d, "250ms");
            d.style.opacity = "1";
            e = window.setTimeout(function () {
                Yu(d, "1000ms");
                d.style.opacity = "0";
            }, 3e3);
        });
    }
    q(TZ, PD);
    k = TZ.prototype;
    k.jk = function () {
        var a = Object.assign(Object.assign({}, PD.prototype.jk.call(this)), { backgroundRepeat: "no-repeat", backgroundPosition: "center", boxSizing: "border-box", minHeight: "20px", height: "unset" });
        a.minWidth = "34px";
        return a;
    };
    k.D = function () {
        "split" === Y() &&
            (VY(this.bf),
            (this.ma.style.width = this.element.clientWidth - 10 + "px"),
            (this.pc.element.style.width = Math.max(0, this.ma.clientWidth - 18 - Math.ceil(this.Zc.offsetWidth) - 4) + "px"),
            (this.fd.element.style.height = this.element.clientHeight - 28 - 4 + "px"));
    };
    k.jj = function () {
        return this.collapsed ? [document.createTextNode(ah)] : [Cr()];
    };
    k.kk = function () {
        return "settings-tab-default";
    };
    k.ff = function () {
        this.pc.focus();
    };
    k.Yg = function () {
        this.pc.blur();
    };
    k.Rf = function () {
        return document.activeElement === this.pc.element;
    };
    k.Ea = function () {
        this.fd.element.scrollTop = this.fd.element.scrollHeight - this.fd.element.offsetHeight;
    };
    k.Ol = function () {
        return this.pc;
    };
    k.Lg = function (a) {
        PD.prototype.Lg.call(this, a);
        F("FocusTab", { location: "chatSettings" });
    };
    var YZ;
    function ZZ(a) {
        a = void 0 === a ? !1 : a;
        KD.call(this);
        var b = this;
        this.rk = a;
        this.ja = new YY();
        this.tv = new $Z();
        this.No = new TZ();
        YZ = this;
        this.Hk = new Ub();
        this.ac.element.style.boxSizing = "border-box";
        this.ac.element.style.borderBottom = "";
        this.ac.element.style.height = "22px";
        this.window.style.width = "";
        this.window.style.position = "";
        this.element.id = "ChatTabContainer";
        this.element.style.display = "inline-block";
        this.element.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        this.element.style.borderRadius = "4px 4px 2px 2px";
        this.element.style.margin = "0 0 6px 8px";
        this.element.style.boxSizing = "border-box";
        this.element.style.overflow = "";
        this.pr = Object.assign(Object.assign({}, this.pr), { position: "static", fontSize: "12px", marginRight: "2px", padding: "3px 8px" });
        this.ja = this.Ff(this.ja);
        this.tv = this.Ff(this.tv);
        (function () {
            b.hb = b.Ff(
                new aZ(function () {
                    OD(b, b.ja);
                }, b.rk)
            );
            b.hb.Ja();
        })();
        this.No = this.Ff(this.No);
        this.ac.element.style.padding = "1px 3px 0 3px";
        this.No.la.element.dataset.pactionName = "Settings";
        this.tv.la.element.dataset.pactionName = "USERS";
        this.HC = this.LB();
        this.ac.G(this.HC);
        this.ac.element.dataset.paction = "Chat";
        OD(this, this.ja);
        G.g(function (e) {
            OD(b, b.ja);
            SA() || $y.h({ username: e.A.j, focus: !1, Im: e.A.tj });
            e.l.event.Nq.g(function (f) {
                b.DE(f, e.l.username());
            });
            e.l.event.ya.g(function (f) {
                b.GE(f, e.l.username());
            });
            e.l.event.WM.g(function (f) {
                var g = wT(f);
                b.hb.za(g, f.K.username, f.bb);
            });
            e.l.event.mz.g(function (f) {
                b.ja.ox(f.username);
                b.ja.C.FF(f.username);
                b.hb.ak(f.username);
            });
            e.l.event.Mc.g(function (f) {
                "notconnected" === f.Lc && b.ns === b.tv && b.tv.refresh();
            });
            e.l.event.cB.g(function (f) {
                e.l.Qr && b.ja.C.za(FT("DEBUG: " + f));
                e.A.Tx && void 0 !== window.console && Ma(f);
            });
            e.l.event.zy.g(function (f) {
                b.Ys(f, e);
            });
            z(
                zE.g(function (f) {
                    b.Lt(f, e);
                }, !1),
                b.Hk
            );
            z(
                lD.g(function (f) {
                    b.Lt(f, e, !0);
                }, !1),
                b.Hk
            );
            z(
                fz.g(function (f) {
                    b.Be = f;
                }, !1),
                b.Hk
            );
        });
        var c = new mY();
        A.current.Ro &&
            AE.g(function (e) {
                if (!c.ej.has(e.bb)) {
                    var f = Ue(e.bb),
                        g = new eZ({
                            onClick: function () {
                                OH.h(e.bb);
                            },
                        });
                    f = IT(f, g.se);
                    b.ja.C.za(f);
                    c.ej.add(e.bb);
                }
            });
        Kc.g(function () {
            Vb(b.Hk);
        });
        bz.g(function (e) {
            e ? b.ja.C.za(FT("Debug mode enabled. Type /debug again to disable.")) : b.ja.C.za(FT("Debug mode disabled."));
        });
        Mc.g(function (e) {
            b.ja.C.za(HT(e));
            e.Fa && b.hb.fu(HT(e));
        });
        a_.g(function () {
            b.Vc();
        });
        az.g(function (e) {
            "split" === Y() && (OD(b, b.ja), b.ja.en("@" + e + " "), b.ja.ff());
        });
        cw.g(function () {
            b.HC.jd.La() && b.HC.jd.ha();
        });
        var d = new gY();
        this.hb.eu.g(function (e) {
            if (!d.ej.has(e.username)) {
                var f = Te(e.username);
                f = IT(f, e.QA.se);
                b.ja.C.za(f);
                d.ej.add(e.username);
            }
        });
        $y.g(function () {
            window.setTimeout(function () {
                b.R();
            }, 0);
        });
        dz.g(function () {
            b.D();
        });
    }
    q(ZZ, KD);
    k = ZZ.prototype;
    k.Lt = function (a, b, c) {
        c = void 0 === c ? !1 : c;
        if (c && a.gL) var d = a.qe;
        !0 === a.VD && ((a.message = this.Be.message), (a.K.username = this.Be.K), (a.bb = this.Be.Ec), void 0 !== this.Be.media && (a.Qa = this.Be.media));
        this.hb.za(wT(a), a.K.username, a.bb, c, d);
        uH && void 0 !== a.Qa && 0 < a.Qa.length && ((b = new HG({ Ek: a.qe, yq: a.K.username === b.A.userName, Qa: a.Qa })), this.hb.za(zT(b.element, a.K), a.K.username, a.bb, c));
    };
    k.DE = function (a, b) {
        $Y(this.ja);
        YS(SS(), a.K);
        a = wT(a, b);
        HS(a, document.body.classList.contains("darkmode"));
        this.ja.C.za(a, void 0, !0);
    };
    k.GE = function (a, b) {
        b = AT(a, b);
        HS(b, document.body.classList.contains("darkmode"));
        this.ja.C.za(b);
        a.Fa && this.hb.fu(AT(a));
    };
    k.LB = function () {
        var a = new BD(void 0, !0);
        O(a, "tab");
        O(a.jd, "chat-tabs-dropdown-border");
        Q(a.jd, { width: "105px", padding: "8px 0", borderWidth: "1px", borderStyle: "solid" });
        Q(a, Object.assign(Object.assign({}, this.pr), { position: "absolute", height: "19px", width: "32px" }));
        return a;
    };
    k.hB = function (a) {
        a = KD.prototype.hB.call(this, a);
        a.element.classList.add("chat-tab-handle");
        return a;
    };
    k.Ys = function (a, b) {
        return Wy(this, function d() {
            var e = this,
                f,
                g,
                h,
                m,
                n;
            return Aa(d, function (p) {
                if (1 == p.aa) return (f = e), SA() || a.jr === b.A.userName ? (p = sa(p, SX({ OH: a.Wk, VI: a.jr, qL: !a.Yl, xN: b.A.j }), 3)) : ((p.aa = 0), (p = void 0)), p;
                g = p.td;
                h = function (u, x) {
                    return f.Ys(u, x);
                };
                m = function (u) {
                    f.mG(u);
                };
                n = fY(a, g, b, m, h);
                void 0 !== n && e.ja.C.za(n);
                p.aa = 0;
            });
        });
    };
    k.mG = function (a) {
        this.ja.C.za(FT(a));
    };
    k.D = function () {
        var a = this;
        KD.prototype.D.call(this);
        this.ja.C.ab.style.height = this.element.clientHeight - 28 - this.ac.element.offsetHeight - 6 + "px";
        window.setTimeout(function () {
            var b;
            null === (b = cZ(a.hb)) || void 0 === b ? void 0 : b_(b.C);
        }, 0);
        this.ac.R();
    };
    k.me = function () {
        return KD.prototype.me.call(this);
    };
    k.children = function () {
        return KD.prototype.children.call(this);
    };
    k.sC = function (a) {
        var b = this,
            c =
                "next" === a
                    ? function () {
                          return b.hb.Su("next");
                      }
                    : function () {
                          return b.hb.Su("prev");
                      };
        a =
            "next" === a
                ? function () {
                      var d = b.hb;
                      d.jf();
                      DI(d.Aa);
                  }
                : function () {
                      var d = b.hb;
                      d.jf();
                      EI(d.Aa);
                  };
        Dv(this.No.fd);
        KD.prototype.me.call(this) === this.ja ? (OD(this, this.hb), a(), c() || this.hb.Hm(!1)) : c() || OD(this, this.ja);
        this.R();
    };
    k.pn = function () {
        KD.prototype.me.call(this) === this.hb && this.hb.pn();
    };
    var c_ = !0,
        d_ = new Sd(
            function () {
                void 0 === A.current.V && F("AnonChatInputFocused");
            },
            { zc: 1500, Qc: 0 }
        );
    function e_() {
        var a = void 0 === a ? !1 : a;
        !0 === c_ && (Td(d_), !0 !== a && (c_ = !1));
    }
    function f_() {
        c_ = !0;
    }
    function g_() {
        var a = document.createElement("div");
        a.className = "msg-list-wrapper-split";
        a.style.boxSizing = "border-box";
        a.style.overflow = "auto";
        a.style.margin = "0 auto 5px";
        a.style.padding = "5px";
        return a;
    }
    function h_() {
        var a = document.createElement("div");
        a.style.width = "100%";
        a.className = "notice-list-fvm";
        Zu(a, "text");
        a.style.cursor = "text";
        return a;
    }
    function i_() {
        var a = document.createElement("div");
        a.className = "msg-list-fvm";
        O(a, "message-list");
        a.style.width = "100%";
        Zu(a, "text");
        a.style.cursor = "text";
        a.style.paddingBottom = "4px";
        return a;
    }
    function VZ() {
        var a = document.createElement("form");
        a.style.display = "inline-block";
        a.style.boxSizing = "border-box";
        a.style.margin = "0 auto";
        return a;
    }
    function UZ() {
        var a = document.createElement("div");
        O(a, "inputDiv");
        a.style.height = "28px";
        a.style.boxSizing = "border-box";
        a.style.margin = "0 auto";
        a.style.position = "absolute";
        a.style.left = "5px";
        a.style.bottom = "5px";
        a.style.borderWidth = "1px";
        a.style.borderStyle = "solid";
        a.style.borderRadius = "4px 4px 0 0";
        a.style.fontSize = "12px";
        return a;
    }
    function WZ(a, b) {
        a = new eA(a, b);
        O(a.element, "chat-input-field");
        Q(a.element, { margin: "6px", height: "16px", fontFamily: "Helvetica, Arial, sans-serif", lineHeight: "15px" });
        a.element.classList.add("inputFieldChatPlaceholder");
        a.element.setAttribute("data-placeholder", di);
        Ab(["focus", "touchstart"], a.element, function () {
            return e_();
        });
        v("blur", a.element, f_);
        return a;
    }
    function XZ(a, b) {
        a = void 0 === a ? !0 : a;
        b = void 0 === b ? !1 : b;
        w.call(this);
        var c = this;
        this.gG = a;
        this.rl = function () {
            P(c.element, "disabled");
            O(c.element, "send-button-gradient");
        };
        this.element = document.createElement("span");
        this.element.innerText = dh;
        this.element.title = dh;
        this.element.style.lineHeight = "1.2";
        this.element.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        this.element.style.fontSize = "12px";
        this.element.style.padding = "3px 5px";
        this.element.style.borderRadius = "4px";
        this.element.style.boxSizing = "border-box";
        this.element.style.display = "inline-block";
        this.element.dataset.paction = "Chat";
        this.element.dataset.pactionName = "Send";
        O(this.element, "send-button");
        O(this.element, "disabled");
        !1 === this.gG && this.rl();
        this.element.classList.add(b ? "theatermodeSendButtonPm" : "theatermodeSendButtonChat");
    }
    q(XZ, w);
    function j_() {
        var a = document.createElement("span");
        a.textContent = "\ud83d\ude01";
        a.style.position = "relative";
        a.style.cursor = "pointer";
        a.style.marginRight = "6px";
        a.style.fontSize = "1em";
        a.style.lineHeight = "1em";
        a.style.verticalAlign = "middle";
        wb() || (twemoji.parse(a, { className: "emojiButton" }), (a.style.fontSize = "15px"), (a.style.lineHeight = "15px"), (a.style.verticalAlign = "text-bottom"));
        a.dataset.paction = "Chat";
        a.dataset.pactionName = "EmojiClick";
        return a;
    }
    function k_() {
        var a = document.createElement("span");
        a.style.position = "relative";
        a.style.cursor = "pointer";
        a.style.marginRight = "6px";
        a.style.height = "1.2em";
        a.style.width = "1.2em";
        var b = document.createElement("img");
        b.src = "https://static-assets.highwebmedia.com/tsdefaultassets/mediaDock/uploadBackground.svg";
        b.style.verticalAlign = wb() ? "middle" : "text-bottom";
        b.style.height = "100%";
        a.appendChild(b);
        return a;
    }
    function ZY(a, b) {
        var c;
        w.call(this);
        var d = this;
        this.qo = a;
        this.kF = b;
        this.Or = new y("addMessageHtml", { Ve: !1 });
        this.GF = new y("removeMessageHtml", { Ve: !1 });
        this.Tq = new y("scrolledToBottom");
        this.Ia = i_();
        this.Qt = h_();
        this.ab = g_();
        this.ji = 0;
        this.H = new Ub();
        this.wh = (this.Rb = void 0 !== this.kF) || iz();
        this.OG = function () {
            d.Ea();
        };
        this.element.id = "ChatTabContents";
        this.element.style.position = "static";
        this.element.style.boxSizing = "border-box";
        this.element.style.fontSize = "12px";
        this.element.style.overflow = "";
        this.element.classList.add(this.Rb ? "TheatermodeChatDivPm" : "TheatermodeChatDivChat");
        this.ab.appendChild(this.Qt);
        this.ab.appendChild(this.Ia);
        this.Rb && ((this.du = new jY(!1, b)), this.element.appendChild(this.du.element));
        this.element.appendChild(this.ab);
        this.rB();
        var e = !1,
            f = !1,
            g = new Sd(
                function () {
                    e = !1;
                },
                { zc: 50, Qc: 1 }
            );
        v("scroll", this.ab, function () {
            var h = d.ab.scrollTop;
            d.Rb && 0 === h && d.Vd() && cz.h();
            e || ((e = !0), (f = d.Vd()));
            Td(g);
            !d.Vd() && f && (d.Tq.h(), (f = !1));
        });
        this.H.add(
            OW.g(function (h) {
                d.Hg = QY(d, h);
                void 0 !== d.Hg && d.G(d.Hg);
            })
        );
        this.H.add(
            G.g(function (h) {
                d.element.style.fontSize = h.A.Da.fontSize;
                d.Dm();
                d.os = h.l.username();
                d.wh = !1;
                d.wh || d.Zc.rl();
            })
        );
        z(
            mv.g(function (h) {
                d.element.style.fontSize = h.fontSize;
                d.Dm();
            }),
            this.H
        );
        this.mg = new CX({ gb: this.Ta, At: 8, wu: 207 });
        this.ma.appendChild(this.mg.element);
        this.mg.Gd();
        this.Rb ||
            ((this.Qg = new RS({ gb: this.Ta, At: 8, wu: 207 })),
            this.ma.appendChild(this.Qg.element),
            this.Qg.Gd(),
            z(
                OS.g(function () {
                    lT(d.Ia, d.os);
                }),
                this.H
            ));
        a = null === (c = A.current.V) || void 0 === c ? void 0 : c.yc;
        void 0 !== a &&
            ((c = new Qt(a)),
            Dt(c.getKey()) && ((this.wh = !1), this.Zc.rl()),
            z(
                c.Cg.g(function (h) {
                    h.zi && ((d.wh = !1), d.Zc.rl());
                }),
                this.H
            ));
        this.mg.element.classList.add(this.Rb ? "theatermodeEmoticonAutocompleteModalPm" : "theatermodeEmoticonAutocompleteModalChat");
    }
    q(ZY, w);
    k = ZY.prototype;
    k.rB = function () {
        var a = this,
            b = VZ(),
            c = this.Rb ? 4096 : 1024;
        this.ma = UZ();
        this.element.appendChild(this.ma);
        this.bf = new UY();
        this.Rb &&
            uH &&
            ((this.Dk = WY(this.bf, k_())),
            (this.Dk.dataset.paction = "Chat"),
            (this.Dk.dataset.pactionName = "UploadPhoto"),
            (this.Dk.onclick = function () {
                var d;
                F("PMPhotoButtonClicked");
                Wu() || (void 0 !== a.Hg ? a.Hg.show() : (null === (d = a.zk) || void 0 === d ? void 0 : d.toggle(), a.Ea()));
            }));
        this.gj = WY(this.bf, j_());
        this.Zc = XY(this.bf, new XZ(this.wh, this.Rb));
        this.Ta = WZ(function () {
            return a.WF();
        }, c);
        this.Ta.element.classList.add(this.Rb ? "theatermodeInputFieldPm" : "theatermodeInputFieldChat");
        this.gj.classList.add(this.Rb ? "theatermodeEmojiButtonPm" : "theatermodeEmojiButtonChat");
        b.appendChild(this.Ta.element);
        this.ma.appendChild(b);
        this.ma.appendChild(this.bf.element);
        VY(this.bf);
        v("mousedown", this.ma, function (d) {
            if (d.target === a.ma || d.target === b) a.Ta.focus(), d.preventDefault();
        });
        v("click", this.Zc.element, function () {
            a.Ta.submit();
        });
        v("click", this.gj, function () {
            e_();
            Zy.h(a.gj);
        });
        v("submit", b, function (d) {
            d.preventDefault();
            a.Ta.submit();
        });
    };
    k.Dm = function () {
        this.ab.style.lineHeight = Number(this.element.style.fontSize.slice(0, -2)) + 7 + "pt";
    };
    k.dispose = function () {
        var a, b, c, d;
        Vb(this.H);
        this.mg.dispose();
        null === (a = this.Qg) || void 0 === a ? void 0 : a.dispose();
        null === (b = this.zk) || void 0 === b ? void 0 : b.dispose();
        null === (c = this.Hg) || void 0 === c ? void 0 : c.dispose();
        this.Ta.dispose();
        null === (d = this.du) || void 0 === d ? void 0 : d.dispose();
    };
    k.WF = function () {
        var a = this,
            b,
            c,
            d;
        if (Zd("InCntntSUp") && !this.Rb)
            return (
                kv.h({
                    GJ: "message",
                    wJ: this.ma,
                    jx: function () {
                        return oA(a.Ta);
                    },
                }),
                !1
            );
        if (Wu('You must be logged in to send a message. Click "OK" to login.') || this.wh || this.mg.isVisible() || !0 === (null === (b = this.Qg) || void 0 === b ? void 0 : b.isVisible())) return !1;
        b = oA(this.Ta);
        this.Ea();
        if ("" !== b.trim() || null === (d = null === (c = this.Vq) || void 0 === c ? void 0 : dH(c)) || void 0 === d || !d)
            switch (((c = RT(b)), c.messageType)) {
                case 2:
                    this.qo.Xt();
                    break;
                case 1:
                    this.qo.Wt(c.Gt);
                    break;
                default:
                    this.qo.St(b);
            }
        d = b.match(/@[a-zA-Z0-9_]+/gm);
        c = SS();
        if (null !== d) for (d = l(d), b = d.next(); !b.done; b = d.next()) cT(c, b.value.replace("@", "")) && F("UserMentionMessage");
        this.Ta.blur();
        return !0;
    };
    k.D = function () {
        var a, b;
        this.ma.style.width = this.element.clientWidth - 10 + "px";
        var c = this.ma.clientWidth - 18 - this.bf.width();
        this.Ta.element.style.width = Math.max(0, c) + "px";
        VY(this.bf);
        null !== (b = null === (a = this.Vq) || void 0 === a ? void 0 : a.La()) && void 0 !== b && b ? (this.ma.style.borderRadius = "0") : (this.ma.style.borderRadius = "4px 4px 0 0");
        this.mg.element.style.bottom = this.ma.offsetHeight - 2 + "px";
        void 0 !== this.Qg && (this.Qg.element.style.bottom = this.ma.offsetHeight - 2 + "px");
        b_(this);
        this.Ea();
    };
    function b_(a) {
        var b,
            c,
            d,
            e,
            f,
            g,
            h = YZ.element.clientHeight - 28 - YZ.ac.element.offsetHeight - 6;
        a.Rb &&
            (null !== (c = null === (b = a.zk) || void 0 === b ? void 0 : b.La()) && void 0 !== c && c
                ? ((b = null !== (e = null === (d = a.zk) || void 0 === d ? void 0 : d.element.getBoundingClientRect().height) && void 0 !== e ? e : 0),
                  (h -= b + 28 + 10),
                  null !== (g = null === (f = a.Vq) || void 0 === f ? void 0 : f.La()) && void 0 !== g && g && (h -= b),
                  (a.ma.style.bottom = 5 + b + "px"))
                : ((h -= 32), (a.ma.style.bottom = "5px")));
        a.ab.style.height = h + "px";
    }
    k.Vd = function () {
        return this.ab.scrollTop <= this.ab.scrollHeight - (this.ab.offsetHeight + 20);
    };
    k.Ea = function () {
        this.Vd() && this.Tq.h();
        this.ab.scrollTop = this.ab.scrollHeight - this.ab.offsetHeight;
    };
    k.Wj = function (a) {
        this.Qt.appendChild(a);
    };
    k.za = function (a, b, c) {
        var d = this;
        b = void 0 === b ? !1 : b;
        c = void 0 === c ? !1 : c;
        var e = this.Vd();
        e ||
            a.querySelectorAll("img").forEach(function (g) {
                var h = g.src;
                g.src = "";
                g.onload = d.OG;
                g.src = h;
            });
        this.Ia.appendChild(a);
        var f = this.Ia.childElementCount - 1e3;
        for (b ? this.Ia.prepend(a) : jC(a, this.Ia); 0 < f; --f) (b = this.Ia.firstElementChild), null !== b && this.Ia.removeChild(b);
        e || this.Ea();
        this.Or.h({
            rE: function () {
                return a.cloneNode(!0);
            },
        });
        c && (this.ji += 1);
        return a;
    };
    k.lz = function (a) {
        this.Ia.removeChild(a);
    };
    k.Us = function () {
        return this.ji;
    };
    k.ny = function (a) {
        return this.ji - a;
    };
    k.Lu = function (a) {
        this.vs = a;
    };
    k.ox = function (a) {
        for (var b = [], c = l(this.Ia.childNodes), d = c.next(); !d.done; d = c.next()) (d = d.value), d.getAttribute("data-nick") === a && b.push(d);
        a = l(b);
        for (b = a.next(); !b.done; b = a.next()) this.Ia.removeChild(b.value);
    };
    k.clear = function () {
        for (this.ji = 0; null !== this.Ia.firstChild; ) this.Ia.removeChild(this.Ia.firstChild);
    };
    k.ff = function () {
        this.Ta.focus();
    };
    k.Yg = function () {
        this.Ta.blur();
    };
    k.FF = function (a) {
        this.GF.h(a);
    };
    k.Rf = function () {
        return document.activeElement === this.Ta.element;
    };
    k.en = function (a) {
        lA(this.Ta, a, !0);
    };
    var a_ = new y("userCountUpdate");
    function $Z() {
        function a() {
            if (void 0 !== b.parent && !b.Ou) {
                var d = b.parent;
                OD(d, d.children()[0]);
            }
        }
        PD.call(this);
        var b = this;
        this.ip = 0;
        this.Fc = [];
        this.Ou = !1;
        document.createElement("span");
        this.wP = gh + " ";
        this.element.id = "UserListTab";
        this.element.style.overflow = "visible";
        this.element.style.fontFamily = "Tahoma, Helvetica, Arial, sans-serif";
        this.element.style.boxSizing = "border-box";
        this.element.style.position = "relative";
        this.element.dataset.pactionName = "Users";
        this.Ie = document.createElement("div");
        this.Ie.style.width = "100%";
        this.Ie.style.overflow = "auto";
        this.Ie.style.padding = "6px";
        this.Ie.style.boxSizing = "border-box";
        this.element.appendChild(this.Ie);
        this.bB = l_();
        this.ma = UZ();
        var c = VZ();
        this.pc = WZ(function () {
            return !1;
        }, 4096);
        v("click", this.pc.element, a);
        v("focus", this.pc.element, a);
        this.bf = new UY();
        this.Zc = WY(this.bf, new XZ(!1).element);
        this.Zc.style.marginLeft = "6px";
        this.Zc.onclick = a;
        c.appendChild(this.pc.element);
        this.ma.appendChild(c);
        this.ma.appendChild(this.bf.element);
        this.element.appendChild(this.ma);
        this.un();
        G.g(function (d) {
            b.I = d.l;
            b.I.event.Mc.g(function (e) {
                ("privatewatching" !== e.Lc && "privatewatching" !== e.Sa) ||
                    window.setTimeout(function () {
                        b.refresh();
                    }, 2e3);
            });
            b.I.event.um.g(function (e) {
                b.ip = e;
                a_.h(b.ip);
            });
            b.clear(d.A.QE);
        });
        A.current.hz &&
            vF.g(function (d) {
                SD(b) || m_(b, d);
                var e = d.mp;
                d = d.xA;
                b.ip = d;
                a_.h(d);
                b.bB.innerText = Ze(e);
            });
    }
    q($Z, PD);
    function n_(a) {
        for (; null !== a.Ie.firstChild; ) a.Ie.removeChild(a.Ie.firstChild);
    }
    function l_() {
        var a = document.createElement("div");
        O(a, "defaultTooltipColor");
        Q(a, { width: "100%", margin: "2px 0", whiteSpace: "nowrap", cssFloat: "left" });
        return a;
    }
    k = $Z.prototype;
    k.un = function () {
        var a = document.createElement("div");
        O(a, "defaultColor");
        a.innerText = ai + "...";
        a.style.margin = "8px 0";
        this.Ie.style.fontSize = "12px";
        this.Ie.appendChild(a);
    };
    k.eC = function () {
        var a = this,
            b = document.createElement("div");
        b.style.margin = "6px";
        b.style.cssFloat = "right";
        var c = document.createElement("span");
        c.innerText = bi;
        c.style.cursor = "pointer";
        O(c, "refreshUsersLink");
        c.onmouseenter = function () {
            c.style.textDecoration = "underline";
        };
        c.onmouseleave = function () {
            c.style.textDecoration = "none";
        };
        v("click", c, function (d) {
            a.CF();
            d.preventDefault();
        });
        b.appendChild(c);
        this.Ie.appendChild(b);
    };
    k.CF = function () {
        n_(this);
        this.un();
        this.refresh();
    };
    k.clear = function (a) {
        this.ip = a;
        a_.h(this.ip);
        n_(this);
        this.un();
        this.D();
    };
    k.refresh = function () {
        var a = this;
        if (void 0 !== this.I) {
            var b = GF();
            A.current.hz
                ? (EF(b).catch(ct), m_(this, CF(b)))
                : HF(b)
                      .then(function (c) {
                          a.BL = c;
                          m_(a, c);
                      })
                      .catch(function (c) {
                          r("Error retrieving user list: " + c, "userListTab.ts", "theatermodelib");
                          R(ci);
                          void 0 !== a.BL && m_(a, a.BL);
                      });
        }
    };
    function m_(a, b) {
        n_(a);
        a.eC();
        a.Fc = b.Oq;
        for (var c = l(a.Fc), d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            var e = document.createElement("div");
            Q(e, { width: "auto", maxWidth: "100%", margin: "2px 0" });
            e.appendChild(new BR(d, void 0, !0).element);
            a.Ie.appendChild(e);
        }
        a.Ie.appendChild(a.bB);
        c = b.mp;
        b = b.xA;
        a.ip = b;
        a_.h(b);
        a.bB.innerText = Ze(c);
        a.D();
    }
    k.D = function () {
        this.ma.style.width = this.element.clientWidth - 10 + "px";
        VY(this.bf);
        this.pc.element.style.width = Math.max(0, this.ma.clientWidth - 18 - Math.ceil(this.Zc.offsetWidth) - 4) + "px";
        this.Ie.style.height = this.element.clientHeight - 28 - 4 + "px";
    };
    k.jj = function () {
        void 0 === this.CG &&
            ((this.CG = V(
                "div",
                { style: { display: "inline-block" } },
                V(
                    "svg",
                    { style: { height: "1em" }, width: "16", height: "16", viewBox: "0 0 16 16", xmlns: "http://www.w3.org/2000/svg" },
                    V("path", {
                        d:
                            "M3.482 7.91071C3.45013 7.89982 3.4223 7.87953 3.40219 7.85252C3.38208 7.8255 3.37062 7.79303 3.36933 7.75937C3.36827 7.72563 3.37736 7.69233 3.39542 7.66381C3.41349 7.63528 3.4397 7.61284 3.47067 7.59937C3.92472 7.40632 4.29812 7.06231 4.52765 6.62556C4.75718 6.18882 4.82875 5.68617 4.73025 5.20272C4.63174 4.71927 4.3692 4.2847 3.98708 3.97259C3.60495 3.66048 3.12672 3.48999 2.63333 3.48999C2.13995 3.48999 1.66171 3.66048 1.27959 3.97259C0.897467 4.2847 0.63493 4.71927 0.536421 5.20272C0.437912 5.68617 0.509482 6.18882 0.739017 6.62556C0.968551 7.06231 1.34195 7.40632 1.796 7.59937C1.82712 7.61253 1.85351 7.63484 1.87166 7.66334C1.88982 7.69184 1.89888 7.72518 1.89765 7.75895C1.89642 7.79271 1.88496 7.82531 1.86478 7.85241C1.8446 7.87952 1.81666 7.89985 1.78467 7.91071C1.26465 8.08858 0.813146 8.4244 0.4932 8.87127C0.173253 9.31815 0.000829249 9.85377 0 10.4034L0 12.3787C0 12.4661 0.0346975 12.5498 0.0964595 12.6116C0.158221 12.6733 0.241989 12.708 0.329333 12.708H0.916667C0.95808 12.7081 0.997978 12.7236 1.02847 12.7516C1.05896 12.7797 1.07783 12.8181 1.08133 12.8594L1.318 15.6987C1.32486 15.7809 1.36241 15.8576 1.42317 15.9134C1.48394 15.9692 1.56348 16.0002 1.646 16H3.62133C3.70374 16 3.78311 15.969 3.84374 15.9132C3.90436 15.8574 3.94181 15.7808 3.94867 15.6987L4.186 12.8594C4.18935 12.8182 4.20807 12.7797 4.23846 12.7517C4.26884 12.7237 4.30866 12.7081 4.35 12.708H4.938C4.98122 12.708 5.02401 12.6995 5.06393 12.683C5.10385 12.6664 5.14011 12.6421 5.17064 12.6115C5.20117 12.5809 5.22536 12.5446 5.24184 12.5047C5.25832 12.4647 5.26675 12.4219 5.26667 12.3787V10.4034C5.26604 9.85372 5.09369 9.31801 4.77372 8.8711C4.45374 8.42418 4.00213 8.08841 3.482 7.91071Z",
                    }),
                    V("path", {
                        d:
                            "M14.2154 7.91071C14.1834 7.89985 14.1555 7.87952 14.1353 7.85241C14.1151 7.82531 14.1036 7.79271 14.1024 7.75895C14.1012 7.72518 14.1102 7.69184 14.1284 7.66334C14.1466 7.63484 14.1729 7.61253 14.2041 7.59937C14.6581 7.40632 15.0315 7.06231 15.261 6.62556C15.4906 6.18882 15.5622 5.68617 15.4636 5.20272C15.3651 4.71927 15.1026 4.2847 14.7205 3.97259C14.3384 3.66048 13.8601 3.48999 13.3667 3.48999C12.8733 3.48999 12.3951 3.66048 12.013 3.97259C11.6309 4.2847 11.3683 4.71927 11.2698 5.20272C11.1713 5.68617 11.2429 6.18882 11.4724 6.62556C11.7019 7.06231 12.0753 7.40632 12.5294 7.59937C12.5605 7.61259 12.5868 7.63496 12.6049 7.6635C12.623 7.69204 12.632 7.72541 12.6307 7.75918C12.6294 7.79295 12.6179 7.82553 12.5977 7.85259C12.5774 7.87965 12.5494 7.89992 12.5174 7.91071C11.9974 8.08861 11.546 8.42445 11.2262 8.87134C10.9064 9.31822 10.7341 9.85383 10.7334 10.4034V12.3787C10.7333 12.4219 10.7417 12.4647 10.7582 12.5047C10.7747 12.5446 10.7989 12.5809 10.8294 12.6115C10.86 12.6421 10.8962 12.6664 10.9361 12.683C10.9761 12.6995 11.0188 12.708 11.0621 12.708H11.6501C11.6914 12.7081 11.7312 12.7237 11.7616 12.7517C11.792 12.7797 11.8107 12.8182 11.8141 12.8594L12.0514 15.6987C12.0583 15.7808 12.0957 15.8574 12.1563 15.9132C12.217 15.969 12.2963 16 12.3787 16H14.3541C14.4366 16.0002 14.5161 15.9692 14.5769 15.9134C14.6377 15.8576 14.6752 15.7809 14.6821 15.6987L14.9187 12.8594C14.9222 12.8181 14.9411 12.7797 14.9716 12.7516C15.0021 12.7236 15.042 12.7081 15.0834 12.708H15.6707C15.7581 12.708 15.8418 12.6733 15.9036 12.6116C15.9654 12.5498 16.0001 12.4661 16.0001 12.3787V10.4034C15.9992 9.85377 15.8268 9.31815 15.5069 8.87127C15.1869 8.4244 14.7354 8.08858 14.2154 7.91071Z",
                    }),
                    V("path", {
                        d:
                            "M8.78198 3.75737C8.75083 3.74636 8.72367 3.7263 8.70399 3.69976C8.68431 3.67323 8.67299 3.64142 8.67148 3.60842C8.66998 3.57541 8.67836 3.54271 8.69555 3.51449C8.71274 3.48628 8.73796 3.46384 8.76798 3.45004C9.14122 3.27559 9.4438 2.97908 9.62578 2.60945C9.80775 2.23983 9.85823 1.8192 9.76889 1.41701C9.67954 1.01482 9.4557 0.655134 9.13434 0.39733C8.81298 0.139525 8.4133 -0.000976562 8.00131 -0.000976562C7.58932 -0.000976562 7.18965 0.139525 6.86828 0.39733C6.54692 0.655134 6.32309 1.01482 6.23374 1.41701C6.14439 1.8192 6.19487 2.23983 6.37685 2.60945C6.55882 2.97908 6.86141 3.27559 7.23465 3.45004C7.26467 3.46384 7.28988 3.48628 7.30707 3.51449C7.32426 3.54271 7.33264 3.57541 7.33114 3.60842C7.32964 3.64142 7.31832 3.67323 7.29863 3.69976C7.27895 3.7263 7.2518 3.74636 7.22065 3.75737C6.7746 3.91826 6.38891 4.21259 6.116 4.60036C5.8431 4.98813 5.69621 5.45053 5.69531 5.9247V6.91337C5.69635 7.00039 5.73138 7.08356 5.79292 7.1451C5.85446 7.20663 5.93762 7.24166 6.02465 7.2427H6.57065C6.61112 7.24247 6.65024 7.25728 6.68042 7.28426C6.7106 7.31123 6.72968 7.34845 6.73398 7.3887L7.01398 9.91337C7.023 9.99387 7.06137 10.0682 7.12176 10.1222C7.18214 10.1762 7.26031 10.206 7.34131 10.206H8.65865C8.73958 10.206 8.81766 10.1762 8.87794 10.1222C8.93821 10.0682 8.97645 9.99381 8.98531 9.91337L9.26598 7.3887C9.27057 7.34846 9.28984 7.31131 9.32009 7.28438C9.35035 7.25744 9.38947 7.24261 9.42998 7.2427H9.97531C10.0627 7.2427 10.1464 7.208 10.2082 7.14624C10.2699 7.08448 10.3046 7.00071 10.3046 6.91337V5.92404C10.304 5.45025 10.1575 4.98815 9.8851 4.60051C9.61268 4.21287 9.22753 3.91849 8.78198 3.75737Z",
                    })
                )
            )),
            (this.CG.style.height = "1em"),
            (this.CG.style.paddingTop = "1px"));
        var a = document.createTextNode(this.wP + "(" + this.ip + ")"),
            b = document.createElement("span");
        b.dataset.pactionName = "USERS";
        b.style.verticalAlign = "top";
        b.appendChild(a);
        return [b];
    };
    k.kk = function () {
        return "users-tab-default";
    };
    k.ff = function () {
        this.pc.focus();
    };
    k.Yg = function () {
        this.pc.blur();
    };
    k.Rf = function () {
        return document.activeElement === this.pc.element;
    };
    k.Ea = function () {
        this.Ie.scrollTop = this.Ie.scrollHeight - this.Ie.offsetHeight;
    };
    k.Ol = function () {};
    k.Lg = function (a) {
        PD.prototype.Lg.call(this, a);
        F("FocusTab", { location: "userlist" });
        this.refresh();
    };
    function o_(a, b) {
        w.call(this);
        var c = this;
        this.F = a;
        this.hk = new y("forceHlsPlayerEvent");
        this.br = new y("setPlayerComponentMutedEvents");
        this.cG = new y("setPlayerComponentVolumeMutedEvents");
        this.Vy = new y("playerComponentEnterFullScreenModeEvent");
        this.Wy = new y("playerComponentReadjustForceHlsOverlayOrderEvent");
        this.Xy = new y("playerComponentReadjustPlayButtonContainerEvent");
        this.Hz = new y("showJpegPlayerComponentImage");
        this.sm = new y("requestVideoQualityButtonVisibilityChange");
        this.Ed = new y("videoOfflineChange");
        this.state = { volume: 60, va: !0 };
        this.vk = iz();
        this.Jk = this.Sd = this.Ms = this.Ns = this.visible = this.ct = this.mf = this.tb = !1;
        this.$G(a);
        a = Bc(window.location.search).disable_sound;
        (void 0 !== a && "true" === a.toLowerCase()) || "1" === a
            ? ((this.state.volume = 0), (this.state.va = !0))
            : Qa() && ((a = window.localStorage.getItem("videoControls")), null !== a ? ((a = JSON.parse(a)), (this.state = { volume: a.volume, va: this.wo ? a.isMuted : !0 })) : (this.state.va = !this.wo));
        Gc = this.state.va ? 0 : this.state.volume;
        this.Ur = window.navigator.userAgent;
        this.element.style.overflow = "";
        this.element.style.bottom = "0";
        this.element.style.left = "0";
        this.element.style.height = "26px";
        this.element.style.background = "linear-gradient(180deg, rgba(50, 50, 50, 0) 0%, rgba(50, 50, 50, 0.4) 66%, rgba(50, 50, 50, 0.7) 100%)";
        this.nC();
        this.element.appendChild(this.pb);
        this.oC();
        this.element.appendChild(this.qb.element);
        this.mC(b);
        this.element.appendChild(this.dc);
        this.gd = new AD();
        this.gd.element.dataset.paction = "TheaterOverlayTabs";
        this.gd.element.style.position = "absolute";
        this.gd.element.style.bottom = "0";
        this.gd.element.style.right = "0";
        this.gd.element.style.textAlign = "right";
        this.G(this.gd);
        this.gd.element.onclick = function (e) {
            e.stopPropagation();
        };
        this.dC();
        this.gd.element.appendChild(this.Ue);
        this.ze = p_($l);
        var d = !1;
        zN(this.ze, this.Ed) && (this.gd.element.appendChild(this.ze), (d = !0));
        this.gC();
        this.gd.element.appendChild(this.da);
        this.QB();
        this.gd.element.appendChild(this.Jd);
        this.kC();
        this.gd.element.appendChild(this.Fe);
        this.aC();
        this.gd.element.appendChild(this.Bg);
        this.jC();
        this.gd.element.appendChild(this.Nc);
        this.VB();
        this.gd.element.appendChild(this.Kb);
        G.g(function (e) {
            var f, g;
            e.A.tb
                ? ((c.Jk = e.A.ge),
                  c.xi(e.l.status),
                  e.l.event.Mc.g(function (h) {
                      c.ZG(h.Sa);
                      c.xi(h.Sa);
                      "privatespying" === h.Sa && Jr.h(void 0);
                      c.Ru(h.Sa);
                  }),
                  e.l.event.Fm.g(function (h) {
                      c.Jk = h.ge && !0 === e.A.tb;
                      c.xi(e.l.status);
                  }))
                : ((c.Jk = !1), c.xi(e.l.status));
            null === (f = c.Ob) || void 0 === f ? void 0 : f.show();
            ub() &&
                !sb() &&
                !ib() &&
                d &&
                uc &&
                void 0 === c.Ob &&
                ((c.Ob = vw(
                    c.ze,
                    {
                        width: 250,
                        content: qp,
                        qg: !1,
                        Rc: 0,
                        wd: "135px",
                        kj: function (h) {
                            return q_() ? 0 : 0.45 * h.getBoundingClientRect().width;
                        },
                        Qj: function (h) {
                            return q_() ? 0.18 * h.getBoundingClientRect().height : 3;
                        },
                        Gz: ["fullvideo", "fullscreen", "theater"],
                    },
                    null !== (g = c.Nb.parentElement) && void 0 !== g ? g : void 0
                )),
                c.Zf && void 0 !== c.Ob && (c.Ob.element.style.zIndex = "100"),
                v("click", c.ze, function () {
                    var h;
                    null === (h = c.Ob) || void 0 === h ? void 0 : sw(h);
                }));
            c.je = e;
            c.vo && !c.Ms && ((c.Ms = !0), c.UB(), c.Ru(e.A.sa));
            c.tb = e.A.tb;
            c.vk = "offline" === e.A.sa;
            c.Pj();
            c.Zf || mX(c);
            c.Mj();
            c.xb();
            c.F.Ed.g(function (h) {
                c.vk = h;
            });
        });
        Qv.ud.g(function (e) {
            var f, g;
            "fullscreen" === e.Mf ? (null === (f = c.Ob) || void 0 === f ? void 0 : tw(f, 1)) : null === (g = c.Ob) || void 0 === g ? void 0 : tw(g, 0);
            c.Mj();
        });
        gw.g(function (e) {
            (c.visible && e) || c.xb();
        });
        Yy.g(function () {
            nX(c);
        });
        jv.g(function () {
            pd() && oX(c);
        });
        JB.g(function () {
            c.Oe();
        }, !1);
        v(nd(), document, function () {
            pd() && md() === c.WC && Ov("fullscreen");
        });
        this.element.onmousemove = function () {
            c.xb();
        };
        this.Nb.ontouchstart = function () {
            c.xb();
        };
        v("click", this.element, function (e) {
            e.stopPropagation();
        });
        this.B();
    }
    q(o_, w);
    k = o_.prototype;
    k.$G = function (a) {
        this.Nb = a.element;
        this.wo = a.N.bA;
        a.N instanceof zQ ? ((this.Zf = !0), (this.vo = a.N.Wn)) : (this.vo = this.Zf = !1);
        this.cu = a.am;
        this.eq = a.eq();
    };
    k.mC = function (a) {
        function b(d) {
            d = d.target;
            c.dc.contains(d) || a.element.contains(d) || (c.sm.h(!1), Bb("touchend", document, b));
        }
        var c = this;
        this.dc = p_("");
        this.dc.title = "Video Quality";
        this.dc.style.position = "absolute";
        this.dc.style.bottom = "0";
        this.dc.style.left = "103px";
        this.dc.onmouseover = function () {
            c.sm.h(!0);
            v("touchend", document, b);
        };
        this.dc.onmouseout = function (d) {
            null !== d.relatedTarget && ((d = d.relatedTarget.parentNode), null === d || d.isEqualNode(a.element) || c.sm.h(!1));
        };
    };
    k.oC = function () {
        function a(c) {
            c !== b.state.volume && ((b.state.volume = c), (b.state.va = 0 === b.state.volume), pX(b), b.Pj(), b.Zd());
        }
        var b = this;
        this.qb = new ev({ md: 12, Ri: 50 });
        this.qb.element.title = "Volume Slider";
        this.qb.element.style.margin = "6px 5px 0 0";
        this.qb.element.style.position = "absolute";
        this.qb.element.style.bottom = "7px";
        this.qb.element.style.left = "36px";
        this.qb.HA.g(function (c) {
            b.Sd && void 0 !== b.je && (b.Oe(!1), F("ForceHLS"), b.hk.h({ Jq: b.je }), b.Lj(), hv.h(void 0));
            b.br.h(!1);
            a(c);
        });
        this.qb.IA.g(a);
        this.qb.GA.g(function (c) {
            a(c);
            0 === b.state.volume && b.br.h(!0);
            F("ChangeVolume", { volume: c });
            b.Zd();
        });
        mb() && this.qb.ha();
    };
    k.nC = function () {
        var a = this;
        this.pb = document.createElement("img");
        this.pb.title = "Volume";
        this.pb.style.height = "24px";
        this.pb.style.width = "24px";
        this.pb.style.margin = "0 6px 2px 6px";
        this.pb.style.cursor = "pointer";
        this.pb.style.position = "absolute";
        this.pb.style.bottom = "0";
        this.pb.onclick = function () {
            !a.Zf || -1 < a.Ur.indexOf("MSIE 10.0") || -1 < a.Ur.indexOf("MSIE 9.0")
                ? (F("ToggleMute", { newState: !a.state.va }), F("ChangeVolume", { volume: a.state.volume }), a.state.va ? a.Lj() : nX(a), a.xb())
                : void 0 === a.je
                ? r("unexpected switch to hls", "textVideoControls.ts", "theatermodelib", {}, "VIDEO_")
                : (a.Sd && a.Oe(!1), F("ForceHLS"), a.hk.h({ Jq: a.je }), a.Lj(), hv.h(void 0));
        };
    };
    k.dC = function () {
        this.Ue = p_(ng);
        this.Ue.onclick = function () {
            Jr.h(void 0);
        };
    };
    k.gC = function () {
        this.da = p_(Rf);
        this.da.id = "send-tip";
        this.da.onclick = function () {
            Gr.h({});
        };
    };
    k.QB = function () {
        this.Jd = p_("Chat");
        this.Jd.id = "chat-btn";
        this.Jd.style.display = "none";
        this.Jd.onclick = function () {
            Kr.h(void 0);
        };
    };
    k.kC = function () {
        var a = this;
        this.Fe = p_(fh + " (0)");
        this.Fe.id = "user-list";
        this.Fe.dataset.pactionName = "Users";
        this.Fe.onclick = function () {
            Fr.h(void 0);
        };
        a_.g(function (b) {
            a.Fe.innerText = fh + " (" + b + ")";
        });
    };
    k.aC = function () {
        this.Bg = p_("More Rooms");
        this.Bg.id = "more-rooms";
        this.Bg.onclick = function () {
            Xy.h(void 0);
        };
    };
    k.jC = function () {
        var a = this;
        this.Nc = p_("Theater Mode");
        this.Nc.onclick = function () {
            var b = "split";
            "split" === Y() && (b = "theater");
            Ov(b);
            Rv();
            a.Mj();
        };
    };
    k.VB = function () {
        var a = this;
        this.mf = ld() || kb();
        document[od()] = function () {
            pd() || ((a.mf = !1), (a.Kb.style.display = "none"), R("Full screen is unavailable."));
        };
        this.Kb = p_("Full Screen");
        this.Kb.id = "full-screen";
        this.mf || (this.Kb.style.display = "none");
        this.Kb.onclick = function () {
            a.sA();
        };
    };
    k.xi = function (a) {
        var b = ["privaterequesting", "privatespying", "privatewatching"];
        if (this.Jk || -1 !== b.indexOf(a))
            switch (a) {
                case "unknown":
                case "offline":
                case "notconnected":
                case "away":
                case "hidden":
                case "hiddenwatching":
                case "passwordprotected":
                case "privatenotwatching":
                    this.Ue.style.display = "none";
                    break;
                default:
                    this.Ue.style.display = "split" === Y() ? "none" : "inline-block";
            }
        else this.Ue.style.display = "none";
    };
    k.Mj = function () {
        this.da.style.display = this.tb ? "inline-block" : "none";
        this.Bg.style.display = "none";
        this.Fe.style.display = "inline-block";
        this.Nc.innerText = vj;
        this.Nc.style.display = "inline-block";
        this.Kb.innerText = wj;
        this.Jd.style.display = "inline";
        this.ze.style.display = "block";
        void 0 !== this.je && this.xi(this.je.l.status);
        this.mf && (this.Kb.style.display = "inline-block");
        switch (Y()) {
            case "split":
                this.da.style.display = "none";
                this.Fe.style.display = "none";
                this.Jd.style.display = "none";
                this.Ue.style.display = "none";
                this.ze.style.display = "none";
                this.eq && (this.Nc.style.display = "none");
                break;
            case "videoonly":
                this.da.style.display = "none";
                this.Fe.style.display = "none";
                this.Jd.style.display = "none";
                this.Ue.style.display = "none";
                this.ze.style.display = "none";
                this.Nc.style.display = "none";
                this.Kb.style.display = "none";
                break;
            case "theater":
                this.Nc.innerText = yj;
                this.Nc.id = "default-view";
                this.Bg.style.display = "inline-block";
                break;
            case "fullscreen":
                this.Bg.style.display = "inline-block";
                this.Nc.style.display = "none";
                this.Kb.innerText = xj;
                break;
            case "noninteractive-fullscreen":
                break;
            default:
                r("Unexpected VideoMode: " + Y(), "textVideoControls.ts", "theatermodelib", {}, "VIDEO_");
        }
        this.vk && ((this.ze.style.display = "none"), (this.Fe.style.display = "none"));
        this.xb();
    };
    k.Pj = function () {
        var a = this.qb.ld();
        0 === a || this.state.va
            ? ((this.pb.src = "https://static-assets.highwebmedia.com/tsdefaultassets/volume-mute.svg"), (this.pb.id = "volume-mute"))
            : 33 > a
            ? ((this.pb.src = "https://static-assets.highwebmedia.com/tsdefaultassets/volume-low.svg"), (this.pb.id = "volume-low"))
            : 66 > a
            ? ((this.pb.src = "https://static-assets.highwebmedia.com/tsdefaultassets/volume-medium.svg"), (this.pb.id = "volume-medium"))
            : ((this.pb.src = "https://static-assets.highwebmedia.com/tsdefaultassets/volume-high.svg"), (this.pb.id = "volume-high"));
    };
    k.Zd = function () {
        Qa() && !this.cu && window.localStorage.setItem("videoControls", JSON.stringify({ volume: this.state.volume, isMuted: this.state.va }));
        Gc = this.state.va ? 0 : this.state.volume;
    };
    k.update = function () {
        mX(this);
        this.Zd();
    };
    k.Lj = function () {
        this.Sm(!1);
        0 === this.state.volume && (this.state.volume = 60);
        this.update();
    };
    k.toggle = function () {
        this.visible ? this.rg() : this.xb();
    };
    k.xb = function () {
        var a = this,
            b;
        if (this.vk) this.rg();
        else {
            jX.h("text");
            this.visible = !0;
            r_(this);
            Yu(this.element, "100ms");
            this.element.style.display = "block";
            void 0 !== this.yx && clearTimeout(this.yx);
            void 0 !== this.km && clearTimeout(this.km);
            var c = this.ct ? 2e3 : 5e3;
            this.yx = window.setTimeout(function () {
                a.yx = void 0;
                a.km = window.setTimeout(function () {
                    a.km = void 0;
                    a.rg();
                }, c - 100);
            }, 100);
            null === (b = this.Ob) || void 0 === b ? void 0 : b.show();
        }
    };
    function q_() {
        return "theater" === Y() && 750 > Uv();
    }
    function r_(a) {
        var b,
            c,
            d = q_();
        d
            ? ((a.gd.element.style.width = "100px"), (a.gd.element.style.marginBottom = "15px"), null === (b = a.Ob) || void 0 === b ? void 0 : tw(b, 3, "12px"))
            : ((a.gd.element.style.width = ""), (a.gd.element.style.marginBottom = ""), (b = "fullscreen" === Y() ? 1 : 0), null === (c = a.Ob) || void 0 === c ? void 0 : tw(c, b, "135px"));
        a = l(a.gd.element.children);
        for (c = a.next(); !c.done; c = a.next()) (c = c.value), c instanceof HTMLElement && "none" !== c.style.display && (c.style.display = d ? "block" : "inline-block");
    }
    k.rg = function () {
        var a;
        this.Sd || void 0 !== this.yx || (kX.h(void 0), (this.visible = !1), (this.ct = !0), Yu(this.element, "500ms"), (this.element.style.display = "none"), null === (a = this.Ob) || void 0 === a ? void 0 : a.B());
    };
    k.show = function () {
        this.element.style.visibility = "";
        this.xb();
        this.element.style.zIndex = this.Sd ? "10" : "2";
    };
    k.B = function () {
        this.element.style.visibility = "hidden";
    };
    k.qv = function (a) {
        this.state.volume = a;
        this.qb.vh(this.state.va ? 0 : this.state.volume);
        this.Pj();
    };
    k.Sm = function (a) {
        this.state.va = a;
        this.qb.vh(this.state.va ? 0 : this.state.volume);
        this.Pj();
    };
    k.GO = function (a) {
        this.qv(a);
        this.Zd();
    };
    k.FO = function (a) {
        this.Sm(a);
        this.Zd();
    };
    k.OD = function () {
        return !1;
    };
    k.sA = function () {
        this.Sd && this.Oe();
        pd() ? kd() : this.mf && this.Vy.h(void 0);
        this.Mj();
    };
    k.ZG = function (a) {
        switch (a) {
            case "unknown":
            case "offline":
            case "notconnected":
            case "away":
            case "privatenotwatching":
            case "hidden":
            case "passwordprotected":
                if ("fullscreen" === Y()) {
                    this.Kb.style.display = this.mf ? "inline" : "none";
                    break;
                }
                pd() && kd();
                this.Kb.style.display = "none";
                break;
            case "public":
            case "privatespying":
            case "privatewatching":
            case "privaterequesting":
            case "hiddenwatching":
                this.Kb.style.display = this.mf ? "inline-block" : "none";
                break;
            default:
                r("unexpected room status", "textVideoControls.ts", "theatermodelib", a, "");
        }
    };
    k.Oe = function (a) {
        a = void 0 === a ? !0 : a;
        this.Sd &&
            void 0 !== this.je &&
            (void 0 !== this.jb && null !== this.jb.parentElement && (this.jb.parentElement.removeChild(this.jb), (this.jb = void 0)),
            void 0 !== this.Ma && null !== this.Ma.parentElement && (this.Ma.parentElement.removeChild(this.Ma), (this.Ma = void 0)),
            (this.Sd = !1),
            this.rg(),
            this.B(),
            (this.dc.innerText = ""),
            (this.dc.style.display = "none"),
            !this.Ns && a && ((this.Ns = !0), F("ForceHLS"), this.hk.h({ Jq: this.je, Lj: !1 }), hv.h(void 0)),
            (this.element.style.zIndex = "2"));
    };
    k.YB = function () {
        var a = this;
        this.jb = document.createElement("div");
        this.jb.style.width = "100%";
        this.jb.style.height = "100%";
        this.jb.style.position = "absolute";
        this.jb.style.top = "0";
        this.jb.style.left = "0";
        this.jb.style.cursor = "pointer";
        v("click", this.jb, function () {
            a.Oe();
        });
        v("click", this.element, function () {
            a.Oe();
        });
        this.Wy.h(this.jb);
    };
    k.Ru = function (a) {
        void 0 !== this.Ma && void 0 !== this.jb && ("public" === a ? ((this.Ma.style.display = ""), (this.jb.style.display = "")) : ((this.Ma.style.display = "none"), (this.jb.style.display = "none")));
    };
    k.UB = function () {
        var a = this;
        if (this.Zf) {
            this.Sd = !0;
            this.Ma = document.createElement("div");
            var b = this.Nb.getBoundingClientRect(),
                c = document.createElement("img");
            c.src = "https://static-assets.highwebmedia.com/tsdefaultassets/play-inactive.svg";
            c.style.width = "60px";
            c.style.height = "60px";
            c.style.position = "relative";
            c.style.top = "40px";
            c.style.left = "45px";
            c.style.cursor = "pointer";
            v("click", c, function () {
                a.Oe();
            });
            this.Ma.style.position = "absolute";
            this.Ma.style.top = b.height / 2 - 70 + "px";
            this.Ma.style.left = b.width / 2 - 70 + "px";
            this.Ma.style.cursor = "pointer";
            this.Ma.style.width = "140px";
            this.Ma.style.height = "140px";
            this.Ma.style.borderRadius = "50%";
            this.Ma.style.backgroundColor = "rgba(0,0,0,0.25)";
            this.Ma.appendChild(c);
            this.Xy.h(this.Ma);
            this.Hz.h(void 0);
            this.YB();
            this.D();
        }
    };
    k.D = function () {
        if (void 0 !== this.Ma) {
            var a = this.Nb.getBoundingClientRect();
            this.Ma.style.top = a.height / 2 - 70 + "px";
            this.Ma.style.left = a.width / 2 - 70 + "px";
        }
    };
    k.eM = function (a) {
        this.cu = a;
    };
    k.hM = function (a) {
        this.wo = a;
    };
    k.LE = function (a) {
        this.Zf = a;
    };
    k.KE = function (a) {
        this.vo = a;
    };
    k.iM = function (a) {
        this.Ed.h(a);
    };
    k.ko = function (a) {
        this.dc.innerText = a;
    };
    k.PN = function (a) {
        this.dc.style.display = a ? "" : "none";
    };
    k.ON = function () {};
    k.jK = function () {
        return this.dc.offsetLeft;
    };
    k.pI = function (a) {
        for (var b = l(this.qb.element.children), c = b.next(); !c.done; c = b.next()) if (a === c.value) return !0;
        return a === this.pb || a === this.qb.element || a === this.qb.la;
    };
    k.ty = function () {};
    function p_(a) {
        var b = document.createElement("span");
        b.innerText = a;
        b.style.color = "#ffffff";
        b.style.fontSize = "13px";
        b.style.padding = "5px";
        b.style.marginRight = "4px";
        b.style.cursor = "pointer";
        b.style.display = "inline-block";
        return b;
    }
    function s_(a) {
        Xu.call(this);
        var b = this;
        this.F = a;
        this.ME = new y("notifyQualityLevelLabelChanged");
        this.ko = new y("notifyQualityLevelChanged");
        this.IF = new y("requestVideoQualityButtonVisibilityChange");
        this.mN = new y("requestVideoQualityModalReposition");
        this.NE = new y("notifyVisibilityChanged");
        this.vF = new Map();
        this.element.style.visibility = "hidden";
        this.element.style.width = "auto";
        this.element.style.minWidth = "100px";
        this.element.style.height = "auto";
        this.element.style.backgroundColor = "black";
        this.element.style.position = "absolute";
        this.element.style.borderRadius = "2px";
        this.element.style.backgroundColor = "rgba(50, 50, 50, 0.7)";
        this.F.N instanceof EQ &&
            v("visibilitychange", document, function () {
                b.F.lH || ("visible" === document.visibilityState ? (void 0 !== b.pF && (b.ko.h(b.pF), (b.pF = void 0)), clearTimeout(b.gV)) : "hidden" === document.visibilityState && t_(b));
            });
        this.element.onmouseleave = function () {
            b.B();
        };
    }
    q(s_, Xu);
    s_.prototype.D = function () {
        this.mN.h(void 0);
    };
    function u_(a, b) {
        var c = document.createElement("div");
        c.innerText = b.label;
        c.style.color = "#ffffff";
        c.style.fontSize = "13px";
        c.style.padding = "5px";
        c.style.marginRight = "6px";
        c.style.cursor = "pointer";
        c.style.width = "100%";
        b.ap
            ? ((c.style.backgroundColor = "#ffffff"), (c.style.color = "#333333"))
            : ((c.onclick = function () {
                  a.Mo(b.label);
                  a.ME.h(b.label);
              }),
              (c.onmouseenter = function () {
                  c.style.backgroundColor = "rgba(150, 150, 150, 0.3)";
              }),
              (c.onmouseleave = function () {
                  c.style.backgroundColor = "";
              }));
        return c;
    }
    s_.prototype.Mo = function (a) {
        a = this.vF.get(a);
        void 0 === a ? r("Undefined quality level key", "videoQualityModal.ts", "theatermodelib", {}, "VIDEO_") : (this.ko.h(a), (this.rC = a));
    };
    function t_(a) {
        a.gV = window.setTimeout(function () {
            a.pF = a.rC;
            a.ko.h(0);
            a.rC = 0;
        }, 3e5);
    }
    s_.prototype.show = function () {
        this.NE.h(!0);
        this.Ja();
        this.element.style.visibility = "";
        this.D();
    };
    s_.prototype.B = function () {
        this.NE.h(!1);
        this.ha();
        this.element.style.visibility = "hidden";
    };
    var v_ = new y("showSignupCTA"),
        w_ = new y("hideSignupCTA");
    function x_() {
        Jz.apply(this, arguments);
        this.H = new Ub();
    }
    q(x_, Jz);
    x_.prototype.initData = function (a) {
        var b = this;
        this.Z = a;
        y_(this);
        G.g(function () {
            b.xC = 0;
            b.TD = !0;
            b.tD = window.setTimeout(function () {
                z_(b);
            }, A_(b));
            B_(b);
            C_(b);
            D_(b);
        });
        Kc.g(function () {
            Vb(b.H);
        });
    };
    function B_(a) {
        z(
            jX.g(function (b) {
                "text" === b ? a.element.classList.add("with-text-video-controls") : a.element.classList.add("with-icon-video-controls");
            }),
            a.H
        );
        z(
            kX.g(function () {
                a.element.classList.remove("with-text-video-controls", "with-icon-video-controls");
            }),
            a.H
        );
    }
    function C_(a) {
        z(
            cw.g(function () {
                var b = a.Z.GG.element;
                500 > b.offsetWidth
                    ? a.B()
                    : (700 >= b.offsetWidth
                          ? (Q(a.kJ, { fontSize: "12px", lineHeight: "15px" }), Q(a.dO, { padding: "4px 0px", width: "108px", fontSize: "13px", marginLeft: "9px" }))
                          : (Q(a.kJ, { fontSize: "14px", lineHeight: "20px" }), Q(a.dO, { padding: "8px 0px", width: "156px", fontSize: "18px", marginLeft: "16px" })),
                      a.show());
            }),
            a.H
        );
    }
    function y_(a) {
        v("resize", window, function () {
            "split" !== Y() && (750 > window.innerWidth ? a.B() : 750 <= window.innerWidth && a.show());
        });
    }
    function D_(a) {
        z(
            Qv.ud.g(function (b) {
                var c = a.Z.GG.element;
                "split" === b.Mf ? 500 <= c.offsetWidth && a.show() : 750 > window.innerWidth ? (a.B(), w_.h(void 0)) : 750 <= window.innerWidth && (a.show(), v_.h(void 0));
            }),
            a.H
        );
    }
    function A_(a) {
        switch (a.xC) {
            case 0:
                return 3e5;
            case 1:
                return 6e5;
            case 2:
                return 9e5;
        }
    }
    x_.prototype.B = function () {
        this.La() && (Yu(this.element, "500ms"), this.ha(), w_.h(void 0));
    };
    x_.prototype.show = function () {
        if (!this.La()) {
            var a = "split" === Y(),
                b = this.Z.GG.element;
            this.TD || (!a && 750 > window.innerWidth) || (a && 500 > b.offsetWidth) || (Yu(this.element, "100ms"), this.Ja("flex"), v_.h(void 0));
        }
    };
    function E_(a) {
        a.TD = !0;
        a.xC += 1;
        a.B();
        void 0 !== a.Jz && window.clearTimeout(a.Jz);
        var b = A_(a);
        void 0 !== b &&
            (void 0 !== a.tD && window.clearTimeout(a.tD),
            (a.tD = window.setTimeout(function () {
                z_(a);
            }, b)));
    }
    function z_(a) {
        a.TD = !1;
        a.show();
        a.Jz = window.setTimeout(function () {
            E_(a);
        }, 15e3);
    }
    x_.prototype.createElement = function () {
        var a = this;
        return V(
            "div",
            {
                onMouseEnter: function () {
                    void 0 !== a.Jz && window.clearTimeout(a.Jz);
                    z_(a);
                },
                style: F_,
                className: "video_overlay_signup_cta",
            },
            V(
                "span",
                {
                    style: G_,
                    ref: function (b) {
                        return (a.kJ = b);
                    },
                },
                Fq
            ),
            V(
                "div",
                { style: H_ },
                V(
                    "div",
                    {
                        className: "cta_button",
                        style: I_,
                        onClick: function () {
                            F("SignupCTADismissed");
                            E_(a);
                        },
                    },
                    Gq
                ),
                V(
                    "a",
                    {
                        className: "cta_button",
                        style: J_,
                        href: "/accounts/register/?next=" + encodeURIComponent(window.location.pathname),
                        onClick: function () {
                            F("SignupCTAClicked");
                        },
                        ref: function (b) {
                            return (a.dO = b);
                        },
                    },
                    Hq
                )
            )
        );
    };
    var F_ = { width: "100%", background: "rgba(0,0,0,0.5)", padding: "5px 13px", display: "none", alignItems: "center", justifyContent: "space-between", zIndex: 0, position: "absolute", boxSizing: "border-box" },
        G_ = { fontFamily: "UbuntuRegular, Helvetica, Arial, sans-serif", fontWeight: 400, fontSize: "14px", lineHeight: "20px", color: "#FFFFFF", marginRight: "58px" },
        H_ = { display: "flex", alignItems: "center", justifyContent: "center" },
        I_ = { fontFamily: "UbuntuRegular, Helvetica, Arial, sans-serif", fontWeight: 400, fontSize: "13px", lineHeight: "16px", color: "#E6E6E6", cursor: "pointer" },
        J_ = {
            padding: "8px 0px",
            border: "2px solid #D9D9D9",
            borderRadius: "3px",
            color: "#FFFFFF",
            fontFamily: "UbuntuRegular, Helvetica, Arial, sans-serif",
            fontWeight: 700,
            fontSize: "18px",
            lineHeight: "16px",
            textTransform: "uppercase",
            width: "156px",
            textAlign: "center",
            marginLeft: "16px",
        };
    var K_ = new y("scrollToTheaterModePlayer");
    function L_(a) {
        MQ.call(this, a, new TQ(!1), { jS: !0 });
        var b = this;
        this.Re = !0;
        this.lH = this.am = !1;
        Q(this.element, { position: "relative", backgroundColor: "#000000", overflow: "hidden" });
        this.N.element.style.position = "relative";
        this.Ef.style.position = "absolute";
        this.Ef.style.width = "88px";
        this.Ef.style.height = "26px";
        this.Ef.style.top = "6px";
        this.Ef.style.right = "6px";
        this.Ef.style.visibility = "hidden";
        mb() && (this.Ef.style.opacity = "0.5");
        this.Xc.sq.style.visibility = "hidden";
        this.gg = new s_(this);
        "IconVideoControls" === new Xd(["IconVideoControls", "TextVideoControls"], "vidctrls").lp ? (this.Ra = new lX(this, this.gg)) : (this.Ra = new o_(this, this.gg));
        M_(this);
        N_(this);
        this.Pr();
        this.N.element.appendChild(this.Ef);
        Fb(this, this.Xc);
        this.element.id = "TheaterModePlayer";
        Zd("VideoCTA") && ((this.Jg = new x_({ GG: this })), this.G(this.Jg));
        this.G(this.gg);
        this.G(this.Ra);
        this.Ra.show();
        this.Ra.element.dataset.paction = "VideoControl";
        this.element.onmousemove = function () {
            "split" === Y() && b.N.xb();
        };
        K_.g(function () {
            b.element.scrollIntoView(!1);
            window.scrollBy(0, 32);
        });
        v(nd(), this.element, function () {
            var c, d, e, f;
            pd()
                ? void 0 !== b.Jg && (b.removeChild(b.Jg), null === (d = null === (c = b.N.Up()) || void 0 === c ? void 0 : c.parentElement) || void 0 === d ? void 0 : d.appendChild(b.Jg.element))
                : void 0 !== b.Jg && (null === (f = null === (e = b.N.Up()) || void 0 === e ? void 0 : e.parentElement) || void 0 === f ? void 0 : f.removeChild(b.Jg.element), b.G(b.Jg));
        });
    }
    q(L_, MQ);
    function O_(a, b) {
        a.G(b);
        b.element.style.zIndex = "2";
    }
    function N_(a) {
        a.Ra.hk.g(function (b) {
            var c = b.Lj;
            QQ(a, b.Jq, null !== c && void 0 !== c ? c : !0);
        });
        a.Ra.br.g(function (b) {
            a.N.Tk(b);
        });
        a.Ra.Vy.g(function () {
            a.N.Es();
        });
        a.Ra.cG.g(function (b) {
            a.N.Nu(b.volume, b.va);
        });
        a.Ra.Wy.g(function (b) {
            a.N.element.insertBefore(b, a.N.element.firstChild);
        });
        a.Ra.Xy.g(function (b) {
            a.element.insertBefore(b, a.Ra.element);
        });
        a.Ra.Hz.g(function () {
            a.N instanceof zQ && (a.N.ue.style.visibility = "visible");
        });
        a.Ra.sm.g(function (b) {
            b ? a.gg.show() : a.gg.B();
        });
    }
    function M_(a) {
        a.gg.ko.g(function (b) {
            a.N.Mo(b);
        });
        a.gg.ME.g(function (b) {
            a.Ra.ko(b);
        });
        a.gg.IF.g(function (b) {
            a.Ra.PN(b);
        });
        a.gg.mN.g(function () {
            var b = a.gg,
                c = a.Ra.element.offsetHeight;
            b.element.style.left = a.N.element.offsetLeft + a.Ra.jK() + "px";
            b.element.style.bottom = c + "px";
        });
        a.gg.NE.g(function (b) {
            a.Ra.ON(b);
        });
    }
    k = L_.prototype;
    k.pB = function () {
        var a = this,
            b,
            c;
        MQ.prototype.pB.call(this);
        this.N.Nk.g(function (d) {
            d ? a.Ra.show() : a.Ra.B();
        });
        null === (b = this.N.aG) || void 0 === b
            ? void 0
            : b.g(function (d) {
                  var e = d.volume;
                  d.save ? a.Ra.GO(e) : a.Ra.qv(e);
              });
        null === (c = this.N.Ku) || void 0 === c
            ? void 0
            : c.g(function (d) {
                  var e = d.va;
                  d.save ? a.Ra.FO(e) : a.Ra.Sm(e);
              });
        this.N.Ed.g(function (d) {
            a.Ra.iM(d);
        });
        this.N.Zy.g(function (d) {
            var e = a.gg;
            e.vF.clear();
            Kb(e);
            for (var f = l(d), g = f.next(); !g.done; g = f.next()) (g = g.value), e.vF.set(g.label, g.value), 1 === d.length && (g.ap = !0), e.element.appendChild(u_(e, g)), g.ap && (e.ME.h(g.label), (e.rC = g.value));
            0 === d.length ? e.IF.h(!1) : e.IF.h(!0);
        });
    };
    k.nO = function () {
        this.N.element.style.position = "relative";
        var a = document.getElementById("VideoPanel");
        a instanceof HTMLElement && (a.style.height = "100%");
    };
    k.D = function () {
        function a() {
            if ("theater" === c) b.am && ((b.N.element.style.height = "100%"), (b.N.element.style.width = "100%"));
            else if ("videoonly" === c) {
                var d = document.documentElement.clientHeight,
                    e = document.documentElement.clientWidth;
                b.element.style.height = (b.Re ? d : 0.75 * e) + "px";
                b.element.style.width = (b.Re ? d / 0.5625 : e) + "px";
                b.N.element.style.height = "100%";
                b.N.element.style.width = "auto";
            } else (b.element.style.height = b.element.offsetWidth * (b.Re ? 0.5625 : 0.75) + "px"), (b.element.style.width = "100%"), (b.N.element.style.height = "100%"), (b.N.element.style.width = "100%");
            b.N.element.style.left = "0";
            b.Ef.style.visibility = xe.hG || b.am ? "hidden" : "";
        }
        var b = this,
            c = Y();
        switch (c) {
            case "split":
                a();
                this.am || this.N.xb();
                break;
            case "videoonly":
                a();
                this.N.xb();
                break;
            case "theater":
                a();
                pd() || this.N.xb();
                break;
            case "fullscreen":
                this.N.xb();
                break;
            case "noninteractive-fullscreen":
                break;
            default:
                r("Unexpected VideoMode: " + c, "theaterModePlayer.ts", "theatermodelib");
        }
    };
    function P_(a, b) {
        a.am = b;
        a.Ra.eM(a.am);
        b
            ? a.D()
            : window.setTimeout(function () {
                  a.D();
              }, 0);
    }
    k.TC = function (a) {
        MQ.prototype.TC.call(this, a);
        this.Ra.element.style.display = "block";
        a = this.Ra;
        a.Mj();
        a.show();
    };
    k.Pr = function () {
        MQ.prototype.Pr.call(this);
        this.Ra.hM(this.N.bA);
        this.N instanceof zQ ? (this.Ra.LE(!0), this.Ra.KE(this.N.Wn)) : (this.Ra.LE(!1), this.Ra.KE(!1));
    };
    k.ty = function (a) {
        this.Ra.ty(a);
    };
    k.eq = function () {
        return !1;
    };
    function Q_() {
        var a = document.createElement("div");
        a.className = "msg-list-wrapper-fvm";
        a.style.width = "100%";
        a.style.boxSizing = "border-box";
        a.style.overflow = "auto";
        return a;
    }
    function R_() {
        var a = document.createElement("div");
        a.style.width = "100%";
        a.className = "notice-list-fvm";
        Zu(a, "text");
        a.style.cursor = "text";
        return a;
    }
    function S_() {
        var a = document.createElement("div");
        a.className = "msg-list-fvm";
        a.style.width = "100%";
        a.style.overflowX = "hidden";
        Zu(a, "text");
        a.style.cursor = "text";
        return a;
    }
    function T_() {
        var a = document.createElement("form");
        a.style.display = "inline-block";
        a.style.boxSizing = "border-box";
        return a;
    }
    function U_() {
        var a = document.createElement("div");
        O(a, "chat-input-div");
        a.style.height = "27px";
        a.style.boxSizing = "border-box";
        a.style.position = "absolute";
        a.style.bottom = "0px";
        a.style.fontSize = "12px";
        return a;
    }
    function V_(a, b) {
        a = new eA(a, b);
        O(a.element, "chat-input-field");
        Q(a.element, { margin: "6px", height: "15px", fontFamily: "Helvetica, Arial, sans-serif", lineHeight: "15px" });
        a.element.classList.add("inputFieldChatPlaceholder");
        a.element.setAttribute("data-placeholder", di);
        Ab(["focus", "touchstart"], a.element, function () {
            return e_();
        });
        v("blur", a.element, f_);
        return a;
    }
    function W_(a, b) {
        b = void 0 === b ? !0 : b;
        w.call(this);
        var c = this;
        this.H = a;
        this.gG = b;
        this.element = document.createElement("span");
        this.element.innerText = dh;
        this.element.title = dh;
        this.element.style.fontSize = "12px";
        this.element.style.padding = "5px 8px 4px";
        this.element.style.margin = "2px";
        this.element.style.borderRadius = "4px";
        this.element.style.boxSizing = "border-box";
        this.element.style.display = "inline-block";
        this.element.style.cssFloat = "right";
        this.element.style.textOverflow = "ellipsis";
        this.element.style.whiteSpace = "nowrap";
        this.element.style.lineHeight = "14px";
        O(this.element, "send-button");
        O(this.element, "disabled");
        a = G.g(function (d) {
            c.element.style.right = !0 === d.A.tb ? "37px" : "0px";
        });
        void 0 !== this.H && this.H.add(a);
        !1 === this.gG && this.rl();
        lv.g(function (d) {
            d ? ((c.element.style.maxWidth = "50px"), (c.element.style.overflow = "hidden")) : ((c.element.style.maxWidth = "none"), (c.element.style.overflow = "auto"));
        });
    }
    q(W_, w);
    W_.prototype.rl = function () {
        P(this.element, "disabled");
        O(this.element, "send-button-gradient");
    };
    function X_(a) {
        Gr.h({});
        a.stopPropagation();
        a.preventDefault();
    }
    function Y_(a) {
        var b = document.createElement("span");
        O(b, "tip-button");
        b.title = eh;
        b.innerText = eh;
        b.style.fontSize = "12px";
        b.style.padding = "4px 7px 3px";
        b.style.margin = "2px";
        O(b, "tip-button-gradient");
        b.style.borderRadius = "4px";
        b.style.boxSizing = "border-box";
        b.style.cursor = "pointer";
        b.style.display = "inline-block";
        b.style.cssFloat = "right";
        b.style.textOverflow = "ellipsis";
        b.style.whiteSpace = "nowrap";
        b.style.lineHeight = "14px";
        v("mousedown", b, function (d) {
            d.stopPropagation();
        });
        v("click", b, X_);
        var c = G.g(function (d) {
            b.style.display = !0 === d.A.tb ? "inline-block" : "none";
        });
        void 0 !== a && a.add(c);
        c = lv.g(function (d) {
            d ? ((b.style.maxWidth = "50px"), (b.style.overflow = "hidden")) : ((b.style.maxWidth = "none"), (b.style.overflow = "auto"));
        });
        void 0 !== a && a.add(c);
        return b;
    }
    function Z_() {
        var a = document.createElement("span");
        a.style.position = "relative";
        a.style.cursor = "pointer";
        a.style.marginRight = "6px";
        a.style.display = "inline-block";
        a.style.height = "15px";
        wb() && (a.style.top = "3px");
        var b = document.createElement("img");
        b.src = "https://static-assets.highwebmedia.com/tsdefaultassets/mediaDock/uploadBackground-lighter.svg";
        b.style.verticalAlign = wb() ? "middle" : "text-bottom";
        b.style.height = "100%";
        a.appendChild(b);
        return a;
    }
    function $_() {
        var a = document.createElement("span");
        a.style.position = "relative";
        a.textContent = "\ud83d\ude01";
        a.style.cursor = "pointer";
        a.style.marginRight = "6px";
        a.style.fontSize = "18px";
        a.dataset.pactionName = "EmojiClick";
        wb() && (a.style.top = "6px");
        wb() || (twemoji.parse(a, { className: "emojiButton" }), (a.style.fontSize = "15px"), (a.style.verticalAlign = "text-bottom"));
        return a;
    }
    function a0(a, b) {
        var c;
        w.call(this);
        var d = this;
        this.qo = a;
        this.kF = b;
        this.Or = new y("addMessageHtml", { Ve: !1 });
        this.GF = new y("removeMessageHtml", { Ve: !1 });
        this.Tq = new y("scrolledToBottom");
        this.Ia = S_();
        this.Qt = R_();
        this.ab = Q_();
        this.ZJ = new y("formSubmitted");
        this.ji = 0;
        this.Ew = new Map();
        this.H = new Ub();
        this.wh = (this.Rb = void 0 !== this.kF) || iz();
        this.OG = function () {
            d.Ea();
        };
        this.element.id = "FVChatTabContents";
        this.element.style.fontSize = "12px";
        this.element.style.overflow = "";
        this.element.classList.add(this.Rb ? "FullvideoChatDivPm" : "FullvideoChatDivChat");
        O(this.element, "hasDarkBackground");
        this.ab.appendChild(this.Qt);
        this.ab.appendChild(this.Ia);
        this.Rb && ((this.du = new jY(!0, b)), this.element.appendChild(this.du.element));
        this.element.appendChild(this.ab);
        this.rB();
        this.H.add(
            OW.g(function (e) {
                d.Hg = QY(d, e);
                void 0 !== d.Hg && d.G(d.Hg);
            })
        );
        this.H.add(
            G.g(function (e) {
                d.element.style.fontSize = e.A.Da.fontSize;
                d.os = e.l.username();
                d.cl.style.display = !0 === e.A.tb ? "inline-block" : "none";
                d.Dm();
                d.wh = !1;
                d.wh || d.VF.rl();
            })
        );
        this.H.add(
            mv.g(function (e) {
                d.element.style.fontSize = e.fontSize;
                d.Dm();
            })
        );
        this.mg = new CX({ gb: this.Ta, At: 8, wu: 167 });
        this.ma.appendChild(this.mg.element);
        this.mg.Gd();
        this.Rb ||
            ((this.Qg = new RS({ gb: this.Ta, At: 8, wu: 167 })),
            this.ma.appendChild(this.Qg.element),
            this.Qg.Gd(),
            z(
                OS.g(function () {
                    lT(d.Ia, d.os);
                }),
                this.H
            ));
        this.mg.element.classList.add(this.Rb ? "fullvideoEmoticonAutocompleteModalPm" : "fullvideoEmoticonAutocompleteModalChat");
        a = null === (c = A.current.V) || void 0 === c ? void 0 : c.yc;
        void 0 !== a &&
            z(
                new Qt(a).Cg.g(function (e) {
                    e.zi && (d.VF.rl(), (d.wh = !1));
                }),
                this.H
            );
    }
    q(a0, w);
    k = a0.prototype;
    k.rB = function () {
        var a = this,
            b = T_();
        this.ma = U_();
        this.ma.dataset.paction = "TheaterChat";
        this.Ta = V_(
            function () {
                return a.WF();
            },
            this.Rb ? 4096 : 1024
        );
        this.Ta.element.classList.add(this.Rb ? "fullvideoInputFieldPm" : "fullvideoInputFieldChat");
        this.gj = $_();
        this.gj.classList.add(this.Rb ? "fullvideoEmojiButtonPm" : "fullvideoEmojiButtonChat");
        this.VF = new W_(this.H, this.wh);
        this.Zc = this.VF.element;
        this.Zc.classList.add(this.Rb ? "fullvideoSendButtonPm" : "fullvideoSendButtonChat");
        this.cl = Y_(this.H);
        b.appendChild(this.Ta.element);
        this.ma.appendChild(b);
        var c = document.createElement("span");
        c.style.position = "absolute";
        c.style.bottom = "6px";
        c.style.right = "85px";
        this.Rb &&
            uH &&
            ((this.Dk = Z_()),
            (this.Dk.dataset.paction = "TheaterChat"),
            (this.Dk.dataset.pactionName = "UploadPhoto"),
            (this.Dk.onclick = function () {
                var d;
                F("PMPhotoButtonClicked");
                Wu() || (void 0 !== a.Hg ? a.Hg.show() : (null === (d = a.zk) || void 0 === d ? void 0 : d.toggle(), a.Ea()));
            }),
            c.appendChild(this.Dk));
        c.appendChild(this.gj);
        this.ma.appendChild(c);
        this.ma.appendChild(this.cl);
        this.ma.appendChild(this.Zc);
        this.element.appendChild(this.ma);
        this.gj.onload = function () {
            a.R();
        };
        v("mousedown", this.ma, function (d) {
            if (d.target === a.ma || d.target === b) a.Ta.focus(), d.preventDefault();
        });
        v("submit", b, function (d) {
            d.preventDefault();
            a.Ta.submit();
        });
        v("click", this.Zc, function (d) {
            d.stopPropagation();
            a.Ta.submit();
        });
        v("click", this.gj, function (d) {
            d.stopPropagation();
            e_();
            Zy.h(a.gj);
        });
        v("scroll", this.ab, function () {
            var d = a.ab.scrollTop;
            a.Rb && 0 === d && a.Vd() && cz.h();
        });
    };
    k.Dm = function () {
        this.ab.style.lineHeight = Number(this.element.style.fontSize.slice(0, -2)) + 7 + "pt";
    };
    k.dispose = function () {
        var a, b, c, d;
        Vb(this.H);
        this.mg.dispose();
        null === (a = this.Qg) || void 0 === a ? void 0 : a.dispose();
        null === (b = this.zk) || void 0 === b ? void 0 : b.dispose();
        null === (c = this.Hg) || void 0 === c ? void 0 : c.dispose();
        this.Ta.dispose();
        null === (d = this.du) || void 0 === d ? void 0 : d.dispose();
    };
    k.WF = function () {
        var a = this,
            b,
            c,
            d;
        if (Zd("InCntntSUp"))
            return (
                kv.h({
                    GJ: "message",
                    wJ: this.ma,
                    jx: function () {
                        return oA(a.Ta);
                    },
                }),
                !1
            );
        if (Wu('You must be logged in to send a message. Click "OK" to login.') || this.wh || this.mg.isVisible() || !0 === (null === (b = this.Qg) || void 0 === b ? void 0 : b.isVisible())) return !1;
        b = oA(this.Ta);
        this.Ea();
        if ("" !== b.trim() || null === (d = null === (c = this.Vq) || void 0 === c ? void 0 : dH(c)) || void 0 === d || !d)
            switch (((c = RT(b)), c.messageType)) {
                case 2:
                    this.qo.Xt();
                    break;
                case 1:
                    this.qo.Wt(c.Gt);
                    break;
                default:
                    this.qo.St(b);
            }
        var e = b.match(/@[a-zA-Z0-9_]+/gm);
        c = SS();
        if (null !== e) {
            d = {};
            e = l(e);
            for (var f = e.next(); !f.done; d = { MA: d.MA }, f = e.next())
                (d.MA = f.value),
                    void 0 !==
                        aT(c).find(
                            (function (g) {
                                return function (h) {
                                    return h.username === g.MA.replace("@", "");
                                };
                            })(d)
                        ) && F("UserMentionMessage");
        }
        this.ZJ.h(b);
        return !0;
    };
    k.D = function () {
        var a,
            b,
            c = this.Vd();
        b0(this);
        this.ma.style.width = this.element.clientWidth + "px";
        var d = this.ma.clientWidth - 18 - 2 - Math.ceil(this.cl.offsetWidth + this.Zc.offsetWidth + this.gj.offsetWidth) - 4;
        this.Rb && uH && (d = d - 6 - (null !== (b = null === (a = this.Dk) || void 0 === a ? void 0 : a.offsetWidth) && void 0 !== b ? b : 0));
        d = Math.max(0, d);
        this.Ta.element.style.width = d + "px";
        c || this.Ea();
        this.mg.element.style.bottom = this.ma.offsetHeight + "px";
        void 0 !== this.Qg && (this.Qg.element.style.bottom = this.ma.offsetHeight + "px");
    };
    function b0(a) {
        var b,
            c,
            d,
            e,
            f,
            g,
            h = Math.max(0, a.element.clientHeight - 27);
        a.Rb &&
            (null !== (c = null === (b = a.zk) || void 0 === b ? void 0 : b.La()) && void 0 !== c && c
                ? ((b = null !== (e = null === (d = a.zk) || void 0 === d ? void 0 : d.element.getBoundingClientRect().height) && void 0 !== e ? e : 0),
                  (h -= b + 27 + 10),
                  null !== (g = null === (f = a.Vq) || void 0 === f ? void 0 : f.La()) && void 0 !== g && g && (h -= b),
                  (a.ma.style.bottom = 0 + b + "px"))
                : ((h -= 32), (a.ma.style.bottom = "0px")));
        a.ab.style.height = h + "px";
    }
    k.Vd = function () {
        return this.ab.scrollTop <= this.ab.scrollHeight - (this.ab.offsetHeight + 20);
    };
    k.Ea = function () {
        var a = this;
        this.Vd() && this.Tq.h();
        this.ab.scrollTop = this.ab.scrollHeight;
        this.ab.scrollLeft = 0;
        window.setTimeout(function () {
            a.Vd() && a.Ea();
        }, 0);
    };
    k.Wj = function (a) {
        this.Qt.appendChild(a);
    };
    k.za = function (a, b, c, d) {
        var e = this;
        c = void 0 === c ? !1 : c;
        d = void 0 === d ? !1 : d;
        var f = this.ab.scrollTop,
            g = this.Vd();
        g ||
            a.querySelectorAll("img").forEach(function (h) {
                var m = h.src;
                h.src = "";
                h.onload = e.OG;
                h.src = m;
            });
        c ? this.Ia.prepend(a) : jC(a, this.Ia);
        if (g) b0(this), (this.ab.scrollTop = f);
        else {
            for (c = this.Ia.childElementCount - 1e3; 0 < c; --c) (f = this.Ia.firstElementChild), null !== f && this.Ia.removeChild(f);
            b0(this);
            this.Ea();
        }
        void 0 !== b && this.Ew.set(a, b);
        this.Or.h({
            rE: function () {
                return void 0 !== b ? b() : a.cloneNode(!0);
            },
        });
        d && (this.ji += 1);
        return a;
    };
    k.lz = function (a) {
        this.Ew.delete(a);
        this.Ia.removeChild(a);
    };
    k.Us = function () {
        return this.ji;
    };
    k.ny = function (a) {
        return this.ji - a;
    };
    k.Lu = function (a) {
        this.vs = a;
    };
    function c0(a) {
        for (var b = {}, c = l(a.Ia.childNodes), d = c.next(); !d.done; b = { yv: b.yv }, d = c.next())
            (b.yv = d.value),
                a.Or.h({
                    rE: (function (e) {
                        return function () {
                            var f = a.Ew.get(e.yv);
                            return void 0 !== f ? f() : e.yv.cloneNode(!0);
                        };
                    })(b),
                    BT: !1,
                });
    }
    k.B = function () {
        this.Ia.style.opacity = "0";
    };
    k.show = function () {
        this.Ia.style.opacity = "1";
    };
    k.clear = function () {
        for (this.ji = 0; null !== this.Ia.firstChild; ) this.Ia.removeChild(this.Ia.firstChild);
        this.Ew.clear();
    };
    k.ff = function () {
        Gd(this.Ta.element) || K_.h();
        this.Ta.focus(!1, !1);
    };
    k.Yg = function () {
        this.Ta.blur();
    };
    k.FF = function (a) {
        this.GF.h(a);
    };
    k.Rf = function () {
        return document.activeElement === this.Ta.element;
    };
    k.en = function (a) {
        lA(this.Ta, a, !0);
    };
    var d0;
    G.g(function (a) {
        d0 = a.l.j();
    });
    var e0 = { "---": "---", underage: Jj, advertising: Kj, abusive: Lj, intoxicated: Mj, "large toy": Nj, "offline payments": Oj, "public broadcast": Pj, "service uniform": Qj, sleeping: Rj, gender: Sj, other: Tj };
    function f0() {
        w.call(this);
        var a = this;
        this.GB = new y("closeReportAbuseRequest");
        this.element.id = "AbuseReport";
        this.element.style.fontFamily = "UbuntuBold, Arial, Helvetica, sans-serif";
        this.element.style.fontSize = "11px";
        this.element.style.position = "relative";
        this.element.style.height = "";
        this.element.style.minHeight = "183px";
        var b = document.createElement("form"),
            c = document.createElement("div");
        O(c, "defaultColor");
        this.ln = document.createElement("label");
        this.ln.style.margin = "8px";
        this.ln.htmlFor = "abuse-category";
        this.ln.innerText = Hj;
        c.appendChild(this.ln);
        this.Mh = document.createElement("select");
        O(this.Mh, "abuseInput");
        this.Mh.id = "abuse-category";
        this.Mh.style.margin = "8px";
        this.Mh.style.boxSizing = "border-box";
        for (var d in e0) {
            var e = document.createElement("option");
            e.value = d;
            e.innerText = e0[d];
            this.Mh.appendChild(e);
        }
        c.appendChild(this.Mh);
        b.appendChild(c);
        c = document.createElement("div");
        c.style.paddingTop = "6px";
        d = document.createElement("label");
        d.style.margin = "8px";
        d.htmlFor = "abuse-comments";
        d.innerText = Uj;
        c.appendChild(d);
        this.ie = document.createElement("textarea");
        O(this.ie, "abuseInput");
        this.ie.id = "abuse-comments";
        this.ie.maxLength = 255;
        this.ie.style.width = "100%";
        this.ie.style.resize = "none";
        this.ie.style.margin = "8px";
        this.ie.style.padding = "4px";
        this.ie.style.borderWidth = "1px";
        this.ie.style.borderStyle = "solid";
        this.ie.style.borderRadius = "4px";
        this.ie.style.boxSizing = "border-box";
        this.ie.style.display = "block";
        c.appendChild(this.ie);
        b.appendChild(c);
        this.an = document.createElement("div");
        this.an.style.marginLeft = "8px";
        this.an.style.marginBottom = "8px";
        this.an.style.fontFamily = "Ubuntu, Arial, Helvetica, sans-serif";
        this.an.style.fontSize = "8px";
        c = document.createElement("span");
        c.textContent = jh + " ";
        d = document.createElement("a");
        O(d, "hrefColor");
        d.href = "/terms/#room-reports";
        d.style.fontSize = "8px";
        d.style.cursor = "pointer";
        d.textContent = "Terms";
        this.an.appendChild(c);
        this.an.appendChild(d);
        b.appendChild(this.an);
        this.hn = document.createElement("div");
        this.hn.style.cssFloat = "right";
        this.hn.style.fontFamily = "UbuntuMedium, Arial, Helvetica, sans-serif";
        this.hn.style.marginBottom = "8px";
        c = document.createElement("span");
        O(c, "submitSpan");
        c.innerText = ck;
        c.style.padding = "3px 6px 4px 5px";
        c.style.marginRight = "8px";
        c.style.borderRadius = "4px";
        c.style.boxSizing = "border-box";
        c.style.cursor = "pointer";
        c.style.display = "inline-block";
        d = document.createElement("span");
        O(d, "cancelSpan");
        d.innerText = Fj;
        d.style.padding = "3px 6px 4px 5px";
        d.style.marginRight = "8px";
        d.style.borderRadius = "4px";
        d.style.boxSizing = "border-box";
        d.style.cursor = "pointer";
        d.style.display = "inline-block";
        this.hn.appendChild(d);
        this.hn.appendChild(c);
        b.appendChild(this.hn);
        v("click", c, function (f) {
            f.preventDefault();
            "other" === a.Mh.value && "" === a.ie.value
                ? R("Please add a description of the abuse being reported.")
                : "---" === a.Mh.value
                ? R("Please choose a category.")
                : (a
                      .YF()
                      .then(function (g) {
                          g.success ? R("Your report has been submitted.") : void 0 !== g.AD && R(g.AD);
                      })
                      .catch(function (g) {
                          403 === g.xhr.status ? R(g.xhr.responseText) : R("Error sending report (" + g + ")");
                      }),
                  a.GB.h(void 0));
        });
        v("click", d, function () {
            a.GB.h(void 0);
        });
        this.element.appendChild(b);
    }
    q(f0, w);
    f0.prototype.D = function () {
        this.Mh.style.width = Math.max(0, this.element.clientWidth - 16 - (this.ln.offsetWidth + 2 * this.ln.offsetLeft)) + "px";
        this.ie.style.width = Math.max(0, this.element.clientWidth - 16) + "px";
        this.ie.style.height = Math.max(0, this.element.clientHeight - (this.hn.offsetHeight + 4 * this.ln.offsetHeight + 8 + 10)) + "px";
    };
    f0.prototype.YF = function () {
        var a = this;
        return new Promise(function (b, c) {
            return E("abuse/report/" + d0 + "/", { category: a.Mh.value, additional_comments: a.ie.value })
                .then(function (d) {
                    d = new H(d.responseText);
                    var e = { success: "success" === L(d, "result"), AD: K(d, "html") };
                    ad(d);
                    b(e);
                })
                .catch(function (d) {
                    c(d);
                });
        });
    };
    var g0 = "1" === Bc(window.location.search).signup_notice;
    function h0() {
        w.call(this);
        var a = this;
        this.element.style.backgroundColor = "#f7f6a8";
        this.element.style.fontSize = "12px";
        this.element.style.padding = "3px 10px";
        this.element.style.boxSizing = "border-box";
        this.element.style.display = "none";
        this.element.style.width = "auto";
        this.element.style.height = "auto";
        var b = document.createElement("a");
        b.innerText = Bg;
        b.onclick = function () {
            F("Subscribe");
        };
        this.element.appendChild(b);
        this.element.appendChild(document.createTextNode(" -- totally free, no email needed"));
        g0 &&
            G.g(function (c) {
                Cu() &&
                    (b.onclick = function (d) {
                        d.preventDefault();
                        d = "/accounts/register/?next=" + encodeURIComponent(window.location.pathname) + "?b=" + c.A.j;
                        uu(d);
                    });
                b.href = "/accounts/register/?next=" + encodeURIComponent(window.location.pathname) + "?b=" + c.A.j;
                a.element.style.display = c.l.Fd ? "block" : "none";
            });
    }
    q(h0, w);
    function i0(a, b) {
        var c = document.createElement("div");
        c.innerHTML = a;
        a = document.createElement("div");
        a.style.paddingTop = "5px";
        var d = document.createElement("span");
        d.innerText = b;
        d.style.color = "#0c6a93";
        d.style.padding = "5px";
        d.style.display = "inline";
        d.style.verticalAlign = "top";
        a.appendChild(d);
        b = document.createElement("div");
        b.style.padding = "0 10px";
        b.style.display = "inline-block";
        ZL(c, c, !0);
        0 !== c.children.length && (c.children[0].style.display = "unset");
        b.appendChild(c);
        a.appendChild(b);
        return a;
    }
    function j0(a, b) {
        function c(g) {
            var h = document.createElement("div");
            h.style.padding = "10px";
            h.style.position = "relative";
            h.style.display = "inline-block";
            h.style.height = "100px";
            h.title = g.name;
            h.onmouseenter = function () {
                h.style.cursor = "pointer";
                n.style.textDecoration = "underline";
            };
            h.onmouseleave = function () {
                h.style.cursor = "default";
                n.style.textDecoration = "none";
            };
            h.onclick = function () {
                var p = "resizable,dependent,scrollbars,height=520,width=803,top=" + (screen.height / 2 - 260).toString() + ",left=" + (screen.width / 2 - 401.5).toString(),
                    u = "/photo_videos/photoset/detail/" + b + "/" + g.id;
                YL(g, "BioTab");
                uu(u, void 0, p);
                return !1;
            };
            var m = document.createElement("img");
            m.src = g.ds;
            m.width = 150;
            m.height = 100;
            m.className = "userUpload";
            h.appendChild(m);
            g.sd ||
                ((m = document.createElement("img")),
                (m.src = "https://static-assets.highwebmedia.com/images/locked_rectangle4.png"),
                (m.width = 150),
                (m.height = 100),
                (m.style.top = "10px"),
                (m.style.left = "10px"),
                (m.style.position = "absolute"),
                (m.style.border = "none"),
                h.appendChild(m));
            g.Xb &&
                ((m = document.createElement("img")), (m.src = "https://static-assets.highwebmedia.com/images/play3.png"), (m.height = 20), (m.style.position = "absolute"), (m.style.top = "10px"), (m.style.left = "10px"), h.appendChild(m));
            "" !== g.Ya &&
                ((m = document.createElement("span")),
                (m.innerText = g.Ya),
                (m.style.backgroundColor = g.Tf),
                (m.style.position = "absolute"),
                (m.style.top = "92px"),
                (m.style.right = "15px"),
                (m.style.fontSize = "10px"),
                (m.style.padding = "2px"),
                h.appendChild(m));
            var n = document.createElement("div");
            n.innerText = g.name;
            n.style.fontSize = "12px";
            n.style.position = "absolute";
            n.style.top = "111px";
            n.style.left = "0px";
            n.style.paddingLeft = "13px";
            n.style.color = "#0c6a93";
            n.style.maxWidth = "145px";
            n.style.whiteSpace = "nowrap";
            n.style.textOverflow = "ellipsis";
            n.style.overflow = "hidden";
            h.appendChild(n);
            return h;
        }
        var d = document.createElement("div");
        d.style.position = "relative";
        d.style.paddingTop = "5px";
        d.style.paddingBottom = "25px";
        var e = document.createElement("span");
        e.innerText = Gg + ":";
        e.style.color = "#0c6a93";
        e.style.padding = "5px";
        d.appendChild(e);
        e = document.createElement("div");
        e.style.paddingLeft = "5px";
        a = l(a);
        for (var f = a.next(); !f.done; f = a.next()) e.appendChild(c(f.value));
        d.appendChild(e);
        return d;
    }
    function k0(a, b) {
        function c(g) {
            var h = document.createElement("div");
            h.style.padding = "10px";
            h.style.position = "relative";
            h.style.display = "inline-block";
            h.style.height = "100px";
            h.title = g.qA;
            h.onmouseenter = function () {
                h.style.cursor = "pointer";
                n.style.textDecoration = "underline";
            };
            h.onmouseleave = function () {
                h.style.cursor = "default";
                n.style.textDecoration = "none";
            };
            h.onclick = function () {
                uu("/socials/social_media/" + b + "/" + g.id, void 0, "resizable,dependent,scrollbars,height=520,width=803,top=" + (screen.height / 2 - 260).toString() + ",left=" + (screen.width / 2 - 401.5).toString());
                return !1;
            };
            var m = document.createElement("img");
            m.src = g.pk;
            m.width = 150;
            m.height = 100;
            m.className = "userUpload";
            h.appendChild(m);
            m = document.createElement("span");
            m.innerText = g.Ya;
            m.style.backgroundColor = g.Tf;
            m.style.position = "absolute";
            m.style.top = "92px";
            m.style.right = "15px";
            m.style.fontSize = "10px";
            m.style.padding = "2px";
            h.appendChild(m);
            var n = document.createElement("div");
            n.innerText = g.qA;
            n.style.fontSize = "12px";
            n.style.position = "absolute";
            n.style.top = "111px";
            n.style.left = "0px";
            n.style.paddingLeft = "13px";
            n.style.color = "#0c6a93";
            n.style.maxWidth = "145px";
            n.style.whiteSpace = "nowrap";
            n.style.textOverflow = "ellipsis";
            n.style.overflow = "hidden";
            h.appendChild(n);
            return h;
        }
        var d = document.createElement("div");
        d.style.position = "relative";
        d.style.paddingTop = "5px";
        d.style.paddingBottom = "25px";
        var e = document.createElement("span");
        e.innerText = ni + ":";
        e.style.color = "#0c6a93";
        e.style.padding = "5px";
        d.appendChild(e);
        e = document.createElement("div");
        e.style.paddingLeft = "5px";
        a = l(a);
        for (var f = a.next(); !f.done; f = a.next()) e.appendChild(c(f.value));
        d.appendChild(e);
        return d;
    }
    function l0(a) {
        function b(f, g) {
            var h = document.createElement("div"),
                m = document.createElement("div");
            m.style.position = "relative";
            m.style.paddingLeft = "5px";
            m.style.display = "inline";
            var n = document.createElement("span");
            n.style.color = "#0c6a93";
            n.innerText = f;
            m.appendChild(n);
            f = document.createElement("div");
            f.style.position = "absolute";
            f.style.paddingRight = "5px";
            f.style.display = "inline";
            f.style.left = "150px";
            f.style.overflow = "hidden";
            f.style.textOverflow = "ellipsis";
            f.style.whiteSpace = "nowrap";
            n = document.createElement("span");
            n.style.whiteSpace = "nowrap";
            n.innerText = g;
            f.appendChild(n);
            h.style.paddingTop = "5px";
            h.appendChild(m);
            h.appendChild(f);
            return h;
        }
        var c = document.createElement("div"),
            d = a.username.charAt(0).toUpperCase() + a.username.slice(1);
        if ("public" === a.sa) {
            var e = document.createElement("a");
            e.href = "./?" + a.username;
            e.text = "View " + d + "'s Cam";
            e.style.position = "relative";
            e.style.padding = "5px 5px 5px 0";
            e.style.textAlign = "right";
            e.style.display = "inline-block";
            e.style.width = "100%";
            e.style.fontSize = "14px";
            e.style.textDecoration = "none";
            e.onmouseenter = function () {
                e.style.textDecoration = "underline";
            };
            e.onmouseleave = function () {
                e.style.textDecoration = "none";
            };
            v("click", e, function (f) {
                f.preventDefault();
                Hr.h(a.username);
            });
            c.appendChild(e);
        }
        "" !== a.gz && c.appendChild(b(Hg + ":", a.gz));
        isNaN(a.SC) || c.appendChild(b(Ig + ":", a.SC.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")));
        "" !== a.wi && ("Couple" === a.wi ? c.appendChild(b(Kg + ":", "" + a.wi.charAt(0).toUpperCase() + a.wi.substring(1))) : c.appendChild(b(Jg + ":", "" + a.wi.charAt(0).toUpperCase() + a.wi.substring(1))));
        "" !== a.Kw && c.appendChild(b(Lg + ":", a.Kw));
        isNaN(a.Fb) || c.appendChild(b(Ng + ":", a.Fb.toString()));
        "" !== a.cw && c.appendChild(b(Og + ":", a.cw));
        "" !== a.aw && c.appendChild(b(Pg + ":", a.aw));
        "" !== a.Mx && ((d = JSON.parse(a.Mx).join(", ")), c.appendChild(b(Qg + ":", d)));
        "" !== a.location && c.appendChild(b(Rg + ":", a.location));
        void 0 !== a.yt && c.appendChild(b(Tg + ":", a.yt));
        "" !== a.languages && c.appendChild(b(Ug + ":", a.languages));
        "" !== a.Sz && c.appendChild(b(Vg + ":", a.Sz));
        return c;
    }
    function m0(a) {
        w.call(this);
        var b = this;
        this.element.style.color = "#000";
        this.Ad(XL(a));
        this.wN = function (c) {
            b.Ad(XL(c.A.j));
        };
        G.g(this.wN, !1);
    }
    q(m0, w);
    m0.prototype.Ad = function (a) {
        var b = this;
        void 0 !== this.content && this.element.removeChild(this.content.kb);
        var c = document.createElement("span");
        c.innerText = Zg + "...";
        this.element.appendChild(c);
        this.element.style.display = "block";
        a.then(function (d) {
            var e = document.createElement("div");
            e.style.fontSize = "14px";
            var f = l0(d.Kc);
            e.appendChild(f);
            if (0 < d.Tz.length) {
                var g = k0(d.Tz, d.Kc.username);
                e.appendChild(g);
            }
            if (0 < d.$t.length) {
                var h = j0(d.$t, d.Kc.username);
                e.appendChild(h);
            }
            if ("" !== d.Hv) {
                var m = i0(d.Hv, Cg + ":");
                e.appendChild(m);
            }
            if ("" !== d.LA) {
                var n = i0(d.LA, Dg + ":");
                e.appendChild(n);
            }
            b.content = { kb: e, Kc: f, MY: g, fY: h, aZ: m, fZ: n };
            b.content.kb.style.position = "relative";
            b.content.kb.style.paddingRight = "3px";
            b.content.kb.style.cursor = "default";
            b.content.kb.style.overflow = "scroll";
            b.content.kb.style.height = "100%";
            b.element.removeChild(c);
            b.element.appendChild(b.content.kb);
            b.R();
        }).catch(function (d) {
            r("Bio Content error: " + d, "bioContent.ts", "fullvideolib");
            d = document.createElement("div");
            d.style.position = "absolute";
            d.style.height = "100%";
            d.style.width = "100%";
            d.style.top = "0";
            d.style.left = "0";
            d.style.display = "block";
            var e = document.createElement("span");
            e.innerText = Xg;
            e.style.display = "block";
            e.style.padding = "10px";
            d.appendChild(e);
            b.content = { kb: d };
            b.element.removeChild(c);
            b.element.appendChild(b.content.kb);
        });
    };
    m0.prototype.D = function () {
        if (void 0 !== this.content && void 0 !== this.content.Kc)
            for (var a = l(this.content.Kc.childNodes), b = a.next(); !b.done; b = a.next()) (b = b.value.childNodes[1]), void 0 !== b && (b.style.maxWidth = this.element.offsetWidth - 150 - 5 + "px");
    };
    m0.prototype.Xg = function () {
        G.removeListener(this.wN);
    };
    function n0() {
        ND.call(this);
        var a = this;
        this.T = 0;
        this.element.id = "chat-box";
        this.element.style.overflow = "";
        this.C = new a0({
            Wt: function (b) {
                Gr.h(b);
            },
            Xt: function () {
                jQ(a.l);
            },
            St: function (b) {
                iO(a.l, b);
            },
        });
        this.G(this.C);
        this.dB = new bY({
            za: function (b, c) {
                return a.C.za(b, c);
            },
            lz: function (b) {
                a.C.lz(b);
            },
            Us: function () {
                return a.C.Us();
            },
            ny: function (b) {
                return a.C.ny(b);
            },
            bR: function () {
                return a.C.ab.scrollTop;
            },
            aR: function () {
                return a.C.element.offsetHeight;
            },
        });
        G.g(function (b) {
            a.l = b.l;
            a.C.za(rT(wn));
            a.C.za(rT(cq));
            iC(b.A.j, b.A.lb, b.A.op, "fullvideo")
                .then(function (c) {
                    a.C.za(c);
                })
                .catch(function () {});
        });
        Kc.g(function () {
            a.C.clear();
        });
    }
    q(n0, ND);
    k = n0.prototype;
    k.oc = function () {
        return this.T;
    };
    k.D = function () {
        ND.prototype.D.call(this);
    };
    k.Ea = function () {
        this.C.Ea();
    };
    k.jj = function () {
        return [document.createTextNode(99 < this.T ? ch + " (99+)" : 0 < this.T ? ch + " (" + this.T + ")" : ch)];
    };
    k.kk = function () {
        return "chat-tab-fvm";
    };
    k.ff = function () {
        this.C.ff();
    };
    k.Yg = function () {};
    k.Rf = function () {
        return this.C.Rf();
    };
    k.Ja = function () {
        ND.prototype.Ja.call(this);
        this.T = 0;
        this.Vc();
        this.C.Ea();
    };
    k.ox = function (a) {
        for (var b = [], c = l(this.C.Ia.childNodes), d = c.next(); !d.done; d = c.next()) (d = d.value), d.getAttribute("data-nick") === a && b.push(d);
        a = l(b);
        for (b = a.next(); !b.done; b = a.next()) this.C.Ia.removeChild(b.value);
    };
    k.en = function (a) {
        this.C.en(a);
    };
    k.Ol = function () {
        return this.C.Ta;
    };
    k.Lg = function (a) {
        ND.prototype.Lg.call(this, a);
        F("FocusTab", { location: "chat" });
    };
    function o0(a) {
        ND.call(this);
        var b = this;
        this.lE = a;
        this.T = 0;
        this.eu = new y("pmReceived");
        this.uc = new Map();
        this.Aa = new AI();
        this.Ju = function (c) {
            var d = b.uc.get(b.Aa.sb);
            A.current.Ro && c.bO ? d.C.za(JT(c.errorMessage, c.username)) : d.C.za(rT(c.errorMessage));
        };
        this.element.classList.add("data-hj-suppress");
        this.element.style.overflow = "";
        this.Eg = new YH({
            bm: !0,
            te: BE,
            Oj: function (c) {
                c !== b.T && ((b.T = c), b.Vc());
            },
        });
        this.G(this.Eg);
        $y.g(function (c) {
            b.jf();
            bZ(b);
            void 0 === b.uc.get(c.username) && b.tk(c.username, !1, c.Im);
            FI(b.Aa, c.username);
            b.Vc();
            c.focus && QD(b);
            b.Uk();
        });
        G.g(function (c) {
            b.l = c.l;
            b.AE = c.A.userName;
            b.j = c.A.j;
        });
        Kc.g(function () {
            b.jf();
            b.Aa = new AI();
            for (var c = l(b.uc.keys()), d = c.next(); !d.done; d = c.next()) b.ak(d.value, !0);
        });
        CE.g(function (c) {
            b.ak(c);
        });
        BE.g(function (c) {
            b.jf();
            FI(b.Aa, c);
            b.Uk();
        });
        hY.g(function (c) {
            b.Hm(c, !0);
        });
        iY.g(function () {
            b.l.kf(b.Aa.sb);
        });
        cz.g(function () {
            var c = b.uc.get(b.Aa.sb);
            !1 === c.Xl && b.nE(c);
        });
        mD.g(function (c) {
            b.Aa.Gf(c);
            b.tk(c, !1, !1);
        });
        zE.g(function (c) {
            var d = cZ(b);
            b.Wl() && LA(b) && void 0 !== d && d.isActive() && (b.ZA(d, c), c.bb !== d.username || d.C.Vd() || DE.h(d.username));
        });
    }
    q(o0, ND);
    k = o0.prototype;
    k.ZA = function (a, b) {
        var c = void 0 === c ? !1 : c;
        var d,
            e = (null === (d = A.current.V) || void 0 === d ? void 0 : d.username) === b.K.username;
        d = a.username === b.K.username;
        a.isActive() && !c && !e && d && F("PMReceivedOpen", { message_id: b.qe });
    };
    k.Hm = function (a, b) {
        b = void 0 === b ? !1 : b;
        a && (this.jf(), (a = this.l.j() === this.AE), b || 1 < this.Eg.sf.childNodes.length || a ? ((this.Eg.element.style.display = "block"), this.Eg.R()) : (FI(this.Aa, this.l.j()), this.Uk()));
    };
    k.Ea = function () {
        var a = cZ(this);
        void 0 !== a && a.C.Ea();
    };
    k.oc = function () {
        return this.T;
    };
    k.jj = function () {
        return [document.createTextNode(99 < this.T ? "PM (99+)" : 0 < this.T ? "PM (" + this.T + ")" : "PM")];
    };
    k.Lg = function () {
        F("FocusTab", { location: "PM", unread: this.oc() });
        this.Hm(!0);
        QD(this);
    };
    k.aE = function () {
        return !1;
    };
    k.kk = function () {
        return "pm-tab-fvm";
    };
    k.ff = function () {
        var a = cZ(this);
        void 0 === a ? r("session undefined", "pmTab.ts", "fullvideolib") : a.C.ff();
    };
    k.Yg = function () {};
    k.Rf = function () {
        var a = cZ(this);
        return void 0 === a ? (r("session undefined", "pmTab.ts", "fullvideolib"), !1) : a.C.Rf();
    };
    k.D = function () {
        ND.prototype.D.call(this);
        var a = cZ(this);
        void 0 !== a && a.C.Ea();
    };
    k.tk = function (a, b, c, d) {
        var e = this;
        d = void 0 === d ? !1 : d;
        var f,
            g,
            h = this.uc.get(a);
        if (void 0 === h) {
            Ob += 1;
            var m = new a0(
                {
                    Wt: function (n) {
                        Gr.h(n);
                    },
                    Xt: function () {
                        jQ(e.l);
                    },
                    St: function (n) {
                        e.Aa.Gf(a);
                        var p = { message: n, username: a, media: [], source: "roomviewPM", J: e.l.j() },
                            u = h.eo.ic;
                        dH(u)
                            ? wD(p).catch(function (x) {
                                  e.Ju(x);
                              })
                            : u.Qa().then(function (x) {
                                  p.media = x;
                                  wD(p).catch(function (D) {
                                      e.Ju(D);
                                  });
                                  u.clear();
                              });
                    },
                },
                a
            );
            h = {
                C: m,
                T: 0,
                Rt: 0,
                username: a,
                Bk: new kY(),
                fi: !1,
                Xl: !1,
                eo: new fH(m, a, ["theater", "fullvideo", "noninteractive-fullscreen"]),
                isActive: function () {
                    return "none" !== m.element.style.display;
                },
            };
            m.Tq.g(function () {
                void 0 !== h && e.WD(h) && DE.h(a);
            });
            this.uc.set(a, h);
            tH(h.C.element, a);
            h.C.zk = h.C.G(h.eo);
            h.C.Vq = h.C.G(h.eo.ic, h.C.ma);
            h.C.Wj(rT(Qe(a)));
            h.C.Wj(rT(we()));
            !b && c ? ((c = null !== (g = null === (f = A.current.V) || void 0 === f ? void 0 : f.tb) && void 0 !== g ? g : !1), h.C.Wj(sT(a, c))) : h.C.Wj(h.Bk.fK());
            h.C.element.style.display = "none";
            this.G(h.C);
        }
        !d &&
            b &&
            this.eu.h({
                username: a,
                QA: new dZ({
                    onClick: function () {
                        $y.h({ username: a, focus: !0, Im: !1 });
                    },
                }),
            });
        void 0 === this.Aa.sb && FI(this.Aa, a);
        return h;
    };
    k.nE = function (a) {
        if (!a.Bk.vb()) {
            a.Bk.ZN();
            var b = a.C.Ia.clientHeight,
                c = a.C.vs;
            void 0 !== c &&
                uD(a.username, this.l.j(), c)
                    .then(function (d) {
                        a.Bk.FK();
                        d = d.wa;
                        50 > d.length && (a.Xl = !0);
                        var e = d.length - 1;
                        d.reverse().map(function (f, g) {
                            a.C.za(jT(f), void 0, !0, !0);
                            g === e && a.C.Lu(f.qe);
                        });
                        a.C.ab.scrollTop = a.C.Ia.clientHeight - b;
                    })
                    .catch(function () {});
        }
    };
    k.za = function (a, b, c, d, e) {
        d = void 0 === d ? !1 : d;
        this.Aa.Gf(c);
        var f = this.tk(c, b !== this.l.username(), !1, d);
        d && !1 === f.fi && (f.fi = !0);
        this.l.username() === b || (SD(this) && this.Aa.sb === c) || ((f.T += 1), (f.Rt += 1), this.Vc());
        f.fi && (a = f.C.za(a, void 0, void 0, !0));
        void 0 !== e && f.C.Lu(e);
        return a;
    };
    k.fu = function (a) {
        if (SD(this)) {
            var b = cZ(this);
            void 0 !== b && b.C.za(a);
        }
    };
    k.Su = function (a) {
        this.jf();
        if (void 0 === ("next" === a ? BI(this.Aa) : CI(this.Aa))) return !1;
        this.Uk();
        return !0;
    };
    k.ak = function (a, b) {
        if (a !== this.j || (void 0 === b ? 0 : b))
            (b = this.uc.get(a)), void 0 !== b && (this.Aa.remove(a), b.C.dispose(), this.removeChild(b.C), this.uc.delete(a), SD(this) && (0 < this.uc.size ? this.Hm(!0, !0) : this.lE()), this.Vc(), --Ob, ZF(b.username, !1));
    };
    k.pn = function () {
        var a = cZ(this);
        void 0 === a ? r("cannot close current tab", "pmTab.ts", "fullvideolib") : this.ak(a.username);
    };
    k.Uk = function () {
        var a = this.Aa.sb;
        void 0 === a && ((a = this.l.j()), FI(this.Aa, a));
        var b = this.uc.get(a);
        void 0 === b && this.tk(a, !1, !1);
        b = this.uc.get(a);
        !this.Wl() || b.fi || this.l.Fd || ((b.fi = !0), sD(b.username, this.l.j()));
        bZ(this);
        b.C.element.style.display = "block";
        b.C.R();
        LA(this) && this.Wl() && (0 < b.T && ((b.T = 0), this.Vc()), DE.h(b.username), Lc.h(b.username));
    };
    k.jf = function () {
        var a = cZ(this);
        void 0 !== a && (a.C.element.style.display = "none");
    };
    k.Ol = function () {
        var a = cZ(this);
        if (void 0 !== a) return a.C.Ta;
    };
    k.Wl = function () {
        var a = Y();
        return "theater" === a || "fullvideo" === a || "fullscreen" === a;
    };
    k.WD = function (a) {
        return this.Wl() && LA(this) && cZ(this) === a && "none" === this.Eg.element.style.display;
    };
    function p0() {
        function a() {
            if (!b.Ou && (Dv(b.fd), void 0 !== b.parent)) {
                var f = b.parent;
                OD(f, f.children()[0]);
            }
        }
        ND.call(this);
        var b = this;
        this.fd = new wv();
        this.Ou = !1;
        this.element.id = "FVChatSettingsTab";
        this.element.style.fontSize = "12px";
        this.element.style.fontFamily = "Tahoma, Arial, Helvetica, sans-serif";
        Fb(this, this.fd);
        P(this.fd.Bt, "link");
        O(this.fd.Bt, "manage-ignored-link");
        this.ma = U_();
        this.ma.style.position = "absolute";
        var c = T_();
        this.pc = V_(function () {
            return !1;
        }, 4096);
        v("click", this.pc.element, a);
        v("focus", this.pc.element, a);
        this.Zc = new W_(void 0, !1).element;
        this.Zc.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        this.cl = Y_();
        this.cl.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        c.appendChild(this.pc.element);
        this.ma.appendChild(c);
        this.ma.appendChild(this.Zc);
        this.ma.appendChild(this.cl);
        this.element.appendChild(this.ma);
        var d = document.createElement("div");
        d.innerText = bh;
        d.style.position = "absolute";
        d.style.top = "10px";
        d.style.right = "10px";
        d.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        d.style.color = "#000000";
        d.style.backgroundColor = "#d8deea";
        d.style.border = "1px solid #acacac";
        d.style.borderRadius = "4px";
        d.style.padding = "8px 12px";
        d.style.opacity = "0";
        this.element.appendChild(d);
        Qv.ud.g(function () {
            "split" !== Y() && Fb(b, b.fd);
        });
        var e;
        this.fd.CB.g(function () {
            clearTimeout(e);
            Yu(d, "250ms");
            d.style.opacity = "1";
            e = window.setTimeout(function () {
                Yu(d, "1000ms");
                d.style.opacity = "0";
            }, 3e3);
        });
    }
    q(p0, ND);
    k = p0.prototype;
    k.jk = function () {
        return Object.assign(Object.assign({}, ND.prototype.jk.call(this)), { minWidth: "16px", backgroundRepeat: "no-repeat", backgroundPosition: "center", height: "12px" });
    };
    k.D = function () {
        if ("split" !== Y()) {
            this.ma.style.width = this.element.clientWidth + "px";
            var a = this.Zc.getBoundingClientRect();
            a = a.right - a.left;
            var b = this.cl.getBoundingClientRect();
            a = this.ma.clientWidth - 12 - 2 - Math.ceil(b.right - b.left + a) - 4;
            a = Math.max(0, a);
            this.pc.element.style.width = a + "px";
            this.fd.element.style.height = this.element.clientHeight - 27 + "px";
        }
    };
    k.jj = function () {
        return [Cr()];
    };
    k.kk = function () {
        return "settings-tab-fvm";
    };
    k.ff = function () {};
    k.Yg = function () {
        this.pc.blur();
    };
    k.Rf = function () {
        return document.activeElement === this.pc.element;
    };
    k.Ea = function () {};
    k.Ol = function () {
        return this.pc;
    };
    k.Lg = function (a) {
        ND.prototype.Lg.call(this, a);
        F("FocusTab", { location: "chatSettings" });
    };
    function q0() {
        KD.call(this);
        var a = this;
        this.lL = !1;
        this.Hk = new Ub();
        this.element.style.overflow = "";
        this.ja = this.Ff(new n0());
        this.hb = this.Ff(
            new o0(function () {
                OD(a, a.ja);
            })
        );
        this.No = this.Ff(new p0());
        this.ac.element.dataset.paction = "TheaterChat";
        this.No.la.element.dataset.pactionName = "Settings";
        OD(this, this.ja);
        this.ac.element.style.padding = "1px 2px 0 0";
        G.g(function (c) {
            OD(a, a.ja);
            c.l.event.Nq.g(function (d) {
                a.DE(d, c.l.username());
            });
            c.l.event.ya.g(function (d) {
                a.GE(d, c.l.username());
            });
            c.l.event.WM.g(function (d) {
                var e = jT(d);
                a.hb.za(e, d.K.username, d.bb);
            });
            c.l.event.mz.g(function (d) {
                a.ja.ox(d.username);
                a.ja.C.FF(d.username);
                a.hb.ak(d.username);
            });
            c.l.event.cB.g(function (d) {
                c.l.Qr && a.ja.C.za(rT("DEBUG: " + d));
            });
            c.l.event.zy.g(function (d) {
                a.Ys(d, c);
            });
            z(
                zE.g(function (d) {
                    a.Lt(d, c);
                }, !1),
                a.Hk
            );
            z(
                lD.g(function (d) {
                    a.Lt(d, c, !0);
                }, !1),
                a.Hk
            );
            z(
                fz.g(function (d) {
                    a.Be = d;
                }),
                a.Hk
            );
        });
        Kc.g(function () {
            Vb(a.Hk);
        });
        bz.g(function (c) {
            c ? a.ja.C.za(rT("Debug mode enabled. Type /debug again to disable.")) : a.ja.C.za(rT("Debug mode disabled."));
        });
        Mc.g(function (c) {
            a.ja.C.za(tT(c));
            c.Fa && a.hb.fu(tT(c));
        });
        az.g(function (c) {
            "split" !== Y() && (OD(a, a.ja), a.ja.en("@" + c + " "));
        });
        var b = new gY();
        this.hb.eu.g(function (c) {
            if (!b.ej.has(c.username)) {
                var d = Te(c.username),
                    e = c.QA.se,
                    f = kT(d);
                f.innerText = d;
                f.appendChild(e);
                f.setAttribute("data-purecolor", iT());
                f.classList.add("purecolor");
                f.classList.add("roomNotice");
                a.ja.C.za(f);
                b.ej.add(c.username);
            }
        });
    }
    q(q0, KD);
    k = q0.prototype;
    k.Lt = function (a, b, c) {
        c = void 0 === c ? !1 : c;
        if (c && a.gL) var d = a.qe;
        !0 === a.VD && ((a.message = this.Be.message), (a.K.username = this.Be.K), (a.bb = this.Be.Ec), void 0 !== this.Be.media && (a.Qa = this.Be.media));
        this.hb.za(jT(a), a.K.username, a.bb, c, d);
        uH && 0 < a.Qa.length && ((b = new HG({ Ek: a.qe, yq: a.K.username === b.A.userName, Qa: a.Qa })), this.hb.za(zT(b.element, a.K), a.K.username, a.bb));
    };
    k.Ys = function (a, b) {
        return Wy(this, function d() {
            var e = this,
                f,
                g,
                h,
                m,
                n;
            return Aa(d, function (p) {
                if (1 == p.aa) return (f = e), SA() || a.jr === b.A.userName ? (p = sa(p, SX({ OH: a.Wk, VI: a.jr, qL: !a.Yl, xN: b.A.j }), 3)) : ((p.aa = 0), (p = void 0)), p;
                g = p.td;
                h = function (u, x) {
                    return f.Ys(u, x);
                };
                m = function (u) {
                    f.mG(u);
                };
                n = fY(a, g, b, m, h);
                void 0 !== n && e.ja.C.za(n);
                p.aa = 0;
            });
        });
    };
    k.mG = function (a) {
        this.ja.C.za(rT(a));
    };
    k.DE = function (a, b) {
        $Y(this.ja);
        YS(SS(), a.K);
        a = jT(a, b);
        this.ja.C.za(a);
    };
    k.GE = function (a, b) {
        b = mT(a, b);
        this.ja.C.za(b);
        a.Fa && this.hb.fu(mT(a));
    };
    k.D = function () {
        this.window.style.height = this.element.clientHeight - this.ac.element.offsetHeight + "px";
    };
    k.me = function () {
        return KD.prototype.me.call(this);
    };
    k.children = function () {
        return KD.prototype.children.call(this);
    };
    k.sC = function (a) {
        var b = this,
            c =
                "next" === a
                    ? function () {
                          return b.hb.Su("next");
                      }
                    : function () {
                          return b.hb.Su("prev");
                      };
        a =
            "next" === a
                ? function () {
                      var d = b.hb;
                      d.jf();
                      DI(d.Aa);
                  }
                : function () {
                      var d = b.hb;
                      d.jf();
                      EI(d.Aa);
                  };
        Dv(this.No.fd);
        KD.prototype.me.call(this) === this.ja ? (OD(this, this.hb), a(), c()) : c() || OD(this, this.ja);
        this.R();
    };
    k.pn = function () {
        KD.prototype.me.call(this) === this.hb && this.hb.pn();
    };
    k.jk = function (a) {
        a = KD.prototype.jk.call(this, a);
        return Object.assign(Object.assign({}, a), { lineHeight: "12px" });
    };
    var r0 = new y("emojiAdded"),
        s0 = "\ud83c\udffb \ud83c\udffc \ud83c\udffd \ud83c\udffe \ud83c\udfff ".split(" "),
        t0 = new y("toneChange", { rc: 500 });
    function u0(a) {
        Xu.call(this);
        var b = this;
        this.bD = a;
        this.ZI = "";
        this.aN = new Ub();
        this.FN = new Ub();
        v0(this);
        this.fc.g(function () {
            b.B();
        });
        v("keydown", document, function (c) {
            (cA(c.which) || 27 === c.keyCode || 13 === c.keyCode) && b.B();
        });
        v("keydown", this.ye, function (c) {
            c.stopPropagation();
        });
        v("click", this.element, function (c) {
            c.stopPropagation();
            window.setTimeout(function () {
                "" !== b.ye.value && b.ye.focus();
            }, 0);
        });
        v("resize", window, function () {
            b.B();
        });
    }
    q(u0, Xu);
    u0.prototype.ia = function () {
        var a = this;
        Xu.prototype.ia.call(this);
        this.S.className = "emojiSelectionModalOverlay";
        var b = { position: "relative", padding: "8px 0px", height: "219px", boxSizing: "border-box", overflowY: "scroll" },
            c = new Sd(
                function () {
                    w0(a);
                },
                { zc: 200, Qc: 1 }
            );
        this.Ti = nr("", "", "", 1);
        O(this.Ti, "divot");
        this.Ti.style.bottom = "-37px";
        var d;
        this.element = V(
            "div",
            {
                style: {
                    position: "absolute",
                    visibility: "hidden",
                    width: "284px",
                    height: "261px",
                    borderWidth: "1px",
                    borderStyle: "solid",
                    borderRadius: "4px",
                    boxSizing: "border-box",
                    fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif",
                    fontSize: "12px",
                    zIndex: 1001,
                },
                colorClass: "emojiSelectionModal",
            },
            V(
                "div",
                { style: { position: "static", width: "calc(100% - 8px)", height: "28px", boxSizing: "border-box", margin: "4px", borderWidth: "1px", borderStyle: "solid", borderRadius: "4px" }, colorClass: "searchBar" },
                V("div", { style: { position: "relative", width: "15px", height: "15px", top: "50%", transform: "translateY(-50%)", cssFloat: "left", left: "7px" }, colorClass: "searchIcon" }),
                V(
                    "div",
                    { style: { marginLeft: "22px", height: "100%" } },
                    V("input", {
                        style: { position: "static", width: "calc(100% - 10px)", height: "calc(100% - 2px)", padding: "0px", borderWidth: "0px", marginLeft: "4px", outline: "none" },
                        ref: function (e) {
                            a.ye = e;
                        },
                        onInput: function () {
                            Td(c);
                        },
                    })
                )
            ),
            V(
                "div",
                {
                    style: b,
                    ref: function (e) {
                        a.FC = e;
                    },
                },
                V(
                    "a",
                    {
                        style: { position: "absolute", lineHeight: "14px", right: "22px", top: "9px", cursor: "pointer" },
                        ref: function (e) {
                            d = e;
                        },
                        onMouseEnter: function () {
                            Q(d, { textDecoration: "underline" });
                        },
                        onMouseLeave: function () {
                            Q(d, { textDecoration: "" });
                        },
                        colorClass: "uploadLink",
                        onClick: function () {
                            return x0(a);
                        },
                    },
                    Ph
                )
            ),
            V("div", {
                style: Object.assign({ display: "none" }, b),
                ref: function (e) {
                    a.ym = e;
                },
            }),
            !wb() && y0(this),
            !wb() && this.Ti
        );
    };
    function v0(a) {
        Xz();
        z0(a, Gh, "recent", function (b) {
            a.Fq = b;
        });
        z0(a, Hh, "smileys-people");
        z0(a, Ih, "animals-nature");
        z0(a, Jh, "food-drink");
        z0(a, Kh, "activities");
        z0(a, Lh, "travel-places");
        z0(a, Mh, "objects");
        z0(a, Nh, "symbols");
        z0(a, Oh, "flags");
    }
    function z0(a, b, c, d) {
        d = void 0 === d ? function () {} : d;
        var e;
        b = V(
            "div",
            null,
            V("div", { style: { lineHeight: "16px" }, colorClass: "sectionTitle" }, b),
            V("div", {
                ref: function (f) {
                    e = f;
                    d(f);
                },
            })
        );
        a.FC.appendChild(b);
        Yz(c)
            .then(function (f) {
                A0(a, e, f);
            })
            .catch(function () {});
    }
    function A0(a, b, c, d) {
        var e = {};
        c = l(c);
        for (var f = c.next(); !f.done; e = { Xm: e.Xm, Ir: e.Ir }, f = c.next()) {
            e.Xm = f.value;
            f = { position: "relative", display: "inline-block", width: "29px", height: "32px", cursor: "pointer", borderRadius: "2px", fontSize: "22px" };
            var g = { position: "relative", display: "inline-block", width: "28px", height: "28px", cursor: "pointer", borderRadius: "2px", fontSize: "22px", textAlign: "center", lineHeight: "28px", paddingLeft: "1px" };
            e.Ir = V("div", {
                style: wb() ? g : f,
                colorClass: "emojiDiv",
                onClick: (function (h) {
                    return function () {
                        var m = h.Xm,
                            n = b === a.Fq,
                            p = B0(m, a.ZI),
                            u = a.bD();
                        void 0 !== u && (wb() ? lA(u, m.value) : lA(u, p), r0.h(void 0), F("emojiAdded", { name: m.name, value: m.value }), (m = Vz(m)), n ? (a.yF = m) : C0(a, m));
                    };
                })(e),
            });
            D0(e.Ir, e.Xm.value);
            B0(e.Xm, "\ud83c\udffd") !== e.Xm.value &&
                ((f = t0.g(
                    (function (h) {
                        return function (m) {
                            D0(h.Ir, B0(h.Xm, m));
                        };
                    })(e)
                )),
                null === d || void 0 === d ? void 0 : d.add(f));
            b.appendChild(e.Ir);
        }
    }
    function C0(a, b) {
        if (null !== a.Fq.parentNode) {
            var c = a.Fq.cloneNode(!1);
            Vb(a.aN);
            A0(a, c, b, a.aN);
            a.Fq.parentNode.replaceChild(c, a.Fq);
            a.Fq = c;
        }
    }
    function y0(a) {
        var b = { height: "24px", width: "24px", fontSize: "24px", position: "relative", top: "50%", transform: "translateY(-50%)", cssFloat: "left", marginRight: "8px", cursor: "pointer" };
        window.setTimeout(function () {
            t0.g(function (h) {
                a.ZI = h;
                a.aJ.textContent = "\ud83d\udc4b" + h;
                twemoji.parse(a.aJ, { className: "emojiToneChoice" });
            });
            t0.h(E0());
        }, 0);
        for (
            var c = V(
                    "div",
                    { style: { position: "relative", left: "-1px", borderWidth: "1px", borderStyle: "solid", borderRadius: "0px 0px 3px 3px", width: "100%", height: "40px" }, colorClass: "toneSelect" },
                    V(
                        "div",
                        { style: { position: "relative", cssFloat: "right", height: "100%", right: "17px" } },
                        V("div", { style: { position: "relative", top: "50%", transform: "translateY(-50%)", cssFloat: "left", marginRight: "8px" }, colorClass: "sectionTitle" }, Qh + ": "),
                        V(
                            "div",
                            {
                                style: { position: "relative", width: "32px", height: "32px", top: "50%", transform: "translateY(-50%)", borderRadius: "2px", cssFloat: "left", cursor: "pointer" },
                                colorClass: "currentToneContainer",
                                ref: function (h) {
                                    a.$I = h;
                                },
                                onClick: function () {
                                    a.$I.style.display = "none";
                                    a.QG.style.display = "inline-block";
                                },
                            },
                            V("div", {
                                style: { height: "24px", width: "24px", fontSize: "24px", position: "relative", top: "50%", left: "50%", transform: "translate(-50%, -50%)" },
                                ref: function (h) {
                                    a.aJ = h;
                                },
                            })
                        ),
                        V("div", {
                            style: { fontSize: "24px", display: "none", height: "100%" },
                            ref: function (h) {
                                a.QG = h;
                            },
                        })
                    )
                ),
                d = {},
                e = l(s0.entries()),
                f = e.next();
            !f.done;
            d = { Fv: d.Fv }, f = e.next()
        ) {
            f = l(f.value);
            var g = f.next().value;
            d.Fv = f.next().value;
            f = g === s0.length - 1 ? Object.assign(b, { marginRight: "4px" }) : b;
            f = V(
                "div",
                {
                    style: f,
                    onClick: (function (h) {
                        return function () {
                            var m = h.Fv;
                            window.localStorage.setItem("emojiTone", m);
                            t0.h(m);
                            F0(a);
                        };
                    })(d),
                },
                "\ud83d\udc4b" + d.Fv
            );
            twemoji.parse(f, { className: "emojiToneChoice" });
            a.QG.appendChild(f);
        }
        return c;
    }
    function F0(a) {
        wb() || ((a.$I.style.display = "inline-block"), (a.QG.style.display = "none"));
    }
    function E0() {
        var a,
            b = null !== (a = window.localStorage.getItem("emojiTone")) && void 0 !== a ? a : "";
        return -1 === s0.indexOf(b) ? (r("Bad emojiTone value", "emojiSelectionModal.tsx", "theatermodelib", b), "") : b;
    }
    function B0(a, b) {
        var c = Tz(a.value)[0],
            d = a.value.split(c);
        1 < d.length && d[1][0] === twemoji.convert.fromCodePoint("fe0f") && (d[1] = d[1].slice(1, d[1].length));
        b = d.join(c + b);
        return Uz(twemoji.parse(b)) ? b : a.value;
    }
    function w0(a) {
        var b = a.ye.value;
        1 >= b.length
            ? (Q(a.FC, { display: "block" }), Q(a.ym, { display: "none" }))
            : (Q(a.FC, { display: "none" }),
              Q(a.ym, { display: "block" }),
              $z(b)
                  .then(function (c) {
                      if (null !== a.ym.parentNode) {
                          var d = a.ym.cloneNode(!1);
                          a.ym.parentNode.replaceChild(d, a.ym);
                          a.ym = d;
                      }
                      Vb(a.FN);
                      A0(a, a.ym, c, a.FN);
                  })
                  .catch(function () {}));
    }
    function D0(a, b) {
        if (wb()) a.innerText = b;
        else {
            var c = twemoji.parse(b),
                d = c.match(/<img/g);
            if (null !== d && 1 < d.length && ((c = new RegExp(twemoji.convert.fromCodePoint("fe0f"), "g")), (b = b.replace(c, "")), (c = twemoji.parse(b)), (d = c.match(/<img/g)), null !== d && 1 < d.length)) return;
            b = c.match(new RegExp('src="' + twemoji.base + '72x72/(.*?).png"'));
            if (null !== b) {
                b = b[1];
                c = V("span", { style: { position: "relative", display: "block", top: "50%", left: "50%" } });
                c.classList.add("sprite-twemoji-" + b);
                for (c.classList.add("sprite-twemoji"); null !== a.firstChild; ) a.removeChild(a.firstChild);
                a.appendChild(c);
            }
        }
    }
    function x0(a) {
        window.use_uploaded_emoticon = function (b) {
            var c = a.bD();
            if (void 0 !== c) {
                var d = oA(c);
                "" === d || /\s/.test(d[d.length - 1]) ? lA(c, b, !0) : lA(c, " " + b, !0);
            }
        };
        uu("/emoticons/", "_blank", "height=615, width=850");
        a.B();
        return !1;
    }
    u0.prototype.show = function (a) {
        var b = md();
        pd() && void 0 !== b ? (b.appendChild(this.S), b.appendChild(this.element)) : (document.body.appendChild(this.S), document.body.appendChild(this.element));
        this.tf(a);
        this.xh();
        this.element.style.visibility = "";
        F("emojiSelectorOpened");
    };
    u0.prototype.B = function () {
        if ("hidden" !== this.element.style.visibility) {
            null !== this.element.parentElement && this.element.parentElement.removeChild(this.element);
            null !== this.S.parentElement && this.S.parentElement.removeChild(this.S);
            this.Lb();
            F0(this);
            this.element.style.visibility = "hidden";
            this.ye.value = "";
            w0(this);
            var a = this.bD();
            void 0 !== a && a.focus(!0);
            void 0 !== this.yF && (C0(this, this.yF), (this.yF = void 0));
        }
    };
    u0.prototype.tf = function (a) {
        a = a.getBoundingClientRect();
        var b = window.pageXOffset,
            c = window.pageYOffset;
        pd() && (c = b = 0);
        var d = a.left + b - this.element.offsetWidth + 35,
            e = this.element.offsetWidth - 37;
        0 > d && ((d = a.left + b - 25), (e = 23));
        this.element.style.top = a.top + c - this.element.offsetHeight - 45 + "px";
        wb() && (this.element.style.top = a.top + c - this.element.offsetHeight - 8 + "px");
        this.element.style.left = d + "px";
        this.Ti.style.left = e + "px";
    };
    function G0(a) {
        var b = new q0();
        Oy.call(this, a, b, {
            Ih: "Chat",
            minWidth: 150,
            minHeight: 100,
            Uh: 400,
            Th: 250,
            dj: [1, Zd("InCntntSUp") ? 2 : 3],
            tm: !0,
            oM: function () {
                c.Xa.me().Ea();
            },
            mD: [b.ac.element],
        });
        var c = this;
        this.Fz = !1;
        O(this.element, "draggableCanvasChatWindow");
        O(this.element, "hasDarkBackground");
        P(this.Wa, "innerDiv");
        O(this.Wa, "chatInnerDiv");
        b.ja.C.ZJ.g(function () {
            c.blur();
        });
        v("blur", b.ja.C.Ta.element, function () {
            if (a.ft !== c || Tu()) (a.Ne = void 0), a.RC.h(void 0);
        });
        v("mouseleave", this.element, function () {
            a.ft = void 0;
            a.qH.h(void 0);
        });
        var d = !0;
        G.g(function (g) {
            d = g.l.Fd;
        });
        var e;
        Qv.ud.g(function (g) {
            e = g.Mf;
            void 0 !== c.fk && "split" === e && c.fk.B();
            void 0 !== c.Rn && "split" === e && c.Rn.B();
        });
        Zy.g(function (g) {
            d && !f
                ? jv.h(!0)
                : "split" !== e &&
                  (void 0 === c.fk &&
                      (c.fk = new u0(function () {
                          return c.Xa.me().Ol();
                      })),
                  c.fk.show(g));
        });
        var f = Zd("InCntntSUp");
        kv.g(function (g) {
            f && "split" !== e && (void 0 === c.Rn && (c.Rn = new jO()), c.Rn.show(g));
        });
        this.Xa = b;
    }
    q(G0, Oy);
    G0.prototype.D = function () {
        200 > this.element.offsetWidth && !this.Fz && ((this.Fz = !0), lv.h(!0));
        200 < this.element.offsetWidth && this.Fz && ((this.Fz = !1), lv.h(!1));
    };
    function H0(a) {
        w.call(this);
        var b = this;
        this.Dy = a;
        this.element.style.position = "static";
        this.element.style.overflow = "auto";
        this.element.style.padding = "4px 7px";
        this.element.style.boxSizing = "border-box";
        this.element.style.fontSize = "12px";
        this.element.style.minWidth = "230px";
        this.element.style.maxWidth = "230px";
        this.element.style.height = "auto";
        a = l(this.children());
        for (var c = a.next(); !c.done; c = a.next()) c.value.element.style.margin = "2px 0";
        G.g(function (d) {
            var e = d.A.ge;
            I0(b, e, d.l.status);
            d.l.event.Mc.g(function (f) {
                I0(b, e, f.Sa);
            });
            d.l.event.Fm.g(function (f) {
                e = f.ge;
                I0(b, e, d.l.status);
            });
        });
    }
    q(H0, w);
    function I0(a, b, c) {
        Jb(a);
        a: switch (c) {
            case "privatewatching":
            case "privatespying":
                var d = !0;
                break a;
            default:
                d = !1;
        }
        if (d) void 0 === a.gI && (a.gI = new J0()), a.G(a.gI);
        else {
            a: switch (c) {
                case "privaterequesting":
                    b = !0;
                    break a;
                case "privatespying":
                case "privatewatching":
                case "privatenotwatching":
                case "away":
                    b = !1;
            }
            b && (void 0 === a.lu && (a.lu = new K0(a.Dy)), a.G(a.lu));
        }
        a.Dy();
    }
    function L0() {
        w.call(this);
        this.element.style.display = "inline-block";
        this.element.style.height = "auto";
        this.element.style.position = "relative";
        this.element.style.padding = "5px 5px";
        this.element.style.borderWidth = "1px";
        this.element.style.borderStyle = "solid";
        this.element.style.boxSizing = "border-box";
        this.element.style.borderRadius = "3px";
        this.element.style.font = "UbuntuRegular, Arial, Helvetica, sans-serif";
        this.element.style.fontSize = "12px";
        this.element.style.lineHeight = "14px";
        this.element.style.textAlign = "center";
    }
    q(L0, w);
    function M0() {
        var a = document.createElement("div");
        O(a, "showsHeader");
        a.innerText = qk;
        a.style.width = "100%";
        a.style.margin = "5px 0";
        a.style.fontSize = "14px";
        a.style.fontFamily = "UbuntuMedium, Arial, Helvetica, sans-serif";
        a.style.fontWeight = "500";
        a.style.letterSpacing = "-0.05em";
        return a;
    }
    function N0() {
        var a = document.createElement("div");
        O(a, "showsButton");
        a.style.display = "inline-block";
        a.innerText = ok;
        a.style.borderWidth = "1px";
        a.style.borderStyle = "solid";
        a.style.boxSizing = "border-box";
        a.style.borderRadius = "4px";
        a.style.fontWeight = "bold";
        a.style.padding = "6px 10px";
        a.style.margin = "5px 0";
        a.style.cursor = "pointer";
        a.style.textDecoration = "none";
        return a;
    }
    function K0(a) {
        L0.call(this);
        var b = this;
        this.Dy = a;
        this.qa = M0();
        this.button = N0();
        this.pi = this.Xd = 0;
        this.Pi = !1;
        O(this.element, "startShowComponent");
        this.element.appendChild(this.qa);
        this.Aq = document.createElement("div");
        this.Aq.style.margin = "5px 0";
        this.Aq.style.lineHeight = "16px";
        this.Aq.style.letterSpacing = "-0.05em";
        this.tA = document.createElement("div");
        O(this.tA, "tokensRequirement");
        this.tA.style.fontFamily = "UbuntuMedium, Arial, Helvetica, sans-serif";
        this.Aq.appendChild(this.tA);
        this.oy = document.createElement("div");
        O(this.oy, "minutesRequirement");
        this.Aq.appendChild(this.oy);
        this.element.appendChild(this.Aq);
        this.element.appendChild(this.button);
        this.zo = document.createElement("div");
        O(this.zo, "showsFooter");
        this.zo.innerText = lk;
        this.zo.style.fontSize = "9px";
        this.zo.style.lineHeight = "125%";
        this.zo.style.margin = "5px 0";
        this.element.appendChild(this.zo);
        G.g(function (c) {
            c.l.event.Mc.g(function (d) {
                "privaterequesting" === d.Sa
                    ? ((b.button.innerText = nk),
                      (b.button.onclick = function () {
                          PB(c.l);
                      }))
                    : ((b.button.innerText = ok),
                      (b.button.onclick = function () {
                          LB(c.l);
                      }),
                      b.update());
            });
            c.l.event.Fm.g(function (d) {
                O0(b, d.Pi, d.Xd, d.pi);
                switch (c.l.status) {
                    case "privaterequesting":
                        break;
                    default:
                        b.update();
                }
            });
            O0(b, c.A.Pi, c.A.Xd, c.A.pi);
            b.update();
        });
    }
    q(K0, L0);
    function O0(a, b, c, d) {
        a.Pi = b;
        a.Xd = c;
        a.pi = d;
    }
    K0.prototype.update = function () {
        var a = this.tA;
        var b = this.Xd;
        b = T(S("%(price)s tokens per minute"), { price: b }, !0);
        a.innerText = b;
        a = this.oy;
        b = this.pi;
        b = T(S("(minimum %(minMinutes)s minutes)"), { minMinutes: b }, !0);
        a.innerText = b;
        this.oy.style.display = 0 === this.pi ? "none" : "block";
        this.zo.style.display = this.Pi ? "block" : "none";
        this.Dy();
    };
    function J0() {
        L0.call(this);
        var a = this;
        this.bp = document.createElement("div");
        O(this.element, "cancelShowComponent");
        this.element.style.minWidth = "200px";
        this.element.style.padding = "";
        this.element.style.borderStyle = "none";
        this.bp.style.display = "block";
        this.bp.style.fontSize = "16px";
        this.bp.style.lineHeight = "18px";
        this.bp.style.margin = "5px 0";
        O(this.bp, "tokenTextArea");
        this.element.appendChild(this.bp);
        var b = document.createElement("div");
        O(b, "cancelShowButton");
        O(b, "cancelShowButtonGradient");
        b.style.display = "inline-block";
        b.style.boxSizing = "border-box";
        b.style.borderRadius = "4px";
        b.style.padding = "6px 10px";
        b.style.margin = "5px 0";
        b.style.cursor = "pointer";
        b.style.textDecoration = "none";
        this.element.appendChild(b);
        G.g(function (c) {
            P0(a, c.A.ob);
            c.l.event.sr.g(function (d) {
                d.K.username === c.l.username() && P0(a, a.sP - d.amount);
            });
            c.l.event.Mc.g(function (d) {
                function e() {
                    PB(c.l);
                }
                switch (d.Sa) {
                    case "privatewatching":
                        b.innerText = mk;
                        b.onclick = e;
                        break;
                    case "privatespying":
                        b.innerText = pk;
                        b.onclick = e;
                        break;
                    default:
                        b.onclick = function () {};
                }
            });
        });
        WA.g(function (c) {
            P0(a, c.Ua);
        });
    }
    q(J0, L0);
    function P0(a, b) {
        a.sP = b;
        a.bp.innerText = b + " " + ge(b, !1);
    }
    var Q0;
    G.g(function (a) {
        Q0 = a.A.j;
    });
    function R0(a, b, c, d) {
        w.call(this);
        var e = this;
        this.J = a;
        this.element.style.position = "relative";
        this.element.style.padding = "4px";
        this.Go = document.createElement("a");
        this.Go.href = "/" + a + "/";
        this.element.appendChild(this.Go);
        v("click", this.Go, function (g) {
            F("LoadRoomFromRoomList", { location: c + "_draggable", from_broadcaster: Q0, broadcaster: e.J });
            g.metaKey || g.ctrlKey || (Hr.h(e.J), g.preventDefault());
        });
        Ab(["click", "mousedown", "touchstart"], this.Go, function () {
            nx(e.J, "mr", b, { Xk: d });
        });
        this.Wc = document.createElement("img");
        this.Wc.style.height = "100%";
        this.Wc.style.width = "100%";
        this.Wc.style.cursor = "pointer";
        this.Wc.className = "moreRooms";
        this.Wc.id = "roomImage" + b;
        this.Go.appendChild(this.Wc);
        this.Tb = document.createElement("div");
        this.Tb.innerText = a;
        Q(this.Tb, { position: "absolute", bottom: "7px", color: "#ffffff", fontSize: "19px", textShadow: "1px 1px 1px #000, -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000" });
        this.Tb.classList.add("roomTitle" + b);
        this.Go.appendChild(this.Tb);
        var f = uY(d);
        if ("unknown" !== f) {
            a = document.createElement("div");
            a.className = "thumbnail_label_recommender";
            a: switch (f) {
                case "recommended":
                    f = zk;
                    break a;
                case "recommended_popular":
                    f = Ak;
            }
            a.innerText = f;
            Q(a, { position: "absolute", top: "12px", color: "#ffffff", fontSize: "11px", right: "12px" });
            this.Go.appendChild(a);
        }
        this.Db = new hr(this.J, this.Wc);
        this.element.onmouseenter = function () {
            e.Db.To();
        };
        this.element.onmouseleave = function () {
            kr(e.Db, !1);
        };
    }
    q(R0, w);
    R0.prototype.D = function () {
        void 0 !== this.parent ? (this.Tb.style.left = this.parent.element.offsetWidth / 2 - this.Tb.offsetWidth / 2 + "px") : r("Room does not have a parent", "room.ts", "fullvideolib");
    };
    R0.prototype.Xg = function () {
        kr(this.Db, !1);
        w.prototype.Xg.call(this);
    };
    R0.prototype.SF = function () {
        this.Db.SF();
    };
    function S0(a) {
        w.call(this);
        var b = this;
        this.bK = [];
        this.gx = [];
        this.Uv = !0;
        this.oE = !1;
        this.pE = "genders";
        this.Aj = [];
        this.Mq = new EY();
        this.hq = !1;
        this.source = a;
        this.element.style.fontSize = "12px";
        this.element.style.overflowY = "scroll";
        v("scroll", this.element, function () {
            T0(b);
        });
        Qa() && ((a = window.localStorage.getItem(this.pE)), null !== a && ((this.Aj = JSON.parse(a)), void 0 === A.current.V && ((a = this.Aj.indexOf(dx("followed"))), 0 <= a && this.Aj.splice(a, 1))));
        this.Zh = document.createElement("div");
        this.Zh.style.margin = "2px 2px 0 2px";
        this.Zh.style.whiteSpace = "nowrap";
        this.Zh.style.textAlign = "center";
        this.element.appendChild(this.Zh);
        U0(this, "Female", th);
        U0(this, "Male", wh);
        U0(this, "Couple", Bh);
        U0(this, "Trans", zh);
        this.xg = document.createElement("div");
        O(this.xg, "defaultTooltipColor");
        this.xg.innerText = Zg + "...";
        this.xg.style.margin = "4px";
        V0(this);
        var c = document.createElement("p");
        O(c, "defaultTooltipColor");
        c.style.cursor = "pointer";
        c.style.padding = "0";
        c.style.margin = "4px 0";
        c.onclick = function () {
            V0(b);
        };
        v("mouseenter", c, function () {
            c.style.textDecoration = "underline";
        });
        v("mouseleave", c, function () {
            c.style.textDecoration = "";
        });
        c.innerText = sh;
        c.style.textAlign = "left";
        this.Zh.appendChild(c);
        this.zR = window.setInterval(function () {
            for (var d = l(b.children()), e = d.next(); !e.done; e = d.next()) jr(e.value.Db, 0);
        }, 3e4);
    }
    q(S0, w);
    S0.prototype.close = function () {
        clearInterval(this.zR);
        this.Mq.dispose();
    };
    S0.prototype.children = function () {
        return w.prototype.children.call(this);
    };
    function U0(a, b, c) {
        var d = -1 < a.Aj.indexOf(dx(b.toLowerCase())),
            e = new qv(12, d);
        e.Lo(function () {
            W0(a);
        });
        e.Va.name = b.toLowerCase();
        e.Dz(b);
        0 < a.gx.length && (e.element.style.marginLeft = "12px");
        e.element.style.top = "2px";
        a.Zh.appendChild(e.element);
        a.bK.push(e);
        d = document.createElement("img");
        d.src = "https://static-assets.highwebmedia.com/tsdefaultassets/icon" + b + ".png";
        d.style.position = "relative";
        d.style.top = "2px";
        d.style.cursor = "pointer";
        d.style.width = "16px";
        d.style.height = "16px";
        d.style.marginLeft = "3px";
        d.title = c;
        d.onclick = function () {
            e.$q(!e.Va.checked);
            W0(a);
        };
        a.Zh.appendChild(d);
        b = document.createElement("span");
        O(b, "defaultTooltipColor");
        b.innerText = c;
        b.style.position = "relative";
        b.style.top = "1px";
        b.style.marginLeft = "4px";
        b.style.cursor = "pointer";
        b.onclick = function () {
            e.$q(!e.Va.checked);
            W0(a);
        };
        a.Zh.appendChild(b);
        a.gx.push(b);
    }
    function W0(a) {
        a.Aj = [];
        for (var b = l(a.bK), c = b.next(); !c.done; c = b.next()) (c = c.value), c.Va.checked && a.Aj.push(dx(c.fh()));
        F("ChangeRoomListGender", { selectedGenders: a.Aj });
        Qa() && (0 === a.Aj.length ? window.localStorage.removeItem(a.pE) : window.localStorage.setItem(a.pE, JSON.stringify(a.Aj)));
        V0(a);
    }
    S0.prototype.D = function () {
        w.prototype.D.call(this);
        for (var a = this.element.clientWidth - 8, b = l(this.children()), c = b.next(); !c.done; c = b.next()) (c = c.value), (c.element.style.width = a + "px"), (c.element.style.height = 0.5625 * (this.element.clientWidth - 8) + "px");
        this.Zh.style.width = a + "px";
        if (!this.Uv && this.Zh.scrollWidth <= a) {
            c = l(this.gx);
            for (b = c.next(); !b.done; b = c.next()) b.value.style.display = "inline-block";
            this.Uv = !0;
        }
        if (this.Uv && this.Zh.scrollWidth > a) {
            a = l(this.gx);
            for (b = a.next(); !b.done; b = a.next()) b.value.style.display = "none";
            this.Uv = !1;
        }
        T0(this);
    };
    function V0(a) {
        Jb(a);
        a.oE = !0;
        a.element.appendChild(a.xg);
        X0(a);
        a.R();
    }
    function X0(a) {
        GY(a.Mq, a.Aj);
        a.Mq.next()
            .then(function (b) {
                Y0(a, b);
            })
            .catch(function (b) {
                a.hq = !1;
                r("getNewIterator: " + b, "roomList.ts", "fullvideolib");
            });
    }
    function Z0(a) {
        a.hq ||
            ((a.hq = !0),
            a.Mq.next()
                .then(function (b) {
                    Y0(a, b);
                })
                .catch(function (b) {
                    a.hq = !1;
                    r("loadMoreRooms: " + b, "roomList.ts", "fullvideolib");
                }));
    }
    function Y0(a, b) {
        if (0 < b.length) {
            for (var c = 0.5625 * (a.element.clientWidth - 8), d = a.element.scrollTop, e = [], f = l(a.children()), g = f.next(); !g.done; g = f.next())
                if (((g = g.value), g.element.offsetTop - d < -15 * c)) e.push(g);
                else break;
            c = l(e);
            for (g = c.next(); !g.done; g = c.next()) (e = g.value), (d -= e.element.offsetHeight), a.removeChild(e);
            a.element.scrollTop = d;
            a.oE && (a.element.removeChild(a.xg), (a.oE = !1));
            b = l(b);
            for (d = b.next(); !d.done; d = b.next()) (d = d.value), a.G(new R0(d.j, a.children().length + 1, a.source, d.Xk));
            a.R();
            a.hq = !1;
            T0(a);
        } else a.hq = !1;
    }
    function T0(a) {
        a.element.scrollTop + 2.8125 * (a.element.clientWidth - 8) >= a.element.scrollHeight - a.element.offsetHeight && Z0(a);
    }
    function $0(a) {
        w.call(this);
        var b = this;
        this.tr = a;
        this.cg = "public";
        this.ob = 0;
        this.ug = this.Ux = !1;
        this.Om = new y("tipSent");
        this.dM = new y("notifyAttemptSendTip");
        this.UN = new y("tipCalloutShouldReposition");
        this.vG = !1;
        this.element.id = "FVTipCallout";
        O(this.element, "defaultTooltipColor");
        this.element.style.minWidth = "368px";
        this.element.style.overflow = "visible";
        this.element.style.position = "static";
        a = document.createElement("div");
        a.style.display = "inline-block";
        var c = document.createElement("span");
        c.innerText = Rh;
        c.style.display = "inline-block";
        c.style.fontSize = "13px";
        c.style.fontWeight = "bold";
        c.style.padding = "6px";
        a.appendChild(c);
        this.De = document.createElement("span");
        O(this.De, "tokenBalance");
        this.De.innerText = $g + "...";
        this.De.style.display = "inline-block";
        this.De.style.fontSize = "13px";
        this.De.style.fontWeight = "bold";
        this.De.style.padding = "6px 6px 6px 0";
        a.appendChild(this.De);
        G.g(function (h) {
            b.J = h.l.j();
            h.l.event.Mc.g(function (m) {
                switch (m.Sa) {
                    case "privatewatching":
                        b.cg = "private";
                        break;
                    default:
                        b.cg = "public";
                }
            });
        });
        WA.g(function (h) {
            b.pv(h.Ua);
        });
        var d = document.createElement("a");
        O(d, "purchaseTokens");
        d.innerText = kg;
        d.href = "/tipping/purchase_tokens/?source=" + A.current.Ub.TOKEN_SOURCE_TIP_CALLOUT;
        d.style.display = "inline-block";
        d.style.position = "absolute";
        d.style.right = "0";
        d.style.fontSize = "13px";
        d.style.padding = "6px";
        d.onclick = function () {
            uB({ source: A.current.Ub.TOKEN_SOURCE_TIP_CALLOUT });
            return !1;
        };
        d.onmouseenter = function () {
            d.style.textDecoration = "underline";
        };
        d.onmouseleave = function () {
            d.style.textDecoration = "none";
        };
        a.appendChild(d);
        this.element.appendChild(a);
        this.LU = a;
        this.Cc = document.createElement("div");
        O(this.Cc, "warning");
        this.Cc.style.display = "none";
        this.Cc.style.fontSize = "13px";
        this.Cc.style.fontWeight = "bold";
        this.Cc.style.padding = "6px";
        this.Cc.style.textAlign = "center";
        this.Cc.style.position = "absolute";
        this.Cc.style.left = "50%";
        a = document.createElement("div");
        a.innerText = Th;
        this.Cc.appendChild(a);
        a = document.createElement("div");
        a.innerText = Uh;
        this.Cc.appendChild(a);
        this.element.appendChild(this.Cc);
        this.uh = document.createElement("form");
        c = document.createElement("label");
        a = document.createElement("span");
        a.innerText = Vh;
        a.style.display = "inline-block";
        a.style.fontSize = "13px";
        a.style.padding = "6px";
        c.appendChild(a);
        this.xa = sB();
        this.xa.value = "25";
        this.xa.min = "1";
        this.xa.style.width = "5em";
        this.xa.style.display = "inline-block";
        this.xa.style.fontSize = "13px";
        this.xa.style.padding = "4px";
        this.xa.style.borderWidth = "1px";
        this.xa.style.borderStyle = "solid";
        this.xa.style.borderRadius = "4px";
        this.xa.onclick = function () {
            b.Mn();
        };
        this.tg = document.createElement("div");
        O(this.tg, "warning");
        this.tg.innerText = Wh;
        this.tg.style.display = "none";
        this.tg.style.paddingLeft = "5px";
        a = document.createElement("div");
        this.xa.oninput = function () {
            MW(b);
        };
        c.appendChild(this.xa);
        c.appendChild(this.tg);
        this.uh.appendChild(c);
        c = document.createElement("label");
        this.eg = document.createElement("div");
        this.eg.innerText = Pf;
        this.eg.style.fontSize = "13px";
        this.eg.style.padding = "6px 6px 0 6px";
        c.appendChild(this.eg);
        this.Ng = document.createElement("div");
        this.Ca = document.createElement("textarea");
        O(this.Ca, "tipMessageInput");
        this.Ca.maxLength = 255;
        this.Ca.style.width = "100%";
        this.Ca.style.resize = "none";
        this.Ca.style.fontSize = "13px";
        this.Ca.style.margin = "6px";
        this.Ca.style.padding = "4px";
        this.Ca.style.borderWidth = "1px";
        this.Ca.style.borderStyle = "solid";
        this.Ca.style.borderRadius = "4px";
        this.Ca.style.boxSizing = "border-box";
        this.Ng.appendChild(this.Ca);
        this.eg.onclick = function () {
            b.Ca.select();
        };
        c.appendChild(this.Ng);
        this.uh.appendChild(c);
        a.style.position = "relative";
        this.Xj = document.createElement("div");
        this.Od = document.createElement("div");
        this.Od.innerText = Xh;
        this.Od.style.display = "none";
        this.Xj.style.fontSize = "10px";
        this.Xj.style.lineHeight = "1.3em";
        this.Xj.style.padding = "6px";
        this.Xj.style.textAlign = "left";
        this.Xj.style.display = "inline-block";
        this.Xj.style.maxWidth = "175px";
        a.appendChild(this.Xj);
        this.Xj.appendChild(this.Od);
        this.da = new KW();
        this.G(this.da, a);
        this.$u = document.createElement("div");
        this.$u.style.fontSize = "10px";
        c = document.createElement("label");
        var e = document.createElement("span");
        e.innerText = Yh;
        e.style.cursor = "pointer";
        var f = new qv(12);
        f.element.style.top = "2px";
        f.element.style.marginLeft = "3px";
        f.Lo(function () {
            b.vG = !b.vG;
        });
        c.appendChild(e);
        c.appendChild(f.element);
        this.$u.appendChild(c);
        this.Xj.appendChild(this.$u);
        this.uh.appendChild(a);
        v("keydown", this.element, function (h) {
            9 === h.keyCode &&
                (h.preventDefault(),
                h.shiftKey
                    ? b.da.hasFocus() && !oB(b.da)
                        ? f.focus()
                        : document.activeElement === f.Va
                        ? b.Ca.focus()
                        : document.activeElement === b.Ca
                        ? b.xa.focus()
                        : b.da.hasFocus() || oB(b.da)
                    : b.da.hasFocus() && !pB(b.da)
                    ? b.xa.focus()
                    : document.activeElement === b.xa
                    ? b.Ca.focus()
                    : document.activeElement === b.Ca
                    ? f.focus()
                    : b.da.hasFocus() || pB(b.da));
        });
        this.element.appendChild(this.uh);
        this.D();
        var g;
        v("submit", this.uh, function (h) {
            h.preventDefault();
            var m = parseInt(b.xa.value);
            if (!isNaN(m) && b.da.isEnabled())
                if ((F("SendTipClicked", { amount: m, location: "PMTab" }), 100 < m && !b.ug)) lB(b.da, he(m)), (b.ug = !0), b.D();
                else if ((b.xa.blur(), void 0 === g)) {
                    h = Y();
                    var n = b.Ca.value;
                    void 0 !== b.$a && (n = "" === b.Ca.value ? b.$a.value : b.$a.value + " | " + b.Ca.value);
                    ZA({ J: b.J, KG: b.xa.value, message: n, source: b.tr, LG: b.cg, Pm: b.da.Pm, ee: h })
                        .then(function (p) {
                            p.success
                                ? F("SendTipSuccess", { amount: m, location: "PMTab" })
                                : void 0 !== p.error
                                ? vB("" + p.error, !1, A.current.Ub.TOKEN_SOURCE_LOW_TOKEN_BALANCE)
                                : r("unknown send tip error", "tipCallout.ts", "fullvideolib");
                            NW(b);
                            b.Ca.value = "";
                            void 0 !== p.$e && VA.h({ Ua: p.$e, J: b.J });
                            b.Om.h({ amount: m, success: p.success });
                        })
                        .catch(function (p) {
                            r("Error sending tip (" + p + ")", "tipCallout.ts", "fullvideolib");
                            b.Om.h({ amount: m, success: !1 });
                        });
                    b.dM.h({ amount: m });
                    g = window.setTimeout(function () {
                        return (g = void 0);
                    }, 250);
                }
        });
    }
    q($0, w);
    $0.prototype.D = function () {
        this.Ng.style.width = Math.max(0, this.element.clientWidth - 12) + "px";
    };
    $0.prototype.show = function (a) {
        var b = this;
        this.da.xd.B(!0);
        this.element.style.minWidth = 450 > Uv() ? "340px" : "368px";
        void 0 !== a.amount && ((this.xa.value = a.amount.toString()), MW(this));
        this.Ca.value = void 0 !== a.message ? a.message : "";
        void 0 !== a.rv && a.rv ? ((this.Od.style.display = "none"), (this.$u.style.lineHeight = "3em")) : ((this.Od.style.display = "block"), (this.$u.style.lineHeight = ""));
        qB(this.tr, this.da);
        XA(this.J)
            .then(function (c) {
                b.xa.max = c.ob.toString();
                if (void 0 !== c.$o) {
                    b.eg.innerText = c.$o.label;
                    void 0 !== b.$a && b.Ng.removeChild(b.$a);
                    b.$a = document.createElement("select");
                    O(b.$a, "tipOptionsSelect");
                    b.$a.style.width = "100%";
                    b.$a.style.fontSize = ".8125em";
                    b.$a.style.margin = "6px";
                    b.$a.style.borderWidth = "1px";
                    b.$a.style.borderStyle = "solid";
                    b.$a.style.boxSizing = "border-box";
                    b.Ng.insertBefore(b.$a, b.Ca);
                    var d = document.createElement("option");
                    d.innerText = "-- " + Zh + " --";
                    b.$a.appendChild(d);
                    c = l(c.$o.options);
                    for (d = c.next(); !d.done; d = c.next()) {
                        var e = d.value;
                        d = document.createElement("option");
                        d.innerText = e.label;
                        d.value = e.label;
                        b.$a.appendChild(d);
                    }
                } else void 0 !== b.$a && ((b.eg.innerText = Pf), (b.Ca.value = ""), b.Ng.removeChild(b.$a), (b.$a = void 0));
                b.D();
                b.UN.h(void 0);
                b.Mn();
            })
            .catch(function (c) {
                r("Error getting token balance (" + c + ")", "tipCallout.ts", "fullvideolib");
            });
    };
    $0.prototype.Mn = function (a) {
        if (document.activeElement !== this.xa || (void 0 === a ? 0 : a)) this.xa.focus(), this.xa.setSelectionRange(0, 9999);
    };
    $0.prototype.pv = function (a) {
        this.ob = a;
        this.De.innerText = a + " " + ge(a, !1);
    };
    function a1(a) {
        var b = a.element.parentElement;
        a.element.style.visibility = "hidden";
        document.body.appendChild(a.element);
        a.element.style.width = a.LU.offsetWidth + "px";
        a.element.style.height = "auto";
        var c = [a.element.offsetWidth, a.element.offsetHeight];
        document.body.removeChild(a.element);
        null === b || void 0 === b ? void 0 : b.appendChild(a.element);
        a.element.style.visibility = "";
        return c;
    }
    function b1() {
        w.call(this);
        this.bH = new y("UserListWindow:userCountUpdate");
        this.Fc = [];
        this.element.id = "users-list";
        this.element.style.padding = "0 6px";
        this.element.style.boxSizing = "border-box";
        this.element.style.position = "";
        this.un();
        this.refresh(!1);
    }
    q(b1, w);
    k = b1.prototype;
    k.un = function () {
        var a = document.createElement("div");
        O(a, "defaultTooltipColor");
        a.innerText = ai + "...";
        a.style.margin = "6px 0";
        this.element.style.fontSize = "12px";
        this.element.appendChild(a);
    };
    k.eC = function () {
        var a = this,
            b = document.createElement("div");
        O(b, "defaultTooltipColor");
        b.style.margin = "6px 0";
        var c = document.createElement("span");
        c.innerText = bi;
        c.id = "refresh-userlist";
        c.style.cursor = "pointer";
        v("click", c, function (d) {
            Kb(a);
            a.un();
            a.refresh(!1);
            d.preventDefault();
        });
        v("mouseenter", c, function () {
            c.style.textDecoration = "underline";
        });
        v("mouseleave", c, function () {
            c.style.textDecoration = "";
        });
        b.appendChild(c);
        this.element.appendChild(b);
    };
    k.clear = function (a) {
        this.bH.h(a);
        Kb(this);
        this.un();
        this.D();
    };
    k.refresh = function (a) {
        var b = this;
        a = void 0 === a ? !0 : a;
        HF(GF())
            .then(function (c) {
                b.bH.h(c.xA);
                if (!a) {
                    Kb(b);
                    b.eC();
                    b.Fc = c.Oq;
                    for (var d = l(b.Fc), e = d.next(); !e.done; e = d.next()) {
                        e = e.value;
                        var f = document.createElement("div");
                        f.style.width = "auto";
                        f.style.margin = "2px 0";
                        f.style.whiteSpace = "nowrap";
                        f.style.overflow = "hidden";
                        f.style.maxWidth = "100%";
                        f.style.textOverflow = "ellipsis";
                        f.appendChild(new BR(e, void 0, !0).element);
                        b.element.appendChild(f);
                    }
                    d = document.createElement("div");
                    O(d, "defaultTooltipColor");
                    d.innerText = "+" + c.mp + " anonymous user" + (1 === c.mp ? "" : "s");
                    d.style.width = "100%";
                    d.style.margin = "6px 0";
                    d.style.whiteSpace = "nowrap";
                    b.element.appendChild(d);
                    b.D();
                }
            })
            .catch(function (c) {
                r("Error retrieving user list: " + c, "userList.ts", "fullvideolib");
            });
    };
    k.D = function () {
        w.prototype.D.call(this);
    };
    function c1(a, b) {
        a = void 0 === a ? "fullvideo" : a;
        w.call(this);
        var c = this;
        this.Zq = b;
        this.bQ = [];
        this.Hr = new yI();
        this.MQ = new y("focusChanging", { Ve: !1 });
        this.RC = new y("focusChanged", { Ve: !1 });
        this.kV = new y("windowOpened", { Ve: !1 });
        this.jV = new y("windowClosed", { Ve: !1 });
        this.qH = new y("windowHover", { Ve: !1 });
        this.ow = new y("chatVisibilityChanged", { Ve: !1 });
        this.element.style.overflow = "";
        this.element.style.pointerEvents = "none";
        this.source = a;
        this.ua = d1(this, new G0(this));
        $y.g(function (f) {
            c.ua.Mb || ((c.ua.element.style.display = ""), (c.ua.Mb = !0), c.ow.h(!0));
            f.focus && Qy(c, c.ua);
            c.ua.R();
        });
        Fr.g(function () {
            if (void 0 !== c.hH && c.hH.Mb) c.removeChild(c.hH);
            else {
                e1(c, "Users");
                var f = new b1(),
                    g = function (p) {
                        ("privatewatching" !== p.Lc && "privatewatching" !== p.Sa) ||
                            window.setTimeout(function () {
                                f.refresh(!1);
                            }, 2e3);
                        "notconnected" === p.Lc && (f.refresh(!1), (f.element.scrollTop = 0));
                    },
                    h = !0,
                    m = function (p) {
                        p.l.event.Mc.g(g, !1);
                        h || f.clear(p.A.QE);
                        h = !1;
                    };
                G.g(m);
                var n = d1(c, new Oy(c, f, { title: fh, tm: !0, Ih: "Users", minWidth: 100, minHeight: 100, Uh: 190, Th: 230, dj: [0, 2] }));
                f.element.style.overflowY = "auto";
                c.R();
                f.bH.g(function (p) {
                    n.Dz(fh + " (" + p + ")");
                });
                n.uj = function () {
                    G.removeListener(m);
                };
                c.hH = n;
            }
        });
        Kr.g(function () {
            c.ua.Mb ? ((c.ua.element.style.display = "none"), (c.ua.Mb = !1), c.ow.h(!1)) : ((c.ua.element.style.display = ""), (c.ua.Mb = !0), Qy(c, c.ua), c.ow.h(!0));
            c.R();
        });
        az.g(function () {
            c.ua.Mb || Kr.h(void 0);
            Qy(c, c.ua);
            c.ft = c.ua;
            c.ua.Xa.ja.ff();
        });
        Xy.g(function () {
            void 0 !== c.yE && c.yE.Mb ? c.removeChild(c.yE) : (f1(c), c.R());
        });
        Er.g(function (f) {
            function g(n) {
                m.Dz(n.A.j);
            }
            e1(c, "Bio");
            var h = new m0(f),
                m = d1(
                    c,
                    new Oy(c, h, {
                        title: f,
                        tm: !0,
                        Ih: "Bio",
                        Th: 400,
                        Uh: 360,
                        minWidth: 360,
                        minHeight: 100,
                        dj: [0, 2],
                        uj: function () {
                            G.removeListener(g);
                        },
                    })
                );
            G.g(g, !1);
            c.R();
        });
        var d;
        G.g(function (f) {
            d = f.A.tb;
        });
        var e;
        Gr.g(function (f) {
            if (void 0 !== f.amount || !g1(c)) {
                F("OpenTipCallout");
                void 0 === c.yb &&
                    ((c.yb = new $0(a)),
                    c.yb.dM.g(function (m) {
                        e = m.amount;
                        void 0 !== c.Ce && Gr.h({});
                    }),
                    c.yb.UN.g(function () {
                        if (void 0 !== c.Ce && void 0 !== c.yb) {
                            var m = l(a1(c.yb)),
                                n = m.next().value;
                            m = m.next().value;
                            c.Ce.resize(m, n);
                            c.R();
                        }
                    }));
                void 0 === f.amount && (f.amount = e);
                var g = function () {
                    void 0 !== c.Ce && c.removeChild(c.Ce);
                };
                if (d) var h = !Wu('You must be logged in to tip. Click "OK" to login.');
                else R("This broadcaster doesn't accept tips."), (h = !1);
                h &&
                    (void 0 !== c.Zq && NX(c.Zq, c.yb),
                    c.yb.show(f),
                    void 0 !== c.Ce
                        ? Qy(c, c.Ce)
                        : ((h = l(a1(c.yb))),
                          (f = h.next().value),
                          (h = h.next().value),
                          (c.Ce = d1(
                              c,
                              new Oy(c, c.yb, {
                                  title: Tf,
                                  tm: !1,
                                  Ih: "Tip",
                                  minWidth: f + 4,
                                  minHeight: h + 4,
                                  Uh: f,
                                  Tr: !0,
                                  Th: h,
                                  dj: [4],
                                  uj: function () {
                                      G.removeListener(g);
                                      c.Ce = void 0;
                                  },
                                  SE: function () {
                                      void 0 !== c.yb && c.yb.Mn();
                                  },
                                  UE: function (m) {
                                      if (void 0 === c.Ce) return r("undefined tipwindow", "draggableCanvas.ts", "fullvideolib"), !0;
                                      27 === m.keyCode ? c.removeChild(c.Ce) : 83 === m.keyCode && m.ctrlKey && c.removeChild(c.Ce);
                                      return !0;
                                  },
                              })
                          )),
                          (c.Ce.Wa.style.boxSizing = ""),
                          G.g(g, !1),
                          c.R(),
                          c.yb.Mn(!0)));
            }
        });
        G.g(function (f) {
            void 0 !== c.Yd && c.Yd.Mb && c.removeChild(c.Yd);
            var g = f.l.status,
                h = !f.A.tb || !f.A.ge;
            f.l.event.Mc.g(function (n) {
                g = n.Sa;
                switch (n.Sa) {
                    case "unknown":
                    case "offline":
                    case "notconnected":
                    case "away":
                    case "hidden":
                    case "privatenotwatching":
                    case "passwordprotected":
                        void 0 !== c.Yd && c.Yd.Mb && c.removeChild(c.Yd);
                        break;
                    case "privaterequesting":
                    case "privatewatching":
                    case "privatespying":
                        break;
                    default:
                        h && void 0 !== c.Yd && c.Yd.Mb && c.removeChild(c.Yd);
                }
            });
            var m = ["privaterequesting", "privatespying", "privatewatching"];
            f.l.event.Fm.g(function (n) {
                n.ge || -1 !== m.indexOf(g) || (void 0 !== c.Yd && c.Yd.Mb && c.removeChild(c.Yd));
            });
        });
        Ir.g(function () {
            void 0 !== c.Oi && c.Oi.Mb
                ? c.removeChild(c.Oi)
                : (void 0 !== c.Oi && c.removeChild(c.Oi),
                  (c.Iv = new f0()),
                  (c.Oi = d1(
                      c,
                      new Oy(c, c.Iv, {
                          title: ih,
                          tm: !0,
                          Ih: "Abuse",
                          minWidth: 270,
                          minHeight: 200,
                          Uh: 270,
                          Th: 200,
                          dj: [3, 1],
                          SE: function () {
                              void 0 !== c.Iv && c.Iv.Mh.focus();
                          },
                          UE: function () {
                              return !0;
                          },
                          uj: function () {
                              c.Oi = void 0;
                          },
                      })
                  )),
                  c.R(),
                  c.Iv.GB.g(function () {
                      void 0 !== c.Oi && c.removeChild(c.Oi);
                  }));
        });
        Jr.g(function () {
            void 0 !== c.Yd && c.Yd.Mb
                ? c.removeChild(c.Yd)
                : (void 0 === c.lu &&
                      (c.lu = new H0(function () {
                          void 0 !== c.Yd && c.Yd.Mb && c.Yd.lF.apply();
                      })),
                  (c.Yd = d1(c, new Oy(c, c.lu, { title: jk, tm: !1, Ih: "Private", Tr: !0, minWidth: 248, minHeight: 270, Uh: 248, Th: 270, dj: [2, 1] }))),
                  c.R());
        });
        this.Rv = new h0();
        h1(this, this.Rv);
        "1" === Bc(window.location.search).room_list && f1(this);
        Qy(this);
    }
    q(c1, w);
    function f1(a) {
        e1(a, "Rooms");
        var b = new S0(a.source),
            c = 225 + yd();
        a.yE = d1(
            a,
            new Oy(a, b, {
                title: kh,
                tm: !0,
                Ih: "Rooms",
                minWidth: c,
                minHeight: 100,
                Uh: c,
                Th: 385,
                dj: [1, 2],
                uj: function () {
                    b.close();
                },
            })
        );
        F("MoreRoomsOpened");
    }
    c1.prototype.D = function () {
        w.prototype.D.call(this);
        for (var a = l([].concat(this.Hr.Kh)), b = a.next(); !b.done; b = a.next()) b.value.lF.apply();
        void 0 !== this.Rv && (this.Rv.element.style.left = (this.element.clientWidth - this.Rv.element.offsetWidth) / 2 + "px");
    };
    function Qy(a, b) {
        if (!a.cT && a.Ne !== b) {
            if (void 0 !== a.Ne) {
                var c = a.Ne;
                c.Wa.style.opacity = void 0 !== c.config.zP ? c.config.zP : "1";
                void 0 !== c.config.oM && c.config.oM();
                if (document.activeElement !== document.body && void 0 !== document.activeElement && null !== document.activeElement)
                    try {
                        document.activeElement.blur();
                    } catch (f) {}
            }
            a.MQ.h(b);
            if (void 0 !== b) {
                F("FocusWindow", { windowName: b.config.Ih });
                a.Hr.Gf(b);
                c = a.children().length + 10;
                for (var d = l([].concat(a.Hr.Kh)), e = d.next(); !e.done; e = d.next()) (e.value.element.style.zIndex = "" + c), --c;
                d = l(a.bQ);
                for (e = d.next(); !e.done; e = d.next()) (e.value.element.style.zIndex = "" + c), --c;
                b.Wa.style.opacity = "1";
                void 0 !== b.config.SE && b.config.SE();
            }
            a.Ne = b;
            a.RC.h(b);
        }
    }
    c1.prototype.G = function () {
        throw Error("addChild not supported");
    };
    function h1(a, b) {
        b.element.style.pointerEvents = "auto";
        w.prototype.G.call(a, b);
    }
    function d1(a, b) {
        b.uJ.g(function (c) {
            a.cT = c;
        });
        v("mousedown", b.element, function (c) {
            a.Ne !== b && (Qy(a, b), c.preventDefault());
        });
        v("mouseover", b.element, function () {
            a.ft = b;
            a.qH.h(b);
        });
        a.Hr.Gf(b);
        h1(a, b);
        Qy(a, b);
        a.kV.h(b);
        b.Mb = !0;
        return b;
    }
    c1.prototype.removeChild = function (a) {
        a.Mb = !1;
        void 0 !== a.uj && a.uj();
        Qy(this);
        this.Hr.remove(a);
        w.prototype.removeChild.call(this, a);
        this.jV.h(a);
    };
    function e1(a, b) {
        for (var c = l([].concat(a.Hr.Kh)), d = c.next(); !d.done; d = c.next())
            if (((d = d.value), d.config.Ih === b)) {
                a.removeChild(d);
                d === a.Ne && Qy(a);
                break;
            }
    }
    function g1(a) {
        var b = !1;
        void 0 !== a.Ce && a.Ce.Mb && void 0 !== a.yb && !a.yb.vG && (a.removeChild(a.Ce), (b = !0));
        return b;
    }
    function i1(a, b) {
        var c = this;
        this.U = a;
        this.xe = b;
        this.nt = !1;
        this.nt = this.QK = !0;
        this.QK = !1;
        this.xe.element.onmouseenter = function () {
            j1(c);
        };
        this.U.RC.g(function (d) {
            d !== c.U.ua ? k1(c) : j1(c);
        });
        this.U.qH.g(function (d) {
            d === c.U.ua ? j1(c) : k1(c);
        });
        G.g(function () {
            k1(c);
        });
        r0.g(function () {
            j1(c);
        });
        gw.g(function () {
            k1(c);
        });
        Qv.ud.g(function () {
            k1(c);
        });
    }
    function k1(a) {
        var b = Y();
        ("theater" !== b && "fullscreen" !== b) ||
            a.QK ||
            (a.nt
                ? a.U.ua.Xa.me() !== a.U.ua.Xa.ja ||
                  a.U.Ne === a.U.ua ||
                  a.U.ft === a.U.ua ||
                  a.U.ua.Xa.ja.C.Vd() ||
                  hR() ||
                  ((a.xe.element.style.display = "block"),
                  (a.nt = !1),
                  OD(a.U.ua.Xa, a.U.ua.Xa.ja),
                  (a.U.ua.Xa.ja.C.ab.scrollLeft = 0),
                  (a.U.ua.Xa.lL = !0),
                  a.U.ua.B(),
                  Ty(a.U.ua),
                  a.xe.clear(),
                  c0(a.U.ua.Xa.ja.C),
                  window.setTimeout(function () {
                      a.xe.Ea();
                  }, 0))
                : (a.xe.element.style.display = "block"));
    }
    function j1(a) {
        a.nt || ((a.nt = !0), (a.U.ua.Xa.lL = !1), a.U.ua.show(), Sy(a.U.ua), (a.xe.element.style.display = "none"), a.U.ua.Xa.ja.C.Ea());
    }
    function l1(a, b, c) {
        c = void 0 === c ? !1 : c;
        JD.call(this, new lJ().anchor);
        var d = this;
        this.JD = !1;
        this.element.classList.add("gender-tab");
        this.element.dataset.paction = "TopTab";
        O(this.element, "tabElement");
        (this.JD = c) ? this.element.classList.add("active") : this.element.setAttribute("data-floatingnav", "");
        void 0 !== b && (this.element.href = b);
        this.element.innerText = a;
        Q(this.element, m1);
        this.Hi();
        wd(this.element).g(function () {
            d.Hi();
        });
        this.im.g(function () {
            d.Hi();
        });
    }
    q(l1, JD);
    l1.prototype.Hi = function () {
        O(this.element, "tabBorder");
        this.JD
            ? (O(this.element, "activeRoom"), Q(this.element, { fontSize: "15px", padding: "4px 11px 4px", maxWidth: "180px", whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis", cursor: "default", position: "static" }))
            : O(this.element, "inactiveRoom");
        O(this.element, "tabElementLink");
    };
    var m1 = {
        width: "",
        position: "relative",
        display: "inline-block",
        cssFloat: "left",
        boxSizing: "border-box",
        padding: "5px 11px 4px",
        marginRight: "2px",
        fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif",
        borderStyle: "solid",
        borderWidth: "1px",
        borderRadius: "4px 4px 0 0",
        fontSize: "13px",
        textDecoration: "none",
        cursor: "pointer",
    };
    function n1() {
        w.call(this);
        var a = this;
        this.Yb = document.createElement("span");
        this.qa = document.createElement("div");
        this.Ez = [];
        this.ub = !0;
        this.element.id = "shareTab";
        O(this.element, "defaultColor");
        this.element.style.minHeight = "395px";
        this.element.style.padding = "15px";
        this.element.style.width = "100%";
        this.element.style.boxSizing = "border-box";
        this.element.style.position = "static";
        this.Yb.style.display = "block";
        this.Yb.style.fontSize = "12px";
        this.Yb.textContent = "loading...";
        this.element.appendChild(this.Yb);
        var b = document.createElement("div"),
            c = document.createElement("div"),
            d = document.createElement("div");
        b.textContent = lj;
        c.textContent = mj;
        d.textContent = nj;
        O(b, "title");
        b.style.fontSize = "14.4115px";
        b.style.lineHeight = "20.1761px";
        b.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        b.style.marginBottom = "20px";
        c.style.fontSize = "14.4115px";
        c.style.lineHeight = "20.1761px";
        c.style.margin = "14.4115px 0";
        O(d, "link");
        d.style.marginBottom = "12.0108px";
        d.style.fontSize = "12.0108px";
        d.style.lineHeight = "16.8px";
        d.style.fontWeight = "bold";
        this.qa.appendChild(b);
        this.qa.appendChild(c);
        this.qa.appendChild(d);
        this.element.appendChild(this.qa);
        Nc.g(function (e) {
            a.ub = void 0 === e.V;
            a.Qh = e.A;
            a.Yb.style.display = "block";
            a.qa.style.display = "none";
        });
        G.g(function (e) {
            a.ub = e.l.Fd;
            a.Qh = e.A;
            a.Yb.style.display = "block";
            a.qa.style.display = "none";
            a.Yr();
            "block" === a.element.style.display && a.show();
        });
    }
    q(n1, w);
    n1.prototype.Ad = function () {
        return new Promise(function (a, b) {
            C("api/ts/chat/share/")
                .then(function (c) {
                    c = new H(c.responseText);
                    var d = { jw: L(c, "campaignslug"), ZY: L(c, "toururl") };
                    ad(c);
                    a(d);
                })
                .catch(b);
        });
    };
    n1.prototype.Yr = function () {
        var a = this;
        this.Ez.forEach(function (b) {
            a.element.removeChild(b);
        });
        this.Ez = [];
    };
    function o1(a, b) {
        function c(f, g) {
            var h = document.createElement("div"),
                m = document.createElement("label"),
                n = document.createElement("input");
            h.style.margin = "12.0108px 0";
            h.style.lineHeight = "16.8px";
            n.type = "text";
            n.value = g;
            O(m, "link");
            m.textContent = f;
            m.style.display = "block";
            m.style.fontSize = "12.012px";
            m.style.lineHeight = "16.8px";
            m.style.fontWeight = "bold";
            m.style.cursor = "pointer";
            m.style.width = "375px";
            m.onclick = function () {
                n.select();
            };
            O(n, "urlInput");
            n.style.display = "block";
            n.style.borderRadius = "4px";
            n.style.fontSize = "12px";
            n.style.fontFamily = "Arial, Helvetica, sans-serif";
            n.style.verticalAlign = "middle";
            n.style.width = "375px";
            n.style.marginTop = "4px";
            n.style.height = "20px";
            n.style.lineHeight = "18px";
            n.style.borderWidth = "1px";
            n.style.borderStyle = "solid";
            n.style.padding = "2px 4px";
            n.readOnly = !0;
            n.onclick = function () {
                n.select();
            };
            a.Ez.push(h);
            h.appendChild(m);
            h.appendChild(n);
            a.element.appendChild(h);
        }
        var d = wc(a.Qh.j);
        c(T(S("Share %(username)s's Cam"), { username: d }, !0) + ":", "https://chaturbate.com/in/?tour=7Bge&campaign=" + b.jw + "&room=" + a.Qh.j);
        c($i + " Chaturbate.com:", "https://chaturbate.com/in/?tour=OT2s&campaign=" + b.jw);
        c(
            T(S("Embed %(username)s's Cam on Your Webpage"), { username: d }, !0) + ":",
            "<iframe src='https://chaturbate.com/in/?tour=SHBY&campaign=" + b.jw + "&track=embed&room=" + a.Qh.j + "&bgcolor=white' height=528 width=850 style='border: none;'></iframe>"
        );
        c(oj + ":", "<iframe src='https://chaturbate.com/in/?tour=nvfS&campaign=" + b.jw + "&track=embed&bgcolor=white' height=528 width=850 style='border: none;'></iframe>");
        b = document.createElement("div");
        var e = document.createElement("a");
        O(e, "link");
        e.href = "/affiliates/stats/";
        e.textContent = pj;
        e.onmouseenter = function () {
            e.style.textDecoration = "underline";
        };
        e.onmouseleave = function () {
            e.style.textDecoration = "none";
        };
        O(b, "defaultColor");
        b.textContent = qj;
        b.style.fontSize = "12.012px";
        b.style.lineHeight = "16.8px";
        b.style.marginTop = "30px";
        b.appendChild(e);
        a.Ez.push(b);
        a.element.appendChild(b);
    }
    n1.prototype.show = function () {
        var a = this;
        this.Yb.style.display = "block";
        this.qa.style.display = "none";
        this.element.style.display = "block";
        this.Yr();
        this.ub ||
            this.Ad()
                .then(function (b) {
                    a.Yb.style.display = "none";
                    a.qa.style.display = "block";
                    o1(a, b);
                })
                .catch(function () {});
    };
    n1.prototype.B = function () {
        this.element.style.display = "none";
        this.Yb.style.display = "none";
    };
    var p1 = new y("photoSetDetail");
    function q1(a) {
        return new Promise(function (b, c) {
            C("photo_videos/api/photoset_links/" + a + "/")
                .then(function (d) {
                    d = JSON.parse(d.responseText);
                    d.error && c(d.error);
                    b(d.urls);
                })
                .catch(function (d) {
                    c(d);
                });
        });
    }
    function r1(a) {
        return new Promise(function (b, c) {
            C("photo_videos/api/photoset_links/" + a + "/")
                .then(function (d) {
                    d = JSON.parse(d.responseText);
                    d.error && c(d.error);
                    b(d.urls[0]);
                })
                .catch(function (d) {
                    c(d);
                });
        });
    }
    function s1(a) {
        return new Promise(function (b, c) {
            C("photo_videos/api/photoset_action_links/" + a + "/")
                .then(function (d) {
                    b(d.responseText);
                })
                .catch(function (d) {
                    c(d);
                });
        });
    }
    function t1(a) {
        return new Promise(function (b, c) {
            C("photo_videos/api/pvcontext/" + a + "/")
                .then(function (d) {
                    var e = new H(d.responseText);
                    d = L(e, "room");
                    var f = M(e, "is_anonymous"),
                        g = M(e, "is_broadcaster"),
                        h = M(e, "is_staff"),
                        m = M(e, "has_fan_club"),
                        n = M(e, "is_fan_club_member"),
                        p = Zc(e, "photo_sets");
                    e = [];
                    p = l(JSON.parse(p));
                    for (var u = p.next(); !u.done; u = p.next())
                        (u = new H(JSON.stringify(u.value))),
                            e.push({
                                id: N(u, "id"),
                                name: L(u, "name"),
                                ds: L(u, "cover_url"),
                                Ua: N(u, "tokens"),
                                Xb: M(u, "is_video"),
                                sd: M(u, "user_can_access"),
                                $M: N(u, "purchase_count"),
                                cH: M(u, "user_has_purchased"),
                                nm: M(u, "pending_approval", !1, !1),
                                Ww: M(u, "failed_approval", !1, !1),
                                QS: L(u, "rejection_notes", !1),
                                Gp: M(u, "fan_club_only"),
                                EJ: M(u, "fan_club_unlock"),
                                Ya: L(u, "label_text"),
                                Tf: L(u, "label_color"),
                                description: L(u, "description"),
                                qf: N(u, "num_photos"),
                                El: L(u, "created"),
                                Cr: M(u, "video_has_sound"),
                                JR: M(u, "legacy_video"),
                                dV: N(u, "video_duration"),
                                bZ: Tc(u, "video_id", !1),
                                nH: M(u, "video_ready", !1, !1),
                                mH: M(u, "video_error_processing", !1, !1),
                                visibility: L(u, "visibility"),
                            }),
                            ad(u);
                    b({ j: d, ub: f, Pa: g, iq: h, Sl: m, OW: n, Dg: e });
                })
                .catch(function (d) {
                    c(d);
                });
        });
    }
    function u1(a, b) {
        var c = { Tf: "#AAA", Yn: [], xk: "free" };
        if (a.Ww)
            (c.xk = "not_approved"),
                (c.Tf = "#5e81a4"),
                (c.Yn = [
                    { token: fl, size: 0 },
                    { token: hl, size: 0 },
                ]);
        else if (a.Xb && a.mH)
            (c.xk = "not_approved"),
                (c.Tf = "#5e81a4"),
                (c.Yn = [
                    { token: kl, size: 0 },
                    { token: jl, size: 0 },
                ]);
        else if (a.Xb && !a.nH)
            (c.xk = "not_approved"),
                (c.Tf = "#5e81a4"),
                (c.Yn = [
                    { token: il, size: 0 },
                    { token: jl, size: 0 },
                ]);
        else if (a.nm)
            (c.xk = "not_approved"),
                (c.Tf = "#5e81a4"),
                (c.Yn = [
                    { token: gl, size: 0 },
                    { token: hl, size: 0 },
                ]);
        else {
            var d = a.Ua;
            (!a.EJ && 0 < d) || (!b.Sl && 0 < d)
                ? ((c.xk = "purchase_only"),
                  (c.Yn = [
                      { token: "" + a.Ua, size: 1 },
                      { token: ge(a.Ua, !0), size: 0 },
                  ]))
                : a.Gp
                ? ((c.xk = "fanclub_only"),
                  (c.Tf = "#090"),
                  (c.Yn = [
                      { token: Rk, size: 1 },
                      { token: Sk, size: 1 },
                  ]))
                : a.EJ &&
                  0 < a.Ua &&
                  ((c.xk = "fanclub_or_purchase"),
                  (c.Tf = "#090"),
                  (c.Yn = [
                      { token: Rk, size: 1 },
                      { token: Sk, size: 1 },
                      { token: Fg, size: 2 },
                      { token: "" + a.Ua, size: 1 },
                      { token: ge(a.Ua, !0), size: 0 },
                  ]));
        }
        return c;
    }
    var v1 = { $g: 704, pq: 704, yg: 600, wj: 396 };
    function w1(a) {
        v1.$g = Math.max(460, 168 * Math.floor((a.offsetWidth - 30 + 16) / 168) - 16);
        v1.pq = Math.min(v1.$g, 1400);
        v1.yg = v1.pq - 104;
        v1.wj = Math.floor((9 * v1.pq) / 16);
    }
    var x1 = new y("photosetPurchasedEvent");
    function y1(a, b, c) {
        w.call(this);
        var d = this;
        this.P = a;
        this.context = b;
        this.wc = c;
        this.Zb = document.createElement("div");
        this.If = document.createElement("div");
        this.Ic = document.createElement("a");
        this.element.style.display = "block";
        this.element.style.position = "relative";
        this.element.style.width = "100%";
        this.element.style.height = "auto";
        this.Zb.style.width = "100%";
        this.Zb.style.height = "auto";
        this.Zb.style.minHeight = "200px";
        this.element.appendChild(this.Zb);
        this.If.style.width = "100%";
        this.If.style.height = "40px";
        this.If.style.position = "relative";
        a = document.createElement("div");
        O(a, "createdAt");
        a.style.height = "20px";
        a.style.lineHeight = "20px";
        a.style.position = "absolute";
        a.style.top = "0px";
        a.style.right = "8px";
        a.style.fontSize = "12px";
        a.style.textAlign = "right";
        a.style.marginTop = "2px";
        a.textContent = Uk + " " + this.P.El;
        this.If.appendChild(a);
        !this.P.Xb ||
            this.P.Cr ||
            this.P.nm ||
            ((a = document.createElement("div")),
            (a.style.height = "20px"),
            (a.style.lineHeight = "20px"),
            (a.style.position = "absolute"),
            (a.style.top = "20px"),
            (a.style.left = "8px"),
            (a.style.fontSize = "12px"),
            (a.style.textAlign = "left"),
            (a.style.marginTop = "2px"),
            (a.textContent = "" + el),
            this.If.appendChild(a));
        O(this.Ic, "link");
        this.Ic.style.display = "none";
        this.Ic.style.height = "20px";
        this.Ic.style.lineHeight = "20px";
        this.Ic.style.position = "absolute";
        this.Ic.style.top = "0px";
        this.Ic.style.left = "0px";
        this.Ic.style.fontSize = "12px";
        this.Ic.style.textAlign = "left";
        this.Ic.style.marginTop = "2px";
        this.Ic.target = "_blank";
        this.Ic.onmouseenter = function () {
            d.Ic.style.textDecoration = "underline";
        };
        this.Ic.onmouseleave = function () {
            d.Ic.style.textDecoration = "none";
        };
        this.P.Xb || (this.Ic.textContent = $k);
        this.If.appendChild(this.Ic);
        this.element.appendChild(this.If);
        this.P.sd || z1(this);
    }
    q(y1, w);
    k = y1.prototype;
    k.Ad = function () {};
    k.next = function () {};
    k.previous = function () {};
    k.Uy = function () {};
    k.resize = function (a) {
        this.wc = a;
        void 0 !== this.Cb &&
            this.Cb.parentElement === this.Zb &&
            ((this.Cb.style.width = this.wc.yg + "px"), (this.Cb.style.height = this.wc.wj + "px"), void 0 !== this.ey && ((this.ey.style.left = (this.wc.yg - 350) / 2 + "px"), (this.ey.style.top = (this.wc.wj - 240) / 2 + "px")));
    };
    function A1(a, b) {
        a.context.ub &&
            (A.current.nb
                ? jv.h(!1)
                : Md(b, function () {
                      jv.h(!1);
                  }));
        return !a.context.ub;
    }
    function B1(a) {
        A1(a, a.P.Xb ? cl : al) &&
            Md(a.P.Xb ? ne(a.P.Ua) : oe(a.P.qf, a.P.Ua), function () {
                E("photo_videos/purchase_photoset/" + a.P.id + "/", { pvTab: "True" })
                    .then(function (b) {
                        b = new H(b.responseText);
                        M(b, "success")
                            ? (F("PhotosetPurchased", { photoset_id: a.P.id }), x1.h(a.P.id), (a.P.sd = !0), void 0 !== a.Cb && a.Cb.parentElement === a.Zb && a.Zb.removeChild(a.Cb), a.Ad())
                            : void 0 !== K(b, "error")
                            ? M(b, "tokens_error")
                                ? Md(L(b, "error") + "  " + dl, function () {
                                      window.open("/tipping/purchase_tokens/?source=" + A.current.Ub.TOKEN_SOURCE_PURCHASE_MEDIA, "_blank", "height=615, width=850");
                                  })
                                : vB(L(b, "error"), !1, A.current.Ub.TOKEN_SOURCE_LOW_TOKEN_BALANCE)
                            : R(a.P.Xb ? Wk : Vk);
                    })
                    .catch(function (b) {
                        r("Purchase Error: " + b, "mediaComponent.ts", "photovideos");
                    });
            });
    }
    function C1(a) {
        A1(a, me(a.context.j)) &&
            (a.context.Sl
                ? Md(le(a.context.j), function () {
                      F("PhotosetJoinFanclubClicked", { photoset_id: a.P.id });
                      window.location.href = "/fanclub/join/" + a.context.j + "/";
                  })
                : R(re(a.context.j)));
    }
    function z1(a) {
        a.Cb = document.createElement("div");
        a.Cb.style.position = "relative";
        a.Cb.style.width = a.wc.yg + "px";
        a.Cb.style.height = a.wc.wj + "px";
        a.Cb.style.margin = "0 auto";
        a.Cb.style.overflow = "hidden";
        a.Cb.style.zIndex = "2";
        var b = document.createElement("img");
        b.src = a.P.ds;
        b.style.width = "100%";
        b.style.height = "100%";
        b.style.filter = "blur(8px)";
        a.Cb.appendChild(b);
        a.ey = D1(a);
        a.Cb.appendChild(a.ey);
        a.Zb.appendChild(a.Cb);
    }
    function D1(a) {
        var b = document.createElement("div");
        b.style.width = "350px";
        b.style.height = "240px";
        O(b, "lockOverlayBg");
        O(b, "rgba");
        b.style.borderRadius = "10px";
        b.style.position = "absolute";
        b.style.left = (a.wc.yg - 350) / 2 + "px";
        b.style.top = (a.wc.wj - 240) / 2 + "px";
        b.style.textAlign = "center";
        var c = document.createElement("div");
        c.style.width = "100%";
        var d = document.createElement("div");
        O(d, "previewText");
        d.style.fontSize = "16px";
        d.style.height = "40px";
        d.textContent = a.P.Xb ? qe(E1(a.P.dV)) : pe(a.P.qf);
        c.appendChild(d);
        d = 40;
        switch (u1(a.P, a.context).xk) {
            case "fanclub_or_purchase":
                var e = F1(ke(G1(a.context.j)), function () {
                        C1(a);
                    }),
                    f = document.createElement("div");
                O(f, "previewText");
                f.textContent = Zk;
                f.style.fontSize = "14px";
                f.style.height = "30px";
                f.style.lineHeight = "30px";
                f.style.marginBottom = "1px";
                var g = F1(
                    a.P.Ua + " " + ee("TOKEN", "TOKENS", a.P.Ua),
                    function () {
                        B1(a);
                    },
                    !0
                );
                c.appendChild(e);
                c.appendChild(f);
                c.appendChild(g);
                d += 80;
                break;
            case "fanclub_only":
                e = F1(ke(G1(a.context.j)), function () {
                    C1(a);
                });
                c.appendChild(e);
                d += 25;
                break;
            case "purchase_only":
                (e = F1(a.P.Ua + " " + ee("TOKEN", "TOKENS", a.P.Ua), function () {
                    B1(a);
                })),
                    c.appendChild(e),
                    (d += 25);
        }
        !a.P.Xb ||
            a.P.Cr ||
            a.P.nm ||
            ((e = document.createElement("div")), O(e, "previewText"), (e.style.fontSize = "14px"), (e.style.height = "40px"), (e.style.lineHeight = "54px"), (e.style.marginBottom = "1px"), (e.textContent = "" + el), c.appendChild(e));
        c.style.position = "relative";
        c.style.top = (240 - d) / 2 - 5 + "px";
        b.appendChild(c);
        return b;
    }
    function H1(a, b) {
        a.P.Xb ||
            "" === b ||
            (a.context.ub
                ? ((a.Ic.href = "#"),
                  (a.Ic.style.display = "block"),
                  (a.Ic.onclick = function (c) {
                      c.preventDefault();
                      A1(a, bl);
                  }))
                : ((a.Ic.href = b), (a.Ic.style.display = "block")));
    }
    function F1(a, b, c) {
        c = void 0 === c ? !1 : c;
        var d = document.createElement("div");
        d.textContent = a;
        d.style.width = "250px";
        d.style.height = "25px";
        d.style.lineHeight = "25px";
        d.style.borderWidth = "1px";
        d.style.borderStyle = "solid";
        d.style.borderRadius = "4px";
        d.style.fontSize = "12px";
        d.style.textAlign = "center";
        d.style.cursor = "pointer";
        d.onclick = b;
        O(d, "previewText");
        O(d, "buttonBgColor");
        O(d, "buttonBorder");
        O(d, "rgba");
        O(d, "gradient");
        c && O(d, "grey");
        d.style.position = "relative";
        d.style.left = "50px";
        return d;
    }
    function G1(a) {
        return 18 >= a.length ? a.toUpperCase() : (a.substr(0, 15) + "...").toUpperCase();
    }
    function E1(a) {
        return (60 < a ? Math.floor(a / 60) + " " + Xk + " " : "") + (a % 60) + " " + Yk;
    }
    function I1(a, b, c) {
        w.call(this);
        var d = this;
        this.P = a;
        this.context = b;
        this.wc = c;
        this.anchor = document.createElement("a");
        this.element.style.position = "relative";
        this.element.style.display = "inline-block";
        this.element.style.width = this.wc.JP + "px";
        this.element.style.height = "120px";
        this.element.style.boxSizing = "border-box";
        this.element.style.margin = "0px " + this.wc.iI + "px " + (c.iI + 1) + "px";
        this.element.style.verticalAlign = "middle";
        this.element.style.overflow = "visible";
        qb() || (this.element.title = a.name);
        this.element.onmouseenter = function () {
            d.element.style.cursor = "pointer";
            d.element.style.textDecoration = "underline";
        };
        this.element.onmouseleave = function () {
            d.element.style.cursor = "default";
            d.element.style.textDecoration = "none";
        };
        this.anchor.href = "/photo_videos/photoset/detail/" + this.context.j + "/" + this.P.id + "/";
        this.anchor.onclick = function (f) {
            f.metaKey || f.ctrlKey || (f.preventDefault(), YL(a, "PVTab"), p1.h({ request: { P: d.P, context: d.context, autoplay: !0, scroll: !0 }, pushState: !0 }));
        };
        this.element.appendChild(this.anchor);
        b = document.createElement("img");
        O(b, "previewBorder");
        b.src = this.P.ds;
        b.width = 150;
        b.height = 100;
        b.style.borderWidth = "1px";
        b.style.borderStyle = "solid";
        b.style.borderRadius = "3%";
        b.style.display = "block";
        this.anchor.appendChild(b);
        !this.P.sd || this.context.Pa ? J1(this) : this.P.sd && this.P.cH && K1(this);
        if (
            this.P.Xb &&
            ((b = document.createElement("img")),
            (b.src = "https://static-assets.highwebmedia.com/tsdefaultassets/video.svg"),
            (b.height = 18),
            (b.style.position = "absolute"),
            (b.style.top = "8px"),
            (b.style.right = "8px"),
            this.anchor.appendChild(b),
            !this.P.Cr && !this.P.nm)
        ) {
            b = document.createElement("img");
            b.src = "https://static-assets.highwebmedia.com/tsdefaultassets/no-audio.svg";
            b.height = 18;
            b.style.position = "absolute";
            b.style.top = "8px";
            b.style.right = "32px";
            var e = nw({ content: "" + el, qg: !1, width: 175, Rc: 1, wd: "90px" });
            e.style.boxShadow = "0px 2px 8px rgba(0, 0, 0, 0.25)";
            e.style.textAlign = "center";
            O(e, "tooltip-white");
            P(e, "tooltip");
            c = document.createElement("span");
            e.appendChild(c);
            this.anchor.appendChild(e);
            b.onmouseenter = function () {
                e.style.display = "block";
                e.style.left = "12px";
                e.style.top = "-32px";
            };
            b.onmouseleave = function () {
                e.style.display = "none";
            };
            this.anchor.appendChild(b);
        }
        b = document.createElement("div");
        O(b, "link");
        b.textContent = this.P.name;
        b.style.fontSize = this.wc.fontSize + "px";
        b.style.left = "0px";
        b.style.maxWidth = "145px";
        b.style.whiteSpace = "nowrap";
        b.style.textOverflow = "ellipsis";
        b.style.overflow = "hidden";
        b.style.lineHeight = "16px";
        this.anchor.appendChild(b);
    }
    q(I1, w);
    function K1(a) {
        var b = document.createElement("span");
        O(b, "purchasedBadge");
        b.style.position = "absolute";
        b.style.top = "80px";
        b.style.right = "8px";
        b.style.padding = "1px 3px";
        b.style.lineHeight = "12px";
        b.style.borderRadius = "2px";
        b.style.fontSize = "9px";
        b.textContent = Eg;
        a.anchor.appendChild(b);
    }
    function J1(a) {
        if ("free" !== u1(a.P, a.context).xk) {
            a.Cb = document.createElement("div");
            a.Cb.style.height = "101px";
            a.Cb.style.width = "151px";
            a.Cb.style.borderRadius = "3%";
            O(a.Cb, "lockOverlayBg");
            O(a.Cb, "rgba");
            a.Cb.style.position = "absolute";
            a.Cb.style.top = "0px";
            a.Cb.style.left = "0px";
            var b = document.createElement("img");
            b.src = "https://static-assets.highwebmedia.com/tsdefaultassets/lock.svg";
            b.width = 18;
            b.height = 18;
            b.style.marginLeft = "-9px";
            b.style.marginTop = "-9px";
            b.style.position = "absolute";
            b.style.left = "50%";
            b.style.top = "48%";
            b.style.padding = "4px";
            b.style.border = "none";
            a.Cb.appendChild(b);
            a.anchor.appendChild(a.Cb);
            "" !== a.P.Ya &&
                ((a.badge = document.createElement("span")),
                O(a.badge, "tokenText"),
                (a.badge.innerText = a.P.Ya),
                (a.badge.style.backgroundColor = a.P.Tf),
                (a.badge.style.color = "#fff"),
                (a.badge.style.position = "absolute"),
                (a.badge.style.top = "80px"),
                (a.badge.style.right = "8px"),
                (a.badge.style.fontSize = "9px"),
                (a.badge.style.padding = "1px 3px"),
                (a.badge.style.lineHeight = "12px"),
                (a.badge.style.borderRadius = "2px"),
                a.anchor.appendChild(a.badge));
        }
    }
    function L1(a, b) {
        a = void 0 === a ? !1 : a;
        b = void 0 === b ? !1 : b;
        w.call(this);
        this.Xb = a;
        this.fm = document.createElement("img");
        a = v1.wj;
        var c = this.Xb ? v1.pq : v1.yg;
        this.element.style.position = "relative";
        this.element.style.width = c + "px";
        this.element.style.height = a + "px";
        this.element.style.margin = "0 auto";
        this.element.style.backgroundImage = 'url("https://static-assets.highwebmedia.com/tsdefaultassets/no_thumbnail.svg")';
        this.element.style.backgroundRepeat = "no-repeat";
        this.element.style.backgroundSize = "cover";
        this.element.style.webkitBackgroundSize = "cover";
        this.element.style.backgroundPosition = "center";
        b ||
            ((this.fm.style.width = "30px"),
            (this.fm.style.height = "30px"),
            (this.fm.style.position = "absolute"),
            (this.fm.style.top = "50%"),
            (this.fm.style.left = "50%"),
            (this.fm.style.transform = "translate(-50%, -50%)"),
            (this.fm.src = "https://static-assets.highwebmedia.com/tsdefaultassets/loading.gif"),
            this.element.appendChild(this.fm));
    }
    q(L1, w);
    L1.prototype.D = function () {
        w.prototype.D.call(this);
        var a = v1.wj;
        this.element.style.width = (this.Xb ? v1.pq : v1.yg) + "px";
        this.element.style.height = a + "px";
    };
    function M1(a, b, c) {
        y1.call(this, a, b, c);
        var d = this;
        this.images = [];
        this.index = 0;
        this.sg = [];
        this.mh = document.createElement("div");
        this.Lv = 0;
        this.rn = !1;
        N1(this);
        O1(this);
        this.If.appendChild(this.mh);
        this.P.sd && this.Ad();
        window.setTimeout(function () {
            d.D();
        }, 0);
    }
    q(M1, y1);
    M1.prototype.Ad = function () {
        var a = this;
        if (!this.rn) {
            this.rn = !0;
            for (
                var b = function () {
                    return { le: new L1().element, loaded: !1, url: "" };
                };
                this.images.length < this.P.qf;

            )
                this.images.push(b());
            this.Zb.appendChild(this.images[0].le);
            this.D();
            q1(this.P.id)
                .then(function (c) {
                    c.length !== a.P.qf && ((a.P.qf = c.length), O1(a), P1(a));
                    for (; c.length > a.images.length; ) a.images.push(b());
                    for (; c.length < a.images.length; ) a.images.pop();
                    for (var d = 0; d < c.length; d += 1) Q1(a, c[d], d);
                    H1(a, c[0]);
                })
                .catch(function (c) {
                    a.rn = !1;
                    r("GetPhotoURLs: " + c, "mediaPhotos.ts", "photovideos");
                });
            P1(this);
        }
    };
    function Q1(a, b, c) {
        var d = a.images[c];
        d.url = b;
        var e = document.createElement("img");
        e.style.height = "100%";
        e.style.width = "100%";
        e.src = b;
        e.onload = function () {
            d.loaded = !0;
            if (e.naturalWidth > e.naturalHeight) {
                var f = Math.min(e.naturalWidth, a.wc.yg);
                var g = Math.floor((f * e.naturalHeight) / e.naturalWidth);
            } else (g = Math.min(e.naturalHeight, a.wc.yg, 1100)), (f = Math.floor((g * e.naturalWidth) / e.naturalHeight));
            d.le.style.background = "none";
            d.le.style.width = f + "px";
            for (d.le.style.height = g + "px"; null !== d.le.firstChild; ) d.le.removeChild(d.le.firstChild);
            d.le.appendChild(e);
            a.D();
        };
    }
    M1.prototype.D = function () {
        function a(g) {
            var h = b.Hf;
            h.vg.style.top = h.Fg.style.top = (g - 50) / 2 + "px";
            b.mh.style.left = (b.wc.$g - b.mh.offsetWidth) / 2 + "px";
        }
        var b = this;
        y1.prototype.D.call(this);
        var c = this.images[this.index];
        if (void 0 === c) a(this.Zb.offsetHeight);
        else if (c.loaded) {
            var d = c.le.firstChild;
            if (d.naturalWidth > d.naturalHeight) {
                var e = Math.min(d.naturalWidth, this.wc.yg);
                var f = Math.floor((e * d.naturalHeight) / d.naturalWidth);
            } else (f = Math.min(d.naturalHeight, this.wc.yg, 1100, window.innerHeight - 200)), (e = Math.floor((f * d.naturalWidth) / d.naturalHeight));
            c.le.style.width = e + "px";
            c.le.style.height = f + "px";
            a(f);
        } else (d = c.le.firstChild), (c.le.style.width = this.wc.yg + "px"), (c.le.style.height = this.wc.wj + "px"), (d.style.top = (this.wc.wj - 30) / 2 + "px"), (d.style.left = (this.wc.yg - 30) / 2 + "px"), a(this.wc.wj);
    };
    M1.prototype.next = function () {
        if (!(2 > this.P.qf) && this.P.sd) {
            var a = this.index;
            this.index = (this.index + 1) % this.P.qf;
            R1(this);
            S1(this, a);
        }
    };
    M1.prototype.previous = function () {
        if (!(2 > this.P.qf) && this.P.sd) {
            var a = this.index;
            0 === this.index ? (this.index = this.P.qf - 1) : --this.index;
            R1(this);
            S1(this, a);
        }
    };
    function S1(a, b) {
        b = a.images[b];
        b.le.parentElement === a.Zb && a.Zb.removeChild(b.le);
        b = a.images[a.index];
        a.Zb.appendChild(b.le);
        H1(a, b.url);
        a.D();
    }
    function P1(a) {
        2 > a.P.qf ? FG(a.Hf) : ((a = a.Hf), (a.oe.style.visibility = a.We.style.visibility = "normal"), a.sd && (a.oe.style.cursor = a.We.style.cursor = "pointer"));
    }
    function N1(a) {
        a.Hf = new DG(
            function () {
                a.previous();
            },
            function () {
                a.next();
            },
            a.P.sd
        );
        P1(a);
        a.Zb.appendChild(a.Hf.oe);
        a.Zb.appendChild(a.Hf.We);
    }
    function T1(a) {
        a.style.height = "8px";
        a.style.width = "8px";
        a.style.padding = "2px";
    }
    function U1(a) {
        a.style.height = "6px";
        a.style.width = "6px";
        a.style.padding = "3px";
    }
    function V1(a) {
        a.style.height = "4px";
        a.style.width = "4px";
        a.style.padding = "4px";
    }
    function O1(a) {
        for (a.sg = []; null !== a.mh.firstChild; ) a.mh.removeChild(a.mh.firstChild);
        var b = Math.min(5, a.P.qf);
        if (!(2 > b)) {
            a.mh.style.width = 12 * b + "px";
            a.mh.style.height = "15px";
            a.mh.style.position = "absolute";
            a.mh.style.marginTop = "2px";
            a.mh.style.top = "0px";
            for (var c = 0; c < b; c += 1) {
                var d = document.createElement("img");
                5 >= a.P.qf ? T1(d) : 3 === c && 5 === b ? U1(d) : 4 === c && 5 === b ? V1(d) : T1(d);
                d.style.display = "inline-block";
                d.src = 0 === c ? "https://static-assets.highwebmedia.com/tsdefaultassets/dot-blue.svg" : "https://static-assets.highwebmedia.com/tsdefaultassets/dot-gray.svg";
                a.sg.push(d);
                a.mh.appendChild(d);
            }
        }
    }
    function R1(a) {
        if (!(2 > a.sg.length))
            if (
                ((a.sg[a.Lv].src = "https://static-assets.highwebmedia.com/tsdefaultassets/dot-gray.svg"),
                (a.Lv = a.index === a.P.qf - 1 ? Math.min(a.sg.length - 1, 4) : Math.min(a.index, 3)),
                (a.sg[a.Lv].src = "https://static-assets.highwebmedia.com/tsdefaultassets/dot-blue.svg"),
                5 >= a.P.qf)
            ) {
                a = l(a.sg);
                for (var b = a.next(); !b.done; b = a.next()) T1(b.value);
            } else
                switch (a.Lv) {
                    case 0:
                    case 1:
                    case 2:
                        for (b = 0; b < a.sg.length; b += 1) {
                            var c = a.sg[b];
                            3 > b ? T1(c) : 3 === b ? U1(c) : V1(c);
                        }
                        break;
                    case 3:
                        for (b = 0; b < a.sg.length; b += 1)
                            (c = a.sg[b]), a.index === a.P.qf - 2 && 4 === b ? T1(c) : (3 === a.index && 0 === b) || 4 === b || (3 !== a.index && 1 === b) || 4 === b ? U1(c) : 3 !== a.index && 0 === b ? V1(c) : T1(c);
                        break;
                    case 4:
                        for (b = 0; b < a.sg.length; b += 1) (c = a.sg[b]), 0 === b ? V1(c) : 1 === b ? U1(c) : T1(c);
                }
    }
    function W1(a, b) {
        this.F = document.createElement("video");
        this.source = document.createElement("source");
        this.F.style.minHeight = "135px";
        this.F.style.cursor = "pointer";
        this.F.style.margin = "auto";
        this.F.oncontextmenu = function (c) {
            c.preventDefault();
            return !1;
        };
        this.F.setAttribute("webkit-playsinline", "");
        this.F.setAttribute("playsinline", "");
        this.F.setAttribute("preload", "auto");
        this.F.setAttribute("autoplay", "true");
        this.F.controls = a;
        this.F.muted = b;
    }
    W1.prototype.BH = function (a) {
        var b = void 0 === b ? "video/mp4" : b;
        this.source = document.createElement("source");
        this.source.type = b;
        this.source.src = a;
        this.F.appendChild(this.source);
        this.F.load();
    };
    W1.prototype.play = function () {
        function a(b) {
            switch (b.name) {
                case "AbortError":
                    break;
                default:
                    r("DOMError: playing video " + b, "recordedVideo.ts", "common");
            }
        }
        if (qb())
            try {
                this.F.play();
            } catch (b) {
                a(b);
            }
        else
            this.F.play()
                .then(function () {})
                .catch(a);
    };
    W1.prototype.pause = function () {
        this.F.pause();
    };
    var X1 = window.videojs;
    function Y1(a, b, c) {
        c = void 0 === c ? !0 : c;
        W1.call(this, a, b);
        this.vv = !1;
        this.eP = new y("videoJSActivated");
        this.po = {
            fluid: !0,
            children: "mediaLoader posterImage textTrackDisplay bigPlayButton controlBar errorDisplay textTrackSettings resizeManager".split(" "),
            userActions: { doubleClick: function () {} },
            controlBar: { children: ["playToggle", "progressControl", "currentTimeDisplay", "timeDivider", "durationDisplay"], volumePanel: !1 },
        };
        this.F.style.minHeight = "";
        c && (this.po.controlBar.children.push("muteToggle"), (this.po.controlBar.muteToggle = {}), kb() || (this.po.controlBar.children.push("volumeControl"), (this.po.controlBar.volumeControl = {})));
        (ld() || kb()) && this.po.controlBar.children.push("fullscreenToggle");
        b && (this.po.muted = !0);
        this.F.setAttribute("class", "video-js vjs-big-play-centered vjs-cbcustom");
    }
    q(Y1, W1);
    Y1.prototype.BH = function (a) {
        var b = void 0 === b ? "video/mp4" : b;
        this.source = document.createElement("source");
        this.source.type = b;
        this.source.src = a;
        this.F.appendChild(this.source);
        this.vv || ((this.vv = !0), (this.He = X1(this.F, this.po)), this.He.addClass("vjs-cbcustom"), this.He.addClass("vjs-has-started"), this.He.autoplay(!0), this.eP.h(void 0), this.He.load());
    };
    Y1.prototype.play = function () {
        if (this.vv) {
            var a = this.He.play();
            void 0 !== a &&
                a.catch(function (b) {
                    switch (b.name) {
                        case "AbortError":
                            break;
                        default:
                            r("DOMError: playing video " + b, "recordedVideoVideoJS.ts", "common");
                    }
                });
        }
    };
    Y1.prototype.pause = function () {
        this.vv && this.He.pause();
    };
    var Z1 = !0;
    function $1(a, b, c, d) {
        d = void 0 === d ? !0 : d;
        y1.call(this, a, b, c);
        this.autoplay = d;
        this.Gh = document.createElement("div");
        this.rn = this.kH = this.xo = !1;
        this.Gh.style.display = "none";
        this.Gh.style.position = "relative";
        this.Gh.style.overflow = "hidden";
        this.Zb.appendChild(this.Gh);
        this.video = void 0 !== window.videojs ? new Y1(!0, Z1 && kb(), a.Cr) : new W1(!0, !1);
        Z1 = !1;
        this.Gh.style.maxWidth = this.wc.pq + "px";
        this.Gh.style.margin = "0 auto";
        this.Gh.style.cursor = "pointer";
        this.video.F.style.backgroundColor = "black";
        this.Gh.appendChild(this.video.F);
        this.P.sd && this.Ad();
    }
    q($1, y1);
    $1.prototype.D = function () {
        y1.prototype.D.call(this);
        if (this.video instanceof Y1) {
            if (!this.video.vv) return;
            var a = this.video.He.videoHeight();
            var b = this.video.He.videoWidth();
        } else {
            if (!this.kH) return;
            a = this.video.F.videoHeight;
            b = this.video.F.videoWidth;
            this.video.F.style.height = "auto";
            this.video.F.style.width = "100%";
        }
        this.Gh.style.maxWidth = Math.max(a > b ? (b / a) * window.innerHeight - 200 : b, 300) + "px";
        this.Gh.style.height = "auto";
    };
    $1.prototype.Ad = function () {
        var a = this;
        if (!this.rn)
            if (((this.rn = !0), this.P.nH)) {
                var b = new L1(!0);
                this.G(b, this.Zb);
                r1(this.P.id)
                    .then(function (d) {
                        var e = $b("cbv_vol"),
                            f = $b("cbv_mute");
                        e = void 0 !== e ? e : ".5";
                        f = void 0 !== f ? f : "0";
                        H1(a, d);
                        a.video.BH(d);
                        if (a.video instanceof Y1) {
                            var g = a.video.He;
                            a.video.He.on("loadeddata", function () {
                                b.parent === a && a.removeChild(b);
                                g.volume(Number(e));
                                g.muted("1" === f);
                                a.Gh.style.display = "block";
                                a.kH = !0;
                                a.D();
                            });
                            a.video.He.on("contextmenu", function (h) {
                                h.preventDefault();
                                h.stopPropagation();
                                return !1;
                            });
                            a.video.He.on("volumechange", function () {
                                var h = g.volume(),
                                    m = g.muted() || 0 === h ? "1" : "0";
                                bc("cbv_vol", h.toString(), 365);
                                bc("cbv_mute", m, 365);
                            });
                            a.video.He.on("play", function () {
                                a.xo = !0;
                            });
                            a.video.He.on("pause", function () {
                                a.xo = !1;
                            });
                            a.video.He.on("ended", function () {
                                a.xo = !1;
                            });
                            if (!a.autoplay)
                                a.video.He.one("play", function () {
                                    a.video.pause();
                                });
                            a.video.He.on("error", function (h) {
                                r("MediaVideo: VideoJs: " + h.message, "mediaVideo.ts", "photovideos");
                            });
                        } else
                            (a.video.F.onloadeddata = function () {
                                a.removeChild(b);
                                a.video.F.volume = Number(e);
                                a.video.F.muted = "1" === f;
                                a.Gh.style.display = "block";
                                a.kH = !0;
                                a.D();
                            }),
                                (a.video.F.oncontextmenu = function (h) {
                                    h.preventDefault();
                                    h.stopPropagation();
                                    return !1;
                                }),
                                (a.video.F.onvolumechange = function () {
                                    var h = a.video.F.volume,
                                        m = a.video.F.muted || 0 === h ? "1" : "0";
                                    bc("cbv_vol", h.toString(), 365);
                                    bc("cbv_mute", m, 365);
                                }),
                                (a.video.F.onplay = function () {
                                    a.xo = !0;
                                }),
                                (a.video.F.onpause = function () {
                                    a.xo = !1;
                                }),
                                (a.video.F.onended = function () {
                                    a.xo = !1;
                                }),
                                (a.video.F.onerror = function (h) {
                                    r("MediaVideo: HTML5: " + h, "mediaVideo.ts", "photovideos");
                                });
                    })
                    .catch(function (d) {
                        a.rn = !1;
                        r("GetVideoURL: " + d, "mediaVideo.ts", "photovideos");
                    });
            } else {
                var c = new L1(!0, !0);
                this.G(c, this.Zb);
            }
    };
    $1.prototype.Uy = function () {
        this.xo ? this.video.pause() : this.video.play();
    };
    var a2 = "resizable,dependent,scrollbars,height=768,width=850,top=" + (screen.height / 2 - 384).toString() + ",left=" + (screen.width / 2 - 425).toString();
    function b2(a) {
        w.call(this);
        this.dL = a;
        this.Kc = document.createElement("div");
        this.Zb = document.createElement("div");
        this.sh = {};
        this.element.style.width = v1.$g + "px";
        this.element.style.height = "auto";
        this.element.style.minHeight = "10px";
        this.element.style.position = "relative";
        this.element.style.userSelect = "text";
        this.element.style.webkitUserSelect = "text";
        this.Kc.style.width = "100%";
        this.Kc.style.marginBottom = "15px";
        this.Zb.style.width = "100%";
        this.Zb.style.userSelect = "none";
        this.Zb.style.webkitUserSelect = "none";
        this.element.appendChild(this.Kc);
        this.element.appendChild(this.Zb);
    }
    q(b2, w);
    k = b2.prototype;
    k.D = function () {
        this.element.style.width = v1.$g + "px";
        void 0 !== this.mediaElement && this.mediaElement.resize(v1);
    };
    function c2(a, b) {
        b = void 0 === b ? "Loading..." : b;
        a.Kc.textContent = void 0 === b ? "Loading..." : b;
        if (void 0 !== a.ql) for (; null !== a.ql.firstChild; ) a.ql.removeChild(a.ql.firstChild);
        void 0 !== a.mediaElement && a.mediaElement.element.parentElement === a.Zb && (a.Zb.removeChild(a.mediaElement.element), (a.mediaElement = void 0));
    }
    function d2(a, b, c) {
        a.Kc.textContent = "";
        if (b.Ww) {
            var d = document.createElement("div");
            O(d, "errorMessage");
            d.style.padding = "15px";
            d.style.borderWidth = "1px";
            d.style.borderStyle = "solid";
            d.style.borderRadius = "4px";
            d.style.margin = "5px 0";
            d.style.fontSize = "18px";
            d.style.whiteSpace = "pre-line";
            d.style.textAlign = "center";
            d.textContent = ll + ": " + b.QS;
            c.Pa && (d.textContent += "\r\n" + ml);
            a.Kc.appendChild(d);
        } else
            b.mH &&
                ((d = document.createElement("div")),
                O(d, "errorMessage"),
                (d.style.padding = "15px"),
                (d.style.borderRadius = "4px"),
                (d.style.margin = "5px 0"),
                (d.style.fontSize = "18px"),
                (d.style.whiteSpace = "pre-line"),
                (d.style.textAlign = "center"),
                (d.textContent = "" + $m),
                c.Pa && (d.textContent += "\r\n" + an),
                a.Kc.appendChild(d));
        d = document.createElement("div");
        O(d, "title");
        d.style.textAlign = "left";
        d.style.fontSize = "18px";
        d.style.display = "block";
        d.style.fontWeight = "bold";
        var e = document.createElement("span");
        e.textContent = "" + b.name;
        d.appendChild(e);
        if (!0 === a.dL) {
            var f = document.createElement("a");
            f.title = "" + nl;
            f.href = "/photo_videos/photoset/detail/" + c.j + "/" + b.id + "/";
            f.style.marginLeft = "2px";
            f.style.padding = "0 5px";
            c = document.createElement("div");
            O(c, "popoutIcon");
            c.style.display = "inline-block";
            c.style.height = "15px";
            c.style.width = "15px";
            c.style.position = "relative";
            c.style.top = "2px";
            f.appendChild(c);
            f.onmouseenter = function () {
                f.style.textDecoration = "underline";
            };
            f.onmouseleave = function () {
                f.style.textDecoration = "none";
            };
            f.onclick = function (g) {
                g.preventDefault();
                uu(f.href, "_blank", a2);
            };
            d.appendChild(f);
        }
        a.Kc.appendChild(d);
        !b.Xb ||
            b.nH ||
            b.mH ||
            ((c = document.createElement("div")),
            O(c, "videoProcessing"),
            (c.style.textAlign = "left"),
            (c.style.fontSize = "14px"),
            (c.style.display = "block"),
            (c.style.marginTop = "15px"),
            (c.style.marginBottom = "15px"),
            (c.style.wordWrap = "break-word"),
            (c.textContent = Zm),
            a.Kc.appendChild(c));
        c = document.createElement("div");
        c.style.textAlign = "left";
        c.style.fontSize = "14px";
        c.style.display = "block";
        c.style.marginTop = "15px";
        c.style.marginBottom = "15px";
        c.style.wordWrap = "break-word";
        c.textContent = "" + b.description;
        a.Kc.appendChild(c);
    }
    k.XA = function (a, b) {
        var c = this;
        if (b.Pa || b.iq)
            void 0 === this.ql && ((this.ql = document.createElement("div")), (this.ql.style.margin = "5px 0"), this.element.appendChild(this.ql)),
                s1(a.id)
                    .then(function (d) {
                        var e = c.ql;
                        e.innerHTML = d;
                        if (c.dL) {
                            d = {};
                            for (var f = l(e.querySelectorAll("#broadcaster_links a, #staff_links a")), g = f.next(); !g.done; d = { Cv: d.Cv }, g = f.next())
                                (d.Cv = g.value),
                                    (d.Cv.onclick = (function (n) {
                                        return function (p) {
                                            p.preventDefault();
                                            uu(n.Cv.href, void 0, a2);
                                        };
                                    })(d));
                        }
                        d = e.querySelector("#staff_delete_photoset_button");
                        var h = e.querySelector("#staff_delete_photoset");
                        f = e.querySelector("#staff_unmute_video_button");
                        var m = e.querySelector("#staff_unmute_video");
                        null !== d &&
                            null !== h &&
                            (d.onclick = function () {
                                Md("Are you sure you want to remove this item?", function () {
                                    h.submit();
                                });
                            });
                        null !== f &&
                            null !== m &&
                            (f.onclick = function () {
                                Md("Are you sure you want to unmute?", function () {
                                    m.submit();
                                });
                            });
                    })
                    .catch(function () {});
    };
    k.previous = function () {
        void 0 !== this.mediaElement && this.mediaElement.previous();
    };
    k.next = function () {
        void 0 !== this.mediaElement && this.mediaElement.next();
    };
    k.Uy = function () {
        void 0 !== this.mediaElement && this.mediaElement.Uy();
    };
    var e2 = { fontSize: "13px", fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif", width: "auto", height: "auto", position: "absolute", display: "none", overflow: "", cursor: "default", top: "0px", left: "0px" },
        f2 = { width: "149px", maxHeight: "450px", overflowY: "auto", overflowX: "hidden", position: "relative", boxSizing: "border-box", padding: "8px", borderRadius: "0px 4px 4px 4px", WebkitBorderRadius: "0px 4px 4px 4px" };
    function g2(a, b) {
        Dw.call(this, a);
        var c = this;
        this.mediaType = b;
        this.QC = !1;
        this.JB = new y("sortCollectionSet");
        this.element.style.marginTop = "5px";
        this.element.style.boxShadow = "rgb(0 0 0 / 20%) 0px 4px 16px 0px";
        GV.g(function () {
            c.QC = !0;
        });
        nz.g(function () {
            c.QC = !1;
        });
    }
    q(g2, Dw);
    g2.prototype.es = function () {
        return V("div", { className: "psSortingDropdown", colorClass: "tabActiveColor", style: e2 }, V("div", { className: "psSortingContainer", style: f2, colorClass: ["tabActiveBgColor", "tabBorderNoHover"] }, h2(this)));
    };
    g2.prototype.tf = function () {
        Dw.prototype.tf.call(this);
        this.QC && (this.element.style.zIndex = "" + (rd(this.element) - 2));
    };
    function h2(a) {
        return ["Newest First", "Top Sellers", "Price (high to low)", "Price (low to high)", "Fan Club Only"].map(function (b) {
            var c = {};
            pb() &&
                (c.onTouchEnd = function () {
                    a.JB.h({ mediaType: a.mediaType, Jm: b });
                });
            return V(
                "div",
                Object.assign({}, c, {
                    className: "psSortingOption",
                    onClick: function () {
                        a.JB.h({ mediaType: a.mediaType, Jm: b });
                    },
                    style: { marginBottom: "1px", padding: "4px", fontSize: "12px", fontWeight: "normal", fontFamily: "UbuntuRegular", cursor: "pointer" },
                }),
                b
            );
        });
    }
    function i2(a) {
        a = void 0 === a ? !1 : a;
        w.call(this);
        var b = this;
        this.tC = this.vb = this.ZK = !1;
        this.element.id = "PhotoVideos";
        this.element.style.position = "static";
        this.element.style.padding = "21px 15px 15px 2px";
        this.element.style.boxSizing = "border-box";
        this.element.className = "photovideos-container";
        this.element.tabIndex = -1;
        this.Vh = new b2(a);
        this.Vh.element.style.paddingLeft = "13px";
        this.Vh.element.classList.add("photoVideoDetailSection");
        a = document.createElement("div");
        this.element.appendChild(a);
        Zu(this.element, "text");
        a.appendChild(this.Vh.element);
        this.Um = new j2();
        this.Um.element.style.position = "relative";
        a.appendChild(this.Um.element);
        this.Ik = new k2();
        this.Ik.element.style.position = "relative";
        a.appendChild(this.Ik.element);
        p1.g(function (c) {
            if (void 0 === c) c2(b.Vh, "");
            else {
                var d = b.Vh,
                    e = c.request.P,
                    f = c.request.context,
                    g = c.request.autoplay;
                c = c.request.scroll;
                g = void 0 === g ? !0 : g;
                c = void 0 === c ? !0 : c;
                c2(d);
                d2(d, e, f);
                d.XA(e, f);
                d.sh[e.id] ? (d.mediaElement = d.sh[e.id]) : ((d.mediaElement = e.Xb ? new $1(e, f, v1, g) : new M1(e, f, v1)), e.JR || (d.sh[e.id] = d.mediaElement));
                void 0 !== d.mediaElement && (d.G(d.mediaElement, d.Zb), d.mediaElement.R(), c && (fb().scrollTop = d.element.offsetTop - 100));
            }
        });
        x1.g(function (c) {
            b.Dg = b.Dg.map(function (d) {
                d.id === c && (d.sd = !0);
                return d;
            });
            b.Dg.filter(function (d) {
                return d.id === c;
            })[0].Xb
                ? l2(b.Um, c)
                : l2(b.Ik, c);
        });
        v("keydown", this.element, function (c) {
            switch (c.keyCode) {
                case 37:
                    c.preventDefault();
                    c.stopPropagation();
                    b.Vh.previous();
                    break;
                case 32:
                    c.preventDefault();
                    b.Vh.Uy();
                    break;
                case 39:
                    c.preventDefault(), c.stopPropagation(), b.Vh.next();
            }
        });
    }
    q(i2, w);
    k = i2.prototype;
    k.Sn = function (a, b) {
        this.ZK = !0;
        this.j = a;
        c2(this.Vh);
        this.Ik.reset(a);
        this.Um.reset(a);
        void 0 !== b && this.Ad(void 0, !1, b);
        this.tC = !1;
        this.vb && this.Ad(void 0, !1);
    };
    k.D = function () {
        void 0 !== this.parent ? w1(this.parent.element) : null !== this.element.parentElement && w1(this.element.parentElement);
        this.Ik.R();
        this.Um.R();
        this.Vh.R();
    };
    k.show = function (a) {
        if (!this.vb)
            if (
                ((this.vb = !0),
                F("PhotosetTabOpened"),
                (this.element.style.height = ""),
                (this.element.style.minHeight = "250px"),
                (this.element.style.width = ""),
                (this.element.style.padding = "21px 15px 15px 2px"),
                void 0 !== a && (fb().scrollTop = this.element.offsetTop - 100),
                !this.tC)
            )
                this.Ad(a);
            else if (void 0 !== a) for (var b = l(this.Dg), c = b.next(); !c.done; c = b.next()) (c = c.value), c.id === a && p1.h({ request: { P: c, context: this.context, autoplay: !1, scroll: !0 }, pushState: !0 });
    };
    k.B = function () {
        this.vb = !1;
        this.element.style.height = "0px";
        this.element.style.minHeight = "";
        this.element.style.width = "0px";
        this.element.style.padding = "0px";
    };
    k.Ad = function (a, b, c) {
        var d = this;
        b = void 0 === b ? !0 : b;
        if (this.ZK) {
            var e = this.j;
            this.tC = !0;
            this.Ik.reset(e);
            this.Um.reset(e);
            var f = function (g) {
                if (e === d.j) {
                    d.context = g;
                    var h = g.Dg.filter(function (n) {
                            return !n.Xb;
                        }),
                        m = g.Dg.filter(function (n) {
                            return n.Xb;
                        });
                    d.Dg = g.Dg;
                    0 === d.Dg.length ? ((d.Vh.Kc.textContent = ""), m2(d.Ik)) : ((d.Ik.context = d.context), n2(d.Ik, h), (d.Um.context = d.context), n2(d.Um, m));
                    0 !== d.Dg.length &&
                        (void 0 === a || isNaN(a)
                            ? ((g = d.Dg.filter(function (n) {
                                  return n.sd;
                              })),
                              (g = 0 < g.length ? g[0] : d.Dg[0]))
                            : (g = d.Dg.filter(function (n) {
                                  return n.id === a;
                              })[0]),
                        p1.h({ request: { P: g, context: d.context, autoplay: !1, scroll: b }, pushState: !0 }));
                }
            };
            void 0 !== c ? f(c) : t1(e).then(f);
        }
    };
    function k2() {
        w.call(this);
        this.Zr = "picture";
        this.NG = document.createElement("div");
        this.Ah = document.createElement("div");
        this.ur = document.createElement("div");
        this.Yi = document.createElement("div");
        this.qd = document.createElement("div");
        this.Jm = "Newest First";
        this.Iz = !1;
        Q(this.ur, { width: v1.$g + "px", marginTop: "10px", paddingLeft: "13px" });
        Q(this.NG, { textAlign: "left", display: "inline-block", fontSize: "16px", fontWeight: "bold" });
        Q(this.Ah, { paddingLeft: "8px", display: "none", fontSize: "14px", cursor: "pointer" });
        this.Ah.className = "psToggleSort";
        this.Ah.textContent = "Filter by: " + this.Jm;
        var a = document.createElement("div");
        a.className = "psDropDownArrow";
        this.Ah.appendChild(a);
        this.ur.appendChild(this.NG);
        this.ur.appendChild(this.Ah);
        this.element.appendChild(this.ur);
        this.Yi.style.margin = "9px 0";
        this.Yi.style.width = v1.$g + 16 + "px";
        this.Yi.style.lineHeight = "15px";
        this.Yi.style.fontFamily = "UbuntuRegular, Arial, Helvetica, sans-serif";
        this.Yi.classList.add("photoSetsDiv");
        this.element.appendChild(this.Yi);
    }
    q(k2, w);
    k2.prototype.D = function () {
        this.ur.style.width = v1.$g + "px";
        this.Yi.style.width = v1.$g + 16 + 10 + "px";
        void 0 !== this.Kd && (this.Kd.style.width = v1.$g + 16 + "px");
    };
    function m2(a) {
        var b = document.createElement("div");
        O(b, "psContainer");
        b.style.display = "inline-block";
        b.style.width = v1.$g + 16 + "px";
        b.style.padding = "0 5px";
        b.style.fontFamily = "UbuntuRegular, Arial, Helvetica, sans-serif";
        var c = document.createElement("div");
        O(c, "contentText");
        c.style.marginLeft = "8px";
        c.textContent = Ok;
        c.style.height = "16px";
        b.appendChild(c);
        a.Kd = b;
        a.Yi.appendChild(a.Kd);
    }
    function l2(a, b) {
        a.zl = a.zl.map(function (d) {
            d.id === b && (d.sd = !0);
            return d;
        });
        a = l(a.yl);
        for (var c = a.next(); !c.done; c = a.next())
            (c = c.value), c.P.id === b && void 0 !== c.Cb && c.Cb.parentElement === c.anchor && (void 0 !== c.badge && c.badge.parentElement === c.anchor && c.anchor.removeChild(c.badge), c.anchor.removeChild(c.Cb), K1(c));
    }
    k2.prototype.reset = function (a) {
        this.Ah.style.display = "none";
        this.j = a;
        void 0 !== this.qF && null !== this.qF && this.qF.removeListener();
        void 0 !== this.Kd && (this.Yi.removeChild(this.Kd), (this.Kd = void 0));
        this.yl = [];
        o2(this, !0);
    };
    function p2(a) {
        a.Ah.style.display = "inline-block";
        var b = new g2(a.Ah, a.Zr);
        a.Ah.onclick = function () {
            pb() && qd(b.element, a.Ah) && (b.element.style.marginTop = "20px");
        };
        a.qF = b.JB.g(function (c) {
            var d = c.Jm;
            c.mediaType === a.Zr && ((a.Jm = d), (a.Ah.textContent = "Filter by: " + a.Jm), (c = document.createElement("div")), c.classList.add("psDropDownArrow"), a.Ah.appendChild(c), q2(a, a.Jm));
        });
    }
    function q2(a, b) {
        r2(a);
        var c = [];
        switch (b) {
            case "Newest First":
                c = a.yl.sort(function (e, f) {
                    e = e.P.id;
                    f = f.P.id;
                    return e > f ? -1 : e < f ? 1 : 0;
                });
                break;
            case "Price (low to high)":
                c = a.yl.sort(function (e, f) {
                    var g = e.P.Ua,
                        h = f.P.Ua;
                    return 0 === g && g === h ? ((e = e.P.Gp ? 1 : 0), (f = f.P.Gp ? 1 : 0), e < f ? -1 : e > f ? 1 : 0) : g < h ? -1 : g > h ? 1 : 0;
                });
                break;
            case "Price (high to low)":
                c = a.yl.sort(function (e, f) {
                    var g = e.P.Ua,
                        h = f.P.Ua;
                    return 0 === g && g === h ? ((e = e.P.Gp ? 1 : 0), (f = f.P.Gp ? 1 : 0), e > f ? -1 : e < f ? 1 : 0) : g > h ? -1 : g < h ? 1 : 0;
                });
                break;
            case "Top Sellers":
                c = a.yl.sort(function (e, f) {
                    e = e.P.$M;
                    f = f.P.$M;
                    return e > f ? -1 : e < f ? 1 : 0;
                });
                break;
            case "Fan Club Only":
                c = a.yl
                    .filter(function (e) {
                        e = e.P.visibility;
                        return a.context.Sl ? "fanclub_only" === e || "fanclub_or_purchase" === e : "fanclub_only" === e;
                    })
                    .sort(function (e, f) {
                        e = e.P.id;
                        f = f.P.id;
                        return e > f ? -1 : e < f ? 1 : 0;
                    });
        }
        0 === c.length && p1.h(void 0);
        b = c.filter(function (e) {
            return e.P.nm || e.P.Ww;
        });
        c = c.filter(function (e) {
            return !e.P.nm && !e.P.Ww;
        });
        a.context.Pa && (c = c.concat(b));
        if (void 0 !== a.Kd) {
            a.Iz || (c = c.slice(0, 16));
            b = l(c);
            for (var d = b.next(); !d.done; d = b.next()) a.Kd.appendChild(d.value.element);
        }
        b = 16 === a.zl.length ? 16 : 15;
        !a.Iz && c.length > b && s2(a);
    }
    function n2(a, b) {
        a.yl = [];
        a.zl = b;
        b = document.createElement("div");
        O(b, "psContainer");
        b.style.display = "inline-block";
        b.style.width = v1.$g + 16 + "px";
        b.style.padding = "0 5px";
        b.style.fontFamily = "UbuntuRegular, Arial, Helvetica, sans-serif";
        for (var c = 16 === a.zl.length ? 16 : 15, d = 0; d < a.zl.length; d++) {
            var e = new I1(a.zl[d], a.context, { fontSize: 14, JP: 152, iI: 8 });
            a.yl.push(e);
            d < c && b.appendChild(e.element);
        }
        a.Kd = b;
        16 < a.zl.length && (s2(a), t2(a));
        0 < a.zl.length && (o2(a), p2(a));
        a.Yi.appendChild(b);
        q2(a, "Newest First");
    }
    function o2(a, b) {
        var c = a.NG;
        (void 0 === b ? 0 : b) ? (a = "") : "picture" === a.Zr ? ((a = u2(a.j)), (a = T(S("%(modelname)s's Pics"), { modelname: vc(a) }, !0))) : ((a = u2(a.j)), (a = T(S("%(modelname)s's Videos"), { modelname: vc(a) }, !0)));
        c.textContent = a;
    }
    function t2(a) {
        a.qd.style.position = "relative";
        a.qd.style.display = "inline-block";
        a.qd.style.width = "152px";
        a.qd.style.height = "120px";
        a.qd.style.lineHeight = "100px";
        a.qd.style.boxSizing = "border-box";
        a.qd.style.margin = "0px 8px 17px";
        a.qd.style.textAlign = "center";
        a.qd.style.overflow = "hidden";
        a.qd.style.verticalAlign = "middle";
        a.qd.style.cursor = "pointer";
        a.qd.onmouseenter = function () {
            a.qd.style.textDecoration = "underline";
        };
        a.qd.onmouseleave = function () {
            a.qd.style.textDecoration = "none";
        };
        a.qd.onclick = function () {
            a.Iz = !0;
            a.qd.parentElement === a.Kd && a.Kd.removeChild(a.qd);
            r2(a);
            void 0 !== a.Kd && q2(a, a.Jm);
        };
        var b = document.createElement("div");
        O(b, "showMoreText");
        b.style.fontFamily = "UbuntuMedium, Arial, Helvetica, sans-serif";
        b.style.fontSize = "14px";
        b.textContent = "picture" === a.Zr ? Pk : Qk;
        a.qd.appendChild(b);
    }
    function s2(a) {
        a.Iz = !1;
        void 0 !== a.Kd && a.Kd.appendChild(a.qd);
    }
    function r2(a) {
        if (void 0 !== a.Kd) for (var b = a.Kd.lastElementChild; null !== b; ) a.Kd.removeChild(b), (b = a.Kd.lastElementChild);
    }
    function j2() {
        k2.call(this);
        this.Zr = "video";
        this.ur.style.marginTop = "0px";
    }
    q(j2, k2);
    function u2(a) {
        return a.replace(/^\w/, function (b) {
            return b.toUpperCase();
        });
    }
    function v2() {
        w.call(this);
        this.Zk = {};
        this.qO = "selectedRoomTab";
        this.element.id = "roomTabs";
        this.element.style.position = "static";
        this.element.style.borderRadius = "4px 4px 0 0";
        this.element.style.boxSizing = "border-box";
        this.element.style.overflow = "visible";
        this.element.style.paddingBottom = "1px";
        this.Ai = new AD();
        O(this.Ai.element, "tabBar");
        Q(this.Ai, { height: "30px", padding: "8px 4px", boxSizing: "border-box", overflow: "visible", borderRadius: "2px 2px 0 0" });
        this.G(this.Ai);
        this.Lm = new AD();
        Q(this.Lm, { height: "24px", top: "-2px" });
        this.Ai.G(this.Lm);
    }
    q(v2, w);
    k = v2.prototype;
    k.Ff = function (a, b, c) {
        b = w2(this, a, b, c);
        this.Lm.G(b.anchor);
        return (this.Zk[a] = b);
    };
    k.B = function (a) {
        a = this.Zk[a];
        void 0 !== a && (a.anchor.element.style.display = "none");
    };
    k.navigate = function (a) {
        this.hi(a);
        this.Cz(this.Uj);
    };
    function w2(a, b, c, d) {
        var e = new JD("a");
        O(e.element, "tabLink");
        e.element.href = "#";
        e.element.innerText = c;
        x2(a, e, b);
        b === a.Uj && y2(e);
        c = { anchor: e, instance: d };
        a.Zk[b] = c;
        d.B();
        a.G(d);
        e.element.onclick = function () {
            a.hi(b);
            a.Cz(a.Uj);
        };
        e.im.g(function (f) {
            b === a.Uj ? y2(e) : P(e.element, "tabOpen");
            f ? (O(e, "tabCollapsed"), (e.element.style.cssFloat = ""), (e.element.style.marginTop = "2px")) : (P(e, "tabCollapsed"), (e.element.style.cssFloat = "left"), (e.element.style.marginTop = "0"));
        });
        return c;
    }
    function x2(a, b, c, d) {
        b.element.style.width = "";
        b.element.style.height = "17px";
        b.element.style.borderRadius = "4px 4px 0 0";
        b.element.style.textDecoration = "none";
        b.element.style.marginRight = "2px";
        b.element.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        b.element.style.fontSize = "13px";
        b.element.style.padding = "4px 8px 4px 8px";
        b.element.style.position = "relative";
        b.element.style.cssFloat = "left";
        b.element.style.display = "block";
        !0 === d && (b.element.style.display = "none");
        b.element.onmouseenter = function () {
            y2(b);
        };
        b.element.onmouseleave = function () {
            a.Uj !== c && P(b.element, "tabOpen");
        };
    }
    k.DB = function () {
        if (Qa()) {
            var a = window.localStorage.getItem(this.qO);
            if (null !== a && void 0 !== this.Zk[a]) return a;
        }
    };
    k.Cz = function (a) {
        Qa() && window.localStorage.setItem(this.qO, a);
    };
    function y2(a) {
        O(a.element, "tabOpen");
    }
    function z2(a, b) {
        var c = a.Zk[b];
        void 0 !== c && (a.Uj === b && a.hi(a.gJ), c.anchor.ha());
    }
    function A2(a, b) {
        a = a.Zk[b];
        void 0 !== a && a.anchor.Ja();
    }
    k.hi = function (a, b, c) {
        if (this.Uj === a) void 0 !== c && c();
        else {
            var d = this.Zk[a];
            void 0 !== d && (d.anchor.element.style.display = "block");
            if (void 0 !== d && d.anchor.La()) {
                for (var e = l(Object.keys(this.Zk)), f = e.next(); !f.done; f = e.next()) (f = this.Zk[f.value]), void 0 !== f && (P(f.anchor.element, "tabOpen"), f.instance.B());
                y2(d.anchor);
                d.instance instanceof i2 ? d.instance.show(b) : d.instance.show(void 0, c);
                this.Uj = a;
            }
        }
    };
    function B2() {
        w.call(this);
        this.DL = new C2();
        this.Yb = document.createElement("p");
        this.qa = document.createElement("h2");
        this.Hn = document.createElement("p");
        this.loading = !1;
        O(this.element, "ContestStats");
        this.element.style.minHeight = "800px";
        this.element.style.padding = "15px";
        this.element.style.width = "100%";
        this.element.style.boxSizing = "border-box";
        this.element.style.position = "static";
        this.Yb.style.display = "block";
        this.Yb.style.fontSize = "12px";
        this.Yb.textContent = "loading...";
        O(this.qa, "defaultTooltipColor");
        this.qa.innerText = qi + ":";
        this.qa.style.fontSize = "12px";
        this.qa.style.fontWeight = "bold";
        O(this.Hn, "defaultTooltipColor");
        this.Hn.innerText = ri;
        this.Hn.style.fontSize = "12px";
        this.Hn.style.padding = "0.5em 0 1em 0";
        this.element.appendChild(this.Yb);
        this.element.appendChild(this.qa);
        this.element.appendChild(this.Hn);
        this.G(this.DL);
    }
    q(B2, w);
    B2.prototype.Ad = function () {
        var a = this;
        this.loading = !0;
        return new Promise(function (b) {
            C("api/ts/contest/leaderboard/?_=" + new Date().getTime())
                .then(function (c) {
                    c = new H(c.responseText);
                    for (var d = [], e = l(Vc(c, "top")), f = e.next(); !f.done; f = e.next()) (f = f.value), d.push({ rT: wc(f.room_user), yN: f.room_slug, points: f.points, sR: f.image_url, Oc: f.viewers });
                    ad(c);
                    b(d);
                    a.loading = !1;
                })
                .catch(function () {
                    a.loading = !1;
                });
        });
    };
    B2.prototype.show = function () {
        var a = this;
        this.loading ||
            ((this.element.style.display = ""),
            (this.Yb.style.display = "block"),
            (this.qa.style.display = "none"),
            (this.Hn.style.display = "none"),
            this.Ad()
                .then(function (b) {
                    a.Yb.style.display = "none";
                    a.qa.style.display = "block";
                    a.Hn.style.display = "block";
                    a.DL.refresh(b);
                })
                .catch(function () {}));
    };
    B2.prototype.B = function () {
        this.element.style.display = "none";
    };
    function C2(a) {
        a = void 0 === a ? !1 : a;
        w.call(this);
        this.AM = a;
        this.rows = [];
        this.element.style.position = "static";
        this.element.style.height = "";
        this.element.style.width = "";
        this.element.style.marginBottom = "20px";
    }
    q(C2, w);
    C2.prototype.refresh = function (a) {
        D2(this);
        E2(this, a);
    };
    function D2(a) {
        a.rows.forEach(function (b) {
            a.element.removeChild(b);
        });
        a.rows = [];
    }
    function E2(a, b) {
        function c(e) {
            function f(oa, Nb) {
                oa.style.cursor = "pointer";
                if (void 0 === Nb ? 0 : Nb)
                    (oa.onmouseenter = function () {
                        return (oa.style.textDecoration = "underline");
                    }),
                        (oa.onmouseleave = function () {
                            return (oa.style.textDecoration = "");
                        });
                a.AM ||
                    (oa.onclick = function (db) {
                        db.preventDefault();
                        Hr.h(e.yN);
                    });
            }
            function g(oa) {
                O(oa, "rowBorder");
                oa.style.display = "table-cell";
                oa.style.verticalAlign = "middle";
                oa.style.padding = "5px";
            }
            function h(oa, Nb) {
                var db = document.createElement("span"),
                    Yf = document.createElement("span"),
                    Ee = document.createElement("span");
                O(db, "statText");
                O(Ee, "statData");
                db.style.fontSize = "12px";
                db.style.fontWeight = "400";
                Yf.style.fontWeight = "bold";
                Yf.style.verticalAlign = "middle";
                Ee.style.verticalAlign = "middle";
                Ee.style.margin = "0 3px";
                Yf.textContent = oa;
                Ee.textContent = "" + Nb;
                db.appendChild(Yf);
                db.appendChild(Ee);
                return db;
            }
            var m = 1 === d ? "topRow" : "otherRows",
                n = document.createElement("div"),
                p = document.createElement("div"),
                u = document.createElement("img"),
                x = document.createElement("a"),
                D = document.createElement("div"),
                J = document.createElement("div"),
                I = document.createElement("a"),
                ja = document.createElement("div"),
                Yb = h(oi + ":", e.Oc),
                Ta = h(pi + ":", e.points);
            x.appendChild(u);
            J.appendChild(I);
            n.style.display = "block";
            O(D, m);
            D.style.padding = "5px";
            D.style.width = "500px";
            O(p, m);
            p.style.fontSize = 1 === d ? "20px" : "16px";
            p.style.fontWeight = "700";
            p.style.padding = "5px";
            p.style.width = "25px";
            O(J, m);
            O(I, m);
            I.style.fontFamily = "UbuntuMedium, Arial, Helvetica, sans-serif";
            J.style.fontSize = 1 === d ? "20px" : "16px";
            O(ja, "statsContainer");
            u.style.height = "52px";
            u.style.width = "52px";
            m = "/" + e.yN + "/";
            I.href = m;
            x.href = m;
            a.AM && ((I.target = "_blank"), (x.target = "_blank"));
            u.src = e.sR;
            I.textContent = wc(e.rT);
            p.textContent = d + ".";
            d += 1;
            g(p);
            g(x);
            g(D);
            f(I, !0);
            f(u, !1);
            Yb.style.margin = "0 5px";
            Ta.style.margin = "0 5px";
            J.style.margin = "0 5px";
            D.appendChild(J);
            D.appendChild(ja);
            ja.appendChild(Yb);
            ja.appendChild(Ta);
            n.appendChild(p);
            n.appendChild(x);
            n.appendChild(D);
            return n;
        }
        var d = 1;
        b.forEach(function (e) {
            e = c(e);
            a.rows.push(e);
            a.element.appendChild(e);
        });
    }
    new y("reloadNewAppTab", { ii: 1 });
    function F2(a) {
        function b(d) {
            void 0 !== c.Al && (G2(c.Al), a.removeChild(c.Al.element));
            c.Al = new H2(d, c.element, function () {
                c.TG = !1;
            });
            a.appendChild(c.Al.element);
            I2(c, ue(d.A.j));
            d.A.rD &&
                void 0 !== d.A.Vz &&
                (void 0 === c.label && (c.label = document.createElement("span")), O(c.label, "satisfactionLabel"), (c.label.textContent = Gk), (c.label.style.margin = "0 3px"), (c.label.style.verticalAlign = "top"), c.Wa.prepend(c.label));
        }
        IY.call(this);
        var c = this;
        this.TG = !1;
        this.element.id = "satisfactionScore";
        this.element.style.width = "auto";
        this.element.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        this.element.style.fontSize = "12px";
        this.element.style.padding = "4px 10px";
        this.element.style.position = "relative";
        this.element.style.top = "-4px";
        this.element.style.right = "1px";
        this.element.style.cssFloat = "right";
        this.element.style.borderRadius = "4px";
        this.element.style.cursor = "pointer";
        this.element.style.marginRight = "5px";
        this.element.onmouseenter = function () {
            if (!c.TG) {
                c.Ee.style.display = "block";
                var d = c.element.getBoundingClientRect();
                c.Ee.style.top = a.offsetHeight + 8 + "px";
                c.Ee.style.left = d.left + fb().scrollLeft + (d.width - c.Ee.offsetWidth) / 2 + "px";
            }
        };
        this.element.onmouseleave = function () {
            c.Ee.style.display = "none";
        };
        J2(this);
        a.appendChild(this.Ee);
        G.g(function (d) {
            b(d);
        });
        Nc.g(function (d) {
            b(d);
        });
        this.Jw();
    }
    q(F2, IY);
    F2.prototype.D = function () {
        void 0 !== this.Al && this.Al.D();
    };
    function J2(a) {
        a.Ee = nw({ content: "", qg: !1, width: 220, Rc: 0, wd: "123px", borderWidth: 1 });
        P(a.Ee, "tooltip");
        O(a.Ee, "whiteModal");
        a.Ee.style.lineHeight = "22px";
        a.Ee.style.fontSize = "14px";
        a.Ee.style.borderWidth = "1px";
        a.Ee.style.borderRadius = "4px";
        a.Ee.style.padding = "8px 0px 8px 8px";
        a.Ee.style.boxShadow = "0px 4px 16px rgba(0, 0, 0, 0.08)";
        var b = document.createElement("span");
        a.Ee.appendChild(b);
    }
    function I2(a, b) {
        a.Ee.lastChild.innerText = b;
    }
    function NY(a, b) {
        a.TG = !0;
        void 0 !== a.Al && (a.Al.show(b), (a.Ee.style.display = "none"));
    }
    F2.prototype.Sw = function () {
        P(this.element, "disabled");
        O(this.element, "enabled");
        IY.prototype.Sw.call(this);
    };
    F2.prototype.Jw = function () {
        P(this.element, "enabled");
        O(this.element, "disabled");
        IY.prototype.Jw.call(this);
    };
    function H2(a, b, c) {
        w.call(this);
        var d = this;
        this.yT = b;
        this.ph = c;
        this.Ph = document.createElement("div");
        this.label = document.createElement("label");
        this.rd = document.createElement("textarea");
        this.xf = document.createElement("input");
        this.J = "";
        this.ju = !1;
        this.hidden = !0;
        this.J = a.A.j;
        this.element.id = "satisfactionComment";
        this.element.style.display = "none";
        this.element.style.width = "350px";
        this.element.style.height = "auto";
        this.element.style.borderWidth = "2px";
        this.element.style.borderStyle = "solid";
        this.element.style.borderRadius = "4px";
        this.element.style.top = "0px";
        this.element.style.right = "0px";
        this.element.style.overflow = "";
        this.element.style.zIndex = "11";
        this.element.onclick = function (e) {
            e.stopPropagation();
        };
        b = mr("", "", "176px");
        O(b, "divot");
        this.element.appendChild(b);
        b = document.createElement("div");
        O(b, "header");
        b.innerText = cj;
        b.style.boxSizing = "border-box";
        b.style.width = "100%";
        b.style.fontSize = "15px";
        b.style.fontWeight = "bold";
        b.style.padding = "6px";
        b.style.borderRadius = "4px 4px 0px 0px";
        this.element.appendChild(b);
        b = document.createElement("div");
        b.style.padding = "6px";
        b.style.fontSize = "13px";
        b.innerText = ve(a.A.j);
        this.element.appendChild(b);
        this.element.appendChild(this.Ph);
        K2(this);
        this.B = function () {
            G2(d);
        };
        this.element.onmousemove = function () {
            L2(d, 1e4);
        };
    }
    q(H2, w);
    H2.prototype.show = function (a) {
        this.hidden && (v("click", document, this.B), (this.hidden = !1));
        this.element.style.display = "block";
        if (a) {
            for (this.rd.value = ""; null !== this.Ph.firstChild; ) this.Ph.removeChild(this.Ph.firstChild);
            this.Ph.appendChild(this.label);
            this.Ph.appendChild(this.rd);
            this.Ph.appendChild(this.xf);
        }
        this.D();
        null !== this.rd.parentNode && this.rd.focus();
        L2(this, 1e4);
    };
    H2.prototype.D = function () {
        if (null !== this.element.parentNode) {
            var a = this.yT.getBoundingClientRect();
            this.element.style.top = "35px";
            this.element.style.left = a.left + fb().scrollLeft + (a.width - this.element.offsetWidth) / 2 - 40 + "px";
        }
    };
    function K2(a) {
        a.label.style.fontSize = "13px";
        a.label.style.fontWeight = "bold";
        a.label.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        a.label.style.margin = "6px";
        a.label.innerText = dj;
        O(a.rd, "textBox");
        a.rd.maxLength = 155;
        a.rd.style.width = "338px";
        a.rd.style.resize = "none";
        a.rd.style.fontSize = "13px";
        a.rd.style.margin = "6px";
        a.rd.style.padding = "4px";
        a.rd.style.borderWidth = "1px";
        a.rd.style.borderStyle = "solid";
        a.rd.style.borderRadius = "4px";
        a.rd.style.boxSizing = "border-box";
        a.rd.style.display = "block";
        a.rd.style.height = "81px";
        a.rd.value = "";
        a.rd.oninput = function () {
            M2(a);
        };
        O(a.xf, "submitBtn");
        a.xf.setAttribute("type", "submit");
        a.xf.style.fontSize = "12px";
        a.xf.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        a.xf.style.padding = "5px 8px 4px";
        a.xf.style.marginRight = "6px";
        a.xf.style.marginBottom = "10px";
        a.xf.style.borderRadius = "4px";
        a.xf.style.boxSizing = "border-box";
        a.xf.style.cursor = "pointer";
        a.xf.style.display = "inline-block";
        a.xf.style.cssFloat = "right";
        a.xf.value = "SUBMIT";
        a.xf.onclick = function (b) {
            b.stopImmediatePropagation();
            N2(a, a.rd.value);
        };
    }
    function N2(a, b) {
        E("tipping/add_comment/" + a.J + "/", { comment: b })
            .then(function () {
                for (; null !== a.Ph.firstChild; ) a.Ph.removeChild(a.Ph.firstChild);
                var c = document.createElement("div");
                O(c, "submittedMsg");
                c.style.width = "300px";
                c.style.margin = "25px";
                c.style.textAlign = "center";
                c.style.fontSize = "13px";
                c.innerText = ej;
                a.Ph.appendChild(c);
                a.ju = !1;
                L2(a, 5e3);
            })
            .catch(function (c) {
                r("Error rating model: " + c, "satisfactionScore.ts", "theatermodelib");
            });
    }
    function M2(a) {
        clearTimeout(a.Ax);
        a.ju = !0;
        a.Ax = window.setTimeout(function () {
            a.ju = !1;
            L2(a, 1e4);
        }, 3e4);
    }
    function L2(a, b) {
        a.ju ||
            (clearTimeout(a.Ax),
            (a.Ax = window.setTimeout(function () {
                G2(a);
            }, b)));
    }
    function G2(a) {
        a.hidden || (clearTimeout(a.Ax), Bb("click", document, a.B), (a.ju = !1), a.ph(), (a.element.style.display = "none"), (a.hidden = !0));
    }
    function O2() {
        HY.call(this, {
            nT: "more_like_this",
            oT: "ml",
            animate: ox,
            mY: !0,
            Ho: function () {
                return a.sT;
            },
            Xk: function (b) {
                return b.Za.Xk;
            },
        });
        var a = this;
        this.element.style.position = "static";
        this.element.style.overflow = "visible";
    }
    q(O2, HY);
    function P2(a) {
        w.call(this);
        var b = this;
        this.Yb = document.createElement("span");
        this.io = document.createElement("div");
        this.sy = document.createElement("div");
        void 0 !== a && (this.j = a);
        this.element.className = "MoreRooms";
        O(this.element, "defaultColor");
        this.element.style.minHeight = "395px";
        this.element.style.padding = "15px";
        this.element.style.width = "100%";
        this.element.style.boxSizing = "border-box";
        this.element.style.position = "static";
        this.element.style.margin = "10px 0";
        this.Yb.style.display = "block";
        this.Yb.style.fontSize = "12px";
        this.Yb.textContent = "loading...";
        this.element.appendChild(this.Yb);
        this.io.style.display = "none";
        this.io.style.fontSize = "14px";
        a = document.createElement("div");
        a.textContent = xk;
        a.style.marginBottom = "10px";
        this.sy.style.marginBottom = "10px";
        this.io.appendChild(this.sy);
        this.io.appendChild(a);
        this.element.appendChild(this.io);
        this.ui = new O2();
        this.G(this.ui);
        Nc.g(function (c) {
            b.Yb.style.display = "block";
            b.j = c.A.j;
            "block" === b.element.style.display && b.show();
        });
        G.g(function (c) {
            b.Yb.style.display = "block";
            b.j = c.A.j;
            "block" === b.element.style.display && b.show();
        });
    }
    q(P2, w);
    P2.prototype.Yr = function () {
        this.sy.textContent = "";
        this.io.style.display = "none";
    };
    P2.prototype.Ad = function (a) {
        var b = this;
        a = void 0 === a ? !1 : a;
        if (void 0 !== this.j) {
            var c = this.j;
            new Vd("MrLkThSrt3").Co();
            C("api/more_like/" + this.j + "/")
                .then(function (d) {
                    b.j === c &&
                        (a && b.Yr(),
                        (b.Yb.style.display = "none"),
                        M(new H(d.responseText), "has_recommendations") || ((b.sy.textContent = T(S("Sorry, we don't have any rooms similar to %(room)s yet."), { room: c }, !0)), (b.io.style.display = "block")),
                        (b.ui.sT = JSON.parse(d.responseText).rooms),
                        b.ui.il());
                })
                .catch(function (d) {
                    r("Failed to load more rooms like this for room " + b.j, "moreLikeThisTab.ts", "theatermodelib", d);
                });
        }
    };
    P2.prototype.show = function () {
        var a = this,
            b;
        this.Yb.style.display = "block";
        this.element.style.display = "block";
        this.Yr();
        this.Ad();
        clearInterval(this.eN);
        Cx(null !== (b = A.current.MS) && void 0 !== b ? b : 0);
        this.eN = window.setInterval(function () {
            a.Ad();
        }, 9e5);
    };
    P2.prototype.B = function () {
        this.element.style.display = "none";
        this.Yb.style.display = "none";
        clearInterval(this.eN);
        clearTimeout(vx);
    };
    function Q2(a) {
        w.call(this);
        var b = this;
        this.jh = document.createElement("span");
        this.Ci = document.createElement("span");
        this.element.appendChild(this.jh);
        this.element.appendChild(this.Ci);
        this.ha();
        this.element.style.width = "auto";
        this.element.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        this.element.style.fontSize = "12px";
        this.element.style.padding = "3px 8px 2px";
        this.element.style.position = "relative";
        this.element.style.top = "-4px";
        this.element.style.right = "1px";
        this.element.style.cssFloat = "right";
        this.element.style.borderRadius = "3px";
        this.element.style.cursor = "pointer";
        this.element.style.marginRight = "5px";
        this.element.style.height = "15px";
        this.ub = void 0 === A.current.V;
        void 0 !== a && (this.J = a);
        Oc.g(function (c) {
            b.J = c.J;
        });
        Nc.g(function (c) {
            b.J = c.J;
        });
        G.g(function (c) {
            b.J = c.l.j();
            b.ub = c.l.Fd;
        });
    }
    q(Q2, w);
    function R2(a, b) {
        return V(
            "span",
            { style: { height: "32px", padding: "8px", borderRadius: "4px", borderWidth: "1px", borderStyle: "solid", boxSizing: "border-box", position: "relative", display: "inline-block" }, onClick: b, colorClass: "button" },
            a
        );
    }
    var S2 = { jM: "numPushNotificationTimeouts2", zO: "pushNotificationTimeout2" };
    function T2(a) {
        a = void 0 === a ? S2 : a;
        QX.call(this, a);
        this.Ap = !1;
        this.Kl = "";
        this.yJ = this.iH = !1;
        this.rp = !0;
        this.Cp = this.ys = !1;
    }
    q(T2, QX);
    T2.prototype.ia = function () {
        function a() {
            !f.rp && f.Yj.Va.checked
                ? RX(
                      function () {
                          U2(f, !1);
                      },
                      function (x) {
                          d(x);
                          f.close();
                      }
                  )
                : U2(f, !1);
        }
        function b(x, D, J) {
            var I = x || f.Cp ? f.bh.value.trim().toLowerCase() : f.Kl;
            D && "" === I
                ? c(Qn)
                : f.iH && !J && f.Kl === I
                ? U2(f, !1)
                : e(x, I)
                      .then(function (ja) {
                          U2(f, D && "true" === ja);
                          !f.rp &&
                              f.Yj.Va.checked &&
                              RX(
                                  function () {},
                                  function (Yb) {
                                      d(Yb);
                                  }
                              );
                      })
                      .catch(function (ja) {
                          c(ja);
                      });
        }
        function c(x) {
            p.textContent = x;
            p.style.display = "block";
            !f.rp &&
                f.Yj.Va.checked &&
                RX(
                    function () {
                        O(f.Yj.element, "greenCheckbox");
                        f.ew.style.opacity = "0.5";
                        f.fw.style.cursor = "";
                        f.Yj.element.style.cursor = "";
                        f.rp = !0;
                        f.Yj.disable();
                        f.fw.textContent = Hp;
                        f.fw.onclick = function () {};
                    },
                    function () {
                        u.style.display = "block";
                    }
                );
        }
        function d(x) {
            void 0 === x || 400 === x.status ? R(Pp + " " + Qp) : (window.localStorage.removeItem(f.PE), window.localStorage.removeItem(f.HG));
        }
        function e(x, D) {
            D = void 0 === D ? "" : D;
            return f.ys || (!x && !f.Cp) || f.En || (f.iH && f.Kl === D) ? Fz(x) : Fz(x, D);
        }
        var f = this;
        QX.prototype.ia.call(this);
        var g = mr("", "", "240px", 1);
        O(g, "divot");
        this.bh = V("input", {
            style: {
                position: "relative",
                height: "22px",
                width: "278px",
                padding: "5px",
                margin: "8px 0px",
                fontFamily: "UbuntuRegular, Arial, Helvetica, sans-serif",
                borderWidth: "1px",
                borderStyle: "solid",
                borderRadius: "4px",
                display: "none",
            },
            colorClass: "textInput",
            onInput: function () {
                "" !== f.Kl && (f.EC.style.display = f.bh.value === f.Kl ? "inline-block" : "none");
            },
        });
        this.bh.placeholder = Jp;
        this.bh.dataset.pactionName = "Email Input";
        var h = { top: "4px", marginRight: "6px", cursor: "pointer" };
        this.Dn = new qv(16);
        this.Yj = new qv(16);
        Q(this.Dn, h);
        Q(this.Yj, h);
        v("click", this.Dn.element, function () {
            f.Dn.Va.checked ? f.En || ((f.bh.style.display = "block"), f.bh.focus()) : (f.bh.style.display = "none");
        });
        this.fw = V(
            "span",
            {
                style: { cursor: "pointer" },
                onClick: function () {
                    f.Yj.element.click();
                },
            },
            Gp
        );
        var m = V(
                "div",
                {
                    style: { cursor: "pointer", marginBottom: "6px", paddingLeft: "2px", fontSize: "12px" },
                    colorClass: "verifyLink",
                    onClick: function () {
                        E("emailvalidation/resend/", {})
                            .then(function () {
                                m.style.display = "none";
                                n.style.display = "block";
                                f.iH = !0;
                            })
                            .catch(function () {
                                R(Np);
                            });
                    },
                },
                Rn
            ),
            n = V("div", { style: { marginBottom: "6px", paddingLeft: "2px", display: "none", fontSize: "12px" } }, Lp),
            p = V("div", { style: { marginBottom: "6px", paddingLeft: "2px", display: "none" }, colorClass: "errorMessage" }),
            u = V("div", { style: { marginTop: "6px", paddingLeft: "2px", display: "none" }, colorClass: "errorMessage" }, Pp);
        this.EC = V("div", { style: { display: "none" } }, m, n);
        this.xJ = V(
            "div",
            { style: { position: "relative", margin: "4px 0px" } },
            this.Dn.element,
            V(
                "div",
                {
                    style: { width: "140px", display: "inline-block", cursor: "pointer" },
                    onClick: function () {
                        f.Dn.element.click();
                    },
                },
                V("span", null, vn),
                V("span", { style: { position: "relative", fontFamily: "UbuntuBold, Arial, Helvetica, sans-serif", fontSize: "10px", padding: "2px", borderRadius: "2px", marginLeft: "6px", bottom: "1px" }, colorClass: "popularBadge" }, Fp)
            )
        );
        this.xs = V("div", { style: { position: "relative" } }, this.xJ, V("div", null, this.bh), this.EC, p);
        this.ew = V("div", { style: { position: "relative", display: "none", marginBottom: "12px" } }, this.Yj.element, this.fw, u);
        this.prompt = V("span", { style: { position: "relative", lineHeight: "22px" } }, Ep, ":");
        this.HE = V(
            "span",
            {
                style: { position: "relative", marginLeft: "12px", cursor: "pointer" },
                onClick: function () {
                    f.fA.setTime(new Date().getTime() + 36e5 * Math.min(Math.pow(2, f.OE), 168));
                    window.localStorage.setItem(f.PE, f.OE.toString());
                    window.localStorage.setItem(f.HG, f.fA.toString());
                    f.close();
                },
            },
            Ei
        );
        this.CI = R2(Ip, function () {
            if (f.ys) b(!0, !1, !0);
            else if (f.Cp) b(f.Ap, !0, !1);
            else {
                var x = f.Dn.Va.checked,
                    D = x && !f.En,
                    J = x !== f.Ap;
                f.yJ || (!D && !J) ? a() : b(x, D, J);
            }
        });
        this.YH = V("div", { style: { position: "relative", marginBottom: "4px", cursor: "pointer" } }, this.CI, this.HE);
        this.QN = V("div", null, this.prompt, this.xs, this.ew, this.YH);
        this.TH = V("div", { style: { position: "relative", width: "100%", padding: "7px", fontSize: "14px", fontFamily: "UbuntuRegular, Arial, Helvetica, sans-serif", boxSizing: "border-box" } }, this.QN);
        this.element = V(
            "div",
            {
                style: { position: "absolute", width: "304px", top: "30px", right: "0px", borderWidth: "1px", borderStyle: "solid", borderRadius: "4px", boxShadow: "0px 4px 16px rgba(0, 0, 0, 0.08)", zIndex: 1001 },
                id: "FollowSettingsModal",
                colorClass: "whiteModal",
            },
            this.TH,
            g
        );
    };
    T2.prototype.uB = function () {
        return QX.prototype.uB.call(this) && null === window.localStorage.getItem("notificationModalOptionsSaved");
    };
    function U2(a, b) {
        a.QN.style.display = "none";
        var c = { marginBottom: a.Cp || a.ys ? "7px" : "16px", lineHeight: "22px" };
        b = b ? V("div", { style: c, dangerouslySetInnerHTML: { __html: Mp } }) : V("div", { style: c }, Kp);
        a.TH.appendChild(
            V(
                "div",
                null,
                b,
                R2(Dj, function () {
                    a.close();
                })
            )
        );
        window.localStorage.setItem("notificationModalOptionsSaved", "true");
    }
    function V2(a, b) {
        w.call(this);
        var c = this;
        this.Ai = a;
        this.element = document.createElement("div");
        this.UJ = Promise.resolve();
        this.Gc = new W2(this, b);
        this.Xw = new X2(this, b);
        this.mv = new Y2(this, b);
        this.element.style.display = "inline-block";
        this.element.style.cssFloat = "right";
        this.element.style.position = "relative";
        this.element.style.width = "auto";
        this.element.style.right = "1px";
        this.Cf = nw({ content: Xi, qg: !0, width: 220, Rc: 0, wd: "170px", borderWidth: 1 });
        P(this.Cf, "tooltip");
        O(this.Cf, "whiteModal");
        this.Cf.style.lineHeight = "22px";
        this.Cf.style.fontSize = "14px";
        this.Cf.style.borderWidth = "1px";
        this.Cf.style.borderRadius = "4px";
        this.Cf.style.padding = "8px 0px 8px 8px";
        this.Cf.style.boxShadow = "0px 4px 16px rgba(0, 0, 0, 0.08)";
        a.appendChild(this.Cf);
        this.element.appendChild(this.Gc.element);
        this.element.appendChild(this.Xw.element);
        this.element.appendChild(this.mv.element);
        (function () {
            G.g(function (d) {
                d.A.j !== b && Z2(c);
            });
        })();
    }
    q(V2, w);
    function Z2(a) {
        a.Cf.style.display = "none";
    }
    function $2(a) {
        a.Gc.element.style.display = "inline";
        a.mv.element.style.display = "none";
        a.Xw.element.style.display = "none";
    }
    function a3(a, b) {
        a.Gc.element.style.display = "none";
        a.mv.element.style.display = "inline";
        b3(a.Xw, b);
        a.Xw.element.style.display = "inline";
    }
    V2.prototype.expand = function () {
        this.Gc.expand();
        this.mv.expand();
    };
    V2.prototype.collapse = function () {
        this.Gc.collapse();
        this.mv.collapse();
    };
    V2.prototype.D = function () {
        var a = this.element.getBoundingClientRect();
        this.Cf.style.top = this.Ai.offsetHeight + 8 + "px";
        this.Cf.style.left = a.left + fb().scrollLeft - this.Cf.offsetWidth + this.element.clientWidth - 16 + "px";
    };
    function c3(a, b) {
        a.UJ = a.UJ.then(b);
    }
    function Y2(a, b) {
        Q2.call(this, b);
        var c = this;
        Zd("RmFllwBtn")
            ? ((b = aR()), this.element.appendChild(b), (this.element.style.marginRight = "0px"), (this.element.style.right = ""))
            : (O(this.element, "unfollowButton"),
              (this.Ci.innerText = Yi),
              (this.element.style.marginRight = "0px"),
              (this.element.style.right = ""),
              (this.element.style.borderRadius = "3px 0px 0px 3px"),
              (this.element.style.borderWidth = "1px"),
              (this.element.style.borderStyle = "solid"));
        this.element.onclick = function () {
            c3(a, function () {
                return Hz(c.J, void 0, "FollowButton");
            });
        };
        this.element.onmouseenter = function () {
            a.Cf.style.display = "block";
            a.D();
        };
        this.element.onmouseleave = function () {
            Z2(a);
        };
    }
    q(Y2, Q2);
    Y2.prototype.expand = function () {
        this.Ci.innerText = Yi;
    };
    Y2.prototype.collapse = function () {
        this.Ci.innerText = "-";
    };
    function W2(a, b) {
        function c() {
            var e = d.J,
                f = new T2();
            if (f.uB()) {
                var g = window.isBrowserNotificationSupported,
                    h = window.isSubscribedToBrowserNotifications,
                    m = void 0 === g || !0 !== g() || void 0 === h || !Qa();
                Dz()
                    .then(function (n) {
                        function p() {
                            (new Vd("EmlTltp").active && D && x) ||
                                ((f.Ap = x),
                                (f.En = D),
                                (f.Kl = u),
                                f.Dn.$q(f.Ap),
                                (f.bh.value = f.Kl),
                                "" === f.Kl || f.En || (f.EC.style.display = "inline-block"),
                                f.Ap && (f.En ? ((f.xs.style.display = "none"), (f.yJ = !0)) : (f.bh.style.display = "block")),
                                new Vd("EmlTltp").active &&
                                    ((f.ew.style.display = "none"),
                                    (f.rp = !0),
                                    P(f.element, "whiteModal"),
                                    O(f.element, "grayModal"),
                                    O(f.HE, "notNow"),
                                    (f.prompt.textContent = "" + Up),
                                    Q(f.HE, { height: "32px", borderWidth: "1px", borderStyle: "solid", borderRadius: "4px", padding: "8px", boxSizing: "border-box", display: "inline-block" }),
                                    (f.Cp = !f.En),
                                    (f.ys = f.En && !f.Ap),
                                    f.Cp
                                        ? ((f.xJ.style.display = "none"),
                                          (f.bh.style.margin = "4px 0px 6px"),
                                          (f.bh.style.display = "block"),
                                          f.xs.insertBefore(V("div", { style: { fontSize: "12px", marginTop: "8px" } }, vn), f.xs.firstChild))
                                        : f.ys && ((f.CI.textContent = Vp), (f.YH.style.marginTop = "6px"), (f.xs.style.display = "none"))),
                                d.G(f, a.element),
                                f.closed.once(function () {
                                    d.removeChild(f);
                                }));
                        }
                        var u = n.email,
                            x = n.VA,
                            D = n.FA,
                            J = n.VA && n.FA;
                        G.g(function (I) {
                            I.A.j !== e && f.close();
                        });
                        m
                            ? J || p()
                            : (h(!1, function () {
                                  f.ew.style.display = "block";
                                  f.rp = !1;
                                  p();
                              }),
                              h(!0, function () {
                                  J || p();
                              }));
                    })
                    .catch(function (n) {
                        r("Error fetching email settings: " + n, "FollowUnfollowSection.ts", "common");
                    });
            }
        }
        Q2.call(this, b);
        var d = this;
        Zd("RmFllwBtn")
            ? ((b = V(
                  "div",
                  { style: { height: "1.2em", width: "1.2em", display: "inline-block", position: "relative" }, colorClass: "grayFollowerStarSvg" },
                  V(
                      "svg",
                      { xmlns: "http://www.w3.org/2000/svg", viewBox: "8 7 48 46" },
                      V("g", { transform: "translate(0,-952.36218)" }, V("path", { d: "M32,959.4l8,14.3l16,3.2L44.9,989l1.9,16.3L32,998.4l-14.8,6.9l1.9-16.3L8,976.9l16-3.2L32,959.4z" }))
                  )
              )),
              this.element.appendChild(b))
            : (O(this.element, "followButton"), (this.Ci.innerText = Zi));
        this.element.style.marginRight = "0px";
        this.element.style.right = "";
        this.element.onclick = function () {
            c3(a, function () {
                return Gz(d.J, void 0, "FollowButton");
            });
            d.ub || c();
        };
        this.element.onmouseenter = function () {
            a.Cf.style.display = "block";
            a.D();
        };
        this.element.onmouseleave = function () {
            Z2(a);
        };
    }
    q(W2, Q2);
    W2.prototype.expand = function () {
        this.Ci.innerText = Zi;
    };
    W2.prototype.collapse = function () {
        this.Ci.innerText = "+";
    };
    function X2(a, b) {
        Q2.call(this, b);
        var c = this;
        O(this.jh, "notification-btn-icon");
        O(this.jh, "static");
        this.jh.style.width = "20px";
        this.jh.style.height = "20px";
        this.jh.style.display = "inline-block";
        this.jh.style.backgroundRepeat = "no-repeat";
        this.jh.style.marginLeft = Zd("RmFllwBtn") ? "1px" : "";
        b3(this, "smart");
        this.Ci.innerText = "";
        O(this.element, "FollowNotificationButton");
        this.element.style.padding = "0px 2px 5px 2px";
        this.element.style.marginRight = "0px";
        this.element.style.right = "";
        Zd("RmFllwBtn")
            ? ((this.element.style.borderWidth = "1px 1px 1px 1px"), (this.element.style.borderRadius = "3px"), (this.element.style.marginLeft = "4px"))
            : ((this.element.style.borderWidth = "1px 1px 1px 0"), (this.element.style.borderRadius = "0 3px 3px 0"));
        this.element.style.borderStyle = "solid";
        Az.g(function (d) {
            c.J === d.J && b3(c, d.eh);
        });
        this.element.onclick = function () {
            void 0 === c.Sb
                ? ((c.Sb = new d3(c.eh)),
                  c.Sb.Wq.g(function (d) {
                      F("FollowFrequencyBellClicked", { previous_frequency: c.eh, frequency: d });
                      c.eh = d;
                      c3(a, function () {
                          return Cz(c.J, d);
                      });
                  }),
                  (c.Sb.element.style.marginTop = "36px"),
                  c.Sb.toggle({ top: -7, left: a.element.offsetWidth - 117 }),
                  c.G(c.Sb, a.element))
                : e3(c.Sb);
        };
        (function () {
            var d = c.J;
            G.g(function (e) {
                var f;
                e.A.j !== d && (null === (f = c.Sb) || void 0 === f ? void 0 : f.B());
            });
        })();
    }
    q(X2, Q2);
    X2.prototype.expand = function () {};
    X2.prototype.collapse = function () {};
    function b3(a, b) {
        a.eh = b;
        a.jh.className = "";
        O(a.jh, "notification-btn-icon");
        O(a.jh, "static");
        O(a.jh, a.eh.toString());
        void 0 !== a.Sb && f3(a.Sb, b, !1);
    }
    function g3(a) {
        switch (a) {
            case "all":
                return ph;
            case "smart":
                return qh;
            case "none":
                return rh;
        }
    }
    function h3(a, b) {
        w.call(this);
        var c = this;
        this.wq = a;
        this.data = b;
        O(this.element, "notification-item");
        this.element.style.padding = "4px 0 4px 0";
        this.element.style.cursor = "pointer";
        this.element.style.boxSizing = "border-box";
        this.element.style.position = "relative";
        this.element.style.overflow = "visible";
        this.element.style.borderWidth = "1px";
        this.element.style.borderStyle = "solid";
        this.element.style.borderTop = "0 none";
        this.element.style.borderBottom = "0 none";
        this.icon = document.createElement("span");
        O(this.icon, "notification-btn-icon");
        O(this.icon, b.toString());
        this.icon.style.padding = "0 8px 0 12px";
        this.icon.style.width = "20px";
        this.icon.style.height = "20px";
        this.icon.style.verticalAlign = "middle";
        this.icon.style.display = "inline-block";
        this.icon.style.backgroundRepeat = "no-repeat";
        this.icon.style.backgroundPosition = "center center";
        this.icon.title = g3(b);
        this.element.appendChild(this.icon);
        this.name = document.createElement("span");
        this.name.style.margin = "0px";
        this.name.style.padding = "0px 4px 0px px";
        this.name.innerText = g3(b);
        this.element.appendChild(this.name);
        v("click", this.element, function () {
            c.wq(b);
        });
    }
    q(h3, w);
    h3.prototype.select = function () {
        O(this.element, "selected");
        this.name.style.fontWeight = "bold";
        this.name.style.fontFamily = "UbuntuBold, Helvetica, Arial, sans-serif";
    };
    h3.prototype.yn = function () {
        P(this.element, "selected");
        this.name.style.fontWeight = "normal";
        this.name.style.fontFamily = "UbuntuNormal, Helvetica, Arial, sans-serif";
    };
    function d3(a) {
        Xu.call(this);
        var b = this;
        this.Am = a;
        this.width = 120;
        this.visible = !1;
        this.Wq = new y("selectionChange");
        var c = [];
        O(this.element, "notificationBtnMenu");
        this.element.style.padding = "0px";
        this.element.style.width = this.width + "px";
        this.element.style.textAlign = "left";
        this.element.style.fontSize = "11px";
        this.element.style.lineHeight = "14px";
        this.element.style.borderRadius = "4px";
        this.S.style.zIndex = "1002";
        this.element.style.zIndex = "1003";
        this.element.style.overflow = "visible";
        this.element.style.removeProperty("height");
        var d = document.createElement("div");
        O(d, "title");
        d.innerText = oh;
        d.style.padding = "12px";
        d.style.boxSizing = "border-box";
        d.style.position = "relative";
        d.style.overflow = "visible";
        d.style.borderWidth = "1px";
        d.style.borderStyle = "solid";
        d.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        d.style.fontSize = "15px";
        d.style.borderTopWidth = "1px";
        d.style.borderTopLeftRadius = "4px";
        d.style.borderTopRightRadius = "4px";
        this.element.appendChild(d);
        i3(this, !1);
        d = l(["all", "smart", "none"]);
        for (var e = d.next(); !e.done; e = d.next()) (e = e.value), (e = new h3(this.wq.bind(this), e)), this.G(e), c.push(e);
        i3(this, !0);
        this.SR = c;
        f3(this, a, !1);
        this.fc.g(function () {
            b.B();
        });
    }
    q(d3, Xu);
    function i3(a, b) {
        var c = document.createElement("div");
        O(c, "bookend");
        c.style.height = "4px";
        c.style.boxSizing = "border-box";
        c.style.position = "relative";
        c.style.borderWidth = "1px";
        c.style.borderStyle = "solid";
        c.style.borderTop = "0 none";
        b ? ((c.style.borderBottomLeftRadius = "4px"), (c.style.borderBottomRightRadius = "4px"), (c.style.borderBottomWidth = "1px"), (c.style.borderBottomStyle = "solid"), (c.style.paddingTop = "4px")) : (c.style.borderBottom = "0 none");
        a.element.appendChild(c);
    }
    k = d3.prototype;
    k.isVisible = function () {
        return this.visible;
    };
    k.show = function (a) {
        this.isVisible() || ((this.element.style.top = a.top + "px"), (this.element.style.left = a.left + "px"), e3(this), this.R());
    };
    function e3(a) {
        a.isVisible() || ((a.element.style.display = "inline-block"), a.xh(), (a.visible = !0));
    }
    k.B = function () {
        this.isVisible() && ((this.visible = !1), (this.element.style.display = "none"), this.Lb());
    };
    k.toggle = function (a) {
        this.isVisible() ? this.B() : this.show(a);
    };
    function f3(a, b, c) {
        b !== a.Am && ((a.Am = b), c && a.Wq.h(b));
        a = l(a.SR);
        for (c = a.next(); !c.done; c = a.next()) (c = c.value), c.data === b ? c.select() : c.yn();
    }
    k.wq = function (a) {
        this.B();
        f3(this, a, !0);
    };
    function j3() {
        Q2.call(this);
        var a = this;
        O(this.element, "fanclubButton");
        this.Di = document.createElement("a");
        this.Ci.appendChild(this.Di);
        this.Di.innerText = Fo;
        G.g(function (b) {
            function c() {
                a.element.onmouseover = function () {
                    a.Di.style.textDecoration = "underline";
                    a.element.style.cursor = "pointer";
                };
                a.element.onmouseleave = function () {
                    a.Di.style.textDecoration = "";
                };
                a.element.onmousedown = function () {
                    a.Di.style.textDecoration = "";
                };
            }
            var d;
            if (b.A.aF || (!b.A.pj && b.A.Sl)) (a.Di.href = "/fanclub/join/" + a.J + "/?source=" + (null === (d = A.current) || void 0 === d ? void 0 : d.Ub.SUPPORTER_SOURCE_JOIN_FAN_CLUB_BUTTON)), (a.Di.target = "_blank");
            b.A.pj
                ? ((a.Di.innerText = Go), (a.Di.style.textTransform = "uppercase"), (a.element.style.cursor = "default"), b.A.aF && c())
                : ((a.Di.innerText = Fo), (a.Di.style.textTransform = "uppercase"), (a.element.style.cursor = "pointer"), c());
            b.A.Sl ? a.Ja() : a.ha();
        });
    }
    q(j3, Q2);
    j3.prototype.expand = function () {
        this.Ci.style.display = "";
    };
    j3.prototype.collapse = function () {
        this.Ci.style.display = "none";
    };
    var k3 = {},
        l3 = ((k3.Bio = "Bio"), (k3["Contest Stats"] = "ContestStats"), (k3["Pics & Videos"] = "Pics&Videos"), (k3.Share = "Share"), (k3["More Rooms Like This"] = "MoreRoomLikeThis"), k3);
    function m3() {
        v2.call(this);
        var a = this;
        this.GH = !1;
        this.gJ = "Bio";
        this.element.style.minHeight = "200px";
        this.Lp = new V2(this.Ai.element);
        this.Lp.element.dataset.paction = "BroadcasterFeedback";
        Hb(this.Ai, this.Lp, this.Lm);
        this.DJ = new j3();
        this.DJ.element.dataset.paction = "BroadcasterFeedback";
        Hb(this.Ai, this.DJ, this.Lm);
        this.yj = new F2(this.Ai.element);
        this.yj.element.dataset.paction = "BroadcasterFeedback";
        Hb(this.Ai, this.yj, this.Lm);
        var b = new i2(!0);
        this.Ff("Bio", aj, new aM());
        this.Ff("Pics & Videos", ki, b);
        xe.jG && !Zd("RmSCSTbs2") && this.Ff("Contest Stats", bj, new B2());
        this.Ff("More Rooms Like This", wk, new P2());
        Zd("RmSCSTbs") || this.Ff("Share", $i, new n1());
        this.hi(this.gJ);
        var c = this.LB();
        this.Lm.G(c);
        this.Lm.element.dataset.paction = "RoomTabs";
        n3(this);
        nv.g(function (d) {
            a.hi("Pics & Videos", d);
        });
        Nc.g(function (d) {
            var e;
            a.J = d.J;
            a.ub = void 0 === d.V;
            a.Sn(a.J === (null === (e = d.V) || void 0 === e ? void 0 : e.username), d.A);
            b.Sn(a.J);
        });
        G.g(function (d) {
            a.J = d.l.j();
            a.ub = d.l.Fd;
            a.Sn(a.J === d.l.username(), d.A);
            b.Sn(a.J);
        });
        Az.g(function (d) {
            d.J === a.J && (d.ij ? a3(a.Lp, d.eh) : $2(a.Lp));
        });
        this.GH = !0;
    }
    q(m3, v2);
    function n3(a) {
        var b = a.DB(),
            c = Bc(window.location.search).tab,
            d = { bio: "Bio", contest: "Contest Stats", photos: "Pics & Videos", gallery: "Pics & Videos" };
        c = void 0 === c ? void 0 : d[c];
        void 0 !== c ? a.hi(c) : void 0 !== b && a.hi(b);
    }
    k = m3.prototype;
    k.Sn = function (a, b) {
        this.ub || !xe.jG ? z2(this, "Share") : A2(this, "Share");
        a ? (z2(this, "More Rooms Like This"), "More Rooms Like This" === this.Uj && this.hi("Bio")) : A2(this, "More Rooms Like This");
        "offline" === b.sa && ((a = Bc(window.location.search).utm_content), void 0 !== a && Bz.includes(a) && this.hi("More Rooms Like This"));
        b.ij ? a3(this.Lp, b.eh) : $2(this.Lp);
    };
    k.LB = function () {
        var a = new BD();
        x2(this, a, "", !1);
        Q(a, { display: "inline-block", height: "24px", width: "32px" });
        O(a, "tabLink");
        a.ha();
        Q(a.jd, { padding: "10px 1px", borderWidth: "1px", borderStyle: "solid" });
        O(a.jd, "room-tabs-dropdown-border");
        a.yi.element.style.width = "15px";
        return a;
    };
    k.D = function () {
        this.yj.D();
    };
    k.hi = function (a, b, c) {
        var d = this.Uj;
        v2.prototype.hi.call(this, a, b, c);
        this.GH && d !== a && F("RoomTabClicked", { tabName: l3[a] });
    };
    k.DB = function () {
        if (Qa()) {
            var a = v2.prototype.DB.call(this);
            if (void 0 !== a) return a;
        }
    };
    k.Cz = function (a) {
        Qa() && v2.prototype.Cz.call(this, a);
    };
    function o3(a) {
        w.call(this);
        var b = this;
        O(this.element, "genderTabs");
        O(this.element, "bgColor");
        O(this.element, "navigationAlt2BgImage");
        O(this.element, "navigationAlt2BgColor");
        O(this.element, "tabSectionBorder");
        Q(this, { position: "relative", overflow: "visible", padding: "0 10px 0 32px", backgroundPosition: "bottom", boxSizing: "border-box", height: "27px", marginTop: "11px", font: "1em 'UbuntuRegular',Arial,Helvetica,sans-serif" });
        this.element.classList.add("top-section");
        iw(this, "paddingLeft", 8, 32);
        iw(this, "paddingRight", 4, 16);
        this.dg = new AD();
        Q(this.dg, { position: "static", overflow: "hidden", height: "27px" });
        var c = new AD(this.dg);
        Q(c, { overflow: "visible", position: "relative", height: "27px", width: "100%" });
        this.Mr = new l1("" + je(a), void 0, !0);
        this.Mr.element.title = wc(a) + "'s Cam";
        this.Mr.element.dataset.pactionName = "ActiveRoom";
        this.dg.G(this.Mr);
        new Vd("DscvrHrz1").active || new Vd("DscvrHrz2").active || new Vd("DscvrVrt").active || new Vd("GdrChkbx6").active
            ? (this.dg.G(new l1(uh, "/?g=f")), this.dg.G(new l1(xh, "/?g=m")), this.dg.G(new l1(Ch, "/?g=c")), this.dg.G(new l1(Ah, "/?g=t")))
            : (this.dg.G(new l1(uh, "/female-cams/")), this.dg.G(new l1(xh, "/male-cams/")), this.dg.G(new l1(Ch, "/couple-cams/")), this.dg.G(new l1(Ah, "/trans-cams/")));
        this.Ps = new BD(new l1(CD).element);
        Q(this.Ps.jd, { width: "108px", paddingTop: "10px", paddingBottom: "5px" });
        this.Ps.element.style.fontSize = "13px";
        this.Ps.yi.element.style.width = "10px";
        this.dg.G(this.Ps);
        this.G(c);
        G.g(function (d) {
            p3(b, d.A.j);
        });
    }
    q(o3, w);
    function p3(a, b) {
        a.Mr.element.innerText = wc(b) + "'s Cam";
        a.Mr.element.title = wc(b) + "'s Cam";
    }
    da.Object.defineProperties(o3.prototype, {
        hT: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return this.dg.lastChild();
            },
        },
    });
    function q3(a) {
        w.call(this);
        this.mP = a;
        this.element.style.display = "none";
        this.element.style.position = "static";
        this.element.style.margin = "21px 19px";
        this.element.style.width = "";
        O(this.element, "defaultColor");
        a = document.createElement("h1");
        a.innerText = Fi;
        a.style.fontFamily = "'UbuntuRegular', Arial, Helvetica, sans-serif";
        a.style.fontWeight = "700";
        this.element.appendChild(a);
    }
    q(q3, w);
    q3.prototype.show = function (a, b) {
        return Wy(this, function d() {
            var e = this,
                f;
            return Aa(d, function (g) {
                if (1 == g.aa)
                    return (
                        (f = e),
                        (e.j = a),
                        (e.YJ = "api/ts/chat/roomloginform/" + e.j + "/"),
                        pd()
                            ? (g = sa(
                                  g,
                                  new Promise(function (h) {
                                      return window.setTimeout(h, 500);
                                  }),
                                  2
                              ))
                            : ((g.aa = 2), (g = void 0)),
                        g
                    );
                if (4 != g.aa) {
                    if (
                        Wu(Re(wc(e.j)), !1, function () {
                            window.location.href = "/";
                        })
                    )
                        return g.return();
                    Jb(e);
                    if (void 0 !== b) {
                        r3(e, b);
                        g.aa = 4;
                        return;
                    }
                    return sa(
                        g,
                        C(e.YJ).then(function (h) {
                            r3(f, h.responseText);
                        }),
                        4
                    );
                }
                e.Ja();
                g.aa = 0;
            });
        });
    };
    function r3(a, b) {
        try {
            var c = OM(b);
            a.form = new s3(
                c,
                a.YJ,
                function () {
                    a.mP ? (Hr.h(a.j), a.ha()) : (window.location.href = "/" + a.j + "/");
                },
                function (d) {
                    d = JSON.parse(d.xhr.responseText);
                    var e = !1;
                    void 0 !== d.extra && void 0 !== d.extra.requires_captcha && (e = d.extra.requires_captcha);
                    e !== a.form.data.Rk.Na.hasOwnProperty("prove_you_are_human") && (a.removeChild(a.form), a.show(a.j));
                }
            );
            a.form.mb.value = Gi;
            a.G(a.form);
        } catch (d) {
            r("Error parsing form data", "passwordPrompt.ts", "theatermodelib", { error: d, formdata: b });
        }
    }
    function s3(a, b, c, d) {
        QM.call(this, a, b, { Vt: c, My: d });
    }
    q(s3, QM);
    function t3(a, b, c) {
        BD.call(this, b, c);
        this.AI = a;
    }
    q(t3, BD);
    t3.prototype.Yq = function () {
        void 0 !== this.AI && this.AI() ? this.La() || ((this.vj = ID(this)), (this.Uu = []), GD(this)) : this.La() && ((this.vj = []), FD(this), (this.Uu = ID(this)));
    };
    t3.prototype.onToggle = function (a) {
        a.vb && this.Yq();
    };
    t3.prototype.tf = function () {};
    t3.prototype.TJ = function () {};
    function u3() {
        var a = this;
        this.EB = !0;
        this.uf = new Set();
        this.IG = 0;
        this.tt = new Vd("NCRecAIv4").active;
        this.next = dt(function () {
            return Wy(a, function c() {
                var d = this,
                    e,
                    f,
                    g,
                    h,
                    m,
                    n,
                    p,
                    u,
                    x,
                    D;
                return Aa(c, function (J) {
                    switch (J.aa) {
                        case 1:
                            return (
                                (d.EB = !1),
                                (e = new URLSearchParams(window.location.search)),
                                e.set("genders", d.Cw),
                                d.tt ? e.set("after", d.ms) : e.set("after", d.ck),
                                new Vd("NCRecAIv4").Co(),
                                sa(J, C("api/ts/roomlist/next-room/?" + e.toString()), 2)
                            );
                        case 2:
                            f = J.td;
                            g = new H(f.responseText);
                            h = JSON.parse(Zc(g, "rooms"));
                            m = v3(d, h);
                            if (void 0 !== m) return J.return(m);
                            if (!(0 < h.length)) {
                                J.aa = 3;
                                break;
                            }
                            if (!d.tt) {
                                d.uf = new Set();
                                d.uf.add(d.ck);
                                J.aa = 4;
                                break;
                            }
                            n = w3(d);
                            if (!n) {
                                J.aa = 4;
                                break;
                            }
                            e.set("after", d.ms);
                            return sa(J, C("api/ts/roomlist/next-room/?" + e.toString()), 6);
                        case 6:
                            if (((p = J.td), (u = new H(p.responseText)), (x = JSON.parse(Zc(u, "rooms"))), (D = v3(d, x)), void 0 !== D)) return J.return(D);
                        case 4:
                            return J.return(h[h.length - 1]);
                        case 3:
                            return J.return(void 0);
                    }
                });
            });
        });
        this.listener = G.g(
            function (b) {
                a.ck = b.l.j();
                a.Cw = dx(b.A.zu);
                a.uf.add(a.ck);
                a.tt &&
                    (a.EB ? ((a.ms = a.zL = a.ck), (a.iz = []), (a.Lq = 0)) : (a.EB = !0),
                    0 !== a.IG && window.clearTimeout(a.IG),
                    (a.IG = window.setTimeout(function () {
                        a.ms = a.zL = a.ck;
                        a.Lq = 0;
                    }, 3e4)));
            },
            !1,
            !0
        );
        this.tt && ((this.iz = []), (this.Lq = 0));
    }
    u3.prototype.dispose = function () {
        this.listener.removeListener();
    };
    function v3(a, b) {
        for (var c = l(b), d = c.next(); !d.done; d = c.next())
            if (((d = d.value), !a.uf.has(d))) return a.tt && (a.zL === a.ms ? (a.iz.splice(a.Lq, 0, d), (a.Lq += 1)) : (a.iz.push(d), (a.Lq = 0)), d === b[b.length - 1] && w3(a)), a.uf.add(d), d;
    }
    function w3(a) {
        var b = a.iz.shift();
        if (void 0 !== b) return (a.ms = b), !0;
        a.uf = new Set();
        a.uf.add(a.ck);
        return !1;
    }
    function x3(a, b) {
        function c(e) {
            if (void 0 === d.F) return !1;
            if (d.F.N instanceof EQ)
                for (var f = l(d.F.element.getElementsByClassName("vjs-volume-panel")), g = f.next(); !g.done; g = f.next()) {
                    g = g.value;
                    if (e === g) return !0;
                    g = l(g.getElementsByTagNameNS("*", "*"));
                    for (var h = g.next(); !h.done; h = g.next()) if (e === h.value) return !0;
                }
            return !1;
        }
        w.call(this);
        var d = this;
        this.$h = a;
        this.F = b;
        this.Rq = 15e3;
        this.Zl = !1;
        this.Mq = new u3();
        this.Sq = !1;
        Q(this, { height: "27px", width: "207px", top: "1px", textAlign: "right", position: "relative", cssFloat: "right", overflow: "visible", fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif" });
        this.Yc = new JD(new lJ().anchor);
        this.Yc.im.g(function (e) {
            e ? ((d.Yc.element.style.padding = "7px 3px 7px 0px"), (d.Yc.element.style.right = "0")) : ((d.Yc.element.style.padding = "7px 3px 7px 5px"), (d.Yc.element.style.right = "5px"));
        });
        this.Yc.element.href = "#";
        this.Yc.element.style.display = "inline-block";
        this.Yc.element.style.padding = "7px 3px 7px 5px";
        this.Yc.element.style.textDecoration = "none";
        this.Yc.element.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        this.Yc.element.style.fontSize = "10.008px";
        this.Yc.element.style.position = "relative";
        this.Yc.element.style.backgroundColor = "transparent";
        O(this.Yc.element, "tabActiveColor");
        O(this.Yc.element, "transparentBg");
        sd(this.Yc.element);
        this.Yc.element.onclick = function (e) {
            e.preventDefault();
            e.stopPropagation();
            d.Zl || ((e = Bc(window.location.search)), (e.next_in = (d.Rq / 1e3).toString()), (e = Ac(e)), window.history.replaceState({ type: "room", room: d.Qh.j }, d.Qh.Tb, "./?" + e), y3(d));
            z3(d, !0, !0);
        };
        this.Pq = document.createElement("span");
        this.Pq.innerText = fj;
        this.Yc.element.appendChild(this.Pq);
        this.$b = new JD(new lJ().anchor);
        this.$b.im.g(function (e) {
            e ? ((d.$b.element.style.padding = "6px 3px 6px 0px"), (d.$b.element.style.borderWidth = "0")) : ((d.$b.element.style.padding = "6px 3px 6px 5px"), (d.$b.element.style.borderWidth = "1px"));
        });
        this.$b.element.href = "#";
        this.$b.element.style.display = "inline-block";
        this.$b.element.innerText = gj + " (Ctrl+/)";
        this.$b.element.style.textDecoration = "none";
        this.$b.element.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
        this.$b.element.style.fontSize = "10.008px";
        this.$b.element.style.position = "relative";
        O(this.$b.element, "nextCamBgColor");
        O(this.$b.element, "tabBorder");
        O(this.$b.element, "tabActiveColor");
        this.$b.element.style.borderWidth = "1px";
        this.$b.element.style.borderStyle = "solid";
        this.$b.element.style.borderBottom = "0";
        this.$b.element.style.borderRadius = "4px 4px 0 0";
        sd(this.$b.element);
        this.$b.element.onclick = function (e) {
            e.preventDefault();
            d.Zl ? A3(d) : z3(d, !1, !0);
        };
        this.element.dataset.paction = "NextCam";
        this.G(this.Yc);
        this.G(this.$b);
        this.Qq = new t3(
            function () {
                a: {
                    if (void 0 !== d.parent) {
                        var e = ED(d.$h.Ps);
                        if (void 0 !== e) {
                            e = e.element;
                            e = 240 > d.$h.element.offsetWidth - (e.offsetLeft + e.offsetWidth + d.$h.hT.element.clientWidth + 40);
                            break a;
                        }
                    }
                    e = !1;
                }
                return e;
            },
            B3(),
            !0
        );
        this.G(this.Qq);
        Q(this.Qq.jd, { width: "127px", padding: "8px 12px" });
        v(
            "keydown",
            document,
            function (e) {
                "Control" !== e.key && "Meta" !== e.key && "OS" !== e.key && (("/" !== e.key && 191 !== e.which) || (!e.ctrlKey && !e.metaKey) ? d.Zl && !d.Sq && A3(d) : (e.preventDefault(), z3(d, !1, !0)));
            },
            !0
        );
        Nc.g(function (e) {
            d.Bc(e);
        });
        G.g(function (e) {
            d.Bc(e);
            d.Qh = e.A;
            e = Bc(window.location.search);
            "next_in" in e && ((e = parseInt(e.next_in)), isFinite(e) && !isNaN(e) && (1 <= e && (d.Rq = 1e3 * e), C3(d), D3(d), (d.Zl = !0), d.R()));
        });
        v(
            "mousedown",
            document,
            function (e) {
                var f;
                (f = d.Sq) || (f = c(e.target) || (void 0 === d.F ? !1 : d.F.N instanceof xQ ? e.target === d.F.N.Up() : !1) || (void 0 === d.F ? !1 : d.F.Ra.pI(e.target))) || ((f = e.target), (f = f === d.Yc.element || f === d.Pq));
                f || e.target === d.Qq.element || (d.Zl && e.target !== d.$b.element && A3(d));
            },
            !1
        );
    }
    q(x3, w);
    x3.prototype.Bc = function (a) {
        this.$b.element.href = "/next/" + a.A.j + "/";
        this.Yc.element.href = "/next/" + a.A.j + "/?next_in=15";
        this.Qh = a.A;
        a = Bc(window.location.search);
        "next_in" in a && ((a = parseInt(a.next_in)), isFinite(a) && !isNaN(a) && (1 <= a && (this.Rq = 1e3 * a), C3(this), D3(this), (this.Zl = !0), this.R()));
    };
    function B3() {
        var a = document.createElement("div");
        a.style.display = "none";
        a.style.cursor = "pointer";
        a.style.padding = "7px 0";
        a.style.width = "70px";
        a.innerText = hj;
        a.style.textDecoration = "none";
        a.style.fontSize = "10.008px";
        a.style.position = "relative";
        a.style.borderWidth = "1px";
        a.style.borderStyle = "solid";
        O(a, "nextCamBgColor");
        O(a, "tabBorder");
        O(a, "tabActiveColor");
        a.style.borderBottom = "0";
        a.style.borderRadius = "4px 4px 0 0";
        a.style.textAlign = "center";
        sd(a);
        return a;
    }
    function y3(a) {
        a.qR = window.setTimeout(function () {
            a.Sq = !0;
            clearInterval(a.KI);
            E3(a);
        }, 108e5);
    }
    function E3(a) {
        Md(
            "Are you still watching?",
            function () {
                y3(a);
                D3(a);
                a.Sq = !1;
            },
            function () {
                A3(a);
                a.zj = a.Rq;
            }
        );
    }
    function D3(a) {
        a.zj = a.Sq ? a.zj : a.Rq;
        a.KI = window.setInterval(function () {
            a.zj -= 1e3;
            0 >= a.zj / 1e3 && ((a.zj = a.Rq), z3(a, !0));
            a.Pq.innerText = jj + " (" + a.zj / 1e3 + "s)";
            a.Qq.element.innerText = ij + " (" + a.zj / 1e3 + "s)";
        }, 1e3);
        a.Pq.innerText = jj + " (" + a.zj / 1e3 + "s)";
        a.Qq.element.innerText = ij + " (" + a.zj / 1e3 + "s)";
        a.$b.element.innerText = kj + " (any key)";
    }
    function C3(a) {
        clearInterval(a.KI);
        a.Pq.innerText = fj;
        a.$b.element.innerText = gj + " (Ctrl+/)";
        a.Qq.element.innerText = hj;
    }
    function z3(a, b, c) {
        c = void 0 === c ? !1 : c;
        a.Mq.next()
            .then(function (d) {
                void 0 !== d && (nx(d, b ? "sc" : "nc", 1), F("LoadRoomFromRoomList", { location: b ? "scan_cam" : "next_cam", from_broadcaster: a.Qh.j, broadcaster: d }), Hr.h(d));
            })
            .catch(function (d) {
                r("Error calling roomIterator.next: " + d, "scanNextCam.ts", "theatermodelib");
                a.R();
            });
        void 0 !== a.F && a.F.N instanceof zQ && c && qX(a.F.Ra);
    }
    function A3(a) {
        if (a.Zl) {
            clearTimeout(a.qR);
            C3(a);
            a.Zl = !1;
            a.Sq = !1;
            var b = Bc(window.location.search);
            delete b.next_in;
            b = Ac(b);
            var c = "";
            "" !== b && (c = "?" + b);
            window.history.replaceState({ type: "room", room: a.Qh.j }, a.Qh.Tb, "./" + c);
        } else r("Attempted to stop cam scanning when cams were not scanning", "scanNextCam.ts", "theatermodelib");
    }
    function F3(a, b) {
        b = void 0 === b ? {} : b;
        w.call(this);
        this.vE = new y("messageRemoved");
        O(this.element, "siteNotice");
        this.element.style.display = "none";
        this.element.style.position = "static";
        this.options = Object.assign(Object.assign({}, { IE: 0, yp: "", DH: "", fQ: 10 }), b);
        0 === this.options.IE && "" === this.options.yp && r("SiteNotice: Must provide a CookieName when used in Persist mode.", "siteNotice.ts", "theatermodelib");
        2 === this.options.IE && "" === this.options.DH && r("SiteNotice: Must provide an AjaxUrl when used in Ajax mode.", "siteNotice.ts", "theatermodelib");
        this.render(a);
    }
    q(F3, w);
    F3.prototype.render = function (a) {
        var b = this;
        if ("" === this.options.yp || "1" !== ac(this.options.yp)) {
            this.element.style.display = "block";
            this.element.style.height = "auto";
            this.element.style.position = "static";
            this.element.style.padding = "5px 0px";
            this.element.style.textAlign = "center";
            this.element.style.boxSizing = "border-box";
            this.element.style.fontSize = "14px";
            this.element.style.fontWeight = "400";
            this.element.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
            this.element.style.color = xe.pJ;
            var c = document.createElement("div");
            O(c, "wrapper");
            c.style.padding = "15px";
            c.style.borderWidth = "1px";
            c.style.borderStyle = "solid";
            var d = document.createElement("div");
            d.innerHTML = a;
            this.ss = document.createElement("a");
            O(this.ss, "hrefColor");
            this.ss.textContent = ti;
            this.ss.style.cursor = "pointer";
            a = document.createElement("span");
            a.textContent = " (";
            var e = document.createElement("span");
            e.textContent = ")";
            d.appendChild(a);
            d.appendChild(this.ss);
            d.appendChild(e);
            c.appendChild(d);
            this.element.appendChild(c);
            a = {};
            d = l(d.getElementsByTagName("a"));
            for (e = d.next(); !e.done; a = { Ym: a.Ym }, e = d.next())
                (a.Ym = e.value),
                    O(a.Ym, "hrefColor"),
                    (a.Ym.onmouseenter = (function (f) {
                        return function () {
                            f.Ym.style.textDecoration = "underline";
                        };
                    })(a)),
                    (a.Ym.onmouseleave = (function (f) {
                        return function () {
                            f.Ym.style.textDecoration = "";
                        };
                    })(a));
            v("click", this.ss, function () {
                b.element.style.display = "none";
                b.element.removeChild(c);
                switch (b.options.IE) {
                    case 0:
                        bc(b.options.yp, "1", b.options.fQ);
                        break;
                    case 2:
                        E(b.options.DH, {});
                }
                b.vE.h(void 0);
            });
        }
    };
    function G3(a) {
        rX.call(this, a);
        var b = this;
        this.mw = a;
        O(this.element, "theatermodePureChat");
        Qv.ud.g(function () {
            b.Ea();
        });
        gw.g(function () {
            b.Ea();
        });
    }
    q(G3, rX);
    function H3(a) {
        a = void 0 === a ? !1 : a;
        w.call(this);
        var b = this;
        this.Pa = a;
        this.LM = "User";
        this.element.id = "gameInfoBar";
        Q(this.element, { display: "none", borderRadius: "3px", boxSizing: "border-box", marginBottom: "6px", overflow: "visible", position: "static" });
        this.element.appendChild((this.qJ = V("div", null)));
        VN.g(function (c) {
            b.render(c);
        }, !1);
        G.g(function (c) {
            b.LM = c.A.j;
            I3(b, c.l.j());
        });
    }
    q(H3, w);
    H3.prototype.render = function (a) {
        void 0 !== a && null !== a ? ((a = J3(this, a)), this.element.replaceChild(a, this.qJ), (this.qJ = a), this.show()) : this.B();
    };
    function J3(a, b) {
        var c, d, e, f;
        return V(
            "div",
            { style: { borderRadius: "3px", overflow: "hidden", padding: "6px", position: "relative", display: "flex" }, className: "GameInfoBar" },
            V(
                "div",
                { style: { display: "flex", flexDirection: "column", justifyContent: "center" }, className: "gameImage" },
                V("img", {
                    src: null !== (c = null === b || void 0 === b ? void 0 : b.image) && void 0 !== c ? c : "https://static-assets.highwebmedia.com/tsdefaultassets/images/obs_icon_small.png",
                    alt: null !== (d = null === b || void 0 === b ? void 0 : b.name) && void 0 !== d ? d : "",
                    width: "48",
                    height: "48",
                    style: { borderRadius: "5px", marginRight: "8px", objectFit: "cover", overflow: "hidden" },
                })
            ),
            V(
                "div",
                { style: { height: "100%", verticalAlign: "center", paddingLeft: "8px", width: "100%" } },
                V(
                    "div",
                    { style: { fontSize: "14px", lineHeight: "14px", fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif", padding: "6px 0" } },
                    a.Pa ? "You are" : a.LM + " is",
                    " playing",
                    " ",
                    V("a", { href: null === b || void 0 === b ? void 0 : b.aK, target: "_blank", rel: "noopener" }, null === b || void 0 === b ? void 0 : b.name)
                ),
                V(
                    "div",
                    { style: { paddingBottom: "6px", width: "100%" } },
                    V(
                        "p",
                        { style: { fontSize: "12px", lineHeight: "12px", overflow: "hidden", textOverflow: "ellipsis", display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", margin: "0px", width: "100%" } },
                        a.Pa
                            ? V(
                                  "span",
                                  null,
                                  "We added",
                                  " ",
                                  V("a", { href: "/tag/gaming/", target: "_blank" }, "#gaming"),
                                  " ",
                                  "and",
                                  " ",
                                  V(
                                      "a",
                                      { href: "/tag/" + encodeURI(K3(null !== (e = null === b || void 0 === b ? void 0 : b.name) && void 0 !== e ? e : "")), target: "_blank", rel: "noopener" },
                                      "#",
                                      K3(null !== (f = null === b || void 0 === b ? void 0 : b.name) && void 0 !== f ? f : "")
                                  ),
                                  " ",
                                  "to your stream, but did not change your room subject."
                              )
                            : null === b || void 0 === b
                            ? void 0
                            : b.description
                    )
                )
            ),
            V(
                "div",
                { style: { width: "40%", display: "flex", flexDirection: "column", justifyContent: "center", alignItems: "flex-end" } },
                a.Pa
                    ? V(
                          "div",
                          {
                              style: { borderRadius: "4px", cursor: "pointer", fontSize: "14px", lineHeight: "16px", marginRight: "6px", padding: "6px", right: "0" },
                              className: "stopStreamingButton",
                              onClick: function () {
                                  QN();
                              },
                          },
                          An
                      )
                    : V("div", { style: { margin: "6px 0", padding: "8px", textAlign: "right", boxSizing: "border-box", width: "100%" } }, Bn, " ", V("a", { href: xe.xB, target: "_blank" }, Cn))
            )
        );
    }
    function I3(a, b) {
        Wy(a, function d() {
            var e = this,
                f;
            return Aa(d, function (g) {
                if (1 == g.aa) return (g.kn = 2), (f = e.render), sa(g, SN(b), 4);
                if (2 != g.aa) return f.call(e, g.td), ta(g, 0);
                ua(g);
                g.aa = 0;
            });
        });
    }
    H3.prototype.show = function () {
        this.element.style.display = "";
    };
    H3.prototype.B = function () {
        this.element.style.display = "none";
    };
    function K3(a) {
        return a
            .split(/\s+/)
            .map(function (b) {
                return b[0].toUpperCase() + b.substring(1);
            })
            .join("")
            .replace(/[^a-zA-Z\d]/g, "");
    }
    function L3() {
        w.call(this);
        var a = this;
        this.my = [];
        this.element.style.position = "static";
        this.element.style.overflow = "";
        G.g(function (b) {
            b = l(b.A.us);
            for (var c = b.next(); !c.done; c = b.next()) (c = c.value), 0 > a.my.indexOf(c.ht) && "1" !== ac("dism_msg" + c.ht) && (a.my.push(c.ht), a.render(c));
        });
    }
    q(L3, w);
    L3.prototype.render = function (a) {
        var b = this,
            c = document.createElement("div");
        O(c, "dismissibleMessage");
        O(c, "dismissibleMessageColor");
        c.innerHTML = a.VR;
        c.style.fontSize = "12px";
        c.style.padding = "3px";
        c.style.margin = "5px 0";
        c.style.borderRadius = "2px";
        c.style.lineHeight = "16px";
        var d = document.createElement("a");
        O(d, "hrefColor");
        d.textContent = si;
        d.style.cursor = "pointer";
        var e = document.createElement("span");
        e.textContent = " (";
        var f = document.createElement("span");
        f.textContent = ")";
        c.appendChild(e);
        c.appendChild(d);
        c.appendChild(f);
        this.element.appendChild(c);
        e = {};
        f = l(c.getElementsByTagName("a"));
        for (var g = f.next(); !g.done; e = { Zm: e.Zm }, g = f.next())
            (e.Zm = g.value),
                O(e.Zm, "hrefColor"),
                (e.Zm.onmouseenter = (function (h) {
                    return function () {
                        h.Zm.style.textDecoration = "underline";
                    };
                })(e)),
                (e.Zm.onmouseleave = (function (h) {
                    return function () {
                        h.Zm.style.textDecoration = "";
                    };
                })(e));
        v("click", d, function () {
            b.element.removeChild(c);
            b.my.splice(b.my.indexOf(a.ht), 1);
            bc("dism_msg" + a.ht, "1", 60);
        });
    };
    function M3() {}
    M3.prototype.update = function () {};
    M3.prototype.dispose = function () {};
    function N3(a, b) {
        a = document.createElement("span");
        a.style.color = "red";
        a.textContent = "Error loading component";
        b.appendChild(a);
        t("Created dummy React component", "ReactRegistry.ts", "components");
    }
    q(N3, M3);
    N3.prototype.update = function () {
        t("Update called on dummy React component", "ReactRegistry.ts", "components");
    };
    N3.prototype.dispose = function () {
        t("Dispose called on dummy React component", "ReactRegistry.ts", "components");
    };
    function O3() {
        return void 0 === window.ReactComponentRegistry
            ? (r("ReactComponentRegistry is undefined - React code is likely not loaded", "ReactRegistry.ts", "components", { argument: "VideoPanelTopSection" }), N3)
            : void 0 === window.ReactComponentRegistry.VideoPanelTopSection
            ? (r("ReactComponentRegistry does not contain component VideoPanelTopSection - React code may not be up to date", "ReactRegistry.ts", "components", { argument: "VideoPanelTopSection" }), N3)
            : window.ReactComponentRegistry.VideoPanelTopSection;
    }
    function P3(a, b) {
        w.call(this);
        var c = this;
        this.F = a;
        this.ux = this.mE = !1;
        this.U = b;
        this.element.id = "VideoPanel";
        this.element.style.position = "relative";
        this.element.style.display = "inline-block";
        this.element.style.borderRadius = "2px";
        this.element.style.boxSizing = "border-box";
        this.element.style.height = "auto";
        this.element.style.fontFamily = "UbuntuRegular, Helvetica, Arial, sans-serif";
        this.element.style.fontSize = "11px";
        this.element.style.overflow = "visible";
        kR = this.element;
        this.uA = document.createElement("div");
        this.element.appendChild(this.uA);
        var d = new (O3())({ text: "", toolTipWidth: Vv, roomName: "" }, this.uA);
        O_(this.F, b);
        this.G(this.F);
        this.If = new AD();
        this.G(this.If);
        this.Le = document.createElement("span");
        this.Le.style.width = "270px";
        this.Le.style.height = "69px";
        this.Le.style.display = "inline-block";
        this.Le.style.verticalAlign = "top";
        this.Le.style.margin = "0";
        this.If.element.appendChild(this.Le);
        this.Id = b.ua.Xa.ja.dB.Id;
        this.Id.Ty.g(function () {
            if ("split" === Y()) {
                for (; null !== c.Le.firstChild; ) c.Le.removeChild(c.Le.firstChild);
                c.Le.appendChild(c.Id.element.cloneNode(!0));
            }
        });
        window.setTimeout(function () {
            c.ux = !0;
        }, 2e3);
        Qv.ud.g(function (p) {
            p = p.Mf;
            c.If.element.style.display = "split" === p ? "block" : "none";
            c.Le.style.display = "split" === p ? "inline-block" : "none";
            c.zh.style.display = "split" === p ? "inline-block" : "none";
            c.uA.style.display = "fullscreen" === p ? "none" : "block";
            c.fp();
        });
        gw.g(function () {
            c.fp();
        });
        this.zh = document.createElement("div");
        O(this.zh, "defaultColor");
        this.zh.style.height = "69px";
        this.zh.style.boxSizing = "border-box";
        this.zh.style.fontSize = "11px";
        this.zh.style.overflow = "hidden";
        this.zh.style.display = "inline-block";
        this.zh.style.verticalAlign = "top";
        this.zh.style.margin = "0";
        this.If.element.appendChild(this.zh);
        this.zh.dataset.paction = "CurrentShowBuyBox";
        a = document.createElement("div");
        a.style.display = "block";
        a.style.boxSizing = "border-box";
        a.style.width = "100%";
        a.style.height = "100%";
        a.style.padding = "2px 10px";
        this.zh.appendChild(a);
        b = document.createElement("div");
        O(b, "currentBalance");
        b.style.display = "block";
        b.style.height = "19px";
        a.appendChild(b);
        var e = document.createElement("span");
        e.innerText = Sh;
        b.appendChild(e);
        this.ob = document.createElement("span");
        this.ob.innerText = "0";
        this.ob.style.fontSize = "15px";
        this.ob.style.fontFamily = "UbuntuBold, Helvetica, Arial, sans-serif";
        b.appendChild(this.ob);
        this.kv = document.createElement("span");
        this.kv.innerText = " tokens";
        b.appendChild(this.kv);
        b = document.createElement("div");
        b.style.display = "inline-block";
        b.style.verticalAlign = "top";
        b.style.width = "130px";
        b.style.textOverflow = "ellipsis";
        b.style.overflow = "hidden";
        b.style.whiteSpace = "nowrap";
        a.appendChild(b);
        var f = Q3(lg);
        f.style.margin = "2px 0 0 0";
        f.href = "/tipping/purchase_tokens/?source=" + A.current.Ub.TOKEN_SOURCE_SPLIT_MODE_VIDEO_PANEL;
        f.onclick = function () {
            uB({ source: A.current.Ub.TOKEN_SOURCE_SPLIT_MODE_VIDEO_PANEL });
            return !1;
        };
        f.onmouseenter = function () {
            f.style.textDecoration = "underline";
        };
        f.onmouseleave = function () {
            f.style.textDecoration = "none";
        };
        b.appendChild(f);
        var g = Q3($l),
            h = !1;
        zN(g, this.F.Ed) && (b.appendChild(g), (h = !0));
        this.we = Q3(og);
        this.we.style.display = "none";
        b.appendChild(this.we);
        var m = document.createElement("div");
        m.innerText = dg;
        m.style.display = "none";
        a.appendChild(m);
        var n = new Ub();
        Nr.g(function () {
            var p;
            return null === (p = c.Ob) || void 0 === p ? void 0 : p.B();
        });
        G.g(function (p) {
            var u;
            null === (u = c.Ob) || void 0 === u ? void 0 : u.show();
            ub() &&
                !sb() &&
                !ib() &&
                h &&
                uc &&
                void 0 === c.Ob &&
                ((c.Ob = vw(g, {
                    width: 250,
                    content: qp,
                    qg: !1,
                    Rc: c.F.N instanceof zQ ? 0 : 1,
                    wd: "30px",
                    kj: function () {
                        return 20;
                    },
                    Qj: function () {
                        return 3;
                    },
                    Gz: ["split"],
                })),
                v("click", g, function () {
                    var D;
                    null === (D = c.Ob) || void 0 === D ? void 0 : sw(D);
                }));
            d.update({ text: p.A.Tb, roomName: p.A.j });
            u = isNaN(p.A.ob) ? 0 : p.A.ob;
            c.ob.innerText = "" + u;
            c.kv.innerText = " " + ge(u, !1);
            c.tb = p.A.tb;
            var x = p.A.ge;
            c.tb
                ? ((c.da.style.display = "inline-block"),
                  (m.style.display = "none"),
                  p.l.event.Fm.g(function (D) {
                      x = D.ge;
                      R3(c, x, p.l, p.l.status);
                  }),
                  p.l.event.Mc.g(function (D) {
                      function J() {
                          R3(ja, x, p.l, D.Sa);
                      }
                      var I,
                          ja = c;
                      Wx(p, D)
                          ? J()
                          : Xx(p, D)
                                .then(J)
                                .catch(function () {});
                      "passwordprotected" === D.Sa && (null === (I = c.Ob) || void 0 === I ? void 0 : I.B());
                  }))
                : ((c.da.style.display = "none"), R3(c, !1, p.l, p.A.sa), (m.style.display = "block"), (m.style.position = "absolute"), (m.style.top = "54px"));
            z(
                FB.g(function () {
                    R3(c, x, p.l, p.A.sa);
                }),
                n
            );
            z(
                p.l.event.MG.g(function (D) {
                    d.update({ text: D });
                }),
                n
            );
            c.ux = !1;
            window.setTimeout(function () {
                c.ux = !0;
            }, 2e3);
            g.style.display = "offline" === p.A.sa ? "none" : "block";
        });
        WA.g(function (p) {
            c.ob.innerText = "" + p.Ua;
            c.kv.innerText = " " + ge(p.Ua, !1);
        });
        this.da = (function (p) {
            var u = document.createElement("span");
            u.innerText = p;
            u.title = p;
            u.style.overflow = "hidden";
            u.style.lineHeight = "1.4";
            u.style.height = "24px";
            u.style.maxWidth = "76px";
            u.style.fontSize = "12px";
            u.style.fontFamily = "UbuntuMedium, Helvetica, Arial, sans-serif";
            u.style.margin = "11px 0px 11px 0px";
            u.style.textOverflow = "ellipsis";
            u.style.padding = "3px 10px 3px";
            u.style.boxSizing = "border-box";
            u.style.cursor = "pointer";
            u.style.display = "none";
            u.style.borderWidth = "1px";
            u.style.borderStyle = "solid";
            return u;
        })(Sf);
        O(this.da, "sendTipButton");
        this.da.style.marginRight = "4px";
        a.appendChild(this.da);
        this.da.onclick = function () {
            iv.h({});
        };
        Kc.g(function () {
            Vb(n);
        });
    }
    q(P3, w);
    P3.prototype.fp = function () {
        var a = this;
        if ("split" === Y()) (this.Id.element.style.padding = "0"), this.Id.Ty.h(void 0);
        else {
            for (; null !== this.Le.firstChild; ) this.Le.removeChild(this.Le.firstChild);
            this.Id.element.style.padding = "3px 5px";
            this.ux
                ? cY(this.U.ua.Xa.ja.dB)
                : window.setTimeout(function () {
                      cY(a.U.ua.Xa.ja.dB);
                  }, 2e3);
        }
        0 < this.element.clientWidth && 500 > this.element.clientWidth ? ((this.Id.element.style.width = "100%"), (this.Le.style.width = "100%")) : ((this.Id.element.style.width = "270px"), (this.Le.style.width = "270px"));
    };
    function Q3(a) {
        var b = document.createElement("a");
        O(b, "panelLink");
        b.innerText = a;
        b.title = a;
        b.style.lineHeight = "1.3";
        b.style.display = "block";
        b.style.maxWidth = "130px";
        b.style.overflow = "hidden";
        b.style.textOverflow = "ellipsis";
        b.style.textDecoration = "none";
        b.style.cursor = "pointer";
        b.onmouseenter = function () {
            b.style.textDecoration = "underline";
        };
        b.onmouseleave = function () {
            b.style.textDecoration = "none";
        };
        return b;
    }
    function R3(a, b, c, d) {
        a.we.innerText = og;
        var e = ["privaterequesting", "privatewatching", "privatespying"];
        if (b || -1 !== e.indexOf(d))
            switch (
                ((a.we.style.display = "block"),
                (a.we.onclick = function () {
                    LB(c);
                }),
                (b = function (f) {
                    f.preventDefault();
                    a.mE ||
                        ((a.mE = !0),
                        PB(c, function () {
                            a.mE = !1;
                        }));
                }),
                d)
            ) {
                case "privaterequesting":
                    a.we.innerText = tg;
                    a.we.style.maxWidth = "130px";
                    a.we.onclick = b;
                    break;
                case "privatenotwatching":
                    a.we.innerText = pg;
                    a.we.style.maxWidth = "130px";
                    a.we.onclick = function () {
                        NB(c);
                    };
                    break;
                case "privatewatching":
                case "privatespying":
                    a.we.innerText = vg;
                    a.we.style.maxWidth = "100px";
                    a.we.onclick = b;
                    break;
                case "offline":
                case "away":
                case "hidden":
                case "hiddenwatching":
                case "notconnected":
                    a.we.style.display = "none";
                    a.we.style.maxWidth = "130px";
                    break;
                case "passwordprotected":
                case "public":
                    break;
                default:
                    t("unexpected status for updatePrivateState: " + d, "videoPanel.ts", "theatermodelib");
            }
        else a.we.style.display = "none";
    }
    function bw(a) {
        return a.uA.offsetHeight + a.If.element.offsetHeight + 4;
    }
    function S3(a, b) {
        w.call(this);
        var c = this;
        this.xu = 4;
        this.F = a;
        this.U = b;
        O(this.element, "BaseRoomContents");
        this.element.style.position = "static";
        this.element.style.display = "block";
        this.element.style.height = "auto";
        this.element.style.borderRadius = "4px";
        this.element.style.padding = this.xu + "px";
        this.element.style.margin = "12px 0 17px 12px";
        this.element.style.overflow = "visible";
        this.element.style.boxSizing = "border-box";
        this.lo = document.createElement("div");
        this.lo.style.display = "none";
        this.element.appendChild(this.lo);
        a = document.createElement("div");
        O(a, "offlineRoomNotice");
        a.innerText = Wi;
        a.style.fontFamily = "UbuntuRegular, Arial, Helvetica, sans-serif";
        a.style.fontSize = "12px";
        a.style.fontWeight = "bold";
        a.style.margin = "13px 0";
        this.lo.appendChild(a);
        this.da = T3(Sf);
        O(this.da, "sendTipButton");
        this.da.style.display = "none";
        this.da.onclick = function () {
            iv.h({});
        };
        this.lo.appendChild(this.da);
        this.Iu = T3($e);
        O(this.Iu, "sendDMButton");
        this.Iu.style.display = "none";
        this.Iu.onclick = function () {
            Wu(hi) || OH.h(B.getState().j);
        };
        this.lo.appendChild(this.Iu);
        this.ce = document.createElement("div");
        O(this.ce, "topSectionWrapper");
        this.ce.style.width = "100%";
        this.ce.style.height = "auto";
        this.element.appendChild(this.ce);
        this.ad = this.G(new P3(this.F, this.U), this.ce);
        this.uu = this.G(new Wv(this), this.ce);
        this.Xa = this.G(new ZZ(), this.ce);
        Zy.g(function (f) {
            var g = LA(c.Xa.hb);
            !e || (d && !g)
                ? "split" === Y() &&
                  (void 0 === c.fk &&
                      (c.fk = new u0(function () {
                          return c.Xa.me().Ol();
                      })),
                  c.fk.show(f))
                : jv.h(!0);
        });
        var d = Zd("InCntntSUp");
        kv.g(function (f) {
            d && "split" === Y() && (void 0 === c.Rn && (c.Rn = new jO()), c.Rn.show(f));
        });
        var e = !0;
        G.g(function (f) {
            var g;
            e = f.l.Fd;
            f.A.tb && (c.da.style.display = "inline-block");
            f.A.j !== (null === (g = A.current.V) || void 0 === g ? void 0 : g.username) && (c.Iu.style.display = "inline-block");
        });
    }
    q(S3, w);
    function T3(a) {
        var b = document.createElement("span");
        b.textContent = a;
        b.title = a;
        Q(b, {
            display: "inline-block",
            minWidth: "74px",
            textAlign: "center",
            fontFamily: "UbuntuMedium, Helvetica, Arial, sans-serif",
            padding: "4px 10px",
            margin: "11px 4px 13px 0px",
            boxSizing: "border-box",
            cursor: "pointer",
            borderWidth: "1px",
            borderStyle: "solid",
        });
        return b;
    }
    S3.prototype.D = function () {
        var a = this.ad.element.offsetHeight;
        this.Xa.element.style.width = this.element.clientWidth - this.ad.element.offsetWidth - 16 + "px";
        this.Xa.element.style.height = a + "px";
    };
    var U3 = window.$;
    function V3(a, b) {
        w.call(this);
        var c = this;
        this.j = a;
        this.IJ = this.nG = !1;
        this.element.id = "StaffLinks";
        this.element.style.position = "static";
        this.element.style.height = "auto";
        a = document.createElement("div");
        if (void 0 !== b.iJ) {
            var d = document.createElement("div");
            d.id = "deletion_admin_notice";
            d.style.margin = "10px";
            d.innerHTML = b.iJ;
            a.appendChild(d);
        }
        void 0 !== b.UM && ((d = document.createElement("div")), O(d, "prevUsernamesSection"), (d.style.padding = "5px"), (d.style.width = "500px"), (d.textContent = "Previously known as " + b.UM), a.appendChild(d));
        this.element.appendChild(a);
        a = document.createElement("div");
        this.element.appendChild(a);
        d = document.createElement("a");
        d.href = "#";
        O(d, "link");
        d.style.marginRight = "15px";
        d.textContent = "Show/Hide Admin Info";
        d.onclick = function (f) {
            f.preventDefault();
            W3(c);
        };
        a.appendChild(d);
        this.cn = document.createElement("div");
        this.cn.id = "admin-info-section";
        this.cn.style.display = "none";
        this.cn.textContent = "Loading admin information...";
        this.element.appendChild(this.cn);
        for (d = 0; d < b.sG.length; d += 1) {
            var e = X3(this, b.sG[d]);
            a.appendChild(e);
            d !== b.sG.length - 1 && ((e = document.createElement("span")), (e.style.margin = "0 2px"), (e.textContent = "|"), a.appendChild(e));
        }
        b.pP && W3(this);
    }
    q(V3, w);
    function X3(a, b) {
        var c = document.createElement("a");
        c.href = b.href;
        c.textContent = b.text;
        O(c, "link");
        "View Stream Status" === b.text &&
            (c.onclick = function (d) {
                d.preventDefault();
                d = window.open("/view_user_obs_overlay/" + a.j + "/?graph=1", "obs_info", "status=0,toolbar=0,menubar=0,directories=0,resizable=1,scrollbars=1,height=600,width=750");
                null !== d && d.focus();
            });
        return c;
    }
    function W3(a) {
        a.nG ? ((a.cn.style.display = "none"), (a.nG = !1)) : (a.IJ || (Y3(a), (a.IJ = !0)), (a.cn.style.display = "block"), (a.nG = !0));
    }
    function Y3(a) {
        C("ax/room_info/" + a.j + "/")
            .then(function (b) {
                U3(a.cn).html(b.responseText);
            })
            .catch(function () {});
    }
    function Z3(a, b, c) {
        function d() {
            e.xe.element.style.visibility = "";
            var m = l(RQ(Uv(), Tv(), e.F.Re)),
                n = m.next().value;
            m = m.next().value;
            e.F.element.style.height = "100%";
            e.F.element.style.top = "0";
            e.F.element.style.left = "0";
            e.F.N.element.style.top = "0";
            e.F.N.element.style.left = "0";
            e.F.N.element.style.width = n + "px";
            e.F.N.element.style.height = m + "px";
            e.U.element.style.visibility = "";
            e.U.element.style.position = "absolute";
            e.U.element.style.top = "0px";
            e.U.element.style.left = "0";
            e.U.element.style.height = e.EA ? m - 52 + "px" : m - 32 + "px";
            e.Xa.element.style.display = "none";
            e.uu.element.style.display = "none";
            e.R();
        }
        S3.call(this, a, b);
        var e = this;
        this.xe = c;
        this.EA = "IconVideoControls" === new Xd(["IconVideoControls", "TextVideoControls"], "vidctrls").lp;
        this.element.style.width = "";
        iw(this, ["margin-left", "margin-right"], 0, function () {
            return "split" === Y() ? 12 : 8;
        });
        this.element.id = "TheaterModeRoomContents";
        a = $3();
        b = document.createElement("span");
        this.Ei = document.createElement("a");
        this.Ei.href = "#";
        this.Ei.innerText = "Theater Mode";
        this.Ei.id = "video-mode";
        this.Ei.style.textDecoration = "none";
        this.Ei.dataset.paction = "VideoModes";
        this.Ei.onclick = function (m) {
            m.preventDefault();
            m = "split";
            "split" === Y() && (m = "theater");
            Ov(m);
            Rv();
        };
        b.appendChild(this.Ei);
        a.appendChild(b);
        b = document.createElement("span");
        b.style.display = "none";
        c = document.createElement("span");
        O(c, "defaultColor");
        c.innerText = "|";
        c.style.margin = "0 4px";
        b.appendChild(c);
        c = document.createElement("a");
        c.href = "#";
        c.innerText = "Interactive Full Screen";
        c.id = "fvm-link";
        c.style.textDecoration = "none";
        c.dataset.paction = "VideoModes";
        c.onclick = function (m) {
            m.preventDefault();
            oX(e.F.Ra);
        };
        b.appendChild(c);
        a.appendChild(b);
        ld() && !mb() && (b.style.display = "inline");
        this.VL = a;
        this.element.appendChild(a);
        var f = $3(!1);
        this.element.appendChild(f);
        var g;
        G.g(function (m) {
            void 0 !== g && (e.removeChild(g), (g = void 0));
            void 0 !== m.A.Vz ? ((f.style.display = "block"), (g = e.G(new V3(m.A.j, m.A.Vz), f))) : (f.style.display = "none");
        });
        this.us = this.G(new L3());
        this.ZQ = new H3();
        this.G(this.ZQ);
        this.G(new m3());
        var h = !0;
        Qv.ud.g(function (m) {
            void 0 !== e.fk && "split" !== Y() && e.fk.B();
            if (h || Y() !== m.DS)
                switch (m.Mf) {
                    case "split":
                        e.element.style.marginLeft = "12px";
                        e.element.style.marginRight = "12px";
                        e.F.N.element.style.top = "0";
                        e.U.element.style.top = "0";
                        e.U.element.style.visibility = "hidden";
                        e.U.element.style.position = "fixed";
                        e.xe.element.style.visibility = "hidden";
                        e.Xa.element.style.display = "inline-block";
                        e.uu.element.style.display = "inline-block";
                        e.R();
                        e.Ei.innerText = "Theater Mode";
                        break;
                    case "theater":
                        e.element.style.marginLeft = "8px";
                        e.element.style.marginRight = "8px";
                        e.F.N.element.style.top = "0";
                        e.U.element.style.top = "0";
                        e.U.element.style.visibility = "";
                        e.U.element.style.position = "absolute";
                        e.xe.element.style.visibility = "";
                        e.xe.Ea();
                        e.Xa.element.style.display = "none";
                        e.uu.element.style.display = "none";
                        e.uu.gh(e.element.clientWidth);
                        e.R();
                        e.Ei.innerText = "Split Mode";
                        break;
                    case "fullscreen":
                        d();
                        window.setTimeout(function () {
                            "fullscreen" === Y() && d();
                        }, 500);
                        break;
                    case "noninteractive-fullscreen":
                        break;
                    default:
                        r("Unexpected VideoMode: " + m.Mf, "theaterModeRoomContents.ts", "theatermodelib");
                }
            h = !1;
            window.setTimeout(function () {
                e.R();
            }, 300);
        });
        a = document.getElementById("close_entrance_terms");
        null !== a &&
            v("click", a, function () {
                e.R();
            });
        this.F.Ra.hk.g(function () {
            e.R();
        });
        a4(this);
    }
    q(Z3, S3);
    function $3(a) {
        a = void 0 === a ? !0 : a;
        var b = document.createElement("div");
        O(b, "defaultColor");
        O(b, "styledDiv");
        b.style.fontSize = "12px";
        b.style.padding = "3px";
        b.style.margin = "5px 0";
        b.style.borderRadius = "2px";
        b.style.lineHeight = "16px";
        b.style.display = a ? "" : "none";
        return b;
    }
    Z3.prototype.D = function () {
        var a;
        if ("theater" === Y()) {
            var b = l(b4(this)),
                c = b.next().value;
            b = b.next().value;
            this.U.element.style.height = this.EA ? b - 52 + "px" : b - 32 + "px";
            void 0 !== this.F.Jg && (null === (a = this.F.Jg) || void 0 === a ? 0 : a.La()) && (this.U.element.style.height = this.U.element.offsetHeight - this.F.Jg.element.offsetHeight + "px");
            this.F.element.style.height = b + "px";
            a = this.F;
            a.am ? ((a.N.element.style.height = "100%"), (a.N.element.style.width = "100%")) : ((a.N.element.style.width = c + "px"), (a.N.element.style.height = b + "px"));
            this.EA ? (this.U.element.style.width = "100%") : 750 > Uv() ? ((this.U.element.style.width = this.element.clientWidth - 115 + "px"), this.U.R()) : (this.U.element.style.width = "100%");
        } else "fullscreen" === Y() && (this.U.element.style.width = "100%");
        this.F.R();
        this.uu.gh();
    };
    function b4(a) {
        var b = a.element.clientWidth - 2 * a.xu,
            c = document.documentElement.clientHeight - 118;
        a = a.F.Re;
        270 >= c ? ((c = 270), (b = c / (a ? 0.5625 : 0.75))) : ((c = l(RQ(b, c - 27, a))), (b = c.next().value), (c = c.next().value), 270 >= c && ((c = 270), (b = c / (a ? 0.5625 : 0.75))));
        return [b, c];
    }
    function c4(a) {
        var b = Sv();
        if ("split" === b) {
            var c = "theater";
            a.Ei.innerText = "Theater Mode";
        } else (c = "split"), (a.Ei.innerText = "Split Mode");
        Pv(Qv, c, !0);
        Ov(b);
    }
    function a4(a) {
        v_.g(function () {
            "fullscreen" === Y()
                ? window.setTimeout(function () {
                      d4(a);
                  }, 500)
                : d4(a);
        });
        w_.g(function () {
            if ("split" !== Y() && void 0 !== a.F.Jg) {
                var b = l(b4(a));
                b.next();
                b = b.next().value;
                a.U.element.style.height = a.EA ? b - 52 + "px" : b - 32 + "px";
                a.U.R();
            }
        });
    }
    function d4(a) {
        if (void 0 !== a.F.Jg) {
            var b = a.F.element.offsetHeight,
                c = a.U.element.offsetHeight,
                d = a.F.Jg.element.offsetHeight;
            "split" !== Y() && b - c <= d && ((a.U.element.style.height = c - d + "px"), a.U.R());
        }
    }
    function e4() {
        w.call(this);
        this.ex = document.createElement("frameset");
        this.frame = document.createElement("frame");
        this.Bb = document.createElement("div");
        this.element.style.position = "static";
        this.vn();
        this.ex.appendChild(this.frame);
    }
    q(e4, w);
    function f4(a, b, c) {
        a.frame.src = b;
        a.Bb.style.display = "block";
        window.onFrameLoad = function (d) {
            void 0 !== c && c(d);
            a.Bb.style.display = "none";
        };
    }
    function g4(a) {
        document.body.insertBefore(a.element, document.body.firstChild);
        document.documentElement.appendChild(a.ex);
    }
    e4.prototype.EF = function () {
        document.body.removeChild(this.element);
        document.documentElement.removeChild(this.ex);
    };
    e4.prototype.vn = function () {
        this.Bb.style.animationName = "spin";
        this.Bb.style.position = "absolute";
        this.Bb.style.top = "50%";
        this.Bb.style.left = "50%";
        this.Bb.style.width = "30px";
        this.Bb.style.height = "31px";
        this.Bb.style.margin = "-15px 0 0 -15px";
        this.Bb.style.background = 'url("https://static-assets.highwebmedia.com/tsdefaultassets/images/loading_spinner.svg")';
        this.Bb.style.backgroundSize = "cover";
        this.Bb.style.animationName = "spin";
        this.Bb.style.webkitAnimationName = "spin";
        this.Bb.style.animationDuration = "2s";
        this.Bb.style.webkitAnimationDuration = "2s";
        this.Bb.style.animationTimingFunction = "linear";
        this.Bb.style.webkitAnimationTimingFunction = "linear";
        this.Bb.style.animationIterationCount = "infinite";
        this.Bb.style.webkitAnimationIterationCount = "infinite";
        this.Bb.style.zIndex = "-1";
        this.element.appendChild(this.Bb);
    };
    function h4(a) {
        var b = document.querySelector("#login_inputs form");
        null !== b && (b.action = i4(b.action, "next", "/" + a + "/"));
        b = document.querySelector('#login_inputs input[name="next"]');
        null !== b && (b.value = "/" + a + "/");
    }
    function j4(a) {
        var b = document.querySelector(".nav-bar .creat");
        null === b && (b = document.querySelector("#user_information .auip_creat"));
        null !== b && (b.href = i4(b.href, "room", a));
    }
    function i4(a, b, c) {
        var d = void 0 === d ? !0 : d;
        var e = a.split(/\s*[?&]\s*/).reduce(function (f, g) {
            return 0 === g.indexOf(b + "=") ? g : f;
        }, "");
        return "" !== e ? a.replace(e, b + "=" + c) : d && -1 !== a.indexOf("?") ? a + "&" + b + "=" + c : d ? a + "?" + b + "=" + c : a;
    }
    function k4() {
        Yr.call(this, { Il: !1 });
        var a = this;
        this.Lb = !0;
        var b = { width: "en" === xL ? "300px" : "320px", height: "auto", marginRight: "10px" };
        Q(this.element, {
            position: "fixed",
            right: "20px",
            bottom: "20px",
            width: "auto",
            height: "auto",
            zIndex: 1099,
            boxSizing: "border-box",
            filter: "drop-shadow(0px 0px 16px rgba(0, 0, 0, 0.16))",
            borderRadius: "4px",
            WebkitOverflowScrolling: "touch",
        });
        O(this.element, "RoomSignupPopup");
        b = V(
            "div",
            { style: { display: "block", margin: "16px 14px" } },
            V("div", {
                style: {
                    position: "absolute",
                    width: "195px",
                    height: "175px",
                    left: "161px",
                    bottom: "-39px",
                    background: "transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/signup_popup_bg.svg) no-repeat",
                    zIndex: -1,
                },
            }),
            V(
                "div",
                { style: { position: "absolute", top: "0px", right: "0px", margin: "8px" } },
                V("button", {
                    style: { background: "transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/close-lightgray.svg) no-repeat center center", backgroundSize: "12px", padding: "12px", border: "none", cursor: "pointer" },
                    type: "submit",
                    onClick: function (c) {
                        c.preventDefault();
                        a.B();
                    },
                })
            ),
            V(
                "div",
                { style: b },
                V("p", { style: { margin: "0 0 8px", font: "16px 'UbuntuBold', Arial, Helvetica, sans-serif", lineHeight: "24px" }, className: "title" }, kf),
                V("p", { style: { margin: "0 0 16px", font: "16px 'UbuntuRegular', Arial, Helvetica, sans-serif", lineHeight: "24px" }, className: "body" }, lf),
                V(
                    "div",
                    { style: { overflow: "hidden" } },
                    V(
                        "a",
                        {
                            href: "/accounts/register/",
                            type: "button",
                            style: {
                                cssFloat: "left",
                                font: "14px 'UbuntuLight', Arial, Helvetica, sans-serif",
                                lineHeight: "16px",
                                textDecoration: "none",
                                padding: "8px",
                                border: "1px solid #cd5c26",
                                borderRadius: "4px",
                                boxSizing: "border-box",
                            },
                            className: "signupLink",
                            onClick: function () {
                                F("RoomPopupSignupClicked");
                            },
                        },
                        mf
                    )
                )
            )
        );
        this.element.appendChild(b);
    }
    q(k4, Yr);
    var l4, m4;
    function n4() {
        void 0 !== l4 && l4.B();
        void 0 !== m4 && window.clearTimeout(m4);
        m4 = window.setTimeout(function () {
            void 0 === l4 && (l4 = new k4());
            l4.show();
        }, 3e5);
    }
    function o4() {
        w.call(this);
        var a = this;
        this.element.style.position = "relative";
        this.element.style.display = "none";
        this.Wa = document.createElement("div");
        this.Wa.className = "top_alert";
        this.element.appendChild(this.Wa);
        var b = document.createElement("span");
        b.className = "top_alert_close";
        b.innerText = "\u00d7";
        b.style.fontSize = "2em";
        this.Wa.appendChild(b);
        b.onclick = function () {
            bc("mobile_redirect_hide", "true", 0.75);
            a.element.style.display = "none";
        };
        b = document.createElement("div");
        var c = document.createElement("span");
        c.textContent = Bi;
        b.appendChild(c);
        c = document.createElement("div");
        var d = document.createElement("ul");
        d.style.listStyleType = "disc";
        var e = document.createElement("li");
        e.textContent = Ff;
        var f = document.createElement("li");
        f.textContent = Ci;
        var g = document.createElement("li");
        g.textContent = Ij;
        d.appendChild(e);
        d.appendChild(f);
        d.appendChild(g);
        c.appendChild(d);
        d = document.createElement("div");
        e = document.createElement("span");
        e.innerHTML = qq;
        this.TL = e.querySelectorAll("a")[0];
        f = e.querySelectorAll("a")[1];
        d.appendChild(e);
        this.TL.onclick = function () {
            F("MobileAlertLinkClicked");
        };
        f.onclick = function () {
            F("MobileAlertSurveyClicked");
            nE.h({ source: "desktop_on_mobile" });
        };
        this.Wa.appendChild(b);
        this.Wa.appendChild(c);
        this.Wa.appendChild(d);
    }
    q(o4, w);
    o4.prototype.show = function (a) {
        this.TL.href = "https://m.chaturbate.com/mobile/" + (void 0 !== a ? "?b=" + a + "&" : "?") + "source=desktop";
        this.element.style.display = "block";
    };
    function p4(a) {
        Ra() && (q4 ? window.history.pushState({ type: "nav", path: a }, "", "" + a) : window.history.replaceState({ type: "nav", path: a }, "", "" + a));
    }
    var r4 = ["header", "main", "footer-holder", "top-footer-holder"],
        q4 = !1;
    function s4(a, b, c) {
        PW.call(this, a, b);
        var d = this;
        this.context = c;
        this.qG = [];
        this.Zq = new IX();
        this.sk = this.rw = this.Ml = !1;
        this.Ge = !0;
        this.CH = function () {
            t4(d);
            u4(d);
        };
        this.loading = Date.now();
        c = document.getElementById("main");
        c.style.font = "1em 'UbuntuRegular',Arial,Helvetica,sans-serif";
        c.appendChild(this.element);
        this.element.style.position = "static";
        this.element.style.marginRight = "15px";
        this.element.style.boxSizing = "border-box";
        this.element.focus();
        QW(this);
        TW(this, a);
        this.fG();
        v4(this);
        w4(this, a, b);
        RW(this, this.oa.ce, this.oa.ad.da);
        SW(this);
        x4(this);
        v(
            "scroll",
            window,
            function () {
                d.xe.R();
                y4(d);
            },
            !1,
            !0
        );
        v("popstate", window, function (e) {
            void 0 !== e.state && null !== e.state && ("room" === e.state.type ? d.Ck(e.state.room, !1) : z4(d, e.state.path, !1));
        });
        WA.g(function (e) {
            d.oa.ad.ob.innerText = "" + e.Ua;
            d.oa.ad.kv.innerText = " " + ge(e.Ua, !1);
            wB(e.Ua);
        });
        Nr.g(function (e) {
            z4(d, e, !0);
        });
        GV.g(function () {
            d.F.N.rg();
            P_(d.F, !0);
        });
        nz.g(function () {
            d.F.N.xb();
            P_(d.F, !1);
            d.R();
        });
        Az.g(function (e) {
            d.Td = e.ij;
        });
        this.F.Ed.g(function (e) {
            (d.Ge = e) ? t4(d) : y4(d);
        });
        this.R();
        this.Gd();
    }
    q(s4, PW);
    k = s4.prototype;
    k.uK = function (a) {
        -1 !== "away privatenotwatching hidden offline unknown notconnected passwordprotected".split(" ").indexOf(a.Sa)
            ? ((Pr = this.Ml = !1), this.sk && void 0 !== this.Jf && (this.Jf(), (this.pf = { j: "", Tb: "" }), (this.Jf = void 0), t4(this)), t4(this), (this.F.lH = !0))
            : ((this.Ml = !0), (Pr = !this.rw), y4(this), (this.F.lH = !1));
    };
    k.kK = function (a) {
        return q4 || !0 === A.current.jL ? Vx(a) : Ux(window.initialRoomDossier);
    };
    k.XE = function (a, b) {
        var c = this;
        PW.prototype.XE.call(this, a, b);
        F("LoadRoom");
        MX(this.Zq, this.l);
        this.F.N.bu.g(function () {
            $Q(a, c.F.N);
        });
    };
    k.tK = function (a) {
        (!yu && (pb() || lb() || mb())) || this.LH.au(a, (this.Tg * this.F.N.Ql()) / 100);
    };
    k.zz = function (a) {
        document.title = fe(a);
    };
    k.lD = function (a) {
        PW.prototype.lD.call(this, a);
        var b = this.F;
        b.Re = a;
        b.R();
    };
    k.Zs = function (a, b) {
        if (Ra()) {
            var c = "";
            if (void 0 === b || b) (b = Bc(window.location.search)), q4 && delete b.UW, void 0 !== b.advanced_options && delete b.oV, (b = Ac(b)), "" !== b && (c = "?" + b);
            q4 ? window.history.pushState({ type: "room", room: a.j }, a.Tb, "/" + a.j + "/" + c) : window.history.replaceState({ type: "room", room: a.j }, a.Tb, "/" + a.j + "/" + c);
        }
    };
    k.hD = function () {
        PW.prototype.hD.call(this);
        var a = this.oa;
        a.ce.style.position = "fixed";
        a.ce.style.top = "999999px";
        a.us.element.style.display = "none";
        a.VL.style.display = "none";
        a.lo.style.display = "block";
        this.yb.ZF = this.oa.da;
        this.Ml = !1;
        t4(this);
        Pr = !1;
    };
    k.px = function () {
        PW.prototype.px.call(this);
        var a = this.oa;
        a.ce.style.position = "";
        a.ce.style.top = "";
        a.ce.style.display = "block";
        a.us.element.style.display = "block";
        a.VL.style.display = "block";
        a.lo.style.display = "none";
        this.yb.ZF = this.oa.ad.da;
        this.rw = !1;
        Pr = this.Ml = !0;
    };
    k.ZD = function (a) {
        return PW.prototype.ZD.call(this, a) && !jz(a);
    };
    k.jD = function (a) {
        PW.prototype.jD.call(this, a);
        this.eF.show(a.j());
        this.pf = { j: "", Tb: "" };
        this.oa.element.style.display = "none";
        p3(this.$h, a.j());
        this.F.N.stop();
        clearTimeout(ly);
    };
    k.kD = function (a) {
        PW.prototype.kD.call(this, a);
        this.Zs({ j: a, Tb: "Chat with " + a });
        this.Ml = !1;
        t4(this);
        Pr = !1;
        void 0 !== this.Jf && this.Jf();
        this.pf = { j: "", Tb: "" };
        this.Jf = void 0;
        this.eF.show(a);
        this.oa.element.style.display = "none";
        p3(this.$h, a);
        u4(this);
        j4(a);
        h4(a);
    };
    k.iD = function (a) {
        PW.prototype.iD.call(this, a);
        this.Zs({ j: a, Tb: "Chat with " + a });
        this.Ml = !1;
        t4(this);
        Pr = !1;
        void 0 !== this.Jf && (this.Jf(), t4(this));
        t4(this);
        this.pf = { j: "", Tb: "" };
        this.Jf = void 0;
        this.eF.show(a);
        this.oa.element.style.display = "none";
        p3(this.$h, a);
        u4(this);
        j4(a);
        h4(a);
    };
    function v4(a) {
        G.g(function (b) {
            0 === a.qG.length &&
                (b.A.$N && a.WR.show(b.A.j),
                0 < b.A.ob &&
                    !b.A.tO &&
                    ((b = new F3(sj, { yp: "tfa-msg-" + b.A.userName })),
                    Gb(a, b),
                    b.vE.g(function () {
                        a.D();
                    }),
                    a.qG.splice(0, 0, b)),
                qb() &&
                    void 0 === document.__proto__ &&
                    ((b = new F3(rj, { yp: "ie-support-notice" })),
                    Gb(a, b),
                    b.vE.g(function () {
                        a.D();
                    }),
                    a.qG.splice(0, 0, b)));
        });
    }
    function A4(a) {
        a.U = new c1("theater", a.Zq);
        a.U.element.style.left = "0";
        a.U.element.style.top = "0";
        a.U.ua.element.style.zIndex = "";
        a.U.element.style.position = "fixed";
        a.U.element.style.width = "100%";
        Bb("click", a.U.ua.Xa.ja.C.cl, X_);
        a.U.ua.Xa.ja.C.cl.onclick = function (b) {
            b.stopPropagation();
            b.preventDefault();
            Gr.h({});
        };
    }
    function B4(a) {
        a.xe = new G3(a.U.ua.Xa.ja.C);
        new i1(a.U, a.xe);
    }
    k.ww = function (a, b) {
        this.WR = this.G(new o4());
        this.$h = this.G(new o3(a));
        this.F = new L_(b);
        this.F.N instanceof lz && (this.F.N.Qy = this.loading);
        Fb(this.$h.dg, new x3(this.$h, this.F));
    };
    function w4(a, b, c) {
        A4(a);
        B4(a);
        a.ww(b, c);
        v("click", a.element, function () {
            "split" !== Y() && a.F.Ra.toggle();
            a.U.Ne === a.U.ua && a.U.ft !== a.U.ua && Qy(a.U);
        });
        a.U.ow.g(function (d) {
            a.F.ty(d);
        });
        a.oa = a.G(new Z3(a.F, a.U, a.xe));
        a.F.Ra.WC = a.oa.ad.element;
        a.F.element.appendChild(a.F.gg.S);
        a.F.element.appendChild(a.F.gg.element);
        a.oa.ad.G(a.xe);
        a.U.element.style.visibility = "hidden";
        a.oa.ce.style.position = "fixed";
        a.oa.ce.style.top = "999999px";
        a.eF = a.G(new q3(!0));
        KA(a.U, a.oa.Xa);
        Qv.ud.g(function (d) {
            Pv(Qv, d.Mf, !1);
            C4(a);
            switch (Y()) {
                case "split":
                    void 0 !== a.U.Ce && Gr.h({});
                    void 0 !== a.U.Oi && Ir.h(void 0);
                    NX(a.Zq, a.yb);
                    a.F.N.xb();
                    break;
                case "theater":
                    void 0 !== a.U.Oi && Ir.h(void 0);
                    a.F.N.xb();
                    break;
                case "fullscreen":
                    a.F.N.xb();
                    a.yb.B();
                    break;
                case "noninteractive-fullscreen":
                    break;
                default:
                    r("Unexpected VideoMode: " + Y(), "theaterModeRoot.ts", "theatermodelib", {}, "VIDEO_");
            }
            a.R();
            gw.h(!1);
        });
        vv.h("theater");
        c4(a.oa);
    }
    k.R = function () {
        this.sk || PW.prototype.R.call(this);
    };
    function C4(a) {
        q4 &&
            ("split" === Y() ? a.oa.Xa.ja.C.Ea() : "theater" === Y() && a.xe.Ea(),
            window.setTimeout(function () {
                var b = a.F.element.getBoundingClientRect();
                if (a.oa.ce.getBoundingClientRect().bottom > document.documentElement.clientHeight || b.bottom < 0.6 * b.height) fb().scrollTop = a.$h.element.offsetTop - 4;
                a.R();
            }, 0));
    }
    k.Ck = function (a, b) {
        var c = this;
        a === this.pf.j
            ? (window.location.pathname !== "/" + this.pf.j + "/" && this.Zs(this.pf, !1),
              u4(this),
              this.R(),
              window.setTimeout(function () {
                  y4(c);
              }, 0))
            : (void 0 !== this.context.V || xe.lq || Zd("VideoCTA") || n4(), PW.prototype.Ck.call(this, a, b));
    };
    k.hh = function (a) {
        PW.prototype.hh.call(this, a);
        this.yb.B();
        this.zz(a.A.j);
        this.oa.element.style.display = "block";
        this.Tg = a.A.Da.Tg;
        wB(a.A.ob);
        j4(a.A.j);
        h4(a.A.j);
        this.Td = a.A.ij;
        void 0 !== this.Qd && (PV(this.Qd, a.A.j), QV(this.Qd, this.Td));
        this.R();
        q4 || (q4 = !0);
        C4(this);
    };
    function x4(a) {
        a.U.element.ontouchstart = function () {
            a.qu = !0;
            window.setTimeout(function () {
                a.qu = !1;
            }, 500);
        };
        a.U.element.onmousemove = function () {
            a.qu || a.F.N.xb();
        };
        a.F.N instanceof zQ &&
            ((a.F.N.element.ontouchstart = function () {
                "split" === Y() &&
                    ((a.qu = !0),
                    window.setTimeout(function () {
                        a.qu = !1;
                    }, 500));
            }),
            (a.F.N.element.onmousemove = function () {
                "split" === Y() && (a.qu || a.F.N.xb());
            }));
    }
    function y4(a) {
        if (!a.sk && !a.rw) {
            var b = a.oa.element.offsetTop + a.F.element.offsetTop + a.F.element.offsetHeight,
                c = fb().scrollTop;
            a.context.Tw && a.Ml && !a.Ge && c > b + 50 ? (void 0 === a.Qd && (a.Qd = D4(a)), a.Qd.show()) : c < b + 40 && t4(a);
        }
    }
    function z4(a, b, c) {
        if (a.context.Tw && a.Ml && !a.Ge && "" !== a.pf.j) {
            a.sk || (a.az = a.F.N.Ql());
            a.sk = !0;
            void 0 === a.ho && (a.ho = new e4());
            c && p4(b);
            var d = a.ho;
            f4(a.ho, b, function (e) {
                function f(g) {
                    return function (h) {
                        var m = new CustomEvent(g, { bubbles: !0, cancelable: !1 });
                        m.clientX = h.clientX;
                        m.clientY = h.clientY;
                        m.buttons = h.buttons;
                        m.screenX = h.screenX;
                        m.screenY = h.screenY;
                        m.ctrlKey = h.ctrlKey;
                        m.altKey = h.altKey;
                        d.element.dispatchEvent(m);
                    };
                }
                Rr(e.document, !0);
                xV.h(!0);
                document.title = e.document.title;
                v("mousemove", e.document, f("mousemove"));
                v("mouseup", e.document, f("mouseup"));
                HV.g(function () {
                    e.login_required();
                });
                e.document.disableFloatingPlayer = a.zQ.bind(a);
                e.document.enableFloatingPlayer = a.EQ.bind(a);
                e.document.setAnimateFollowedTab = Jx;
                e.document.changeColorMode = function () {
                    Mr.h(void 0);
                };
                e.document.repositionFloatingPlayer = function () {
                    var g;
                    null === (g = a.Qd) || void 0 === g ? void 0 : g.D(e.document);
                };
            });
            g4(a.ho);
            r4.forEach(function (e) {
                e = document.getElementById(e);
                null !== e && (e.style.display = "none");
            });
            void 0 === a.Qd && (a.Qd = D4(a));
            P_(a.F, !0);
            a.F.N.Tk(!0);
            a.Qd.show();
            a.F.N.rg();
        } else window.location.href = b;
    }
    function D4(a) {
        function b() {
            a.rw = !0;
            Pr = !1;
            a.sk && (void 0 !== mt && mt.close(), clearTimeout(ly), void 0 !== a.Jf && (a.Jf(), (a.pf = { j: "", Tb: "" }), (a.Jf = void 0), t4(a)));
        }
        if (void 0 !== a.Qd) return a.Qd;
        var c = new IV(
            a.F,
            function () {
                window.location.pathname !== "/" + a.pf.j + "/" && F("FloatingNavClicked");
                a.Ck(a.pf.j, !1);
                fb().scrollTop = a.$h.element.offsetTop;
            },
            b
        );
        kz.g(function (d) {
            a.sk && !d.active && !0 === d.oH && (b(), c.B());
        });
        PV(c, a.pf.j);
        QV(c, a.Td);
        return c;
    }
    function t4(a) {
        void 0 !== a.Qd && a.Qd.B();
    }
    function u4(a) {
        yV.h(void 0);
        a.sk = !1;
        void 0 !== a.ho &&
            null !== a.ho.ex.parentElement &&
            (a.F.Ra.Sm(0 === a.az),
            a.F.Ra.qv(a.az),
            a.F.N.Nu(a.az, 0 === a.az),
            a.ho.EF(),
            r4.forEach(function (b) {
                b = document.getElementById(b);
                null !== b && (b.style.display = "block");
            }));
    }
    k.gh = function () {
        void 0 === this.Qd || this.sk || this.Qd.R();
    };
    k.zQ = function () {
        void 0 !== this.Qd && (this.Qd.close(), (this.Qd = void 0));
        this.context.Tw = !1;
    };
    k.EQ = function () {
        this.context.Tw = !0;
    };
    function E4() {
        var a = dc();
        void 0 === a && (void 0 === dc() && bc("pageaction_sample_id", (Math.floor(100 * Math.random()) + 1).toString(), 30), (a = dc()));
        return void 0 !== a ? 5 >= a : !1;
    }
    function F4() {
        E4() &&
            document.addEventListener(
                "click",
                function (a) {
                    a = a.target;
                    if ("visible_genders" !== a.getAttribute("name") && null !== a && 3 >= a.childNodes.length) {
                        var b = G4(a);
                        if (null !== b && "" !== b && void 0 !== b) {
                            var c;
                            var d = H4(a) || a.title || a.innerText || (null !== (c = a.getAttribute("value")) && void 0 !== c ? c : "") || "";
                            c = a.parentElement;
                            null !== c && "true" === c.dataset.pactionSendPosition
                                ? F("UIClickChatroom", { location: b, name: d, index: Array.prototype.indexOf.call(c.children, a), count: c.childElementCount })
                                : F("UIClickChatroom", { location: b, name: d });
                        }
                    }
                },
                !0
            );
    }
    function H4(a) {
        var b = a.dataset.pactionName;
        if (void 0 !== b) return b;
        for (; a.parentElement; ) {
            a = a.parentElement;
            b = a.dataset.pactionName;
            if (void 0 !== b) return b;
            if (null !== a.title) return a.title;
        }
        return "";
    }
    function G4(a) {
        var b = a.dataset.paction;
        if (void 0 !== b) return b;
        for (; a.parentElement; ) if (((a = a.parentElement), (b = a.dataset.paction), void 0 !== b)) return b;
        return "";
    }
    function I4() {
        yL.apply(this, arguments);
    }
    q(I4, yL);
    I4.prototype.dF = function (a) {
        yL.prototype.dF.call(this, a);
        this.context.Tx = a.is_testbed;
        this.context.Tw = a.enabled_floatingplayer;
        this.context.FQ = a.smc_tooltip_enabled;
        this.context.bU = a.show_sentiment_survey;
        this.context.MS = a.refreshFrequency;
        this.context.EM = "chatroom";
    };
    I4.prototype.Bc = function () {
        yL.prototype.Bc.call(this);
        yL.prototype.Sn.call(this);
        J4(this);
        F4();
    };
    I4.prototype.oK = function () {};
    function J4(a) {
        var b, c;
        document.body.style.minWidth = 500 - yd() + "px";
        var d = document.getElementById("base");
        d.style.overflowX = "hidden";
        d.style.position = "relative";
        a.context.FQ && (uc = !0);
        a.context.bU && BW();
        var e = null !== (c = null === (b = window.location.pathname.match(/\/([^\/]+)\/?$/)) || void 0 === b ? void 0 : b[1]) && void 0 !== c ? c : "";
        document.title = fe(e);
        jy()
            .then(function (f) {
                new s4(e, f, a.context);
            })
            .catch(function () {});
        G.g(function (f) {
            ga("set", "page", f.A.j);
            ga("send", "pageview");
            ny(f.l, f.A.kd);
            F("RoomLoaded", { location: "desktop" });
            ky();
        });
        Rr(document);
    }
    window.TS = I4;
}.call(this));
